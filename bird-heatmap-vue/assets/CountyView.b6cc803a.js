import{i as _,b as g,c as v}from"./gmaps.b195cf8c.js";import{_ as p,o as n,c as u,r as T,a as t,t as d,F as f,b as y,e as b,w as C,v as L,f as M,g as w,n as x,d as k,p as D,h as Y}from"./index.88855cdf.js";const F={name:"county-map",props:["name","countyData"],data(){return{vueGMap:null,mapName:this.name+"-map",API_KEY:"AIzaSyDfg24RRLOVbQFWVCN0Mx4bMGQqmpKqPfs",minZoomLevel:5,maxZoomLevel:10,UKBounds:{north:61.434329,south:49.758414,east:3.229716,west:-11.55975}}},methods:{googleMapsFailedToLoad(){this.vueGMap="Error occurred"},setMapStyles(){this.vueGMap.data.setStyle(e=>(e.getProperty("name"),{fillColor:"#666",fillOpacity:.8,strokeColor:"#FFF",strokeOpacity:.2,strokeWeight:1.5})),this.vueGMap.data.addListener("mouseover",e=>{var s=e.feature.getProperty("name");this.vueGMap.data.revertStyle(),this.vueGMap.data.overrideStyle(e.feature,{fillColor:"#FFF"}),this.requestHighlight(s)}),this.vueGMap.data.addListener("mouseout",()=>{this.vueGMap.data.revertStyle(),this.requestReset()})},requestHighlight(e){this.$emit("highlight",e)},requestReset(){this.$emit("reset")},requestLoaded(){this.mapLoaded=!0,this.$emit("mapLoaded")},requestLoading(){this.$emit("mapLoading")}},async mounted(){try{const e=await _();this.requestLoading();const s=this.$el,o={zoom:6,center:{lat:56.0053834,lng:-2.5742888},restriction:{latLngBounds:this.UKBounds,strictBounds:!1},disableDefaultUI:!0,zoomControl:!0,minZoom:this.minZoomLevel,maxZoom:this.maxZoomLevel,scaleControl:!0,styles:[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#746855"}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]}]};this.vueGMap=new e.maps.Map(s,o),this.vueGMap.data.addGeoJson(this.countyData),window.innerWidth<500&&this.vueGMap.fitBounds(this.UKBounds),this.setMapStyles(),this.requestLoaded()}catch{this.googleMapsFailedToLoad}}},G=["id"];function S(e,s,o,i,a,l){return n(),u("div",{class:"google-map",id:a.mapName},null,8,G)}const I=p(F,[["render",S]]);const q={name:"CountyView",components:{CountyMap:I},data(){return{loaded:!1,selectedCounty:null,selectedYear:this.getCurrentYear(),birdData:g,countyData:v,yearLookup:this.getYearLookup()}},computed:{topTenData(){let e=`percent_gardens_${this.selectedYear}`;return this.birdData.filter(i=>i.county.match(this.selectedCounty)).sort((i,a)=>i[e]<a[e]?1:-1).slice(0,10).slice(0,10)},yearOptions(){return this.yearLookup.map(e=>e.year)},selectedYearColumn(){return"percent_gardens_"+this.selectedYear}},methods:{imageFilePath(e){let s=e.replace(/\s+/g,"-").toLowerCase();return"src/assets/images/"+s+".png"},getYearLookup(){let e=[],s=this.getCurrentYear(),o=2018;for(;o<=s;){let i={year:o,column:`percent_gardens_${o}`};e.push(i),o+=1}return e},getCurrentYear(){return new Date().getFullYear()},highlightCounty(e){this.selectedCounty=e},resetCounty(){this.selectedCounty=null},mapIsLoaded(){this.loaded=!0},mapIsLoading(){this.loaded=!1},setColor(e){return e>95?"#990100":e>90?"#cc0001":e>85?"#fe0000":e>80?"#ff3300":e>75?"#ff6600":e>70?"#fe9900":e>65?"#ffcc00":e>60?"#fffc00":e>55?"#cbfe33":e>50?"#98ff66":e>45?"#67ff9a":e>40?"#33ffcc":e>35?"#00ffff":e>30?"#00ccff":e>25?"#0099ff":e>20?"#0166ff":e>15?"#0000fe":e>10?"#0033ff":e>5?"#0000cc":"#000098"}}},c=e=>(D("data-v-f9f75aa8"),e=e(),Y(),e),V={class:"container mt-3 mt-lg-5"},B={class:"d-flex justify-content-lg-between align-items-start"},N={class:"legend m-0"},O={key:0,class:"shadow"},P={class:"figcaption_county"},R={class:"figcaption_percent"},Z={class:"figcaption_data"},z={class:"m-0"},K=c(()=>t("thead",null,[t("tr",null,[t("th",null,"Species"),t("th",null,"Percent of Gardens")])],-1)),U={class:"text-end"},$=c(()=>t("label",{for:"year",class:"visually-hidden"},"Year:",-1)),H=["value"],E=c(()=>t("div",{class:"lds-ripple"},[t("div"),t("div")],-1)),W=[E];function j(e,s,o,i,a,l){const h=T("county-map");return n(),u("div",null,[t("div",V,[t("div",B,[t("figure",N,[a.selectedCounty?(n(),u("figcaption",O,[t("span",P,d(a.selectedCounty),1),t("span",R,[t("span",Z,[t("table",z,[K,t("tbody",null,[(n(!0),u(f,null,y(l.topTenData,r=>(n(),u("tr",{key:r},[t("td",null,d(r.species),1),t("td",U,[t("span",{class:"percent-indicator",style:x({backgroundColor:l.setColor(r[`percent_gardens_${a.selectedYear}`])})},null,4),k(" "+d(r[`percent_gardens_${a.selectedYear}`].toFixed(1))+"% ",1)])]))),128))])])])])])):b("",!0)]),$,C(t("select",{"onUpdate:modelValue":s[0]||(s[0]=r=>a.selectedYear=r),class:"dropdown-list mb-1 ms-3"},[(n(!0),u(f,null,y(l.yearOptions,(r,m)=>(n(),u("option",{key:m,value:r},d(r),9,H))),128))],512),[[L,a.selectedYear]])])]),t("div",{class:M(["loader",{"is-paused fade":!this.loaded}])},W,2),w(h,{name:"county-map",countyData:a.countyData,onHighlight:l.highlightCounty,onReset:l.resetCounty,onMapLoaded:l.mapIsLoaded,onMapLoading:l.mapIsLoading},null,8,["countyData","onHighlight","onReset","onMapLoaded","onMapLoading"])])}const J=p(q,[["render",j],["__scopeId","data-v-f9f75aa8"]]);export{J as default};
