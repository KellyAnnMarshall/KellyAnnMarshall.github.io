{"version":3,"sources":["webpack:///./node_modules/core-js/internals/object-get-own-property-names-external.js","webpack:///./node_modules/@probe.gl/stats/dist/esm/utils/hi-res-timestamp.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-context.js","webpack:///./node_modules/probe.gl/dist/es5/env/get-browser.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/globals.js","webpack:///./node_modules/probe.gl/dist/esm/env/is-electron.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-vertex-array-object.js","webpack:///./node_modules/probe.gl/dist/esm/env/globals.js","webpack:///./node_modules/@math.gl/core/node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/base/matrix.js","webpack:///./node_modules/@math.gl/core/node_modules/gl-matrix/esm/mat4.js","webpack:///./node_modules/@math.gl/core/node_modules/gl-matrix/esm/vec2.js","webpack:///./node_modules/@math.gl/core/node_modules/gl-matrix/esm/vec4.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/matrix4.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/get-parameter-polyfill.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/polyfill/polyfill-table.js","webpack:///./node_modules/core-js/internals/this-number-value.js","webpack:///./node_modules/core-js/internals/path.js","webpack:///./node_modules/node-libs-browser/mock/process.js","webpack:///./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/globals.js","webpack:///./node_modules/@math.gl/core/dist/esm/index.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/assert.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/@math.gl/core/dist/esm/lib/common.js","webpack:///./node_modules/@math.gl/core/node_modules/gl-matrix/esm/common.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/core-js/internals/inherit-if-required.js","webpack:///./src/views/4-Hexagons.vue?d3a8","webpack:///./node_modules/core-js/internals/define-well-known-symbol.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/utils/globals.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/state-tracker/unified-parameter-api.js","webpack:///./node_modules/probe.gl/dist/es5/env/globals.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/webgl-checks.js","webpack:///./node_modules/core-js/modules/es.symbol.js","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/state-tracker/webgl-parameter-tables.js","webpack:///./node_modules/@math.gl/core/dist/esm/lib/gl-matrix-extras.js","webpack:///./node_modules/@math.gl/core/dist/esm/lib/assert.js","webpack:///./node_modules/probe.gl/dist/es5/env/is-browser.js","webpack:///./node_modules/probe.gl/env.js","webpack:///./node_modules/hammerjs/hammer.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/base/vector.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/vector3.js","webpack:///./node_modules/probe.gl/dist/es5/env/index.js","webpack:///./node_modules/core-js/modules/es.symbol.iterator.js","webpack:///./src/views/4-Hexagons.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/animation/timeline.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/constants.js","webpack:///./node_modules/probe.gl/dist/esm/utils/globals.js","webpack:///./node_modules/probe.gl/dist/esm/utils/local-storage.js","webpack:///./node_modules/probe.gl/dist/esm/utils/formatters.js","webpack:///./node_modules/probe.gl/dist/esm/utils/color.js","webpack:///./node_modules/probe.gl/dist/esm/utils/autobind.js","webpack:///./node_modules/probe.gl/dist/esm/utils/assert.js","webpack:///./node_modules/probe.gl/dist/esm/utils/hi-res-timestamp.js","webpack:///./node_modules/probe.gl/dist/esm/lib/log.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/log.js","webpack:///./node_modules/@deck.gl/core/dist/esm/debug/index.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/flatten.js","webpack:///./node_modules/@probe.gl/stats/dist/esm/lib/stat.js","webpack:///./node_modules/@probe.gl/stats/dist/esm/lib/stats.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/javascript-utils/is-type.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/env-utils/assert.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/normalize-loader.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/file-aliases.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/utils/mime-type-utils.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/utils/resource-utils.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/utils/response-utils.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/fetch/fetch-file.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loggers.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-defaults.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/option-utils.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/assert.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/version.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/validate-worker-version.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-utils/get-loadable-worker-url.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-utils/get-transfer-list.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-thread.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-job.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-pool.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-farm/worker-farm.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/worker-api/get-worker-url.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/worker-loader-utils/parse-with-worker.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/buffer-utils.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/array-buffer-utils.js","webpack:///./node_modules/@loaders.gl/loader-utils/dist/esm/lib/iterators/async-iteration.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-string-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-array-buffer-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-blob-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-stream-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/iterators/make-iterator/make-iterator.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/get-data.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/loader-utils/loader-context.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/register-loaders.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/select-loader.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/parse.js","webpack:///./node_modules/@loaders.gl/core/dist/esm/lib/api/load.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/resource/resource.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/resource/resource-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/typed-array-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/math-utils.js","webpack:///./node_modules/gl-matrix/esm/common.js","webpack:///./node_modules/gl-matrix/esm/mat4.js","webpack:///./node_modules/@math.gl/web-mercator/node_modules/gl-matrix/esm/common.js","webpack:///./node_modules/@math.gl/web-mercator/node_modules/gl-matrix/esm/vec4.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/math-utils.js","webpack:///./node_modules/@math.gl/web-mercator/node_modules/gl-matrix/esm/mat4.js","webpack:///./node_modules/@math.gl/web-mercator/node_modules/gl-matrix/esm/vec2.js","webpack:///./node_modules/@math.gl/web-mercator/node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/assert.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/web-mercator-utils.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/fit-bounds.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/get-bounds.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/web-mercator-viewport.js","webpack:///./node_modules/@math.gl/web-mercator/dist/esm/normalize-viewport-props.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/constants.js","webpack:///./node_modules/@deck.gl/core/dist/esm/viewports/viewport.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/constants.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/assert.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/filters/prop-types.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/shader-module.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/resolve-modules.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/is-old-ie.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/webgl-info.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/platform-defines.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/module-injectors.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/inject-shader.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/transpile-shader.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/lib/assemble-shaders.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/log.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/device-pixels.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/context/context.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/init.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/assert.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/constants-to-keys.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/stub-methods.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/resource.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/typed-array-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/check-props.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/accessor.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/buffer.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-formats.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/load-file.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-2d.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer-formats.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/renderbuffer.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/clear.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/format-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-cube.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/texture-3d.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/texture-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/copy-and-blit.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/features/webgl-features-table.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/features/features.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/framebuffer.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/uniforms.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-name.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-type-name.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/format-glsl-error.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/shader.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/attribute-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/program-configuration.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/program.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/program-manager.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/fp32/fp32.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/misc/geometry.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.glsl.js","webpack:///./node_modules/gl-matrix/esm/vec4.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/memoize.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/viewport-uniforms.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/index.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/layer-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/deep-equal.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/view-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/positions.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/assert.js","webpack:///./node_modules/@deck.gl/core/dist/esm/views/view.js","webpack:///./node_modules/gl-matrix/esm/vec2.js","webpack:///./node_modules/@deck.gl/core/dist/esm/viewports/web-mercator-viewport.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/transition-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/transition-interpolator.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/linear-interpolator.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/controller.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/view-state.js","webpack:///./node_modules/@deck.gl/core/dist/esm/controllers/map-controller.js","webpack:///./node_modules/@deck.gl/core/dist/esm/views/map-view.js","webpack:///./node_modules/@deck.gl/core/dist/esm/effects/lighting/ambient-light.js","webpack:///./node_modules/@deck.gl/core/dist/esm/effects/lighting/directional-light.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/effect.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/layers-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/shadow-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/shadow/shadow.js","webpack:///./node_modules/@deck.gl/core/dist/esm/effects/lighting/lighting-effect.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/effect-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/draw-layers-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/passes/pick-layers-pass.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/deck-renderer.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/picking/query-object.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/picking/pick-info.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/deck-picker.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/tooltip.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/utils/version.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/utils/assert.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/category-api/image-type.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/category-api/parsed-image-api.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/svg-utils.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/category-api/binary-image-api.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","webpack:///./node_modules/@loaders.gl/images/dist/esm/image-loader.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/json-loader.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/init.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/query.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/webgl-utils/request-animation-frame.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/animation-loop.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/hammer-overrides.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/hammer.browser.js","webpack:///./node_modules/mjolnir.js/dist/esm/constants.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/wheel-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/move-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/key-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/inputs/contextmenu-input.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/event-utils.js","webpack:///./node_modules/mjolnir.js/dist/esm/utils/event-registrar.js","webpack:///./node_modules/mjolnir.js/dist/esm/event-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/deck.js","webpack:///./node_modules/@deck.gl/mapbox/dist/esm/deck-utils.js","webpack:///./node_modules/@deck.gl/mapbox/dist/esm/mapbox-layer.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/shader-attribute.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/gl-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/data-column.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/iterable-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/range.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/array-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-utils.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/utils/shader-utils.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/transform-feedback.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/buffer-transform.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/glsl-utils/get-shader-version.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/transform/transform.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/transform-shader-utils.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/texture-transform.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/array-utils-flat.js","webpack:///./node_modules/probe.gl/dist/esm/env/get-browser.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array-object.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/classes/vertex-array.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/utils/format-value.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/debug/debug-vertex-array.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/debug/debug-uniforms.js","webpack:///./node_modules/@luma.gl/webgl/dist/esm/debug/debug-program-configuration.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/model-utils.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/lib/model.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/transform/transform.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/gpu-interpolation-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/gpu-spring-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-transition-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/attribute/attribute-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/cpu-interpolation-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/transitions/cpu-spring-transition.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/uniform-transition-manager.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/props.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/count.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/shader.js","webpack:///./node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project/project-functions.js","webpack:///./node_modules/@deck.gl/core/dist/esm/utils/texture.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/prop-types.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/create-props.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/component-state.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lifecycle/component.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/layer-state.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/layer.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/project32/project32.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/lights/lights.glsl.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/lights/lights.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/phong-lighting/phong-lighting.glsl.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/phong-lighting/phong-lighting.js","webpack:///./node_modules/@luma.gl/shadertools/dist/esm/modules/picking/picking.js","webpack:///./node_modules/@deck.gl/core/dist/esm/shaderlib/picking/picking.js","webpack:///./node_modules/@luma.gl/engine/dist/esm/geometry/geometry.js","webpack:///./node_modules/@math.gl/polygon/dist/esm/polygon-utils.js","webpack:///./node_modules/@deck.gl/layers/dist/esm/column-layer/column-geometry.js","webpack:///./node_modules/@deck.gl/layers/dist/esm/column-layer/column-layer-vertex.glsl.js","webpack:///./node_modules/@deck.gl/layers/dist/esm/column-layer/column-layer-fragment.glsl.js","webpack:///./node_modules/@deck.gl/layers/dist/esm/column-layer/column-layer.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/utils/color-utils.js","webpack:///./node_modules/d3-hexbin/src/hexbin.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/hexagon-layer/hexagon-aggregator.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/utils/scale-utils.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/utils/bin-sorter.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/utils/aggregation-operation-utils.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/utils/cpu-aggregator.js","webpack:///./node_modules/@deck.gl/core/dist/esm/lib/composite-layer.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/utils/prop-utils.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/aggregation-layer.js","webpack:///./node_modules/@deck.gl/aggregation-layers/dist/esm/hexagon-layer/hexagon-layer.js","webpack:///./node_modules/d3-dispatch/src/dispatch.js","webpack:///./node_modules/d3-selection/src/selector.js","webpack:///./node_modules/d3-selection/src/selection/select.js","webpack:///./node_modules/d3-selection/src/array.js","webpack:///./node_modules/d3-selection/src/selectorAll.js","webpack:///./node_modules/d3-selection/src/selection/selectAll.js","webpack:///./node_modules/d3-selection/src/matcher.js","webpack:///./node_modules/d3-selection/src/selection/selectChild.js","webpack:///./node_modules/d3-selection/src/selection/selectChildren.js","webpack:///./node_modules/d3-selection/src/selection/filter.js","webpack:///./node_modules/d3-selection/src/selection/sparse.js","webpack:///./node_modules/d3-selection/src/selection/enter.js","webpack:///./node_modules/d3-selection/src/constant.js","webpack:///./node_modules/d3-selection/src/selection/data.js","webpack:///./node_modules/d3-selection/src/selection/exit.js","webpack:///./node_modules/d3-selection/src/selection/join.js","webpack:///./node_modules/d3-selection/src/selection/merge.js","webpack:///./node_modules/d3-selection/src/selection/order.js","webpack:///./node_modules/d3-selection/src/selection/sort.js","webpack:///./node_modules/d3-selection/src/selection/call.js","webpack:///./node_modules/d3-selection/src/selection/nodes.js","webpack:///./node_modules/d3-selection/src/selection/node.js","webpack:///./node_modules/d3-selection/src/selection/size.js","webpack:///./node_modules/d3-selection/src/selection/empty.js","webpack:///./node_modules/d3-selection/src/selection/each.js","webpack:///./node_modules/d3-selection/src/namespaces.js","webpack:///./node_modules/d3-selection/src/namespace.js","webpack:///./node_modules/d3-selection/src/selection/attr.js","webpack:///./node_modules/d3-selection/src/window.js","webpack:///./node_modules/d3-selection/src/selection/style.js","webpack:///./node_modules/d3-selection/src/selection/property.js","webpack:///./node_modules/d3-selection/src/selection/classed.js","webpack:///./node_modules/d3-selection/src/selection/text.js","webpack:///./node_modules/d3-selection/src/selection/html.js","webpack:///./node_modules/d3-selection/src/selection/raise.js","webpack:///./node_modules/d3-selection/src/selection/lower.js","webpack:///./node_modules/d3-selection/src/creator.js","webpack:///./node_modules/d3-selection/src/selection/append.js","webpack:///./node_modules/d3-selection/src/selection/insert.js","webpack:///./node_modules/d3-selection/src/selection/remove.js","webpack:///./node_modules/d3-selection/src/selection/clone.js","webpack:///./node_modules/d3-selection/src/selection/datum.js","webpack:///./node_modules/d3-selection/src/selection/on.js","webpack:///./node_modules/d3-selection/src/selection/dispatch.js","webpack:///./node_modules/d3-selection/src/selection/iterator.js","webpack:///./node_modules/d3-selection/src/selection/index.js","webpack:///./node_modules/d3-color/src/define.js","webpack:///./node_modules/d3-color/src/color.js","webpack:///./node_modules/d3-interpolate/src/basis.js","webpack:///./node_modules/d3-interpolate/src/basisClosed.js","webpack:///./node_modules/d3-interpolate/src/constant.js","webpack:///./node_modules/d3-interpolate/src/color.js","webpack:///./node_modules/d3-interpolate/src/rgb.js","webpack:///./node_modules/d3-interpolate/src/date.js","webpack:///./node_modules/d3-interpolate/src/number.js","webpack:///./node_modules/d3-interpolate/src/string.js","webpack:///./node_modules/d3-timer/src/timer.js","webpack:///./node_modules/d3-timer/src/timeout.js","webpack:///./node_modules/d3-transition/src/transition/schedule.js","webpack:///./node_modules/d3-transition/src/interrupt.js","webpack:///./node_modules/d3-interpolate/src/transform/parse.js","webpack:///./node_modules/d3-transition/src/selection/interrupt.js","webpack:///./node_modules/d3-interpolate/src/transform/decompose.js","webpack:///./node_modules/d3-interpolate/src/transform/index.js","webpack:///./node_modules/d3-transition/src/transition/tween.js","webpack:///./node_modules/d3-transition/src/transition/interpolate.js","webpack:///./node_modules/d3-transition/src/transition/attr.js","webpack:///./node_modules/d3-transition/src/transition/attrTween.js","webpack:///./node_modules/d3-transition/src/transition/delay.js","webpack:///./node_modules/d3-transition/src/transition/duration.js","webpack:///./node_modules/d3-transition/src/transition/ease.js","webpack:///./node_modules/d3-transition/src/transition/easeVarying.js","webpack:///./node_modules/d3-transition/src/transition/filter.js","webpack:///./node_modules/d3-transition/src/transition/merge.js","webpack:///./node_modules/d3-transition/src/transition/on.js","webpack:///./node_modules/d3-transition/src/transition/remove.js","webpack:///./node_modules/d3-transition/src/transition/select.js","webpack:///./node_modules/d3-transition/src/transition/selectAll.js","webpack:///./node_modules/d3-transition/src/transition/selection.js","webpack:///./node_modules/d3-transition/src/transition/style.js","webpack:///./node_modules/d3-transition/src/transition/styleTween.js","webpack:///./node_modules/d3-transition/src/transition/text.js","webpack:///./node_modules/d3-transition/src/transition/textTween.js","webpack:///./node_modules/d3-transition/src/transition/transition.js","webpack:///./node_modules/d3-transition/src/transition/end.js","webpack:///./node_modules/d3-transition/src/transition/index.js","webpack:///./node_modules/d3-ease/src/cubic.js","webpack:///./node_modules/d3-transition/src/selection/transition.js","webpack:///./node_modules/d3-transition/src/selection/index.js","webpack:///./node_modules/d3-brush/src/brush.js","webpack:///./node_modules/d3-dsv/src/dsv.js","webpack:///./node_modules/d3-dsv/src/csv.js","webpack:///./node_modules/d3-dsv/src/tsv.js","webpack:///./node_modules/d3-fetch/src/text.js","webpack:///./node_modules/d3-fetch/src/dsv.js","webpack:///./node_modules/d3-interpolate/src/zoom.js","webpack:///./node_modules/d3-zoom/src/transform.js","webpack:///./node_modules/d3-zoom/src/zoom.js","webpack:///./src/views/4-Hexagons.vue?a4a2","webpack:///./node_modules/probe.gl/dist/es5/env/is-electron.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/utils/utils.js","webpack:///./node_modules/path-browserify/index.js","webpack:///./node_modules/core-js/modules/es.symbol.description.js","webpack:///./node_modules/@math.gl/core/dist/esm/classes/base/math-array.js","webpack:///./node_modules/core-js/internals/well-known-symbol-wrapped.js","webpack:///./node_modules/probe.gl/dist/esm/env/is-browser.js","webpack:///./node_modules/@luma.gl/gltools/dist/esm/state-tracker/track-context-state.js","webpack:///./node_modules/@loaders.gl/worker-utils/dist/esm/lib/env-utils/globals.js","webpack:///./node_modules/@math.gl/core/dist/esm/lib/validators.js"],"names":["toIndexedObject","$getOwnPropertyNames","f","toString","windowNames","window","Object","getOwnPropertyNames","getWindowNames","it","error","slice","module","exports","call","getHiResTimestamp","timestamp","performance","now","process","hrtime","timeParts","Date","polyfillContext","gl","luma","polyfilled","initializeExtensions","installPolyfills","installOverrides","target","target2","global_","global","extensions","EXTENSIONS","getSupportedExtensions","extension","getExtension","keys","forEach","key","originalFunc","bind","polyfill","polyfills","polyfillExtension","defaults","meta","suffix","ext","extKey","args","_interopRequireDefault","defineProperty","value","isMobile","default","getBrowser","_globals","_isBrowser","_isElectron","orientation","mockUserAgent","navigator_","navigator","userAgent","indexOf","isMSIE","isTrident","chrome","safari","mozInnerScreenX","globals","self","document","isBrowser","String","browser","matches","version","exec","parseFloat","isElectron","type","versions","Boolean","electron","realUserAgent","glErrorShadow","msg","console","log","synthesizeGLError","err","opt_msg","undefined","wrapGLError","getError","apply","parseInt","WebGLVertexArrayObjectOES","this","isAlive","hasBeenBound","elementArrayBuffer","attribs","Array","maxVertexAttribs","n","length","attrib","VertexAttrib","maxAttrib","enabled","buffer","size","normalized","stride","offset","cached","recache","prototype","join","OESVertexArrayObject","original","getParameter","enableVertexAttribArray","disableVertexAttribArray","bindBuffer","getVertexAttrib","vertexAttribPointer","pname","VERTEX_ARRAY_BINDING_OES","currentVertexArrayObject","defaultVertexArrayObject","arguments","index","vao","Math","max","currentArrayBuffer","indx","instrumentExtension","canvas","addEventListener","reset_","polyfillVertexArrayObject","createVertexArray","original_getSupportedExtensions","list","push","original_getExtension","name","__OESVertexArrayObject","contextWasLost","vertexArrayObjects","ii","bindVertexArrayOES","createVertexArrayOES","arrayObject","deleteVertexArrayOES","splice","isVertexArrayOES","oldVAO","newVAO","currentBinding","oldAttrib","bufferChanged","window_","process_","create","out","Float32Array","dot","a","b","cross","ax","ay","az","bx","by","bz","transformMat4","m","x","y","z","w","transformMat3","transformQuat","q","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","rotateX","rad","p","r","cos","sin","rotateY","rotateZ","angle","mag1","sqrt","mag2","mag","cosine","acos","min","vec","assert","string","printRowMajor","row","RANK","col","concat","i","ELEMENTS","columnIndex","result","fill","firstIndex","columnVector","identity","transpose","a01","a02","a03","a12","a13","a23","invert","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","determinant","multiply","b0","b1","b2","b3","translate","v","rotate","axis","s","c","t","b12","b20","b21","b22","len","hypot","fromQuat","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","frustum","left","right","bottom","top","near","far","rl","tb","nf","perspective","fovy","aspect","tan","Infinity","ortho","lr","bt","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","abs","IDENTITY","freeze","ZERO","INDICES","COL0ROW0","COL0ROW1","COL0ROW2","COL0ROW3","COL1ROW0","COL1ROW1","COL1ROW2","COL1ROW3","COL2ROW0","COL2ROW1","COL2ROW2","COL2ROW3","COL3ROW0","COL3ROW1","COL3ROW2","COL3ROW3","constants","array","super","isArray","copy","check","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","_computeInfinitePerspectiveOffCenter","column0Row0","column1Row1","column2Row0","column2Row1","column2Row2","column2Row3","column3Row2","PI","focalDistance","Error","halfY","fov","scaleResult","scale","getScale","inverseScale0","inverseScale1","inverseScale2","radians","rx","ry","rz","factor","vector","transformAsPoint","vec3","transformAsVector","OES_element_index","WEBGL_draw_buffers","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_texture_filter_anisotropic","WEBGL_debug_renderer_info","GL_FRAGMENT_SHADER_DERIVATIVE_HINT","GL_DONT_CARE","GL_GPU_DISJOINT_EXT","GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT","GL_UNMASKED_VENDOR_WEBGL","GL_UNMASKED_RENDERER_WEBGL","getWebGL2ValueOrZero","WEBGL_PARAMETERS","GPU_DISJOINT_EXT","UNMASKED_VENDOR_WEBGL","UNMASKED_RENDERER_WEBGL","MAX_TEXTURE_MAX_ANISOTROPY_EXT","MAX_COLOR_ATTACHMENTS_WEBGL","MAX_DRAW_BUFFERS_WEBGL","getParameterPolyfill","originalGetParameter","limit","OES_vertex_array_object","ANGLE_instanced_arrays","ERR_VAO_NOT_SUPPORTED","getExtensionData","webgl2","WEBGL2_CONTEXT_POLYFILLS","deleteVertexArray","bindVertexArray","isVertexArray","location","divisor","drawElementsInstanced","drawArraysInstanced","drawBuffers","createQuery","deleteQuery","beginQuery","endQuery","handle","getQueryObject","WEBGL2_CONTEXT_OVERRIDES","readBuffer","attachment","getProgramParameter","program","getInternalformatParameter","format","Int32Array","TEXTURE_MAX_ANISOTROPY_EXT","valueOf","nextTick","fn","shift","setTimeout","platform","arch","execPath","title","pid","env","argv","binding","path","cwd","chdir","dir","resolve","exit","kill","umask","dlopen","uptime","memoryUsage","uvCounters","features","obj","__esModule","toLowerCase","passiveSupported","options","removeEventListener","mathgl","config","condition","message","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","replace","start","end","trim","round","EPSILON","formatValue","precision","toPrecision","ArrayBuffer","isView","DataView","duplicateArray","clone","map","func","clamp","lerp","ai","equals","epsilon","oldEpsilon","Number","isFinite","debug","printTypes","printDegrees","ARRAY_TYPE","RANDOM","random","_typeof","Symbol","iterator","constructor","isCallable","isObject","setPrototypeOf","dummy","Wrapper","NewTarget","NewTargetPrototype","hasOwn","wrappedWellKnownSymbolModule","NAME","setParameters","values","compositeSetters","glConstant","setter","cache","state","compositeSetter","getParameters","parameters","getter","parameterKeys","resetParameters","withParameters","nocatch","_typeof2","self_","document_","console_","ERR_CONTEXT","ERR_WEBGL2","isWebGL","WebGLRenderingContext","WebGL2RenderingContext","_version","isWebGL2","getWebGL2Context","assertWebGLContext","assertWebGL2Context","$","getBuiltIn","IS_PURE","DESCRIPTORS","NATIVE_SYMBOL","fails","isSymbol","anObject","toObject","toPropertyKey","$toString","createPropertyDescriptor","nativeObjectCreate","objectKeys","getOwnPropertyNamesModule","getOwnPropertyNamesExternal","getOwnPropertySymbolsModule","getOwnPropertyDescriptorModule","definePropertyModule","propertyIsEnumerableModule","redefine","shared","sharedKey","hiddenKeys","uid","wellKnownSymbol","defineWellKnownSymbol","setToStringTag","InternalStateModule","$forEach","HIDDEN","SYMBOL","PROTOTYPE","TO_PRIMITIVE","setInternalState","set","getInternalState","getterFor","ObjectPrototype","$Symbol","$stringify","nativeGetOwnPropertyDescriptor","nativeDefineProperty","nativeGetOwnPropertyNames","nativePropertyIsEnumerable","AllSymbols","ObjectPrototypeSymbols","StringToSymbolRegistry","SymbolToStringRegistry","WellKnownSymbolsStore","QObject","USE_SETTER","findChild","setSymbolDescriptor","get","O","P","Attributes","ObjectPrototypeDescriptor","wrap","tag","description","symbol","$defineProperty","enumerable","$defineProperties","Properties","properties","$getOwnPropertySymbols","$propertyIsEnumerable","$create","V","$getOwnPropertyDescriptor","descriptor","names","IS_OBJECT_PROTOTYPE","TypeError","configurable","unsafe","forced","sham","stat","keyFor","sym","useSetter","useSimple","defineProperties","getOwnPropertyDescriptor","getOwnPropertySymbols","FORCED_JSON_STRINGIFY","stringify","replacer","space","$replacer","isForced","inheritIfRequired","toPrimitive","thisNumberValue","NUMBER","NativeNumber","NumberPrototype","toNumeric","primValue","toNumber","argument","first","third","radix","maxCode","digits","code","charCodeAt","NaN","NumberWrapper","split","j","GL_PARAMETER_DEFAULTS","enable","disable","hint","pixelStorei","drawFramebuffer","bindFramebuffer","readFramebuffer","GL_PARAMETER_SETTERS","blendColor","clearColor","colorMask","cullFace","clearDepth","depthFunc","depthRange","depthMask","frontFace","lineWidth","scissor","clearStencil","stencilMaskSeparate","viewport","framebuffer","blend","blendEquation","blendEquationSeparate","blendFunc","blendFuncSeparate","cull","depthTest","dither","derivativeHint","mipmapHint","polygonOffsetFill","polygonOffset","sampleCoverage","scissorTest","stencilTest","stencilMask","mask","backMask","stencilFunc","ref","backFunc","backRef","stencilFuncSeparate","stencilOp","sfail","dpfail","dppass","backSfail","backDpfail","backDppass","stencilOpSeparate","getValue","glEnum","GL_COMPOSITE_PARAMETER_SETTERS","stencilFuncFront","stencilFuncBack","stencilOpFront","stencilOpBack","GL_HOOKED_SETTERS","update","capability","g","mode","modeRGB","modeAlpha","src","dst","srcRGB","dstRGB","srcAlpha","dstAlpha","depth","zNear","zFar","face","width","units","height","fail","zfail","zpass","isEnabled","GL_PARAMETER_GETTERS","vec2_transformMat4AsVector","vec3_transformMat4AsVector","vec3_transformMat2","isBrowserMainThread","isNode","exportName","assign","VENDOR_PREFIXES","TEST_ELEMENT","createElement","TYPE_FUNCTION","setTimeoutContext","timeout","context","bindFn","invokeArrayArg","arg","each","hasOwnProperty","deprecate","method","deprecationMessage","e","stack","warn","output","source","nextKey","extend","dest","merge","inherit","child","base","childP","baseP","_super","boolOrFn","val","ifUndefined","val1","val2","addEventListeners","types","handler","splitStr","removeEventListeners","hasParent","node","parent","parentNode","inStr","str","find","inArray","findByKey","toArray","uniqueArray","sort","results","prefixed","property","prefix","prop","camelProp","toUpperCase","_uniqueId","uniqueId","getWindowForElement","element","doc","ownerDocument","defaultView","parentWindow","MOBILE_REGEX","SUPPORT_TOUCH","SUPPORT_POINTER_EVENTS","SUPPORT_ONLY_TOUCH","test","INPUT_TYPE_TOUCH","INPUT_TYPE_PEN","INPUT_TYPE_MOUSE","INPUT_TYPE_KINECT","COMPUTE_INTERVAL","INPUT_START","INPUT_MOVE","INPUT_END","INPUT_CANCEL","DIRECTION_NONE","DIRECTION_LEFT","DIRECTION_RIGHT","DIRECTION_UP","DIRECTION_DOWN","DIRECTION_HORIZONTAL","DIRECTION_VERTICAL","DIRECTION_ALL","PROPS_XY","PROPS_CLIENT_XY","Input","manager","callback","inputTarget","domHandler","ev","init","createInputInstance","Type","inputClass","PointerEventInput","TouchInput","TouchMouseInput","MouseInput","inputHandler","eventType","input","pointersLen","pointers","changedPointersLen","changedPointers","isFirst","isFinal","session","computeInputData","emit","recognize","prevInput","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","getCenter","timeStamp","deltaTime","getAngle","distance","getDistance","computeDeltaXY","offsetDirection","getDirection","deltaX","deltaY","overallVelocity","getVelocity","overallVelocityX","overallVelocityY","rotation","getRotation","maxPointers","computeIntervalInputData","srcEvent","offsetDelta","prevDelta","velocity","velocityX","velocityY","direction","last","lastInterval","clientX","clientY","p1","p2","props","atan2","evEl","evTarget","evWin","destroy","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","MOUSE_ELEMENT_EVENTS","MOUSE_WINDOW_EVENTS","pressed","button","which","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","2","3","4","5","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","store","pointerEvents","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","isTouch","storeIndex","pointerId","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","SINGLE_TOUCH_TARGET_EVENTS","SINGLE_TOUCH_WINDOW_EVENTS","SingleTouchInput","started","normalizeSingleTouches","all","touches","changed","changedTouches","TOUCH_INPUT_MAP","TOUCH_TARGET_EVENTS","targetIds","getTouches","allTouches","identifier","targetTouches","changedTargetTouches","filter","touch","DEDUP_TIMEOUT","DEDUP_DISTANCE","mouse","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","removeLastTouch","isSyntheticEvent","dx","dy","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","style","NATIVE_TOUCH_ACTION","TOUCH_ACTION_COMPUTE","TOUCH_ACTION_AUTO","TOUCH_ACTION_MANIPULATION","TOUCH_ACTION_NONE","TOUCH_ACTION_PAN_X","TOUCH_ACTION_PAN_Y","TOUCH_ACTION_MAP","getTouchActionProps","TouchAction","cleanTouchActions","actions","hasPanX","hasPanY","touchMap","cssSupports","CSS","supports","compute","touchAction","recognizers","recognizer","getTouchAction","preventDefaults","prevented","preventDefault","hasNone","isTapPointer","isTapMovement","isTapTouchTime","preventSrc","STATE_POSSIBLE","STATE_BEGAN","STATE_CHANGED","STATE_ENDED","STATE_RECOGNIZED","STATE_CANCELLED","STATE_FAILED","Recognizer","id","simultaneous","requireFail","stateStr","directionStr","getRecognizerByNameIfManager","otherRecognizer","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","count","Hammer","preset","Manager","recognizeWith","dropRecognizeWith","requireFailure","dropRequireFailure","hasRequireFailures","canRecognizeWith","event","additionalEvent","tryEmit","canEmit","inputDataClone","reset","attrTest","optionPointers","isRecognized","isValid","threshold","directionTest","hasMoved","inOut","time","validPointers","validMovement","validTime","clearTimeout","taps","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","cssProps","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","STOP","FORCED_STOP","handlers","oldCssProps","toggleCssProps","item","add","triggerDomEvent","data","gestureEvent","createEvent","initEvent","gesture","dispatchEvent","stop","force","stopped","curRecognizer","existing","remove","on","events","off","Tap","Pan","Swipe","Pinch","Rotate","Press","freeGlobal","lengthSquared","mathArray","distanceSquared","dist","product","magnitude","vectors","subtract","multiplyScalar","ORIGIN","object","origin","matrix4","matrix3","matrix2","quaternion","_getBrowser","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","has","newObj","hasPropertyDescriptor","desc","class","for","species","_defineProperty","writable","channelHandles","animationHandles","Timeline","channels","Map","animations","playing","lastEngineTime","delay","duration","POSITIVE_INFINITY","rate","repeat","channel","_setChannelTime","delete","animationHandle","animation","detachAnimation","animationData","setTime","getTime","channelHandle","engineTime","offsetTime","totalDuration","LIFECYCLE","NO_STATE","MATCHED","INITIALIZED","AWAITING_GC","AWAITING_FINALIZATION","FINALIZED","PROP_SYMBOLS","COMPONENT","ASYNC_DEFAULTS","ASYNC_ORIGINAL","ASYNC_RESOLVED","__VERSION__","getStorage","storage","setItem","removeItem","LocalStorage","defaultSettings","_loadConfiguration","configuration","updateConfiguration","serialized","JSON","serializedConfiguration","getItem","parse","formatTime","ms","formatted","toFixed","leftPad","padLength","formatImage","image","maxWidth","imageUrl","floor","COLOR","BLACK","RED","GREEN","YELLOW","BLUE","MAGENTA","CYAN","WHITE","BRIGHT_BLACK","BRIGHT_RED","BRIGHT_GREEN","BRIGHT_YELLOW","BRIGHT_BLUE","BRIGHT_MAGENTA","BRIGHT_CYAN","BRIGHT_WHITE","getColor","color","addColor","background","autobind","predefined","proto","getPrototypeOf","propNames","originalConsole","info","DEFAULT_SETTINGS","level","noop","ONCE","once","getTableHeader","table","_startTs","_deltaTs","LOG_THROTTLE_TIMEOUT","_storage","userData","seal","newLevel","setLevel","getLevel","newPriority","_getLogFunction","oldUsage","newUsage","logLevel","columns","priority","_shouldLog","logImageInBrowser","logImageInNode","setting","timeEnd","opts","collapsed","normalizeArguments","groupCollapsed","group","groupEnd","trace","normalizeLogLevel","total","getTotal","delta","getDelta","decorateMessage","resolvedLevel","from","unshift","messageType","asciify","fit","then","img","Image","onload","nodeName","toDataURL","loggers","register","flatten","flattenArray","fillArray","copied","copyWithin","sampleSize","samples","addCount","subtractCount","_count","_samples","_checkSampling","_time","lastTiming","_startTime","_timerPending","addTime","lastSampleCount","lastSampleTime","stats","_initializeStats","_getOrCreate","average","getAverageTime","hz","getHz","isBoolean","isFunction","isPureObject","isIterable","isAsyncIterable","asyncIterator","isResponse","Response","arrayBuffer","text","json","isBlob","Blob","isReadableDOMStream","ReadableStream","tee","cancel","getReader","isBuffer","isReadableNodeStream","read","pipe","readable","isReadableStream","isLoaderObject","loader","_loader","hasExtensions","normalizeLoader","_loader2","_loader3","parseTextSync","parseText","binary","pathPrefix","fileAliases","resolvePath","filename","alias","startsWith","replacement","DATA_URL_PATTERN","MIME_TYPE_PATTERN","parseMIMEType","mimeString","parseMIMETypeFromURL","url","QUERY_STRING_PATTERN","getResourceUrlAndType","resource","stripQueryString","contentTypeHeader","headers","getResourceContentLength","byteLength","async","makeResponse","contentLength","initialDataUrl","getInitialDataUrl","TextEncoder","encode","response","checkResponse","ok","getResponseError","status","contentType","statusText","includes","INITIAL_DATA_LENGTH","blobSlice","Promise","reader","FileReader","_event$target","readAsDataURL","base64","arrayBufferToBase64","bytes","Uint8Array","fromCharCode","btoa","fetchFile","fetchOptions","fetch","probeLog","NullLog","DEFAULT_LOADER_OPTIONS","mimeType","nothrow","CDN","worker","maxConcurrency","maxMobileConcurrency","reuseWorkers","_workerType","_limitMB","batchSize","batchDebounceMs","metadata","transforms","REMOVED_LOADER_OPTIONS","throws","dataType","uri","body","credentials","redirect","referrer","referrerPolicy","integrity","keepalive","signal","getGlobalLoaderState","loaders","_state","getGlobalLoaderOptions","globalOptions","normalizeOptions","validateOptions","normalizeOptionsInternal","getFetchFunction","validateOptionsObject","idOptions","loaderOptions","deprecatedOptions","defaultOptions","loaderName","isSubOptions","isBaseUriOption","isWorkerUrlOption","suggestion","findSimilarOption","optionKey","lowerCaseOptionKey","bestSuggestion","lowerCaseKey","isPartialMatch","loaderDefaultOptions","mergedOptions","addUrlOptions","mergeNestedFields","baseUri","validateWorkerVersion","coreVersion","workerVersion","workerURLCache","getLoadableWorkerURL","workerURL","getLoadableWorkerURLFromURL","getLoadableWorkerURLFromSource","workerSource","buildScriptSource","blob","URL","createObjectURL","workerUrl","getTransferList","recursive","transfers","transfersSet","Set","isTransferable","MessagePort","ImageBitmap","OffscreenCanvas","NOOP","Worker","onMessage","onError","_createBrowserWorker","terminate","terminated","transferList","postMessage","lineno","colno","_loadableURL","onmessage","onerror","_getErrorFromErrorEvent","onmessageerror","jobName","workerThread","isRunning","_resolve","_reject","reject","payload","setProps","idleQueue","isDestroyed","onDebug","job","done","startPromise","onStart","jobQueue","_startQueuedJob","_getAvailableWorker","queuedJob","backlog","returnWorkerToQueue","shouldDestroyWorker","_getMaxConcurrency","DEFAULT_PROPS","isSupported","_workerFarm","workerPools","workerPool","_getWorkerPoolProps","NPM_TAG","getWorkerURL","workerOptions","workerFile","versionTag","canParseWithWorker","parseWithWorker","parseOnMainThread","workerFarm","getWorkerFarm","getWorkerPool","startJob","bufferToArrayBuffer","toArrayBuffer","byteOffset","uint8Array","_toArrayBuffer","compareArrayBuffers","arrayBuffer1","arrayBuffer2","array1","array2","concatenateArrayBuffers","sources","sourceArrays","source2","reduce","typedArray","sourceArray","concatenateArrayBuffersAsync","arrayBuffers","chunk","DEFAULT_CHUNK_SIZE","makeStringIterator","chunkSize","textEncoder","chunkLength","makeArrayBufferIterator","chunkByteLength","chunkArray","makeBlobIterator","makeStreamIterator","stream","makeBrowserStreamIterator","makeNodeStreamIterator","nextBatchPromise","currentBatchPromise","_streamReadAhead","releaseLock","makeIterator","ERR_DATA","getArrayBufferOrStringFromDataSync","textDecoder","TextDecoder","decode","getArrayBufferOrStringFromData","isArrayBuffer","getLoaderContext","previousContext","resolvedContext","getLoadersFromContext","candidateLoaders","contextLoaders","getGlobalLoaderRegistry","loaderRegistry","registerLoaders","normalizedLoader","registeredLoader","getRegisteredLoaders","EXT_PATTERN","selectLoader","validHTTPResponse","selectLoaderSync","getNoValidLoaderMessage","ignoreRegisteredLoaders","normalizeLoaders","selectLoaderInternal","testUrl","findLoaderByMIMEType","findLoaderByUrl","findLoaderByInitialBytes","fallbackMimeType","getFirstCharacters","match","findLoaderByExtension","loaderExtension","mimeTypes","testDataAgainstText","testDataAgainstBinary","testText","tests","some","testBinary","magic","getMagicString","dataView","getUint8","typedLoaders","parseWithLoader","parseSync","load","_loadCount","_subscribers","setData","consumer","isLoaded","_error","_content","getData","forceUpdate","_data","loadCount","catch","subscriber","onChange","protocol","_context","resourceManager","_resources","_consumers","_pruneRequest","resourceId","persistent","res","consumerId","requestId","request","unsubscribe","prune","resources","_track","_prune","consumers","subscribe","inUse","TypedArrayManager","_pool","overAlloc","poolSize","padding","initialize","maxCount","newSize","BYTES_PER_ELEMENT","maxSize","newArray","_allocate","_release","sizeToAllocate","ceil","pool","findIndex","createMat4","getCameraPosition","viewMatrixInverse","getFrustumPlanes","viewProjectionMatrix","planes","getFrustumPlane","scratchVector","d","L","normal","fp64LowPart","fround","scratchArray","toDoublePrecisionArray","startIndex","endIndex","allocate","sourceIndex","targetIndex","subarray","transformVector","matrix","modulus","ieLog2","LOG2E","log2","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","PI_4","DEGREES_TO_RADIANS","RADIANS_TO_DEGREES","TILE_SIZE","EARTH_CIRCUMFERENCE","DEFAULT_ALTITUDE","zoomToScale","zoom","pow","scaleToZoom","lngLatToWorld","lng","lat","lambda2","phi2","worldToLngLat","atan","exp","getMeterZoom","latitude","latCosine","getDistanceScales","longitude","highPrecision","worldSize","unitsPerDegreeX","unitsPerDegreeY","altUnitsPerMeter","unitsPerMeter","metersPerUnit","unitsPerDegree","degreesPerUnit","latCosine2","unitsPerDegreeY2","altUnitsPerDegree2","altUnitsPerMeter2","unitsPerDegree2","unitsPerMeter2","addMetersToLngLat","lngLatZ","xyz","worldspace","newLngLat","newZ","getViewMatrix","pitch","bearing","altitude","vm","getProjectionParameters","altitudeToFovy","nearZMultiplier","farZMultiplier","halfFov","fovyToAltitude","pitchRadians","topHalfSurfaceDistance","farZ","getProjectionMatrix","projectionMatrix","worldToPixels","pixelProjectionMatrix","pixelsToWorld","pixelUnprojectionMatrix","targetZ","coord","coord0","coord1","fitBounds","bounds","minExtent","maxZoom","west","south","east","north","nw","project","se","targetSize","scaleX","scaleY","offsetX","offsetY","centerLngLat","unproject","getBounds","unprojectOps","bottomLeft","bottomRight","topLeft","topRight","angleToGround","unprojectOnFarPlane","distanceScales","position","viewMatrix","meterOffset","_initMatrices","projectPosition","unprojectPosition","vpm","mInverse","worldPosition","targetZWorld","X","Y","Z","lngLat","xy","pos","fromLocation","toLocation","newCenter","getMapCenterByLngLatPosition","corners","getBoundingRegion","normalizeViewportProps","minZoom","halfHeightPixels","minLatitude","maxLatitude","COORDINATE_SYSTEM","DEFAULT","LNGLAT","METER_OFFSETS","LNGLAT_OFFSETS","CARTESIAN","deprecated","PROJECTION_MODE","WEB_MERCATOR","GLOBE","WEB_MERCATOR_AUTO_OFFSET","UNIT","common","meters","pixels","EVENTS","click","panstart","panmove","panend","ZERO_VECTOR","DEFAULT_ZOOM","DEFAULT_DISTANCE_SCALES","displayName","_frustumPlanes","_initViewMatrix","_initProjectionMatrix","_initPixelMatrices","projectFlat","unprojectFlat","isGeospatial","unprojectOption","coordinateOrigin","coords","pixel","cameraPosition","cameraDirection","cameraUp","orthographic","fovyRadians","modelMatrix","_getCenterInWorld","viewMatrixUncentered","multiplyRight","negate","commonPosition","_createProjectionMatrix","viewportMatrix","VERTEX_SHADER","FRAGMENT_SHADER","TYPE_DEFINITIONS","number","propType","parsePropTypes","propDefs","propTypes","propName","propDef","parsePropType","getTypeOf","vs","fs","dependencies","uniforms","getUniforms","deprecations","defines","inject","vertexShader","fragmentShader","getModuleUniforms","_parseDeprecationDefinitions","injections","normalizeInjections","moduleSource","_defaultGetUniforms","shaderSource","def","regex","old","new","removed","private","validate","hook","injection","stage","order","resolveModules","modules","getShaderDependencies","instantiateModules","moduleMap","moduleDepth","getDependencyGraph","seen","isOldIE","GL_VENDOR","GL_RENDERER","GL_VERSION","GL_SHADING_LANGUAGE_VERSION","WEBGL_FEATURES","GLSL_FRAG_DATA","GLSL_FRAG_DEPTH","GLSL_DERIVATIVES","GLSL_TEXTURE_LOD","FEATURES","getContextInfo","vendor","renderer","gpuVendor","identifyGPUVendor","gpuInfo","shadingLanguageVersion","compiledGlslExtensions","canCompileGLGSExtension","cap","feature","extensionName","behavior","shader","createShader","compileShader","canCompile","getShaderParameter","deleteShader","getFeature","hasFeatures","every","getPlatformShaderDefines","debugInfo","getVersionDefines","glslVersion","isFragment","versionDefines","MODULE_INJECTORS_VS","MODULE_INJECTORS_FS","MODULE_INJECTORS","DECLARATION_INJECT_MARKER","REGEX_START_OF_MAIN","REGEX_END_OF_MAIN","fragments","injectShader","injectStandardStubs","isVertex","fragmentData","fragmentString","combineInjects","injects","testVariable","qualifier","ES300_REPLACEMENTS","ES300_VERTEX_REPLACEMENTS","ES300_FRAGMENT_REPLACEMENTS","ES100_REPLACEMENTS","ES100_VERTEX_REPLACEMENTS","ES100_FRAGMENT_REPLACEMENTS","ES100_FRAGMENT_OUTPUT_NAME","ES300_FRAGMENT_OUTPUT_REGEX","transpileShader","targetGLSLVersion","convertShader","convertFragmentShaderTo300","convertFragmentShaderTo100","replacements","pattern","outputMatch","outputName","INJECT_SHADER_DECLARATIONS","SHADER_TYPE","FRAGMENT_SHADER_PROLOGUE","assembleShaders","assembleShader","assembleGetUniforms","hookFunctions","transpileToGLSL100","prologue","sourceLines","versionLine","coreSource","allDefines","getDefines","assembledSource","getShaderName","getShaderType","getApplicationDefines","hookFunctionMap","normalizeHookFunctions","hookInjections","declInjections","mainInjections","hash","checkDeprecations","getModuleSource","injectionType","getHookFunctions","moduleUniforms","injectShaderName","sourceText","define","hookName","hookFunction","signature","header","footer","cssToDeviceRatio","clientWidth","canvasSizeInfo","drawingBufferWidth","cssToDevicePixels","cssPixel","yInvert","ratio","drawingBufferHeight","scalePixels","getDevicePixelRatio","useDevicePixels","windowRatio","devicePixelRatio","xHigh","yHigh","isPage","CONTEXT_DEFAULTS","webgl1","throwOnError","manageState","createGLContext","targetCanvas","getCanvas","createBrowserContext","instrumentGLContext","logInfo","_instrumented","getVersion","copyState","makeDebugContext","getContextDebugInfo","vendorMasked","rendererMasked","vendorUnmasked","rendererUnmasked","resizeGLContext","setDevicePixelRatio","resize","errorMessage","onCreateError","statusMessage","getContext","onContextLost","onContextRestored","isPageLoaded","readyState","getElementById","insertBefore","firstChild","webGL","driver","clientHeight","cachedSize","clampedPixelRatio","canvasWidth","canvasHeight","STARTUP_MESSAGE","lumaStats","nodeIO","getKeyValue","isNaN","getKey","uidCounters","isPowerOfTwo","isObjectEmpty","isEmpty","stubRemovedMethods","instance","className","methodNames","upgradeMessage","methodName","ERR_RESOURCE_METHOD_UNDEFINED","gl2","_bound","_handle","_createHandle","_addStats","deleteChildren","children","_deleteHandle","_removeStats","funcOrHandle","_bindHandle","PARAMETERS","parameter","isWebgl2","parameterAvailable","webgl1Default","webgl2Default","defaultValue","_getParameter","_setParameter","setParameter","incrementCount","decrementCount","ERR_TYPE_DEDUCTION","getGLTypeFromTypedArray","arrayOrType","Uint16Array","Uint32Array","Uint8ClampedArray","Int8Array","Int16Array","getTypedArrayFromGLType","glType","clamped","flipRows","bytesPerPixel","temp","bytesPerRow","topOffset","bottomOffset","newWidth","newHeight","newData","checkProps","propChecks","removedProps","deprecatedProps","replacedProps","replacementProp","newProps","DEFAULT_ACCESSOR_VALUES","integer","PROP_CHECKS","instanced","isInstanced","accessor","ArrayType","accessors","_assign","getBytesPerElement","getBytesPerVertex","DEBUG_DATA_LENGTH","DEPRECATED_PROPS","PROP_CHECKS_INITIALIZE","PROP_CHECKS_SET_PROPS","usage","debugData","setAccessor","_setData","_setByteLength","bytesUsed","srcOffset","bufferSubData","_inferType","sourceBuffer","readOffset","writeOffset","copyBufferSubData","dstData","srcByteOffset","dstOffset","sourceAvailableElementCount","_getAvailableElementCount","dstElementOffset","dstAvailableElementCount","dstElementCount","copyElementCount","getBufferSubData","bindBufferRange","bindBufferBase","isIndexedBuffer","_trackDeallocatedMemory","_getTarget","bufferData","_trackAllocatedMemory","sourceElementOffset","getElementCount","createBuffer","deleteBuffer","getBufferParameter","reallocate","TEXTURE_FORMATS","dataFormat","DATA_FORMAT_CHANNELS","TYPE_SIZES","isFormatSupported","gl1","isLinearFilteringSupported","NPOT_MIN_FILTERS","WebGLBuffer","linearFiltering","supported","textureUnit","loaded","border","mipmaps","resolvedImageData","isVideo","HTMLVideoElement","HAVE_METADATA","_video","recreate","pixelStore","compressed","_deduceParameters","activeTexture","bindTexture","_isNPOT","_updateForNPOT","setImageData","generateMipmap","video","lastTime","HAVE_CURRENT_DATA","currentTime","setSubImageData","params","_getDataType","texImage2D","levelIndex","levelData","entries","compressedTexImage2D","channelSize","ndarray","shape","compressedTexSubImage2D","texSubImage2D","textureFormat","_deduceImageSize","ImageData","HTMLImageElement","naturalWidth","naturalHeight","HTMLCanvasElement","videoWidth","videoHeight","createTexture","deleteTexture","getTexParameter","param","_getNPOTParam","texParameterf","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","loadImage","crossOrigin","EXT_FLOAT_WEBGL2","bpp","formats","bindRenderbuffer","renderbufferStorageMultisample","renderbufferStorage","createRenderbuffer","deleteRenderbuffer","getRenderbufferParameter","GL_DEPTH_BUFFER_BIT","GL_STENCIL_BUFFER_BIT","GL_COLOR_BUFFER_BIT","GL_COLOR","GL_DEPTH","GL_STENCIL","GL_DEPTH_STENCIL","ERR_ARGUMENTS","clear","stencil","clearFlags","clearBuffer","drawBuffer","clearBufferiv","clearBufferuiv","clearBufferfv","clearBufferfi","glFormatToComponents","FACES","setCubeMapImageData","mipmapLevel","_subImage","imageDataMap","resolvedFaces","facePixels","lodLevel","unbind","imageData","setImageDataForFace","unpackFlipY","texImage3D","cloneTextureFrom","refTexture","overrides","TextureType","textureOptions","toFramebuffer","texture","attachments","readPixelsToArray","sourceX","sourceY","sourceFormat","sourceAttachment","sourceWidth","sourceHeight","sourceType","deleteFramebuffer","getFramebuffer","getPixelArray","prevHandle","readPixels","copyToDataUrl","targetMaxHeight","MAX_SAFE_INTEGER","createImageData","putImageData","pixelArray","components","WEBGL2","VERTEX_ARRAY_OBJECT","TIMER_QUERY","INSTANCED_RENDERING","MULTIPLE_RENDER_TARGETS","ELEMENT_INDEX_UINT32","BLEND_EQUATION_MINMAX","FLOAT_BLEND","COLOR_ENCODING_SRGB","TEXTURE_DEPTH","TEXTURE_FLOAT","TEXTURE_HALF_FLOAT","TEXTURE_FILTER_LINEAR_FLOAT","TEXTURE_FILTER_LINEAR_HALF_FLOAT","TEXTURE_FILTER_ANISOTROPIC","COLOR_ATTACHMENT_RGBA32F","COLOR_ATTACHMENT_FLOAT","COLOR_ATTACHMENT_HALF_FLOAT","checkFloat32ColorAttachment","testTexture","testFb","getStatus","LOG_UNSUPPORTED_FEATURE","hasFeature","isFeatureSupported","getFeatures","caps","queryFeature","featureDefinition","ERR_MULTIPLE_RENDERTARGETS","colorBufferFloat","colorBufferHalfFloat","defaultFramebuffer","MAX_COLOR_ATTACHMENTS","MAX_DRAW_BUFFERS","ownResources","_createDefaultAttachments","clearAttachments","checkStatus","resizeAttachments","attach","_setReadBuffer","_setDrawBuffers","attachmentPoint","newAttachments","_attachRenderbuffer","renderbuffer","layer","_attachTexture","_unattach","_getFrameBufferStatus","checkFramebufferStatus","invalidateAll","invalidateFramebuffer","_getAttachmentParameterFallback","getFramebufferAttachmentParameter","ATTACHMENT_PARAMETERS","getAttachmentParameter","attachmentName","getAttachmentParameters","open","defaultAttachments","oldAttachment","framebufferRenderbuffer","framebufferTexture2D","framebufferTextureLayer","mapIndexToCubeMapFace","drawBuffersWEBGL","EXT_sRGB","createFramebuffer","STATUS","FRAMEBUFFER_ATTACHMENT_PARAMETERS","UNIFORM_SETTERS","getArraySetter","toFloatArray","setVectorUniform","toIntArray","setMatrixUniform","getSamplerSetter","toUIntArray","FLOAT_ARRAY","INT_ARRAY","UINT_ARRAY","toTypedArray","uniformLength","getUniformSetter","parseUniformName","UNIFORM_NAME_REGEXP","checkUniformValues","uniformMap","uniformName","shouldCheck","checkUniformValue","checkUniformArray","copyUniform","checkLength","uniform1i","functionName","uniformSetter","cacheLength","arrayValue","defaultName","SHADER_NAME_REGEXP","GL_FRAGMENT_SHADER","GL_VERTEX_SHADER","getShaderTypeName","parseGLSLCompilerError","errLog","shaderType","shaderName","errorStrings","errors","warnings","shaderDescription","errorString","segments","line","lines","addLineNumbers","formatErrors","column","substring","padLeft","delim","maxDigits","lineNumber","ERR_SOURCE","getTypeName","_compile","getShaderSource","getTranslatedShaderSource","compileStatus","infoLog","getShaderInfoLog","getSource","VertexShader","FragmentShader","GL_BYTE","GL_UNSIGNED_BYTE","GL_SHORT","GL_UNSIGNED_SHORT","GL_POINTS","GL_LINES","GL_LINE_LOOP","GL_LINE_STRIP","GL_TRIANGLES","GL_TRIANGLE_STRIP","GL_TRIANGLE_FAN","GL_FLOAT","GL_FLOAT_VEC2","GL_FLOAT_VEC3","GL_FLOAT_VEC4","GL_INT","GL_INT_VEC2","GL_INT_VEC3","GL_INT_VEC4","GL_UNSIGNED_INT","GL_UNSIGNED_INT_VEC2","GL_UNSIGNED_INT_VEC3","GL_UNSIGNED_INT_VEC4","GL_BOOL","GL_BOOL_VEC2","GL_BOOL_VEC3","GL_BOOL_VEC4","GL_FLOAT_MAT2","GL_FLOAT_MAT3","GL_FLOAT_MAT4","GL_FLOAT_MAT2x3","GL_FLOAT_MAT2x4","GL_FLOAT_MAT3x2","GL_FLOAT_MAT3x4","GL_FLOAT_MAT4x2","GL_FLOAT_MAT4x3","COMPOSITE_GL_TYPES","getPrimitiveDrawMode","drawMode","decomposeCompositeGLType","compositeGLType","typeAndSize","getCompositeGLType","compType","compComponents","attributeInfos","attributeInfosByName","attributeInfosByLocation","varyingInfos","varyingInfosByName","_readAttributesFromProgram","_readVaryingsFromProgram","locationOrName","attributeInfo","getAttributeInfo","varying","getVaryingInfo","getActiveAttrib","getAttribLocation","_addAttribute","getTransformFeedbackVarying","_addVarying","compositeType","_inferProperties","LOG_PROGRAM_PERF_PRIORITY","GL_SEPARATE_ATTRIBS","V6_DEPRECATED_METHODS","_isCached","_setId","varyings","bufferMode","_textureUniforms","transformFeedbackVaryings","_compileAndLink","_readUniformLocationsFromLinkedProgram","setUniforms","logPriority","vertexCount","isIndexed","indexType","instanceCount","vertexArray","transformFeedback","samplers","fb","useProgram","_areTexturesRenderable","bindForDraw","primitiveMode","begin","_bindTextures","drawRangeElements","drawElements","drawArrays","_uniformSetters","uniform","textureUpdate","textureIndex","_textureIndexCounter","texturesRenderable","createProgram","deleteProgram","shaderHandles","getAttachedShaders","shaderHandle","programName","_getName","getName","attachShader","linkProgram","linked","getProgramInfoLog","validateProgram","validated","_uniformCount","getActiveUniform","getUniformLocation","l","uniformIndices","getActiveUniforms","blockName","getUniformBlockIndex","blockIndex","getActiveUniformBlockParameter","blockBinding","uniformBlockBinding","defaultProgramManager","_programCache","_getUniforms","_registeredModules","_hookFunctions","_defaultModules","_hashes","_hashCounter","stateHash","_useCounts","moduleName","_getModuleList","vsHash","_getHash","fsHash","moduleHashes","varyingHashes","defineKeys","injectKeys","defineHashes","injectHashes","assembled","appModules","fp32shader","fp32","COORDINATE_SYSTEM_GLSL_CONSTANTS","PROJECTION_MODE_GLSL_CONSTANTS","UNIT_GLSL_CONSTANTS","isEqual","memoize","cachedResult","cachedArgs","VECTOR_TO_POINT_MATRIX","IDENTITY_MATRIX","DEFAULT_PIXELS_PER_UNIT2","DEFAULT_COORDINATE_ORIGIN","getMemoizedViewportUniforms","calculateViewportUniforms","getOffsetOrigin","coordinateSystem","geospatialOrigin","shaderCoordinateOrigin","offsetMode","projectionMode","calculateMatrixAndOffset","projectionCenter","originCommon","cameraPosCommon","getUniformsFromViewport","autoWrapLongitude","project_uWrapLongitude","project_uModelMatrix","viewportSize","transform","project_uCoordinateSystem","project_uProjectionMode","project_uCoordinateOrigin","project_uCommonOrigin","project_uCenter","project_uPseudoMeters","_pseudoMeters","project_uViewportSize","project_uDevicePixelRatio","project_uFocalDistance","project_uCommonUnitsPerMeter","project_uCommonUnitsPerWorldUnit","project_uCommonUnitsPerWorldUnit2","project_uScale","project_uViewProjectionMatrix","project_uCameraPosition","distanceScalesAtOrigin","INITIAL_MODULE_OPTIONS","DEFAULT_MODULES","SHADER_HOOKS","createProgramManager","programManager","getDefaultProgramManager","shaderModule","addDefaultModule","shaderHook","addShaderHook","TRACE_SET_LAYERS","TRACE_ACTIVATE_VIEWPORT","INITIAL_CONTEXT","layerManager","deck","shaderCache","pickingFBO","mousePosition","timeline","lastRenderedLayers","layers","_nextLayers","_needsRedraw","_needsUpdate","_debug","activateViewport","finalize","_finalizeLayer","clearRedrawFlags","redraw","layerNeedsRedraw","getNeedsRedraw","reason","layerIds","layerId","newLayers","_updateLayers","needsUpdate","setNeedsRedraw","setLayers","raiseError","oldLayers","oldLayerMap","oldLayer","generatedLayers","_updateSublayersRecursively","_finalizeOldLayers","hasUniformTransition","newLayer","sublayers","validateProps","_transferLayerState","_updateLayer","_initializeLayer","isComposite","getSubLayers","_handleError","_initialize","lifecycle","_transferState","_update","_finalize","deepEqual","aValue","bValue","views","viewState","controllers","_viewports","_viewportMap","_isUpdating","_eventManager","eventManager","_eventCallbacks","onViewStateChange","onInteractionStateChange","viewId","controller","updateTransition","rect","containsPixel","viewMap","view","viewOrViewId","getView","getViewStateId","filterViewState","viewports","getViewports","_setViews","_setViewState","_setSize","_rebuildViewports","setNeedsUpdate","viewsChanged","_diffViews","viewStateChanged","Controller","_onViewStateChange","onStateChange","makeViewport","_getViewport","controllerProps","_createController","oldControllers","invalidateControllers","getViewState","oldController","_updateController","_buildViewportMap","newViews","oldViews","_","PERCENT_OR_PIXELS_REGEX","parsePosition","relative","getPosition","extent","viewportInstance","_parseDimensions","viewChanged","viewportDimensions","getDimensions","newViewState","_x","_y","_width","_height","defaultOpts","ViewportType","worldOffset","legacyMeterSizes","projectionParameters","viewOffset","multiplyLeft","_subViewports","minOffset","maxOffset","offsetViewport","onUpdate","onInterrupt","onEnd","Transition","_inProgress","settings","removeChannel","addChannel","_onUpdate","isFinished","TRANSITION_EVENTS","BREAK","SNAP_TO_END","IGNORE","transitionEasing","transitionInterruption","onTransitionStart","onTransitionInterrupt","onTransitionEnd","ControllerState","propsInTransition","transition","_onTransitionUpdate","nextProps","transitionTriggered","currentProps","_shouldIgnoreViewportChange","_isTransitionEnabled","interruption","endProps","startProps","_triggerTransition","transitionDuration","transitionInterpolator","inProgress","interpolator","arePropsEqual","_isUpdateDueToCurrentTransition","startViewstate","endViewStateProps","shortestPathFrom","getDuration","initialProps","initializeProps","easing","_onTransitionEnd","inTransition","isZooming","isPanning","isRotating","interpolateProps","getViewportProps","oldViewState","compare","extract","required","_propsToCompare","_propsToExtract","_requiredProps","startViewStateProps","_checkRequiredProps","DEFAULT_REQUIRED_PROPS","transitionProps","around","startViewport","endViewport","aroundPosition","panByPosition","NO_TRANSITION_PROPS","LINEAR_TRANSITION_PROPS","DEFAULT_INERTIA","INERTIA_EASING","EVENT_TYPES","WHEEL","PAN","PINCH","TRIPLE_PAN","DOUBLE_TAP","KEYBOARD","controllerState","controllerStateProps","transitionManager","_onTransition","_setInteractionState","linearTransitionProps","_transition","_events","_interactionState","isDragging","_customEvents","handleEvent","customEvents","toggleEvents","eventName","eventStartBlocked","_eventStartBlocked","_onPanStart","_onPan","_onPanEnd","_onPinchStart","_onPinch","_onPinchEnd","_onTriplePanStart","_onTriplePan","_onTriplePanEnd","_onDoubleTap","_onWheel","_onKeyDown","handled","inside","stopPropagation","metaKey","altKey","ctrlKey","shiftKey","timer","dragMode","_getTransitionProps","processViewStateChange","inertia","scrollZoom","dragPan","dragRotate","doubleClickZoom","touchZoom","touchRotate","keyboard","isInteractive","eventNames","newControllerState","extraProps","interactionState","getState","newStates","isPointInBounds","alternateMode","isFunctionKeyPressed","rightButton","invertPan","_panMove","updateViewport","_onPanMove","_onPanRotate","_onPanMoveEnd","_onPanRotateEnd","pan","endPos","panEnd","rotateEnd","speed","smooth","rotateStart","blockEvents","zoomStart","_startPinchRotation","_lastPinchEvent","deltaAngleX","velocityZ","endScale","zoomEnd","isZoomOut","funcKey","zoomSpeed","moveSpeed","rotateSpeedX","rotateSpeedY","zoomOut","zoomIn","rotateLeft","moveLeft","rotateRight","moveRight","rotateUp","moveUp","rotateDown","moveDown","ViewState","_viewportProps","_applyConstraints","PITCH_MOUSE_THRESHOLD","PITCH_ACCEL","DEFAULT_STATE","minPitch","maxPitch","startPanLngLat","startZoomLngLat","startRotatePos","startBearing","startPitch","startZoom","normalize","_getUpdatedState","_unproject","startPos","deltaAngleY","newRotation","_calculateNewPitchAndBearing","_getRotationParams","_calculateNewZoom","zoomedViewport","_zoomFromCenter","_panFromCenter","fromProps","deltaScaleX","deltaScaleY","centerY","startY","oldProps","dimensionChanged","_getControllerProps","DEFAULT_LIGHT_COLOR","DEFAULT_LIGHT_INTENSITY","idCount","AmbientLight","intensity","DEFAULT_LIGHT_DIRECTION","_shadow","shadow","Effect","Pass","_drawLayers","onViewportActive","clearCanvas","pass","clearGLCanvas","renderStats","viewportOrDescriptor","drawLayerParams","_getDrawLayerParams","subViewports","subViewport","_drawLayersInViewport","layerFilter","effects","moduleParameters","indexResolver","layerIndexResolver","drawContext","isPicking","renderPass","layerFilterCache","layerIndex","shouldDrawLayer","_shouldDrawLayer","layerRenderIndex","layerParam","_getModuleParameters","layerParameters","getLayerParameters","glViewport","getGLViewport","clearOpts","renderStatus","totalCount","visibleCount","compositeCount","pickableCount","pickable","drawLayer","visible","filterSubLayer","rootLayerId","wrapLongitude","pickingActive","effect","getModuleParameters","layerIndices","resolvers","resolveLayerIndex","isDrawn","indexOverride","_offset","parentId","resolver","dimensions","pixelRatio","shadowMap","depthBuffer","fbo","render","shadowEnabled","drawToShadowMap","getMemoizedViewportCenterPosition","getViewportCenterPosition","getMemoizedViewProjectionMatrices","getViewProjectionMatrices","DEFAULT_SHADOW_COLOR","screenToCommonSpace","shadowMatrices","projectionMatrices","shadowMatrix","positions","corner","createShadowUniforms","shadow_uDrawShadowMap","shadow_uUseShadowMap","shadowMaps","shadow_uColor","shadowColor","shadow_uLightId","shadowLightId","shadow_uLightCount","projectCenters","viewProjectionMatrices","viewProjectionMatrixCentered","dummyShadowMap","DEFAULT_AMBIENT_LIGHT_PROPS","DEFAULT_DIRECTIONAL_LIGHT_PROPS","ambientLight","directionalLights","pointLights","shadowPasses","lightSource","_applyDefaultLights","light","_createLightMatrix","_createShadowPasses","shadowPass","lightSources","directionalLight","getProjectedLight","pointLight","removeDefaultModule","lightMatrices","DEFAULT_LIGHTING_EFFECT","_internalEffects","setEffects","cleanup","_createInternalEffects","PICKING_PARAMETERS","_drawPickingBuffer","deviceRect","redrawReason","pickZ","encodedColors","byLayer","byAlpha","_colors","decodePickingColor","decodeColor","pickingAttribute","pickParameters","encodeColor","encoded","entry","pickedColor","pickedLayer","pickedViewports","pickedObjectIndex","TRACE_RENDER_LAYERS","drawPickingColors","drawLayersPass","pickLayersPass","renderCount","renderBuffers","lastPostProcessEffect","layerPass","getDefaultFramebuffer","_preRender","outputBuffer","_postRender","preRender","postRender","_resizeRenderBuffers","inputBuffer","swapBuffer","NO_PICKED_OBJECT","getClosestObject","pickedColors","deviceX","deviceY","deviceRadius","minSquareDistanceToCenter","closestPixelIndex","dy2","pickedLayerIndex","d2","pickedObject","pickedX","pickedY","getUniqueObjects","uniqueColors","colorKey","getEmptyPickingInfo","pickInfo","pickedViewport","getViewportFromCoordinates","coordinate","picked","devicePixel","processPickInfo","lastPickedInfo","affectedLayers","lastPickedObjectIndex","lastPickedLayerId","pickedLayerId","lastPickedLayer","baseInfo","infos","getLayerPickingInfo","updateAutoHighlight","sourceLayer","getPickingInfo","_pickable","depthFBO","_pickClosestObject","_pickVisibleObjects","lastPickedViewportId","pickableLayers","isPickable","radius","unproject3D","_getPickable","emptyInfo","_resizeBuffer","devicePixelRange","_getPickingRect","deviceWidth","deviceHeight","pickedResult","_drawAndSample","pickedResultPass2","disablePickingIndex","restorePickingColors","maxObjects","leftTop","deviceLeft","deviceTop","rightBottom","deviceRight","deviceBottom","pickInfos","uniqueInfos","isMaxObjects","defaultStyle","zIndex","backgroundColor","display","Tooltip","canvasParent","parentElement","el","appendChild","isVisible","displayInfo","innerText","innerHTML","html","_parseImageNode","IMAGE_SUPPORTED","IMAGE_BITMAP_SUPPORTED","NODE_IMAGE_SUPPORTED","DATA_SUPPORTED","isImageTypeSupported","getDefaultImageType","getImageType","getImageTypeOrNull","getImageData","drawImage","SVG_DATA_URL_PATTERN","SVG_URL_PATTERN","isSVG","getBlobOrSVGDataUrl","xmlText","unescape","encodeURIComponent","getBlob","parseToImage","blobOrDataUrl","webkitURL","objectUrl","loadToImage","revokeObjectURL","EMPTY_OBJECT","imagebitmapOptionsSupported","parseToImageBitmap","imagebitmapOptions","imagebitmap","safeCreateImageBitmap","isEmptyObject","createImageBitmap","BIG_ENDIAN","LITTLE_ENDIAN","getBinaryImageMetadata","binaryData","toDataView","getPngMetadata","getJpegMetadata","getGifMetadata","getBmpMetadata","isPng","getUint32","isGif","getUint16","isBmp","isJpeg","tableMarkers","sofMarkers","getJpegMarkers","marker","parseToNodeImage","parseImage","imageOptions","imageType","loadType","getLoadableImageType","MIME_TYPES","ImageLoader","isJSON","firstChar","lastChar","existingVersion","_registerLoggers","premultiplyAlpha","GL_QUERY_RESULT","GL_QUERY_RESULT_AVAILABLE","GL_TIME_ELAPSED_EXT","GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN","GL_ANY_SAMPLES_PASSED","GL_ANY_SAMPLES_PASSED_CONSERVATIVE","hasTimerQuery","_queryPending","_pollingPromise","conservative","resultAvailable","getQueryParameter","getResult","counter","poll","isResultAvailable","requestAnimationFrame","cancelAnimationFrame","timerId","statIdCounter","onCreateContext","onAddHTML","onInitialize","onRender","onFinalize","glOptions","autoResizeViewport","autoResizeDrawingBuffer","useDevicePixelRatio","needsRedraw","cpuTime","gpuTime","frameRate","_initialized","_running","_animationFrameId","_nextFramePromise","_resolveNextFrame","_cpuStartTime","_pageLoadPromise","_onMousemove","_onMouseleave","_setDisplay","_getPageLoadPromise","_createWebGLContext","_createFramebuffer","_startEventHandling","_initializeCallbackData","_updateCallbackData","_resizeCanvasDrawingBuffer","_resizeViewport","_gpuTimeQuery","animationProps","appContext","_addCallbackData","_startLoop","isContextLost","_beginTimers","_setupFrame","_renderFrame","_clearNeedsRedraw","offScreen","commit","_endTimers","_finalizeCallbackData","_cancelAnimationFrame","waitForRender","renderFrame","_requestAnimationFrame","animationLoop","animationFrameId","renderFrameCallback","_resizeFramebuffer","startTime","tick","tock","_timeline","_loop","_animationLoop","_mousePosition","_getSizeAndAspect","_offScreen","_createInfoDiv","wrapperDiv","div","timeStart","isTimerDisjoint","getTimerMilliseconds","beginTimeElapsedQuery","predict","enhancePointerEventInput","oldHandler","enhanceMouseInput","RECOGNIZERS","RECOGNIZER_COMPATIBLE_MAP","tripan","pinch","doubletap","anytap","RECOGNIZER_FALLBACK_MAP","BASIC_EVENT_ALIASES","INPUT_EVENT_TYPES","KEY_EVENTS","MOUSE_EVENTS","WHEEL_EVENTS","EVENT_RECOGNIZER_MAP","tap","press","pinchin","pinchout","pinchstart","pinchmove","pinchend","pinchcancel","rotatestart","rotatemove","rotateend","rotatecancel","tripanstart","tripanmove","tripanup","tripandown","tripanleft","tripanright","tripanend","tripancancel","panup","pandown","panleft","panright","pancancel","swipe","swipeleft","swiperight","swipeup","swipedown","GESTURE_EVENT_ALIASES","anyclick","dblclick","mouseover","mouseout","mouseleave","firefox","EVENT_TYPE","WHEEL_DELTA_MAGIC_SCALER","WHEEL_DELTA_PER_LINE","SHIFT_MULTIPLIER","passive","WheelEvent","deltaMode","DOM_DELTA_PIXEL","DOM_DELTA_LINE","wheelPosition","MOVE_EVENT_TYPE","OVER_EVENT_TYPE","OUT_EVENT_TYPE","LEAVE_EVENT_TYPE","MoveInput","enableMoveEvent","enableLeaveEvent","enableOutEvent","enableOverEvent","handleOverEvent","handleOutEvent","handleLeaveEvent","handleMoveEvent","DOWN_EVENT_TYPE","UP_EVENT_TYPE","KeyInput","enableDownEvent","enableUpEvent","tabIndex","outline","targetElement","srcElement","tagName","ContextmenuInput","DOWN_EVENT","MOVE_EVENT","UP_EVENT","MOUSE_EVENT_WHICH_LEFT","MOUSE_EVENT_WHICH_MIDDLE","MOUSE_EVENT_WHICH_RIGHT","MOUSE_EVENT_BUTTON_LEFT","MOUSE_EVENT_BUTTON_MIDDLE","MOUSE_EVENT_BUTTON_RIGHT","MOUSE_EVENT_BUTTONS_LEFT_MASK","MOUSE_EVENT_BUTTONS_RIGHT_MASK","MOUSE_EVENT_BUTTONS_MIDDLE_MASK","whichButtons","buttons","leftButton","middleButton","getOffsetPosition","rootElement","getBoundingClientRect","offsetWidth","offsetHeight","clientLeft","clientTop","DEFAULT_OPTIONS","handlersByElement","_active","insertPosition","mjolnirEvent","_normalizeEvent","_emit","immediatePropagationStopped","stopImmediatePropagation","entriesToRemove","recognizerOptions","_onBasicInput","_onOtherEvent","setElement","ManagerClass","otherName","recognizerName","recognizerOption","wheelInput","moveInput","keyInput","contextmenuInput","eventAlias","eventRegistrar","_toggleRecognizer","_addEventHandler","_removeEventHandler","fallbackRecognizers","enableEventType","isRecognizerUsed","eh","getCursor","getPropTypes","PropTypes","oneOfType","arrayOf","instanceOf","bool","pickingRadius","eventRecognizerOptions","onWebGLInitialized","onResize","onBeforeRender","onAfterRender","onLoad","_framebuffer","_animate","_typedArrayManagerProps","_onMetrics","viewManager","effectManager","deckRenderer","deckPicker","_pickRequest","_lastPointerDownInfo","interactiveState","isHovering","_onEvent","_onPointerDown","_onPointerMove","initialViewState","_createCanvas","_createAnimationLoop","metrics","fps","setPropsTime","updateAttributesTime","framesRedrawn","pickTime","pickCount","gpuTimePerFrame","cpuTimePerFrame","bufferMemory","textureMemory","renderbufferMemory","gpuMemory","_metricsCounter","tooltip","removeChild","_setCanvasSize","resolvedProps","_getViews","_getViewState","viewManagerNeedsRedraw","layerManagerNeedsRedraw","effectManagerNeedsRedraw","deckRendererNeedsRedraw","_customRender","_pick","resourceIds","statKey","getLayers","getViews","_checkForCanvasSizeChange","_onContextLost","_setGLContext","_onRenderFrame","pickedInfo","onHover","getTooltip","setTooltip","container","cursor","play","attachTimeline","pointerleave","_onInteractionStateChange","_updateCanvasSize","renderOptions","renderLayers","getEffects","_getFrameStats","_getMetrics","_updateCursor","updateLayers","_pickAndCallback","updateViewStates","eventOptions","getLastPickedObject","layerHandler","rootHandler","pickObject","animationLoopStats","memoryStats","getDeckInstance","__deck","customRender","deckProps","triggerRepaint","isExternal","mapboxLayers","onMapMove","mapboxVersion","getMapboxVersion","afterRender","addLayer","removeLayer","updateLayer","currentViewport","getViewport","deckLayer","getZoom","getBearing","getPitch","major","minor","useMapboxProjection","mapboxLayerIds","hasNonMapboxLayers","LayerType","defaultProps","renderingMode","ShaderAttribute","dataColumn","getBuffer","getAccessor","constantValue","elementOffset","glArrayFromType","Float64Array","getStride","bytesPerElement","resolveShaderAttribute","baseAccessor","shaderAttributeOptions","vertexOffset","resolveDoublePrecisionShaderAttributes","resolvedOptions","high","low","logicalType","doublePrecision","bufferType","defaultType","shaderAttributes","fp64","externalBuffer","bufferAccessor","allocatedValue","constant","_buffer","release","isBuffer64Bit","doubleShaderAttributeDefs","shaderAttributeDef","_normalizeValue","_normalizeConstant","hasChanged","_areValuesEqual","_checkExternalBuffer","requiredBufferSize","subData","startOffset","endOffset","numInstances","oldValue","illegalArrayType","value1","value2","EMPTY_ARRAY","placeholderArray","createIterable","startRow","endRow","iterable","objectInfo","getAccessorFromBuffer","startIndices","nested","elementStride","EMPTY","FULL","rangeList","range","newRangeList","range0","padArrayChunk","sourceLength","targetLength","datum","padArray","sourceStartIndices","targetStartIndices","getChunkData","nextSourceIndex","nextTargetIndex","DEFAULT_TRANSITION_SETTINGS","interpolation","spring","stiffness","damping","normalizeTransitionSettings","userSettings","layerSettings","getSourceBufferAttribute","attribute","getAttributeTypeFromSize","cycleBuffers","buffers","getAttributeBufferLength","multiplier","noAlloc","padBuffer","fromLength","fromStartIndices","precisionMultiplier","toStartIndices","hasStartIndices","toLength","isConstant","toData","getMissingData","_autoUpdater","lastExternalBuffer","binaryValue","binaryAccessor","updateRanges","_validateAttributeUpdaters","layout","clearChangedFlags","supportsTransition","dataRange","updated","getVertexOffset","updateSubBuffer","_checkAttributeArray","clearNeedsUpdate","needsNormalize","vertexIndex","shaderAttributeDefs","shaderAttributeName","getShaderAttributes","accessorFunc","objectValue","numVertices","hasUpdater","valid","FS100","FS_GLES","FS300","getQualifierDetails","qualifiers","words","definition","getPassthroughFS","inputType","outputValue","convertToVec4","typeToChannelSuffix","typeToChannelCount","variable","unused","bindOnUse","_unbindBuffers","setBuffers","bufferName","setBuffer","bufferOrParams","_getVaryingIndex","byteSize","_getBufferParams","_bindBuffer","bindTransformFeedback","_bindBuffers","beginTransformFeedback","endTransformFeedback","bufferIndex","createTransformFeedback","deleteTransformFeedback","currentIndex","feedbackMap","bindings","_setupTransformFeedback","sourceBuffers","attributes","_getNextIndex","_setupBuffers","varyingName","feedbackBuffers","sourceName","feedbackName","bufferOrRef","_createNewBuffer","_getFeedbackBuffers","_updateBindings","model","_updateBinding","_swapBuffers","nextIndex","srcName","dstName","getShaderVersion","SAMPLER_UNIFORM_PREFIX","SIZE_UNIFORM_PREFIX","VS_POS_VARIABLE","updateForTextures","sourceTextureMap","targetTextureVarying","targetTexture","texAttributeNames","sourceCount","targetTextureType","samplerTextureMap","updatedVs","finalInject","vsLines","updateVsLines","processAttributeDefinition","updatedLine","getVaryingType","sizeName","uniformDeclaration","posInstructions","getSizeUniforms","textureName","getAttributeDefinition","getSamplerDeclerations","samplerName","uniformDeclerations","qualaiferDetails","textureMap","attributeData","sampleInstruction","SRC_TEX_PARAMETER_OVERRIDES","FS_OUTPUT_VARIABLE","_swapTexture","updatedModelProps","_processVertexShader","sourceTextures","discard","hasSourceTextures","hasTargetTexture","transform_elementID","elementIDBuffer","sampler","_setSourceTextureParameters","sizeUniforms","_setupTextures","packed","channelCount","packedPixels","packCount","currentResources","ownTexture","_targetTextureVarying","textureOrReference","_targetRefTexName","_createNewTexture","_sourceTextures","_targetTexture","_createTargetTexture","_updateElementIDBuffer","elementCount","elementIds","_swapTextures","combinedInject","_fs","getScratchArrayBuffer","getScratchArray","scratchArrayBuffer","ERR_ELEMENTS","constantAttributeZero","defaultVertexArray","isDefaultArray","MAX_ATTRIBUTES","_setConstantFloatArray","_setConstantIntArray","_setConstantUintArray","bufferValue","getMaxAttributes","elementBuffer","setElementBuffer","vertexAttribIPointer","vertexAttribDivisor","disablingAttributeZero","_normalizeConstantArrayValue","updateNeeded","_compareConstantArrayValues","v1","v2","vertexAttrib1fv","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttribI1iv","vertexAttribI2iv","vertexAttribI3iv","vertexAttribI4iv","vertexAttribI1uiv","vertexAttribI2uiv","vertexAttribI3uiv","vertexAttribI4uiv","elements","getVertexAttribOffset","ERR_ATTRIBUTE_TYPE","MULTI_LOCATION_ATTRIBUTE_REGEXP","DEPRECATIONS_V6","elementsAccessor","drawParams","vertexArrayObject","setAttributes","_updateDrawParams","_setAttribute","clearDrawParams","appAccessor","_resolveLocationAndAccessor","_setConstantAttributes","valueAccessor","INVALID_RESULT","_getAttributeIndex","accessInfo","_getAttributeInfo","currentAccessor","attributeName","multiLocation","locationOffset","getAttributeLocation","setConstant","_setConstantAttributeZero","_setConstantAttribute","getConstantBuffer","indexCount","_updateDrawParamsForLocation","indexOffset","getVertexCount","maxElts","terminator","isInteger","decimal","getDebugTableForVertexArray","ELEMENT_ARRAY_BUFFER","getDebugTableRow","attributeLocation","rowHeader","getGLSLDeclaration","verts","getDebugData","typeAndName","getDebugTableForUniforms","undefinedOnly","SHADER_MODULE_UNIFORM_REGEXP","PROJECT_MODULE_UNIFORM_REGEXP","uniformLocations","uniformNames","addUniformToTable","unusedCount","unusedTable","isDefined","isUniformDefined","getDebugTableForProgramConfiguration","glslDeclaration","varyingInfo","GLTF_TO_LUMA_ATTRIBUTE_MAP","POSITION","NORMAL","COLOR_0","TEXCOORD_0","TEXCOORD_1","TEXCOORD_2","getBuffersFromGeometry","geometry","indices","remappedName","mapAttributeName","inferAttributeAccessor","attributeMap","category","LOG_DRAW_PRIORITY","LOG_DRAW_TIMEOUT","ERR_MODEL_PARAMS","DRAW_PARAMS","lastLogTime","animated","_programManagerState","_managedProgram","programProps","_programDirty","_attributes","_checkProgram","moduleSettings","geometryBuffers","_setModelProps","_deleteGeometryBuffers","normalizedAttributes","updateModuleSettings","_logDrawCallStart","getDrawParams","vertexArrayInstanced","didDraw","draw","getDrawMode","_logDrawCallEnd","unbindModels","_setFeedbackBuffers","unbindBuffers","bindBuffers","setGeometry","_feedbackBuffers","logDrawTimeout","attributeTable","uniformTable","missingTable","missingCount","configTable","bufferTransform","textureTransform","clearRenderTarget","updatedOpts","_updateDrawOptions","swapped","resourceTransforms","resourceTransform","swap","setVertexCount","_buildResourceTransforms","_updateModelProps","setupResources","updatedProps","updateModelProps","canCreateBufferTransform","canCreateTextureTransform","getDrawOptions","attributeInTransition","currentStartIndices","currentLength","getTransform","bufferOpts","transitionSettings","padBufferOpts","enter","aFrom","aTo","vCurrent","run","pop","attributeType","ATTRIBUTE_TYPE","getTexture","aPrev","aCur","vNext","isTransitioning","TRANSITION_TYPES","transitions","_removeTransition","getTransitionSetting","_updateAttribute","animatedAttributes","isNew","TransitionType","TRACE_INVALIDATE","TRACE_UPDATE_START","TRACE_UPDATE_END","TRACE_ATTRIBUTE_UPDATE_START","TRACE_ATTRIBUTE_ALLOCATE","TRACE_ATTRIBUTE_UPDATE_END","updateTriggers","attributeTransitionManager","updaters","_add","attributeNameArray","triggerName","invalidatedAttributes","_invalidateTrigger","accessorName","setExternalBuffer","setBinaryValue","setConstantValue","transitionUpdated","changedAttributes","getAttributes","hasAttribute","excludeAttributes","_createAttribute","_mapUpdateTriggersToAttributes","triggers","getUpdateTriggers","updateBuffer","_value","fromValue","toValue","updateSpringElement","prev","cur","damper","updateSpring","next","distanceSquare","_currValue","_prevValue","nextValue","diffProps","propsChangedReason","compareProps","ignoreProps","dataChangedReason","diffDataProps","updateTriggersChangedReason","diffUpdateTriggers","dataChanged","propsChanged","updateTriggersChanged","extensionsChanged","diffExtensions","transitionsChanged","diffTransitions","isTransitionable","comparePropValues","newProp","oldProp","equal","dataComparator","_dataDiff","diffReason","diffUpdateTrigger","triggerChanged","oldExtensions","newTriggers","oldTriggers","_propTypes","ERR_NOT_OBJECT","ERR_NOT_CONTAINER","isPlainObject","mergeShaders","mergedInjection","lngLatZToWorldPosition","normalizeParameters","normalizedParams","fromCoordinateSystem","fromCoordinateOrigin","getWorldPosition","positionCommonSpace","DEFAULT_TEXTURE_PARAMETERS","internalTextures","specialTextureParameters","textureParameters","destroyTexture","boolean","optional","arrayEqual","valueType","function","component","dataTransform","deprecatedFor","normalizePropDefinition","createProps","propsPrototype","getPropsPrototype","propsInstance","componentClass","getOwnProperty","createPropsPrototypeAndTypes","_mergedDefaultProps","parentClass","parentDefaultProps","componentDefaultProps","componentPropDefs","createPropsPrototype","addAsyncPropsToPropPrototype","_deprecatedProps","addDeprecatedPropsToPropPrototype","parentProps","getComponentName","newValue","nameStr","newPropName","defaultValues","descriptors","getDescriptorForAsyncProp","internalState","hasAsyncProp","getAsyncProp","componentName","EMPTY_PROPS","asyncProps","onAsyncPropUpdated","oldAsyncProps","asyncProp","resolvedValue","pendingLoadCount","resolvedLoadCount","isAsyncPropLoading","_watchPromise","resolvedValues","originalValues","_createAsyncPropData","_updateAsyncProp","_didAsyncInputValueChange","_this$layer","_resolveAsyncIterable","_setPropValue","lastValue","freezeAsyncOldProps","_postProcessValue","promise","_this$layer2","_setAsyncPropValue","onDataLoad","_this$layer3","_this$layer4","attributeManager","subLayers","usesPickingColorCache","TRACE_CHANGE_FLAG","TRACE_INITIALIZE","TRACE_UPDATE","TRACE_FINALIZE","TRACE_MATCHED","MAX_PICKING_COLOR_CACHE_SIZE","areViewportsEqual","oldViewport","pickingColorCache","__diff","loadOptions","_loadOptions","getLoadOptions","inResourceManager","contains","reloadAsyncProp","opacity","onClick","onDragStart","onDrag","onDragEnd","positionFormat","colorFormat","getPolygonOffset","highlightedObjectIndex","autoHighlight","highlightColor","layerName","_this$props$onError","_this$props","_this$context","_this$context$onError","updateObject","setChangeFlags","stateChanged","_getNeedsRedraw","shouldUpdateState","_getUpdateParams","uniformTransitions","active","models","pickingEvent","i1","i2","i3","shaders","getShaders","changeFlags","propsOrDataChanged","getAttributeManager","neededPickingBuffer","needPickingBuffer","pickingColors","instancePickingColors","pickingColorsAttribute","invalidate","getModels","viewportChanged","_setModelAttributes","getNumInstances","getStartIndices","ignoreUnknownAttributes","getChangedAttributes","updateAttributes","cacheSize","newCacheSize","pickingColor","encodePickingColor","objectIndex","_disablePickingIndex","colors","_initState","initializeState","_updateState","stateNeedsUpdate","_updateUniformTransition","updateParams","oldModels","updateState","modelChanged","_updateModules","_renderLayers","_updateAttributes","setInstanceCount","clearChangeFlags","resetOldProps","finalizeState","_updateAttributeTransition","setModuleParameters","offsets","flags","flagChanged","somethingChanged","invalidateAttribute","_updateAutoHighlight","pickingModuleParameters","pickingSelectedColor","pickingHighlightColor","getOldProps","attributeManagerNeedsRedraw","_getAttributeManager","addInstanced","calculateInstancePickingColors","_onAsyncPropUpdated","setAsyncProps","convertColor","getLightSourceUniforms","lightSourceUniforms","attenuation","lighting_uPointLightCount","lighting_uDirectionalLightCount","hasLights","lighting_uEnabled","lights","MAX_LIGHTS","getMaterialUniforms","material","ambient","diffuse","shininess","specularColor","lighting_uAmbient","lighting_uDiffuse","lighting_uShininess","lighting_uSpecularColor","gouraudLighting","LIGHTING_VERTEX","DEFAULT_HIGHLIGHT_COLOR","DEFAULT_MODULE_OPTIONS","selectedColor","picking_uSelectedColorValid","picking_uSelectedColor","picking_uHighlightColor","picking_uActive","picking_uAttribute","picking","DRAW_MODE","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","_setAttributes","_calculateVertexCount","_print","WINDING","CLOCKWISE","COUNTER_CLOCKWISE","modifyPolygonWindingDirection","points","windingDirection","getPolygonWindingDirection","reversePolygon","sign","getPolygonSignedArea","dim","area","numPoints","numSwaps","tmp","tesselateColumn","nradial","vertices","flatMap","isExtruded","vertsAroundEdge","stepAngle","normals","k","DEFAULT_COLOR","diskResolution","coverage","elevationScale","radiusUnits","lineWidthUnits","lineWidthScale","lineWidthMinPixels","lineWidthMaxPixels","extruded","wireframe","filled","stroked","getFillColor","getLineColor","getLineWidth","getElevation","project32","instancePositions","use64bitPositions","instanceElevations","instanceFillColors","instanceLineColors","instanceStrokeWidths","regenerateModels","_this$state$model","_getModel","_updateGeometry","hasThinkness","meanVertexDistance","setState","edgeDistance","getGeometry","fillVertexCount","wireframeVertexCount","widthUnits","widthScale","widthMinPixels","widthMaxPixels","setDrawMode","isStroke","defaultColorRange","thirdPi","angles","pointX","pointY","hexbin","binsById","bins","px","point","py","pj","pi","py1","px1","pi2","pj2","px2","py2","bin","hexagon","centers","mesh","fragment","pointToHexbin","aggregationParams","getPointsCenter","radiusCommon","getRadiusInCommon","screenPoints","posIndex","arrayIsFinite","screenCoord","newHexbin","hexagonBins","hexagons","hex","minX","minY","maxX","maxY","domain","scaleFunction","getQuantizeScale","quantizeScale","getLinearScale","linearScale","getQuantileScale","sortedDomain","ascending","thresholds","thresholdsScale","fraction","domainLength","domainFraction","lowIndex","bisectRight","lo","hi","mid","ordinalScale","domainMap","getOrdinalScale","uniqueDomain","domainRange","step","idx","clampIdx","notNullOrUndefined","unique","getTruthyValues","getQuantileDomain","getOrdinalDomain","getScaleFunctionByScaleType","scaleType","defaultGetValue","MAX_32_BIT_FLOAT","defaultGetPoints","defaultGetIndex","getPoints","getIndex","filterData","aggregatedBins","getAggregatedBins","_updateMinMaxValues","binMap","getBinMap","hasFilter","binCount","binIndex","filteredPoints","counts","percentileRange","sortedBins","lower","upper","lowerIdx","upperIdx","maxValue","minValue","idxRange","_percentileToIndex","indexEdge","_getScaleDomain","AGGREGATION_OPERATION","SUM","MEAN","MIN","MAX","sumReducer","accu","maxReducer","minReducer","getMean","pts","filtered","getSum","getMax","getMin","getValueFunc","aggregation","op","wrapAccessor","pt","wrapGetValueFunc","nop","dimensionSteps","defaultDimensions","pickingInfo","getBins","updateTrigger","weight","getDomain","lowerPercentile","upperPercentile","getScaleFunc","onSet","nullValue","defaultGetCellSize","cellSize","layerData","dimensionUpdaters","_getCellSize","getCellSize","_getAggregator","getAggregator","_addDimension","updateGetValueFuncs","reprojectNeeded","needsReProjectPoints","aggregationDirty","getAggregatedData","dimensionChanges","getDimensionChanges","aggregator","normalizeResult","getSortedBins","getValueChanged","needUpdateDimensionStep","setDimensionState","dimension","getDimensionUpdaters","scaleFunc","updater","getDimensionSortedBins","getDimensionValueDomain","getDimensionScale","attributeAccessor","getSubLayerDimensionAttribute","dimensionStep","needUpdate","_updateTriggers","fromProp","dimensionUpdater","_filterData","valueDomain","getValueDomainByScale","dimensionRange","dimensionDomain","getScaleFunction","cell","cv","isValueInDomain","isPicked","binInfo","dimensionKey","isDataWrapped","__source","DefaultLayerClass","_subLayerProps","overridingProps","sourceObject","sourceObjectIndex","sublayerProps","overridingSublayerProps","overridingSublayerTriggers","sublayerId","subLayerPropTypes","getSubLayerAccessor","passThroughProps","getSubLayerProps","shouldUpdate","filterProps","filterKeys","filteredProps","NON_INSTANCED_MODEL","updateShaders","updateOpts","compareAll","dataProps","colorDomain","colorRange","getColorValue","getColorWeight","colorAggregation","colorScaleType","onSetColorDomain","elevationDomain","elevationRange","getElevationValue","getElevationWeight","elevationAggregation","elevationLowerPercentile","elevationUpperPercentile","elevationScaleType","onSetElevationDomain","hexagonAggregator","cpuAggregator","aggregatorState","hexagonVertices","convertLatLngToMeterOffset","vertex0","vertex3","centroid","centroidFlat","vt","vtFlat","SubLayerClass","getSubLayerClass","_getSublayerUpdateTriggers","_onGetSublayerColor","_onGetSublayerElevation","dispatch","Dispatch","parseTypenames","typenames","typename","T","that","none","selector","querySelector","select","groups","_groups","subgroups","subnode","subgroup","__data__","Selection","_parents","querySelectorAll","arrayAll","selectorAll","parents","childMatcher","childFind","childFirst","firstElementChild","childrenFilter","selectAll","matcher","_enter","sparse","EnterNode","namespaceURI","_next","_parent","bindIndex","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","arraylike","enterGroup","updateGroup","exitGroup","previous","i0","_exit","onenter","selection","append","onupdate","onexit","groups0","groups1","m0","m1","merges","group0","group1","compareDocumentPosition","compareNode","sortgroups","sortgroup","xhtml","svg","xlink","xml","xmlns","namespaces","local","attrRemove","removeAttribute","attrRemoveNS","fullname","removeAttributeNS","attrConstant","setAttribute","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","namespace","getAttributeNS","getAttribute","styleRemove","removeProperty","styleConstant","setProperty","styleFunction","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","classArray","classList","ClassList","_node","_names","classedAdd","classedRemove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","htmlConstant","htmlFunction","raise","nextSibling","previousSibling","creatorInherit","documentElement","createElementNS","creatorFixed","creator","constantNull","before","selection_cloneShallow","cloneNode","selection_cloneDeep","deep","contextListener","listener","onRemove","__on","o","onAdd","CustomEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","selection_select","selectChild","selectChildren","selection_filter","selection_data","selection_enter","selection_exit","selection_merge","nodes","selection_node","selection_size","empty","selection_empty","attr","classed","selection_text","selection_raise","selection_lower","insert","selection_remove","selection_clone","selection_datum","selection_on","selection_dispatch","factory","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatHsl","hslConvert","formatHsl","color_formatRgb","formatRgb","rgbn","Rgb","rgba","hsla","rgbConvert","rgb_formatHex","rgb_formatRgb","h","Hsl","hsl","hsl2rgb","m2","basis","t1","v0","v3","t2","t3","displayable","linear","exponential","gamma","nogamma","rgbGamma","rgbSpline","spline","basisClosed","reA","reB","one","taskHead","taskTail","am","bm","bs","bi","lastIndex","pokeDelay","clockLast","clockNow","clockSkew","clock","setFrame","clearNow","Timer","_call","restart","timerFlush","wake","nap","poke","t0","sleep","clearInterval","setInterval","elapsed","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedules","__transition","tween","timing","ease","schedule","svgNode","interrupt","degrees","translateX","translateY","skewX","parseCss","DOMMatrix","WebKitCSSMatrix","isIdentity","decompose","parseSvg","baseVal","consolidate","interpolateTransform","pxComma","pxParen","degParen","xa","ya","xb","yb","interpolateTransformCss","interpolateTransformSvg","tweenRemove","tween0","tween1","tweenFunction","_id","tweenValue","interpolate","string00","interpolate0","string1","string0","string10","attrTween","attrInterpolate","attrInterpolateNS","attrTweenNS","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","easeVarying","_name","onFunction","on0","on1","sit","removeFunction","styleNull","styleMaybeRemove","listener0","styleTween","styleInterpolate","textInterpolate","textTween","id0","id1","newId","selection_prototype","cubicInOut","transition_select","transition_selectAll","transition_filter","transition_merge","transition_selection","transition_transition","transition_on","transition_attr","transition_attrTween","transition_style","transition_styleTween","transition_text","transition_textTween","transition_remove","transition_tween","transition_delay","transition_duration","transition_easeVarying","transition_end","defaultTiming","selection_interrupt","selection_transition","number1","number2","EOL","EOF","QUOTE","NEWLINE","RETURN","objectConverter","Function","customConverter","inferColumns","rows","columnSet","pad","formatYear","year","formatDate","date","hours","getUTCHours","minutes","getUTCMinutes","seconds","getUTCSeconds","milliseconds","getUTCMilliseconds","getUTCFullYear","getUTCMonth","getUTCDate","reFormat","delimiter","DELIMITER","convert","parseRows","N","I","eof","eol","token","preformatBody","formatBody","formatRows","formatRow","csv","dsv","csvParse","tsv","tsvParse","responseText","dsvParse","epsilon2","cosh","sinh","tanh","p0","S","ux0","uy0","w0","ux1","uy1","w1","rho","d1","rho4","rho2","r0","r1","coshr0","u","SQRT2","_1","_2","_4","zoomRho","applyX","applyY","invertX","invertY","rescaleX","rescaleY","__zoom","accessToken","redSquirrelLayer","greySquirrelLayer","watch","setLayerVisibility","methods","initMap","$refs","antialias","loadLayers","setLayoutProperty","OPTIONS","COLOR_RANGE","LIGHT_SETTINGS","lightsPosition","ambientRatio","diffuseRatio","specularRatio","lightsStrength","numberOfLights","lightSettings","onchange","evt","mounted","__exports__","deepArrayEqual","isArrayX","isArrayY","normalizeArray","parts","allowAboveRoot","basename","matchedSlash","xs","resolvedPath","resolvedAbsolute","charAt","isAbsolute","trailingSlash","substr","paths","to","arr","fromParts","toParts","samePartsLength","outputParts","sep","dirname","hasRoot","extname","startDot","startPart","preDotState","copyConstructorProperties","NativeSymbol","EmptyStringDescriptionStore","SymbolWrapper","symbolPrototype","symbolToString","nativeSymbol","regexp","_extendableBuiltin","cls","ExtendableBuiltin","Reflect","construct","__proto__","MathArray","arrayOrObject","fromObject","formatString","minVector","maxVector","addScalar","scalar","installGetterOverride","originalGetterFunc","installSetterSpy","originalSetterFunc","valueChanged","_updateCache","installProgramSpy","originalUseProgram","GLState","stateStack","oldValues","trackContextState","pushContextState","popContextState","validateVector","checkNumber","checkVector","callerName"],"mappings":"+FACA,IAAIA,EAAkB,EAAQ,QAC1BC,EAAuB,EAAQ,QAA8CC,EAE7EC,EAAW,GAAGA,SAEdC,EAA+B,iBAAVC,QAAsBA,QAAUC,OAAOC,oBAC5DD,OAAOC,oBAAoBF,QAAU,GAErCG,EAAiB,SAAUC,GAC7B,IACE,OAAOR,EAAqBQ,GAC5B,MAAOC,GACP,OAAON,EAAYO,UAKvBC,EAAOC,QAAQX,EAAI,SAA6BO,GAC9C,OAAOL,GAAoC,mBAArBD,EAASW,KAAKL,GAChCD,EAAeC,GACfR,EAAqBD,EAAgBS,M,uDCrB3C,YAAe,SAASM,IACtB,IAAIC,EAEJ,GAAsB,qBAAXX,QAA0BA,OAAOY,YAC1CD,EAAYX,OAAOY,YAAYC,WAC1B,GAAuB,qBAAZC,GAA2BA,EAAQC,OAAQ,CAC3D,MAAMC,EAAYF,EAAQC,SAC1BJ,EAA2B,IAAfK,EAAU,GAAYA,EAAU,GAAK,SAEjDL,EAAYM,KAAKJ,MAGnB,OAAOF,EAZT,oC,2DCAA,oDAGO,SAASO,EAAgBC,GAC9BA,EAAGC,KAAOD,EAAGC,MAAQ,GACrB,MAAM,KACJA,GACED,EAaJ,OAXKC,EAAKC,aACR,eAA0BF,GAC1BG,EAAqBH,GACrBI,EAAiBJ,EAAI,QACrBK,EAAiBL,EAAI,CACnBM,OAAQL,EACRM,QAASP,IAEXC,EAAKC,YAAa,GAGbF,EAET,MAAMQ,EAA4B,qBAAXC,EAAyBA,EAAS5B,OAGzD,SAASsB,EAAqBH,GAC5BA,EAAGC,KAAKS,WAAa,GACrB,MAAMC,EAAaX,EAAGY,0BAA4B,GAElD,IAAK,MAAMC,KAAaF,EACtBX,EAAGC,KAAKY,GAAab,EAAGc,aAAaD,GAIzC,SAASR,EAAiBL,GAAI,OAC5BM,EAAM,QACNC,IAEAzB,OAAOiC,KAAK,QAA0BC,QAAQC,IAC5C,GAA6C,oBAAlC,OAAyBA,GAAqB,CACvD,MAAMC,EAAelB,EAAGiB,GAAOjB,EAAGiB,GAAKE,KAAKnB,GAAM,OAC5CoB,EAAW,OAAyBH,GAAKE,KAAK,KAAMnB,EAAIkB,GAC9DZ,EAAOW,GAAOG,EACdb,EAAQU,GAAOG,KAKrB,SAAShB,EAAiBJ,EAAIqB,GAC5B,IAAK,MAAMR,KAAa/B,OAAOC,oBAAoBsC,GAC/B,cAAdR,GACFS,EAAkBtB,EAAI,CACpBa,YACAP,OAAQN,EAAGC,KACXM,QAASP,IAMjB,SAASsB,EAAkBtB,GAAI,UAC7Ba,EAAS,OACTP,EAAM,QACNC,IAEA,MAAMgB,EAAW,OAAyBV,GAC1C,eAAOU,GACP,MAAM,KACJC,EAAO,IACLD,GACE,OACJE,EAAS,IACPD,EACEE,EAAM1B,EAAGc,aAAaD,GAE5B,IAAK,MAAMI,KAAOnC,OAAOiC,KAAKQ,GAAW,CACvC,MAAMI,EAAS,GAAGV,IAAMQ,IACxB,IAAIL,EAAW,KAEH,SAARH,GAA+C,oBAAZjB,EAAGiB,KAAiCS,GAA8B,oBAAhBA,EAAIC,GAC3FP,EAAW,IAAIQ,IAASF,EAAIC,MAAWC,GACL,oBAAlBL,EAASN,KACzBG,EAAWG,EAASN,GAAKE,KAAKb,KAG5Bc,IACFd,EAAOW,GAAOG,EACdb,EAAQU,GAAOG,IAhErBZ,EAAQT,gBAAkBA,I,0ECrB1B,IAAI8B,EAAyB,EAAQ,QAErC/C,OAAOgD,eAAezC,EAAS,aAAc,CAC3C0C,OAAO,IAET1C,EAAQ2C,SAAWA,EACnB3C,EAAQ4C,QAAUC,EAElB,IAAIC,EAAW,EAAQ,QAEnBC,EAAaP,EAAuB,EAAQ,SAE5CQ,EAAcR,EAAuB,EAAQ,SAEjD,SAASG,IACP,MAA8C,qBAAhCG,EAAStD,OAAOyD,YAGhC,SAASJ,EAAWK,GAClB,IAAKA,KAAkB,EAAIH,EAAWH,WACpC,MAAO,OAGT,IAAI,EAAII,EAAYJ,SAASM,GAC3B,MAAO,WAGT,IAAIC,EAAkC,qBAAdC,UAA4BA,UAAY,GAC5DC,EAAYH,GAAiBC,EAAWE,WAAa,GAEzD,GAAIA,EAAUC,QAAQ,SAAW,EAC/B,MAAO,OAGT,IAAIC,GAAyC,IAAhCF,EAAUC,QAAQ,SAC3BE,GAA+C,IAAnCH,EAAUC,QAAQ,YAElC,OAAIC,GAAUC,EACL,KAGLV,EAAStD,OAAOiE,OACX,SAGLX,EAAStD,OAAOkE,OACX,SAGLZ,EAAStD,OAAOmE,gBACX,UAGF,Y,qCCvDT,wFAAMC,EAAU,CACdC,KAAsB,qBAATA,MAAwBA,KACrCrE,OAA0B,qBAAXA,QAA0BA,OACzC4B,OAA0B,qBAAXA,GAA0BA,EACzC0C,SAA8B,qBAAbA,UAA4BA,UAIzC3C,GAFQyC,EAAQC,MAAQD,EAAQpE,QAAUoE,EAAQxC,OACxCwC,EAAQpE,QAAUoE,EAAQC,MAAQD,EAAQxC,OAC1CwC,EAAQxC,QAAUwC,EAAQC,MAAQD,EAAQpE,QAAU,IAGvDuE,GAFKH,EAAQE,SAEkB,kBAAZxD,GAA4C,qBAApB0D,OAAO1D,IAAmCA,EAAQ2D,SAEpGC,EAA6B,qBAAZ5D,GAA2BA,EAAQ6D,SAAW,YAAYC,KAAK9D,EAAQ6D,SACnED,GAAWG,WAAWH,EAAQ,M,qECdzD,YAAe,SAASI,EAAWpB,GACjC,GAAsB,qBAAX1D,QAAoD,kBAAnBA,OAAOc,SAAgD,aAAxBd,OAAOc,QAAQiE,KACxF,OAAO,EAGT,GAAuB,qBAAZjE,GAAuD,kBAArBA,EAAQkE,UAAyBC,QAAQnE,EAAQkE,SAASE,UACrG,OAAO,EAGT,MAAMC,EAAqC,kBAAdvB,WAAyD,kBAAxBA,UAAUC,WAA0BD,UAAUC,UACtGA,EAAYH,GAAiByB,EAEnC,SAAItB,GAAaA,EAAUC,QAAQ,aAAe,GAZpD,oC,0DCAA,kDACA,MAAMsB,EAAgB,GAEtB,SAAS/E,EAAMgF,GACT,YAAOC,SAAW,YAAOA,QAAQjF,OACnC,YAAOiF,QAAQjF,MAAMgF,GAIzB,SAASE,EAAIF,GACP,YAAOC,SAAW,YAAOA,QAAQC,KACnC,YAAOD,QAAQC,IAAIF,GAIvB,SAASG,EAAkBC,EAAKC,GAC9BN,EAAcK,IAAO,OAELE,IAAZD,GACFrF,EAAMqF,GAIV,SAASE,EAAYzE,GACnB,MAAMtB,EAAIsB,EAAG0E,SAEb1E,EAAG0E,SAAW,WACZ,IAAIJ,EAEJ,GACEA,EAAM5F,EAAEiG,MAAM3E,GAEF,IAARsE,IACFL,EAAcK,IAAO,SAER,IAARA,GAET,IAAKA,KAAOL,EACV,GAAIA,EAAcK,GAEhB,cADOL,EAAcK,GACdM,SAASN,EAAK,IAIzB,OAAO,GAIX,MAAMO,EAA4B,SAASA,EAA0BnD,GACnE,MAAM1B,EAAK0B,EAAI1B,GACf8E,KAAKpD,IAAMA,EACXoD,KAAKC,SAAU,EACfD,KAAKE,cAAe,EACpBF,KAAKG,mBAAqB,KAC1BH,KAAKI,QAAU,IAAIC,MAAMzD,EAAI0D,kBAE7B,IAAK,IAAIC,EAAI,EAAGA,EAAIP,KAAKI,QAAQI,OAAQD,IAAK,CAC5C,MAAME,EAAS,IAAIV,EAA0BW,aAAaxF,GAC1D8E,KAAKI,QAAQG,GAAKE,EAGpBT,KAAKW,UAAY,GAGnBZ,EAA0BW,aAAe,SAAsBxF,GAC7D8E,KAAKY,SAAU,EACfZ,KAAKa,OAAS,KACdb,KAAKc,KAAO,EACZd,KAAKlB,KAAO,KACZkB,KAAKe,YAAa,EAClBf,KAAKgB,OAAS,GACdhB,KAAKiB,OAAS,EACdjB,KAAKkB,OAAS,GACdlB,KAAKmB,WAGPpB,EAA0BW,aAAaU,UAAUD,QAAU,WACzDnB,KAAKkB,OAAS,CAAClB,KAAKc,KAAMd,KAAKlB,KAAMkB,KAAKe,WAAYf,KAAKgB,OAAQhB,KAAKiB,QAAQI,KAAK,MAGvF,MAAMC,EAAuB,SAA8BpG,GACzD,MAAMkD,EAAO4B,KACbA,KAAK9E,GAAKA,EACVyE,EAAYzE,GACZ,MAAMqG,EAAWvB,KAAKuB,SAAW,CAC/BC,aAActG,EAAGsG,aACjBC,wBAAyBvG,EAAGuG,wBAC5BC,yBAA0BxG,EAAGwG,yBAC7BC,WAAYzG,EAAGyG,WACfC,gBAAiB1G,EAAG0G,gBACpBC,oBAAqB3G,EAAG2G,qBAG1B3G,EAAGsG,aAAe,SAAsBM,GACtC,OAAIA,IAAU1D,EAAK2D,yBACb3D,EAAK4D,2BAA6B5D,EAAK6D,yBAClC,KAGF7D,EAAK4D,yBAGPT,EAASC,aAAa3B,MAAMG,KAAMkC,YAG3ChH,EAAGuG,wBAA0B,SAAiCU,GAC5D,MAAMC,EAAMhE,EAAK4D,yBACjBI,EAAIzB,UAAY0B,KAAKC,IAAIF,EAAIzB,UAAWwB,GACxC,MAAM1B,EAAS2B,EAAIhC,QAAQ+B,GAE3B,OADA1B,EAAOG,SAAU,EACVW,EAASE,wBAAwB5B,MAAMG,KAAMkC,YAGtDhH,EAAGwG,yBAA2B,SAAkCS,GAC9D,MAAMC,EAAMhE,EAAK4D,yBACjBI,EAAIzB,UAAY0B,KAAKC,IAAIF,EAAIzB,UAAWwB,GACxC,MAAM1B,EAAS2B,EAAIhC,QAAQ+B,GAE3B,OADA1B,EAAOG,SAAU,EACVW,EAASG,yBAAyB7B,MAAMG,KAAMkC,YAGvDhH,EAAGyG,WAAa,SAAoBnG,EAAQqF,GAC1C,OAAQrF,GACN,KAAK,MACH4C,EAAKmE,mBAAqB1B,EAC1B,MAEF,KAAK,MACHzC,EAAK4D,yBAAyB7B,mBAAqBU,EACnD,MAEF,SAGF,OAAOU,EAASI,WAAW9B,MAAMG,KAAMkC,YAGzChH,EAAG0G,gBAAkB,SAAyBO,EAAOL,GACnD,MAAMM,EAAMhE,EAAK4D,yBACXvB,EAAS2B,EAAIhC,QAAQ+B,GAE3B,OAAQL,GACN,KAAK,MACH,OAAOrB,EAAOI,OAEhB,KAAK,MACH,OAAOJ,EAAOG,QAEhB,KAAK,MACH,OAAOH,EAAOK,KAEhB,KAAK,MACH,OAAOL,EAAOO,OAEhB,KAAK,MACH,OAAOP,EAAO3B,KAEhB,KAAK,MACH,OAAO2B,EAAOM,WAEhB,QACE,OAAOQ,EAASK,gBAAgB/B,MAAMG,KAAMkC,aAIlDhH,EAAG2G,oBAAsB,SAA6BW,EAAM1B,EAAMhC,EAAMiC,EAAYC,EAAQC,GAC1F,MAAMmB,EAAMhE,EAAK4D,yBACjBI,EAAIzB,UAAY0B,KAAKC,IAAIF,EAAIzB,UAAW6B,GACxC,MAAM/B,EAAS2B,EAAIhC,QAAQoC,GAQ3B,OAPA/B,EAAOI,OAASzC,EAAKmE,mBACrB9B,EAAOK,KAAOA,EACdL,EAAO3B,KAAOA,EACd2B,EAAOM,WAAaA,EACpBN,EAAOO,OAASA,EAChBP,EAAOQ,OAASA,EAChBR,EAAOU,UACAI,EAASM,oBAAoBhC,MAAMG,KAAMkC,YAG9ChH,EAAGuH,qBACLvH,EAAGuH,oBAAoBzC,KAAM,2BAG3B9E,EAAGwH,QACLxH,EAAGwH,OAAOC,iBAAiB,uBAAwB,KACjDrD,EAAI,2DACJlB,EAAKwE,WACJ,GAGL5C,KAAK4C,UA4GA,SAASC,EAA0B3H,GACxC,GAAoC,oBAAzBA,EAAG4H,kBACZ,OAGF,MAAMC,EAAkC7H,EAAGY,uBAE3CZ,EAAGY,uBAAyB,WAC1B,MAAMkH,EAAOD,EAAgCvI,KAAKwF,OAAS,GAM3D,OAJIgD,EAAKnF,QAAQ,2BAA6B,GAC5CmF,EAAKC,KAAK,2BAGLD,GAGT,MAAME,EAAwBhI,EAAGc,aAEjCd,EAAGc,aAAe,SAAsBmH,GACtC,MAAMvG,EAAMsG,EAAsB1I,KAAKwF,KAAMmD,GAE7C,OAAIvG,IAIS,4BAATuG,EACK,MAGJjI,EAAGkI,yBACNpD,KAAKoD,uBAAyB,IAAI9B,EAAqBtB,OAGlDA,KAAKoD,0BA3IhB9B,EAAqBF,UAAUW,yBAA2B,MAE1DT,EAAqBF,UAAUwB,OAAS,WACtC,MAAMS,OAA6C3D,IAA5BM,KAAKsD,mBAE5B,GAAID,EACF,IAAK,IAAIE,EAAK,EAAGA,EAAKvD,KAAKsD,mBAAmB9C,SAAU+C,EACtDvD,KAAKsD,mBAAmBrD,SAAU,EAItC,MAAM/E,EAAK8E,KAAK9E,GAChB8E,KAAKM,iBAAmBpF,EAAGsG,aAAa,OACxCxB,KAAKiC,yBAA2B,IAAIlC,EAA0BC,MAC9DA,KAAKgC,yBAA2B,KAChChC,KAAKuC,mBAAqB,KAC1BvC,KAAKsD,mBAAqB,CAACtD,KAAKiC,0BAChCjC,KAAKwD,mBAAmB,OAG1BlC,EAAqBF,UAAUqC,qBAAuB,WACpD,MAAMC,EAAc,IAAI3D,EAA0BC,MAElD,OADAA,KAAKsD,mBAAmBL,KAAKS,GACtBA,GAGTpC,EAAqBF,UAAUuC,qBAAuB,SAA8BD,GAClFA,EAAYzD,SAAU,EACtBD,KAAKsD,mBAAmBM,OAAO5D,KAAKsD,mBAAmBzF,QAAQ6F,GAAc,GAEzE1D,KAAKgC,2BAA6B0B,GACpC1D,KAAKwD,mBAAmB,OAI5BlC,EAAqBF,UAAUyC,iBAAmB,SAA0BH,GAC1E,SAAIA,GAAeA,aAAuB3D,GACpC2D,EAAYxD,cAAgBwD,EAAY9G,MAAQoD,OAQxDsB,EAAqBF,UAAUoC,mBAAqB,SAA4BE,GAC9E,MAAMxI,EAAK8E,KAAK9E,GAEhB,GAAIwI,IAAgBA,EAAYzD,QAE9B,YADAV,EAAkB,KAAM,2DAI1B,MAAMgC,EAAWvB,KAAKuB,SAChBuC,EAAS9D,KAAKgC,yBACpBhC,KAAKgC,yBAA2B0B,GAAe1D,KAAKiC,yBACpDjC,KAAKgC,yBAAyB9B,cAAe,EAC7C,MAAM6D,EAAS/D,KAAKgC,yBAEpB,GAAI8B,IAAWC,EACb,OAGGD,GAAUC,EAAO5D,qBAAuB2D,EAAO3D,oBAClDoB,EAASI,WAAWnH,KAAKU,EAAI,MAAO6I,EAAO5D,oBAG7C,IAAI6D,EAAiBhE,KAAKuC,mBAC1B,MAAM5B,EAAY0B,KAAKC,IAAIwB,EAASA,EAAOnD,UAAY,EAAGoD,EAAOpD,WAEjE,IAAK,IAAIJ,EAAI,EAAGA,GAAKI,EAAWJ,IAAK,CACnC,MAAME,EAASsD,EAAO3D,QAAQG,GACxB0D,EAAYH,EAASA,EAAO1D,QAAQG,GAAK,KAU/C,GARKuD,GAAUrD,EAAOG,UAAYqD,EAAUrD,UACtCH,EAAOG,QACTW,EAASE,wBAAwBjH,KAAKU,EAAIqF,GAE1CgB,EAASG,yBAAyBlH,KAAKU,EAAIqF,IAI3CE,EAAOG,QAAS,CAClB,IAAIsD,GAAgB,EAEfJ,GAAUrD,EAAOI,SAAWoD,EAAUpD,SACrCmD,IAAmBvD,EAAOI,SAC5BU,EAASI,WAAWnH,KAAKU,EAAI,MAAOuF,EAAOI,QAC3CmD,EAAiBvD,EAAOI,QAG1BqD,GAAgB,IAGdA,GAAiBzD,EAAOS,SAAW+C,EAAU/C,SAC/CK,EAASM,oBAAoBrH,KAAKU,EAAIqF,EAAGE,EAAOK,KAAML,EAAO3B,KAAM2B,EAAOM,WAAYN,EAAOO,OAAQP,EAAOQ,SAK9GjB,KAAKuC,qBAAuByB,GAC9BzC,EAASI,WAAWnH,KAAKU,EAAI,MAAO8E,KAAKuC,sB,qCCtS7C,wFAAMpE,EAAU,CACdC,KAAsB,qBAATA,MAAwBA,KACrCrE,OAA0B,qBAAXA,QAA0BA,OACzC4B,OAA0B,qBAAXA,GAA0BA,EACzC0C,SAA8B,qBAAbA,UAA4BA,SAC7CxD,QAA4B,kBAAZA,GAAwBA,GAGpCsJ,GADQhG,EAAQC,MAAQD,EAAQpE,QAAUoE,EAAQxC,OACxCwC,EAAQpE,QAAUoE,EAAQC,MAAQD,EAAQxC,QAGpDyI,GAFUjG,EAAQxC,QAAUwC,EAAQC,MAAQD,EAAQpE,OACxCoE,EAAQE,SACTF,EAAQtD,SAAW,IACnBwE,U,oECZjB,gSAYO,SAASgF,IACd,IAAIC,EAAM,IAAI,OAAoB,GAQlC,OANI,QAAuBC,eACzBD,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,GAGJA,EAmVF,SAASE,EAAIC,EAAGC,GACrB,OAAOD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAWvC,SAASC,EAAML,EAAKG,EAAGC,GAC5B,IAAIE,EAAKH,EAAE,GACPI,EAAKJ,EAAE,GACPK,EAAKL,EAAE,GACPM,EAAKL,EAAE,GACPM,EAAKN,EAAE,GACPO,EAAKP,EAAE,GAIX,OAHAJ,EAAI,GAAKO,EAAKI,EAAKH,EAAKE,EACxBV,EAAI,GAAKQ,EAAKC,EAAKH,EAAKK,EACxBX,EAAI,GAAKM,EAAKI,EAAKH,EAAKE,EACjBT,EAiGF,SAASY,EAAcZ,EAAKG,EAAGU,GACpC,IAAIC,EAAIX,EAAE,GACNY,EAAIZ,EAAE,GACNa,EAAIb,EAAE,GACNc,EAAIJ,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,IAAMG,EAAIH,EAAE,IAK5C,OAJAI,EAAIA,GAAK,EACTjB,EAAI,IAAMa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,GAAKG,EAAIH,EAAE,KAAOI,EACpDjB,EAAI,IAAMa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,GAAKG,EAAIH,EAAE,KAAOI,EACpDjB,EAAI,IAAMa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,IAAMG,EAAIH,EAAE,KAAOI,EAC9CjB,EAWF,SAASkB,EAAclB,EAAKG,EAAGU,GACpC,IAAIC,EAAIX,EAAE,GACNY,EAAIZ,EAAE,GACNa,EAAIb,EAAE,GAIV,OAHAH,EAAI,GAAKc,EAAID,EAAE,GAAKE,EAAIF,EAAE,GAAKG,EAAIH,EAAE,GACrCb,EAAI,GAAKc,EAAID,EAAE,GAAKE,EAAIF,EAAE,GAAKG,EAAIH,EAAE,GACrCb,EAAI,GAAKc,EAAID,EAAE,GAAKE,EAAIF,EAAE,GAAKG,EAAIH,EAAE,GAC9Bb,EAYF,SAASmB,EAAcnB,EAAKG,EAAGiB,GAEpC,IAAIC,EAAKD,EAAE,GACPE,EAAKF,EAAE,GACPG,EAAKH,EAAE,GACPI,EAAKJ,EAAE,GACPN,EAAIX,EAAE,GACNY,EAAIZ,EAAE,GACNa,EAAIb,EAAE,GAGNsB,EAAMH,EAAKN,EAAIO,EAAKR,EACpBW,EAAMH,EAAKT,EAAIO,EAAKL,EACpBW,EAAMN,EAAKN,EAAIO,EAAKR,EAEpBc,EAAON,EAAKK,EAAMJ,EAAKG,EACvBG,EAAON,EAAKE,EAAMJ,EAAKM,EACvBG,EAAOT,EAAKK,EAAMJ,EAAKG,EAEvBM,EAAU,EAALP,EAYT,OAXAC,GAAOM,EACPL,GAAOK,EACPJ,GAAOI,EAEPH,GAAQ,EACRC,GAAQ,EACRC,GAAQ,EAER9B,EAAI,GAAKc,EAAIW,EAAMG,EACnB5B,EAAI,GAAKe,EAAIW,EAAMG,EACnB7B,EAAI,GAAKgB,EAAIW,EAAMG,EACZ9B,EAWF,SAASgC,EAAQhC,EAAKG,EAAGC,EAAG6B,GACjC,IAAIC,EAAI,GACJC,EAAI,GAaR,OAXAD,EAAE,GAAK/B,EAAE,GAAKC,EAAE,GAChB8B,EAAE,GAAK/B,EAAE,GAAKC,EAAE,GAChB8B,EAAE,GAAK/B,EAAE,GAAKC,EAAE,GAEhB+B,EAAE,GAAKD,EAAE,GACTC,EAAE,GAAKD,EAAE,GAAKnE,KAAKqE,IAAIH,GAAOC,EAAE,GAAKnE,KAAKsE,IAAIJ,GAC9CE,EAAE,GAAKD,EAAE,GAAKnE,KAAKsE,IAAIJ,GAAOC,EAAE,GAAKnE,KAAKqE,IAAIH,GAE9CjC,EAAI,GAAKmC,EAAE,GAAK/B,EAAE,GAClBJ,EAAI,GAAKmC,EAAE,GAAK/B,EAAE,GAClBJ,EAAI,GAAKmC,EAAE,GAAK/B,EAAE,GACXJ,EAWF,SAASsC,EAAQtC,EAAKG,EAAGC,EAAG6B,GACjC,IAAIC,EAAI,GACJC,EAAI,GAaR,OAXAD,EAAE,GAAK/B,EAAE,GAAKC,EAAE,GAChB8B,EAAE,GAAK/B,EAAE,GAAKC,EAAE,GAChB8B,EAAE,GAAK/B,EAAE,GAAKC,EAAE,GAEhB+B,EAAE,GAAKD,EAAE,GAAKnE,KAAKsE,IAAIJ,GAAOC,EAAE,GAAKnE,KAAKqE,IAAIH,GAC9CE,EAAE,GAAKD,EAAE,GACTC,EAAE,GAAKD,EAAE,GAAKnE,KAAKqE,IAAIH,GAAOC,EAAE,GAAKnE,KAAKsE,IAAIJ,GAE9CjC,EAAI,GAAKmC,EAAE,GAAK/B,EAAE,GAClBJ,EAAI,GAAKmC,EAAE,GAAK/B,EAAE,GAClBJ,EAAI,GAAKmC,EAAE,GAAK/B,EAAE,GACXJ,EAWF,SAASuC,EAAQvC,EAAKG,EAAGC,EAAG6B,GACjC,IAAIC,EAAI,GACJC,EAAI,GAaR,OAXAD,EAAE,GAAK/B,EAAE,GAAKC,EAAE,GAChB8B,EAAE,GAAK/B,EAAE,GAAKC,EAAE,GAChB8B,EAAE,GAAK/B,EAAE,GAAKC,EAAE,GAEhB+B,EAAE,GAAKD,EAAE,GAAKnE,KAAKqE,IAAIH,GAAOC,EAAE,GAAKnE,KAAKsE,IAAIJ,GAC9CE,EAAE,GAAKD,EAAE,GAAKnE,KAAKsE,IAAIJ,GAAOC,EAAE,GAAKnE,KAAKqE,IAAIH,GAC9CE,EAAE,GAAKD,EAAE,GAETlC,EAAI,GAAKmC,EAAE,GAAK/B,EAAE,GAClBJ,EAAI,GAAKmC,EAAE,GAAK/B,EAAE,GAClBJ,EAAI,GAAKmC,EAAE,GAAK/B,EAAE,GACXJ,EASF,SAASwC,EAAMrC,EAAGC,GACvB,IAAIE,EAAKH,EAAE,GACPI,EAAKJ,EAAE,GACPK,EAAKL,EAAE,GACPM,EAAKL,EAAE,GACPM,EAAKN,EAAE,GACPO,EAAKP,EAAE,GACPqC,EAAO1E,KAAK2E,KAAKpC,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,GAC1CmC,EAAO5E,KAAK2E,KAAKjC,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,GAC1CiC,EAAMH,EAAOE,EACbE,EAASD,GAAO1C,EAAIC,EAAGC,GAAKwC,EAChC,OAAO7E,KAAK+E,KAAK/E,KAAKgF,IAAIhF,KAAKC,IAAI6E,GAAS,GAAI,KA4G7B,WACnB,IAAIG,EAAMjD,KADS,I,0HC/uBN,MAAM,UAAe,OAClC,eAEE,OADA,OAAAkD,EAAA,OAAO,GACA,EAGT,WAEE,OADA,OAAAA,EAAA,OAAO,GACA,EAGT,WACE,IAAIC,EAAS,IAEb,GAAI,OAAOC,cAAe,CACxBD,GAAU,aAEV,IAAK,IAAIE,EAAM,EAAGA,EAAM1H,KAAK2H,OAAQD,EACnC,IAAK,IAAIE,EAAM,EAAGA,EAAM5H,KAAK2H,OAAQC,EACnCJ,GAAU,IAAIK,OAAO7H,KAAK4H,EAAM5H,KAAK2H,KAAOD,QAG3C,CACLF,GAAU,gBAEV,IAAK,IAAIM,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnCN,GAAU,IAAIK,OAAO7H,KAAK8H,IAK9B,OADAN,GAAU,IACHA,EAGT,gBAAgBE,EAAKE,GACnB,OAAOA,EAAM5H,KAAK2H,KAAOD,EAG3B,WAAWA,EAAKE,GACd,OAAO5H,KAAK4H,EAAM5H,KAAK2H,KAAOD,GAGhC,WAAWA,EAAKE,EAAK3K,GAEnB,OADA+C,KAAK4H,EAAM5H,KAAK2H,KAAOD,GAAO,eAAYzK,GACnC+C,KAGT,UAAUgI,EAAaC,EAAS,IAAI5H,MAAML,KAAK2H,MAAMO,MAAM,IACzD,MAAMC,EAAaH,EAAchI,KAAK2H,KAEtC,IAAK,IAAIG,EAAI,EAAGA,EAAI9H,KAAK2H,OAAQG,EAC/BG,EAAOH,GAAK9H,KAAKmI,EAAaL,GAGhC,OAAOG,EAGT,UAAUD,EAAaI,GACrB,MAAMD,EAAaH,EAAchI,KAAK2H,KAEtC,IAAK,IAAIG,EAAI,EAAGA,EAAI9H,KAAK2H,OAAQG,EAC/B9H,KAAKmI,EAAaL,GAAKM,EAAaN,GAGtC,OAAO9H,M,4BCiHJ,SAASqI,EAAS/D,GAiBvB,OAhBAA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAUF,SAASgE,EAAUhE,EAAKG,GAE7B,GAAIH,IAAQG,EAAG,CACb,IAAI8D,EAAM9D,EAAE,GACR+D,EAAM/D,EAAE,GACRgE,EAAMhE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GACRmE,EAAMnE,EAAE,IACZH,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,IACXH,EAAI,GAAKiE,EACTjE,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,IACXH,EAAI,GAAKkE,EACTlE,EAAI,GAAKoE,EACTpE,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMmE,EACVnE,EAAI,IAAMqE,EACVrE,EAAI,IAAMsE,OAEVtE,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,IACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,IACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,GACZH,EAAI,IAAMG,EAAE,GACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IAGd,OAAOH,EAUF,SAASuE,EAAOvE,EAAKG,GAC1B,IAAIqE,EAAMrE,EAAE,GACR8D,EAAM9D,EAAE,GACR+D,EAAM/D,EAAE,GACRgE,EAAMhE,EAAE,GACRsE,EAAMtE,EAAE,GACRuE,EAAMvE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GACRwE,EAAMxE,EAAE,GACRyE,EAAMzE,EAAE,GACR0E,EAAM1E,EAAE,IACRmE,EAAMnE,EAAE,IACR2E,EAAM3E,EAAE,IACR4E,EAAM5E,EAAE,IACR6E,EAAM7E,EAAE,IACR8E,EAAM9E,EAAE,IACR+E,EAAMV,EAAME,EAAMT,EAAMQ,EACxBU,EAAMX,EAAMJ,EAAMF,EAAMO,EACxBW,EAAMZ,EAAMH,EAAMF,EAAMM,EACxBY,EAAMpB,EAAMG,EAAMF,EAAMQ,EACxBY,EAAMrB,EAAMI,EAAMF,EAAMO,EACxBa,EAAMrB,EAAMG,EAAMF,EAAMC,EACxBoB,EAAMb,EAAMI,EAAMH,EAAME,EACxBW,EAAMd,EAAMK,EAAMH,EAAMC,EACxBY,EAAMf,EAAMM,EAAMX,EAAMQ,EACxBa,EAAMf,EAAMI,EAAMH,EAAME,EACxBa,EAAMhB,EAAMK,EAAMX,EAAMS,EACxBc,EAAMhB,EAAMI,EAAMX,EAAMU,EAExBc,EAAMZ,EAAMW,EAAMV,EAAMS,EAAMR,EAAMO,EAAMN,EAAMK,EAAMJ,EAAMG,EAAMF,EAAMC,EAE5E,OAAKM,GAILA,EAAM,EAAMA,EACZ9F,EAAI,IAAM0E,EAAMmB,EAAMzB,EAAMwB,EAAMvB,EAAMsB,GAAOG,EAC/C9F,EAAI,IAAMkE,EAAM0B,EAAM3B,EAAM4B,EAAM1B,EAAMwB,GAAOG,EAC/C9F,EAAI,IAAM+E,EAAMQ,EAAMP,EAAMM,EAAML,EAAMI,GAAOS,EAC/C9F,EAAI,IAAM6E,EAAMS,EAAMV,EAAMW,EAAMjB,EAAMe,GAAOS,EAC/C9F,EAAI,IAAMoE,EAAMsB,EAAMjB,EAAMoB,EAAMxB,EAAMoB,GAAOK,EAC/C9F,EAAI,IAAMwE,EAAMqB,EAAM3B,EAAMwB,EAAMvB,EAAMsB,GAAOK,EAC/C9F,EAAI,IAAMgF,EAAMI,EAAMN,EAAMS,EAAMN,EAAME,GAAOW,EAC/C9F,EAAI,IAAM2E,EAAMY,EAAMV,EAAMO,EAAMd,EAAMa,GAAOW,EAC/C9F,EAAI,IAAMyE,EAAMmB,EAAMlB,EAAMgB,EAAMrB,EAAMmB,GAAOM,EAC/C9F,EAAI,IAAMiE,EAAMyB,EAAMlB,EAAMoB,EAAMzB,EAAMqB,GAAOM,EAC/C9F,EAAI,KAAO8E,EAAMQ,EAAMP,EAAMK,EAAMH,EAAMC,GAAOY,EAChD9F,EAAI,KAAO4E,EAAMQ,EAAMT,EAAMW,EAAMhB,EAAMY,GAAOY,EAChD9F,EAAI,KAAO0E,EAAMe,EAAMhB,EAAMkB,EAAMvB,EAAMoB,GAAOM,EAChD9F,EAAI,KAAOwE,EAAMmB,EAAM1B,EAAMwB,EAAMvB,EAAMsB,GAAOM,EAChD9F,EAAI,KAAO+E,EAAMI,EAAML,EAAMO,EAAML,EAAME,GAAOY,EAChD9F,EAAI,KAAO2E,EAAMU,EAAMT,EAAMO,EAAMN,EAAMK,GAAOY,EACzC9F,GApBE,KAwEJ,SAAS+F,EAAY5F,GAC1B,IAAIqE,EAAMrE,EAAE,GACR8D,EAAM9D,EAAE,GACR+D,EAAM/D,EAAE,GACRgE,EAAMhE,EAAE,GACRsE,EAAMtE,EAAE,GACRuE,EAAMvE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GACRwE,EAAMxE,EAAE,GACRyE,EAAMzE,EAAE,GACR0E,EAAM1E,EAAE,IACRmE,EAAMnE,EAAE,IACR2E,EAAM3E,EAAE,IACR4E,EAAM5E,EAAE,IACR6E,EAAM7E,EAAE,IACR8E,EAAM9E,EAAE,IACR+E,EAAMV,EAAME,EAAMT,EAAMQ,EACxBU,EAAMX,EAAMJ,EAAMF,EAAMO,EACxBW,EAAMZ,EAAMH,EAAMF,EAAMM,EACxBY,EAAMpB,EAAMG,EAAMF,EAAMQ,EACxBY,EAAMrB,EAAMI,EAAMF,EAAMO,EACxBa,EAAMrB,EAAMG,EAAMF,EAAMC,EACxBoB,EAAMb,EAAMI,EAAMH,EAAME,EACxBW,EAAMd,EAAMK,EAAMH,EAAMC,EACxBY,EAAMf,EAAMM,EAAMX,EAAMQ,EACxBa,EAAMf,EAAMI,EAAMH,EAAME,EACxBa,EAAMhB,EAAMK,EAAMX,EAAMS,EACxBc,EAAMhB,EAAMI,EAAMX,EAAMU,EAE5B,OAAOE,EAAMW,EAAMV,EAAMS,EAAMR,EAAMO,EAAMN,EAAMK,EAAMJ,EAAMG,EAAMF,EAAMC,EAWpE,SAASQ,EAAShG,EAAKG,EAAGC,GAC/B,IAAIoE,EAAMrE,EAAE,GACR8D,EAAM9D,EAAE,GACR+D,EAAM/D,EAAE,GACRgE,EAAMhE,EAAE,GACRsE,EAAMtE,EAAE,GACRuE,EAAMvE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GACRwE,EAAMxE,EAAE,GACRyE,EAAMzE,EAAE,GACR0E,EAAM1E,EAAE,IACRmE,EAAMnE,EAAE,IACR2E,EAAM3E,EAAE,IACR4E,EAAM5E,EAAE,IACR6E,EAAM7E,EAAE,IACR8E,EAAM9E,EAAE,IAER8F,EAAK7F,EAAE,GACP8F,EAAK9F,EAAE,GACP+F,EAAK/F,EAAE,GACPgG,EAAKhG,EAAE,GA6BX,OA5BAJ,EAAI,GAAKiG,EAAKzB,EAAM0B,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAC/C9E,EAAI,GAAKiG,EAAKhC,EAAMiC,EAAKxB,EAAMyB,EAAKvB,EAAMwB,EAAKrB,EAC/C/E,EAAI,GAAKiG,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAKtB,EAAMuB,EAAKpB,EAC/ChF,EAAI,GAAKiG,EAAK9B,EAAM+B,EAAK7B,EAAM8B,EAAK7B,EAAM8B,EAAKnB,EAC/CgB,EAAK7F,EAAE,GACP8F,EAAK9F,EAAE,GACP+F,EAAK/F,EAAE,GACPgG,EAAKhG,EAAE,GACPJ,EAAI,GAAKiG,EAAKzB,EAAM0B,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAC/C9E,EAAI,GAAKiG,EAAKhC,EAAMiC,EAAKxB,EAAMyB,EAAKvB,EAAMwB,EAAKrB,EAC/C/E,EAAI,GAAKiG,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAKtB,EAAMuB,EAAKpB,EAC/ChF,EAAI,GAAKiG,EAAK9B,EAAM+B,EAAK7B,EAAM8B,EAAK7B,EAAM8B,EAAKnB,EAC/CgB,EAAK7F,EAAE,GACP8F,EAAK9F,EAAE,GACP+F,EAAK/F,EAAE,IACPgG,EAAKhG,EAAE,IACPJ,EAAI,GAAKiG,EAAKzB,EAAM0B,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAC/C9E,EAAI,GAAKiG,EAAKhC,EAAMiC,EAAKxB,EAAMyB,EAAKvB,EAAMwB,EAAKrB,EAC/C/E,EAAI,IAAMiG,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAKtB,EAAMuB,EAAKpB,EAChDhF,EAAI,IAAMiG,EAAK9B,EAAM+B,EAAK7B,EAAM8B,EAAK7B,EAAM8B,EAAKnB,EAChDgB,EAAK7F,EAAE,IACP8F,EAAK9F,EAAE,IACP+F,EAAK/F,EAAE,IACPgG,EAAKhG,EAAE,IACPJ,EAAI,IAAMiG,EAAKzB,EAAM0B,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAChD9E,EAAI,IAAMiG,EAAKhC,EAAMiC,EAAKxB,EAAMyB,EAAKvB,EAAMwB,EAAKrB,EAChD/E,EAAI,IAAMiG,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAKtB,EAAMuB,EAAKpB,EAChDhF,EAAI,IAAMiG,EAAK9B,EAAM+B,EAAK7B,EAAM8B,EAAK7B,EAAM8B,EAAKnB,EACzCjF,EAWF,SAASqG,EAAUrG,EAAKG,EAAGmG,GAChC,IAGI9B,EAAKP,EAAKC,EAAKC,EACfM,EAAKC,EAAKN,EAAKC,EACfM,EAAKC,EAAKC,EAAKP,EALfxD,EAAIwF,EAAE,GACNvF,EAAIuF,EAAE,GACNtF,EAAIsF,EAAE,GAyCV,OApCInG,IAAMH,GACRA,EAAI,IAAMG,EAAE,GAAKW,EAAIX,EAAE,GAAKY,EAAIZ,EAAE,GAAKa,EAAIb,EAAE,IAC7CH,EAAI,IAAMG,EAAE,GAAKW,EAAIX,EAAE,GAAKY,EAAIZ,EAAE,GAAKa,EAAIb,EAAE,IAC7CH,EAAI,IAAMG,EAAE,GAAKW,EAAIX,EAAE,GAAKY,EAAIZ,EAAE,IAAMa,EAAIb,EAAE,IAC9CH,EAAI,IAAMG,EAAE,GAAKW,EAAIX,EAAE,GAAKY,EAAIZ,EAAE,IAAMa,EAAIb,EAAE,MAE9CqE,EAAMrE,EAAE,GACR8D,EAAM9D,EAAE,GACR+D,EAAM/D,EAAE,GACRgE,EAAMhE,EAAE,GACRsE,EAAMtE,EAAE,GACRuE,EAAMvE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GACRwE,EAAMxE,EAAE,GACRyE,EAAMzE,EAAE,GACR0E,EAAM1E,EAAE,IACRmE,EAAMnE,EAAE,IACRH,EAAI,GAAKwE,EACTxE,EAAI,GAAKiE,EACTjE,EAAI,GAAKkE,EACTlE,EAAI,GAAKmE,EACTnE,EAAI,GAAKyE,EACTzE,EAAI,GAAK0E,EACT1E,EAAI,GAAKoE,EACTpE,EAAI,GAAKqE,EACTrE,EAAI,GAAK2E,EACT3E,EAAI,GAAK4E,EACT5E,EAAI,IAAM6E,EACV7E,EAAI,IAAMsE,EACVtE,EAAI,IAAMwE,EAAM1D,EAAI2D,EAAM1D,EAAI4D,EAAM3D,EAAIb,EAAE,IAC1CH,EAAI,IAAMiE,EAAMnD,EAAI4D,EAAM3D,EAAI6D,EAAM5D,EAAIb,EAAE,IAC1CH,EAAI,IAAMkE,EAAMpD,EAAIsD,EAAMrD,EAAI8D,EAAM7D,EAAIb,EAAE,IAC1CH,EAAI,IAAMmE,EAAMrD,EAAIuD,EAAMtD,EAAIuD,EAAMtD,EAAIb,EAAE,KAGrCH,EAWF,SAAS,EAAMA,EAAKG,EAAGmG,GAC5B,IAAIxF,EAAIwF,EAAE,GACNvF,EAAIuF,EAAE,GACNtF,EAAIsF,EAAE,GAiBV,OAhBAtG,EAAI,GAAKG,EAAE,GAAKW,EAChBd,EAAI,GAAKG,EAAE,GAAKW,EAChBd,EAAI,GAAKG,EAAE,GAAKW,EAChBd,EAAI,GAAKG,EAAE,GAAKW,EAChBd,EAAI,GAAKG,EAAE,GAAKY,EAChBf,EAAI,GAAKG,EAAE,GAAKY,EAChBf,EAAI,GAAKG,EAAE,GAAKY,EAChBf,EAAI,GAAKG,EAAE,GAAKY,EAChBf,EAAI,GAAKG,EAAE,GAAKa,EAChBhB,EAAI,GAAKG,EAAE,GAAKa,EAChBhB,EAAI,IAAMG,EAAE,IAAMa,EAClBhB,EAAI,IAAMG,EAAE,IAAMa,EAClBhB,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACLH,EAYF,SAASuG,EAAOvG,EAAKG,EAAG8B,EAAKuE,GAClC,IAIIC,EAAGC,EAAGC,EACNnC,EAAKP,EAAKC,EAAKC,EACfM,EAAKC,EAAKN,EAAKC,EACfM,EAAKC,EAAKC,EAAKP,EACfY,EAAKC,EAAKC,EACVQ,EAAKC,EAAKe,EACVC,EAAKC,EAAKC,EAVVjG,EAAI0F,EAAK,GACTzF,EAAIyF,EAAK,GACTxF,EAAIwF,EAAK,GACTQ,EAAMjJ,KAAKkJ,MAAMnG,EAAGC,EAAGC,GAS3B,OAAIgG,EAAM,OACD,MAGTA,EAAM,EAAIA,EACVlG,GAAKkG,EACLjG,GAAKiG,EACLhG,GAAKgG,EACLP,EAAI1I,KAAKsE,IAAIJ,GACbyE,EAAI3I,KAAKqE,IAAIH,GACb0E,EAAI,EAAID,EACRlC,EAAMrE,EAAE,GACR8D,EAAM9D,EAAE,GACR+D,EAAM/D,EAAE,GACRgE,EAAMhE,EAAE,GACRsE,EAAMtE,EAAE,GACRuE,EAAMvE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GACRwE,EAAMxE,EAAE,GACRyE,EAAMzE,EAAE,GACR0E,EAAM1E,EAAE,IACRmE,EAAMnE,EAAE,IAER+E,EAAMpE,EAAIA,EAAI6F,EAAID,EAClBvB,EAAMpE,EAAID,EAAI6F,EAAI3F,EAAIyF,EACtBrB,EAAMpE,EAAIF,EAAI6F,EAAI5F,EAAI0F,EACtBb,EAAM9E,EAAIC,EAAI4F,EAAI3F,EAAIyF,EACtBZ,EAAM9E,EAAIA,EAAI4F,EAAID,EAClBE,EAAM5F,EAAID,EAAI4F,EAAI7F,EAAI2F,EACtBI,EAAM/F,EAAIE,EAAI2F,EAAI5F,EAAI0F,EACtBK,EAAM/F,EAAIC,EAAI2F,EAAI7F,EAAI2F,EACtBM,EAAM/F,EAAIA,EAAI2F,EAAID,EAElB1G,EAAI,GAAKwE,EAAMU,EAAMT,EAAMU,EAAMR,EAAMS,EACvCpF,EAAI,GAAKiE,EAAMiB,EAAMR,EAAMS,EAAMP,EAAMQ,EACvCpF,EAAI,GAAKkE,EAAMgB,EAAMd,EAAMe,EAAMN,EAAMO,EACvCpF,EAAI,GAAKmE,EAAMe,EAAMb,EAAMc,EAAMb,EAAMc,EACvCpF,EAAI,GAAKwE,EAAMoB,EAAMnB,EAAMoB,EAAMlB,EAAMiC,EACvC5G,EAAI,GAAKiE,EAAM2B,EAAMlB,EAAMmB,EAAMjB,EAAMgC,EACvC5G,EAAI,GAAKkE,EAAM0B,EAAMxB,EAAMyB,EAAMhB,EAAM+B,EACvC5G,EAAI,GAAKmE,EAAMyB,EAAMvB,EAAMwB,EAAMvB,EAAMsC,EACvC5G,EAAI,GAAKwE,EAAMqC,EAAMpC,EAAMqC,EAAMnC,EAAMoC,EACvC/G,EAAI,GAAKiE,EAAM4C,EAAMnC,EAAMoC,EAAMlC,EAAMmC,EACvC/G,EAAI,IAAMkE,EAAM2C,EAAMzC,EAAM0C,EAAMjC,EAAMkC,EACxC/G,EAAI,IAAMmE,EAAM0C,EAAMxC,EAAMyC,EAAMxC,EAAMyC,EAEpC5G,IAAMH,IAERA,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,KAGPH,GAWF,SAASgC,EAAQhC,EAAKG,EAAG8B,GAC9B,IAAIwE,EAAI1I,KAAKsE,IAAIJ,GACbyE,EAAI3I,KAAKqE,IAAIH,GACbwC,EAAMtE,EAAE,GACRuE,EAAMvE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GACRwE,EAAMxE,EAAE,GACRyE,EAAMzE,EAAE,GACR0E,EAAM1E,EAAE,IACRmE,EAAMnE,EAAE,IAuBZ,OArBIA,IAAMH,IAERA,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,KAIdH,EAAI,GAAKyE,EAAMiC,EAAI/B,EAAM8B,EACzBzG,EAAI,GAAK0E,EAAMgC,EAAI9B,EAAM6B,EACzBzG,EAAI,GAAKoE,EAAMsC,EAAI7B,EAAM4B,EACzBzG,EAAI,GAAKqE,EAAMqC,EAAIpC,EAAMmC,EACzBzG,EAAI,GAAK2E,EAAM+B,EAAIjC,EAAMgC,EACzBzG,EAAI,GAAK4E,EAAM8B,EAAIhC,EAAM+B,EACzBzG,EAAI,IAAM6E,EAAM6B,EAAItC,EAAMqC,EAC1BzG,EAAI,IAAMsE,EAAMoC,EAAIrC,EAAMoC,EACnBzG,EAWF,SAASsC,EAAQtC,EAAKG,EAAG8B,GAC9B,IAAIwE,EAAI1I,KAAKsE,IAAIJ,GACbyE,EAAI3I,KAAKqE,IAAIH,GACbuC,EAAMrE,EAAE,GACR8D,EAAM9D,EAAE,GACR+D,EAAM/D,EAAE,GACRgE,EAAMhE,EAAE,GACRwE,EAAMxE,EAAE,GACRyE,EAAMzE,EAAE,GACR0E,EAAM1E,EAAE,IACRmE,EAAMnE,EAAE,IAuBZ,OArBIA,IAAMH,IAERA,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,KAIdH,EAAI,GAAKwE,EAAMkC,EAAI/B,EAAM8B,EACzBzG,EAAI,GAAKiE,EAAMyC,EAAI9B,EAAM6B,EACzBzG,EAAI,GAAKkE,EAAMwC,EAAI7B,EAAM4B,EACzBzG,EAAI,GAAKmE,EAAMuC,EAAIpC,EAAMmC,EACzBzG,EAAI,GAAKwE,EAAMiC,EAAI9B,EAAM+B,EACzB1G,EAAI,GAAKiE,EAAMwC,EAAI7B,EAAM8B,EACzB1G,EAAI,IAAMkE,EAAMuC,EAAI5B,EAAM6B,EAC1B1G,EAAI,IAAMmE,EAAMsC,EAAInC,EAAMoC,EACnB1G,EAWF,SAASuC,EAAQvC,EAAKG,EAAG8B,GAC9B,IAAIwE,EAAI1I,KAAKsE,IAAIJ,GACbyE,EAAI3I,KAAKqE,IAAIH,GACbuC,EAAMrE,EAAE,GACR8D,EAAM9D,EAAE,GACR+D,EAAM/D,EAAE,GACRgE,EAAMhE,EAAE,GACRsE,EAAMtE,EAAE,GACRuE,EAAMvE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GAuBZ,OArBIA,IAAMH,IAERA,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,KAIdH,EAAI,GAAKwE,EAAMkC,EAAIjC,EAAMgC,EACzBzG,EAAI,GAAKiE,EAAMyC,EAAIhC,EAAM+B,EACzBzG,EAAI,GAAKkE,EAAMwC,EAAItC,EAAMqC,EACzBzG,EAAI,GAAKmE,EAAMuC,EAAIrC,EAAMoC,EACzBzG,EAAI,GAAKyE,EAAMiC,EAAIlC,EAAMiC,EACzBzG,EAAI,GAAK0E,EAAMgC,EAAIzC,EAAMwC,EACzBzG,EAAI,GAAKoE,EAAMsC,EAAIxC,EAAMuC,EACzBzG,EAAI,GAAKqE,EAAMqC,EAAIvC,EAAMsC,EAClBzG,EAyhBF,SAASkH,EAASlH,EAAKoB,GAC5B,IAAIN,EAAIM,EAAE,GACNL,EAAIK,EAAE,GACNJ,EAAII,EAAE,GACNH,EAAIG,EAAE,GACN+F,EAAKrG,EAAIA,EACTsG,EAAKrG,EAAIA,EACTsG,EAAKrG,EAAIA,EACTsG,EAAKxG,EAAIqG,EACTI,EAAKxG,EAAIoG,EACTK,EAAKzG,EAAIqG,EACTK,EAAKzG,EAAImG,EACTO,EAAK1G,EAAIoG,EACTO,EAAK3G,EAAIqG,EACTO,EAAK3G,EAAIkG,EACTU,EAAK5G,EAAImG,EACTU,EAAK7G,EAAIoG,EAiBb,OAhBArH,EAAI,GAAK,EAAIwH,EAAKG,EAClB3H,EAAI,GAAKuH,EAAKO,EACd9H,EAAI,GAAKyH,EAAKI,EACd7H,EAAI,GAAK,EACTA,EAAI,GAAKuH,EAAKO,EACd9H,EAAI,GAAK,EAAIsH,EAAKK,EAClB3H,EAAI,GAAK0H,EAAKE,EACd5H,EAAI,GAAK,EACTA,EAAI,GAAKyH,EAAKI,EACd7H,EAAI,GAAK0H,EAAKE,EACd5H,EAAI,IAAM,EAAIsH,EAAKE,EACnBxH,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAeF,SAAS+H,EAAQ/H,EAAKgI,EAAMC,EAAOC,EAAQC,EAAKC,EAAMC,GAC3D,IAAIC,EAAK,GAAKL,EAAQD,GAClBO,EAAK,GAAKJ,EAAMD,GAChBM,EAAK,GAAKJ,EAAOC,GAiBrB,OAhBArI,EAAI,GAAY,EAAPoI,EAAWE,EACpBtI,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAY,EAAPoI,EAAWG,EACpBvI,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAMiI,EAAQD,GAAQM,EAC1BtI,EAAI,IAAMmI,EAAMD,GAAUK,EAC1BvI,EAAI,KAAOqI,EAAMD,GAAQI,EACzBxI,EAAI,KAAO,EACXA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAMqI,EAAMD,EAAO,EAAII,EAC3BxI,EAAI,IAAM,EACHA,EAcF,SAASyI,EAAYzI,EAAK0I,EAAMC,EAAQP,EAAMC,GACnD,IACIG,EADAlT,EAAI,EAAMyI,KAAK6K,IAAIF,EAAO,GA0B9B,OAxBA1I,EAAI,GAAK1K,EAAIqT,EACb3I,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK1K,EACT0K,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,KAAO,EACXA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EAEC,MAAPqI,GAAeA,IAAQQ,KACzBL,EAAK,GAAKJ,EAAOC,GACjBrI,EAAI,KAAOqI,EAAMD,GAAQI,EACzBxI,EAAI,IAAM,EAAIqI,EAAMD,EAAOI,IAE3BxI,EAAI,KAAO,EACXA,EAAI,KAAO,EAAIoI,GAGVpI,EAoDF,SAAS8I,EAAM9I,EAAKgI,EAAMC,EAAOC,EAAQC,EAAKC,EAAMC,GACzD,IAAIU,EAAK,GAAKf,EAAOC,GACjBe,EAAK,GAAKd,EAASC,GACnBK,EAAK,GAAKJ,EAAOC,GAiBrB,OAhBArI,EAAI,IAAM,EAAI+I,EACd/I,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EAAIgJ,EACdhJ,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EAAIwI,EACdxI,EAAI,IAAM,EACVA,EAAI,KAAOgI,EAAOC,GAASc,EAC3B/I,EAAI,KAAOmI,EAAMD,GAAUc,EAC3BhJ,EAAI,KAAOqI,EAAMD,GAAQI,EACzBxI,EAAI,IAAM,EACHA,EAaF,SAASiJ,EAAOjJ,EAAKkJ,EAAKC,EAAQC,GACvC,IAAIC,EAAIC,EAAInC,EAAIoC,EAAIC,EAAIpC,EAAIqC,EAAIC,EAAIrC,EAAIL,EACpC2C,EAAOT,EAAI,GACXU,EAAOV,EAAI,GACXW,EAAOX,EAAI,GACXY,EAAMV,EAAG,GACTW,EAAMX,EAAG,GACTY,EAAMZ,EAAG,GACTa,EAAUd,EAAO,GACjBe,EAAUf,EAAO,GACjBgB,EAAUhB,EAAO,GAErB,OAAIpL,KAAKqM,IAAIT,EAAOM,GAAW,QAAoBlM,KAAKqM,IAAIR,EAAOM,GAAW,QAAoBnM,KAAKqM,IAAIP,EAAOM,GAAW,OACpHpG,EAAS/D,IAGlByJ,EAAKE,EAAOM,EACZP,EAAKE,EAAOM,EACZ7C,EAAKwC,EAAOM,EACZnD,EAAM,EAAIjJ,KAAKkJ,MAAMwC,EAAIC,EAAIrC,GAC7BoC,GAAMzC,EACN0C,GAAM1C,EACNK,GAAML,EACNqC,EAAKU,EAAM1C,EAAK2C,EAAMN,EACtBJ,EAAKU,EAAMP,EAAKK,EAAMzC,EACtBF,EAAK2C,EAAMJ,EAAKK,EAAMN,EACtBzC,EAAMjJ,KAAKkJ,MAAMoC,EAAIC,EAAInC,GAEpBH,GAKHA,EAAM,EAAIA,EACVqC,GAAMrC,EACNsC,GAAMtC,EACNG,GAAMH,IAPNqC,EAAK,EACLC,EAAK,EACLnC,EAAK,GAQPoC,EAAKG,EAAKvC,EAAKE,EAAKiC,EACpBE,EAAKnC,EAAKgC,EAAKI,EAAKtC,EACpBC,EAAKqC,EAAKH,EAAKI,EAAKL,EACpBrC,EAAMjJ,KAAKkJ,MAAMsC,EAAIC,EAAIpC,GAEpBJ,GAKHA,EAAM,EAAIA,EACVuC,GAAMvC,EACNwC,GAAMxC,EACNI,GAAMJ,IAPNuC,EAAK,EACLC,EAAK,EACLpC,EAAK,GAQPpH,EAAI,GAAKqJ,EACTrJ,EAAI,GAAKuJ,EACTvJ,EAAI,GAAKyJ,EACTzJ,EAAI,GAAK,EACTA,EAAI,GAAKsJ,EACTtJ,EAAI,GAAKwJ,EACTxJ,EAAI,GAAK0J,EACT1J,EAAI,GAAK,EACTA,EAAI,GAAKmH,EACTnH,EAAI,GAAKoH,EACTpH,EAAI,IAAMqH,EACVrH,EAAI,IAAM,EACVA,EAAI,MAAQqJ,EAAKM,EAAOL,EAAKM,EAAOzC,EAAK0C,GACzC7J,EAAI,MAAQuJ,EAAKI,EAAOH,EAAKI,EAAOxC,EAAKyC,GACzC7J,EAAI,MAAQyJ,EAAKE,EAAOD,EAAKE,EAAOvC,EAAKwC,GACzC7J,EAAI,IAAM,EACHA,GCtgDF,SAAS,IACd,IAAIA,EAAM,IAAI,OAAoB,GAOlC,OALI,QAAuBC,eACzBD,EAAI,GAAK,EACTA,EAAI,GAAK,GAGJA,EAyaF,SAASY,EAAcZ,EAAKG,EAAGU,GACpC,IAAIC,EAAIX,EAAE,GACNY,EAAIZ,EAAE,GAGV,OAFAH,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,IACjCb,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,IAC1Bb,GAgJY,WACnB,IAAIgD,EAAM,KADS,GAlDd,I,YCphBA,SAAS,IACd,IAAIhD,EAAM,IAAI,OAAoB,GASlC,OAPI,QAAuBC,eACzBD,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,GAGJA,EA0cF,SAAS,EAAcA,EAAKG,EAAGU,GACpC,IAAIC,EAAIX,EAAE,GACNY,EAAIZ,EAAE,GACNa,EAAIb,EAAE,GACNc,EAAId,EAAE,GAKV,OAJAH,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,GAAKG,EAAIH,EAAE,IAAMI,EAClDjB,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,GAAKG,EAAIH,EAAE,IAAMI,EAClDjB,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,IAAMG,EAAIH,EAAE,IAAMI,EACnDjB,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,IAAMG,EAAIH,EAAE,IAAMI,EAC5CjB,GA4IY,WACnB,IAAIgD,EAAM,KADS,GC9mBrB,MAAMqH,EAAW3U,OAAO4U,OAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IACvEC,EAAO7U,OAAO4U,OAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IACnEE,EAAU9U,OAAO4U,OAAO,CAC5BG,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,SAAU,EACVC,SAAU,GACVC,SAAU,GACVC,SAAU,GACVC,SAAU,GACVC,SAAU,GACVC,SAAU,KAENC,EAAY,GACH,MAAM,UAAgB,EACnC,sBAEE,OADAA,EAAUpB,SAAWoB,EAAUpB,UAAY3U,OAAO4U,OAAO,IAAI,EAAQD,IAC9DoB,EAAUpB,SAGnB,kBAEE,OADAoB,EAAUlB,KAAOkB,EAAUlB,MAAQ7U,OAAO4U,OAAO,IAAI,EAAQC,IACtDkB,EAAUlB,KAGnB,cACE,OAAOC,EAGT,eACE,OAAO,GAGT,WACE,OAAO,EAGT,YAAYkB,GACVC,OAAO,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAE1C,IAArB/N,UAAU1B,QAAgBH,MAAM6P,QAAQF,GAC1ChQ,KAAKmQ,KAAKH,GAEVhQ,KAAKqI,WAIT,KAAK2H,GAiBH,OAhBAhQ,KAAK,GAAKgQ,EAAM,GAChBhQ,KAAK,GAAKgQ,EAAM,GAChBhQ,KAAK,GAAKgQ,EAAM,GAChBhQ,KAAK,GAAKgQ,EAAM,GAChBhQ,KAAK,GAAKgQ,EAAM,GAChBhQ,KAAK,GAAKgQ,EAAM,GAChBhQ,KAAK,GAAKgQ,EAAM,GAChBhQ,KAAK,GAAKgQ,EAAM,GAChBhQ,KAAK,GAAKgQ,EAAM,GAChBhQ,KAAK,GAAKgQ,EAAM,GAChBhQ,KAAK,IAAMgQ,EAAM,IACjBhQ,KAAK,IAAMgQ,EAAM,IACjBhQ,KAAK,IAAMgQ,EAAM,IACjBhQ,KAAK,IAAMgQ,EAAM,IACjBhQ,KAAK,IAAMgQ,EAAM,IACjBhQ,KAAK,IAAMgQ,EAAM,IACVhQ,KAAKoQ,QAGd,IAAIC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAiB7E,OAhBApR,KAAK,GAAKqQ,EACVrQ,KAAK,GAAKsQ,EACVtQ,KAAK,GAAKuQ,EACVvQ,KAAK,GAAKwQ,EACVxQ,KAAK,GAAKyQ,EACVzQ,KAAK,GAAK0Q,EACV1Q,KAAK,GAAK2Q,EACV3Q,KAAK,GAAK4Q,EACV5Q,KAAK,GAAK6Q,EACV7Q,KAAK,GAAK8Q,EACV9Q,KAAK,IAAM+Q,EACX/Q,KAAK,IAAMgR,EACXhR,KAAK,IAAMiR,EACXjR,KAAK,IAAMkR,EACXlR,KAAK,IAAMmR,EACXnR,KAAK,IAAMoR,EACJpR,KAAKoQ,QAGd,YAAYC,EAAKI,EAAKI,EAAKI,EAAKX,EAAKI,EAAKI,EAAKI,EAAKX,EAAKI,EAAKI,EAAKI,EAAKX,EAAKI,EAAKI,EAAKI,GAiBrF,OAhBApR,KAAK,GAAKqQ,EACVrQ,KAAK,GAAKsQ,EACVtQ,KAAK,GAAKuQ,EACVvQ,KAAK,GAAKwQ,EACVxQ,KAAK,GAAKyQ,EACVzQ,KAAK,GAAK0Q,EACV1Q,KAAK,GAAK2Q,EACV3Q,KAAK,GAAK4Q,EACV5Q,KAAK,GAAK6Q,EACV7Q,KAAK,GAAK8Q,EACV9Q,KAAK,IAAM+Q,EACX/Q,KAAK,IAAMgR,EACXhR,KAAK,IAAMiR,EACXjR,KAAK,IAAMkR,EACXlR,KAAK,IAAMmR,EACXnR,KAAK,IAAMoR,EACJpR,KAAKoQ,QAGd,WAAWnI,GAiBT,OAhBAA,EAAO,GAAKjI,KAAK,GACjBiI,EAAO,GAAKjI,KAAK,GACjBiI,EAAO,GAAKjI,KAAK,GACjBiI,EAAO,GAAKjI,KAAK,IACjBiI,EAAO,GAAKjI,KAAK,GACjBiI,EAAO,GAAKjI,KAAK,GACjBiI,EAAO,GAAKjI,KAAK,GACjBiI,EAAO,GAAKjI,KAAK,IACjBiI,EAAO,GAAKjI,KAAK,GACjBiI,EAAO,GAAKjI,KAAK,GACjBiI,EAAO,IAAMjI,KAAK,IAClBiI,EAAO,IAAMjI,KAAK,IAClBiI,EAAO,IAAMjI,KAAK,GAClBiI,EAAO,IAAMjI,KAAK,GAClBiI,EAAO,IAAMjI,KAAK,IAClBiI,EAAO,IAAMjI,KAAK,IACXiI,EAGT,WACE,OAAOjI,KAAKmQ,KAAKxB,GAGnB,eAAejJ,GAEb,OADA,EAAc1F,KAAM0F,GACb1F,KAAKoQ,QAGd,SAAQ,KACN9D,EAAI,MACJC,EAAK,OACLC,EAAM,IACNC,EAAG,KACHC,EAAI,IACJC,IAQA,OANIA,IAAQQ,IACV,EAAQkE,qCAAqCrR,KAAMsM,EAAMC,EAAOC,EAAQC,EAAKC,GAE7E,EAAa1M,KAAMsM,EAAMC,EAAOC,EAAQC,EAAKC,EAAMC,GAG9C3M,KAAKoQ,QAGd,4CAA4CnI,EAAQqE,EAAMC,EAAOC,EAAQC,EAAKC,GAC5E,MAAM4E,EAAc,EAAM5E,GAAQH,EAAQD,GACpCiF,EAAc,EAAM7E,GAAQD,EAAMD,GAClCgF,GAAejF,EAAQD,IAASC,EAAQD,GACxCmF,GAAehF,EAAMD,IAAWC,EAAMD,GACtCkF,GAAe,EACfC,GAAe,EACfC,GAAe,EAAMlF,EAiB3B,OAhBAzE,EAAO,GAAKqJ,EACZrJ,EAAO,GAAK,EACZA,EAAO,GAAK,EACZA,EAAO,GAAK,EACZA,EAAO,GAAK,EACZA,EAAO,GAAKsJ,EACZtJ,EAAO,GAAK,EACZA,EAAO,GAAK,EACZA,EAAO,GAAKuJ,EACZvJ,EAAO,GAAKwJ,EACZxJ,EAAO,IAAMyJ,EACbzJ,EAAO,IAAM0J,EACb1J,EAAO,IAAM,EACbA,EAAO,IAAM,EACbA,EAAO,IAAM2J,EACb3J,EAAO,IAAM,EACNA,EAGT,OAAOuF,EAAKC,EAAQC,GAYlB,OAXyB,IAArBxL,UAAU1B,UAEVgN,MACAC,SACAC,MACEF,GAGNC,EAASA,GAAU,CAAC,EAAG,EAAG,GAC1BC,EAAKA,GAAM,CAAC,EAAG,EAAG,GAClB,EAAY1N,KAAMwN,EAAKC,EAAQC,GACxB1N,KAAKoQ,QAGd,OAAM,KACJ9D,EAAI,MACJC,EAAK,OACLC,EAAM,IACNC,EAAG,KACHC,EAAO,GAAG,IACVC,EAAM,MAGN,OADA,EAAW3M,KAAMsM,EAAMC,EAAOC,EAAQC,EAAKC,EAAMC,GAC1C3M,KAAKoQ,QAGd,cAAa,KACXpD,EAAO,GAAK3K,KAAKwP,GAAK,IAAG,OACzB5E,EAAS,EAAC,cACV6E,EAAgB,EAAC,KACjBpF,EAAO,GAAG,IACVC,EAAM,MAEN,GAAIK,EAAiB,EAAV3K,KAAKwP,GACd,MAAME,MAAM,WAGd,MAAMC,EAAQhF,EAAO,EACfP,EAAMqF,EAAgBzP,KAAK6K,IAAI8E,GAC/BzF,EAAQE,EAAMQ,EACpB,OAAO,IAAI,GAAUG,MAAM,CACzBd,MAAOC,EACPA,QACAC,QAASC,EACTA,MACAC,OACAC,QAIJ,aAAY,KACVK,EAAgB,IAChBiF,EAAM,GAAK5P,KAAKwP,GAAK,IAAG,OACxB5E,EAAS,EAAC,KACVP,EAAO,GAAG,IACVC,EAAM,KACJ,IAGF,GAFAK,EAAOA,GAAQiF,EAEXjF,EAAiB,EAAV3K,KAAKwP,GACd,MAAME,MAAM,WAId,OADA,EAAiB/R,KAAMgN,EAAMC,EAAQP,EAAMC,GACpC3M,KAAKoQ,QAGd,cACE,OAAO,EAAiBpQ,MAG1B,SAASiI,EAAS,EAAE,GAAI,GAAI,IAI1B,OAHAA,EAAO,GAAK5F,KAAK2E,KAAKhH,KAAK,GAAKA,KAAK,GAAKA,KAAK,GAAKA,KAAK,GAAKA,KAAK,GAAKA,KAAK,IAC7EiI,EAAO,GAAK5F,KAAK2E,KAAKhH,KAAK,GAAKA,KAAK,GAAKA,KAAK,GAAKA,KAAK,GAAKA,KAAK,GAAKA,KAAK,IAC7EiI,EAAO,GAAK5F,KAAK2E,KAAKhH,KAAK,GAAKA,KAAK,GAAKA,KAAK,GAAKA,KAAK,GAAKA,KAAK,IAAMA,KAAK,KACvEiI,EAGT,eAAeA,EAAS,EAAE,GAAI,GAAI,IAIhC,OAHAA,EAAO,GAAKjI,KAAK,IACjBiI,EAAO,GAAKjI,KAAK,IACjBiI,EAAO,GAAKjI,KAAK,IACViI,EAGT,YAAYA,EAAS,EAAE,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAIiK,EAAc,MACnG,MAAMC,EAAQnS,KAAKoS,SAASF,GAAe,EAAE,GAAI,GAAI,IAC/CG,EAAgB,EAAIF,EAAM,GAC1BG,EAAgB,EAAIH,EAAM,GAC1BI,EAAgB,EAAIJ,EAAM,GAiBhC,OAhBAlK,EAAO,GAAKjI,KAAK,GAAKqS,EACtBpK,EAAO,GAAKjI,KAAK,GAAKsS,EACtBrK,EAAO,GAAKjI,KAAK,GAAKuS,EACtBtK,EAAO,GAAK,EACZA,EAAO,GAAKjI,KAAK,GAAKqS,EACtBpK,EAAO,GAAKjI,KAAK,GAAKsS,EACtBrK,EAAO,GAAKjI,KAAK,GAAKuS,EACtBtK,EAAO,GAAK,EACZA,EAAO,GAAKjI,KAAK,GAAKqS,EACtBpK,EAAO,GAAKjI,KAAK,GAAKsS,EACtBrK,EAAO,IAAMjI,KAAK,IAAMuS,EACxBtK,EAAO,IAAM,EACbA,EAAO,IAAM,EACbA,EAAO,IAAM,EACbA,EAAO,IAAM,EACbA,EAAO,IAAM,EACNA,EAGT,mBAAmBA,EAAS,EAAE,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAIiK,EAAc,MAC9E,MAAMC,EAAQnS,KAAKoS,SAASF,GAAe,EAAE,GAAI,GAAI,IAC/CG,EAAgB,EAAIF,EAAM,GAC1BG,EAAgB,EAAIH,EAAM,GAC1BI,EAAgB,EAAIJ,EAAM,GAUhC,OATAlK,EAAO,GAAKjI,KAAK,GAAKqS,EACtBpK,EAAO,GAAKjI,KAAK,GAAKsS,EACtBrK,EAAO,GAAKjI,KAAK,GAAKuS,EACtBtK,EAAO,GAAKjI,KAAK,GAAKqS,EACtBpK,EAAO,GAAKjI,KAAK,GAAKsS,EACtBrK,EAAO,GAAKjI,KAAK,GAAKuS,EACtBtK,EAAO,GAAKjI,KAAK,GAAKqS,EACtBpK,EAAO,GAAKjI,KAAK,GAAKsS,EACtBrK,EAAO,GAAKjI,KAAK,IAAMuS,EAChBtK,EAGT,YAEE,OADA,EAAejI,KAAMA,MACdA,KAAKoQ,QAGd,SAEE,OADA,EAAYpQ,KAAMA,MACXA,KAAKoQ,QAGd,aAAa3L,GAEX,OADA,EAAczE,KAAMyE,EAAGzE,MAChBA,KAAKoQ,QAGd,cAAc3L,GAEZ,OADA,EAAczE,KAAMA,KAAMyE,GACnBzE,KAAKoQ,QAGd,QAAQoC,GAEN,OADA,EAAaxS,KAAMA,KAAMwS,GAClBxS,KAAKoQ,QAGd,QAAQoC,GAEN,OADA,EAAaxS,KAAMA,KAAMwS,GAClBxS,KAAKoQ,QAGd,QAAQoC,GAEN,OADA,EAAaxS,KAAMA,KAAMwS,GAClBxS,KAAKoQ,QAGd,WAAWqC,EAAIC,EAAIC,IACjB,OAAO3S,KAAKsG,QAAQmM,GAAI7L,QAAQ8L,GAAI7L,QAAQ8L,GAG9C,WAAWH,EAAS1H,GAElB,OADA,EAAY9K,KAAMA,KAAMwS,EAAS1H,GAC1B9K,KAAKoQ,QAGd,MAAMwC,GAOJ,OANIvS,MAAM6P,QAAQ0C,GAChB,EAAW5S,KAAMA,KAAM4S,GAEvB,EAAW5S,KAAMA,KAAM,CAAC4S,EAAQA,EAAQA,IAGnC5S,KAAKoQ,QAGd,UAAU9I,GAER,OADA,EAAetH,KAAMA,KAAMsH,GACpBtH,KAAKoQ,QAGd,UAAUyC,EAAQ5K,GAChB,OAAsB,IAAlB4K,EAAOrS,QACTyH,EAAS,EAAmBA,GAAU,EAAE,GAAI,GAAI,GAAI,GAAI4K,EAAQ7S,MAChE,eAAYiI,EAAQ,GACbA,GAGFjI,KAAK8S,iBAAiBD,EAAQ5K,GAGvC,iBAAiB4K,EAAQ5K,GACvB,MAAM,OACJzH,GACEqS,EAEJ,OAAQrS,GACN,KAAK,EACHyH,EAAS,EAAmBA,GAAU,EAAE,GAAI,GAAI4K,EAAQ7S,MACxD,MAEF,KAAK,EACHiI,EAAS8K,EAAA,KAAmB9K,GAAU,EAAE,GAAI,GAAI,GAAI4K,EAAQ7S,MAC5D,MAEF,QACE,MAAM,IAAI+R,MAAM,kBAIpB,OADA,eAAY9J,EAAQ4K,EAAOrS,QACpByH,EAGT,kBAAkB4K,EAAQ5K,GACxB,OAAQ4K,EAAOrS,QACb,KAAK,EACHyH,EAAS,eAA2BA,GAAU,EAAE,GAAI,GAAI4K,EAAQ7S,MAChE,MAEF,KAAK,EACHiI,EAAS,eAA2BA,GAAU,EAAE,GAAI,GAAI,GAAI4K,EAAQ7S,MACpE,MAEF,QACE,MAAM,IAAI+R,MAAM,kBAIpB,OADA,eAAY9J,EAAQ4K,EAAOrS,QACpByH,EAGT,cAAcuK,GACZ,OAAOxS,KAAKqI,WAAW/B,QAAQkM,GAGjC,gBAAgBpN,EAAGC,EAAGC,GACpB,OAAOtF,KAAKqI,WAAWsC,UAAU,CAACvF,EAAGC,EAAGC,IAG1C,eAAeuN,EAAQ5K,GAErB,OADA,eAAW,yBAA0B,OAC9BjI,KAAK8S,iBAAiBD,EAAQ5K,GAGvC,gBAAgB4K,EAAQ5K,GAEtB,OADA,eAAW,0BAA2B,OAC/BjI,KAAK8S,iBAAiBD,EAAQ5K,GAGvC,mBAAmB4K,EAAQ5K,GAEzB,OADA,eAAW,6BAA8B,OAClCjI,KAAKgT,kBAAkBH,EAAQ5K,M,oICjc1C,MAAMgL,EAAoB,oBACpBC,EAAqB,qBACrBC,EAA2B,2BAC3BC,EAAkC,kCAClCC,EAAiC,iCACjCC,EAA4B,4BAC5BC,EAAqC,MACrCC,EAAe,KACfC,EAAsB,MACtBC,EAAoC,MACpCC,EAA2B,MAC3BC,EAA6B,MAE7BC,EAAuB3Y,GAAO,eAASA,QAAUwE,EAAJ,EAE7CoU,EAAmB,CACvB,CAAC,MAAO5Y,GAAO,eAASA,QAAcwE,EAAR,MAC9B,CAAC6T,GAAqCrY,GAAO,eAASA,QAAqBwE,EAAf8T,EAC5D,CAAC,OAAQK,EACT,CAAC,OAAQA,EACT,CAACJ,GAAsB,CAACvY,EAAIsG,KAC1B,MAAM5E,EAAM,eAAS1B,GAAMA,EAAGc,aAAaoX,GAAmClY,EAAGc,aAAamX,GAC9F,OAAOvW,GAAOA,EAAImX,iBAAmBvS,EAAa5E,EAAImX,kBAAoB,GAE5E,CAACJ,GAA2B,CAACzY,EAAIsG,KAC/B,MAAM5E,EAAM1B,EAAGc,aAAasX,GAC5B,OAAO9R,EAAa5E,GAAOA,EAAIoX,uBAAyB,OAE1D,CAACJ,GAA6B,CAAC1Y,EAAIsG,KACjC,MAAM5E,EAAM1B,EAAGc,aAAasX,GAC5B,OAAO9R,EAAa5E,GAAOA,EAAIqX,yBAA2B,OAE5D,CAACP,GAAoC,CAACxY,EAAIsG,KACxC,MAAM5E,EAAM1B,EAAGC,KAAKS,WAAWyX,GAC/B,OAAOzW,EAAM4E,EAAa5E,EAAIsX,gCAAkC,GAElE,CAAC,OAAQL,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQ,CAAC3Y,EAAIsG,KACZ,IAAK,eAAStG,GAAK,CACjB,MAAM0B,EAAM1B,EAAGc,aAAakX,GAC5B,OAAOtW,EAAM4E,EAAa5E,EAAIuX,6BAA+B,IAKjE,CAAC,OAAQN,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQ3Y,IACP,IAAK,eAASA,GAAK,CACjB,MAAM0B,EAAM1B,EAAGc,aAAakX,GAC5B,OAAOtW,EAAMA,EAAIwX,uBAAyB,IAK9C,CAAC,OAAQlZ,GAAMA,EAAGc,aAAaiX,GAAqB,WAAa,MACjE,CAAC,OAAQ/X,GAAMA,EAAGc,aAAaiX,GAAqB,SAAW,MAC/D,CAAC,MAAQ/X,GAAM,SACf,CAAC,OAAQ2Y,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,GAEJ,SAASQ,EAAqBnZ,EAAIoZ,EAAsBxS,GAC7D,MAAMyS,EAAQT,EAAiBhS,GACzB7E,EAAyB,oBAAVsX,EAAuBA,EAAMrZ,EAAIoZ,EAAsBxS,GAASyS,EAC/EtM,OAAmBvI,IAAVzC,EAAsBA,EAAQqX,EAAqBxS,GAClE,OAAOmG,EClFT,MAAMuM,EAA0B,0BAC1BC,EAAyB,yBACzB,EAAqB,qBACrB,EAA2B,2BAC3B,EAAiC,iCACjCC,EAAwB,mEAE9B,SAASC,EAAiBzZ,EAAIa,GAC5B,MAAO,CACL6Y,OAAQ,eAAS1Z,GACjB0B,IAAK1B,EAAGc,aAAaD,IAIlB,MAAM8Y,EAA2B,CACtC,CAACL,GAA0B,CACzB9X,KAAM,CACJC,OAAQ,OAEVmG,kBAAmB,KACjB,OAAAyE,EAAA,OAAO,EAAOmN,IAEhBI,kBAAmB,OACnBC,gBAAiB,OACjBC,cAAe,KAAM,GAEvB,CAACP,GAAyB,CACxB/X,KAAM,CACJC,OAAQ,SAGV,oBAAoBsY,EAAUC,GAC5B,OAAA3N,EAAA,MAAmB,IAAZ2N,EAAe,4CAGxBC,sBAAuB,OACvBC,oBAAqB,QAEvB,CAAC,GAAqB,CACpB1Y,KAAM,CACJC,OAAQ,SAEV0Y,YAAa,KACX,OAAA9N,EAAA,OAAO,KAGX,CAAC,GAA2B,CAC1B7K,KAAM,CACJC,OAAQ,OAEV2Y,YAAa,KACX,OAAA/N,EAAA,OAAO,IAETgO,YAAa,KACX,OAAAhO,EAAA,OAAO,IAETiO,WAAY,KACV,OAAAjO,EAAA,OAAO,IAETkO,SAAU,OAEV,SAASC,EAAQ5T,GACf,OAAO9B,KAAK2V,eAAeD,EAAQ5T,IAGrC,kBAAkB4T,EAAQ5T,GACxB,OAAO9B,KAAK2V,eAAeD,EAAQ5T,IAGrC6T,eAAgB,SAGPC,EAA2B,CACtCC,WAAY,CAAC3a,EAAIkB,EAAc0Z,KACzB,eAAS5a,IACXkB,EAAa0Z,IAGjBlU,gBAAiB,CAAC1G,EAAIkB,EAAc6Y,EAAUnT,KAC5C,MAAM,OACJ8S,EAAM,IACNhY,GACE+X,EAAiBzZ,EAAIuZ,GACzB,IAAIxM,EAEJ,OAAQnG,GACN,KAAK,MACHmG,IAAU2M,QAAiBlV,EAC3B,MAEF,KAAK,MACHuI,EAAU2M,GAAWhY,OAAU8C,EAAJ,EAC3B,MAEF,SAGF,YAAkBA,IAAXuI,EAAuBA,EAAS7L,EAAa6Y,EAAUnT,IAEhEiU,oBAAqB,CAAC7a,EAAIkB,EAAc4Z,EAASlU,KAC/C,IAAK,eAAS5G,GACZ,OAAQ4G,GACN,KAAK,MACH,OAAO,MAET,KAAK,MACH,OAAO,EAET,KAAK,MACH,OAAO,EAET,SAIJ,OAAO1F,EAAa4Z,EAASlU,IAE/BmU,2BAA4B,CAAC/a,EAAIkB,EAAcZ,EAAQ0a,EAAQpU,KAC7D,IAAK,eAAS5G,GACZ,OAAQ4G,GACN,KAAK,MACH,OAAO,IAAIqU,WAAW,CAAC,IAEzB,SAIJ,OAAOjb,EAAG+a,2BAA2Bza,EAAQ0a,EAAQpU,IAGvD,gBAAgB5G,EAAIkB,EAAcZ,EAAQsG,GACxC,OAAQA,GACN,KAAK,MACH,MAAM,WACJlG,GACEV,EAAGC,KACDyB,EAAMhB,EAAW,GACvBkG,EAAQlF,GAAOA,EAAIwZ,4BAA8B,MACjD,MAEF,SAGF,OAAOha,EAAaZ,EAAQsG,IAG9BN,aAAc6S,EAEd,KAAKnZ,EAAIkB,EAAc0F,EAAO7E,GAC5B,OAAOb,EAAa0F,EAAO7E,M,qBCxJ/B,IAAIoZ,EAAU,GAAIA,QAIlB/b,EAAOC,QAAU,SAAU0C,GACzB,OAAOoZ,EAAQ7b,KAAKyC,K,uBCLtB,IAAItB,EAAS,EAAQ,QAErBrB,EAAOC,QAAUoB,G,qBCFjBpB,EAAQ+b,SAAW,SAAkBC,GACjC,IAAIzZ,EAAOuD,MAAMe,UAAU/G,MAAMG,KAAK0H,WACtCpF,EAAK0Z,QACLC,YAAW,WACPF,EAAG1W,MAAM,KAAM/C,KAChB,IAGPvC,EAAQmc,SAAWnc,EAAQoc,KAC3Bpc,EAAQqc,SAAWrc,EAAQsc,MAAQ,UACnCtc,EAAQuc,IAAM,EACdvc,EAAQiE,SAAU,EAClBjE,EAAQwc,IAAM,GACdxc,EAAQyc,KAAO,GAEfzc,EAAQ0c,QAAU,SAAU9T,GAC3B,MAAM,IAAI4O,MAAM,8CAGjB,WACI,IACImF,EADAC,EAAM,IAEV5c,EAAQ4c,IAAM,WAAc,OAAOA,GACnC5c,EAAQ6c,MAAQ,SAAUC,GACjBH,IAAMA,EAAO,EAAQ,SAC1BC,EAAMD,EAAKI,QAAQD,EAAKF,IANhC,GAUA5c,EAAQgd,KAAOhd,EAAQid,KACvBjd,EAAQkd,MAAQld,EAAQmd,OACxBnd,EAAQod,OAASpd,EAAQqd,YACzBrd,EAAQsd,WAAa,aACrBtd,EAAQud,SAAW,I,qBCjCnB,SAAS/a,EAAuBgb,GAC9B,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACnC,QAAWA,GAIfzd,EAAOC,QAAUwC,EACjBzC,EAAOC,QAAQ,WAAaD,EAAOC,QAASD,EAAOC,QAAQyd,YAAa,G,qCCPxE,kHAAO,MAAMpa,EAAiC,qBAAdD,WAA6BA,UAAUC,UAAYD,UAAUC,UAAUqa,cAAgB,GACjH9T,EAA4B,qBAAXpK,OAAyBA,OAAS4B,EACvB,qBAAXA,GAAkC5B,OACnB,qBAAbsE,UAA2BA,SAEpD,IAAI6Z,GAAmB,EAEvB,IACE,MAAMC,EAAU,CACd,cAEE,OADAD,GAAmB,GACZ,IAIX/T,EAAQxB,iBAAiB,OAAQwV,EAASA,GAC1ChU,EAAQiU,oBAAoB,OAAQD,EAASA,GAC7C,MAAO3Y,O,2DCjBT,2PAcA,MAAMrB,EAAU,CACdC,KAAsB,qBAATA,MAAwBA,KACrCrE,OAA0B,qBAAXA,QAA0BA,OACzC4B,OAA0B,qBAAXA,GAA0BA,GAErCD,EAAUyC,EAAQxC,QAAUwC,EAAQC,MAAQD,EAAQpE,OAC1D2B,EAAQ2c,OAAS,CACfC,OAAA,U,wDCrBK,SAAS/Q,EAAOgR,EAAWC,GAChC,IAAKD,EACH,MAAM,IAAIxG,MAAMyG,GAAW,8BAF/B,mC,mBCCAle,EAAOC,QAAU,iD,uBCDjB,IAAIke,EAAyB,EAAQ,QACjC5e,EAAW,EAAQ,QACnB6e,EAAc,EAAQ,QAEtBC,EAAa,IAAMD,EAAc,IACjCE,EAAQC,OAAO,IAAMF,EAAaA,EAAa,KAC/CG,EAAQD,OAAOF,EAAaA,EAAa,MAGzCI,EAAe,SAAUC,GAC3B,OAAO,SAAUC,GACf,IAAIzR,EAAS3N,EAAS4e,EAAuBQ,IAG7C,OAFW,EAAPD,IAAUxR,EAASA,EAAO0R,QAAQN,EAAO,KAClC,EAAPI,IAAUxR,EAASA,EAAO0R,QAAQJ,EAAO,KACtCtR,IAIXlN,EAAOC,QAAU,CAGf4e,MAAOJ,EAAa,GAGpBK,IAAKL,EAAa,GAGlBM,KAAMN,EAAa,K,6DC3BrB,sNAC+B1W,KAAKwP,GACCxP,KAAKwP,GAD1C,MAEMyG,EAAS,GAiBf,SAASgB,EAAMrc,GACb,OAAOoF,KAAKiX,MAAMrc,EAAQqb,EAAOiB,SAAWjB,EAAOiB,QAG9C,SAASC,EAAYvc,GAAO,UACjCwc,EAAYnB,EAAOmB,WAAa,GAC9B,IAEF,OADAxc,EAAQqc,EAAMrc,GACP,GAAG4K,OAAOjJ,WAAW3B,EAAMyc,YAAYD,KAEzC,SAASvJ,EAAQjT,GACtB,OAAOoD,MAAM6P,QAAQjT,IAAU0c,YAAYC,OAAO3c,MAAYA,aAAiB4c,UAGjF,SAASC,EAAe9J,GACtB,OAAOA,EAAM+J,MAAQ/J,EAAM+J,QAAU,IAAI1Z,MAAM2P,EAAMxP,QAOvD,SAASwZ,EAAI/c,EAAOgd,EAAMhS,GACxB,GAAIiI,EAAQjT,GAAQ,CAClBgL,EAASA,GAAU6R,EAAe7c,GAElC,IAAK,IAAI6K,EAAI,EAAGA,EAAIG,EAAOzH,QAAUsH,EAAI7K,EAAMuD,SAAUsH,EACvDG,EAAOH,GAAKmS,EAAKhd,EAAM6K,GAAIA,EAAGG,GAGhC,OAAOA,EAGT,OAAOgS,EAAKhd,GAiCP,SAASid,EAAMjd,EAAOoK,EAAK/E,GAChC,OAAO0X,EAAI/c,EAAOA,GAASoF,KAAKC,IAAI+E,EAAKhF,KAAKgF,IAAI/E,EAAKrF,KAElD,SAASkd,EAAK1V,EAAGC,EAAGuG,GACzB,OAAIiF,EAAQzL,GACHA,EAAEuV,IAAI,CAACI,EAAItS,IAAMqS,EAAKC,EAAI1V,EAAEoD,GAAImD,IAGlCA,EAAIvG,GAAK,EAAIuG,GAAKxG,EAEpB,SAAS4V,EAAO5V,EAAGC,EAAG4V,GAC3B,MAAMC,EAAajC,EAAOiB,QAEtBe,IACFhC,EAAOiB,QAAUe,GAGnB,IACE,GAAI7V,IAAMC,EACR,OAAO,EAGT,GAAIwL,EAAQzL,IAAMyL,EAAQxL,GAAI,CAC5B,GAAID,EAAEjE,SAAWkE,EAAElE,OACjB,OAAO,EAGT,IAAK,IAAIsH,EAAI,EAAGA,EAAIrD,EAAEjE,SAAUsH,EAC9B,IAAKuS,EAAO5V,EAAEqD,GAAIpD,EAAEoD,IAClB,OAAO,EAIX,OAAO,EAGT,OAAIrD,GAAKA,EAAE4V,OACF5V,EAAE4V,OAAO3V,GAGdA,GAAKA,EAAE2V,OACF3V,EAAE2V,OAAO5V,MAGd+V,OAAOC,SAAShW,KAAM+V,OAAOC,SAAS/V,KACjCrC,KAAKqM,IAAIjK,EAAIC,IAAM4T,EAAOiB,QAAUlX,KAAKC,IAAI,EAAKD,KAAKqM,IAAIjK,GAAIpC,KAAKqM,IAAIhK,IAIjF,QACA4T,EAAOiB,QAAUgB,GApIrBjC,EAAOiB,QAAU,MACjBjB,EAAOoC,OAAQ,EACfpC,EAAOmB,UAAY,EACnBnB,EAAOqC,YAAa,EACpBrC,EAAOsC,cAAe,EACtBtC,EAAO7Q,eAAgB,G,oCCTvB,sGAKO,IAAI8R,EAAU,KACVsB,EAAqC,qBAAjBtW,aAA+BA,aAAelE,MAClEya,EAASzY,KAAK0Y,OAUZ1Y,KAAKwP,GAuBbxP,KAAKkJ,QAAOlJ,KAAKkJ,MAAQ,WAC5B,IAAIlG,EAAI,EACJyC,EAAI5F,UAAU1B,OAElB,MAAOsH,IACLzC,GAAKnD,UAAU4F,GAAK5F,UAAU4F,GAGhC,OAAOzF,KAAK2E,KAAK3B,M,qBChDnB,SAAS2V,EAAQjD,GAiBf,MAdsB,oBAAXkD,QAAoD,kBAApBA,OAAOC,UAChD5gB,EAAOC,QAAUygB,EAAU,SAAiBjD,GAC1C,cAAcA,GAGhBzd,EAAOC,QAAQ,WAAaD,EAAOC,QAASD,EAAOC,QAAQyd,YAAa,IAExE1d,EAAOC,QAAUygB,EAAU,SAAiBjD,GAC1C,OAAOA,GAAyB,oBAAXkD,QAAyBlD,EAAIoD,cAAgBF,QAAUlD,IAAQkD,OAAO7Z,UAAY,gBAAkB2W,GAG3Hzd,EAAOC,QAAQ,WAAaD,EAAOC,QAASD,EAAOC,QAAQyd,YAAa,GAGnEgD,EAAQjD,G,4DAGjBzd,EAAOC,QAAUygB,EACjB1gB,EAAOC,QAAQ,WAAaD,EAAOC,QAASD,EAAOC,QAAQyd,YAAa,G,qBCrBxE,IAAIoD,EAAa,EAAQ,QACrBC,EAAW,EAAQ,QACnBC,EAAiB,EAAQ,QAG7BhhB,EAAOC,QAAU,SAAU0e,EAAOsC,EAAOC,GACvC,IAAIC,EAAWC,EAUf,OAPEJ,GAEAF,EAAWK,EAAYF,EAAMJ,cAC7BM,IAAcD,GACdH,EAASK,EAAqBD,EAAUra,YACxCsa,IAAuBF,EAAQpa,WAC/Bka,EAAerC,EAAOyC,GACjBzC,I,kCChBT,W,uBCAA,IAAI/B,EAAO,EAAQ,QACfyE,EAAS,EAAQ,QACjBC,EAA+B,EAAQ,QACvC5e,EAAiB,EAAQ,QAAuCpD,EAEpEU,EAAOC,QAAU,SAAUshB,GACzB,IAAIZ,EAAS/D,EAAK+D,SAAW/D,EAAK+D,OAAS,IACtCU,EAAOV,EAAQY,IAAO7e,EAAeie,EAAQY,EAAM,CACtD5e,MAAO2e,EAA6BhiB,EAAEiiB,O,qCCR1C,wFAAM1d,EAAU,CACdC,KAAsB,qBAATA,MAAwBA,KACrCrE,OAA0B,qBAAXA,QAA0BA,OACzC4B,OAA0B,qBAAXA,GAA0BA,EACzC0C,SAA8B,qBAAbA,UAA4BA,UAIzC3C,GAFQyC,EAAQC,MAAQD,EAAQpE,QAAUoE,EAAQxC,OACxCwC,EAAQpE,QAAUoE,EAAQC,MAAQD,EAAQxC,OAC1CwC,EAAQxC,QAAUwC,EAAQC,MAAQD,EAAQpE,QAG7CuE,GAFKH,EAAQE,SAEkB,kBAAZxD,GAA4C,qBAApB0D,OAAO1D,IAAmCA,EAAQ2D,SAEpGC,EAA6B,qBAAZ5D,GAA2BA,EAAQ6D,SAAW,YAAYC,KAAK9D,EAAQ6D,SACnED,GAAWG,WAAWH,EAAQ,M,kECdzD,wMAKO,SAASqd,EAAc5gB,EAAI6gB,GAGhC,GAFA,eAAO,eAAQ7gB,GAAK,0CAEhB,eAAc6gB,GAChB,OAGF,MAAMC,EAAmB,GAEzB,IAAK,MAAM7f,KAAO4f,EAAQ,CACxB,MAAME,EAAazB,OAAOre,GACpB+f,EAAS,OAAqB/f,GAEhC+f,IACoB,kBAAXA,EACTF,EAAiBE,IAAU,EAE3BA,EAAOhhB,EAAI6gB,EAAO5f,GAAM8f,IAK9B,MAAME,EAAQjhB,EAAGkhB,OAASlhB,EAAGkhB,MAAMD,MAEnC,GAAIA,EACF,IAAK,MAAMhgB,KAAO6f,EAAkB,CAClC,MAAMK,EAAkB,OAA+BlgB,GACvDkgB,EAAgBnhB,EAAI6gB,EAAQI,IAI3B,SAASG,EAAcphB,EAAIqhB,GAGhC,GAFAA,EAAaA,GAAc,OAED,kBAAfA,EAAyB,CAClC,MAAMpgB,EAAMogB,EACNC,EAAS,OAAqBrgB,GACpC,OAAOqgB,EAASA,EAAOthB,EAAIiB,GAAOjB,EAAGsG,aAAarF,GAGpD,MAAMsgB,EAAgBpc,MAAM6P,QAAQqM,GAAcA,EAAaviB,OAAOiC,KAAKsgB,GACrEH,EAAQ,GAEd,IAAK,MAAMjgB,KAAOsgB,EAAe,CAC/B,MAAMD,EAAS,OAAqBrgB,GACpCigB,EAAMjgB,GAAOqgB,EAASA,EAAOthB,EAAIsf,OAAOre,IAAQjB,EAAGsG,aAAagZ,OAAOre,IAGzE,OAAOigB,EAEF,SAASM,EAAgBxhB,GAC9B4gB,EAAc5gB,EAAI,QAEb,SAASyhB,EAAezhB,EAAIqhB,EAAYtC,GAC7C,GAAI,eAAcsC,GAChB,OAAOtC,EAAK/e,GAGd,MAAM,QACJ0hB,GAAU,GACRL,EAGJ,IAAItf,EAEJ,GAJA,eAAiB/B,GACjB4gB,EAAc5gB,EAAIqhB,GAGdK,EACF3f,EAAQgd,EAAK/e,GACb,eAAgBA,QAEhB,IACE+B,EAAQgd,EAAK/e,GACb,QACA,eAAgBA,GAIpB,OAAO+B,I,qCCjFT,cAEA,IAAIF,EAAyB,EAAQ,QAErC/C,OAAOgD,eAAezC,EAAS,aAAc,CAC3C0C,OAAO,IAET1C,EAAQ8E,QAAU9E,EAAQM,QAAUN,EAAQ8D,SAAW9D,EAAQoB,OAASpB,EAAQR,OAASQ,EAAQ6D,UAAO,EAExG,IAAIye,EAAW9f,EAAuB,EAAQ,SAE1CoB,EAAU,CACZC,KAAsB,qBAATA,MAAwBA,KACrCrE,OAA0B,qBAAXA,QAA0BA,OACzC4B,OAA0B,qBAAXA,GAA0BA,EACzC0C,SAA8B,qBAAbA,UAA4BA,SAC7CxD,QAA6F,YAAhE,qBAAZA,EAA0B,aAAc,EAAIgiB,EAAS1f,SAAStC,KAA0BA,GAEvGiiB,EAAQ3e,EAAQC,MAAQD,EAAQpE,QAAUoE,EAAQxC,OACtDpB,EAAQ6D,KAAO0e,EACf,IAAI3Y,EAAUhG,EAAQpE,QAAUoE,EAAQC,MAAQD,EAAQxC,OACxDpB,EAAQR,OAASoK,EACjB,IAAIzI,EAAUyC,EAAQxC,QAAUwC,EAAQC,MAAQD,EAAQpE,OACxDQ,EAAQoB,OAASD,EACjB,IAAIqhB,EAAY5e,EAAQE,UAAY,GACpC9D,EAAQ8D,SAAW0e,EACnB,IAAI3Y,EAAWjG,EAAQtD,SAAW,GAClCN,EAAQM,QAAUuJ,EAClB,IAAI4Y,EAAW3d,QACf9E,EAAQ8E,QAAU2d,I,kEC7BlB,0LACA,MAAMC,EAAc,gCAEPC,EAAa,kBACnB,SAASC,EAAQjiB,GACtB,MAAqC,qBAA1BkiB,uBAAyCliB,aAAckiB,wBAI5B,qBAA3BC,wBAA0CniB,aAAcmiB,wBAI5Dre,QAAQ9D,GAAMsf,OAAOC,SAASvf,EAAGoiB,YAEnC,SAASC,EAASriB,GACvB,MAAsC,qBAA3BmiB,wBAA0CniB,aAAcmiB,wBAI5Dre,QAAQ9D,GAAsB,IAAhBA,EAAGoiB,UAEnB,SAASE,EAAiBtiB,GAC/B,OAAOqiB,EAASriB,GAAMA,EAAK,KAEtB,SAASuiB,EAAmBviB,GAEjC,OADA,eAAOiiB,EAAQjiB,GAAK+hB,GACb/hB,EAEF,SAASwiB,EAAoBxiB,GAElC,OADA,eAAOqiB,EAASriB,GAAKgiB,GACdhiB,I,kCC9BT,IAAIyiB,EAAI,EAAQ,QACZhiB,EAAS,EAAQ,QACjBiiB,EAAa,EAAQ,QACrBC,EAAU,EAAQ,QAClBC,EAAc,EAAQ,QACtBC,EAAgB,EAAQ,QACxBC,EAAQ,EAAQ,QAChBrC,EAAS,EAAQ,QACjBzL,EAAU,EAAQ,QAClBkL,EAAa,EAAQ,QACrBC,EAAW,EAAQ,QACnB4C,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBzkB,EAAkB,EAAQ,QAC1B0kB,EAAgB,EAAQ,QACxBC,EAAY,EAAQ,QACpBC,EAA2B,EAAQ,QACnCC,EAAqB,EAAQ,QAC7BC,EAAa,EAAQ,QACrBC,EAA4B,EAAQ,QACpCC,EAA8B,EAAQ,QACtCC,EAA8B,EAAQ,QACtCC,EAAiC,EAAQ,QACzCC,EAAuB,EAAQ,QAC/BC,EAA6B,EAAQ,QACrCC,EAAW,EAAQ,QACnBC,EAAS,EAAQ,QACjBC,EAAY,EAAQ,QACpBC,EAAa,EAAQ,QACrBC,EAAM,EAAQ,QACdC,EAAkB,EAAQ,QAC1BxD,EAA+B,EAAQ,QACvCyD,EAAwB,EAAQ,QAChCC,EAAiB,EAAQ,QACzBC,EAAsB,EAAQ,QAC9BC,EAAW,EAAQ,QAAgCtjB,QAEnDujB,EAASR,EAAU,UACnBS,EAAS,SACTC,EAAY,YACZC,EAAeR,EAAgB,eAC/BS,EAAmBN,EAAoBO,IACvCC,EAAmBR,EAAoBS,UAAUN,GACjDO,EAAkBjmB,OAAO2lB,GACzBO,EAAUvkB,EAAOsf,OACjBkF,EAAavC,EAAW,OAAQ,aAChCwC,EAAiCxB,EAA+BhlB,EAChEymB,EAAuBxB,EAAqBjlB,EAC5C0mB,EAA4B5B,EAA4B9kB,EACxD2mB,EAA6BzB,EAA2BllB,EACxD4mB,EAAaxB,EAAO,WACpByB,GAAyBzB,EAAO,cAChC0B,GAAyB1B,EAAO,6BAChC2B,GAAyB3B,EAAO,6BAChC4B,GAAwB5B,EAAO,OAC/B6B,GAAUllB,EAAOklB,QAEjBC,IAAcD,KAAYA,GAAQlB,KAAekB,GAAQlB,GAAWoB,UAGpEC,GAAsBlD,GAAeE,GAAM,WAC7C,OAES,GAFFO,EAAmB8B,EAAqB,GAAI,IAAK,CACtDY,IAAK,WAAc,OAAOZ,EAAqBrgB,KAAM,IAAK,CAAE/C,MAAO,IAAKwH,MACtEA,KACD,SAAUyc,EAAGC,EAAGC,GACnB,IAAIC,EAA4BjB,EAA+BH,EAAiBkB,GAC5EE,UAAkCpB,EAAgBkB,GACtDd,EAAqBa,EAAGC,EAAGC,GACvBC,GAA6BH,IAAMjB,GACrCI,EAAqBJ,EAAiBkB,EAAGE,IAEzChB,EAEAiB,GAAO,SAAUC,EAAKC,GACxB,IAAIC,EAASjB,EAAWe,GAAOhD,EAAmB2B,EAAQP,IAO1D,OANAE,EAAiB4B,EAAQ,CACvB3iB,KAAM4gB,EACN6B,IAAKA,EACLC,YAAaA,IAEV1D,IAAa2D,EAAOD,YAAcA,GAChCC,GAGLC,GAAkB,SAAwBR,EAAGC,EAAGC,GAC9CF,IAAMjB,GAAiByB,GAAgBjB,GAAwBU,EAAGC,GACtElD,EAASgD,GACT,IAAI/kB,EAAMiiB,EAAc+C,GAExB,OADAjD,EAASkD,GACLzF,EAAO6E,EAAYrkB,IAChBilB,EAAWO,YAIVhG,EAAOuF,EAAGzB,IAAWyB,EAAEzB,GAAQtjB,KAAM+kB,EAAEzB,GAAQtjB,IAAO,GAC1DilB,EAAa7C,EAAmB6C,EAAY,CAAEO,WAAYrD,EAAyB,GAAG,OAJjF3C,EAAOuF,EAAGzB,IAASY,EAAqBa,EAAGzB,EAAQnB,EAAyB,EAAG,KACpF4C,EAAEzB,GAAQtjB,IAAO,GAIV6kB,GAAoBE,EAAG/kB,EAAKilB,IAC9Bf,EAAqBa,EAAG/kB,EAAKilB,IAGpCQ,GAAoB,SAA0BV,EAAGW,GACnD3D,EAASgD,GACT,IAAIY,EAAapoB,EAAgBmoB,GAC7B5lB,EAAOuiB,EAAWsD,GAAYja,OAAOka,GAAuBD,IAIhE,OAHAtC,EAASvjB,GAAM,SAAUE,GAClB2hB,IAAekE,GAAsBxnB,KAAKsnB,EAAY3lB,IAAMulB,GAAgBR,EAAG/kB,EAAK2lB,EAAW3lB,OAE/F+kB,GAGLe,GAAU,SAAgBf,EAAGW,GAC/B,YAAsBniB,IAAfmiB,EAA2BtD,EAAmB2C,GAAKU,GAAkBrD,EAAmB2C,GAAIW,IAGjGG,GAAwB,SAA8BE,GACxD,IAAIf,EAAI/C,EAAc8D,GAClBP,EAAapB,EAA2B/lB,KAAKwF,KAAMmhB,GACvD,QAAInhB,OAASigB,GAAmBtE,EAAO6E,EAAYW,KAAOxF,EAAO8E,GAAwBU,QAClFQ,IAAehG,EAAO3b,KAAMmhB,KAAOxF,EAAO6E,EAAYW,IAAMxF,EAAO3b,KAAMyf,IAAWzf,KAAKyf,GAAQ0B,KACpGQ,IAGFQ,GAA4B,SAAkCjB,EAAGC,GACnE,IAAIhnB,EAAKT,EAAgBwnB,GACrB/kB,EAAMiiB,EAAc+C,GACxB,GAAIhnB,IAAO8lB,IAAmBtE,EAAO6E,EAAYrkB,IAASwf,EAAO8E,GAAwBtkB,GAAzF,CACA,IAAIimB,EAAahC,EAA+BjmB,EAAIgC,GAIpD,OAHIimB,IAAczG,EAAO6E,EAAYrkB,IAAUwf,EAAOxhB,EAAIslB,IAAWtlB,EAAGslB,GAAQtjB,KAC9EimB,EAAWT,YAAa,GAEnBS,IAGLzoB,GAAuB,SAA6BunB,GACtD,IAAImB,EAAQ/B,EAA0B5mB,EAAgBwnB,IAClDjZ,EAAS,GAIb,OAHAuX,EAAS6C,GAAO,SAAUlmB,GACnBwf,EAAO6E,EAAYrkB,IAASwf,EAAOuD,EAAY/iB,IAAM8L,EAAOhF,KAAK9G,MAEjE8L,GAGL8Z,GAAyB,SAA+Bb,GAC1D,IAAIoB,EAAsBpB,IAAMjB,EAC5BoC,EAAQ/B,EAA0BgC,EAAsB7B,GAAyB/mB,EAAgBwnB,IACjGjZ,EAAS,GAMb,OALAuX,EAAS6C,GAAO,SAAUlmB,IACpBwf,EAAO6E,EAAYrkB,IAAUmmB,IAAuB3G,EAAOsE,EAAiB9jB,IAC9E8L,EAAOhF,KAAKud,EAAWrkB,OAGpB8L,GAkHT,GA7GK8V,IACHmC,EAAU,WACR,GAAIlgB,gBAAgBkgB,EAAS,MAAMqC,UAAU,+BAC7C,IAAIf,EAAetf,UAAU1B,aAA2Bd,IAAjBwC,UAAU,GAA+Bmc,EAAUnc,UAAU,SAAhCxC,EAChE6hB,EAAMpC,EAAIqC,GACVtF,EAAS,SAAUjf,GACjB+C,OAASigB,GAAiB/D,EAAO1hB,KAAKimB,GAAwBxjB,GAC9D0e,EAAO3b,KAAMyf,IAAW9D,EAAO3b,KAAKyf,GAAS8B,KAAMvhB,KAAKyf,GAAQ8B,IAAO,GAC3EP,GAAoBhhB,KAAMuhB,EAAKjD,EAAyB,EAAGrhB,KAG7D,OADI6gB,GAAegD,IAAYE,GAAoBf,EAAiBsB,EAAK,CAAEiB,cAAc,EAAM1C,IAAK5D,IAC7FoF,GAAKC,EAAKC,IAGnBzC,EAASmB,EAAQP,GAAY,YAAY,WACvC,OAAOI,EAAiB/f,MAAMuhB,OAGhCxC,EAASmB,EAAS,iBAAiB,SAAUsB,GAC3C,OAAOF,GAAKnC,EAAIqC,GAAcA,MAGhC1C,EAA2BllB,EAAIooB,GAC/BnD,EAAqBjlB,EAAI8nB,GACzB9C,EAA+BhlB,EAAIuoB,GACnC1D,EAA0B7kB,EAAI8kB,EAA4B9kB,EAAID,GAC9DglB,EAA4B/kB,EAAImoB,GAEhCnG,EAA6BhiB,EAAI,SAAUuJ,GACzC,OAAOme,GAAKlC,EAAgBjc,GAAOA,IAGjC2a,IAEFuC,EAAqBH,EAAQP,GAAY,cAAe,CACtD6C,cAAc,EACdvB,IAAK,WACH,OAAOlB,EAAiB/f,MAAMwhB,eAG7B3D,GACHkB,EAASkB,EAAiB,uBAAwB+B,GAAuB,CAAES,QAAQ,MAKzF9E,EAAE,CAAEhiB,QAAQ,EAAM2lB,MAAM,EAAMoB,QAAS3E,EAAe4E,MAAO5E,GAAiB,CAC5E9C,OAAQiF,IAGVV,EAAShB,EAAWoC,KAAwB,SAAUzd,GACpDkc,EAAsBlc,MAGxBwa,EAAE,CAAEniB,OAAQkkB,EAAQkD,MAAM,EAAMF,QAAS3E,GAAiB,CAGxD,IAAO,SAAU5hB,GACf,IAAIqL,EAAS6W,EAAUliB,GACvB,GAAIwf,EAAO+E,GAAwBlZ,GAAS,OAAOkZ,GAAuBlZ,GAC1E,IAAIia,EAASvB,EAAQ1Y,GAGrB,OAFAkZ,GAAuBlZ,GAAUia,EACjCd,GAAuBc,GAAUja,EAC1Bia,GAIToB,OAAQ,SAAgBC,GACtB,IAAK7E,EAAS6E,GAAM,MAAMP,UAAUO,EAAM,oBAC1C,GAAInH,EAAOgF,GAAwBmC,GAAM,OAAOnC,GAAuBmC,IAEzEC,UAAW,WAAcjC,IAAa,GACtCkC,UAAW,WAAclC,IAAa,KAGxCnD,EAAE,CAAEniB,OAAQ,SAAUonB,MAAM,EAAMF,QAAS3E,EAAe4E,MAAO7E,GAAe,CAG9EzZ,OAAQ4d,GAGRjlB,eAAgB0kB,GAGhBuB,iBAAkBrB,GAGlBsB,yBAA0Bf,KAG5BxE,EAAE,CAAEniB,OAAQ,SAAUonB,MAAM,EAAMF,QAAS3E,GAAiB,CAG1D9jB,oBAAqBN,GAGrBwpB,sBAAuBpB,KAKzBpE,EAAE,CAAEniB,OAAQ,SAAUonB,MAAM,EAAMF,OAAQ1E,GAAM,WAAcW,EAA4B/kB,EAAE,OAAU,CACpGupB,sBAAuB,SAA+BhpB,GACpD,OAAOwkB,EAA4B/kB,EAAEukB,EAAShkB,OAM9CgmB,EAAY,CACd,IAAIiD,IAAyBrF,GAAiBC,GAAM,WAClD,IAAIyD,EAASvB,IAEb,MAA+B,UAAxBC,EAAW,CAACsB,KAEe,MAA7BtB,EAAW,CAAE1b,EAAGgd,KAEc,MAA9BtB,EAAWnmB,OAAOynB,OAGzB9D,EAAE,CAAEniB,OAAQ,OAAQonB,MAAM,EAAMF,OAAQU,IAAyB,CAE/DC,UAAW,SAAmBlpB,EAAImpB,EAAUC,GAC1C,IAEIC,EAFA1mB,EAAO,CAAC3C,GACRgI,EAAQ,EAEZ,MAAOD,UAAU1B,OAAS2B,EAAOrF,EAAKmG,KAAKf,UAAUC,MAErD,GADAqhB,EAAYF,GACPjI,EAASiI,SAAoB5jB,IAAPvF,KAAoB8jB,EAAS9jB,GAMxD,OALK+V,EAAQoT,KAAWA,EAAW,SAAUnnB,EAAKc,GAEhD,GADIme,EAAWoI,KAAYvmB,EAAQumB,EAAUhpB,KAAKwF,KAAM7D,EAAKc,KACxDghB,EAAShhB,GAAQ,OAAOA,IAE/BH,EAAK,GAAKwmB,EACHnD,EAAWtgB,MAAM,KAAM/C,MAOpC,IAAKojB,EAAQP,GAAWC,GAAe,CACrC,IAAIvJ,GAAU6J,EAAQP,GAAWtJ,QACjC0I,EAASmB,EAAQP,GAAYC,GAAc,WACzC,OAAOvJ,GAAQxW,MAAMG,KAAMkC,cAK/Bod,EAAeY,EAASR,GAExBR,EAAWO,IAAU,G,kCCpTrB,IAAI3B,EAAc,EAAQ,QACtBniB,EAAS,EAAQ,QACjB8nB,EAAW,EAAQ,QACnB1E,EAAW,EAAQ,QACnBpD,EAAS,EAAQ,QACjB+H,EAAoB,EAAQ,QAC5BzF,EAAW,EAAQ,QACnB0F,EAAc,EAAQ,QACtB3F,EAAQ,EAAQ,QAChB/jB,EAAsB,EAAQ,QAA8CL,EAC5EspB,EAA2B,EAAQ,QAAmDtpB,EACtFoD,EAAiB,EAAQ,QAAuCpD,EAChEgqB,EAAkB,EAAQ,QAC1BvK,EAAO,EAAQ,QAA4BA,KAE3CwK,EAAS,SACTC,EAAenoB,EAAOkoB,GACtBE,EAAkBD,EAAa1iB,UAI/B4iB,EAAY,SAAU/mB,GACxB,IAAIgnB,EAAYN,EAAY1mB,EAAO,UACnC,MAA4B,kBAAdgnB,EAAyBA,EAAYC,EAASD,IAK1DC,EAAW,SAAUC,GACvB,IACIC,EAAOC,EAAOC,EAAOC,EAASC,EAAQhkB,EAAQ2B,EAAOsiB,EADrDtqB,EAAKwpB,EAAYQ,EAAU,UAE/B,GAAIlG,EAAS9jB,GAAK,MAAMooB,UAAU,6CAClC,GAAiB,iBAANpoB,GAAkBA,EAAGqG,OAAS,EAGvC,GAFArG,EAAKkf,EAAKlf,GACViqB,EAAQjqB,EAAGuqB,WAAW,GACR,KAAVN,GAA0B,KAAVA,GAElB,GADAC,EAAQlqB,EAAGuqB,WAAW,GACR,KAAVL,GAA0B,MAAVA,EAAe,OAAOM,SACrC,GAAc,KAAVP,EAAc,CACvB,OAAQjqB,EAAGuqB,WAAW,IACpB,KAAK,GAAI,KAAK,GAAIJ,EAAQ,EAAGC,EAAU,GAAI,MAC3C,KAAK,GAAI,KAAK,IAAKD,EAAQ,EAAGC,EAAU,GAAI,MAC5C,QAAS,OAAQpqB,EAInB,IAFAqqB,EAASrqB,EAAGE,MAAM,GAClBmG,EAASgkB,EAAOhkB,OACX2B,EAAQ,EAAGA,EAAQ3B,EAAQ2B,IAI9B,GAHAsiB,EAAOD,EAAOE,WAAWviB,GAGrBsiB,EAAO,IAAMA,EAAOF,EAAS,OAAOI,IACxC,OAAO7kB,SAAS0kB,EAAQF,GAE5B,OAAQnqB,GAKZ,GAAIspB,EAASI,GAASC,EAAa,UAAYA,EAAa,QAAUA,EAAa,SAAU,CAQ3F,IAPA,IAcqB3nB,EAdjByoB,EAAgB,SAAgB3nB,GAClC,IAAIsD,EAAI2B,UAAU1B,OAAS,EAAI,EAAIsjB,EAAaE,EAAU/mB,IACtDse,EAAQvb,KAEZ,OAAOub,aAAiBqJ,GAAiB5G,GAAM,WAAc4F,EAAgBrI,MACzEmI,EAAkB1pB,OAAOuG,GAAIgb,EAAOqJ,GAAiBrkB,GAElDtE,EAAO6hB,EAAc7jB,EAAoB6pB,GAAgB,oLAOhEe,MAAM,KAAMC,EAAI,EAAQ7oB,EAAKuE,OAASskB,EAAGA,IACrCnJ,EAAOmI,EAAc3nB,EAAMF,EAAK6oB,MAAQnJ,EAAOiJ,EAAezoB,IAChEa,EAAe4nB,EAAezoB,EAAK+mB,EAAyBY,EAAc3nB,IAG9EyoB,EAAcxjB,UAAY2iB,EAC1BA,EAAgB5I,YAAcyJ,EAC9B7F,EAASpjB,EAAQkoB,EAAQe,K,kCCjF3B,0LACO,MAAMG,EAAwB,CACnC,CAAC,OAAO,EACR,CAAC,OAAQ,IAAIxgB,aAAa,CAAC,EAAG,EAAG,EAAG,IACpC,CAAC,OAAQ,MACT,CAAC,OAAQ,MACT,CAAC,OAAQ,EACT,CAAC,OAAQ,EACT,CAAC,OAAQ,EACT,CAAC,OAAQ,EACT,CAAC,MAAO,IAAIA,aAAa,CAAC,EAAG,EAAG,EAAG,IACnC,CAAC,MAAO,EAAC,GAAM,GAAM,GAAM,GAC3B,CAAC,OAAO,EACR,CAAC,MAAO,KACR,CAAC,OAAO,EACR,CAAC,MAAO,EACR,CAAC,MAAO,IACR,CAAC,MAAO,IAAIA,aAAa,CAAC,EAAG,IAC7B,CAAC,OAAO,EACR,CAAC,OAAO,EACR,CAAC,OAAQ,KACT,CAAC,MAAO,KACR,CAAC,OAAQ,KACT,CAAC,MAAO,EACR,CAAC,QAAQ,EACT,CAAC,OAAQ,EACT,CAAC,OAAQ,EACT,CAAC,OAAQ,EACT,CAAC,QAAQ,EACT,CAAC,OAAO,EACR,CAAC,MAAO,IAAI4R,WAAW,CAAC,EAAG,EAAG,KAAM,OACpC,CAAC,OAAO,EACR,CAAC,MAAO,EACR,CAAC,MAAO,WACR,CAAC,OAAQ,WACT,CAAC,MAAO,IACR,CAAC,MAAO,EACR,CAAC,MAAO,WACR,CAAC,OAAQ,IACT,CAAC,OAAQ,EACT,CAAC,OAAQ,WACT,CAAC,MAAO,KACR,CAAC,MAAO,KACR,CAAC,MAAO,KACR,CAAC,OAAQ,KACT,CAAC,OAAQ,KACT,CAAC,OAAQ,KACT,CAAC,MAAO,CAAC,EAAG,EAAG,KAAM,MACrB,CAAC,MAAO,EACR,CAAC,MAAO,EACR,CAAC,QAAQ,EACT,CAAC,QAAQ,EACT,CAAC,OAAQ,MACT,CAAC,OAAQ,KACT,CAAC,OAAQ,KACT,CAAC,QAAQ,EACT,CAAC,MAAO,EACR,CAAC,MAAO,EACR,CAAC,MAAO,EACR,CAAC,MAAO,EACR,CAAC,OAAQ,EACT,CAAC,MAAO,EACR,CAAC,MAAO,EACR,CAAC,OAAQ,GAGL6O,EAAS,CAAC9pB,EAAI+B,EAAOd,IAAQc,EAAQ/B,EAAG8pB,OAAO7oB,GAAOjB,EAAG+pB,QAAQ9oB,GAEjE+oB,EAAO,CAAChqB,EAAI+B,EAAOd,IAAQjB,EAAGgqB,KAAK/oB,EAAKc,GAExCkoB,EAAc,CAACjqB,EAAI+B,EAAOd,IAAQjB,EAAGiqB,YAAYhpB,EAAKc,GAEtDmoB,EAAkB,CAAClqB,EAAI+B,KAC3B,MAAMzB,EAAS,eAASN,GAAM,MAAQ,MACtC,OAAOA,EAAGmqB,gBAAgB7pB,EAAQyB,IAG9BqoB,EAAkB,CAACpqB,EAAI+B,IACpB/B,EAAGmqB,gBAAgB,MAAOpoB,GAGnC,SAASiT,EAAQF,GACf,OAAO3P,MAAM6P,QAAQF,IAAU2J,YAAYC,OAAO5J,GAG7C,MAAMuV,EAAuB,CAClC,CAAC,MAAOP,EACR,CAAC,OAAQ,CAAC9pB,EAAI+B,IAAU/B,EAAGsqB,cAAcvoB,GACzC,CAAC,OAAQ,gBACT,CAAC,OAAQ,gBACT,CAAC,OAAQ,YACT,CAAC,OAAQ,YACT,CAAC,OAAQ,YACT,CAAC,OAAQ,YACT,CAAC,MAAO,CAAC/B,EAAI+B,IAAU/B,EAAGuqB,cAAcxoB,GACxC,CAAC,MAAO,CAAC/B,EAAI+B,IAAU/B,EAAGwqB,aAAazoB,GACvC,CAAC,MAAO+nB,EACR,CAAC,MAAO,CAAC9pB,EAAI+B,IAAU/B,EAAGyqB,SAAS1oB,GACnC,CAAC,MAAO+nB,EACR,CAAC,MAAO,CAAC9pB,EAAI+B,IAAU/B,EAAG0qB,WAAW3oB,GACrC,CAAC,MAAO,CAAC/B,EAAI+B,IAAU/B,EAAG2qB,UAAU5oB,GACpC,CAAC,MAAO,CAAC/B,EAAI+B,IAAU/B,EAAG4qB,cAAc7oB,GACxC,CAAC,MAAO,CAAC/B,EAAI+B,IAAU/B,EAAG6qB,UAAU9oB,GACpC,CAAC,MAAO+nB,EACR,CAAC,OAAQE,EACT,CAAC,OAAQE,EACT,CAAC,MAAO,CAAClqB,EAAI+B,IAAU/B,EAAG8qB,UAAU/oB,GACpC,CAAC,OAAQioB,EACT,CAAC,MAAO,CAAChqB,EAAI+B,IAAU/B,EAAG+qB,UAAUhpB,GACpC,CAAC,OAAQ+nB,EACT,CAAC,OAAQ,gBACT,CAAC,OAAQ,gBACT,CAAC,OAAQA,EACT,CAAC,OAAQ,iBACT,CAAC,OAAQ,iBACT,CAAC,MAAOA,EACR,CAAC,MAAO,CAAC9pB,EAAI+B,IAAU/B,EAAGgrB,WAAWjpB,GACrC,CAAC,MAAO+nB,EACR,CAAC,MAAO,CAAC9pB,EAAI+B,IAAU/B,EAAGirB,aAAalpB,GACvC,CAAC,MAAO,CAAC/B,EAAI+B,IAAU/B,EAAGkrB,oBAAoB,KAAMnpB,GACpD,CAAC,OAAQ,CAAC/B,EAAI+B,IAAU/B,EAAGkrB,oBAAoB,KAAMnpB,GACrD,CAAC,MAAO,mBACR,CAAC,MAAO,mBACR,CAAC,MAAO,mBACR,CAAC,OAAQ,kBACT,CAAC,OAAQ,kBACT,CAAC,OAAQ,kBACT,CAAC,MAAO,iBACR,CAAC,MAAO,iBACR,CAAC,MAAO,iBACR,CAAC,OAAQ,gBACT,CAAC,OAAQ,gBACT,CAAC,OAAQ,gBACT,CAAC,MAAO,CAAC/B,EAAI+B,IAAU/B,EAAGmrB,YAAYppB,GACtC,CAAC,MAAOkoB,EACR,CAAC,MAAOA,EACR,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,MAAOA,EACR,CAAC,MAAOA,EACR,CAAC,MAAOA,EACR,CAAC,OAAQG,EACT,CAAC,MAAOH,EACR,CAAC,OAAQA,EACT,CAAC,MAAOA,EACR,CAAC,MAAOA,EACR,CAAC,OAAQA,EACTmB,YAAa,CAACprB,EAAIorB,KAChB,MAAM5Q,EAAS4Q,GAAe,WAAYA,EAAcA,EAAY5Q,OAAS4Q,EAC7E,OAAOprB,EAAGmqB,gBAAgB,MAAO3P,IAEnC6Q,MAAO,CAACrrB,EAAI+B,IAAUA,EAAQ/B,EAAG8pB,OAAO,MAAQ9pB,EAAG+pB,QAAQ,MAC3DO,WAAY,CAACtqB,EAAI+B,IAAU/B,EAAGsqB,cAAcvoB,GAC5CupB,cAAe,CAACtrB,EAAI4B,KAClBA,EAAOoT,EAAQpT,GAAQA,EAAO,CAACA,EAAMA,GACrC5B,EAAGurB,yBAAyB3pB,IAE9B4pB,UAAW,CAACxrB,EAAI4B,KACdA,EAAOoT,EAAQpT,IAAyB,IAAhBA,EAAK0D,OAAe,IAAI1D,KAASA,GAAQA,EACjE5B,EAAGyrB,qBAAqB7pB,IAE1B2oB,WAAY,CAACvqB,EAAI+B,IAAU/B,EAAGuqB,cAAcxoB,GAC5C2oB,WAAY,CAAC1qB,EAAI+B,IAAU/B,EAAG0qB,WAAW3oB,GACzCkpB,aAAc,CAACjrB,EAAI+B,IAAU/B,EAAGirB,aAAalpB,GAC7CyoB,UAAW,CAACxqB,EAAI+B,IAAU/B,EAAGwqB,aAAazoB,GAC1C2pB,KAAM,CAAC1rB,EAAI+B,IAAUA,EAAQ/B,EAAG8pB,OAAO,MAAQ9pB,EAAG+pB,QAAQ,MAC1DU,SAAU,CAACzqB,EAAI+B,IAAU/B,EAAGyqB,SAAS1oB,GACrC4pB,UAAW,CAAC3rB,EAAI+B,IAAUA,EAAQ/B,EAAG8pB,OAAO,MAAQ9pB,EAAG+pB,QAAQ,MAC/DY,UAAW,CAAC3qB,EAAI+B,IAAU/B,EAAG2qB,UAAU5oB,GACvC8oB,UAAW,CAAC7qB,EAAI+B,IAAU/B,EAAG6qB,UAAU9oB,GACvC6oB,WAAY,CAAC5qB,EAAI+B,IAAU/B,EAAG4qB,cAAc7oB,GAC5C6pB,OAAQ,CAAC5rB,EAAI+B,IAAUA,EAAQ/B,EAAG8pB,OAAO,MAAQ9pB,EAAG+pB,QAAQ,MAC5D8B,eAAgB,CAAC7rB,EAAI+B,KACnB/B,EAAGgqB,KAAK,MAAOjoB,IAEjB+oB,UAAW,CAAC9qB,EAAI+B,IAAU/B,EAAG8qB,UAAU/oB,GACvC+pB,WAAY,CAAC9rB,EAAI+B,IAAU/B,EAAGgqB,KAAK,MAAOjoB,GAC1CgpB,UAAW,CAAC/qB,EAAI+B,IAAU/B,EAAG+qB,UAAUhpB,GACvCgqB,kBAAmB,CAAC/rB,EAAI+B,IAAUA,EAAQ/B,EAAG8pB,OAAO,OAAS9pB,EAAG+pB,QAAQ,OACxEiC,cAAe,CAAChsB,EAAI+B,IAAU/B,EAAGgsB,iBAAiBjqB,GAClDkqB,eAAgB,CAACjsB,EAAI+B,IAAU/B,EAAGisB,kBAAkBlqB,GACpDmqB,YAAa,CAAClsB,EAAI+B,IAAUA,EAAQ/B,EAAG8pB,OAAO,MAAQ9pB,EAAG+pB,QAAQ,MACjEiB,QAAS,CAAChrB,EAAI+B,IAAU/B,EAAGgrB,WAAWjpB,GACtCoqB,YAAa,CAACnsB,EAAI+B,IAAUA,EAAQ/B,EAAG8pB,OAAO,MAAQ9pB,EAAG+pB,QAAQ,MACjEqC,YAAa,CAACpsB,EAAI+B,KAChBA,EAAQiT,EAAQjT,GAASA,EAAQ,CAACA,EAAOA,GACzC,MAAOsqB,EAAMC,GAAYvqB,EACzB/B,EAAGkrB,oBAAoB,KAAMmB,GAC7BrsB,EAAGkrB,oBAAoB,KAAMoB,IAE/BC,YAAa,CAACvsB,EAAI4B,KAChBA,EAAOoT,EAAQpT,IAAyB,IAAhBA,EAAK0D,OAAe,IAAI1D,KAASA,GAAQA,EACjE,MAAOmd,EAAMyN,EAAKH,EAAMI,EAAUC,EAASJ,GAAY1qB,EACvD5B,EAAG2sB,oBAAoB,KAAM5N,EAAMyN,EAAKH,GACxCrsB,EAAG2sB,oBAAoB,KAAMF,EAAUC,EAASJ,IAElDM,UAAW,CAAC5sB,EAAI4B,KACdA,EAAOoT,EAAQpT,IAAyB,IAAhBA,EAAK0D,OAAe,IAAI1D,KAASA,GAAQA,EACjE,MAAOirB,EAAOC,EAAQC,EAAQC,EAAWC,EAAYC,GAActrB,EACnE5B,EAAGmtB,kBAAkB,KAAMN,EAAOC,EAAQC,GAC1C/sB,EAAGmtB,kBAAkB,KAAMH,EAAWC,EAAYC,IAEpD/B,SAAU,CAACnrB,EAAI+B,IAAU/B,EAAGmrB,YAAYppB,IAG1C,SAASqrB,EAASC,EAAQxM,EAAQI,GAChC,YAA0Bzc,IAAnBqc,EAAOwM,GAAwBxM,EAAOwM,GAAUpM,EAAMoM,GAGxD,MAAMC,EAAiC,CAC5ChC,cAAe,CAACtrB,EAAI6gB,EAAQI,IAAUjhB,EAAGurB,sBAAsB6B,EAAS,MAAOvM,EAAQI,GAAQmM,EAAS,MAAOvM,EAAQI,IACvHuK,UAAW,CAACxrB,EAAI6gB,EAAQI,IAAUjhB,EAAGyrB,kBAAkB2B,EAAS,MAAOvM,EAAQI,GAAQmM,EAAS,MAAOvM,EAAQI,GAAQmM,EAAS,MAAOvM,EAAQI,GAAQmM,EAAS,MAAOvM,EAAQI,IAC/K+K,cAAe,CAAChsB,EAAI6gB,EAAQI,IAAUjhB,EAAGgsB,cAAcoB,EAAS,MAAOvM,EAAQI,GAAQmM,EAAS,MAAOvM,EAAQI,IAC/GgL,eAAgB,CAACjsB,EAAI6gB,EAAQI,IAAUjhB,EAAGisB,eAAemB,EAAS,MAAOvM,EAAQI,GAAQmM,EAAS,MAAOvM,EAAQI,IACjHsM,iBAAkB,CAACvtB,EAAI6gB,EAAQI,IAAUjhB,EAAG2sB,oBAAoB,KAAMS,EAAS,KAAMvM,EAAQI,GAAQmM,EAAS,KAAMvM,EAAQI,GAAQmM,EAAS,KAAMvM,EAAQI,IAC3JuM,gBAAiB,CAACxtB,EAAI6gB,EAAQI,IAAUjhB,EAAG2sB,oBAAoB,KAAMS,EAAS,MAAOvM,EAAQI,GAAQmM,EAAS,MAAOvM,EAAQI,GAAQmM,EAAS,MAAOvM,EAAQI,IAC7JwM,eAAgB,CAACztB,EAAI6gB,EAAQI,IAAUjhB,EAAGmtB,kBAAkB,KAAMC,EAAS,KAAMvM,EAAQI,GAAQmM,EAAS,KAAMvM,EAAQI,GAAQmM,EAAS,KAAMvM,EAAQI,IACvJyM,cAAe,CAAC1tB,EAAI6gB,EAAQI,IAAUjhB,EAAGmtB,kBAAkB,KAAMC,EAAS,MAAOvM,EAAQI,GAAQmM,EAAS,MAAOvM,EAAQI,GAAQmM,EAAS,MAAOvM,EAAQI,KAE9I0M,EAAoB,CAC/B7D,OAAQ,CAAC8D,EAAQC,IAAeD,EAAO,CACrC,CAACC,IAAa,IAEhB9D,QAAS,CAAC6D,EAAQC,IAAeD,EAAO,CACtC,CAACC,IAAa,IAEhB5D,YAAa,CAAC2D,EAAQhnB,EAAO7E,IAAU6rB,EAAO,CAC5C,CAAChnB,GAAQ7E,IAEXioB,KAAM,CAAC4D,EAAQhnB,EAAOojB,IAAS4D,EAAO,CACpC,CAAChnB,GAAQojB,IAEXG,gBAAiB,CAACyD,EAAQttB,EAAQ8qB,KAChC,OAAQ9qB,GACN,KAAK,MACH,OAAOstB,EAAO,CACZ,CAAC,OAAQxC,EACT,CAAC,OAAQA,IAGb,KAAK,MACH,OAAOwC,EAAO,CACZ,CAAC,OAAQxC,IAGb,KAAK,MACH,OAAOwC,EAAO,CACZ,CAAC,OAAQxC,IAGb,QACE,OAAO,OAGbd,WAAY,CAACsD,EAAQriB,EAAGuiB,EAAGtkB,EAAGD,IAAMqkB,EAAO,CACzC,CAAC,OAAQ,IAAIvkB,aAAa,CAACkC,EAAGuiB,EAAGtkB,EAAGD,MAEtC+hB,cAAe,CAACsC,EAAQG,IAASH,EAAO,CACtC,CAAC,OAAQG,EACT,CAAC,OAAQA,IAEXxC,sBAAuB,CAACqC,EAAQI,EAASC,IAAcL,EAAO,CAC5D,CAAC,OAAQI,EACT,CAAC,OAAQC,IAEXzC,UAAW,CAACoC,EAAQM,EAAKC,IAAQP,EAAO,CACtC,CAAC,OAAQM,EACT,CAAC,OAAQC,EACT,CAAC,OAAQD,EACT,CAAC,OAAQC,IAEX1C,kBAAmB,CAACmC,EAAQQ,EAAQC,EAAQC,EAAUC,IAAaX,EAAO,CACxE,CAAC,OAAQQ,EACT,CAAC,OAAQC,EACT,CAAC,OAAQC,EACT,CAAC,OAAQC,IAEXhE,WAAY,CAACqD,EAAQriB,EAAGuiB,EAAGtkB,EAAGD,IAAMqkB,EAAO,CACzC,CAAC,MAAO,IAAIvkB,aAAa,CAACkC,EAAGuiB,EAAGtkB,EAAGD,MAErCmhB,WAAY,CAACkD,EAAQY,IAAUZ,EAAO,CACpC,CAAC,MAAOY,IAEVvD,aAAc,CAAC2C,EAAQ/d,IAAM+d,EAAO,CAClC,CAAC,MAAO/d,IAEV2a,UAAW,CAACoD,EAAQriB,EAAGuiB,EAAGtkB,EAAGD,IAAMqkB,EAAO,CACxC,CAAC,MAAO,CAACriB,EAAGuiB,EAAGtkB,EAAGD,KAEpBkhB,SAAU,CAACmD,EAAQG,IAASH,EAAO,CACjC,CAAC,MAAOG,IAEVpD,UAAW,CAACiD,EAAQ7O,IAAS6O,EAAO,CAClC,CAAC,MAAO7O,IAEV6L,WAAY,CAACgD,EAAQa,EAAOC,IAASd,EAAO,CAC1C,CAAC,MAAO,IAAIvkB,aAAa,CAAColB,EAAOC,MAEnC7D,UAAW,CAAC+C,EAAQvB,IAASuB,EAAO,CAClC,CAAC,MAAOvB,IAEVvB,UAAW,CAAC8C,EAAQe,IAASf,EAAO,CAClC,CAAC,MAAOe,IAEV5D,UAAW,CAAC6C,EAAQgB,IAAUhB,EAAO,CACnC,CAAC,MAAOgB,IAEV5C,cAAe,CAAC4B,EAAQlW,EAAQmX,IAAUjB,EAAO,CAC/C,CAAC,OAAQlW,EACT,CAAC,OAAQmX,IAEX5C,eAAgB,CAAC2B,EAAQ7rB,EAAO4L,IAAWigB,EAAO,CAChD,CAAC,OAAQ7rB,EACT,CAAC,OAAQ4L,IAEXqd,QAAS,CAAC4C,EAAQ1jB,EAAGC,EAAGykB,EAAOE,IAAWlB,EAAO,CAC/C,CAAC,MAAO,IAAI3S,WAAW,CAAC/Q,EAAGC,EAAGykB,EAAOE,MAEvC1C,YAAa,CAACwB,EAAQvB,IAASuB,EAAO,CACpC,CAAC,MAAOvB,EACR,CAAC,OAAQA,IAEXnB,oBAAqB,CAAC0C,EAAQe,EAAMtC,IAASuB,EAAO,CAClD,CAAU,OAATe,EAAgB,KAAO,OAAQtC,IAElCE,YAAa,CAACqB,EAAQ7O,EAAMyN,EAAKH,IAASuB,EAAO,CAC/C,CAAC,MAAO7O,EACR,CAAC,MAAOyN,EACR,CAAC,MAAOH,EACR,CAAC,OAAQtN,EACT,CAAC,OAAQyN,EACT,CAAC,OAAQH,IAEXM,oBAAqB,CAACiB,EAAQe,EAAM5P,EAAMyN,EAAKH,IAASuB,EAAO,CAC7D,CAAU,OAATe,EAAgB,KAAO,OAAQ5P,EAChC,CAAU,OAAT4P,EAAgB,KAAO,OAAQnC,EAChC,CAAU,OAATmC,EAAgB,KAAO,OAAQtC,IAElCO,UAAW,CAACgB,EAAQmB,EAAMC,EAAOC,IAAUrB,EAAO,CAChD,CAAC,MAAOmB,EACR,CAAC,MAAOC,EACR,CAAC,MAAOC,EACR,CAAC,OAAQF,EACT,CAAC,OAAQC,EACT,CAAC,OAAQC,IAEX9B,kBAAmB,CAACS,EAAQe,EAAMI,EAAMC,EAAOC,IAAUrB,EAAO,CAC9D,CAAU,OAATe,EAAgB,KAAO,OAAQI,EAChC,CAAU,OAATJ,EAAgB,KAAO,OAAQK,EAChC,CAAU,OAATL,EAAgB,KAAO,OAAQM,IAElC9D,SAAU,CAACyC,EAAQ1jB,EAAGC,EAAGykB,EAAOE,IAAWlB,EAAO,CAChD,CAAC,MAAO,CAAC1jB,EAAGC,EAAGykB,EAAOE,MAIpBI,EAAY,CAAClvB,EAAIiB,IAAQjB,EAAGkvB,UAAUjuB,GAE/BkuB,EAAuB,CAClC,CAAC,MAAOD,EACR,CAAC,MAAOA,EACR,CAAC,MAAOA,EACR,CAAC,MAAOA,EACR,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,OAAQA,EACT,CAAC,MAAOA,EACR,CAAC,MAAOA,EACR,CAAC,OAAQA,I,kCCjXJ,SAASE,EAA2BhmB,EAAKG,EAAGU,GACjD,MAAMC,EAAIX,EAAE,GACNY,EAAIZ,EAAE,GACNc,EAAIJ,EAAE,GAAKC,EAAID,EAAE,GAAKE,GAAK,EAGjC,OAFAf,EAAI,IAAMa,EAAE,GAAKC,EAAID,EAAE,GAAKE,GAAKE,EACjCjB,EAAI,IAAMa,EAAE,GAAKC,EAAID,EAAE,GAAKE,GAAKE,EAC1BjB,EAEF,SAASimB,EAA2BjmB,EAAKG,EAAGU,GACjD,MAAMC,EAAIX,EAAE,GACNY,EAAIZ,EAAE,GACNa,EAAIb,EAAE,GACNc,EAAIJ,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,IAAMG,GAAK,EAI7C,OAHAhB,EAAI,IAAMa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,GAAKG,GAAKC,EAC5CjB,EAAI,IAAMa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,GAAKG,GAAKC,EAC5CjB,EAAI,IAAMa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,IAAMG,GAAKC,EACtCjB,EAEF,SAASkmB,EAAmBlmB,EAAKG,EAAGU,GACzC,MAAMC,EAAIX,EAAE,GACNY,EAAIZ,EAAE,GAIZ,OAHAH,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAC3Bf,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAC3Bf,EAAI,GAAKG,EAAE,GACJH,EAxBT,uG,kCCAe,SAASiD,EAAOgR,EAAWC,GACxC,IAAKD,EACH,MAAM,IAAIxG,MAAM,qBAAqBlK,OAAO2Q,IAFhD,mC,mCCAA,YAEA,IAAIzb,EAAyB,EAAQ,QAErC/C,OAAOgD,eAAezC,EAAS,aAAc,CAC3C0C,OAAO,IAET1C,EAAQ4C,QAAUmB,EAClB/D,EAAQkwB,oBAAsBA,EAE9B,IAAI5N,EAAW9f,EAAuB,EAAQ,SAE1CQ,EAAcR,EAAuB,EAAQ,SAEjD,SAASuB,IACP,IAAIosB,EAA6F,YAAhE,qBAAZ7vB,EAA0B,aAAc,EAAIgiB,EAAS1f,SAAStC,KAA8C,qBAApB0D,OAAO1D,KAAoCA,EAAQ2D,QAChK,OAAQksB,IAAU,EAAIntB,EAAYJ,WAGpC,SAASstB,IACP,OAAOnsB,KAAmC,qBAAbD,Y,2CClB/B/D,EAAOC,QAAU,EAAQ,S,qBCFzB;;;;;qCAKA,SAAUR,EAAQsE,EAAUssB,EAAYjrB,GACtC,aAEF,IA+FIkrB,EA/FAC,EAAkB,CAAC,GAAI,SAAU,MAAO,KAAM,KAAM,KACpDC,EAAezsB,EAAS0sB,cAAc,OAEtCC,EAAgB,WAEhB1R,EAAQjX,KAAKiX,MACb5K,EAAMrM,KAAKqM,IACX9T,EAAMI,KAAKJ,IASf,SAASqwB,EAAkB1U,EAAI2U,EAASC,GACpC,OAAO1U,WAAW2U,EAAO7U,EAAI4U,GAAUD,GAY3C,SAASG,EAAeC,EAAK/U,EAAI4U,GAC7B,QAAI9qB,MAAM6P,QAAQob,KACdC,EAAKD,EAAKH,EAAQ5U,GAAK4U,IAChB,GAWf,SAASI,EAAKxT,EAAKmD,EAAUiQ,GACzB,IAAIrjB,EAEJ,GAAKiQ,EAIL,GAAIA,EAAI7b,QACJ6b,EAAI7b,QAAQgf,EAAUiQ,QACnB,GAAIpT,EAAIvX,SAAWd,EAAW,CACjCoI,EAAI,EACJ,MAAOA,EAAIiQ,EAAIvX,OACX0a,EAAS1gB,KAAK2wB,EAASpT,EAAIjQ,GAAIA,EAAGiQ,GAClCjQ,SAGJ,IAAKA,KAAKiQ,EACNA,EAAIyT,eAAe1jB,IAAMoT,EAAS1gB,KAAK2wB,EAASpT,EAAIjQ,GAAIA,EAAGiQ,GAYvE,SAAS0T,EAAUC,EAAQvoB,EAAMqV,GAC7B,IAAImT,EAAqB,sBAAwBxoB,EAAO,KAAOqV,EAAU,SACzE,OAAO,WACH,IAAIoT,EAAI,IAAI7Z,MAAM,mBACd8Z,EAAQD,GAAKA,EAAEC,MAAQD,EAAEC,MAAM3S,QAAQ,kBAAmB,IACzDA,QAAQ,cAAe,IACvBA,QAAQ,6BAA8B,kBAAoB,sBAE3D5Z,EAAMvF,EAAOsF,UAAYtF,EAAOsF,QAAQysB,MAAQ/xB,EAAOsF,QAAQC,KAInE,OAHIA,GACAA,EAAI9E,KAAKT,EAAOsF,QAASssB,EAAoBE,GAE1CH,EAAO7rB,MAAMG,KAAMkC,YAa9B0oB,EADyB,oBAAlB5wB,OAAO4wB,OACL,SAAgBpvB,GACrB,GAAIA,IAAWkE,GAAwB,OAAXlE,EACxB,MAAM,IAAI+mB,UAAU,8CAIxB,IADA,IAAIwJ,EAAS/xB,OAAOwB,GACX2G,EAAQ,EAAGA,EAAQD,UAAU1B,OAAQ2B,IAAS,CACnD,IAAI6pB,EAAS9pB,UAAUC,GACvB,GAAI6pB,IAAWtsB,GAAwB,OAAXssB,EACxB,IAAK,IAAIC,KAAWD,EACZA,EAAOR,eAAeS,KACtBF,EAAOE,GAAWD,EAAOC,IAKzC,OAAOF,GAGF/xB,OAAO4wB,OAWpB,IAAIsB,EAAST,GAAU,SAAgBU,EAAM/C,EAAKgD,GAC9C,IAAInwB,EAAOjC,OAAOiC,KAAKmtB,GACnBthB,EAAI,EACR,MAAOA,EAAI7L,EAAKuE,SACP4rB,GAAUA,GAASD,EAAKlwB,EAAK6L,MAAQpI,KACtCysB,EAAKlwB,EAAK6L,IAAMshB,EAAIntB,EAAK6L,KAE7BA,IAEJ,OAAOqkB,IACR,SAAU,iBASTC,EAAQX,GAAU,SAAeU,EAAM/C,GACvC,OAAO8C,EAAOC,EAAM/C,GAAK,KAC1B,QAAS,iBAQZ,SAASiD,EAAQC,EAAOC,EAAMzK,GAC1B,IACI0K,EADAC,EAAQF,EAAKnrB,UAGjBorB,EAASF,EAAMlrB,UAAYpH,OAAOqK,OAAOooB,GACzCD,EAAOrR,YAAcmR,EACrBE,EAAOE,OAASD,EAEZ3K,GACA8I,EAAO4B,EAAQ1K,GAUvB,SAASsJ,EAAO7U,EAAI4U,GAChB,OAAO,WACH,OAAO5U,EAAG1W,MAAMsrB,EAASjpB,YAWjC,SAASyqB,EAASC,EAAK9vB,GACnB,cAAW8vB,GAAO5B,EACP4B,EAAI/sB,MAAM/C,GAAOA,EAAK,IAAkB4C,EAAW5C,GAEvD8vB,EASX,SAASC,EAAYC,EAAMC,GACvB,OAAQD,IAASptB,EAAaqtB,EAAOD,EASzC,SAASE,EAAkBxxB,EAAQyxB,EAAOC,GACtC3B,EAAK4B,EAASF,IAAQ,SAASnuB,GAC3BtD,EAAOmH,iBAAiB7D,EAAMouB,GAAS,MAU/C,SAASE,EAAqB5xB,EAAQyxB,EAAOC,GACzC3B,EAAK4B,EAASF,IAAQ,SAASnuB,GAC3BtD,EAAO4c,oBAAoBtZ,EAAMouB,GAAS,MAWlD,SAASG,EAAUC,EAAMC,GACrB,MAAOD,EAAM,CACT,GAAIA,GAAQC,EACR,OAAO,EAEXD,EAAOA,EAAKE,WAEhB,OAAO,EASX,SAASC,EAAMC,EAAKC,GAChB,OAAOD,EAAI7vB,QAAQ8vB,IAAS,EAQhC,SAASR,EAASO,GACd,OAAOA,EAAIrU,OAAOwL,MAAM,QAU5B,SAAS+I,EAAQxE,EAAKuE,EAAME,GACxB,GAAIzE,EAAIvrB,UAAYgwB,EAChB,OAAOzE,EAAIvrB,QAAQ8vB,GAEnB,IAAI7lB,EAAI,EACR,MAAOA,EAAIshB,EAAI5oB,OAAQ,CACnB,GAAKqtB,GAAazE,EAAIthB,GAAG+lB,IAAcF,IAAWE,GAAazE,EAAIthB,KAAO6lB,EACtE,OAAO7lB,EAEXA,IAEJ,OAAQ,EAShB,SAASgmB,EAAQ/V,GACb,OAAO1X,MAAMe,UAAU/G,MAAMG,KAAKud,EAAK,GAU3C,SAASgW,EAAY3E,EAAKjtB,EAAK6xB,GAC3B,IAAIC,EAAU,GACVlS,EAAS,GACTjU,EAAI,EAER,MAAOA,EAAIshB,EAAI5oB,OAAQ,CACnB,IAAIosB,EAAMzwB,EAAMitB,EAAIthB,GAAG3L,GAAOitB,EAAIthB,GAC9B8lB,EAAQ7R,EAAQ6Q,GAAO,GACvBqB,EAAQhrB,KAAKmmB,EAAIthB,IAErBiU,EAAOjU,GAAK8kB,EACZ9kB,IAaJ,OAVIkmB,IAIIC,EAHC9xB,EAGS8xB,EAAQD,MAAK,SAAyBvpB,EAAGC,GAC/C,OAAOD,EAAEtI,GAAOuI,EAAEvI,MAHZ8xB,EAAQD,QAQnBC,EASX,SAASC,EAASnW,EAAKoW,GACnB,IAAIC,EAAQC,EACRC,EAAYH,EAAS,GAAGI,cAAgBJ,EAAS9zB,MAAM,GAEvDyN,EAAI,EACR,MAAOA,EAAI+iB,EAAgBrqB,OAAQ,CAI/B,GAHA4tB,EAASvD,EAAgB/iB,GACzBumB,EAAO,EAAWD,EAASE,EAAYH,EAEnCE,KAAQtW,EACR,OAAOsW,EAEXvmB,IAEJ,OAAOpI,EAOX,IAAI8uB,EAAY,EAChB,SAASC,IACL,OAAOD,IAQX,SAASE,EAAoBC,GACzB,IAAIC,EAAMD,EAAQE,eAAiBF,EACnC,OAAQC,EAAIE,aAAeF,EAAIG,cAAgBh1B,EAGnD,IAAIi1B,EAAe,wCAEfC,EAAiB,iBAAkBl1B,EACnCm1B,EAAyBhB,EAASn0B,EAAQ,kBAAoB2F,EAC9DyvB,EAAqBF,GAAiBD,EAAaI,KAAKzxB,UAAUC,WAElEyxB,EAAmB,QACnBC,EAAiB,MACjBC,EAAmB,QACnBC,EAAoB,SAEpBC,EAAmB,GAEnBC,EAAc,EACdC,EAAa,EACbC,EAAY,EACZC,EAAe,EAEfC,EAAiB,EACjBC,EAAiB,EACjBC,EAAkB,EAClBC,EAAe,EACfC,GAAiB,GAEjBC,GAAuBJ,EAAiBC,EACxCI,GAAqBH,EAAeC,GACpCG,GAAgBF,GAAuBC,GAEvCE,GAAW,CAAC,IAAK,KACjBC,GAAkB,CAAC,UAAW,WASlC,SAASC,GAAMC,EAASC,GACpB,IAAItyB,EAAO4B,KACXA,KAAKywB,QAAUA,EACfzwB,KAAK0wB,SAAWA,EAChB1wB,KAAK2uB,QAAU8B,EAAQ9B,QACvB3uB,KAAKxE,OAASi1B,EAAQtY,QAAQwY,YAI9B3wB,KAAK4wB,WAAa,SAASC,GACnBlE,EAAS8D,EAAQtY,QAAQ6M,OAAQ,CAACyL,KAClCryB,EAAK8uB,QAAQ2D,IAIrB7wB,KAAK8wB,OAoCT,SAASC,GAAoBN,GACzB,IAAIO,EACAC,EAAaR,EAAQtY,QAAQ8Y,WAajC,OAVID,EADAC,IAEO/B,EACAgC,GACA/B,EACAgC,GACClC,EAGDmC,GAFAC,IAIJ,IAAI,EAAOZ,EAASa,IAS/B,SAASA,GAAab,EAASc,EAAWC,GACtC,IAAIC,EAAcD,EAAME,SAASlxB,OAC7BmxB,EAAqBH,EAAMI,gBAAgBpxB,OAC3CqxB,EAAWN,EAAY7B,GAAgB+B,EAAcE,IAAuB,EAC5EG,EAAWP,GAAa3B,EAAYC,IAAkB4B,EAAcE,IAAuB,EAE/FH,EAAMK,UAAYA,EAClBL,EAAMM,UAAYA,EAEdD,IACApB,EAAQsB,QAAU,IAKtBP,EAAMD,UAAYA,EAGlBS,GAAiBvB,EAASe,GAG1Bf,EAAQwB,KAAK,eAAgBT,GAE7Bf,EAAQyB,UAAUV,GAClBf,EAAQsB,QAAQI,UAAYX,EAQhC,SAASQ,GAAiBvB,EAASe,GAC/B,IAAIO,EAAUtB,EAAQsB,QAClBL,EAAWF,EAAME,SACjBU,EAAiBV,EAASlxB,OAGzBuxB,EAAQM,aACTN,EAAQM,WAAaC,GAAqBd,IAI1CY,EAAiB,IAAML,EAAQQ,cAC/BR,EAAQQ,cAAgBD,GAAqBd,GACnB,IAAnBY,IACPL,EAAQQ,eAAgB,GAG5B,IAAIF,EAAaN,EAAQM,WACrBE,EAAgBR,EAAQQ,cACxBC,EAAeD,EAAgBA,EAAc9kB,OAAS4kB,EAAW5kB,OAEjEA,EAAS+jB,EAAM/jB,OAASglB,GAAUf,GACtCF,EAAMkB,UAAY93B,IAClB42B,EAAMmB,UAAYnB,EAAMkB,UAAYL,EAAWK,UAE/ClB,EAAM1qB,MAAQ8rB,GAASJ,EAAc/kB,GACrC+jB,EAAMqB,SAAWC,GAAYN,EAAc/kB,GAE3CslB,GAAehB,EAASP,GACxBA,EAAMwB,gBAAkBC,GAAazB,EAAM0B,OAAQ1B,EAAM2B,QAEzD,IAAIC,EAAkBC,GAAY7B,EAAMmB,UAAWnB,EAAM0B,OAAQ1B,EAAM2B,QACvE3B,EAAM8B,iBAAmBF,EAAgBhuB,EACzCosB,EAAM+B,iBAAmBH,EAAgB/tB,EACzCmsB,EAAM4B,gBAAmB1kB,EAAI0kB,EAAgBhuB,GAAKsJ,EAAI0kB,EAAgB/tB,GAAM+tB,EAAgBhuB,EAAIguB,EAAgB/tB,EAEhHmsB,EAAMrf,MAAQogB,EAAgBngB,GAASmgB,EAAcb,SAAUA,GAAY,EAC3EF,EAAMgC,SAAWjB,EAAgBkB,GAAYlB,EAAcb,SAAUA,GAAY,EAEjFF,EAAMkC,YAAe3B,EAAQI,UAAsCX,EAAME,SAASlxB,OAC9EuxB,EAAQI,UAAUuB,YAAelC,EAAME,SAASlxB,OAASuxB,EAAQI,UAAUuB,YADtClC,EAAME,SAASlxB,OAGxDmzB,GAAyB5B,EAASP,GAGlC,IAAIh2B,EAASi1B,EAAQ9B,QACjBtB,EAAUmE,EAAMoC,SAASp4B,OAAQA,KACjCA,EAASg2B,EAAMoC,SAASp4B,QAE5Bg2B,EAAMh2B,OAASA,EAGnB,SAASu3B,GAAehB,EAASP,GAC7B,IAAI/jB,EAAS+jB,EAAM/jB,OACfxM,EAAS8wB,EAAQ8B,aAAe,GAChCC,EAAY/B,EAAQ+B,WAAa,GACjC3B,EAAYJ,EAAQI,WAAa,GAEjCX,EAAMD,YAAc7B,GAAeyC,EAAUZ,YAAc3B,IAC3DkE,EAAY/B,EAAQ+B,UAAY,CAC5B1uB,EAAG+sB,EAAUe,QAAU,EACvB7tB,EAAG8sB,EAAUgB,QAAU,GAG3BlyB,EAAS8wB,EAAQ8B,YAAc,CAC3BzuB,EAAGqI,EAAOrI,EACVC,EAAGoI,EAAOpI,IAIlBmsB,EAAM0B,OAASY,EAAU1uB,GAAKqI,EAAOrI,EAAInE,EAAOmE,GAChDosB,EAAM2B,OAASW,EAAUzuB,GAAKoI,EAAOpI,EAAIpE,EAAOoE,GAQpD,SAASsuB,GAAyB5B,EAASP,GACvC,IAEIuC,EAAUC,EAAWC,EAAWC,EAFhCC,EAAOpC,EAAQqC,cAAgB5C,EAC/BmB,EAAYnB,EAAMkB,UAAYyB,EAAKzB,UAGvC,GAAIlB,EAAMD,WAAa1B,IAAiB8C,EAAYlD,GAAoB0E,EAAKJ,WAAar0B,GAAY,CAClG,IAAIwzB,EAAS1B,EAAM0B,OAASiB,EAAKjB,OAC7BC,EAAS3B,EAAM2B,OAASgB,EAAKhB,OAE7BvoB,EAAIyoB,GAAYV,EAAWO,EAAQC,GACvCa,EAAYppB,EAAExF,EACd6uB,EAAYrpB,EAAEvF,EACd0uB,EAAYrlB,EAAI9D,EAAExF,GAAKsJ,EAAI9D,EAAEvF,GAAMuF,EAAExF,EAAIwF,EAAEvF,EAC3C6uB,EAAYjB,GAAaC,EAAQC,GAEjCpB,EAAQqC,aAAe5C,OAGvBuC,EAAWI,EAAKJ,SAChBC,EAAYG,EAAKH,UACjBC,EAAYE,EAAKF,UACjBC,EAAYC,EAAKD,UAGrB1C,EAAMuC,SAAWA,EACjBvC,EAAMwC,UAAYA,EAClBxC,EAAMyC,UAAYA,EAClBzC,EAAM0C,UAAYA,EAQtB,SAAS5B,GAAqBd,GAG1B,IAAIE,EAAW,GACX5pB,EAAI,EACR,MAAOA,EAAI0pB,EAAME,SAASlxB,OACtBkxB,EAAS5pB,GAAK,CACVusB,QAAS/a,EAAMkY,EAAME,SAAS5pB,GAAGusB,SACjCC,QAAShb,EAAMkY,EAAME,SAAS5pB,GAAGwsB,UAErCxsB,IAGJ,MAAO,CACH4qB,UAAW93B,IACX82B,SAAUA,EACVjkB,OAAQglB,GAAUf,GAClBwB,OAAQ1B,EAAM0B,OACdC,OAAQ3B,EAAM2B,QAStB,SAASV,GAAUf,GACf,IAAIU,EAAiBV,EAASlxB,OAG9B,GAAuB,IAAnB4xB,EACA,MAAO,CACHhtB,EAAGkU,EAAMoY,EAAS,GAAG2C,SACrBhvB,EAAGiU,EAAMoY,EAAS,GAAG4C,UAI7B,IAAIlvB,EAAI,EAAGC,EAAI,EAAGyC,EAAI,EACtB,MAAOA,EAAIsqB,EACPhtB,GAAKssB,EAAS5pB,GAAGusB,QACjBhvB,GAAKqsB,EAAS5pB,GAAGwsB,QACjBxsB,IAGJ,MAAO,CACH1C,EAAGkU,EAAMlU,EAAIgtB,GACb/sB,EAAGiU,EAAMjU,EAAI+sB,IAWrB,SAASiB,GAAYV,EAAWvtB,EAAGC,GAC/B,MAAO,CACHD,EAAGA,EAAIutB,GAAa,EACpBttB,EAAGA,EAAIstB,GAAa,GAU5B,SAASM,GAAa7tB,EAAGC,GACrB,OAAID,IAAMC,EACCyqB,EAGPphB,EAAItJ,IAAMsJ,EAAIrJ,GACPD,EAAI,EAAI2qB,EAAiBC,EAE7B3qB,EAAI,EAAI4qB,EAAeC,GAUlC,SAAS4C,GAAYyB,EAAIC,EAAIC,GACpBA,IACDA,EAAQnE,IAEZ,IAAIlrB,EAAIovB,EAAGC,EAAM,IAAMF,EAAGE,EAAM,IAC5BpvB,EAAImvB,EAAGC,EAAM,IAAMF,EAAGE,EAAM,IAEhC,OAAOpyB,KAAK2E,KAAM5B,EAAIA,EAAMC,EAAIA,GAUpC,SAASutB,GAAS2B,EAAIC,EAAIC,GACjBA,IACDA,EAAQnE,IAEZ,IAAIlrB,EAAIovB,EAAGC,EAAM,IAAMF,EAAGE,EAAM,IAC5BpvB,EAAImvB,EAAGC,EAAM,IAAMF,EAAGE,EAAM,IAChC,OAA0B,IAAnBpyB,KAAKqyB,MAAMrvB,EAAGD,GAAW/C,KAAKwP,GASzC,SAAS4hB,GAAYta,EAAOC,GACxB,OAAOwZ,GAASxZ,EAAI,GAAIA,EAAI,GAAImX,IAAmBqC,GAASzZ,EAAM,GAAIA,EAAM,GAAIoX,IAUpF,SAASne,GAAS+G,EAAOC,GACrB,OAAO0Z,GAAY1Z,EAAI,GAAIA,EAAI,GAAImX,IAAmBuC,GAAY3Z,EAAM,GAAIA,EAAM,GAAIoX,IA/U1FC,GAAMpvB,UAAY,CAKd8rB,QAAS,aAKT4D,KAAM,WACF9wB,KAAK20B,MAAQ3H,EAAkBhtB,KAAK2uB,QAAS3uB,KAAK20B,KAAM30B,KAAK4wB,YAC7D5wB,KAAK40B,UAAY5H,EAAkBhtB,KAAKxE,OAAQwE,KAAK40B,SAAU50B,KAAK4wB,YACpE5wB,KAAK60B,OAAS7H,EAAkB0B,EAAoB1uB,KAAK2uB,SAAU3uB,KAAK60B,MAAO70B,KAAK4wB,aAMxFkE,QAAS,WACL90B,KAAK20B,MAAQvH,EAAqBptB,KAAK2uB,QAAS3uB,KAAK20B,KAAM30B,KAAK4wB,YAChE5wB,KAAK40B,UAAYxH,EAAqBptB,KAAKxE,OAAQwE,KAAK40B,SAAU50B,KAAK4wB,YACvE5wB,KAAK60B,OAASzH,EAAqBsB,EAAoB1uB,KAAK2uB,SAAU3uB,KAAK60B,MAAO70B,KAAK4wB,cA4T/F,IAAImE,GAAkB,CAClBC,UAAWtF,EACXuF,UAAWtF,EACXuF,QAAStF,GAGTuF,GAAuB,YACvBC,GAAsB,oBAO1B,SAAS/D,KACLrxB,KAAK20B,KAAOQ,GACZn1B,KAAK60B,MAAQO,GAEbp1B,KAAKq1B,SAAU,EAEf7E,GAAM3wB,MAAMG,KAAMkC,WAGtBmqB,EAAQgF,GAAYb,GAAO,CAKvBtD,QAAS,SAAmB2D,GACxB,IAAIU,EAAYwD,GAAgBlE,EAAG/xB,MAG/ByyB,EAAY7B,GAA6B,IAAdmB,EAAGyE,SAC9Bt1B,KAAKq1B,SAAU,GAGf9D,EAAY5B,GAA2B,IAAbkB,EAAG0E,QAC7BhE,EAAY3B,GAIX5vB,KAAKq1B,UAIN9D,EAAY3B,IACZ5vB,KAAKq1B,SAAU,GAGnBr1B,KAAK0wB,SAAS1wB,KAAKywB,QAASc,EAAW,CACnCG,SAAU,CAACb,GACXe,gBAAiB,CAACf,GAClB2E,YAAajG,EACbqE,SAAU/C,QAKtB,IAAI4E,GAAoB,CACpBC,YAAahG,EACbiG,YAAahG,EACbiG,UAAWhG,EACXiG,cAAehG,EACfiG,WAAYjG,GAIZkG,GAAyB,CACzBC,EAAG3G,EACH4G,EAAG3G,EACH4G,EAAG3G,EACH4G,EAAG3G,GAGH4G,GAAyB,cACzBC,GAAwB,sCAa5B,SAASnF,KACLlxB,KAAK20B,KAAOyB,GACZp2B,KAAK60B,MAAQwB,GAEb7F,GAAM3wB,MAAMG,KAAMkC,WAElBlC,KAAKs2B,MAASt2B,KAAKywB,QAAQsB,QAAQwE,cAAgB,GAhBnDx8B,EAAOy8B,iBAAmBz8B,EAAO08B,eACjCL,GAAyB,gBACzBC,GAAwB,6CAiB5BhK,EAAQ6E,GAAmBV,GAAO,CAK9BtD,QAAS,SAAmB2D,GACxB,IAAIyF,EAAQt2B,KAAKs2B,MACbI,GAAgB,EAEhBC,EAAsB9F,EAAG/xB,KAAKmZ,cAAciB,QAAQ,KAAM,IAC1DqY,EAAYkE,GAAkBkB,GAC9BnB,EAAcO,GAAuBlF,EAAG2E,cAAgB3E,EAAG2E,YAE3DoB,EAAWpB,GAAenG,EAG1BwH,EAAajJ,EAAQ0I,EAAOzF,EAAGiG,UAAW,aAG1CvF,EAAY7B,IAA8B,IAAdmB,EAAGyE,QAAgBsB,GAC3CC,EAAa,IACbP,EAAMrzB,KAAK4tB,GACXgG,EAAaP,EAAM91B,OAAS,GAEzB+wB,GAAa3B,EAAYC,KAChC6G,GAAgB,GAIhBG,EAAa,IAKjBP,EAAMO,GAAchG,EAEpB7wB,KAAK0wB,SAAS1wB,KAAKywB,QAASc,EAAW,CACnCG,SAAU4E,EACV1E,gBAAiB,CAACf,GAClB2E,YAAaA,EACb5B,SAAU/C,IAGV6F,GAEAJ,EAAM1yB,OAAOizB,EAAY,OAKrC,IAAIE,GAAyB,CACzBC,WAAYtH,EACZuH,UAAWtH,EACXuH,SAAUtH,EACVuH,YAAatH,GAGbuH,GAA6B,aAC7BC,GAA6B,4CAOjC,SAASC,KACLt3B,KAAK40B,SAAWwC,GAChBp3B,KAAK60B,MAAQwC,GACbr3B,KAAKu3B,SAAU,EAEf/G,GAAM3wB,MAAMG,KAAMkC,WAsCtB,SAASs1B,GAAuB3G,EAAI/xB,GAChC,IAAI24B,EAAM3J,EAAQ+C,EAAG6G,SACjBC,EAAU7J,EAAQ+C,EAAG+G,gBAMzB,OAJI94B,GAAQ8wB,EAAYC,KACpB4H,EAAM1J,EAAY0J,EAAI5vB,OAAO8vB,GAAU,cAAc,IAGlD,CAACF,EAAKE,GA3CjBtL,EAAQiL,GAAkB9G,GAAO,CAC7BtD,QAAS,SAAmB2D,GACxB,IAAI/xB,EAAOi4B,GAAuBlG,EAAG/xB,MAOrC,GAJIA,IAAS4wB,IACT1vB,KAAKu3B,SAAU,GAGdv3B,KAAKu3B,QAAV,CAIA,IAAIG,EAAUF,GAAuBh9B,KAAKwF,KAAM6wB,EAAI/xB,GAGhDA,GAAQ8wB,EAAYC,IAAiB6H,EAAQ,GAAGl3B,OAASk3B,EAAQ,GAAGl3B,SAAW,IAC/ER,KAAKu3B,SAAU,GAGnBv3B,KAAK0wB,SAAS1wB,KAAKywB,QAAS3xB,EAAM,CAC9B4yB,SAAUgG,EAAQ,GAClB9F,gBAAiB8F,EAAQ,GACzBlC,YAAanG,EACbuE,SAAU/C,QAsBtB,IAAIgH,GAAkB,CAClBb,WAAYtH,EACZuH,UAAWtH,EACXuH,SAAUtH,EACVuH,YAAatH,GAGbiI,GAAsB,4CAO1B,SAAS3G,KACLnxB,KAAK40B,SAAWkD,GAChB93B,KAAK+3B,UAAY,GAEjBvH,GAAM3wB,MAAMG,KAAMkC,WA0BtB,SAAS81B,GAAWnH,EAAI/xB,GACpB,IAAIm5B,EAAanK,EAAQ+C,EAAG6G,SACxBK,EAAY/3B,KAAK+3B,UAGrB,GAAIj5B,GAAQ4wB,EAAcC,IAAqC,IAAtBsI,EAAWz3B,OAEhD,OADAu3B,EAAUE,EAAW,GAAGC,aAAc,EAC/B,CAACD,EAAYA,GAGxB,IAAInwB,EACAqwB,EACAP,EAAiB9J,EAAQ+C,EAAG+G,gBAC5BQ,EAAuB,GACvB58B,EAASwE,KAAKxE,OAQlB,GALA28B,EAAgBF,EAAWI,QAAO,SAASC,GACvC,OAAOjL,EAAUiL,EAAM98B,OAAQA,MAI/BsD,IAAS4wB,EAAa,CACtB5nB,EAAI,EACJ,MAAOA,EAAIqwB,EAAc33B,OACrBu3B,EAAUI,EAAcrwB,GAAGowB,aAAc,EACzCpwB,IAKRA,EAAI,EACJ,MAAOA,EAAI8vB,EAAep3B,OAClBu3B,EAAUH,EAAe9vB,GAAGowB,aAC5BE,EAAqBn1B,KAAK20B,EAAe9vB,IAIzChJ,GAAQ8wB,EAAYC,WACbkI,EAAUH,EAAe9vB,GAAGowB,YAEvCpwB,IAGJ,OAAKswB,EAAqB53B,OAInB,CAEHutB,EAAYoK,EAActwB,OAAOuwB,GAAuB,cAAc,GACtEA,QAPJ,EAnEJ/L,EAAQ8E,GAAYX,GAAO,CACvBtD,QAAS,SAAoB2D,GACzB,IAAI/xB,EAAO+4B,GAAgBhH,EAAG/xB,MAC1B44B,EAAUM,GAAWx9B,KAAKwF,KAAM6wB,EAAI/xB,GACnC44B,GAIL13B,KAAK0wB,SAAS1wB,KAAKywB,QAAS3xB,EAAM,CAC9B4yB,SAAUgG,EAAQ,GAClB9F,gBAAiB8F,EAAQ,GACzBlC,YAAanG,EACbuE,SAAU/C,OA4EtB,IAAI0H,GAAgB,KAChBC,GAAiB,GAErB,SAASpH,KACLZ,GAAM3wB,MAAMG,KAAMkC,WAElB,IAAIgrB,EAAU9B,EAAOprB,KAAKktB,QAASltB,MACnCA,KAAKs4B,MAAQ,IAAInH,GAAWnxB,KAAKywB,QAASvD,GAC1CltB,KAAKy4B,MAAQ,IAAIpH,GAAWrxB,KAAKywB,QAASvD,GAE1CltB,KAAK04B,aAAe,KACpB14B,KAAK24B,YAAc,GAqCvB,SAASC,GAAcrH,EAAWsH,GAC1BtH,EAAY7B,GACZ1vB,KAAK04B,aAAeG,EAAUjH,gBAAgB,GAAGsG,WACjDY,GAAat+B,KAAKwF,KAAM64B,IACjBtH,GAAa3B,EAAYC,IAChCiJ,GAAat+B,KAAKwF,KAAM64B,GAIhC,SAASC,GAAaD,GAClB,IAAIP,EAAQO,EAAUjH,gBAAgB,GAEtC,GAAI0G,EAAMJ,aAAel4B,KAAK04B,aAAc,CACxC,IAAIK,EAAY,CAAC3zB,EAAGkzB,EAAMjE,QAAShvB,EAAGizB,EAAMhE,SAC5Ct0B,KAAK24B,YAAY11B,KAAK81B,GACtB,IAAIC,EAAMh5B,KAAK24B,YACXM,EAAkB,WAClB,IAAInxB,EAAIkxB,EAAIn7B,QAAQk7B,GAChBjxB,GAAK,GACLkxB,EAAIp1B,OAAOkE,EAAG,IAGtB2O,WAAWwiB,EAAiBV,KAIpC,SAASW,GAAiBL,GAEtB,IADA,IAAIzzB,EAAIyzB,EAAUjF,SAASS,QAAShvB,EAAIwzB,EAAUjF,SAASU,QAClDxsB,EAAI,EAAGA,EAAI9H,KAAK24B,YAAYn4B,OAAQsH,IAAK,CAC9C,IAAImD,EAAIjL,KAAK24B,YAAY7wB,GACrBqxB,EAAK92B,KAAKqM,IAAItJ,EAAI6F,EAAE7F,GAAIg0B,EAAK/2B,KAAKqM,IAAIrJ,EAAI4F,EAAE5F,GAChD,GAAI8zB,GAAMX,IAAkBY,GAAMZ,GAC9B,OAAO,EAGf,OAAO,EArEXnM,EAAQ+E,GAAiBZ,GAAO,CAO5BtD,QAAS,SAAoBuD,EAAS4I,EAAYC,GAC9C,IAAI1C,EAAW0C,EAAU9D,aAAenG,EACpCkK,EAAWD,EAAU9D,aAAejG,EAExC,KAAIgK,GAAWD,EAAUE,oBAAsBF,EAAUE,mBAAmBC,kBAA5E,CAKA,GAAI7C,EACAgC,GAAcp+B,KAAKwF,KAAMq5B,EAAYC,QAClC,GAAIC,GAAWL,GAAiB1+B,KAAKwF,KAAMs5B,GAC9C,OAGJt5B,KAAK0wB,SAASD,EAAS4I,EAAYC,KAMvCxE,QAAS,WACL90B,KAAKs4B,MAAMxD,UACX90B,KAAKy4B,MAAM3D,aA0CnB,IAAI4E,GAAwBxL,EAASpD,EAAa6O,MAAO,eACrDC,GAAsBF,KAA0Bh6B,EAGhDm6B,GAAuB,UACvBC,GAAoB,OACpBC,GAA4B,eAC5BC,GAAoB,OACpBC,GAAqB,QACrBC,GAAqB,QACrBC,GAAmBC,KASvB,SAASC,GAAY5J,EAASxzB,GAC1B+C,KAAKywB,QAAUA,EACfzwB,KAAK8f,IAAI7iB,GAmGb,SAASq9B,GAAkBC,GAEvB,GAAI9M,EAAM8M,EAASP,IACf,OAAOA,GAGX,IAAIQ,EAAU/M,EAAM8M,EAASN,IACzBQ,EAAUhN,EAAM8M,EAASL,IAM7B,OAAIM,GAAWC,EACJT,GAIPQ,GAAWC,EACJD,EAAUP,GAAqBC,GAItCzM,EAAM8M,EAASR,IACRA,GAGJD,GAGX,SAASM,KACL,IAAKR,GACD,OAAO,EAEX,IAAIc,EAAW,GACXC,EAAc5gC,EAAO6gC,KAAO7gC,EAAO6gC,IAAIC,SAO3C,MANA,CAAC,OAAQ,eAAgB,QAAS,QAAS,cAAe,QAAQ3+B,SAAQ,SAAS0wB,GAI/E8N,EAAS9N,IAAO+N,GAAc5gC,EAAO6gC,IAAIC,SAAS,eAAgBjO,MAE/D8N,EA1IXL,GAAYj5B,UAAY,CAKpB0e,IAAK,SAAS7iB,GAENA,GAAS48B,KACT58B,EAAQ+C,KAAK86B,WAGblB,IAAuB55B,KAAKywB,QAAQ9B,QAAQgL,OAASQ,GAAiBl9B,KACtE+C,KAAKywB,QAAQ9B,QAAQgL,MAAMD,IAAyBz8B,GAExD+C,KAAKu6B,QAAUt9B,EAAMgb,cAAcoB,QAMvCyP,OAAQ,WACJ9oB,KAAK8f,IAAI9f,KAAKywB,QAAQtY,QAAQ4iB,cAOlCD,QAAS,WACL,IAAIP,EAAU,GAMd,OALAhP,EAAKvrB,KAAKywB,QAAQuK,aAAa,SAASC,GAChCtO,EAASsO,EAAW9iB,QAAQ6M,OAAQ,CAACiW,MACrCV,EAAUA,EAAQ1yB,OAAOozB,EAAWC,sBAGrCZ,GAAkBC,EAAQl5B,KAAK,OAO1C85B,gBAAiB,SAAS3J,GACtB,IAAIoC,EAAWpC,EAAMoC,SACjBM,EAAY1C,EAAMwB,gBAGtB,GAAIhzB,KAAKywB,QAAQsB,QAAQqJ,UACrBxH,EAASyH,qBADb,CAKA,IAAId,EAAUv6B,KAAKu6B,QACfe,EAAU7N,EAAM8M,EAASP,MAAuBG,GAAiBH,IACjES,EAAUhN,EAAM8M,EAASL,MAAwBC,GAAiBD,IAClEM,EAAU/M,EAAM8M,EAASN,MAAwBE,GAAiBF,IAEtE,GAAIqB,EAAS,CAGT,IAAIC,EAAyC,IAA1B/J,EAAME,SAASlxB,OAC9Bg7B,EAAgBhK,EAAMqB,SAAW,EACjC4I,EAAiBjK,EAAMmB,UAAY,IAEvC,GAAI4I,GAAgBC,GAAiBC,EACjC,OAIR,IAAIjB,IAAWC,EAKf,OAAIa,GACCb,GAAWvG,EAAY/D,IACvBqK,GAAWtG,EAAY9D,GACjBpwB,KAAK07B,WAAW9H,QAH3B,IAWJ8H,WAAY,SAAS9H,GACjB5zB,KAAKywB,QAAQsB,QAAQqJ,WAAY,EACjCxH,EAASyH,mBAiFjB,IAAIM,GAAiB,EACjBC,GAAc,EACdC,GAAgB,EAChBC,GAAc,EACdC,GAAmBD,GACnBE,GAAkB,GAClBC,GAAe,GAQnB,SAASC,GAAW/jB,GAChBnY,KAAKmY,QAAUyS,EAAO,GAAI5qB,KAAKvD,SAAU0b,GAAW,IAEpDnY,KAAKm8B,GAAK1N,IAEVzuB,KAAKywB,QAAU,KAGfzwB,KAAKmY,QAAQ6M,OAAS6H,EAAY7sB,KAAKmY,QAAQ6M,QAAQ,GAEvDhlB,KAAKoc,MAAQuf,GAEb37B,KAAKo8B,aAAe,GACpBp8B,KAAKq8B,YAAc,GAqOvB,SAASC,GAASlgB,GACd,OAAIA,EAAQ4f,GACD,SACA5f,EAAQ0f,GACR,MACA1f,EAAQyf,GACR,OACAzf,EAAQwf,GACR,QAEJ,GAQX,SAASW,GAAarI,GAClB,OAAIA,GAAahE,GACN,OACAgE,GAAajE,EACb,KACAiE,GAAanE,EACb,OACAmE,GAAalE,EACb,QAEJ,GASX,SAASwM,GAA6BC,EAAiBxB,GACnD,IAAIxK,EAAUwK,EAAWxK,QACzB,OAAIA,EACOA,EAAQxP,IAAIwb,GAEhBA,EAQX,SAASC,KACLR,GAAWr8B,MAAMG,KAAMkC,WA6D3B,SAASy6B,KACLD,GAAe78B,MAAMG,KAAMkC,WAE3BlC,KAAK48B,GAAK,KACV58B,KAAK68B,GAAK,KA4Ed,SAASC,KACLJ,GAAe78B,MAAMG,KAAMkC,WAsC/B,SAAS66B,KACLb,GAAWr8B,MAAMG,KAAMkC,WAEvBlC,KAAKg9B,OAAS,KACdh9B,KAAKi9B,OAAS,KAmElB,SAASC,KACLR,GAAe78B,MAAMG,KAAMkC,WA8B/B,SAASi7B,KACLT,GAAe78B,MAAMG,KAAMkC,WA2D/B,SAASk7B,KACLlB,GAAWr8B,MAAMG,KAAMkC,WAIvBlC,KAAKq9B,OAAQ,EACbr9B,KAAKs9B,SAAU,EAEft9B,KAAKg9B,OAAS,KACdh9B,KAAKi9B,OAAS,KACdj9B,KAAKu9B,MAAQ,EAqGjB,SAASC,GAAO7O,EAASxW,GAGrB,OAFAA,EAAUA,GAAW,GACrBA,EAAQ6iB,YAAcnO,EAAY1U,EAAQ6iB,YAAawC,GAAO/gC,SAASghC,QAChE,IAAIC,GAAQ/O,EAASxW,GA7tBhC+jB,GAAW96B,UAAY,CAKnB3E,SAAU,GAOVqjB,IAAK,SAAS3H,GAKV,OAJAyS,EAAO5qB,KAAKmY,QAASA,GAGrBnY,KAAKywB,SAAWzwB,KAAKywB,QAAQsK,YAAYjS,SAClC9oB,MAQX29B,cAAe,SAASlB,GACpB,GAAIpR,EAAeoR,EAAiB,gBAAiBz8B,MACjD,OAAOA,KAGX,IAAIo8B,EAAep8B,KAAKo8B,aAMxB,OALAK,EAAkBD,GAA6BC,EAAiBz8B,MAC3Do8B,EAAaK,EAAgBN,MAC9BC,EAAaK,EAAgBN,IAAMM,EACnCA,EAAgBkB,cAAc39B,OAE3BA,MAQX49B,kBAAmB,SAASnB,GACxB,OAAIpR,EAAeoR,EAAiB,oBAAqBz8B,QAIzDy8B,EAAkBD,GAA6BC,EAAiBz8B,aACzDA,KAAKo8B,aAAaK,EAAgBN,KAJ9Bn8B,MAaf69B,eAAgB,SAASpB,GACrB,GAAIpR,EAAeoR,EAAiB,iBAAkBz8B,MAClD,OAAOA,KAGX,IAAIq8B,EAAcr8B,KAAKq8B,YAMvB,OALAI,EAAkBD,GAA6BC,EAAiBz8B,OACjB,IAA3C4tB,EAAQyO,EAAaI,KACrBJ,EAAYp5B,KAAKw5B,GACjBA,EAAgBoB,eAAe79B,OAE5BA,MAQX89B,mBAAoB,SAASrB,GACzB,GAAIpR,EAAeoR,EAAiB,qBAAsBz8B,MACtD,OAAOA,KAGXy8B,EAAkBD,GAA6BC,EAAiBz8B,MAChE,IAAImC,EAAQyrB,EAAQ5tB,KAAKq8B,YAAaI,GAItC,OAHIt6B,GAAS,GACTnC,KAAKq8B,YAAYz4B,OAAOzB,EAAO,GAE5BnC,MAOX+9B,mBAAoB,WAChB,OAAO/9B,KAAKq8B,YAAY77B,OAAS,GAQrCw9B,iBAAkB,SAASvB,GACvB,QAASz8B,KAAKo8B,aAAaK,EAAgBN,KAQ/ClK,KAAM,SAAST,GACX,IAAIpzB,EAAO4B,KACPoc,EAAQpc,KAAKoc,MAEjB,SAAS6V,EAAKgM,GACV7/B,EAAKqyB,QAAQwB,KAAKgM,EAAOzM,GAIzBpV,EAAQ0f,IACR7J,EAAK7zB,EAAK+Z,QAAQ8lB,MAAQ3B,GAASlgB,IAGvC6V,EAAK7zB,EAAK+Z,QAAQ8lB,OAEdzM,EAAM0M,iBACNjM,EAAKT,EAAM0M,iBAIX9hB,GAAS0f,IACT7J,EAAK7zB,EAAK+Z,QAAQ8lB,MAAQ3B,GAASlgB,KAU3C+hB,QAAS,SAAS3M,GACd,GAAIxxB,KAAKo+B,UACL,OAAOp+B,KAAKiyB,KAAKT,GAGrBxxB,KAAKoc,MAAQ6f,IAOjBmC,QAAS,WACL,IAAIt2B,EAAI,EACR,MAAOA,EAAI9H,KAAKq8B,YAAY77B,OAAQ,CAChC,KAAMR,KAAKq8B,YAAYv0B,GAAGsU,OAAS6f,GAAeN,KAC9C,OAAO,EAEX7zB,IAEJ,OAAO,GAOXoqB,UAAW,SAASoH,GAGhB,IAAI+E,EAAiBzT,EAAO,GAAI0O,GAGhC,IAAK3M,EAAS3sB,KAAKmY,QAAQ6M,OAAQ,CAAChlB,KAAMq+B,IAGtC,OAFAr+B,KAAKs+B,aACLt+B,KAAKoc,MAAQ6f,IAKbj8B,KAAKoc,OAAS2f,GAAmBC,GAAkBC,MACnDj8B,KAAKoc,MAAQuf,IAGjB37B,KAAKoc,MAAQpc,KAAKnF,QAAQwjC,GAItBr+B,KAAKoc,OAASwf,GAAcC,GAAgBC,GAAcE,KAC1Dh8B,KAAKm+B,QAAQE,IAWrBxjC,QAAS,SAASy+B,KAOlB4B,eAAgB,aAOhBoD,MAAO,cA8DXjS,EAAQqQ,GAAgBR,GAAY,CAKhCz/B,SAAU,CAKNi1B,SAAU,GASd6M,SAAU,SAAS/M,GACf,IAAIgN,EAAiBx+B,KAAKmY,QAAQuZ,SAClC,OAA0B,IAAnB8M,GAAwBhN,EAAME,SAASlxB,SAAWg+B,GAS7D3jC,QAAS,SAAS22B,GACd,IAAIpV,EAAQpc,KAAKoc,MACbmV,EAAYC,EAAMD,UAElBkN,EAAeriB,GAASwf,GAAcC,IACtC6C,EAAU1+B,KAAKu+B,SAAS/M,GAG5B,OAAIiN,IAAiBlN,EAAY1B,IAAiB6O,GACvCtiB,EAAQ4f,GACRyC,GAAgBC,EACnBnN,EAAY3B,EACLxT,EAAQ0f,GACN1f,EAAQwf,GAGdxf,EAAQyf,GAFJD,GAIRK,MAiBf5P,EAAQsQ,GAAeD,GAAgB,CAKnCjgC,SAAU,CACNwhC,MAAO,MACPU,UAAW,GACXjN,SAAU,EACVwC,UAAW7D,IAGf6K,eAAgB,WACZ,IAAIhH,EAAYl0B,KAAKmY,QAAQ+b,UACzBqG,EAAU,GAOd,OANIrG,EAAY/D,IACZoK,EAAQt3B,KAAKi3B,IAEbhG,EAAY9D,IACZmK,EAAQt3B,KAAKg3B,IAEVM,GAGXqE,cAAe,SAASpN,GACpB,IAAIrZ,EAAUnY,KAAKmY,QACf0mB,GAAW,EACXhM,EAAWrB,EAAMqB,SACjBqB,EAAY1C,EAAM0C,UAClB9uB,EAAIosB,EAAM0B,OACV7tB,EAAImsB,EAAM2B,OAed,OAZMe,EAAY/b,EAAQ+b,YAClB/b,EAAQ+b,UAAY/D,IACpB+D,EAAmB,IAAN9uB,EAAW0qB,EAAkB1qB,EAAI,EAAK2qB,EAAiBC,EACpE6O,EAAWz5B,GAAKpF,KAAK48B,GACrB/J,EAAWxwB,KAAKqM,IAAI8iB,EAAM0B,UAE1BgB,EAAmB,IAAN7uB,EAAWyqB,EAAkBzqB,EAAI,EAAK4qB,EAAeC,GAClE2O,EAAWx5B,GAAKrF,KAAK68B,GACrBhK,EAAWxwB,KAAKqM,IAAI8iB,EAAM2B,UAGlC3B,EAAM0C,UAAYA,EACX2K,GAAYhM,EAAW1a,EAAQwmB,WAAazK,EAAY/b,EAAQ+b,WAG3EqK,SAAU,SAAS/M,GACf,OAAOkL,GAAet7B,UAAUm9B,SAAS/jC,KAAKwF,KAAMwxB,KAC/CxxB,KAAKoc,MAAQwf,MAAkB57B,KAAKoc,MAAQwf,KAAgB57B,KAAK4+B,cAAcpN,KAGxFS,KAAM,SAAST,GAEXxxB,KAAK48B,GAAKpL,EAAM0B,OAChBlzB,KAAK68B,GAAKrL,EAAM2B,OAEhB,IAAIe,EAAYqI,GAAa/K,EAAM0C,WAE/BA,IACA1C,EAAM0M,gBAAkBl+B,KAAKmY,QAAQ8lB,MAAQ/J,GAEjDl0B,KAAK0sB,OAAOuF,KAAKz3B,KAAKwF,KAAMwxB,MAcpCnF,EAAQyQ,GAAiBJ,GAAgB,CAKrCjgC,SAAU,CACNwhC,MAAO,QACPU,UAAW,EACXjN,SAAU,GAGdwJ,eAAgB,WACZ,MAAO,CAAClB,KAGZuE,SAAU,SAAS/M,GACf,OAAOxxB,KAAK0sB,OAAO6R,SAAS/jC,KAAKwF,KAAMwxB,KAClCnvB,KAAKqM,IAAI8iB,EAAMrf,MAAQ,GAAKnS,KAAKmY,QAAQwmB,WAAa3+B,KAAKoc,MAAQwf,KAG5E3J,KAAM,SAAST,GACX,GAAoB,IAAhBA,EAAMrf,MAAa,CACnB,IAAI2sB,EAAQtN,EAAMrf,MAAQ,EAAI,KAAO,MACrCqf,EAAM0M,gBAAkBl+B,KAAKmY,QAAQ8lB,MAAQa,EAEjD9+B,KAAK0sB,OAAOuF,KAAKz3B,KAAKwF,KAAMwxB,MAiBpCnF,EAAQ0Q,GAAiBb,GAAY,CAKjCz/B,SAAU,CACNwhC,MAAO,QACPvM,SAAU,EACVqN,KAAM,IACNJ,UAAW,GAGfzD,eAAgB,WACZ,MAAO,CAACpB,KAGZj/B,QAAS,SAAS22B,GACd,IAAIrZ,EAAUnY,KAAKmY,QACf6mB,EAAgBxN,EAAME,SAASlxB,SAAW2X,EAAQuZ,SAClDuN,EAAgBzN,EAAMqB,SAAW1a,EAAQwmB,UACzCO,EAAY1N,EAAMmB,UAAYxa,EAAQ4mB,KAM1C,GAJA/+B,KAAKi9B,OAASzL,GAITyN,IAAkBD,GAAkBxN,EAAMD,WAAa3B,EAAYC,KAAkBqP,EACtFl/B,KAAKs+B,aACF,GAAI9M,EAAMD,UAAY7B,EACzB1vB,KAAKs+B,QACLt+B,KAAKg9B,OAAS/R,GAAkB,WAC5BjrB,KAAKoc,MAAQ2f,GACb/7B,KAAKm+B,YACNhmB,EAAQ4mB,KAAM/+B,WACd,GAAIwxB,EAAMD,UAAY3B,EACzB,OAAOmM,GAEX,OAAOE,IAGXqC,MAAO,WACHa,aAAan/B,KAAKg9B,SAGtB/K,KAAM,SAAST,GACPxxB,KAAKoc,QAAU2f,KAIfvK,GAAUA,EAAMD,UAAY3B,EAC5B5vB,KAAKywB,QAAQwB,KAAKjyB,KAAKmY,QAAQ8lB,MAAQ,KAAMzM,IAE7CxxB,KAAKi9B,OAAOvK,UAAY93B,IACxBoF,KAAKywB,QAAQwB,KAAKjyB,KAAKmY,QAAQ8lB,MAAOj+B,KAAKi9B,aAevD5Q,EAAQ6Q,GAAkBR,GAAgB,CAKtCjgC,SAAU,CACNwhC,MAAO,SACPU,UAAW,EACXjN,SAAU,GAGdwJ,eAAgB,WACZ,MAAO,CAAClB,KAGZuE,SAAU,SAAS/M,GACf,OAAOxxB,KAAK0sB,OAAO6R,SAAS/jC,KAAKwF,KAAMwxB,KAClCnvB,KAAKqM,IAAI8iB,EAAMgC,UAAYxzB,KAAKmY,QAAQwmB,WAAa3+B,KAAKoc,MAAQwf,OAc/EvP,EAAQ8Q,GAAiBT,GAAgB,CAKrCjgC,SAAU,CACNwhC,MAAO,QACPU,UAAW,GACX5K,SAAU,GACVG,UAAW/D,GAAuBC,GAClCsB,SAAU,GAGdwJ,eAAgB,WACZ,OAAOyB,GAAcv7B,UAAU85B,eAAe1gC,KAAKwF,OAGvDu+B,SAAU,SAAS/M,GACf,IACIuC,EADAG,EAAYl0B,KAAKmY,QAAQ+b,UAW7B,OARIA,GAAa/D,GAAuBC,IACpC2D,EAAWvC,EAAM4B,gBACVc,EAAY/D,GACnB4D,EAAWvC,EAAM8B,iBACVY,EAAY9D,KACnB2D,EAAWvC,EAAM+B,kBAGdvzB,KAAK0sB,OAAO6R,SAAS/jC,KAAKwF,KAAMwxB,IACnC0C,EAAY1C,EAAMwB,iBAClBxB,EAAMqB,SAAW7yB,KAAKmY,QAAQwmB,WAC9BnN,EAAMkC,aAAe1zB,KAAKmY,QAAQuZ,UAClChjB,EAAIqlB,GAAY/zB,KAAKmY,QAAQ4b,UAAYvC,EAAMD,UAAY3B,GAGnEqC,KAAM,SAAST,GACX,IAAI0C,EAAYqI,GAAa/K,EAAMwB,iBAC/BkB,GACAl0B,KAAKywB,QAAQwB,KAAKjyB,KAAKmY,QAAQ8lB,MAAQ/J,EAAW1C,GAGtDxxB,KAAKywB,QAAQwB,KAAKjyB,KAAKmY,QAAQ8lB,MAAOzM,MA2B9CnF,EAAQ+Q,GAAelB,GAAY,CAK/Bz/B,SAAU,CACNwhC,MAAO,MACPvM,SAAU,EACV0N,KAAM,EACNC,SAAU,IACVN,KAAM,IACNJ,UAAW,EACXW,aAAc,IAGlBpE,eAAgB,WACZ,MAAO,CAACnB,KAGZl/B,QAAS,SAAS22B,GACd,IAAIrZ,EAAUnY,KAAKmY,QAEf6mB,EAAgBxN,EAAME,SAASlxB,SAAW2X,EAAQuZ,SAClDuN,EAAgBzN,EAAMqB,SAAW1a,EAAQwmB,UACzCY,EAAiB/N,EAAMmB,UAAYxa,EAAQ4mB,KAI/C,GAFA/+B,KAAKs+B,QAEA9M,EAAMD,UAAY7B,GAAgC,IAAf1vB,KAAKu9B,MACzC,OAAOv9B,KAAKw/B,cAKhB,GAAIP,GAAiBM,GAAkBP,EAAe,CAClD,GAAIxN,EAAMD,WAAa3B,EACnB,OAAO5vB,KAAKw/B,cAGhB,IAAIC,GAAgBz/B,KAAKq9B,OAAS7L,EAAMkB,UAAY1yB,KAAKq9B,MAAQllB,EAAQknB,SACrEK,GAAiB1/B,KAAKs9B,SAAWxK,GAAY9yB,KAAKs9B,QAAS9L,EAAM/jB,QAAU0K,EAAQmnB,aAEvFt/B,KAAKq9B,MAAQ7L,EAAMkB,UACnB1yB,KAAKs9B,QAAU9L,EAAM/jB,OAEhBiyB,GAAkBD,EAGnBz/B,KAAKu9B,OAAS,EAFdv9B,KAAKu9B,MAAQ,EAKjBv9B,KAAKi9B,OAASzL,EAId,IAAImO,EAAW3/B,KAAKu9B,MAAQplB,EAAQinB,KACpC,GAAiB,IAAbO,EAGA,OAAK3/B,KAAK+9B,sBAGN/9B,KAAKg9B,OAAS/R,GAAkB,WAC5BjrB,KAAKoc,MAAQ2f,GACb/7B,KAAKm+B,YACNhmB,EAAQknB,SAAUr/B,MACd47B,IANAG,GAUnB,OAAOE,IAGXuD,YAAa,WAIT,OAHAx/B,KAAKg9B,OAAS/R,GAAkB,WAC5BjrB,KAAKoc,MAAQ6f,KACdj8B,KAAKmY,QAAQknB,SAAUr/B,MACnBi8B,IAGXqC,MAAO,WACHa,aAAan/B,KAAKg9B,SAGtB/K,KAAM,WACEjyB,KAAKoc,OAAS2f,KACd/7B,KAAKi9B,OAAO0C,SAAW3/B,KAAKu9B,MAC5Bv9B,KAAKywB,QAAQwB,KAAKjyB,KAAKmY,QAAQ8lB,MAAOj+B,KAAKi9B,YAoBvDO,GAAOoC,QAAU,QAMjBpC,GAAO/gC,SAAW,CAOdojC,WAAW,EAQX9E,YAAalB,GAMb7U,QAAQ,EASR2L,YAAa,KAObM,WAAY,KAOZwM,OAAQ,CAEJ,CAACP,GAAkB,CAAClY,QAAQ,IAC5B,CAAC8X,GAAiB,CAAC9X,QAAQ,GAAQ,CAAC,WACpC,CAACmY,GAAiB,CAACjJ,UAAW/D,KAC9B,CAACwM,GAAe,CAACzI,UAAW/D,IAAuB,CAAC,UACpD,CAACiN,IACD,CAACA,GAAe,CAACa,MAAO,YAAamB,KAAM,GAAI,CAAC,QAChD,CAACrC,KAQL+C,SAAU,CAMNC,WAAY,OAOZC,YAAa,OASbC,aAAc,OAOdC,eAAgB,OAOhBC,SAAU,OAQVC,kBAAmB,kBAI3B,IAAIC,GAAO,EACPC,GAAc,EAQlB,SAAS5C,GAAQ/O,EAASxW,GACtBnY,KAAKmY,QAAUyS,EAAO,GAAI4S,GAAO/gC,SAAU0b,GAAW,IAEtDnY,KAAKmY,QAAQwY,YAAc3wB,KAAKmY,QAAQwY,aAAehC,EAEvD3uB,KAAKugC,SAAW,GAChBvgC,KAAK+xB,QAAU,GACf/xB,KAAKg7B,YAAc,GACnBh7B,KAAKwgC,YAAc,GAEnBxgC,KAAK2uB,QAAUA,EACf3uB,KAAKwxB,MAAQT,GAAoB/wB,MACjCA,KAAK+6B,YAAc,IAAIV,GAAYr6B,KAAMA,KAAKmY,QAAQ4iB,aAEtD0F,GAAezgC,MAAM,GAErBurB,EAAKvrB,KAAKmY,QAAQ6iB,aAAa,SAAS0F,GACpC,IAAIzF,EAAaj7B,KAAK2gC,IAAI,IAAKD,EAAK,GAAIA,EAAK,KAC7CA,EAAK,IAAMzF,EAAW0C,cAAc+C,EAAK,IACzCA,EAAK,IAAMzF,EAAW4C,eAAe6C,EAAK,MAC3C1gC,MA4PP,SAASygC,GAAehQ,EAASkQ,GAC7B,IAIItS,EAJAM,EAAU8B,EAAQ9B,QACjBA,EAAQgL,QAIbpO,EAAKkF,EAAQtY,QAAQ2nB,UAAU,SAAS7iC,EAAOkG,GAC3CkrB,EAAOH,EAASS,EAAQgL,MAAOx2B,GAC3Bw9B,GACAlQ,EAAQ+P,YAAYnS,GAAQM,EAAQgL,MAAMtL,GAC1CM,EAAQgL,MAAMtL,GAAQpxB,GAEtB0xB,EAAQgL,MAAMtL,GAAQoC,EAAQ+P,YAAYnS,IAAS,MAGtDsS,IACDlQ,EAAQ+P,YAAc,KAS9B,SAASI,GAAgB3C,EAAO4C,GAC5B,IAAIC,EAAeziC,EAAS0iC,YAAY,SACxCD,EAAaE,UAAU/C,GAAO,GAAM,GACpC6C,EAAaG,QAAUJ,EACvBA,EAAKrlC,OAAO0lC,cAAcJ,GAtR9BpD,GAAQt8B,UAAY,CAMhB0e,IAAK,SAAS3H,GAaV,OAZAyS,EAAO5qB,KAAKmY,QAASA,GAGjBA,EAAQ4iB,aACR/6B,KAAK+6B,YAAYjS,SAEjB3Q,EAAQwY,cAER3wB,KAAKwxB,MAAMsD,UACX90B,KAAKwxB,MAAMh2B,OAAS2c,EAAQwY,YAC5B3wB,KAAKwxB,MAAMV,QAER9wB,MASXmhC,KAAM,SAASC,GACXphC,KAAK+xB,QAAQsP,QAAUD,EAAQd,GAAcD,IASjDnO,UAAW,SAASoH,GAChB,IAAIvH,EAAU/xB,KAAK+xB,QACnB,IAAIA,EAAQsP,QAAZ,CAOA,IAAIpG,EAFJj7B,KAAK+6B,YAAYI,gBAAgB7B,GAGjC,IAAI0B,EAAch7B,KAAKg7B,YAKnBsG,EAAgBvP,EAAQuP,gBAIvBA,GAAkBA,GAAiBA,EAAcllB,MAAQ2f,MAC1DuF,EAAgBvP,EAAQuP,cAAgB,MAG5C,IAAIx5B,EAAI,EACR,MAAOA,EAAIkzB,EAAYx6B,OACnBy6B,EAAaD,EAAYlzB,GAQrBiqB,EAAQsP,UAAYf,IACfgB,GAAiBrG,GAAcqG,IAChCrG,EAAW+C,iBAAiBsD,GAGhCrG,EAAWqD,QAFXrD,EAAW/I,UAAUoH,IAOpBgI,GAAiBrG,EAAW7e,OAASwf,GAAcC,GAAgBC,MACpEwF,EAAgBvP,EAAQuP,cAAgBrG,GAE5CnzB,MASRmZ,IAAK,SAASga,GACV,GAAIA,aAAsBiB,GACtB,OAAOjB,EAIX,IADA,IAAID,EAAch7B,KAAKg7B,YACdlzB,EAAI,EAAGA,EAAIkzB,EAAYx6B,OAAQsH,IACpC,GAAIkzB,EAAYlzB,GAAGqQ,QAAQ8lB,OAAShD,EAChC,OAAOD,EAAYlzB,GAG3B,OAAO,MASX64B,IAAK,SAAS1F,GACV,GAAI5P,EAAe4P,EAAY,MAAOj7B,MAClC,OAAOA,KAIX,IAAIuhC,EAAWvhC,KAAKihB,IAAIga,EAAW9iB,QAAQ8lB,OAS3C,OARIsD,GACAvhC,KAAKwhC,OAAOD,GAGhBvhC,KAAKg7B,YAAY/3B,KAAKg4B,GACtBA,EAAWxK,QAAUzwB,KAErBA,KAAK+6B,YAAYjS,SACVmS,GAQXuG,OAAQ,SAASvG,GACb,GAAI5P,EAAe4P,EAAY,SAAUj7B,MACrC,OAAOA,KAMX,GAHAi7B,EAAaj7B,KAAKihB,IAAIga,GAGlBA,EAAY,CACZ,IAAID,EAAch7B,KAAKg7B,YACnB74B,EAAQyrB,EAAQoN,EAAaC,IAElB,IAAX94B,IACA64B,EAAYp3B,OAAOzB,EAAO,GAC1BnC,KAAK+6B,YAAYjS,UAIzB,OAAO9oB,MASXyhC,GAAI,SAASC,EAAQxU,GACjB,GAAIwU,IAAWhiC,GAGXwtB,IAAYxtB,EAAhB,CAIA,IAAI6gC,EAAWvgC,KAAKugC,SAKpB,OAJAhV,EAAK4B,EAASuU,IAAS,SAASzD,GAC5BsC,EAAStC,GAASsC,EAAStC,IAAU,GACrCsC,EAAStC,GAAOh7B,KAAKiqB,MAElBltB,OASX2hC,IAAK,SAASD,EAAQxU,GAClB,GAAIwU,IAAWhiC,EAAf,CAIA,IAAI6gC,EAAWvgC,KAAKugC,SAQpB,OAPAhV,EAAK4B,EAASuU,IAAS,SAASzD,GACvB/Q,EAGDqT,EAAStC,IAAUsC,EAAStC,GAAOr6B,OAAOgqB,EAAQ2S,EAAStC,GAAQ/Q,GAAU,UAFtEqT,EAAStC,MAKjBj+B,OAQXiyB,KAAM,SAASgM,EAAO4C,GAEd7gC,KAAKmY,QAAQ0nB,WACbe,GAAgB3C,EAAO4C,GAI3B,IAAIN,EAAWvgC,KAAKugC,SAAStC,IAAUj+B,KAAKugC,SAAStC,GAAO5jC,QAC5D,GAAKkmC,GAAaA,EAAS//B,OAA3B,CAIAqgC,EAAK/hC,KAAOm/B,EACZ4C,EAAKxF,eAAiB,WAClBwF,EAAKjN,SAASyH,kBAGlB,IAAIvzB,EAAI,EACR,MAAOA,EAAIy4B,EAAS//B,OAChB+/B,EAASz4B,GAAG+4B,GACZ/4B,MAQRgtB,QAAS,WACL90B,KAAK2uB,SAAW8R,GAAezgC,MAAM,GAErCA,KAAKugC,SAAW,GAChBvgC,KAAK+xB,QAAU,GACf/xB,KAAKwxB,MAAMsD,UACX90B,KAAK2uB,QAAU,OAyCvB/D,EAAO4S,GAAQ,CACX9N,YAAaA,EACbC,WAAYA,EACZC,UAAWA,EACXC,aAAcA,EAEd8L,eAAgBA,GAChBC,YAAaA,GACbC,cAAeA,GACfC,YAAaA,GACbC,iBAAkBA,GAClBC,gBAAiBA,GACjBC,aAAcA,GAEdnM,eAAgBA,EAChBC,eAAgBA,EAChBC,gBAAiBA,EACjBC,aAAcA,EACdC,eAAgBA,GAChBC,qBAAsBA,GACtBC,mBAAoBA,GACpBC,cAAeA,GAEfqN,QAASA,GACTlN,MAAOA,GACP6J,YAAaA,GAEblJ,WAAYA,GACZE,WAAYA,GACZH,kBAAmBA,GACnBE,gBAAiBA,GACjBkG,iBAAkBA,GAElB4E,WAAYA,GACZQ,eAAgBA,GAChBkF,IAAKxE,GACLyE,IAAKlF,GACLmF,MAAO3E,GACP4E,MAAOjF,GACPkF,OAAQ9E,GACR+E,MAAOlF,GAEP0E,GAAIzU,EACJ2U,IAAKvU,EACL7B,KAAMA,EACNa,MAAOA,EACPF,OAAQA,EACRtB,OAAQA,EACRyB,QAASA,EACTjB,OAAQA,EACR8C,SAAUA,IAKd,IAAIgU,GAAgC,qBAAXnoC,EAAyBA,EAA0B,qBAATqE,KAAuBA,KAAO,GACjG8jC,GAAW1E,OAASA,GAGhB,aACI,OAAOA,IACV,oCAtkFL,CA6kFGzjC,OAAQsE,W,4GC/kFI,MAAM,UAAe,OAClC,eAEE,OADA,OAAAkJ,EAAA,OAAO,GACA,EAGT,KAAKsL,GAEH,OADA,OAAAtL,EAAA,OAAO,GACAvH,KAGT,QACE,OAAOA,KAAK,GAGd,MAAM/C,GACJ+C,KAAK,GAAK,eAAY/C,GAGxB,QACE,OAAO+C,KAAK,GAGd,MAAM/C,GACJ+C,KAAK,GAAK,eAAY/C,GAGxB,MACE,OAAOoF,KAAK2E,KAAKhH,KAAKmiC,iBAGxB,YACE,OAAOniC,KAAKsL,MAGd,gBACE,IAAI9K,EAAS,EAEb,IAAK,IAAIsH,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnCtH,GAAUR,KAAK8H,GAAK9H,KAAK8H,GAG3B,OAAOtH,EAGT,mBACE,OAAOR,KAAKmiC,gBAGd,SAASC,GACP,OAAO//B,KAAK2E,KAAKhH,KAAKqiC,gBAAgBD,IAGxC,gBAAgBA,GACd,IAAI5hC,EAAS,EAEb,IAAK,IAAIsH,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EAAG,CACtC,MAAMw6B,EAAOtiC,KAAK8H,GAAKs6B,EAAUt6B,GACjCtH,GAAU8hC,EAAOA,EAGnB,OAAO,eAAY9hC,GAGrB,IAAI4hC,GACF,IAAIG,EAAU,EAEd,IAAK,IAAIz6B,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnCy6B,GAAWviC,KAAK8H,GAAKs6B,EAAUt6B,GAGjC,OAAO,eAAYy6B,GAGrB,YACE,MAAM/hC,EAASR,KAAKwiC,YAEpB,GAAe,IAAXhiC,EACF,IAAK,IAAIsH,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC9H,KAAK8H,IAAMtH,EAIf,OAAOR,KAAKoQ,QAGd,YAAYqyB,GACV,IAAK,MAAM5vB,KAAU4vB,EACnB,IAAK,IAAI36B,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC9H,KAAK8H,IAAM+K,EAAO/K,GAItB,OAAO9H,KAAKoQ,QAGd,UAAUqyB,GACR,IAAK,MAAM5vB,KAAU4vB,EACnB,IAAK,IAAI36B,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC9H,KAAK8H,IAAM+K,EAAO/K,GAItB,OAAO9H,KAAKoQ,QAGd,WACE,OAAOpQ,KAAKmiC,gBAGd,WAAWtvB,GACT,OAAO7S,KAAK6yB,SAAShgB,GAGvB,kBAAkBA,GAChB,OAAO7S,KAAKqiC,gBAAgBxvB,GAG9B,aAAa/K,GAEX,OADA,OAAAP,EAAA,MAAOO,GAAK,GAAKA,EAAI9H,KAAK+H,SAAU,yBAC7B,eAAY/H,KAAK8H,IAG1B,aAAaA,EAAG7K,GAGd,OAFA,OAAAsK,EAAA,MAAOO,GAAK,GAAKA,EAAI9H,KAAK+H,SAAU,yBACpC/H,KAAK8H,GAAK7K,EACH+C,KAAKoQ,QAGd,WAAW3L,EAAGC,GACZ,OAAO1E,KAAKmQ,KAAK1L,GAAGk8B,IAAIj8B,GAG1B,WAAWD,EAAGC,GACZ,OAAO1E,KAAKmQ,KAAK1L,GAAGi+B,SAASh+B,GAG/B,gBAAgBD,EAAGC,GACjB,OAAO1E,KAAKmQ,KAAK1L,GAAG6F,SAAS5F,GAG/B,gBAAgBD,EAAGC,GACjB,OAAO1E,KAAK2gC,IAAI,IAAI3gC,KAAKmb,YAAY1W,GAAGk+B,eAAej+B,K,wCC5I3D,MAAMk+B,EAAS,CAAC,EAAG,EAAG,GAChB7yB,EAAY,GACH,MAAM,UAAgB,EACnC,kBACE,OAAOA,EAAUlB,KAAOkB,EAAUlB,MAAQ7U,OAAO4U,OAAO,IAAI,EAAQ,EAAG,EAAG,EAAG,IAG/E,YAAYxJ,EAAI,EAAGC,EAAI,EAAGC,EAAI,GAC5B2K,OAAO,GAAI,GAAI,GAEU,IAArB/N,UAAU1B,QAAgB,eAAQ4E,GACpCpF,KAAKmQ,KAAK/K,IAEN,OAAOsV,QACT,eAAYtV,GACZ,eAAYC,GACZ,eAAYC,IAGdtF,KAAK,GAAKoF,EACVpF,KAAK,GAAKqF,EACVrF,KAAK,GAAKsF,GAId,IAAIF,EAAGC,EAAGC,GAIR,OAHAtF,KAAK,GAAKoF,EACVpF,KAAK,GAAKqF,EACVrF,KAAK,GAAKsF,EACHtF,KAAKoQ,QAGd,KAAKJ,GAIH,OAHAhQ,KAAK,GAAKgQ,EAAM,GAChBhQ,KAAK,GAAKgQ,EAAM,GAChBhQ,KAAK,GAAKgQ,EAAM,GACThQ,KAAKoQ,QAGd,WAAWyyB,GAUT,OATI,OAAOnoB,QACT,eAAYmoB,EAAOz9B,GACnB,eAAYy9B,EAAOx9B,GACnB,eAAYw9B,EAAOv9B,IAGrBtF,KAAK,GAAK6iC,EAAOz9B,EACjBpF,KAAK,GAAK6iC,EAAOx9B,EACjBrF,KAAK,GAAK6iC,EAAOv9B,EACVtF,KAAKoQ,QAGd,SAASyyB,GAIP,OAHAA,EAAOz9B,EAAIpF,KAAK,GAChB6iC,EAAOx9B,EAAIrF,KAAK,GAChB6iC,EAAOv9B,EAAItF,KAAK,GACT6iC,EAGT,eACE,OAAO,EAGT,QACE,OAAO7iC,KAAK,GAGd,MAAM/C,GACJ+C,KAAK,GAAK,eAAY/C,GAGxB,MAAM4V,GACJ,OAAOE,EAAA,KAAW/S,KAAM6S,GAG1B,MAAMA,GAEJ,OADAE,EAAA,KAAW/S,KAAMA,KAAM6S,GAChB7S,KAAKoQ,QAGd,SAAQ,QACNoC,EAAO,OACPswB,EAASF,IAGT,OADA7vB,EAAA,KAAa/S,KAAMA,KAAM8iC,EAAQtwB,GAC1BxS,KAAKoQ,QAGd,SAAQ,QACNoC,EAAO,OACPswB,EAASF,IAGT,OADA7vB,EAAA,KAAa/S,KAAMA,KAAM8iC,EAAQtwB,GAC1BxS,KAAKoQ,QAGd,SAAQ,QACNoC,EAAO,OACPswB,EAASF,IAGT,OADA7vB,EAAA,KAAa/S,KAAMA,KAAM8iC,EAAQtwB,GAC1BxS,KAAKoQ,QAGd,UAAU2yB,GACR,OAAO/iC,KAAK8S,iBAAiBiwB,GAG/B,iBAAiBA,GAEf,OADAhwB,EAAA,KAAmB/S,KAAMA,KAAM+iC,GACxB/iC,KAAKoQ,QAGd,kBAAkB2yB,GAEhB,OADA,eAA2B/iC,KAAMA,KAAM+iC,GAChC/iC,KAAKoQ,QAGd,mBAAmB4yB,GAEjB,OADAjwB,EAAA,KAAmB/S,KAAMA,KAAMgjC,GACxBhjC,KAAKoQ,QAGd,mBAAmB6yB,GAEjB,OADA,eAAmBjjC,KAAMA,KAAMijC,GACxBjjC,KAAKoQ,QAGd,sBAAsB8yB,GAEpB,OADAnwB,EAAA,KAAmB/S,KAAMA,KAAMkjC,GACxBljC,KAAKoQ,W,kCCrIhB,IAAIrT,EAAyB,EAAQ,QAEjCie,EAAU,EAAQ,QAEtBhhB,OAAOgD,eAAezC,EAAS,aAAc,CAC3C0C,OAAO,IAETjD,OAAOgD,eAAezC,EAAS,OAAQ,CACrConB,YAAY,EACZV,IAAK,WACH,OAAO5jB,EAASe,QAGpBpE,OAAOgD,eAAezC,EAAS,SAAU,CACvConB,YAAY,EACZV,IAAK,WACH,OAAO5jB,EAAStD,UAGpBC,OAAOgD,eAAezC,EAAS,SAAU,CACvConB,YAAY,EACZV,IAAK,WACH,OAAO5jB,EAAS1B,UAGpB3B,OAAOgD,eAAezC,EAAS,WAAY,CACzConB,YAAY,EACZV,IAAK,WACH,OAAO5jB,EAASgB,YAGpBrE,OAAOgD,eAAezC,EAAS,UAAW,CACxConB,YAAY,EACZV,IAAK,WACH,OAAO5jB,EAASxC,WAGpBb,OAAOgD,eAAezC,EAAS,UAAW,CACxConB,YAAY,EACZV,IAAK,WACH,OAAO5jB,EAASgC,WAGpBrF,OAAOgD,eAAezC,EAAS,YAAa,CAC1ConB,YAAY,EACZV,IAAK,WACH,OAAO3jB,EAAWH,WAGtBnD,OAAOgD,eAAezC,EAAS,sBAAuB,CACpDonB,YAAY,EACZV,IAAK,WACH,OAAO3jB,EAAWmtB,uBAGtBzwB,OAAOgD,eAAezC,EAAS,aAAc,CAC3ConB,YAAY,EACZV,IAAK,WACH,OAAOkiB,EAAYhmC,WAGvBnD,OAAOgD,eAAezC,EAAS,WAAY,CACzConB,YAAY,EACZV,IAAK,WACH,OAAOkiB,EAAYjmC,YAGvBlD,OAAOgD,eAAezC,EAAS,aAAc,CAC3ConB,YAAY,EACZV,IAAK,WACH,OAAO1jB,EAAYJ,WAIvB,IAAIE,EAAW,EAAQ,QAEnBC,EAAa8lC,EAAwB,EAAQ,SAE7CD,EAAcC,EAAwB,EAAQ,SAE9C7lC,EAAcR,EAAuB,EAAQ,SAEjD,SAASsmC,EAAyBC,GAAe,GAAuB,oBAAZC,QAAwB,OAAO,KAAM,IAAIC,EAAoB,IAAID,QAAeE,EAAmB,IAAIF,QAAW,OAAQF,EAA2B,SAAkCC,GAAe,OAAOA,EAAcG,EAAmBD,IAAsBF,GAEhU,SAASF,EAAwBrrB,EAAKurB,GAAe,IAAKA,GAAevrB,GAAOA,EAAIC,WAAc,OAAOD,EAAO,GAAY,OAARA,GAAiC,WAAjBiD,EAAQjD,IAAoC,oBAARA,EAAsB,MAAO,CAAE5a,QAAS4a,GAAS,IAAIoE,EAAQknB,EAAyBC,GAAc,GAAInnB,GAASA,EAAMunB,IAAI3rB,GAAQ,OAAOoE,EAAM8E,IAAIlJ,GAAQ,IAAI4rB,EAAS,GAAQC,EAAwB5pC,OAAOgD,gBAAkBhD,OAAOkpB,yBAA0B,IAAK,IAAI/mB,KAAO4b,EAAO,GAAY,YAAR5b,GAAqBnC,OAAOoH,UAAUoqB,eAAehxB,KAAKud,EAAK5b,GAAM,CAAE,IAAI0nC,EAAOD,EAAwB5pC,OAAOkpB,yBAAyBnL,EAAK5b,GAAO,KAAU0nC,IAASA,EAAK5iB,KAAO4iB,EAAK/jB,KAAQ9lB,OAAOgD,eAAe2mC,EAAQxnC,EAAK0nC,GAAgBF,EAAOxnC,GAAO4b,EAAI5b,GAAyE,OAA7DwnC,EAAOxmC,QAAU4a,EAASoE,GAASA,EAAM2D,IAAI/H,EAAK4rB,GAAkBA,I,qBCtF7xB,IAAItkB,EAAwB,EAAQ,QAIpCA,EAAsB,a,6ICHfykB,MAAM,iC,0cAYJ3H,GAAG,iB,uBACN,eAAsC,MAAlC2H,MAAM,MAAK,sBAAkB,M,GAC5BA,MAAM,Q,GACJA,MAAM,gC,uBAST,eAAuD,SAAhDA,MAAM,mBAAmBC,IAAI,QAAO,QAAI,M,GAE5CD,MAAM,gC,uBAST,eAAqD,SAA9CA,MAAM,mBAAmBC,IAAI,OAAM,OAAG,M,gyBA2C9Crc,IAAI,WAAWoc,MAAM,W,gDA9E5B,eA+EM,MA/EN,EA+EM,CA9EJ,EAWA,eAiEM,MAjEN,EAiEM,CAhEJ,EACA,eAuBM,MAvBN,EAuBM,CAtBJ,eAUM,MAVN,EAUM,C,eATJ,eAOE,SANAA,MAAM,mBACNhlC,KAAK,QACLq9B,GAAG,OACHh5B,KAAK,UACLlG,MAAM,O,qDACG,EAAA+mC,QAAO,K,mBAAP,EAAAA,WAEX,IAEF,eAUM,MAVN,EAUM,C,eATJ,eAOE,SANAF,MAAM,mBACNhlC,KAAK,QACLq9B,GAAG,MACHh5B,KAAK,UACLlG,MAAM,M,qDACG,EAAA+mC,QAAO,K,mBAAP,EAAAA,WAEX,MAGJ,IAwCF,eAA0C,MAA1C,EAA0C,YC/E/B,SAASC,EAAgBlsB,EAAK5b,EAAKc,GAYhD,OAXId,KAAO4b,EACT/d,OAAOgD,eAAe+a,EAAK5b,EAAK,CAC9Bc,MAAOA,EACP0kB,YAAY,EACZa,cAAc,EACd0hB,UAAU,IAGZnsB,EAAI5b,GAAOc,EAGN8a,E,uDCZT,IAAIosB,EAAiB,EACjBC,EAAmB,EAChB,MAAMC,EACX,cACErkC,KAAK++B,KAAO,EACZ/+B,KAAKskC,SAAW,IAAIC,IACpBvkC,KAAKwkC,WAAa,IAAID,IACtBvkC,KAAKykC,SAAU,EACfzkC,KAAK0kC,gBAAkB,EAGzB,WAAWjQ,GACT,MAAM,MACJkQ,EAAQ,EAAC,SACTC,EAAWpqB,OAAOqqB,kBAAiB,KACnCC,EAAO,EAAC,OACRC,EAAS,GACPtQ,EACE/e,EAASyuB,IACTa,EAAU,CACdjG,KAAM,EACN4F,QACAC,WACAE,OACAC,UAMF,OAHA/kC,KAAKilC,gBAAgBD,EAAShlC,KAAK++B,MAEnC/+B,KAAKskC,SAASxkB,IAAIpK,EAAQsvB,GACnBtvB,EAGT,cAAcA,GACZ1V,KAAKskC,SAASY,OAAOxvB,GAErB,IAAK,MAAOyvB,EAAiBC,KAAcplC,KAAKwkC,WAC1CY,EAAUJ,UAAYtvB,GACxB1V,KAAKqlC,gBAAgBF,GAK3B,WAAWzvB,GACT,MAAMsvB,EAAUhlC,KAAKskC,SAASrjB,IAAIvL,GAElC,YAAgBhW,IAAZslC,GAIGhlC,KAAK++B,MAAQiG,EAAQL,MAAQK,EAAQJ,SAAWI,EAAQD,OAGjE,QAAQrvB,GACN,QAAehW,IAAXgW,EACF,OAAO1V,KAAK++B,KAGd,MAAMiG,EAAUhlC,KAAKskC,SAASrjB,IAAIvL,GAElC,YAAgBhW,IAAZslC,GACM,EAGHA,EAAQjG,KAGjB,QAAQA,GACN/+B,KAAK++B,KAAO18B,KAAKC,IAAI,EAAGy8B,GACxB,MAAMuF,EAAWtkC,KAAKskC,SAASvoB,SAE/B,IAAK,MAAMipB,KAAWV,EACpBtkC,KAAKilC,gBAAgBD,EAAShlC,KAAK++B,MAGrC,MAAMyF,EAAaxkC,KAAKwkC,WAAWzoB,SAEnC,IAAK,MAAMupB,KAAiBd,EAAY,CACtC,MAAM,UACJY,EAAS,QACTJ,GACEM,EACJF,EAAUG,QAAQvlC,KAAKwlC,QAAQR,KAInC,OACEhlC,KAAKykC,SAAU,EAGjB,QACEzkC,KAAKykC,SAAU,EACfzkC,KAAK0kC,gBAAkB,EAGzB,QACE1kC,KAAKulC,QAAQ,GAGf,gBAAgBH,EAAWK,GACzB,MAAMN,EAAkBf,IAMxB,OALApkC,KAAKwkC,WAAW1kB,IAAIqlB,EAAiB,CACnCC,YACAJ,QAASS,IAEXL,EAAUG,QAAQvlC,KAAKwlC,QAAQC,IACxBN,EAGT,gBAAgBzvB,GACd1V,KAAKwkC,WAAWU,OAAOxvB,GAGzB,OAAOgwB,GACD1lC,KAAKykC,WACsB,IAAzBzkC,KAAK0kC,iBACP1kC,KAAK0kC,eAAiBgB,GAGxB1lC,KAAKulC,QAAQvlC,KAAK++B,MAAQ2G,EAAa1lC,KAAK0kC,iBAC5C1kC,KAAK0kC,eAAiBgB,GAI1B,gBAAgBV,EAASjG,GACvB,MAAM4G,EAAa5G,EAAOiG,EAAQL,MAC5BiB,EAAgBZ,EAAQJ,SAAWI,EAAQD,OAE7CY,GAAcC,EAChBZ,EAAQjG,KAAOiG,EAAQJ,SAAWI,EAAQF,MAE1CE,EAAQjG,KAAO18B,KAAKC,IAAI,EAAGqjC,GAAcX,EAAQJ,SACjDI,EAAQjG,MAAQiG,EAAQF,OCpIvB,MAAMe,EAAY,CACvBC,SAAU,iBACVC,QAAS,iDACTC,YAAa,cACbC,YAAa,yCACbC,sBAAuB,iDACvBC,UAAW,0CAEAC,EAAe,CAC1BC,UAAWprB,OAAO8oB,IAAI,aACtBuC,eAAgBrrB,OAAO8oB,IAAI,qBAC3BwC,eAAgBtrB,OAAO8oB,IAAI,qBAC3ByC,eAAgBvrB,OAAO8oB,IAAI,sB,gBCVtB,MAAMnE,EAAiC,qBAAhB6G,YAA8BA,YAAc,sBAC7DnoC,EAAY,iBCHzB,SAASooC,EAAW5nC,GAClB,IACE,MAAM6nC,EAAU5sC,OAAO+E,GACjBsG,EAAI,mBAGV,OAFAuhC,EAAQC,QAAQxhC,EAAGA,GACnBuhC,EAAQE,WAAWzhC,GACZuhC,EACP,MAAO/a,GACP,OAAO,MAII,MAAMkb,EACnB,YAAY3K,EAAI4K,EAAiBjoC,EAAO,kBACtCkB,KAAK2mC,QAAUD,EAAW5nC,GAC1BkB,KAAKm8B,GAAKA,EACVn8B,KAAKsY,OAAS,GACdte,OAAO4wB,OAAO5qB,KAAKsY,OAAQyuB,GAE3B/mC,KAAKgnC,qBAGP,mBACE,OAAOhnC,KAAKsY,OAGd,iBAAiB2uB,GAEf,OADAjnC,KAAKsY,OAAS,GACPtY,KAAKknC,oBAAoBD,GAGlC,oBAAoBA,GAGlB,GAFAjtC,OAAO4wB,OAAO5qB,KAAKsY,OAAQ2uB,GAEvBjnC,KAAK2mC,QAAS,CAChB,MAAMQ,EAAaC,KAAK/jB,UAAUrjB,KAAKsY,QACvCtY,KAAK2mC,QAAQC,QAAQ5mC,KAAKm8B,GAAIgL,GAGhC,OAAOnnC,KAGT,qBACE,IAAIinC,EAAgB,GAEpB,GAAIjnC,KAAK2mC,QAAS,CAChB,MAAMU,EAA0BrnC,KAAK2mC,QAAQW,QAAQtnC,KAAKm8B,IAC1D8K,EAAgBI,EAA0BD,KAAKG,MAAMF,GAA2B,GAIlF,OADArtC,OAAO4wB,OAAO5qB,KAAKsY,OAAQ2uB,GACpBjnC,MCnDJ,SAASwnC,EAAWC,GACzB,IAAIC,EAYJ,OATEA,EADED,EAAK,GACK,GAAG5/B,OAAO4/B,EAAGE,QAAQ,GAAI,MAC5BF,EAAK,IACF,GAAG5/B,OAAO4/B,EAAGE,QAAQ,GAAI,MAC5BF,EAAK,IACF,GAAG5/B,OAAO4/B,EAAGE,QAAQ,GAAI,MAEzB,GAAG9/B,QAAQ4/B,EAAK,KAAME,QAAQ,GAAI,KAGzCD,EAEF,SAASE,EAAQpgC,EAAQhH,EAAS,GACvC,MAAMqnC,EAAYxlC,KAAKC,IAAI9B,EAASgH,EAAOhH,OAAQ,GACnD,MAAO,GAAGqH,OAAO,IAAIk9B,OAAO8C,IAAYhgC,OAAOL,GAwD1C,SAASsgC,EAAYC,EAAOvvB,EAASrG,EAAO61B,EAAW,KAC5D,MAAMC,EAAWF,EAAM3e,IAAIlQ,QAAQ,MAAO,OAAOA,QAAQ,MAAO,OAE5D6uB,EAAMje,MAAQke,IAChB71B,EAAQ9P,KAAKgF,IAAI8K,EAAO61B,EAAWD,EAAMje,QAG3C,MAAMA,EAAQie,EAAMje,MAAQ3X,EACtB6X,EAAS+d,EAAM/d,OAAS7X,EACxBwnB,EAAQ,CAAC,iBAAkB,WAAW9xB,OAAOxF,KAAK6lC,MAAMle,EAAS,GAAI,OAAOniB,OAAOxF,KAAK6lC,MAAMpe,EAAQ,GAAI,OAAQ,eAAejiB,OAAOmiB,EAAQ,OAAQ,kBAAkBniB,OAAOogC,EAAU,MAAO,mBAAmBpgC,OAAOiiB,EAAO,OAAOjiB,OAAOmiB,EAAQ,OAAQ,sBAAsB3oB,KAAK,IAClS,MAAO,CAAC,GAAGwG,OAAO2Q,EAAS,QAASmhB,GClF/B,MAAMwO,EAAQ,CACnBC,MAAO,GACPC,IAAK,GACLC,MAAO,GACPC,OAAQ,GACRC,KAAM,GACNC,QAAS,GACTC,KAAM,GACNC,MAAO,GACPC,aAAc,GACdC,WAAY,GACZC,aAAc,GACdC,cAAe,GACfC,YAAa,GACbC,eAAgB,GAChBC,YAAa,GACbC,aAAc,IAGhB,SAASC,EAASC,GAChB,MAAwB,kBAAVA,EAAqBlB,EAAMkB,EAAM9a,gBAAkB4Z,EAAMQ,MAAQU,EAG1E,SAASC,EAAS9hC,EAAQ6hC,EAAOE,GAatC,OAZKjrC,GAA+B,kBAAXkJ,IACnB6hC,IACFA,EAAQD,EAASC,GACjB7hC,EAAS,KAAQK,OAAOwhC,EAAO,KAAKxhC,OAAOL,EAAQ,UAGjD+hC,IACFF,EAAQD,EAASG,GACjB/hC,EAAS,KAAQK,OAAO0hC,EAAa,GAAI,KAAK1hC,OAAOL,EAAQ,WAI1DA,ECrCF,SAASgiC,EAASzxB,EAAK0xB,EAAa,CAAC,gBAC1C,MAAMC,EAAQ1vC,OAAO2vC,eAAe5xB,GAC9B6xB,EAAY5vC,OAAOC,oBAAoByvC,GAE7C,IAAK,MAAMvtC,KAAOytC,EACQ,oBAAb7xB,EAAI5b,KACRstC,EAAW9b,KAAKxqB,GAAQhH,IAAQgH,KACnC4U,EAAI5b,GAAO4b,EAAI5b,GAAKE,KAAK0b,KCPlB,SAASxQ,EAAOgR,EAAWC,GACxC,IAAKD,EACH,MAAM,IAAIxG,MAAMyG,GAAW,oB,gBCDhB,SAAS/d,IACtB,IAAIC,EAEJ,GAAI4D,GAAa,OAAO3D,YACtBD,EAAY,OAAOC,YAAYC,WAC1B,GAAI,OAAQE,OAAQ,CACzB,MAAMC,EAAY,OAAQD,SAC1BJ,EAA2B,IAAfK,EAAU,GAAYA,EAAU,GAAK,SAEjDL,EAAYM,KAAKJ,MAGnB,OAAOF,ECNT,MAAMmvC,EAAkB,CACtBnvB,MAAOpc,GAAYe,QAAQqb,OAAuBrb,QAAQC,IAC1DA,IAAKD,QAAQC,IACbwqC,KAAMzqC,QAAQyqC,KACdhe,KAAMzsB,QAAQysB,KACd1xB,MAAOiF,QAAQjF,OAEX2vC,EAAmB,CACvBnpC,SAAS,EACTopC,MAAO,GAGT,SAASC,KAET,MAAM,EAAQ,GACRC,EAAO,CACXC,MAAM,GAGR,SAASC,EAAeC,GACtB,IAAK,MAAMluC,KAAOkuC,EAChB,IAAK,MAAMxzB,KAASwzB,EAAMluC,GACxB,OAAO0a,GAAS,WAIpB,MAAO,QAGM,MAAM,EACnB,aAAY,GACVslB,GACE,CACFA,GAAI,KAEJn8B,KAAKm8B,GAAKA,EACVn8B,KAAK4/B,QAAUA,EACf5/B,KAAKsqC,SAAW7vC,IAChBuF,KAAKuqC,SAAW9vC,IAChBuF,KAAKwqC,qBAAuB,EAC5BxqC,KAAKyqC,SAAW,IAAI3D,EAAa,WAAWj/B,OAAO7H,KAAKm8B,GAAI,MAAO4N,GACnE/pC,KAAK0qC,SAAW,GAChB1qC,KAAK0yB,UAAU,GAAG7qB,OAAO7H,KAAKm8B,GAAI,aAClCqN,EAASxpC,MACThG,OAAO2wC,KAAK3qC,MAGd,UAAU4qC,GACR5qC,KAAK6qC,SAASD,GAGhB,YACE,OAAO5qC,KAAK8qC,WAGd,YACE,OAAO9qC,KAAKyqC,SAASnyB,OAAO1X,QAG9B,WACE,OAAOZ,KAAKyqC,SAASnyB,OAAO0xB,MAG9B,WACE,OAAOxvB,QAAQ/f,IAAsBuF,KAAKsqC,UAAU5wB,YAAY,KAGlE,WACE,OAAOc,QAAQ/f,IAAsBuF,KAAKuqC,UAAU7wB,YAAY,KAGlE,aAAaqxB,GACX/qC,KAAKgqC,MAAQe,EAGf,eACE,OAAO/qC,KAAKgqC,MAGd,cACE,OAAOhqC,KAAKgqC,MAGd,OAAOppC,GAAU,GAKf,OAJAZ,KAAKyqC,SAASvD,oBAAoB,CAChCtmC,YAGKZ,KAGT,SAASgqC,GAKP,OAJAhqC,KAAKyqC,SAASvD,oBAAoB,CAChC8C,UAGKhqC,KAGT,OAAOuY,EAAWC,GAChBjR,EAAOgR,EAAWC,GAGpB,KAAKA,GACH,OAAOxY,KAAKgrC,gBAAgB,EAAGxyB,EAASqxB,EAAgB/d,KAAM5pB,UAAWgoC,GAG3E,MAAM1xB,GACJ,OAAOxY,KAAKgrC,gBAAgB,EAAGxyB,EAASqxB,EAAgBzvC,MAAO8H,WAGjE,WAAW+oC,EAAUC,GACnB,OAAOlrC,KAAK8rB,KAAK,IAAIjkB,OAAOojC,EAAU,iEAAiEpjC,OAAOqjC,EAAU,cAG1H,QAAQD,EAAUC,GAChB,OAAOlrC,KAAK5F,MAAM,IAAIyN,OAAOojC,EAAU,6BAA6BpjC,OAAOqjC,EAAU,cAGvF,MAAMC,EAAU3yB,GACd,OAAOxY,KAAKgrC,gBAAgBG,EAAU3yB,EAASqxB,EAAgBvqC,IAAK4C,UAAW,CAC7E68B,MAAM,EACNoL,MAAM,IAIV,IAAIgB,EAAU3yB,GACZ,OAAOxY,KAAKgrC,gBAAgBG,EAAU3yB,EAASqxB,EAAgBnvB,MAAOxY,WAGxE,KAAKipC,EAAU3yB,GACb,OAAOxY,KAAKgrC,gBAAgBG,EAAU3yB,EAASnZ,QAAQyqC,KAAM5nC,WAG/D,KAAKipC,EAAU3yB,GACb,OAAOxY,KAAKgrC,gBAAgBG,EAAU3yB,EAASqxB,EAAgBnvB,OAASmvB,EAAgBC,KAAM5nC,UAAWgoC,GAG3G,MAAMiB,EAAUd,EAAOe,GACrB,OAAIf,EACKrqC,KAAKgrC,gBAAgBG,EAAUd,EAAOhrC,QAAQgrC,OAASJ,EAAMmB,GAAW,CAACA,GAAU,CACxF7pB,IAAK6oB,EAAeC,KAIjBJ,EAGT,OAAM,SACJkB,EAAQ,SACRE,EAAQ,MACRtD,EAAK,QACLvvB,EAAU,GAAE,MACZrG,EAAQ,IAER,OAAKnS,KAAKsrC,WAAWH,GAAYE,GAI1B/sC,EAAYitC,EAAkB,CACnCxD,QACAvvB,UACArG,UACGq5B,EAAe,CAClBzD,QACAvvB,UACArG,UAVO83B,EAcX,WACM5qC,QAAQgrC,MACVhrC,QAAQgrC,MAAMrqC,KAAKyqC,SAASnyB,QAE5BjZ,QAAQC,IAAIU,KAAKyqC,SAASnyB,QAI9B,IAAImzB,GACF,OAAOzrC,KAAKyqC,SAASnyB,OAAOmzB,GAG9B,IAAIA,EAASxuC,GACX+C,KAAKyqC,SAASvD,oBAAoB,CAChC,CAACuE,GAAUxuC,IAIf,KAAKkuC,EAAU3yB,GACb,OAAOxY,KAAKgrC,gBAAgBG,EAAU3yB,EAASnZ,QAAQ0/B,KAAO1/B,QAAQ0/B,KAAO1/B,QAAQyqC,MAGvF,QAAQqB,EAAU3yB,GAChB,OAAOxY,KAAKgrC,gBAAgBG,EAAU3yB,EAASnZ,QAAQqsC,QAAUrsC,QAAQqsC,QAAUrsC,QAAQyqC,MAG7F,UAAUqB,EAAU3yB,GAClB,OAAOxY,KAAKgrC,gBAAgBG,EAAU3yB,EAASnZ,QAAQqzB,WAAauX,GAGtE,MAAMkB,EAAU3yB,EAASmzB,EAAO,CAC9BC,WAAW,IAEXD,EAAOE,EAAmB,CACxBV,WACA3yB,UACAmzB,SAEF,MAAM,UACJC,GACED,EAEJ,OADAA,EAAKjgB,QAAUkgB,EAAYvsC,QAAQysC,eAAiBzsC,QAAQ0sC,QAAU1sC,QAAQyqC,KACvE9pC,KAAKgrC,gBAAgBW,GAG9B,eAAeR,EAAU3yB,EAASmzB,EAAO,IACvC,OAAO3rC,KAAK+rC,MAAMZ,EAAU3yB,EAASxe,OAAO4wB,OAAO,GAAI+gB,EAAM,CAC3DC,WAAW,KAIf,SAAST,GACP,OAAOnrC,KAAKgrC,gBAAgBG,EAAU,GAAI9rC,QAAQ2sC,UAAY/B,GAGhE,UAAUkB,EAAU3yB,EAASyB,GAC3Bja,KAAK+rC,MAAMZ,EAAU3yB,EAArBxY,GAEA,IACEia,IACA,QACAja,KAAKgsC,SAASb,EAAdnrC,IAIJ,QACMX,QAAQ4sC,OACV5sC,QAAQ4sC,QAIZ,WAAWd,GACT,OAAOnrC,KAAKoqB,aAAepqB,KAAK8qC,YAAcoB,EAAkBf,GAGlE,gBAAgBA,EAAU3yB,EAASkT,EAAQ5uB,EAAO,GAAI6uC,GACpD,GAAI3rC,KAAKsrC,WAAWH,GAAW,CAC7BQ,EAAOE,EAAmB,CACxBV,WACA3yB,UACA1b,OACA6uC,SAEFjgB,EAASA,GAAUigB,EAAKjgB,OACxBnkB,EAAOmkB,GACPigB,EAAKQ,MAAQnsC,KAAKosC,WAClBT,EAAKU,MAAQrsC,KAAKssC,WAClBtsC,KAAKuqC,SAAW9vC,IAChB,MAAM8mB,EAAMoqB,EAAKpqB,KAAOoqB,EAAKnzB,QAE7B,GAAImzB,EAAKxB,KAAM,CACb,GAAK,EAAM5oB,GAGT,OAAO0oB,EAFP,EAAM1oB,GAAO9mB,IAOjB,OADA+d,EAAU+zB,EAAgBvsC,KAAKm8B,GAAIwP,EAAKnzB,QAASmzB,GAC1CjgB,EAAOrvB,KAAKgD,QAASmZ,KAAYmzB,EAAK7uC,MAG/C,OAAOmtC,GAMX,SAASiC,EAAkBf,GACzB,IAAKA,EACH,OAAO,EAGT,IAAIqB,EAEJ,cAAerB,GACb,IAAK,SACHqB,EAAgBrB,EAChB,MAEF,IAAK,SACHqB,EAAgBrB,EAASA,UAAYA,EAASE,UAAY,EAC1D,MAEF,QACE,OAAO,EAIX,OADA9jC,EAAOiT,OAAOC,SAAS+xB,IAAkBA,GAAiB,GACnDA,EAGF,SAASX,EAAmBF,GACjC,MAAM,SACJR,EAAQ,QACR3yB,GACEmzB,EACJA,EAAKR,SAAWe,EAAkBf,GAClC,MAAMruC,EAAO6uC,EAAK7uC,KAAOuD,MAAMosC,KAAKd,EAAK7uC,MAAQ,GAEjD,MAAOA,EAAK0D,QAAU1D,EAAK0Z,UAAYgC,GAIvC,OAFAmzB,EAAK7uC,KAAOA,SAEGquC,GACb,IAAK,SACL,IAAK,gBACazrC,IAAZ8Y,GACF1b,EAAK4vC,QAAQl0B,GAGfmzB,EAAKnzB,QAAU2yB,EACf,MAEF,IAAK,SACHnxC,OAAO4wB,OAAO+gB,EAAMR,GACpB,MAEF,SAG0B,oBAAjBQ,EAAKnzB,UACdmzB,EAAKnzB,QAAUmzB,EAAKnzB,WAGtB,MAAMm0B,SAAqBhB,EAAKnzB,QAEhC,OADAjR,EAAuB,WAAhBolC,GAA4C,WAAhBA,GAC5B3yC,OAAO4wB,OAAO+gB,EAAMA,EAAKA,MAGlC,SAASY,EAAgBpQ,EAAI3jB,EAASmzB,GACpC,GAAuB,kBAAZnzB,EAAsB,CAC/B,MAAMumB,EAAO4M,EAAK5M,KAAO6I,EAAQJ,EAAWmE,EAAKQ,QAAU,GAC3D3zB,EAAUmzB,EAAK5M,KAAO,GAAGl3B,OAAOs0B,EAAI,MAAMt0B,OAAOk3B,EAAM,MAAMl3B,OAAO2Q,GAAW,GAAG3Q,OAAOs0B,EAAI,MAAMt0B,OAAO2Q,GAC1GA,EAAU8wB,EAAS9wB,EAASmzB,EAAKtC,MAAOsC,EAAKpC,YAG/C,OAAO/wB,EAGT,SAASgzB,GAAe,MACtBzD,EAAK,QACLvvB,EAAU,GAAE,MACZrG,EAAQ,IAER,IAAIy6B,EAAU,KAEd,IACEA,EAAU,EAAe,GACzB,MAAOxyC,IAET,OAAIwyC,EACK,IAAMA,EAAQ7E,EAAO,CAC1B8E,IAAK,MACL/iB,MAAO,GAAGjiB,OAAOxF,KAAKiX,MAAM,GAAKnH,GAAQ,OACxC26B,KAAKjM,GAAQxhC,QAAQC,IAAIuhC,IAGvBoJ,EAGT,SAASsB,GAAkB,MACzBxD,EAAK,QACLvvB,EAAU,GAAE,MACZrG,EAAQ,IAER,GAAqB,kBAAV41B,EAAoB,CAC7B,MAAMgF,EAAM,IAAIC,MAQhB,OANAD,EAAIE,OAAS,KACX,MAAMnwC,EAAOgrC,EAAYiF,EAAKv0B,EAASrG,GACvC9S,QAAQC,OAAOxC,IAGjBiwC,EAAI3jB,IAAM2e,EACHkC,EAGT,MAAMtb,EAAUoZ,EAAMmF,UAAY,GAElC,GAA8B,QAA1Bve,EAAQ1W,cAEV,OADA5Y,QAAQC,OAAOwoC,EAAYC,EAAOvvB,EAASrG,IACpC83B,EAGT,GAA8B,WAA1Btb,EAAQ1W,cAA4B,CACtC,MAAM80B,EAAM,IAAIC,MAKhB,OAHAD,EAAIE,OAAS,IAAM5tC,QAAQC,OAAOwoC,EAAYiF,EAAKv0B,EAASrG,IAE5D46B,EAAI3jB,IAAM2e,EAAMoF,YACTlD,EAGT,OAAOA,EAhIT,EAAIrK,QAAUA,EC1RC,UAAI,EAAI,CACrBzD,GAAI,SCAN,IAAIiR,EAAU,GAMP,SAASC,GAAS9M,GACvB6M,EAAU7M,EAEG,SAAS,GAAMhP,GACxB,EAAQyY,MAAQ,GAAKoD,EAAQ7b,IAC/B6b,EAAQ7b,GAAW/2B,QAAQ0H,WCbxB,SAASorC,GAAQt9B,EAAOqoB,EAAS,MAAM,IAC5C,OAAKh4B,MAAM6P,QAAQF,GAIZu9B,GAAav9B,EAAOqoB,EAAQ,IAH1BA,EAAOroB,GAAS,CAACA,GAAS,GAMrC,SAASu9B,GAAav9B,EAAOqoB,EAAQpwB,GACnC,IAAI9F,GAAS,EAEb,QAASA,EAAQ6N,EAAMxP,OAAQ,CAC7B,MAAMvD,EAAQ+S,EAAM7N,GAEhB9B,MAAM6P,QAAQjT,GAChBswC,GAAatwC,EAAOo7B,EAAQpwB,GACnBowB,EAAOp7B,IAChBgL,EAAOhF,KAAKhG,GAIhB,OAAOgL,EAGF,SAASulC,IAAU,OACxBhyC,EAAM,OACNwwB,EAAM,MACN7S,EAAQ,EAAC,MACTokB,EAAQ,IAER,MAAM/8B,EAASwrB,EAAOxrB,OAChB2rC,EAAQ5O,EAAQ/8B,EACtB,IAAIitC,EAAS,EAEb,IAAK,IAAI3lC,EAAIqR,EAAOs0B,EAASjtC,EAAQitC,IACnCjyC,EAAOsM,KAAOkkB,EAAOyhB,GAGvB,MAAOA,EAAStB,EACVsB,EAAStB,EAAQsB,GACnBjyC,EAAOkyC,WAAWv0B,EAAQs0B,EAAQt0B,EAAOA,EAAQs0B,GACjDA,GAAU,IAEVjyC,EAAOkyC,WAAWv0B,EAAQs0B,EAAQt0B,EAAOA,EAAQgzB,EAAQsB,GACzDA,EAAStB,GAIb,OAAO3wC,E,iBC/CM,MAAM,GACnB,YAAY2H,EAAMrE,GAChBkB,KAAKmD,KAAOA,EACZnD,KAAKlB,KAAOA,EACZkB,KAAK2tC,WAAa,EAClB3tC,KAAKs+B,QAGP,cAAcsP,GAEZ,OADA5tC,KAAK2tC,WAAaC,EACX5tC,KAGT,iBAEE,OADAA,KAAK6tC,SAAS,GACP7tC,KAGT,iBAEE,OADAA,KAAK8tC,cAAc,GACZ9tC,KAGT,SAAS/C,GAMP,OALA+C,KAAK+tC,QAAU9wC,EACf+C,KAAKguC,WAELhuC,KAAKiuC,iBAEEjuC,KAGT,cAAc/C,GAMZ,OALA+C,KAAK+tC,QAAU9wC,EACf+C,KAAKguC,WAELhuC,KAAKiuC,iBAEEjuC,KAGT,QAAQ++B,GAON,OANA/+B,KAAKkuC,OAASnP,EACd/+B,KAAKmuC,WAAapP,EAClB/+B,KAAKguC,WAELhuC,KAAKiuC,iBAEEjuC,KAGT,YAGE,OAFAA,KAAKouC,WAAa,kBAClBpuC,KAAKquC,eAAgB,EACdruC,KAGT,UACE,OAAKA,KAAKquC,eAIVruC,KAAKsuC,QAAQ,kBAAsBtuC,KAAKouC,YACxCpuC,KAAKquC,eAAgB,EAErBruC,KAAKiuC,iBAEEjuC,MAREA,KAWX,wBACE,OAAOA,KAAK2tC,WAAa,EAAI3tC,KAAKuuC,gBAAkBvuC,KAAK2tC,WAAa,EAGxE,uBACE,OAAO3tC,KAAK2tC,WAAa,EAAI3tC,KAAKwuC,eAAiBxuC,KAAK2tC,WAAa,EAGvE,cACE,OAAO3tC,KAAKwuC,eAAiB,EAAIxuC,KAAK2tC,YAAc3tC,KAAKwuC,eAAiB,KAAQ,EAGpF,kBACE,OAAOxuC,KAAK4tC,QAAU,EAAI5tC,KAAKu9B,MAAQv9B,KAAK4tC,QAAU,EAGxD,iBACE,OAAO5tC,KAAK4tC,QAAU,EAAI5tC,KAAK++B,KAAO/+B,KAAK4tC,QAAU,EAGvD,QACE,OAAO5tC,KAAK++B,KAAO,EAAI/+B,KAAK4tC,SAAW5tC,KAAK++B,KAAO,KAAQ,EAG7D,QAYE,OAXA/+B,KAAK++B,KAAO,EACZ/+B,KAAKu9B,MAAQ,EACbv9B,KAAK4tC,QAAU,EACf5tC,KAAKmuC,WAAa,EAClBnuC,KAAKwuC,eAAiB,EACtBxuC,KAAKuuC,gBAAkB,EACvBvuC,KAAK+tC,OAAS,EACd/tC,KAAKkuC,MAAQ,EACbluC,KAAKguC,SAAW,EAChBhuC,KAAKouC,WAAa,EAClBpuC,KAAKquC,eAAgB,EACdruC,KAGT,iBACMA,KAAKguC,WAAahuC,KAAK2tC,aACzB3tC,KAAKwuC,eAAiBxuC,KAAKkuC,MAC3BluC,KAAKuuC,gBAAkBvuC,KAAK+tC,OAC5B/tC,KAAKu9B,OAASv9B,KAAK+tC,OACnB/tC,KAAK++B,MAAQ/+B,KAAKkuC,MAClBluC,KAAK4tC,SAAW5tC,KAAKguC,SACrBhuC,KAAKkuC,MAAQ,EACbluC,KAAK+tC,OAAS,EACd/tC,KAAKguC,SAAW,ICtHP,MAAM,GACnB,aAAY,GACV7R,EAAE,MACFsS,IAEAzuC,KAAKm8B,GAAKA,EACVn8B,KAAKyuC,MAAQ,GAEbzuC,KAAK0uC,iBAAiBD,GAEtBz0C,OAAO2wC,KAAK3qC,MAGd,IAAImD,EAAMrE,EAAO,SACf,OAAOkB,KAAK2uC,aAAa,CACvBxrC,OACArE,SAIJ,WACE,OAAO9E,OAAOiC,KAAK+D,KAAKyuC,OAAOjuC,OAGjC,QACE,IAAK,MAAMrE,KAAO6D,KAAKyuC,MACrBzuC,KAAKyuC,MAAMtyC,GAAKmiC,QAGlB,OAAOt+B,KAGT,QAAQuW,GACN,IAAK,MAAMpa,KAAO6D,KAAKyuC,MACrBl4B,EAAGvW,KAAKyuC,MAAMtyC,IAIlB,WACE,MAAMkuC,EAAQ,GASd,OARArqC,KAAK9D,QAAQ0mB,IACXynB,EAAMznB,EAAKzf,MAAQ,CACjB47B,KAAMnc,EAAKmc,MAAQ,EACnBxB,MAAO3a,EAAK2a,OAAS,EACrBqR,QAAShsB,EAAKisB,kBAAoB,EAClCC,GAAIlsB,EAAKmsB,SAAW,KAGjB1E,EAGT,iBAAiBoE,EAAQ,IACvBA,EAAMvyC,QAAQ0mB,GAAQ5iB,KAAK2uC,aAAa/rB,IAG1C,aAAaA,GACX,IAAKA,IAASA,EAAKzf,KACjB,OAAO,KAGT,MAAM,KACJA,EAAI,KACJrE,GACE8jB,EAUJ,OARK5iB,KAAKyuC,MAAMtrC,KAEZnD,KAAKyuC,MAAMtrC,GADTyf,aAAgB,GACCA,EAEA,IAAI,GAAKzf,EAAMrE,IAI/BkB,KAAKyuC,MAAMtrC,IC1EtB,MAAM6rC,GAAY5pC,GAAkB,mBAANA,EAExB6pC,GAAa7pC,GAAkB,oBAANA,EAElBiW,GAAWjW,GAAW,OAANA,GAA2B,kBAANA,EACrC8pC,GAAe9pC,GAAKiW,GAASjW,IAAMA,EAAE+V,cAAgB,GAAGA,YAExDg0B,GAAa/pC,GAAKA,GAAmC,oBAAvBA,EAAE6V,OAAOC,UACvCk0B,GAAkBhqC,GAAKA,GAAwC,oBAA5BA,EAAE6V,OAAOo0B,eAE5CC,GAAalqC,GAAyB,qBAAbmqC,UAA4BnqC,aAAamqC,UAAYnqC,GAAKA,EAAEoqC,aAAepqC,EAAEqqC,MAAQrqC,EAAEsqC,KAEhHC,GAASvqC,GAAqB,qBAATwqC,MAAwBxqC,aAAawqC,KAE1DC,GAAsBzqC,GAA+B,qBAAnB0qC,gBAAkC1qC,aAAa0qC,gBAAkBz0B,GAASjW,IAAM6pC,GAAW7pC,EAAE2qC,MAAQd,GAAW7pC,EAAE4qC,SAAWf,GAAW7pC,EAAE6qC,WAC5KC,GAAW9qC,GAAKA,GAAkB,kBAANA,GAAkBA,EAAE8qC,SAEhDC,GAAuB/qC,GAAKiW,GAASjW,IAAM6pC,GAAW7pC,EAAEgrC,OAASnB,GAAW7pC,EAAEirC,OAASrB,GAAU5pC,EAAEkrC,UACnGC,GAAmBnrC,GAAKyqC,GAAoBzqC,IAAM+qC,GAAqB/qC,GClB7E,SAAS,GAAOmT,EAAWC,GAChC,IAAKD,EACH,MAAM,IAAIxG,MAAMyG,GAAW,4BCDxB,SAASg4B,GAAeC,GAC7B,IAAIC,EAEJ,IAAKD,EACH,OAAO,EAGLpwC,MAAM6P,QAAQugC,KAChBA,EAASA,EAAO,IAGlB,MAAME,EAAgBtwC,MAAM6P,QAA+B,QAAtBwgC,EAAUD,SAAgC,IAAZC,OAAqB,EAASA,EAAQ90C,YACzG,OAAO+0C,EAEF,SAASC,GAAgBH,GAC9B,IAAII,EAAUC,EAId,IAAI34B,EAoBJ,OAtBA,GAAOs4B,EAAQ,eACf,GAAOD,GAAeC,GAAS,kBAG3BpwC,MAAM6P,QAAQugC,KAChBt4B,EAAUs4B,EAAO,GACjBA,EAASA,EAAO,GAChBA,EAAS,IAAKA,EACZt4B,QAAS,IAAKs4B,EAAOt4B,WAChBA,MAKmB,QAAvB04B,EAAWJ,SAAiC,IAAbI,GAAuBA,EAASE,eAAyC,QAAvBD,EAAWL,SAAiC,IAAbK,GAAuBA,EAASE,aACnJP,EAAOhB,MAAO,GAGXgB,EAAOhB,OACVgB,EAAOQ,QAAS,GAGXR,E,iBCxCT,IAAIS,GAAa,GACjB,MAAMC,GAAc,GAUb,SAASC,GAAYC,GAC1B,IAAK,MAAMC,KAASH,GAClB,GAAIE,EAASE,WAAWD,GAAQ,CAC9B,MAAME,EAAcL,GAAYG,GAChCD,EAAWA,EAASn4B,QAAQo4B,EAAOE,GAQvC,OAJKH,EAASE,WAAW,YAAeF,EAASE,WAAW,cAC1DF,EAAW,GAAGH,KAAaG,KAGtBA,ECvBT,MAAMI,GAAmB,iCACnBC,GAAoB,uBACnB,SAASC,GAAcC,GAC5B,MAAMnzC,EAAUizC,GAAkB/yC,KAAKizC,GAEvC,OAAInzC,EACKA,EAAQ,GAGVmzC,EAEF,SAASC,GAAqBC,GACnC,MAAMrzC,EAAUgzC,GAAiB9yC,KAAKmzC,GAEtC,OAAIrzC,EACKA,EAAQ,GAGV,GChBT,MAAMszC,GAAuB,OACtB,SAASC,GAAsBC,GACpC,GAAI3C,GAAW2C,GAAW,CACxB,MAAMH,EAAMI,GAAiBD,EAASH,KAAO,IACvCK,EAAoBF,EAASG,QAAQnxB,IAAI,iBAAmB,GAClE,MAAO,CACL6wB,MACAhzC,KAAM6yC,GAAcQ,IAAsBN,GAAqBC,IAInE,OAAInC,GAAOsC,GACF,CACLH,IAAKI,GAAiBD,EAAS9uC,MAAQ,IACvCrE,KAAMmzC,EAASnzC,MAAQ,IAIH,kBAAbmzC,EACF,CACLH,IAAKI,GAAiBD,GACtBnzC,KAAM+yC,GAAqBI,IAIxB,CACLH,IAAK,GACLhzC,KAAM,IAGH,SAASuzC,GAAyBJ,GACvC,OAAI3C,GAAW2C,GACNA,EAASG,QAAQ,oBAAsB,EAG5CzC,GAAOsC,GACFA,EAASnxC,KAGM,kBAAbmxC,EACFA,EAASzxC,OAGdyxC,aAAoBt4B,aAIpBA,YAAYC,OAAOq4B,GAHdA,EAASK,YAOV,EAGV,SAASJ,GAAiBJ,GACxB,OAAOA,EAAI54B,QAAQ64B,GAAsB,ICvDpCQ,eAAeC,GAAaP,GACjC,GAAI3C,GAAW2C,GACb,OAAOA,EAGT,MAAMG,EAAU,GACVK,EAAgBJ,GAAyBJ,GAE3CQ,GAAiB,IACnBL,EAAQ,kBAAoB7zC,OAAOk0C,IAGrC,MAAM,IACJX,EAAG,KACHhzC,GACEkzC,GAAsBC,GAEtBnzC,IACFszC,EAAQ,gBAAkBtzC,GAG5B,MAAM4zC,QAAuBC,GAAkBV,GAE3CS,IACFN,EAAQ,iBAAmBM,GAGL,kBAAbT,IACTA,GAAW,IAAIW,aAAcC,OAAOZ,IAGtC,MAAMa,EAAW,IAAIvD,SAAS0C,EAAU,CACtCG,YAKF,OAHAp4C,OAAOgD,eAAe81C,EAAU,MAAO,CACrC71C,MAAO60C,IAEFgB,EAEFP,eAAeQ,GAAcD,GAClC,IAAKA,EAASE,GAAI,CAChB,MAAMx6B,QAAgBy6B,GAAiBH,GACvC,MAAM,IAAI/gC,MAAMyG,IAWpB+5B,eAAeU,GAAiBH,GAC9B,IAAIt6B,EAAU,4BAA4Bs6B,EAAShB,QAAQgB,EAASI,YAEpE,IACE,MAAMC,EAAcL,EAASV,QAAQnxB,IAAI,gBACzC,IAAIwuB,EAAOqD,EAASM,WAEhBD,EAAYE,SAAS,sBACvB5D,GAAQ,UAAUqD,EAASrD,QAG7Bj3B,GAAWi3B,EACXj3B,EAAUA,EAAQhY,OAAS,GAAQgY,EAAQne,MAAM,IAAjB,MAA4Bme,EAC5D,MAAOpe,IAET,OAAOoe,EAGT+5B,eAAeI,GAAkBV,GAC/B,MAAMqB,EAAsB,EAE5B,GAAwB,kBAAbrB,EACT,MAAO,SAASA,EAAS53C,MAAM,EAAGi5C,GAGpC,GAAIrB,aAAoBrC,KAAM,CAC5B,MAAM2D,EAAYtB,EAAS53C,MAAM,EAAG,GACpC,aAAa,IAAIm5C,QAAQl8B,IACvB,MAAMm8B,EAAS,IAAIC,WAEnBD,EAAOxG,OAAShP,IACd,IAAI0V,EAEJ,OAAOr8B,EAAkB,OAAV2mB,QAA4B,IAAVA,GAA+D,QAAlC0V,EAAgB1V,EAAMziC,cAAsC,IAAlBm4C,OAApD,EAAwFA,EAAc1rC,SAG5JwrC,EAAOG,cAAcL,KAIzB,GAAItB,aAAoBt4B,YAAa,CACnC,MAAMtf,EAAQ43C,EAAS53C,MAAM,EAAGi5C,GAC1BO,EAASC,GAAoBz5C,GACnC,MAAO,eAAew5C,EAGxB,OAAO,KAGT,SAASC,GAAoBjzC,GAC3B,IAAIowC,EAAS,GACb,MAAM8C,EAAQ,IAAIC,WAAWnzC,GAE7B,IAAK,IAAIiH,EAAI,EAAGA,EAAIisC,EAAMzB,WAAYxqC,IACpCmpC,GAAU1yC,OAAO01C,aAAaF,EAAMjsC,IAGtC,OAAOosC,KAAKjD,GC9GPsB,eAAe4B,GAAUrC,EAAK35B,GACnC,GAAmB,kBAAR25B,EAAkB,CAC3BA,EAAMV,GAAYU,GAClB,IAAIsC,EAAej8B,EAMnB,OAJgB,OAAZA,QAAgC,IAAZA,GAAsBA,EAAQk8B,OAAsF,oBAAzD,OAAZl8B,QAAgC,IAAZA,OAAqB,EAASA,EAAQk8B,SAC/HD,EAAej8B,EAAQk8B,aAGZA,MAAMvC,EAAKsC,GAG1B,aAAa5B,GAAaV,GCZrB,MAAMwC,GAAW,IAAI,EAAI,CAC9BnY,GAAI,eAEC,MAAMoY,GACX,MACE,MAAO,OAGT,OACE,MAAO,OAGT,OACE,MAAO,OAGT,QACE,MAAO,QAIJ,MAAM,GACX,cACEtQ,EAAgBjkC,KAAM,eAAW,GAEjCA,KAAKX,QAAUA,QAGjB,OAAOvC,GACL,OAAOkD,KAAKX,QAAQC,IAAIjD,KAAK2D,KAAKX,WAAYvC,GAGhD,QAAQA,GACN,OAAOkD,KAAKX,QAAQyqC,KAAKztC,KAAK2D,KAAKX,WAAYvC,GAGjD,QAAQA,GACN,OAAOkD,KAAKX,QAAQysB,KAAKzvB,KAAK2D,KAAKX,WAAYvC,GAGjD,SAASA,GACP,OAAOkD,KAAKX,QAAQjF,MAAMiC,KAAK2D,KAAKX,WAAYvC,IC1C7C,MAAM03C,GAAyB,CACpCH,MAAO,KACPI,cAAU/0C,EACVg1C,SAAS,EACTp1C,IAAK,IAAI,GACTq1C,IAAK,gCACLC,QAAQ,EACRC,eAAgB,EAChBC,qBAAsB,EACtBC,cAAc,EACdC,YAAa,GACbzgC,MAAO,EACP0gC,SAAU,EACVC,UAAW,OACXC,gBAAiB,EACjBC,UAAU,EACVC,WAAY,IAEDC,GAAyB,CACpCC,OAAQ,UACRC,SAAU,mBACVC,IAAK,UACL/pB,OAAQ,eACR0mB,QAAS,gBACTsD,KAAM,aACNzsB,KAAM,aACN0sB,YAAa,oBACbx5B,MAAO,cACPy5B,SAAU,iBACVC,SAAU,iBACVC,eAAgB,uBAChBC,UAAW,kBACXC,UAAW,kBACXC,OAAQ,gBC7BH,SAASC,KACd,QAAOC,QAAU,QAAOA,SAAW,GACnC,MAAM,QACJA,GACE,QAEJ,OADAA,EAAQC,OAASD,EAAQC,QAAU,GAC5BD,EAAQC,OAGjB,MAAMC,GAAyB,KAC7B,MAAMj6B,EAAQ85B,KAGd,OAFA95B,EAAMk6B,cAAgBl6B,EAAMk6B,eAAiB,IAAK9B,IAE3Cp4B,EAAMk6B,eAQR,SAASC,GAAiBp+B,EAASs4B,EAAQ0F,EAASrE,GAIzD,OAHAqE,EAAUA,GAAW,GACrBA,EAAU91C,MAAM6P,QAAQimC,GAAWA,EAAU,CAACA,GAC9CK,GAAgBr+B,EAASg+B,GAClBM,GAAyBhG,EAAQt4B,EAAS25B,GAE5C,SAAS4E,GAAiBv+B,EAASgT,GACxC,MAAMmrB,EAAgBD,KAChBjC,EAAej8B,GAAWm+B,EAEhC,MAAkC,oBAAvBlC,EAAaC,MACfD,EAAaC,MAGlBh5B,GAAS+4B,EAAaC,OACjBvC,GAAOqC,GAAUrC,EAAKsC,GAGf,OAAZjpB,QAAgC,IAAZA,GAAsBA,EAAQkpB,MACjC,OAAZlpB,QAAgC,IAAZA,OAAqB,EAASA,EAAQkpB,MAG5DF,GAGT,SAASqC,GAAgBr+B,EAASg+B,GAChCQ,GAAsBx+B,EAAS,KAAMq8B,GAAwBc,GAAwBa,GAErF,IAAK,MAAM1F,KAAU0F,EAAS,CAC5B,MAAMS,EAAYz+B,GAAWA,EAAQs4B,EAAOtU,KAAO,GAC7C0a,EAAgBpG,EAAOt4B,SAAWs4B,EAAOt4B,QAAQs4B,EAAOtU,KAAO,GAC/D2a,EAAoBrG,EAAOqG,mBAAqBrG,EAAOqG,kBAAkBrG,EAAOtU,KAAO,GAC7Fwa,GAAsBC,EAAWnG,EAAOtU,GAAI0a,EAAeC,EAAmBX,IAIlF,SAASQ,GAAsBx+B,EAASgkB,EAAI4a,EAAgBD,EAAmBX,GAC7E,MAAMa,EAAa7a,GAAM,YACnB/N,EAAS+N,EAAQA,EAAH,IAAW,GAE/B,IAAK,MAAMhgC,KAAOgc,EAAS,CACzB,MAAM8+B,GAAgB9a,GAAM9gB,GAASlD,EAAQhc,IACvC+6C,EAA0B,YAAR/6C,IAAsBggC,EACxCgb,EAA4B,cAARh7C,GAAuBggC,EAEjD,KAAMhgC,KAAO46C,KAAoBG,IAAoBC,EACnD,GAAIh7C,KAAO26C,EACTxC,GAASxoB,KAAK,GAAGkrB,oBAA8B5oB,IAASjyB,gCAAoC26C,EAAkB36C,MAA9Gm4C,QACK,IAAK2C,EAAc,CACxB,MAAMG,EAAaC,GAAkBl7C,EAAKg6C,GAC1C7B,GAASxoB,KAAK,GAAGkrB,oBAA8B5oB,IAASjyB,sBAAyBi7C,IAAjF9C,KAMR,SAAS+C,GAAkBC,EAAWnB,GACpC,MAAMoB,EAAqBD,EAAUr/B,cACrC,IAAIu/B,EAAiB,GAErB,IAAK,MAAM/G,KAAU0F,EACnB,IAAK,MAAMh6C,KAAOs0C,EAAOt4B,QAAS,CAChC,GAAIm/B,IAAcn7C,EAChB,MAAO,iBAAkBs0C,EAAOtU,MAAMhgC,MAGxC,MAAMs7C,EAAet7C,EAAI8b,cACnBy/B,EAAiBH,EAAmBhG,WAAWkG,IAAiBA,EAAalG,WAAWgG,GAE1FG,IACFF,EAAiBA,GAAkB,iBAAkB/G,EAAOtU,MAAMhgC,OAKxE,OAAOq7C,EAGT,SAASf,GAAyBhG,EAAQt4B,EAAS25B,GACjD,MAAM6F,EAAuBlH,EAAOt4B,SAAW,GACzCy/B,EAAgB,IAAKD,GAU3B,OARAE,GAAcD,EAAe9F,GAEH,OAAtB8F,EAAct4C,MAChBs4C,EAAct4C,IAAM,IAAIi1C,IAG1BuD,GAAkBF,EAAevB,MACjCyB,GAAkBF,EAAez/B,GAC1By/B,EAGT,SAASE,GAAkBF,EAAez/B,GACxC,IAAK,MAAMhc,KAAOgc,EAChB,GAAIhc,KAAOgc,EAAS,CAClB,MAAMlb,EAAQkb,EAAQhc,GAElB+yC,GAAajyC,IAAUiyC,GAAa0I,EAAcz7C,IACpDy7C,EAAcz7C,GAAO,IAAKy7C,EAAcz7C,MACnCgc,EAAQhc,IAGby7C,EAAcz7C,GAAOgc,EAAQhc,IAMrC,SAAS07C,GAAc1/B,EAAS25B,GAC1BA,KAAS,YAAa35B,KACxBA,EAAQ4/B,QAAUjG,GCzIf,SAAS,GAAOv5B,EAAWC,GAChC,IAAKD,EACH,MAAM,IAAIxG,MAAMyG,GAAW,gCCF/B,MACa,GAA4C,SCClD,SAASw/B,GAAsBpD,EAAQqD,EAAc,IAC1D,GAAOrD,EAAQ,sBACf,MAAMsD,EAAgBtD,EAAOl2C,QAE7B,SAAKu5C,IAAgBC,G,iBCLvB,MAAMC,GAAiB,IAAI5T,IACpB,SAAS6T,GAAqB3jB,GACnC,GAAOA,EAAMzI,SAAWyI,EAAMqd,MAAQrd,EAAMzI,QAAUyI,EAAMqd,KAC5D,IAAIuG,EAAYF,GAAel3B,IAAIwT,EAAMzI,QAAUyI,EAAMqd,KAezD,OAbKuG,IACC5jB,EAAMqd,MACRuG,EAAYC,GAA4B7jB,EAAMqd,KAC9CqG,GAAer4B,IAAI2U,EAAMqd,IAAKuG,IAG5B5jB,EAAMzI,SACRqsB,EAAYE,GAA+B9jB,EAAMzI,QACjDmsB,GAAer4B,IAAI2U,EAAMzI,OAAQqsB,KAIrC,GAAOA,GACAA,EAGT,SAASC,GAA4BxG,GACnC,IAAKA,EAAIP,WAAW,QAClB,OAAOO,EAGT,MAAM0G,EAAeC,GAAkB3G,GACvC,OAAOyG,GAA+BC,GAGxC,SAASD,GAA+BC,GACtC,MAAME,EAAO,IAAI9I,KAAK,CAAC4I,GAAe,CACpC15C,KAAM,2BAER,OAAO65C,IAAIC,gBAAgBF,GAG7B,SAASD,GAAkBI,GACzB,MAAO,2BAEUA,sECzCZ,SAASC,GAAgBjW,EAAQkW,GAAY,EAAMC,GACxD,MAAMC,EAAeD,GAAa,IAAIE,IAEtC,GAAKrW,GAAgB,GAAIsW,GAAetW,GACtCoW,EAAatY,IAAIkC,QACZ,GAAIsW,GAAetW,EAAOhiC,QAC/Bo4C,EAAatY,IAAIkC,EAAOhiC,aACnB,GAAI8Y,YAAYC,OAAOipB,SAAiB,GAAIkW,GAA+B,kBAAXlW,EACrE,IAAK,MAAM1mC,KAAO0mC,EAChBiW,GAAgBjW,EAAO1mC,GAAM48C,EAAWE,QAI5C,YAAqBv5C,IAAds5C,EAA0B34C,MAAMosC,KAAKwM,GAAgB,GAG9D,SAASE,GAAetW,GACtB,QAAKA,IAIDA,aAAkBlpB,cAIK,qBAAhBy/B,aAA+BvW,aAAkBuW,cAIjC,qBAAhBC,aAA+BxW,aAAkBwW,aAI7B,qBAApBC,iBAAmCzW,aAAkByW,mBC5BlE,MAAMC,GAAO,OAEE,MAAM,GACnB,qBACE,MAAyB,qBAAXC,OAGhB,YAAY/kB,GACVwP,EAAgBjkC,KAAM,YAAQ,GAE9BikC,EAAgBjkC,KAAM,cAAU,GAEhCikC,EAAgBjkC,KAAM,WAAO,GAE7BikC,EAAgBjkC,KAAM,cAAc,GAEpCikC,EAAgBjkC,KAAM,cAAU,GAEhCikC,EAAgBjkC,KAAM,iBAAa,GAEnCikC,EAAgBjkC,KAAM,eAAW,GAEjCikC,EAAgBjkC,KAAM,eAAgB,IAEtC,MAAM,KACJmD,EAAI,OACJ6oB,EAAM,IACN8lB,GACErd,EACJ,GAAOzI,GAAU8lB,GACjB9xC,KAAKmD,KAAOA,EACZnD,KAAKgsB,OAASA,EACdhsB,KAAK8xC,IAAMA,EACX9xC,KAAKy5C,UAAYF,GAEjBv5C,KAAK05C,QAAUt/C,GAASiF,QAAQC,IAAIlF,GAEpC4F,KAAK40C,OAAS50C,KAAK25C,uBAGrB,UACE35C,KAAKy5C,UAAYF,GACjBv5C,KAAK05C,QAAUH,GACfv5C,KAAK40C,OAAOgF,YACZ55C,KAAK65C,YAAa,EAGpB,gBACE,OAAO76C,QAAQgB,KAAKy5C,WAGtB,YAAY5Y,EAAMiZ,GAChBA,EAAeA,GAAgBhB,GAAgBjY,GAC/C7gC,KAAK40C,OAAOmF,YAAYlZ,EAAMiZ,GAGhC,wBAAwB7b,GACtB,IAAIzlB,EAAU,kBAWd,OAVAA,GAAW,UAAUxY,KAAKmD,SAEtB86B,EAAMzlB,UACRA,GAAcylB,EAAMzlB,QAAT,QAGTylB,EAAM+b,SACRxhC,GAAW,IAAIylB,EAAM+b,UAAU/b,EAAMgc,SAGhC,IAAIloC,MAAMyG,GAGnB,uBACExY,KAAKk6C,aAAe9B,GAAqB,CACvCpsB,OAAQhsB,KAAKgsB,OACb8lB,IAAK9xC,KAAK8xC,MAEZ,MAAM8C,EAAS,IAAI4E,OAAOx5C,KAAKk6C,aAAc,CAC3C/2C,KAAMnD,KAAKmD,OAkBb,OAfAyxC,EAAOuF,UAAYlc,IACZA,EAAM4C,KAGT7gC,KAAKy5C,UAAUxb,EAAM4C,MAFrB7gC,KAAK05C,QAAQ,IAAI3nC,MAAM,sBAM3B6iC,EAAOwF,QAAUhgD,IACf4F,KAAK05C,QAAQ15C,KAAKq6C,wBAAwBjgD,IAC1C4F,KAAK65C,YAAa,GAGpBjF,EAAO0F,eAAiBrc,GAAS5+B,QAAQjF,MAAM6jC,GAExC2W,GClGI,MAAM,GACnB,YAAY2F,EAASC,GACnBvW,EAAgBjkC,KAAM,YAAQ,GAE9BikC,EAAgBjkC,KAAM,oBAAgB,GAEtCikC,EAAgBjkC,KAAM,iBAAa,GAEnCikC,EAAgBjkC,KAAM,cAAU,GAEhCikC,EAAgBjkC,KAAM,gBAAY,GAElCikC,EAAgBjkC,KAAM,eAAW,GAEjCA,KAAKmD,KAAOo3C,EACZv6C,KAAKw6C,aAAeA,EACpBx6C,KAAKy6C,WAAY,EAEjBz6C,KAAK06C,SAAW,OAEhB16C,KAAK26C,QAAU,OAEf36C,KAAKiI,OAAS,IAAIurC,QAAQ,CAACl8B,EAASsjC,KAClC56C,KAAK06C,SAAWpjC,EAChBtX,KAAK26C,QAAUC,IAInB,YAAY97C,EAAM+7C,GAChB76C,KAAKw6C,aAAaT,YAAY,CAC5B/tB,OAAQ,aACRltB,OACA+7C,YAIJ,KAAK59C,GACH,GAAO+C,KAAKy6C,WACZz6C,KAAKy6C,WAAY,EAEjBz6C,KAAK06C,SAASz9C,GAGhB,MAAM7C,GACJ,GAAO4F,KAAKy6C,WACZz6C,KAAKy6C,WAAY,EAEjBz6C,KAAK26C,QAAQvgD,IC7CF,MAAM,GACnB,YAAYq6B,GACVwP,EAAgBjkC,KAAM,OAAQ,WAE9BikC,EAAgBjkC,KAAM,cAAU,GAEhCikC,EAAgBjkC,KAAM,WAAO,GAE7BikC,EAAgBjkC,KAAM,iBAAkB,GAExCikC,EAAgBjkC,KAAM,uBAAwB,GAE9CikC,EAAgBjkC,KAAM,UAAW,QAEjCikC,EAAgBjkC,KAAM,gBAAgB,GAEtCikC,EAAgBjkC,KAAM,QAAS,IAE/BikC,EAAgBjkC,KAAM,WAAY,IAElCikC,EAAgBjkC,KAAM,YAAa,IAEnCikC,EAAgBjkC,KAAM,QAAS,GAE/BikC,EAAgBjkC,KAAM,eAAe,GAErCA,KAAKgsB,OAASyI,EAAMzI,OACpBhsB,KAAK8xC,IAAMrd,EAAMqd,IACjB9xC,KAAK86C,SAASrmB,GAGhB,UACEz0B,KAAK+6C,UAAU7+C,QAAQ04C,GAAUA,EAAO9f,WACxC90B,KAAKg7C,aAAc,EAGrB,SAASvmB,GACPz0B,KAAKy0B,MAAQ,IAAKz0B,KAAKy0B,SAClBA,QAGc/0B,IAAf+0B,EAAMtxB,OACRnD,KAAKmD,KAAOsxB,EAAMtxB,WAGSzD,IAAzB+0B,EAAMogB,iBACR70C,KAAK60C,eAAiBpgB,EAAMogB,qBAGKn1C,IAA/B+0B,EAAMqgB,uBACR90C,KAAK80C,qBAAuBrgB,EAAMqgB,2BAGTp1C,IAAvB+0B,EAAMsgB,eACR/0C,KAAK+0C,aAAetgB,EAAMsgB,mBAGNr1C,IAAlB+0B,EAAMwmB,UACRj7C,KAAKi7C,QAAUxmB,EAAMwmB,SAIzB,eAAe93C,EAAMs2C,EAAY,EAACyB,EAAKp8C,EAAM+hC,IAASqa,EAAIC,KAAKta,IAAO6Y,EAAU,EAACwB,EAAK9gD,IAAU8gD,EAAI9gD,MAAMA,KACxG,MAAMghD,EAAe,IAAI5H,QAAQ6H,IAC/Br7C,KAAKs7C,SAASr4C,KAAK,CACjBE,OACAs2C,YACAC,UACA2B,YAEKr7C,OAKT,OAFAA,KAAKu7C,wBAEQH,EAGf,wBACE,IAAKp7C,KAAKs7C,SAAS96C,OACjB,OAGF,MAAMg6C,EAAex6C,KAAKw7C,sBAE1B,IAAKhB,EACH,OAGF,MAAMiB,EAAYz7C,KAAKs7C,SAAS9kC,QAEhC,GAAIilC,EAAW,CACbz7C,KAAKi7C,QAAQ,CACXziC,QAAS,eACTrV,KAAMs4C,EAAUt4C,KAChBq3C,eACAkB,QAAS17C,KAAKs7C,SAAS96C,SAEzB,MAAM06C,EAAM,IAAI,GAAUO,EAAUt4C,KAAMq3C,GAE1CA,EAAaf,UAAY5Y,GAAQ4a,EAAUhC,UAAUyB,EAAKra,EAAK/hC,KAAM+hC,EAAKga,SAE1EL,EAAad,QAAUt/C,GAASqhD,EAAU/B,QAAQwB,EAAK9gD,GAEvDqhD,EAAUJ,QAAQH,GAElB,UACQA,EAAIjzC,OACV,QACAjI,KAAK27C,oBAAoBnB,KAK/B,oBAAoB5F,GAClB,MAAMgH,EAAsB57C,KAAKg7C,cAAgBh7C,KAAK+0C,cAAgB/0C,KAAKu9B,MAAQv9B,KAAK67C,qBAEpFD,GACFhH,EAAO9f,UACP90B,KAAKu9B,SAELv9B,KAAK+6C,UAAU93C,KAAK2xC,GAGjB50C,KAAKg7C,aACRh7C,KAAKu7C,kBAIT,sBACE,GAAIv7C,KAAK+6C,UAAUv6C,OAAS,EAC1B,OAAOR,KAAK+6C,UAAUvkC,SAAW,KAGnC,GAAIxW,KAAKu9B,MAAQv9B,KAAK67C,qBAAsB,CAC1C77C,KAAKu9B,QACL,MAAMp6B,EAAO,GAAGnD,KAAKmD,KAAK8U,mBAAmBjY,KAAKu9B,YAAYv9B,KAAK60C,kBACnE,OAAO,IAAI,GAAa,CACtB1xC,OACA6oB,OAAQhsB,KAAKgsB,OACb8lB,IAAK9xC,KAAK8xC,MAId,OAAO,KAGT,qBACE,OAAO,QAAW9xC,KAAK80C,qBAAuB90C,KAAK60C,gBCrJvD,MAAMiH,GAAgB,CACpBjH,eAAgB,EAChBC,qBAAsB,EACtBmG,QAAS,OACTlG,cAAc,GAED,MAAM,GACnB,qBACE,OAAO,GAAagH,cAGtB,qBAAqBtnB,EAAQ,IAK3B,OAJA,GAAWunB,YAAc,GAAWA,aAAe,IAAI,GAAW,IAElE,GAAWA,YAAYlB,SAASrmB,GAEzB,GAAWunB,YAGpB,YAAYvnB,GACVwP,EAAgBjkC,KAAM,aAAS,GAE/BikC,EAAgBjkC,KAAM,cAAe,IAAIukC,KAEzCvkC,KAAKy0B,MAAQ,IAAKqnB,IAElB97C,KAAK86C,SAASrmB,GACdz0B,KAAKi8C,YAAc,IAAI1X,IAGzB,UACE,IAAK,MAAM2X,KAAcl8C,KAAKi8C,YAAYlgC,SACxCmgC,EAAWpnB,UAIf,SAASL,GACPz0B,KAAKy0B,MAAQ,IAAKz0B,KAAKy0B,SAClBA,GAGL,IAAK,MAAMynB,KAAcl8C,KAAKi8C,YAAYlgC,SACxCmgC,EAAWpB,SAAS96C,KAAKm8C,uBAI7B,cAAchkC,GACZ,MAAM,KACJhV,EAAI,OACJ6oB,EAAM,IACN8lB,GACE35B,EACJ,IAAI+jC,EAAal8C,KAAKi8C,YAAYh7B,IAAI9d,GAYtC,OAVK+4C,IACHA,EAAa,IAAI,GAAW,CAC1B/4C,OACA6oB,SACA8lB,QAEFoK,EAAWpB,SAAS96C,KAAKm8C,uBACzBn8C,KAAKi8C,YAAYn8B,IAAI3c,EAAM+4C,IAGtBA,EAGT,sBACE,MAAO,CACLrH,eAAgB70C,KAAKy0B,MAAMogB,eAC3BC,qBAAsB90C,KAAKy0B,MAAMqgB,qBACjCC,aAAc/0C,KAAKy0B,MAAMsgB,aACzBkG,QAASj7C,KAAKy0B,MAAMwmB,UAM1BhX,EAAgB,GAAY,mBAAe,GC/E3C,MAAMmY,GAAU,SAMT,SAASC,GAAazH,EAAQz8B,EAAU,IAC7C,MAAMmkC,EAAgBnkC,EAAQy8B,EAAOzY,KAAO,GACtCogB,EAAgB3H,EAAOzY,GAAV,aACnB,IAAI2V,EAAMwK,EAAczD,UAMxB,GAJ4B,SAAxB1gC,EAAQ68B,cACVlD,EAAM,WAAW8C,EAAOt6C,eAAeiiD,MAGpCzK,EAAK,CACR,IAAIpzC,EAAUk2C,EAAOl2C,QAEL,WAAZA,IACFA,EAAU09C,IAGZ,MAAMI,EAAa99C,EAAU,IAAIA,EAAY,GAC7CozC,EAAM,iCAAiC8C,EAAOt6C,SAASkiD,UAAmBD,IAI5E,OADA,GAAOzK,GACAA,EC5BF,SAAS2K,GAAmBhM,EAAQt4B,GACzC,QAAK,GAAW4jC,gBAITtL,EAAOmE,SAAuB,OAAZz8B,QAAgC,IAAZA,OAAqB,EAASA,EAAQy8B,SAE9ErC,eAAemK,GAAgBjM,EAAQ5P,EAAM1oB,EAASgT,EAASwxB,GACpE,MAAMx5C,EAAOstC,EAAOtU,GACd2V,EAAMuK,GAAa5L,EAAQt4B,GAC3BykC,EAAa,GAAWC,cAAc1kC,GACtC+jC,EAAaU,EAAWE,cAAc,CAC1C35C,OACA2uC,QAEF35B,EAAUivB,KAAKG,MAAMH,KAAK/jB,UAAUlL,IACpC,MAAM+iC,QAAYgB,EAAWa,SAAS,oBAAqBtD,GAAUp9C,KAAK,KAAMsgD,IAChFzB,EAAInB,YAAY,UAAW,CACzBvoB,MAAOqP,EACP1oB,YAEF,MAAMlQ,QAAeizC,EAAIjzC,OACzB,aAAaA,EAAOA,OAGtBsqC,eAAekH,GAAUkD,EAAmBzB,EAAKp8C,EAAM+7C,GACrD,OAAQ/7C,GACN,IAAK,OACHo8C,EAAIC,KAAKN,GACT,MAEF,IAAK,QACHK,EAAI9gD,MAAMygD,EAAQzgD,OAClB,MAEF,IAAK,UACH,MAAM,GACJ+hC,EAAE,MACF3K,EAAK,QACLrZ,GACE0iC,EAEJ,IACE,MAAM5yC,QAAe00C,EAAkBnrB,EAAOrZ,GAC9C+iC,EAAInB,YAAY,OAAQ,CACtB5d,KACAl0B,WAEF,MAAO7N,GACP,MAAMoe,EAAUpe,aAAiB2X,MAAQ3X,EAAMoe,QAAU,gBACzD0iC,EAAInB,YAAY,QAAS,CACvB5d,KACA/hC,MAAOoe,IAIX,MAEF,QACEnZ,QAAQysB,KAAK,qCAAqChtB,I,YC3DjD,SAAS,GAAS7B,GACvB,OAAOA,GAA0B,kBAAVA,GAAsBA,EAAMizC,SAK9C,SAAS8M,GAAoBnc,GAClC,OAAI,oBACK,oBAAmBA,GAGrBA,ECXF,SAASoc,GAAcpc,GAK5B,GAJI,GAAcA,KAChBA,EAAO,GAAyBA,IAG9BA,aAAgBlnB,YAClB,OAAOknB,EAGT,GAAIlnB,YAAYC,OAAOinB,GACrB,OAAwB,IAApBA,EAAKqc,YAAoBrc,EAAKyR,aAAezR,EAAKhgC,OAAOyxC,WACpDzR,EAAKhgC,OAGPggC,EAAKhgC,OAAOxG,MAAMwmC,EAAKqc,WAAYrc,EAAKqc,WAAarc,EAAKyR,YAGnE,GAAoB,kBAATzR,EAAmB,CAC5B,MAAM4O,EAAO5O,EACPsc,GAAa,IAAIvK,aAAcC,OAAOpD,GAC5C,OAAO0N,EAAWt8C,OAGpB,GAAIggC,GAAwB,kBAATA,GAAqBA,EAAKuc,eAC3C,OAAOvc,EAAKuc,iBAGd,MAAM,IAAIrrC,MAAM,iBAEX,SAASsrC,GAAoBC,EAAcC,EAAcjL,GAG9D,GAFAA,EAAaA,GAAcgL,EAAahL,WAEpCgL,EAAahL,WAAaA,GAAciL,EAAajL,WAAaA,EACpE,OAAO,EAGT,MAAMkL,EAAS,IAAIxJ,WAAWsJ,GACxBG,EAAS,IAAIzJ,WAAWuJ,GAE9B,IAAK,IAAIz1C,EAAI,EAAGA,EAAI01C,EAAOh9C,SAAUsH,EACnC,GAAI01C,EAAO11C,KAAO21C,EAAO31C,GACvB,OAAO,EAIX,OAAO,EAEF,SAAS41C,MAA2BC,GACzC,MAAMC,EAAeD,EAAQ3jC,IAAI6jC,GAAWA,aAAmBlkC,YAAc,IAAIq6B,WAAW6J,GAAWA,GACjGvL,EAAasL,EAAaE,OAAO,CAACt9C,EAAQu9C,IAAev9C,EAASu9C,EAAWzL,WAAY,GACzFrqC,EAAS,IAAI+rC,WAAW1B,GAC9B,IAAIrxC,EAAS,EAEb,IAAK,MAAM+8C,KAAeJ,EACxB31C,EAAO6X,IAAIk+B,EAAa/8C,GACxBA,GAAU+8C,EAAY1L,WAGxB,OAAOrqC,EAAOpH,OCvCT0xC,eAAe0L,GAA6B5O,GACjD,MAAM6O,EAAe,GAErB,UAAW,MAAMC,KAAS9O,EACxB6O,EAAaj7C,KAAKk7C,GAGpB,OAAOT,MAA2BQ,GC3BpC,MAAME,GAAqB,OACpB,SAAUC,GAAmB72C,EAAQ2Q,GAC1C,MAAMmmC,GAAyB,OAAZnmC,QAAgC,IAAZA,OAAqB,EAASA,EAAQmmC,YAAcF,GAC3F,IAAIn9C,EAAS,EACb,MAAMs9C,EAAc,IAAI3L,YAExB,MAAO3xC,EAASuG,EAAOhH,OAAQ,CAC7B,MAAMg+C,EAAcn8C,KAAKgF,IAAIG,EAAOhH,OAASS,EAAQq9C,GAC/CH,EAAQ32C,EAAOnN,MAAM4G,EAAQA,EAASu9C,GAC5Cv9C,GAAUu9C,QACJD,EAAY1L,OAAOsL,ICV7B,MAAM,GAAqB,OACpB,SAAUM,GAAwBjP,EAAar3B,EAAU,IAC9D,MAAM,UACJmmC,EAAY,IACVnmC,EACJ,IAAI+kC,EAAa,EAEjB,MAAOA,EAAa1N,EAAY8C,WAAY,CAC1C,MAAMoM,EAAkBr8C,KAAKgF,IAAImoC,EAAY8C,WAAa4K,EAAYoB,GAChEH,EAAQ,IAAIxkC,YAAY+kC,GACxBV,EAAc,IAAIhK,WAAWxE,EAAa0N,EAAYwB,GACtDC,EAAa,IAAI3K,WAAWmK,GAClCQ,EAAW7+B,IAAIk+B,GACfd,GAAcwB,QACRP,GCdV,MAAM,GAAqB,QACpB5L,eAAgBqM,GAAiBlG,EAAMvgC,GAC5C,MAAMmmC,GAAyB,OAAZnmC,QAAgC,IAAZA,OAAqB,EAASA,EAAQmmC,YAAc,GAC3F,IAAIr9C,EAAS,EAEb,MAAOA,EAASy3C,EAAK53C,KAAM,CACzB,MAAMsY,EAAMnY,EAASq9C,EACfH,QAAczF,EAAKr+C,MAAM4G,EAAQmY,GAAKo2B,cAC5CvuC,EAASmY,QACH+kC,GCRH,SAASU,GAAmBC,EAAQ3mC,GACzC,OAAO,QAAY4mC,GAA0BD,EAAQ3mC,GAAW6mC,GAAuBF,EAAQ3mC,GAGjGo6B,eAAgBwM,GAA0BD,EAAQ3mC,GAChD,MAAMs7B,EAASqL,EAAO7O,YACtB,IAAIgP,EAEJ,IACE,MAAO,EAAM,CACX,MAAMC,EAAsBD,GAAoBxL,EAAOrD,OAEvC,OAAZj4B,QAAgC,IAAZA,GAAsBA,EAAQgnC,mBACpDF,EAAmBxL,EAAOrD,QAG5B,MAAM,KACJ+K,EAAI,MACJl+C,SACQiiD,EAEV,GAAI/D,EACF,aAGI8B,GAAchgD,IAEtB,MAAO7C,GACPq5C,EAAO2L,eAIX7M,eAAgByM,GAAuBF,EAAQ3mC,GAC7C,UAAW,MAAMgmC,KAASW,QAClB7B,GAAckB,GC9BjB,SAASkB,GAAaxe,EAAM1oB,GACjC,GAAoB,kBAAT0oB,EACT,OAAOwd,GAAmBxd,EAAM1oB,GAGlC,GAAI0oB,aAAgBlnB,YAClB,OAAO8kC,GAAwB5d,EAAM1oB,GAGvC,GAAIw3B,GAAO9O,GACT,OAAO+d,GAAiB/d,EAAM1oB,GAGhC,GAAIo4B,GAAiB1P,GACnB,OAAOge,GAAmBhe,EAAM1oB,GAGlC,GAAIm3B,GAAWzO,GAAO,CACpB,MAAMiS,EAAWjS,EACjB,OAAOge,GAAmB/L,EAAS4C,KAAMv9B,GAG3C,MAAM,IAAIpG,MAAM,gBCvBlB,MAAMutC,GAAW,oCACV,SAASC,GAAmC1e,EAAM4P,EAAQt4B,GAC/D,GAAIs4B,EAAOhB,MAAwB,kBAAT5O,EACxB,OAAOA,EAOT,GAJIqP,GAASrP,KACXA,EAAOA,EAAKhgC,QAGVggC,aAAgBlnB,YAAa,CAC/B,MAAM61B,EAAc3O,EAEpB,GAAI4P,EAAOhB,OAASgB,EAAOQ,OAAQ,CACjC,MAAMuO,EAAc,IAAIC,YAAY,QACpC,OAAOD,EAAYE,OAAOlQ,GAG5B,OAAOA,EAGT,GAAI71B,YAAYC,OAAOinB,GAAO,CAC5B,GAAI4P,EAAOhB,OAASgB,EAAOQ,OAAQ,CACjC,MAAMuO,EAAc,IAAIC,YAAY,QACpC,OAAOD,EAAYE,OAAO7e,GAG5B,IAAI2O,EAAc3O,EAAKhgC,OACvB,MAAMyxC,EAAazR,EAAKyR,YAAczR,EAAKrgC,OAM3C,OAJwB,IAApBqgC,EAAKqc,YAAoB5K,IAAe9C,EAAY8C,aACtD9C,EAAcA,EAAYn1C,MAAMwmC,EAAKqc,WAAYrc,EAAKqc,WAAa5K,IAG9D9C,EAGT,MAAM,IAAIz9B,MAAMutC,IAEX/M,eAAeoN,GAA+B9e,EAAM4P,EAAQt4B,GACjE,MAAMynC,EAAgB/e,aAAgBlnB,aAAeA,YAAYC,OAAOinB,GAExE,GAAoB,kBAATA,GAAqB+e,EAC9B,OAAOL,GAAmC1e,EAAM4P,EAAQt4B,GAO1D,GAJIw3B,GAAO9O,KACTA,QAAa2R,GAAa3R,IAGxByO,GAAWzO,GAAO,CACpB,MAAMiS,EAAWjS,EAEjB,aADMkS,GAAcD,GACbrC,EAAOQ,aAAe6B,EAAStD,oBAAsBsD,EAASrD,OAOvE,GAJIc,GAAiB1P,KACnBA,EAAOwe,GAAaxe,EAAM1oB,IAGxBg3B,GAAWtO,IAASuO,GAAgBvO,GACtC,OAAOod,GAA6Bpd,GAGtC,MAAM,IAAI9uB,MAAMutC,ICnEX,SAASO,GAAiB10B,EAAShT,EAAS2nC,EAAkB,MACnE,GAAIA,EACF,OAAOA,EAGT,MAAMC,EAAkB,CACtB1L,MAAOqC,GAAiBv+B,EAASgT,MAC9BA,GAOL,OAJK9qB,MAAM6P,QAAQ6vC,EAAgB5J,WACjC4J,EAAgB5J,QAAU,MAGrB4J,EAEF,SAASC,GAAsB7J,EAAShrB,GAC7C,IAAKA,GAAWgrB,IAAY91C,MAAM6P,QAAQimC,GACxC,OAAOA,EAGT,IAAI8J,EAMJ,GAJI9J,IACF8J,EAAmB5/C,MAAM6P,QAAQimC,GAAWA,EAAU,CAACA,IAGrDhrB,GAAWA,EAAQgrB,QAAS,CAC9B,MAAM+J,EAAiB7/C,MAAM6P,QAAQib,EAAQgrB,SAAWhrB,EAAQgrB,QAAU,CAAChrB,EAAQgrB,SACnF8J,EAAmBA,EAAmB,IAAIA,KAAqBC,GAAkBA,EAGnF,OAAOD,GAAoBA,EAAiBz/C,OAASy/C,EAAmB,KC9B1E,MAAME,GAA0B,KAC9B,MAAM/jC,EAAQ85B,KAEd,OADA95B,EAAMgkC,eAAiBhkC,EAAMgkC,gBAAkB,GACxChkC,EAAMgkC,gBAGR,SAASC,GAAgBlK,GAC9B,MAAMiK,EAAiBD,KACvBhK,EAAU91C,MAAM6P,QAAQimC,GAAWA,EAAU,CAACA,GAE9C,IAAK,MAAM1F,KAAU0F,EAAS,CAC5B,MAAMmK,EAAmB1P,GAAgBH,GAEpC2P,EAAezyB,KAAK4yB,GAAoBD,IAAqBC,IAChEH,EAAe1T,QAAQ4T,IAItB,SAASE,KACd,OAAOL,KCjBT,MAAMM,GAAc,aACblO,eAAemO,GAAa7f,EAAMsV,EAAU,GAAIh+B,EAASgT,GAC9D,IAAKw1B,GAAkB9f,GACrB,OAAO,KAGT,IAAI4P,EAASmQ,GAAiB/f,EAAMsV,EAAS,IAAKh+B,EAChDu8B,SAAS,GACRvpB,GAEH,GAAIslB,EACF,OAAOA,EAQT,GALId,GAAO9O,KACTA,QAAaA,EAAKxmC,MAAM,EAAG,IAAIm1C,cAC/BiB,EAASmQ,GAAiB/f,EAAMsV,EAASh+B,EAASgT,KAG/CslB,IAAwB,OAAZt4B,QAAgC,IAAZA,IAAsBA,EAAQu8B,SACjE,MAAM,IAAI3iC,MAAM8uC,GAAwBhgB,IAG1C,OAAO4P,EAEF,SAASmQ,GAAiB/f,EAAMsV,EAAU,GAAIh+B,EAASgT,GAC5D,IAAKw1B,GAAkB9f,GACrB,OAAO,KAGT,GAAIsV,IAAY91C,MAAM6P,QAAQimC,GAC5B,OAAOvF,GAAgBuF,GAGzB,IAAI8J,EAAmB,GAEnB9J,IACF8J,EAAmBA,EAAiBp4C,OAAOsuC,IAG3B,OAAZh+B,QAAgC,IAAZA,GAAsBA,EAAQ2oC,yBACtDb,EAAiBh9C,QAAQu9C,MAG3BO,GAAiBd,GACjB,MAAMxP,EAASuQ,GAAqBngB,EAAMof,EAAkB9nC,EAASgT,GAErE,IAAKslB,IAAwB,OAAZt4B,QAAgC,IAAZA,IAAsBA,EAAQu8B,SACjE,MAAM,IAAI3iC,MAAM8uC,GAAwBhgB,IAG1C,OAAO4P,EAGT,SAASuQ,GAAqBngB,EAAMsV,EAASh+B,EAASgT,GACpD,MAAM,IACJ2mB,EAAG,KACHhzC,GACEkzC,GAAsBnR,GACpBogB,EAAUnP,IAAoB,OAAZ3mB,QAAgC,IAAZA,OAAqB,EAASA,EAAQ2mB,KAClF,IAAIrB,EAAS,KAUb,OARgB,OAAZt4B,QAAgC,IAAZA,GAAsBA,EAAQs8B,WACpDhE,EAASyQ,GAAqB/K,EAAqB,OAAZh+B,QAAgC,IAAZA,OAAqB,EAASA,EAAQs8B,WAGnGhE,EAASA,GAAU0Q,GAAgBhL,EAAS8K,GAC5CxQ,EAASA,GAAUyQ,GAAqB/K,EAASr3C,GACjD2xC,EAASA,GAAU2Q,GAAyBjL,EAAStV,GACrD4P,EAASA,GAAUyQ,GAAqB/K,EAAqB,OAAZh+B,QAAgC,IAAZA,OAAqB,EAASA,EAAQkpC,kBACpG5Q,EAGT,SAASkQ,GAAkB9f,GACzB,QAAIA,aAAgB0O,UACE,MAAhB1O,EAAKqS,QAQb,SAAS2N,GAAwBhgB,GAC/B,MAAM,IACJiR,EAAG,KACHhzC,GACEkzC,GAAsBnR,GAC1B,IAAIroB,EAAU,wBAUd,OARIqoB,IACFroB,GAAW,WAAW8oC,GAAmBzgB,sBAAyB/hC,MAGhEgzC,IACFt5B,GAAW,SAASs5B,GAGft5B,EAGT,SAASuoC,GAAiB5K,GACxB,IAAK,MAAM1F,KAAU0F,EACnBvF,GAAgBH,GAIpB,SAAS0Q,GAAgBhL,EAASrE,GAChC,MAAMyP,EAAQzP,GAAO2O,GAAY9hD,KAAKmzC,GAChC/1C,EAAYwlD,GAASA,EAAM,GACjC,OAAOxlD,EAAYylD,GAAsBrL,EAASp6C,GAAa,KAGjE,SAASylD,GAAsBrL,EAASp6C,GACtCA,EAAYA,EAAUkc,cAEtB,IAAK,MAAMw4B,KAAU0F,EACnB,IAAK,MAAMsL,KAAmBhR,EAAO70C,WACnC,GAAI6lD,EAAgBxpC,gBAAkBlc,EACpC,OAAO00C,EAKb,OAAO,KAGT,SAASyQ,GAAqB/K,EAAS1B,GACrC,IAAK,MAAMhE,KAAU0F,EAAS,CAC5B,GAAI1F,EAAOiR,WAAajR,EAAOiR,UAAUrO,SAASoB,GAChD,OAAOhE,EAGT,GAAIgE,IAAa,iBAAiBhE,EAAOtU,GACvC,OAAOsU,EAIX,OAAO,KAGT,SAAS2Q,GAAyBjL,EAAStV,GACzC,IAAKA,EACH,OAAO,KAGT,IAAK,MAAM4P,KAAU0F,EACnB,GAAoB,kBAATtV,GACT,GAAI8gB,GAAoB9gB,EAAM4P,GAC5B,OAAOA,OAEJ,GAAI92B,YAAYC,OAAOinB,IAC5B,GAAI+gB,GAAsB/gB,EAAKhgC,OAAQggC,EAAKqc,WAAYzM,GACtD,OAAOA,OAEJ,GAAI5P,aAAgBlnB,YAAa,CACtC,MAAMujC,EAAa,EAEnB,GAAI0E,GAAsB/gB,EAAMqc,EAAYzM,GAC1C,OAAOA,EAKb,OAAO,KAGT,SAASkR,GAAoB9gB,EAAM4P,GACjC,GAAIA,EAAOoR,SACT,OAAOpR,EAAOoR,SAAShhB,GAGzB,MAAMihB,EAAQzhD,MAAM6P,QAAQugC,EAAOqR,OAASrR,EAAOqR,MAAQ,CAACrR,EAAOqR,OACnE,OAAOA,EAAMC,KAAK3yB,GAAQyR,EAAK0Q,WAAWniB,IAG5C,SAASwyB,GAAsB/gB,EAAMqc,EAAYzM,GAC/C,MAAMqR,EAAQzhD,MAAM6P,QAAQugC,EAAOqR,OAASrR,EAAOqR,MAAQ,CAACrR,EAAOqR,OACnE,OAAOA,EAAMC,KAAK3yB,GAAQ4yB,GAAWnhB,EAAMqc,EAAYzM,EAAQrhB,IAGjE,SAAS4yB,GAAWnhB,EAAMqc,EAAYzM,EAAQrhB,GAC5C,GAAIA,aAAgBzV,YAClB,OAAO0jC,GAAoBjuB,EAAMyR,EAAMzR,EAAKkjB,YAG9C,cAAeljB,GACb,IAAK,WACH,OAAOA,EAAKyR,EAAM4P,GAEpB,IAAK,SACH,MAAMwR,EAAQC,GAAerhB,EAAMqc,EAAY9tB,EAAK5uB,QACpD,OAAO4uB,IAAS6yB,EAElB,QACE,OAAO,GAIb,SAASX,GAAmBzgB,EAAMrgC,EAAS,GACzC,GAAoB,kBAATqgC,EACT,OAAOA,EAAKxmC,MAAM,EAAGmG,GAChB,GAAImZ,YAAYC,OAAOinB,GAC5B,OAAOqhB,GAAerhB,EAAKhgC,OAAQggC,EAAKqc,WAAY18C,GAC/C,GAAIqgC,aAAgBlnB,YAAa,CACtC,MAAMujC,EAAa,EACnB,OAAOgF,GAAerhB,EAAMqc,EAAY18C,GAG1C,MAAO,GAGT,SAAS0hD,GAAe1S,EAAa0N,EAAY18C,GAC/C,GAAIgvC,EAAY8C,WAAa4K,EAAa18C,EACxC,MAAO,GAGT,MAAM2hD,EAAW,IAAItoC,SAAS21B,GAC9B,IAAIyS,EAAQ,GAEZ,IAAK,IAAIn6C,EAAI,EAAGA,EAAItH,EAAQsH,IAC1Bm6C,GAAS1jD,OAAO01C,aAAakO,EAASC,SAASlF,EAAap1C,IAG9D,OAAOm6C,EC7NF1P,eAAe,GAAM1R,EAAMsV,EAASh+B,EAASgT,GAClD,IAAQA,GAA8B,kBAAZA,IAEtBgrB,GAAY91C,MAAM6P,QAAQimC,IAAa3F,GAAe2F,KACxDhrB,OAAUzrB,EACVyY,EAAUg+B,EACVA,OAAUz2C,GAGZmhC,QAAaA,EACb1oB,EAAUA,GAAW,GACrB,MAAM,IACJ25B,GACEE,GAAsBnR,GACpBwhB,EAAelM,EACf8J,EAAmBD,GAAsBqC,EAAcl3B,GACvDslB,QAAeiQ,GAAa7f,EAAMof,EAAkB9nC,GAE1D,OAAKs4B,GAILt4B,EAAUo+B,GAAiBp+B,EAASs4B,EAAQwP,EAAkBnO,GAC9D3mB,EAAU00B,GAAiB,CACzB/N,MACAvK,MAAK,GACL4O,QAAS8J,GACR9nC,EAASgT,SACCm3B,GAAgB7R,EAAQ5P,EAAM1oB,EAASgT,IAT3C,KAYXonB,eAAe+P,GAAgB7R,EAAQ5P,EAAM1oB,EAASgT,GAIpD,GAHA6sB,GAAsBvH,GACtB5P,QAAa8e,GAA+B9e,EAAM4P,EAAQt4B,GAEtDs4B,EAAOM,eAAiC,kBAATlQ,EAEjC,OADA1oB,EAAQq9B,SAAW,OACZ/E,EAAOM,cAAclQ,EAAM1oB,EAASgT,EAASslB,GAGtD,GAAIgM,GAAmBhM,EAAQt4B,GAC7B,aAAaukC,GAAgBjM,EAAQ5P,EAAM1oB,EAASgT,EAAS,IAG/D,GAAIslB,EAAOO,WAA6B,kBAATnQ,EAC7B,aAAa4P,EAAOO,UAAUnQ,EAAM1oB,EAASgT,EAASslB,GAGxD,GAAIA,EAAOlJ,MACT,aAAakJ,EAAOlJ,MAAM1G,EAAM1oB,EAASgT,EAASslB,GAIpD,MADA,IAAQA,EAAO8R,WACT,IAAIxwC,MAAS0+B,EAAOtU,GAAV,oDCzDXoW,eAAeiQ,GAAK1Q,EAAKqE,EAASh+B,EAASgT,GAC3C9qB,MAAM6P,QAAQimC,IAAa3F,GAAe2F,UACnCz2C,EACVyY,EAAUg+B,EACVA,OAAUz2C,GAGZ,MAAM20C,EAAQqC,GAAiBv+B,GAC/B,IAAI0oB,EAAOiR,EAUX,MARmB,kBAARA,IACTjR,QAAawT,EAAMvC,IAGjBnC,GAAOmC,KACTjR,QAAawT,EAAMvC,UAGR,GAAMjR,EAAMsV,EAASh+B,GCrBrB,MAAM,GACnB,YAAYgkB,EAAI0E,EAAM1V,GACpBnrB,KAAKm8B,GAAKA,EACVn8B,KAAKmrB,QAAUA,EACfnrB,KAAKyiD,WAAa,EAClBziD,KAAK0iD,aAAe,IAAIxJ,IACxBl5C,KAAK2iD,QAAQ9hB,GAGf,UAAU+hB,GACR5iD,KAAK0iD,aAAa/hB,IAAIiiB,GAGxB,YAAYA,GACV5iD,KAAK0iD,aAAaxd,OAAO0d,GAG3B,QACE,OAAO5iD,KAAK0iD,aAAa5hD,KAAO,EAGlC,UAEA,UACE,OAAOd,KAAK6iD,SAAW7iD,KAAK8iD,OAAStP,QAAQoH,OAAO56C,KAAK8iD,QAAU9iD,KAAK+iD,SAAW/iD,KAAK0wC,QAAQ5D,KAAK,IAAM9sC,KAAKgjD,WAGlH,QAAQniB,EAAMoiB,GACZ,GAAIpiB,IAAS7gC,KAAKkjD,QAAUD,EAC1B,OAGFjjD,KAAKkjD,MAAQriB,EACb,MAAMsiB,IAAcnjD,KAAKyiD,WACzB,IAAIhS,EAAS5P,EAEO,kBAATA,IACT4P,EAAS+R,GAAK3hB,IAGZ4P,aAAkB+C,SACpBxzC,KAAK6iD,UAAW,EAChB7iD,KAAK0wC,QAAUD,EAAO3D,KAAK7kC,IACrBjI,KAAKyiD,aAAeU,IACtBnjD,KAAK6iD,UAAW,EAChB7iD,KAAK8iD,OAAS,KACd9iD,KAAK+iD,SAAW96C,KAEjBm7C,MAAMhpD,IACH4F,KAAKyiD,aAAeU,IACtBnjD,KAAK6iD,UAAW,EAChB7iD,KAAK8iD,OAAS1oD,IAAS,OAI3B4F,KAAK6iD,UAAW,EAChB7iD,KAAK8iD,OAAS,KACd9iD,KAAK+iD,SAAWliB,GAGlB,IAAK,MAAMwiB,KAAcrjD,KAAK0iD,aAC5BW,EAAWC,SAAStjD,KAAKgjD,YC7DhB,MAAM,GACnB,aAAY,GACV9nD,EAAE,SACFqoD,IAEAvjD,KAAKujD,SAAWA,GAAY,cAC5BvjD,KAAKwjD,SAAW,CACdtoD,KACAuoD,gBAAiBzjD,MAEnBA,KAAK0jD,WAAa,GAClB1jD,KAAK2jD,WAAa,GAClB3jD,KAAK4jD,cAAgB,KAGvB,SAASC,GACP,QAAIA,EAAWtS,WAAWvxC,KAAKujD,WAIxBM,KAAc7jD,KAAK0jD,WAG5B,KAAI,WACFG,EAAU,KACVhjB,EAAI,YACJoiB,GAAc,EAAK,WACnBa,GAAa,IAEb,IAAIC,EAAM/jD,KAAK0jD,WAAWG,GAEtBE,EACFA,EAAIpB,QAAQ9hB,EAAMoiB,IAElBc,EAAM,IAAI,GAASF,EAAYhjB,EAAM7gC,KAAKwjD,UAC1CxjD,KAAK0jD,WAAWG,GAAcE,GAGhCA,EAAID,WAAaA,EAGnB,OAAOD,GACL,MAAME,EAAM/jD,KAAK0jD,WAAWG,GAExBE,IACFA,EAAI7e,gBACGllC,KAAK0jD,WAAWG,IAI3B,aAAY,WACVG,IAEA,MAAMpB,EAAW5iD,KAAK2jD,WAAWK,GAEjC,GAAIpB,EAAU,CACZ,IAAK,MAAMqB,KAAarB,EAAU,CAChC,MAAMsB,EAAUtB,EAASqB,GAErBC,EAAQjS,UACViS,EAAQjS,SAASkS,YAAYD,UAI1BlkD,KAAK2jD,WAAWK,GACvBhkD,KAAKokD,SAIT,WAAU,WACRP,EAAU,SACVP,EAAQ,WACRU,EAAU,UACVC,EAAY,YAEZ,MACEP,WAAYW,EAAS,SACrBd,GACEvjD,KAEA6jD,EAAWtS,WAAWgS,KACxBM,EAAaA,EAAW3qC,QAAQqqC,EAAU,IAErCc,EAAUR,IACb7jD,KAAK2gC,IAAI,CACPkjB,aACAhjB,KAAM,KACNijB,YAAY,KAKlB,MAAMC,EAAMM,EAAUR,GAItB,GAFA7jD,KAAKskD,OAAON,EAAYC,EAAWF,EAAKT,GAEpCS,EACF,OAAOA,EAAIf,UAMf,QACOhjD,KAAK4jD,gBACR5jD,KAAK4jD,cAAgBntC,WAAW,IAAMzW,KAAKukD,SAAU,IAIzD,WACE,IAAK,MAAMpoD,KAAO6D,KAAK0jD,WACrB1jD,KAAK0jD,WAAWvnD,GAAK+oC,SAIzB,OAAO8e,EAAYC,EAAWhS,EAAUqR,GACtC,MAAMkB,EAAYxkD,KAAK2jD,WACjBf,EAAW4B,EAAUR,GAAcQ,EAAUR,IAAe,GAC5DE,EAAUtB,EAASqB,IAAc,GAEnCC,EAAQjS,WACViS,EAAQjS,SAASkS,YAAYD,GAC7BA,EAAQjS,SAAW,KACnBjyC,KAAKokD,SAGHnS,IACF2Q,EAASqB,GAAaC,EACtBA,EAAQZ,SAAWA,EACnBY,EAAQjS,SAAWA,EACnBA,EAASwS,UAAUP,IAIvB,SACElkD,KAAK4jD,cAAgB,KAErB,IAAK,MAAMznD,KAAOnC,OAAOiC,KAAK+D,KAAK0jD,YAAa,CAC9C,MAAMK,EAAM/jD,KAAK0jD,WAAWvnD,GAEvB4nD,EAAID,YAAeC,EAAIW,UAC1BX,EAAI7e,gBACGllC,KAAK0jD,WAAWvnD,MC/IxB,MAAMwoD,GACX,YAAYlwB,GACVz0B,KAAK4kD,MAAQ,GACb5kD,KAAKy0B,MAAQ,CACXowB,UAAW,EACXC,SAAU,KAEZ9kD,KAAK86C,SAASrmB,GAGhB,SAASA,GACPz6B,OAAO4wB,OAAO5qB,KAAKy0B,MAAOA,GAG5B,SAASspB,EAAYxgB,GAAO,KAC1Bz8B,EAAO,EAAC,KACRhC,EAAI,QACJimD,EAAU,EAAC,KACX50C,GAAO,EAAK,WACZ60C,GAAa,EAAK,SAClBC,IAEA,MAAMj0B,EAAOlyB,GAAQi/C,GAAcA,EAAW5iC,aAAe5W,aACvD2gD,EAAU3nB,EAAQz8B,EAAOikD,EAE/B,GAAIprC,YAAYC,OAAOmkC,GAAa,CAClC,GAAImH,GAAWnH,EAAWv9C,OACxB,OAAOu9C,EAGT,GAAImH,EAAUnH,EAAWoH,mBAAqBpH,EAAWl9C,OAAOyxC,WAC9D,OAAO,IAAIthB,EAAK+sB,EAAWl9C,OAAQ,EAAGqkD,GAI1C,IAAIE,EAEAH,IACFG,EAAUH,EAAWnkD,EAAOikD,GAG9B,MAAMM,EAAWrlD,KAAKslD,UAAUt0B,EAAMk0B,EAASF,EAAYI,GAU3D,OARIrH,GAAc5tC,EAChBk1C,EAASvlC,IAAIi+B,GACHiH,GACVK,EAASn9C,KAAK,EAAG,EAAG,GAGtBlI,KAAKulD,SAASxH,GAEPsH,EAGT,QAAQtH,GACN/9C,KAAKulD,SAASxH,GAGhB,UAAU/sB,EAAMlwB,EAAMkkD,EAAYI,GAChC,IAAII,EAAiBnjD,KAAKC,IAAID,KAAKojD,KAAK3kD,EAAOd,KAAKy0B,MAAMowB,WAAY,GAElEW,EAAiBJ,IACnBI,EAAiBJ,GAGnB,MAAMM,EAAO1lD,KAAK4kD,MACZtS,EAAathB,EAAKm0B,kBAAoBK,EACtC19C,EAAI49C,EAAKC,UAAUjhD,GAAKA,EAAE4tC,YAAcA,GAE9C,GAAIxqC,GAAK,EAAG,CACV,MAAMkI,EAAQ,IAAIghB,EAAK00B,EAAK9hD,OAAOkE,EAAG,GAAG,GAAI,EAAG09C,GAMhD,OAJIR,GACFh1C,EAAM9H,KAAK,GAGN8H,EAGT,OAAO,IAAIghB,EAAKw0B,GAGlB,SAASzH,GACP,IAAKpkC,YAAYC,OAAOmkC,GACtB,OAGF,MAAM2H,EAAO1lD,KAAK4kD,OACZ,OACJ/jD,GACEk9C,GACE,WACJzL,GACEzxC,EACEiH,EAAI49C,EAAKC,UAAUjhD,GAAKA,EAAE4tC,YAAcA,GAE1CxqC,EAAI,EACN49C,EAAKziD,KAAKpC,IACDiH,EAAI,GAAK49C,EAAKllD,OAASR,KAAKy0B,MAAMqwB,WAC3CY,EAAK9hD,OAAOkE,EAAG,EAAGjH,GAGhB6kD,EAAKllD,OAASR,KAAKy0B,MAAMqwB,UAC3BY,EAAKlvC,SAKI,c,aC1GR,SAASovC,KACd,MAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAMhD,SAASC,GAAkBC,GAChC,MAAO,CAACA,EAAkB,IAAKA,EAAkB,IAAKA,EAAkB,KAEnE,SAASC,GAAiBC,GAC/B,MAAMC,EAAS,GAOf,OANAA,EAAO35C,KAAO45C,GAAgBF,EAAqB,GAAKA,EAAqB,GAAIA,EAAqB,GAAKA,EAAqB,GAAIA,EAAqB,IAAMA,EAAqB,GAAIA,EAAqB,IAAMA,EAAqB,KACxOC,EAAO15C,MAAQ25C,GAAgBF,EAAqB,GAAKA,EAAqB,GAAIA,EAAqB,GAAKA,EAAqB,GAAIA,EAAqB,IAAMA,EAAqB,GAAIA,EAAqB,IAAMA,EAAqB,KACzOC,EAAOz5C,OAAS05C,GAAgBF,EAAqB,GAAKA,EAAqB,GAAIA,EAAqB,GAAKA,EAAqB,GAAIA,EAAqB,IAAMA,EAAqB,GAAIA,EAAqB,IAAMA,EAAqB,KAC1OC,EAAOx5C,IAAMy5C,GAAgBF,EAAqB,GAAKA,EAAqB,GAAIA,EAAqB,GAAKA,EAAqB,GAAIA,EAAqB,IAAMA,EAAqB,GAAIA,EAAqB,IAAMA,EAAqB,KACvOC,EAAOv5C,KAAOw5C,GAAgBF,EAAqB,GAAKA,EAAqB,GAAIA,EAAqB,GAAKA,EAAqB,GAAIA,EAAqB,IAAMA,EAAqB,IAAKA,EAAqB,IAAMA,EAAqB,KACzOC,EAAOt5C,IAAMu5C,GAAgBF,EAAqB,GAAKA,EAAqB,GAAIA,EAAqB,GAAKA,EAAqB,GAAIA,EAAqB,IAAMA,EAAqB,IAAKA,EAAqB,IAAMA,EAAqB,KACjOC,EAET,MAAME,GAAgB,IAAI,QAE1B,SAASD,GAAgBzhD,EAAGC,EAAGsG,EAAGo7C,GAChCD,GAAcrmC,IAAIrb,EAAGC,EAAGsG,GACxB,MAAMq7C,EAAIF,GAAc76C,MACxB,MAAO,CACLunB,SAAUuzB,EAAIC,EACdC,OAAQ,IAAI,SAAS7hD,EAAI4hD,GAAI3hD,EAAI2hD,GAAIr7C,EAAIq7C,IAItC,SAASE,GAAYnhD,GAC1B,OAAOA,EAAI/C,KAAKmkD,OAAOphD,GAEzB,IAAIqhD,GACG,SAASC,GAAuB3I,GAAY,KACjDj9C,EAAO,EAAC,WACR6lD,EAAa,EAAC,SACdC,IAEKpsC,OAAOC,SAASmsC,KACnBA,EAAW7I,EAAWv9C,QAGxB,MAAM+8B,GAASqpB,EAAWD,GAAc7lD,EACxC2lD,GAAe,GAAkBI,SAASJ,GAAclpB,EAAO,CAC7Dz+B,KAAMyF,aACNzD,KAAa,EAAPA,IAER,IAAIgmD,EAAcH,EACdI,EAAc,EAElB,MAAOD,EAAcF,EAAU,CAC7B,IAAK,IAAI9hC,EAAI,EAAGA,EAAIhkB,EAAMgkB,IAAK,CAC7B,MAAM7nB,EAAQ8gD,EAAW+I,KACzBL,GAAaM,EAAcjiC,GAAK7nB,EAChCwpD,GAAaM,EAAcjiC,EAAIhkB,GAAQylD,GAAYtpD,GAGrD8pD,GAAsB,EAAPjmD,EAGjB,OAAO2lD,GAAaO,SAAS,EAAGzpB,EAAQz8B,EAAO,GC3D1C,IACI+Z,GAAqC,qBAAjBtW,aAA+BA,aAAelE,MACzDgC,KAAK0Y,OAUZ1Y,KAAKwP,GCiPX,SAAShJ,GAAOvE,EAAKG,GAC1B,IAAIqE,EAAMrE,EAAE,GACR8D,EAAM9D,EAAE,GACR+D,EAAM/D,EAAE,GACRgE,EAAMhE,EAAE,GACRsE,EAAMtE,EAAE,GACRuE,EAAMvE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GACRwE,EAAMxE,EAAE,GACRyE,EAAMzE,EAAE,GACR0E,EAAM1E,EAAE,IACRmE,EAAMnE,EAAE,IACR2E,EAAM3E,EAAE,IACR4E,EAAM5E,EAAE,IACR6E,EAAM7E,EAAE,IACR8E,EAAM9E,EAAE,IACR+E,EAAMV,EAAME,EAAMT,EAAMQ,EACxBU,EAAMX,EAAMJ,EAAMF,EAAMO,EACxBW,EAAMZ,EAAMH,EAAMF,EAAMM,EACxBY,EAAMpB,EAAMG,EAAMF,EAAMQ,EACxBY,EAAMrB,EAAMI,EAAMF,EAAMO,EACxBa,EAAMrB,EAAMG,EAAMF,EAAMC,EACxBoB,EAAMb,EAAMI,EAAMH,EAAME,EACxBW,EAAMd,EAAMK,EAAMH,EAAMC,EACxBY,EAAMf,EAAMM,EAAMX,EAAMQ,EACxBa,EAAMf,EAAMI,EAAMH,EAAME,EACxBa,EAAMhB,EAAMK,EAAMX,EAAMS,EACxBc,EAAMhB,EAAMI,EAAMX,EAAMU,EAExBc,EAAMZ,EAAMW,EAAMV,EAAMS,EAAMR,EAAMO,EAAMN,EAAMK,EAAMJ,EAAMG,EAAMF,EAAMC,EAE5E,OAAKM,GAILA,EAAM,EAAMA,EACZ9F,EAAI,IAAM0E,EAAMmB,EAAMzB,EAAMwB,EAAMvB,EAAMsB,GAAOG,EAC/C9F,EAAI,IAAMkE,EAAM0B,EAAM3B,EAAM4B,EAAM1B,EAAMwB,GAAOG,EAC/C9F,EAAI,IAAM+E,EAAMQ,EAAMP,EAAMM,EAAML,EAAMI,GAAOS,EAC/C9F,EAAI,IAAM6E,EAAMS,EAAMV,EAAMW,EAAMjB,EAAMe,GAAOS,EAC/C9F,EAAI,IAAMoE,EAAMsB,EAAMjB,EAAMoB,EAAMxB,EAAMoB,GAAOK,EAC/C9F,EAAI,IAAMwE,EAAMqB,EAAM3B,EAAMwB,EAAMvB,EAAMsB,GAAOK,EAC/C9F,EAAI,IAAMgF,EAAMI,EAAMN,EAAMS,EAAMN,EAAME,GAAOW,EAC/C9F,EAAI,IAAM2E,EAAMY,EAAMV,EAAMO,EAAMd,EAAMa,GAAOW,EAC/C9F,EAAI,IAAMyE,EAAMmB,EAAMlB,EAAMgB,EAAMrB,EAAMmB,GAAOM,EAC/C9F,EAAI,IAAMiE,EAAMyB,EAAMlB,EAAMoB,EAAMzB,EAAMqB,GAAOM,EAC/C9F,EAAI,KAAO8E,EAAMQ,EAAMP,EAAMK,EAAMH,EAAMC,GAAOY,EAChD9F,EAAI,KAAO4E,EAAMQ,EAAMT,EAAMW,EAAMhB,EAAMY,GAAOY,EAChD9F,EAAI,KAAO0E,EAAMe,EAAMhB,EAAMkB,EAAMvB,EAAMoB,GAAOM,EAChD9F,EAAI,KAAOwE,EAAMmB,EAAM1B,EAAMwB,EAAMvB,EAAMsB,GAAOM,EAChD9F,EAAI,KAAO+E,EAAMI,EAAML,EAAMO,EAAML,EAAME,GAAOY,EAChD9F,EAAI,KAAO2E,EAAMU,EAAMT,EAAMO,EAAMN,EAAMK,GAAOY,EACzC9F,GApBE,KAiHJ,SAASgG,GAAShG,EAAKG,EAAGC,GAC/B,IAAIoE,EAAMrE,EAAE,GACR8D,EAAM9D,EAAE,GACR+D,EAAM/D,EAAE,GACRgE,EAAMhE,EAAE,GACRsE,EAAMtE,EAAE,GACRuE,EAAMvE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GACRwE,EAAMxE,EAAE,GACRyE,EAAMzE,EAAE,GACR0E,EAAM1E,EAAE,IACRmE,EAAMnE,EAAE,IACR2E,EAAM3E,EAAE,IACR4E,EAAM5E,EAAE,IACR6E,EAAM7E,EAAE,IACR8E,EAAM9E,EAAE,IAER8F,EAAK7F,EAAE,GACP8F,EAAK9F,EAAE,GACP+F,EAAK/F,EAAE,GACPgG,EAAKhG,EAAE,GA6BX,OA5BAJ,EAAI,GAAKiG,EAAKzB,EAAM0B,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAC/C9E,EAAI,GAAKiG,EAAKhC,EAAMiC,EAAKxB,EAAMyB,EAAKvB,EAAMwB,EAAKrB,EAC/C/E,EAAI,GAAKiG,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAKtB,EAAMuB,EAAKpB,EAC/ChF,EAAI,GAAKiG,EAAK9B,EAAM+B,EAAK7B,EAAM8B,EAAK7B,EAAM8B,EAAKnB,EAC/CgB,EAAK7F,EAAE,GACP8F,EAAK9F,EAAE,GACP+F,EAAK/F,EAAE,GACPgG,EAAKhG,EAAE,GACPJ,EAAI,GAAKiG,EAAKzB,EAAM0B,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAC/C9E,EAAI,GAAKiG,EAAKhC,EAAMiC,EAAKxB,EAAMyB,EAAKvB,EAAMwB,EAAKrB,EAC/C/E,EAAI,GAAKiG,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAKtB,EAAMuB,EAAKpB,EAC/ChF,EAAI,GAAKiG,EAAK9B,EAAM+B,EAAK7B,EAAM8B,EAAK7B,EAAM8B,EAAKnB,EAC/CgB,EAAK7F,EAAE,GACP8F,EAAK9F,EAAE,GACP+F,EAAK/F,EAAE,IACPgG,EAAKhG,EAAE,IACPJ,EAAI,GAAKiG,EAAKzB,EAAM0B,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAC/C9E,EAAI,GAAKiG,EAAKhC,EAAMiC,EAAKxB,EAAMyB,EAAKvB,EAAMwB,EAAKrB,EAC/C/E,EAAI,IAAMiG,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAKtB,EAAMuB,EAAKpB,EAChDhF,EAAI,IAAMiG,EAAK9B,EAAM+B,EAAK7B,EAAM8B,EAAK7B,EAAM8B,EAAKnB,EAChDgB,EAAK7F,EAAE,IACP8F,EAAK9F,EAAE,IACP+F,EAAK/F,EAAE,IACPgG,EAAKhG,EAAE,IACPJ,EAAI,IAAMiG,EAAKzB,EAAM0B,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAChD9E,EAAI,IAAMiG,EAAKhC,EAAMiC,EAAKxB,EAAMyB,EAAKvB,EAAMwB,EAAKrB,EAChD/E,EAAI,IAAMiG,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAKtB,EAAMuB,EAAKpB,EAChDhF,EAAI,IAAMiG,EAAK9B,EAAM+B,EAAK7B,EAAM8B,EAAK7B,EAAM8B,EAAKnB,EACzCjF,EAWF,SAAS,GAAUA,EAAKG,EAAGmG,GAChC,IAGI9B,EAAKP,EAAKC,EAAKC,EACfM,EAAKC,EAAKN,EAAKC,EACfM,EAAKC,EAAKC,EAAKP,EALfxD,EAAIwF,EAAE,GACNvF,EAAIuF,EAAE,GACNtF,EAAIsF,EAAE,GAyCV,OApCInG,IAAMH,GACRA,EAAI,IAAMG,EAAE,GAAKW,EAAIX,EAAE,GAAKY,EAAIZ,EAAE,GAAKa,EAAIb,EAAE,IAC7CH,EAAI,IAAMG,EAAE,GAAKW,EAAIX,EAAE,GAAKY,EAAIZ,EAAE,GAAKa,EAAIb,EAAE,IAC7CH,EAAI,IAAMG,EAAE,GAAKW,EAAIX,EAAE,GAAKY,EAAIZ,EAAE,IAAMa,EAAIb,EAAE,IAC9CH,EAAI,IAAMG,EAAE,GAAKW,EAAIX,EAAE,GAAKY,EAAIZ,EAAE,IAAMa,EAAIb,EAAE,MAE9CqE,EAAMrE,EAAE,GACR8D,EAAM9D,EAAE,GACR+D,EAAM/D,EAAE,GACRgE,EAAMhE,EAAE,GACRsE,EAAMtE,EAAE,GACRuE,EAAMvE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GACRwE,EAAMxE,EAAE,GACRyE,EAAMzE,EAAE,GACR0E,EAAM1E,EAAE,IACRmE,EAAMnE,EAAE,IACRH,EAAI,GAAKwE,EACTxE,EAAI,GAAKiE,EACTjE,EAAI,GAAKkE,EACTlE,EAAI,GAAKmE,EACTnE,EAAI,GAAKyE,EACTzE,EAAI,GAAK0E,EACT1E,EAAI,GAAKoE,EACTpE,EAAI,GAAKqE,EACTrE,EAAI,GAAK2E,EACT3E,EAAI,GAAK4E,EACT5E,EAAI,IAAM6E,EACV7E,EAAI,IAAMsE,EACVtE,EAAI,IAAMwE,EAAM1D,EAAI2D,EAAM1D,EAAI4D,EAAM3D,EAAIb,EAAE,IAC1CH,EAAI,IAAMiE,EAAMnD,EAAI4D,EAAM3D,EAAI6D,EAAM5D,EAAIb,EAAE,IAC1CH,EAAI,IAAMkE,EAAMpD,EAAIsD,EAAMrD,EAAI8D,EAAM7D,EAAIb,EAAE,IAC1CH,EAAI,IAAMmE,EAAMrD,EAAIuD,EAAMtD,EAAIuD,EAAMtD,EAAIb,EAAE,KAGrCH,EAWF,SAAS,GAAMA,EAAKG,EAAGmG,GAC5B,IAAIxF,EAAIwF,EAAE,GACNvF,EAAIuF,EAAE,GACNtF,EAAIsF,EAAE,GAiBV,OAhBAtG,EAAI,GAAKG,EAAE,GAAKW,EAChBd,EAAI,GAAKG,EAAE,GAAKW,EAChBd,EAAI,GAAKG,EAAE,GAAKW,EAChBd,EAAI,GAAKG,EAAE,GAAKW,EAChBd,EAAI,GAAKG,EAAE,GAAKY,EAChBf,EAAI,GAAKG,EAAE,GAAKY,EAChBf,EAAI,GAAKG,EAAE,GAAKY,EAChBf,EAAI,GAAKG,EAAE,GAAKY,EAChBf,EAAI,GAAKG,EAAE,GAAKa,EAChBhB,EAAI,GAAKG,EAAE,GAAKa,EAChBhB,EAAI,IAAMG,EAAE,IAAMa,EAClBhB,EAAI,IAAMG,EAAE,IAAMa,EAClBhB,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACLH,EDpfJjC,KAAKkJ,QAAOlJ,KAAKkJ,MAAQ,WAC5B,IAAIlG,EAAI,EACJyC,EAAI5F,UAAU1B,OAElB,MAAOsH,IACLzC,GAAKnD,UAAU4F,GAAK5F,UAAU4F,GAGhC,OAAOzF,KAAK2E,KAAK3B,KC+zDZ,IC12DI,GAAU,KACV,GAAqC,qBAAjBd,aAA+BA,aAAelE,MACzDgC,KAAK0Y,OAUZ1Y,KAAKwP,GCLX,SAAS,KACd,IAAIvN,EAAM,IAAI,GAAoB,GASlC,OAPI,IAAuBC,eACzBD,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,GAGJA,EA0NF,SAAS,GAAMA,EAAKG,EAAGC,GAK5B,OAJAJ,EAAI,GAAKG,EAAE,GAAKC,EAChBJ,EAAI,GAAKG,EAAE,GAAKC,EAChBJ,EAAI,GAAKG,EAAE,GAAKC,EAChBJ,EAAI,GAAKG,EAAE,GAAKC,EACTJ,EA2OF,SAASY,GAAcZ,EAAKG,EAAGU,GACpC,IAAIC,EAAIX,EAAE,GACNY,EAAIZ,EAAE,GACNa,EAAIb,EAAE,GACNc,EAAId,EAAE,GAKV,OAJAH,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,GAAKG,EAAIH,EAAE,IAAMI,EAClDjB,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,GAAKG,EAAIH,EAAE,IAAMI,EAClDjB,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,IAAMG,EAAIH,EAAE,IAAMI,EACnDjB,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,IAAMG,EAAIH,EAAE,IAAMI,EAC5CjB,EDjcJjC,KAAKkJ,QAAOlJ,KAAKkJ,MAAQ,WAC5B,IAAIlG,EAAI,EACJyC,EAAI5F,UAAU1B,OAElB,MAAOsH,IACLzC,GAAKnD,UAAU4F,GAAK5F,UAAU4F,GAGhC,OAAOzF,KAAK2E,KAAK3B,MCqkBE,WACnB,IAAIiC,EAAM,MADS,GCpnBd,SAAS,KACd,MAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAEhD,SAAS2/C,GAAgBC,EAAQr0C,GACtC,MAAM5K,EAAS,GAAmB,GAAI4K,EAAQq0C,GAE9C,OADA,GAAWj/C,EAAQA,EAAQ,EAAIA,EAAO,IAC/BA,EAEF,SAAS,GAAIhL,EAAOiY,GACzB,MAAMiyC,EAAUlqD,EAAQiY,EACxB,OAAOiyC,EAAU,EAAIjyC,EAAUiyC,EAAUA,EAM3C,SAASC,GAAOhiD,GACd,OAAO/C,KAAK/C,IAAI8F,GAAK/C,KAAKglD,MAGrB,MAAMC,GAAOjlD,KAAKilD,MAAQF,GC6O1B,SAAS,GAAO9iD,EAAKG,GAC1B,IAAIqE,EAAMrE,EAAE,GACR8D,EAAM9D,EAAE,GACR+D,EAAM/D,EAAE,GACRgE,EAAMhE,EAAE,GACRsE,EAAMtE,EAAE,GACRuE,EAAMvE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GACRwE,EAAMxE,EAAE,GACRyE,EAAMzE,EAAE,GACR0E,EAAM1E,EAAE,IACRmE,EAAMnE,EAAE,IACR2E,EAAM3E,EAAE,IACR4E,EAAM5E,EAAE,IACR6E,EAAM7E,EAAE,IACR8E,EAAM9E,EAAE,IACR+E,EAAMV,EAAME,EAAMT,EAAMQ,EACxBU,EAAMX,EAAMJ,EAAMF,EAAMO,EACxBW,EAAMZ,EAAMH,EAAMF,EAAMM,EACxBY,EAAMpB,EAAMG,EAAMF,EAAMQ,EACxBY,EAAMrB,EAAMI,EAAMF,EAAMO,EACxBa,EAAMrB,EAAMG,EAAMF,EAAMC,EACxBoB,EAAMb,EAAMI,EAAMH,EAAME,EACxBW,EAAMd,EAAMK,EAAMH,EAAMC,EACxBY,EAAMf,EAAMM,EAAMX,EAAMQ,EACxBa,EAAMf,EAAMI,EAAMH,EAAME,EACxBa,EAAMhB,EAAMK,EAAMX,EAAMS,EACxBc,EAAMhB,EAAMI,EAAMX,EAAMU,EAExBc,EAAMZ,EAAMW,EAAMV,EAAMS,EAAMR,EAAMO,EAAMN,EAAMK,EAAMJ,EAAMG,EAAMF,EAAMC,EAE5E,OAAKM,GAILA,EAAM,EAAMA,EACZ9F,EAAI,IAAM0E,EAAMmB,EAAMzB,EAAMwB,EAAMvB,EAAMsB,GAAOG,EAC/C9F,EAAI,IAAMkE,EAAM0B,EAAM3B,EAAM4B,EAAM1B,EAAMwB,GAAOG,EAC/C9F,EAAI,IAAM+E,EAAMQ,EAAMP,EAAMM,EAAML,EAAMI,GAAOS,EAC/C9F,EAAI,IAAM6E,EAAMS,EAAMV,EAAMW,EAAMjB,EAAMe,GAAOS,EAC/C9F,EAAI,IAAMoE,EAAMsB,EAAMjB,EAAMoB,EAAMxB,EAAMoB,GAAOK,EAC/C9F,EAAI,IAAMwE,EAAMqB,EAAM3B,EAAMwB,EAAMvB,EAAMsB,GAAOK,EAC/C9F,EAAI,IAAMgF,EAAMI,EAAMN,EAAMS,EAAMN,EAAME,GAAOW,EAC/C9F,EAAI,IAAM2E,EAAMY,EAAMV,EAAMO,EAAMd,EAAMa,GAAOW,EAC/C9F,EAAI,IAAMyE,EAAMmB,EAAMlB,EAAMgB,EAAMrB,EAAMmB,GAAOM,EAC/C9F,EAAI,IAAMiE,EAAMyB,EAAMlB,EAAMoB,EAAMzB,EAAMqB,GAAOM,EAC/C9F,EAAI,KAAO8E,EAAMQ,EAAMP,EAAMK,EAAMH,EAAMC,GAAOY,EAChD9F,EAAI,KAAO4E,EAAMQ,EAAMT,EAAMW,EAAMhB,EAAMY,GAAOY,EAChD9F,EAAI,KAAO0E,EAAMe,EAAMhB,EAAMkB,EAAMvB,EAAMoB,GAAOM,EAChD9F,EAAI,KAAOwE,EAAMmB,EAAM1B,EAAMwB,EAAMvB,EAAMsB,GAAOM,EAChD9F,EAAI,KAAO+E,EAAMI,EAAML,EAAMO,EAAML,EAAME,GAAOY,EAChD9F,EAAI,KAAO2E,EAAMU,EAAMT,EAAMO,EAAMN,EAAMK,GAAOY,EACzC9F,GApBE,KAiHJ,SAAS,GAASA,EAAKG,EAAGC,GAC/B,IAAIoE,EAAMrE,EAAE,GACR8D,EAAM9D,EAAE,GACR+D,EAAM/D,EAAE,GACRgE,EAAMhE,EAAE,GACRsE,EAAMtE,EAAE,GACRuE,EAAMvE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GACRwE,EAAMxE,EAAE,GACRyE,EAAMzE,EAAE,GACR0E,EAAM1E,EAAE,IACRmE,EAAMnE,EAAE,IACR2E,EAAM3E,EAAE,IACR4E,EAAM5E,EAAE,IACR6E,EAAM7E,EAAE,IACR8E,EAAM9E,EAAE,IAER8F,EAAK7F,EAAE,GACP8F,EAAK9F,EAAE,GACP+F,EAAK/F,EAAE,GACPgG,EAAKhG,EAAE,GA6BX,OA5BAJ,EAAI,GAAKiG,EAAKzB,EAAM0B,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAC/C9E,EAAI,GAAKiG,EAAKhC,EAAMiC,EAAKxB,EAAMyB,EAAKvB,EAAMwB,EAAKrB,EAC/C/E,EAAI,GAAKiG,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAKtB,EAAMuB,EAAKpB,EAC/ChF,EAAI,GAAKiG,EAAK9B,EAAM+B,EAAK7B,EAAM8B,EAAK7B,EAAM8B,EAAKnB,EAC/CgB,EAAK7F,EAAE,GACP8F,EAAK9F,EAAE,GACP+F,EAAK/F,EAAE,GACPgG,EAAKhG,EAAE,GACPJ,EAAI,GAAKiG,EAAKzB,EAAM0B,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAC/C9E,EAAI,GAAKiG,EAAKhC,EAAMiC,EAAKxB,EAAMyB,EAAKvB,EAAMwB,EAAKrB,EAC/C/E,EAAI,GAAKiG,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAKtB,EAAMuB,EAAKpB,EAC/ChF,EAAI,GAAKiG,EAAK9B,EAAM+B,EAAK7B,EAAM8B,EAAK7B,EAAM8B,EAAKnB,EAC/CgB,EAAK7F,EAAE,GACP8F,EAAK9F,EAAE,GACP+F,EAAK/F,EAAE,IACPgG,EAAKhG,EAAE,IACPJ,EAAI,GAAKiG,EAAKzB,EAAM0B,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAC/C9E,EAAI,GAAKiG,EAAKhC,EAAMiC,EAAKxB,EAAMyB,EAAKvB,EAAMwB,EAAKrB,EAC/C/E,EAAI,IAAMiG,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAKtB,EAAMuB,EAAKpB,EAChDhF,EAAI,IAAMiG,EAAK9B,EAAM+B,EAAK7B,EAAM8B,EAAK7B,EAAM8B,EAAKnB,EAChDgB,EAAK7F,EAAE,IACP8F,EAAK9F,EAAE,IACP+F,EAAK/F,EAAE,IACPgG,EAAKhG,EAAE,IACPJ,EAAI,IAAMiG,EAAKzB,EAAM0B,EAAKzB,EAAM0B,EAAKxB,EAAMyB,EAAKtB,EAChD9E,EAAI,IAAMiG,EAAKhC,EAAMiC,EAAKxB,EAAMyB,EAAKvB,EAAMwB,EAAKrB,EAChD/E,EAAI,IAAMiG,EAAK/B,EAAMgC,EAAK9B,EAAM+B,EAAKtB,EAAMuB,EAAKpB,EAChDhF,EAAI,IAAMiG,EAAK9B,EAAM+B,EAAK7B,EAAM8B,EAAK7B,EAAM8B,EAAKnB,EACzCjF,EAWF,SAAS,GAAUA,EAAKG,EAAGmG,GAChC,IAGI9B,EAAKP,EAAKC,EAAKC,EACfM,EAAKC,EAAKN,EAAKC,EACfM,EAAKC,EAAKC,EAAKP,EALfxD,EAAIwF,EAAE,GACNvF,EAAIuF,EAAE,GACNtF,EAAIsF,EAAE,GAyCV,OApCInG,IAAMH,GACRA,EAAI,IAAMG,EAAE,GAAKW,EAAIX,EAAE,GAAKY,EAAIZ,EAAE,GAAKa,EAAIb,EAAE,IAC7CH,EAAI,IAAMG,EAAE,GAAKW,EAAIX,EAAE,GAAKY,EAAIZ,EAAE,GAAKa,EAAIb,EAAE,IAC7CH,EAAI,IAAMG,EAAE,GAAKW,EAAIX,EAAE,GAAKY,EAAIZ,EAAE,IAAMa,EAAIb,EAAE,IAC9CH,EAAI,IAAMG,EAAE,GAAKW,EAAIX,EAAE,GAAKY,EAAIZ,EAAE,IAAMa,EAAIb,EAAE,MAE9CqE,EAAMrE,EAAE,GACR8D,EAAM9D,EAAE,GACR+D,EAAM/D,EAAE,GACRgE,EAAMhE,EAAE,GACRsE,EAAMtE,EAAE,GACRuE,EAAMvE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GACRwE,EAAMxE,EAAE,GACRyE,EAAMzE,EAAE,GACR0E,EAAM1E,EAAE,IACRmE,EAAMnE,EAAE,IACRH,EAAI,GAAKwE,EACTxE,EAAI,GAAKiE,EACTjE,EAAI,GAAKkE,EACTlE,EAAI,GAAKmE,EACTnE,EAAI,GAAKyE,EACTzE,EAAI,GAAK0E,EACT1E,EAAI,GAAKoE,EACTpE,EAAI,GAAKqE,EACTrE,EAAI,GAAK2E,EACT3E,EAAI,GAAK4E,EACT5E,EAAI,IAAM6E,EACV7E,EAAI,IAAMsE,EACVtE,EAAI,IAAMwE,EAAM1D,EAAI2D,EAAM1D,EAAI4D,EAAM3D,EAAIb,EAAE,IAC1CH,EAAI,IAAMiE,EAAMnD,EAAI4D,EAAM3D,EAAI6D,EAAM5D,EAAIb,EAAE,IAC1CH,EAAI,IAAMkE,EAAMpD,EAAIsD,EAAMrD,EAAI8D,EAAM7D,EAAIb,EAAE,IAC1CH,EAAI,IAAMmE,EAAMrD,EAAIuD,EAAMtD,EAAIuD,EAAMtD,EAAIb,EAAE,KAGrCH,EAWF,SAAS,GAAMA,EAAKG,EAAGmG,GAC5B,IAAIxF,EAAIwF,EAAE,GACNvF,EAAIuF,EAAE,GACNtF,EAAIsF,EAAE,GAiBV,OAhBAtG,EAAI,GAAKG,EAAE,GAAKW,EAChBd,EAAI,GAAKG,EAAE,GAAKW,EAChBd,EAAI,GAAKG,EAAE,GAAKW,EAChBd,EAAI,GAAKG,EAAE,GAAKW,EAChBd,EAAI,GAAKG,EAAE,GAAKY,EAChBf,EAAI,GAAKG,EAAE,GAAKY,EAChBf,EAAI,GAAKG,EAAE,GAAKY,EAChBf,EAAI,GAAKG,EAAE,GAAKY,EAChBf,EAAI,GAAKG,EAAE,GAAKa,EAChBhB,EAAI,GAAKG,EAAE,GAAKa,EAChBhB,EAAI,IAAMG,EAAE,IAAMa,EAClBhB,EAAI,IAAMG,EAAE,IAAMa,EAClBhB,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACLH,EA2FF,SAAS,GAAQA,EAAKG,EAAG8B,GAC9B,IAAIwE,EAAI1I,KAAKsE,IAAIJ,GACbyE,EAAI3I,KAAKqE,IAAIH,GACbwC,EAAMtE,EAAE,GACRuE,EAAMvE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GACRwE,EAAMxE,EAAE,GACRyE,EAAMzE,EAAE,GACR0E,EAAM1E,EAAE,IACRmE,EAAMnE,EAAE,IAuBZ,OArBIA,IAAMH,IAERA,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,KAIdH,EAAI,GAAKyE,EAAMiC,EAAI/B,EAAM8B,EACzBzG,EAAI,GAAK0E,EAAMgC,EAAI9B,EAAM6B,EACzBzG,EAAI,GAAKoE,EAAMsC,EAAI7B,EAAM4B,EACzBzG,EAAI,GAAKqE,EAAMqC,EAAIpC,EAAMmC,EACzBzG,EAAI,GAAK2E,EAAM+B,EAAIjC,EAAMgC,EACzBzG,EAAI,GAAK4E,EAAM8B,EAAIhC,EAAM+B,EACzBzG,EAAI,IAAM6E,EAAM6B,EAAItC,EAAMqC,EAC1BzG,EAAI,IAAMsE,EAAMoC,EAAIrC,EAAMoC,EACnBzG,EAuDF,SAAS,GAAQA,EAAKG,EAAG8B,GAC9B,IAAIwE,EAAI1I,KAAKsE,IAAIJ,GACbyE,EAAI3I,KAAKqE,IAAIH,GACbuC,EAAMrE,EAAE,GACR8D,EAAM9D,EAAE,GACR+D,EAAM/D,EAAE,GACRgE,EAAMhE,EAAE,GACRsE,EAAMtE,EAAE,GACRuE,EAAMvE,EAAE,GACRiE,EAAMjE,EAAE,GACRkE,EAAMlE,EAAE,GAuBZ,OArBIA,IAAMH,IAERA,EAAI,GAAKG,EAAE,GACXH,EAAI,GAAKG,EAAE,GACXH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,IACZH,EAAI,IAAMG,EAAE,KAIdH,EAAI,GAAKwE,EAAMkC,EAAIjC,EAAMgC,EACzBzG,EAAI,GAAKiE,EAAMyC,EAAIhC,EAAM+B,EACzBzG,EAAI,GAAKkE,EAAMwC,EAAItC,EAAMqC,EACzBzG,EAAI,GAAKmE,EAAMuC,EAAIrC,EAAMoC,EACzBzG,EAAI,GAAKyE,EAAMiC,EAAIlC,EAAMiC,EACzBzG,EAAI,GAAK0E,EAAMgC,EAAIzC,EAAMwC,EACzBzG,EAAI,GAAKoE,EAAMsC,EAAIxC,EAAMuC,EACzBzG,EAAI,GAAKqE,EAAMqC,EAAIvC,EAAMsC,EAClBzG,EA2mBF,SAAS,GAAYA,EAAK0I,EAAMC,EAAQP,EAAMC,GACnD,IACIG,EADAlT,EAAI,EAAMyI,KAAK6K,IAAIF,EAAO,GA0B9B,OAxBA1I,EAAI,GAAK1K,EAAIqT,EACb3I,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK1K,EACT0K,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,KAAO,EACXA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EAEC,MAAPqI,GAAeA,IAAQQ,KACzBL,EAAK,GAAKJ,EAAOC,GACjBrI,EAAI,KAAOqI,EAAMD,GAAQI,EACzBxI,EAAI,IAAM,EAAIqI,EAAMD,EAAOI,IAE3BxI,EAAI,KAAO,EACXA,EAAI,KAAO,EAAIoI,GAGVpI,EAiXF,SAAS,GAAOG,EAAGC,GACxB,IAAI6iD,EAAK9iD,EAAE,GACP+iD,EAAK/iD,EAAE,GACPgjD,EAAKhjD,EAAE,GACPijD,EAAKjjD,EAAE,GACPkjD,EAAKljD,EAAE,GACPmjD,EAAKnjD,EAAE,GACPojD,EAAKpjD,EAAE,GACPqjD,EAAKrjD,EAAE,GACPsjD,EAAKtjD,EAAE,GACPujD,EAAKvjD,EAAE,GACPsE,EAAMtE,EAAE,IACRuE,EAAMvE,EAAE,IACRiE,EAAMjE,EAAE,IACRkE,EAAMlE,EAAE,IACRwjD,EAAMxjD,EAAE,IACRyjD,EAAMzjD,EAAE,IACR8F,EAAK7F,EAAE,GACP8F,EAAK9F,EAAE,GACP+F,EAAK/F,EAAE,GACPgG,EAAKhG,EAAE,GACPyjD,EAAKzjD,EAAE,GACP0jD,EAAK1jD,EAAE,GACP2jD,EAAK3jD,EAAE,GACP4jD,EAAK5jD,EAAE,GACP6jD,EAAK7jD,EAAE,GACP8jD,EAAK9jD,EAAE,GACPwF,EAAMxF,EAAE,IACRyF,EAAMzF,EAAE,IACRwG,EAAMxG,EAAE,IACR+jD,EAAM/jD,EAAE,IACRgkD,EAAMhkD,EAAE,IACRikD,EAAMjkD,EAAE,IACZ,OAAOrC,KAAKqM,IAAI64C,EAAKh9C,IAAO,GAAmBlI,KAAKC,IAAI,EAAKD,KAAKqM,IAAI64C,GAAKllD,KAAKqM,IAAInE,KAAQlI,KAAKqM,IAAI84C,EAAKh9C,IAAO,GAAmBnI,KAAKC,IAAI,EAAKD,KAAKqM,IAAI84C,GAAKnlD,KAAKqM,IAAIlE,KAAQnI,KAAKqM,IAAI+4C,EAAKh9C,IAAO,GAAmBpI,KAAKC,IAAI,EAAKD,KAAKqM,IAAI+4C,GAAKplD,KAAKqM,IAAIjE,KAAQpI,KAAKqM,IAAIg5C,EAAKh9C,IAAO,GAAmBrI,KAAKC,IAAI,EAAKD,KAAKqM,IAAIg5C,GAAKrlD,KAAKqM,IAAIhE,KAAQrI,KAAKqM,IAAIi5C,EAAKQ,IAAO,GAAmB9lD,KAAKC,IAAI,EAAKD,KAAKqM,IAAIi5C,GAAKtlD,KAAKqM,IAAIy5C,KAAQ9lD,KAAKqM,IAAIk5C,EAAKQ,IAAO,GAAmB/lD,KAAKC,IAAI,EAAKD,KAAKqM,IAAIk5C,GAAKvlD,KAAKqM,IAAI05C,KAAQ/lD,KAAKqM,IAAIm5C,EAAKQ,IAAO,GAAmBhmD,KAAKC,IAAI,EAAKD,KAAKqM,IAAIm5C,GAAKxlD,KAAKqM,IAAI25C,KAAQhmD,KAAKqM,IAAIo5C,EAAKQ,IAAO,GAAmBjmD,KAAKC,IAAI,EAAKD,KAAKqM,IAAIo5C,GAAKzlD,KAAKqM,IAAI45C,KAAQjmD,KAAKqM,IAAIq5C,EAAKQ,IAAO,GAAmBlmD,KAAKC,IAAI,EAAKD,KAAKqM,IAAIq5C,GAAK1lD,KAAKqM,IAAI65C,KAAQlmD,KAAKqM,IAAIs5C,EAAKQ,IAAO,GAAmBnmD,KAAKC,IAAI,EAAKD,KAAKqM,IAAIs5C,GAAK3lD,KAAKqM,IAAI85C,KAAQnmD,KAAKqM,IAAI3F,EAAMmB,IAAQ,GAAmB7H,KAAKC,IAAI,EAAKD,KAAKqM,IAAI3F,GAAM1G,KAAKqM,IAAIxE,KAAS7H,KAAKqM,IAAI1F,EAAMmB,IAAQ,GAAmB9H,KAAKC,IAAI,EAAKD,KAAKqM,IAAI1F,GAAM3G,KAAKqM,IAAIvE,KAAS9H,KAAKqM,IAAIhG,EAAMwC,IAAQ,GAAmB7I,KAAKC,IAAI,EAAKD,KAAKqM,IAAIhG,GAAMrG,KAAKqM,IAAIxD,KAAS7I,KAAKqM,IAAI/F,EAAM8/C,IAAQ,GAAmBpmD,KAAKC,IAAI,EAAKD,KAAKqM,IAAI/F,GAAMtG,KAAKqM,IAAI+5C,KAASpmD,KAAKqM,IAAIu5C,EAAMS,IAAQ,GAAmBrmD,KAAKC,IAAI,EAAKD,KAAKqM,IAAIu5C,GAAM5lD,KAAKqM,IAAIg6C,KAASrmD,KAAKqM,IAAIw5C,EAAMS,IAAQ,GAAmBtmD,KAAKC,IAAI,EAAKD,KAAKqM,IAAIw5C,GAAM7lD,KAAKqM,IAAIi6C,IC5vDj2C,SAAS,KACd,IAAIrkD,EAAM,IAAI,GAAoB,GAOlC,OALI,IAAuBC,eACzBD,EAAI,GAAK,EACTA,EAAI,GAAK,GAGJA,EAiEF,SAAS,GAAIA,EAAKG,EAAGC,GAG1B,OAFAJ,EAAI,GAAKG,EAAE,GAAKC,EAAE,GAClBJ,EAAI,GAAKG,EAAE,GAAKC,EAAE,GACXJ,EAsMF,SAAS,GAAOA,EAAKG,GAG1B,OAFAH,EAAI,IAAMG,EAAE,GACZH,EAAI,IAAMG,EAAE,GACLH,EA0EF,SAAS,GAAKA,EAAKG,EAAGC,EAAGuG,GAC9B,IAAIrG,EAAKH,EAAE,GACPI,EAAKJ,EAAE,GAGX,OAFAH,EAAI,GAAKM,EAAKqG,GAAKvG,EAAE,GAAKE,GAC1BN,EAAI,GAAKO,EAAKoG,GAAKvG,EAAE,GAAKG,GACnBP,GAkOY,WACnB,IAAIgD,EAAM,MADS,GCtkBd,SAAS,KACd,IAAIhD,EAAM,IAAI,GAAoB,GAQlC,OANI,IAAuBC,eACzBD,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,GAGJA,EAoFF,SAAS,GAAIA,EAAKG,EAAGC,GAI1B,OAHAJ,EAAI,GAAKG,EAAE,GAAKC,EAAE,GAClBJ,EAAI,GAAKG,EAAE,GAAKC,EAAE,GAClBJ,EAAI,GAAKG,EAAE,GAAKC,EAAE,GACXJ,EA0BF,SAAS,GAASA,EAAKG,EAAGC,GAI/B,OAHAJ,EAAI,GAAKG,EAAE,GAAKC,EAAE,GAClBJ,EAAI,GAAKG,EAAE,GAAKC,EAAE,GAClBJ,EAAI,GAAKG,EAAE,GAAKC,EAAE,GACXJ,EAyKF,SAAS,GAAOA,EAAKG,GAI1B,OAHAH,EAAI,IAAMG,EAAE,GACZH,EAAI,IAAMG,EAAE,GACZH,EAAI,IAAMG,EAAE,GACLH,EAyYF,IAMI,GAAM,IA4CI,WACnB,IAAIgD,EAAM,MADS,GCnvBN,SAAS,GAAOiR,EAAWC,GACxC,IAAKD,EACH,MAAM,IAAIxG,MAAMyG,GAAW,4CCG/B,MAAM3G,GAAKxP,KAAKwP,GACV+2C,GAAO/2C,GAAK,EACZg3C,GAAqBh3C,GAAK,IAC1Bi3C,GAAqB,IAAMj3C,GAC3Bk3C,GAAY,IACZC,GAAsB,OACfC,GAAmB,IACzB,SAASC,GAAYC,GAC1B,OAAO9mD,KAAK+mD,IAAI,EAAGD,GAEd,SAASE,GAAYl3C,GAC1B,OAAOm1C,GAAKn1C,GAEP,SAASm3C,IAAeC,EAAKC,IAClC,GAAOhvC,OAAOC,SAAS8uC,IACvB,GAAO/uC,OAAOC,SAAS+uC,IAAQA,IAAQ,IAAMA,GAAO,GAAI,oBACxD,MAAMC,EAAUF,EAAMV,GAChBa,EAAOF,EAAMX,GACbzjD,EAAI2jD,IAAaU,EAAU53C,KAAO,EAAIA,IACtCxM,EAAI0jD,IAAal3C,GAAKxP,KAAK/C,IAAI+C,KAAK6K,IAAI07C,GAAc,GAAPc,MAAiB,EAAI73C,IAC1E,MAAO,CAACzM,EAAGC,GAEN,SAASskD,IAAevkD,EAAGC,IAChC,MAAMokD,EAAUrkD,EAAI2jD,IAAa,EAAIl3C,IAAMA,GACrC63C,EAAO,GAAKrnD,KAAKunD,KAAKvnD,KAAKwnD,IAAIxkD,EAAI0jD,IAAa,EAAIl3C,IAAMA,KAAO+2C,IACvE,MAAO,CAACa,EAAUX,GAAoBY,EAAOZ,IAExC,SAASgB,IAAa,SAC3BC,IAEA,GAAOvvC,OAAOC,SAASsvC,IACvB,MAAMC,EAAY3nD,KAAKqE,IAAIqjD,EAAWlB,IACtC,OAAOQ,GAAYL,GAAsBgB,GAAa,EAEjD,SAASC,IAAkB,SAChCF,EAAQ,UACRG,EAAS,cACTC,GAAgB,IAEhB,GAAO3vC,OAAOC,SAASsvC,IAAavvC,OAAOC,SAASyvC,IACpD,MAAMjiD,EAAS,GACTmiD,EAAYrB,GACZiB,EAAY3nD,KAAKqE,IAAIqjD,EAAWlB,IAChCwB,EAAkBD,EAAY,IAC9BE,EAAkBD,EAAkBL,EACpCO,EAAmBH,EAAYpB,GAAsBgB,EAM3D,GALA/hD,EAAOuiD,cAAgB,CAACD,EAAkBA,EAAkBA,GAC5DtiD,EAAOwiD,cAAgB,CAAC,EAAIF,EAAkB,EAAIA,EAAkB,EAAIA,GACxEtiD,EAAOyiD,eAAiB,CAACL,EAAiBC,EAAiBC,GAC3DtiD,EAAO0iD,eAAiB,CAAC,EAAIN,EAAiB,EAAIC,EAAiB,EAAIC,GAEnEJ,EAAe,CACjB,MAAMS,EAAa/B,GAAqBxmD,KAAK6K,IAAI68C,EAAWlB,IAAsBmB,EAC5Ea,EAAmBR,EAAkBO,EAAa,EAClDE,EAAqBV,EAAYpB,GAAsB4B,EACvDG,EAAoBD,EAAqBR,EAAkBC,EACjEtiD,EAAO+iD,gBAAkB,CAAC,EAAGH,EAAkBC,GAC/C7iD,EAAOgjD,eAAiB,CAACF,EAAmB,EAAGA,GAGjD,OAAO9iD,EAEF,SAASijD,GAAkBC,EAASC,GACzC,MAAOlB,EAAWH,EAAUh8C,GAAMo9C,GAC3B/lD,EAAGC,EAAGC,GAAK8lD,GACZ,cACJZ,EAAa,eACbS,GACEhB,GAAkB,CACpBC,YACAH,WACAI,eAAe,IAEXkB,EAAa/B,GAAc6B,GACjCE,EAAW,IAAMjmD,GAAKolD,EAAc,GAAKS,EAAe,GAAK5lD,GAC7DgmD,EAAW,IAAMhmD,GAAKmlD,EAAc,GAAKS,EAAe,GAAK5lD,GAC7D,MAAMimD,EAAY3B,GAAc0B,GAC1BE,GAAQx9C,GAAM,IAAMzI,GAAK,GAC/B,OAAOkV,OAAOC,SAAS1M,IAAOyM,OAAOC,SAASnV,GAAK,CAACgmD,EAAU,GAAIA,EAAU,GAAIC,GAAQD,EAEnF,SAASE,IAAc,OAC5BxhC,EAAM,MACNyhC,EAAK,QACLC,EAAO,SACPC,EAAQ,MACRx5C,EAAK,OACL1E,EAAS,OAET,MAAMm+C,EAAK,KAWX,OAVA,GAAeA,EAAIA,EAAI,CAAC,EAAG,GAAID,IAC/B,GAAaC,EAAIA,GAAKH,EAAQ5C,IAC9B,GAAa+C,EAAIA,EAAIF,EAAU7C,IAC/B12C,GAAS6X,EACT,GAAW4hC,EAAIA,EAAI,CAACz5C,EAAOA,EAAOA,IAE9B1E,GACF,GAAem+C,EAAIA,EAAI,GAAY,GAAIn+C,IAGlCm+C,EAEF,SAASC,IAAwB,MACtC/hC,EAAK,OACLE,EAAM,KACNhd,EAAO8+C,GAAe7C,IAAiB,SACvC0C,EAAQ,MACRF,EAAQ,EAAC,gBACTM,EAAkB,EAAC,eACnBC,EAAiB,SAEAtsD,IAAbisD,IACF3+C,EAAO8+C,GAAeH,IAGxB,MAAMM,EAAU,GAAMj/C,EAAO67C,GACvB/2C,EAAgBo6C,GAAel/C,GAC/Bm/C,EAAeV,EAAQ5C,GACvBuD,EAAyB/pD,KAAKsE,IAAIslD,GAAWn6C,EAAgBzP,KAAKsE,IAAItE,KAAKgF,IAAIhF,KAAKC,IAAID,KAAKwP,GAAK,EAAIs6C,EAAeF,EAAS,KAAO5pD,KAAKwP,GAAK,MAC/Iw6C,EAAOhqD,KAAKsE,IAAIwlD,GAAgBC,EAAyBt6C,EAC/D,MAAO,CACLG,IAAK,EAAIg6C,EACTh/C,OAAQ6c,EAAQE,EAChBlY,gBACApF,KAAMq/C,EACNp/C,IAAK0/C,EAAOL,GAGT,SAASM,IAAoB,MAClCxiC,EAAK,OACLE,EAAM,MACNyhC,EAAK,SACLE,EAAQ,KACR3+C,EAAI,gBACJ++C,EAAe,eACfC,IAEA,MAAM,IACJ/5C,EAAG,OACHhF,EAAM,KACNP,EAAI,IACJC,GACEk/C,GAAwB,CAC1B/hC,QACAE,SACA2hC,WACA3+C,OACAy+C,QACAM,kBACAC,mBAEIO,EAAmB,GAAiB,GAAIt6C,EAAKhF,EAAQP,EAAMC,GACjE,OAAO4/C,EAEF,SAAST,GAAeH,GAC7B,OAAO,EAAItpD,KAAKunD,KAAK,GAAM+B,GAAY7C,GAElC,SAASoD,GAAel/C,GAC7B,MAAO,GAAM3K,KAAK6K,IAAI,GAAMF,EAAO67C,IAE9B,SAAS2D,GAAcpB,EAAKqB,GACjC,MAAOrnD,EAAGC,EAAGC,EAAI,GAAK8lD,EAEtB,OADA,GAAO5wC,OAAOC,SAASrV,IAAMoV,OAAOC,SAASpV,IAAMmV,OAAOC,SAASnV,IAC5D2hD,GAAgBwF,EAAuB,CAACrnD,EAAGC,EAAGC,EAAG,IAEnD,SAASonD,GAActB,EAAKuB,EAAyBC,EAAU,GACpE,MAAOxnD,EAAGC,EAAGC,GAAK8lD,EAGlB,GAFA,GAAO5wC,OAAOC,SAASrV,IAAMoV,OAAOC,SAASpV,GAAI,4BAE7CmV,OAAOC,SAASnV,GAAI,CACtB,MAAMunD,EAAQ5F,GAAgB0F,EAAyB,CAACvnD,EAAGC,EAAGC,EAAG,IACjE,OAAOunD,EAGT,MAAMC,EAAS7F,GAAgB0F,EAAyB,CAACvnD,EAAGC,EAAG,EAAG,IAC5D0nD,EAAS9F,GAAgB0F,EAAyB,CAACvnD,EAAGC,EAAG,EAAG,IAC5D0I,EAAK++C,EAAO,GACZ9+C,EAAK++C,EAAO,GACZ9hD,EAAI8C,IAAOC,EAAK,IAAM4+C,GAAW,GAAK7+C,IAAOC,EAAKD,GACxD,OAAO,GAAU,GAAI++C,EAAQC,EAAQ9hD,GCpLxB,SAAS+hD,IAAU,MAChCljC,EAAK,OACLE,EAAM,OACNijC,EAAM,UACNC,EAAY,EAAC,QACbC,EAAU,GAAE,QACZpI,EAAU,EAAC,OACX9jD,EAAS,CAAC,EAAG,KAEb,OAAQmsD,EAAMC,IAASC,EAAMC,IAAUN,EAEvC,GAAIzyC,OAAOC,SAASsqC,GAAU,CAC5B,MAAMv+C,EAAIu+C,EACVA,EAAU,CACRt4C,IAAKjG,EACLgG,OAAQhG,EACR8F,KAAM9F,EACN+F,MAAO/F,QAGT,GAAOgU,OAAOC,SAASsqC,EAAQt4C,MAAQ+N,OAAOC,SAASsqC,EAAQv4C,SAAWgO,OAAOC,SAASsqC,EAAQz4C,OAASkO,OAAOC,SAASsqC,EAAQx4C,QAGrI,MAAM8Z,EAAW,IAAI,GAAoB,CACvCyD,QACAE,SACAkgC,UAAW,EACXH,SAAU,EACVZ,KAAM,IAEFqE,EAAKnnC,EAASonC,QAAQ,CAACL,EAAMG,IAC7BG,EAAKrnC,EAASonC,QAAQ,CAACH,EAAMD,IAC7BvsD,EAAO,CAACuB,KAAKC,IAAID,KAAKqM,IAAIg/C,EAAG,GAAKF,EAAG,IAAKN,GAAY7qD,KAAKC,IAAID,KAAKqM,IAAIg/C,EAAG,GAAKF,EAAG,IAAKN,IACxFS,EAAa,CAAC7jC,EAAQi7B,EAAQz4C,KAAOy4C,EAAQx4C,MAA8B,EAAtBlK,KAAKqM,IAAIzN,EAAO,IAAS+oB,EAAS+6B,EAAQt4C,IAAMs4C,EAAQv4C,OAA+B,EAAtBnK,KAAKqM,IAAIzN,EAAO,KAC5I,GAAO0sD,EAAW,GAAK,GAAKA,EAAW,GAAK,GAC5C,MAAMC,EAASD,EAAW,GAAK7sD,EAAK,GAC9B+sD,EAASF,EAAW,GAAK7sD,EAAK,GAC9BgtD,GAAW/I,EAAQx4C,MAAQw4C,EAAQz4C,MAAQ,EAAIshD,EAC/CG,GAAWhJ,EAAQv4C,OAASu4C,EAAQt4C,KAAO,EAAIohD,EAC/CpgD,EAAS,EAAEigD,EAAG,GAAKF,EAAG,IAAM,EAAIM,GAAUJ,EAAG,GAAKF,EAAG,IAAM,EAAIO,GAC/DC,EAAe3nC,EAAS4nC,UAAUxgD,GAClC07C,EAAO9mD,KAAKgF,IAAI8lD,EAAS9mC,EAAS8iC,KAAO7B,GAAKjlD,KAAKqM,IAAIrM,KAAKgF,IAAIumD,EAAQC,MAE9E,OADA,GAAOrzC,OAAOC,SAAS0uC,IAChB,CACLe,UAAW8D,EAAa,GACxBjE,SAAUiE,EAAa,GACvB7E,QC9CJ,MAAM,GAAqB9mD,KAAKwP,GAAK,IACtB,SAASq8C,GAAU7nC,EAAU/gB,EAAI,GAC9C,MAAM,MACJwkB,EAAK,OACLE,EAAM,UACNikC,GACE5nC,EACE8nC,EAAe,CACnBvB,QAAStnD,GAEL8oD,EAAaH,EAAU,CAAC,EAAGjkC,GAASmkC,GACpCE,EAAcJ,EAAU,CAACnkC,EAAOE,GAASmkC,GAC/C,IAAIG,EACAC,EACJ,MAAMtC,EAAU5lC,EAASrZ,KAAO,GAAMqZ,EAASrZ,KAAO,GAAqB3K,KAAKunD,KAAK,GAAMvjC,EAASslC,UAC9F6C,GAAiB,GAAKnoC,EAASolC,OAAS,GAU9C,OARIQ,EAAUuC,EAAgB,KAC5BF,EAAUG,GAAoBpoC,EAAU,EAAG/gB,GAC3CipD,EAAWE,GAAoBpoC,EAAUyD,EAAOxkB,KAEhDgpD,EAAUL,EAAU,CAAC,EAAG,GAAIE,GAC5BI,EAAWN,EAAU,CAACnkC,EAAO,GAAIqkC,IAG5B,CAACC,EAAYC,EAAaE,EAAUD,GAG7C,SAASG,GAAoBpoC,EAAUjhB,EAAGwnD,GACxC,MAAM,wBACJD,GACEtmC,EACEymC,EAAS7F,GAAgB0F,EAAyB,CAACvnD,EAAG,EAAG,EAAG,IAC5D2nD,EAAS9F,GAAgB0F,EAAyB,CAACvnD,EAAGihB,EAAS2D,OAAQ,EAAG,IAC1E1kB,EAAIsnD,EAAUvmC,EAASqoC,eAAelE,cAAc,GACpDv/C,GAAK3F,EAAIwnD,EAAO,KAAOC,EAAO,GAAKD,EAAO,IAC1CD,EAAQ,GAAU,GAAIC,EAAQC,EAAQ9hD,GACtChD,EAAS0hD,GAAckD,GAE7B,OADA5kD,EAAO,GAAK2kD,EACL3kD,ECnCM,MAAM,GACnB,aAAY,MACV6hB,EAAK,OACLE,EAAM,SACN+/B,EAAW,EAAC,UACZG,EAAY,EAAC,KACbf,EAAO,EAAC,MACRsC,EAAQ,EAAC,QACTC,EAAU,EAAC,SACXC,EAAW,KAAI,KACf3+C,EAAO,KAAI,SACX2hD,EAAW,KAAI,gBACf5C,EAAkB,IAAI,eACtBC,EAAiB,MACf,CACFliC,MAAO,EACPE,OAAQ,IAERF,EAAQA,GAAS,EACjBE,EAASA,GAAU,EAEN,OAAThd,GAA8B,OAAb2+C,GACnBA,EAAW1C,GACXj8C,EAAO8+C,GAAeH,IACJ,OAAT3+C,EACTA,EAAO8+C,GAAeH,GACA,OAAbA,IACTA,EAAWO,GAAel/C,IAG5B,MAAMmF,EAAQ+2C,GAAYC,GAC1BwC,EAAWtpD,KAAKC,IAAI,IAAMqpD,GAC1B,MAAM+C,EAAiBzE,GAAkB,CACvCC,YACAH,aAEIt8C,EAAS67C,GAAc,CAACY,EAAWH,IACzCt8C,EAAO,GAAK,EAERkhD,GACF,GAASlhD,EAAQA,EAAQ,GAAS,GAAIkhD,EAAUD,EAAelE,gBAGjExqD,KAAKusD,iBAAmBD,GAAoB,CAC1CxiC,QACAE,SACAyhC,QACAz+C,OACA++C,kBACAC,mBAEFhsD,KAAK4uD,WAAapD,GAAc,CAC9BxhC,SACA7X,QACA1E,SACAg+C,QACAC,UACAC,aAEF3rD,KAAK8pB,MAAQA,EACb9pB,KAAKgqB,OAASA,EACdhqB,KAAKmS,MAAQA,EACbnS,KAAK+pD,SAAWA,EAChB/pD,KAAKkqD,UAAYA,EACjBlqD,KAAKmpD,KAAOA,EACZnpD,KAAKyrD,MAAQA,EACbzrD,KAAK0rD,QAAUA,EACf1rD,KAAK2rD,SAAWA,EAChB3rD,KAAKgN,KAAOA,EACZhN,KAAKyN,OAASA,EACdzN,KAAK6uD,YAAcF,GAAY,CAAC,EAAG,EAAG,GACtC3uD,KAAK0uD,eAAiBA,EAEtB1uD,KAAK8uD,gBAEL9uD,KAAKqa,OAASra,KAAKqa,OAAOhe,KAAK2D,MAC/BA,KAAKytD,QAAUztD,KAAKytD,QAAQpxD,KAAK2D,MACjCA,KAAKiuD,UAAYjuD,KAAKiuD,UAAU5xD,KAAK2D,MACrCA,KAAK+uD,gBAAkB/uD,KAAK+uD,gBAAgB1yD,KAAK2D,MACjDA,KAAKgvD,kBAAoBhvD,KAAKgvD,kBAAkB3yD,KAAK2D,MACrDhG,OAAO4U,OAAO5O,MAGhB,gBACE,MAAM,MACJ8pB,EAAK,OACLE,EAAM,iBACNuiC,EAAgB,WAChBqC,GACE5uD,KACEivD,EAAM,KACZ,GAAcA,EAAKA,EAAK1C,GACxB,GAAc0C,EAAKA,EAAKL,GACxB5uD,KAAKgmD,qBAAuBiJ,EAC5B,MAAM9pD,EAAI,KACV,GAAWA,EAAGA,EAAG,CAAC2kB,EAAQ,GAAIE,EAAS,EAAG,IAC1C,GAAe7kB,EAAGA,EAAG,CAAC,GAAI,EAAG,IAC7B,GAAcA,EAAGA,EAAG8pD,GACpB,MAAMC,EAAW,GAAY,KAAc/pD,GAE3C,IAAK+pD,EACH,MAAM,IAAIn9C,MAAM,uCAGlB/R,KAAKysD,sBAAwBtnD,EAC7BnF,KAAK2sD,wBAA0BuC,EAGjC,OAAO7oC,GACL,OAAMA,aAAoB,KAInBA,EAASyD,QAAU9pB,KAAK8pB,OAASzD,EAAS2D,SAAWhqB,KAAKgqB,QAAU,GAAY3D,EAASkmC,iBAAkBvsD,KAAKusD,mBAAqB,GAAYlmC,EAASuoC,WAAY5uD,KAAK4uD,aAGpL,QAAQxD,GAAK,QACXkD,GAAU,GACR,IACF,MAAMa,EAAgBnvD,KAAK+uD,gBAAgB3D,GACrCyB,EAAQL,GAAc2C,EAAenvD,KAAKysD,wBACzCrnD,EAAGC,GAAKwnD,EACTnhD,EAAK4iD,EAAUjpD,EAAIrF,KAAKgqB,OAAS3kB,EACvC,OAAsB,IAAf+lD,EAAI5qD,OAAe,CAAC4E,EAAGsG,GAAM,CAACtG,EAAGsG,EAAImhD,EAAM,IAGpD,UAAUzB,GAAK,QACbkD,GAAU,EAAI,QACd1B,GACE,IACF,MAAOxnD,EAAGC,EAAGC,GAAK8lD,EACZ1/C,EAAK4iD,EAAUjpD,EAAIrF,KAAKgqB,OAAS3kB,EACjC+pD,EAAexC,GAAWA,EAAU5sD,KAAK0uD,eAAelE,cAAc,GACtEqC,EAAQH,GAAc,CAACtnD,EAAGsG,EAAIpG,GAAItF,KAAK2sD,wBAAyByC,IAC/DC,EAAGC,EAAGC,GAAKvvD,KAAKgvD,kBAAkBnC,GAEzC,OAAIryC,OAAOC,SAASnV,GACX,CAAC+pD,EAAGC,EAAGC,GAGT/0C,OAAOC,SAASmyC,GAAW,CAACyC,EAAGC,EAAG1C,GAAW,CAACyC,EAAGC,GAG1D,gBAAgBlE,GACd,MAAOiE,EAAGC,GAAKhG,GAAc8B,GACvBmE,GAAKnE,EAAI,IAAM,GAAKprD,KAAK0uD,eAAelE,cAAc,GAC5D,MAAO,CAAC6E,EAAGC,EAAGC,GAGhB,kBAAkBnE,GAChB,MAAOiE,EAAGC,GAAK3F,GAAcyB,GACvBmE,GAAKnE,EAAI,IAAM,GAAKprD,KAAK0uD,eAAejE,cAAc,GAC5D,MAAO,CAAC4E,EAAGC,EAAGC,GAGhB,YAAYC,GACV,OAAOlG,GAAckG,GAGvB,cAAcC,GACZ,OAAO9F,GAAc8F,GAGvB,8BAA6B,OAC3BD,EAAM,IACNE,IAEA,MAAMC,EAAejD,GAAcgD,EAAK1vD,KAAK2sD,yBACvCiD,EAAatG,GAAckG,GAC3B7kD,EAAY,GAAS,GAAIilD,EAAY,GAAY,GAAID,IACrDE,EAAY,GAAS,GAAI7vD,KAAKyN,OAAQ9C,GAC5C,OAAOg/C,GAAckG,GAGvB,oBAAmB,OACjBL,EAAM,IACNE,IAEA,OAAO1vD,KAAK8vD,6BAA6B,CACvCN,SACAE,QAIJ,UAAUzC,EAAQ90C,EAAU,IAC1B,MAAM,MACJ2R,EAAK,OACLE,GACEhqB,MACE,UACJkqD,EAAS,SACTH,EAAQ,KACRZ,GACE6D,GAAUhzD,OAAO4wB,OAAO,CAC1Bd,QACAE,SACAijC,UACC90C,IACH,OAAO,IAAI,GAAoB,CAC7B2R,QACAE,SACAkgC,YACAH,WACAZ,SAIJ,UAAUhxC,GACR,MAAM43C,EAAU/vD,KAAKgwD,kBAAkB73C,GACjCi1C,EAAO/qD,KAAKgF,OAAO0oD,EAAQ/1C,IAAIxT,GAAKA,EAAE,KACtC8mD,EAAOjrD,KAAKC,OAAOytD,EAAQ/1C,IAAIxT,GAAKA,EAAE,KACtC6mD,EAAQhrD,KAAKgF,OAAO0oD,EAAQ/1C,IAAIxT,GAAKA,EAAE,KACvC+mD,EAAQlrD,KAAKC,OAAOytD,EAAQ/1C,IAAIxT,GAAKA,EAAE,KAC7C,MAAO,CAAC,CAAC4mD,EAAMC,GAAQ,CAACC,EAAMC,IAGhC,kBAAkBp1C,EAAU,IAC1B,OAAO+1C,GAAUluD,KAAMmY,EAAQ7S,GAAK,IC9NxC,MAAM,GAAY,IACH,SAAS2qD,IAAuB,MAC7CnmC,EAAK,OACLE,EAAM,UACNkgC,EAAS,SACTH,EAAQ,KACRZ,EAAI,MACJsC,EAAQ,EAAC,QACTC,EAAU,KAENxB,GAAa,KAAOA,EAAY,OAClCA,EAAY,GAAIA,EAAY,IAAK,KAAO,MAGtCwB,GAAW,KAAOA,EAAU,OAC9BA,EAAU,GAAIA,EAAU,IAAK,KAAO,KAGtC,MAAMwE,EAAU5I,GAAKt9B,EAAS,IAE9B,GAAIm/B,GAAQ+G,EACV/G,EAAO+G,EACPnG,EAAW,MACN,CACL,MAAMoG,EAAmBnmC,EAAS,EAAI3nB,KAAK+mD,IAAI,EAAGD,GAC5CiH,EAAczG,GAAc,CAAC,EAAGwG,IAAmB,GAEzD,GAAIpG,EAAWqG,EACbrG,EAAWqG,MACN,CACL,MAAMC,EAAc1G,GAAc,CAAC,EAAG,GAAYwG,IAAmB,GAEjEpG,EAAWsG,IACbtG,EAAWsG,IAKjB,MAAO,CACLvmC,QACAE,SACAkgC,YACAH,WACAZ,OACAsC,QACAC,WC9CG,MAAM4E,GAAoB,CAC/BC,SAAU,EACVC,OAAQ,EACRC,cAAe,EACfC,eAAgB,EAChBC,UAAW,GAEb32D,OAAOgD,eAAeszD,GAAmB,WAAY,CACnDrvC,IAAK,IAAM,EAAI2vC,WAAW,6BAA8B,8BAA7C,IAAiF,IAEvF,MAAMC,GAAkB,CAC7BC,aAAc,EACdC,MAAO,EACPC,yBAA0B,EAC1BriD,SAAU,GAECsiD,GAAO,CAClBC,OAAQ,EACRC,OAAQ,EACRC,OAAQ,GAEGC,GAAS,CACpBC,MAAO,CACLpkC,QAAS,WAEXqkC,SAAU,CACRrkC,QAAS,eAEXskC,QAAS,CACPtkC,QAAS,UAEXukC,OAAQ,CACNvkC,QAAS,cC3BP,GAAqB7qB,KAAKwP,GAAK,IAC/BlD,GAAWi3C,KACX8L,GAAc,CAAC,EAAG,EAAG,GACrBC,GAAe,EACfC,GAA0B,CAC9BpH,cAAe,CAAC,EAAG,EAAG,GACtBC,cAAe,CAAC,EAAG,EAAG,IAET,MAAM,GACnB,YAAY9e,EAAO,IACjB,MAAM,GACJxP,EAAK,KAAI,EACT/2B,EAAI,EAAC,EACLC,EAAI,EAAC,MACLykB,EAAQ,EAAC,OACTE,EAAS,GACP2hB,EACJ3rC,KAAKm8B,GAAKA,GAAMn8B,KAAKmb,YAAY02C,aAAe,WAChD7xD,KAAKoF,EAAIA,EACTpF,KAAKqF,EAAIA,EACTrF,KAAK8pB,MAAQA,GAAS,EACtB9pB,KAAKgqB,OAASA,GAAU,EACxBhqB,KAAK8xD,eAAiB,GAEtB9xD,KAAK+xD,gBAAgBpmB,GAErB3rC,KAAKgyD,sBAAsBrmB,GAE3B3rC,KAAKiyD,qBAELjyD,KAAKqa,OAASra,KAAKqa,OAAOhe,KAAK2D,MAC/BA,KAAKytD,QAAUztD,KAAKytD,QAAQpxD,KAAK2D,MACjCA,KAAKiuD,UAAYjuD,KAAKiuD,UAAU5xD,KAAK2D,MACrCA,KAAK+uD,gBAAkB/uD,KAAK+uD,gBAAgB1yD,KAAK2D,MACjDA,KAAKgvD,kBAAoBhvD,KAAKgvD,kBAAkB3yD,KAAK2D,MACrDA,KAAKkyD,YAAclyD,KAAKkyD,YAAY71D,KAAK2D,MACzCA,KAAKmyD,cAAgBnyD,KAAKmyD,cAAc91D,KAAK2D,MAG/C,qBACE,OAAOA,KAAK0uD,eAAejE,cAAc,GAAKzqD,KAAKmS,MAGrD,qBACE,OAAInS,KAAKoyD,aACApyD,KAAKmpD,KAAO,GAAK0H,GAAgBC,aAAeD,GAAgBG,yBAGlEH,GAAgBliD,SAGzB,OAAO0X,GACL,OAAMA,aAAoB,KAItBrmB,OAASqmB,GAINA,EAASyD,QAAU9pB,KAAK8pB,OAASzD,EAAS2D,SAAWhqB,KAAKgqB,QAAU3D,EAASlU,QAAUnS,KAAKmS,OAAS,gBAAOkU,EAASkmC,iBAAkBvsD,KAAKusD,mBAAqB,gBAAOlmC,EAASuoC,WAAY5uD,KAAK4uD,aAG3M,QAAQxD,GAAK,QACXkD,GAAU,GACR,IACF,MAAMa,EAAgBnvD,KAAK+uD,gBAAgB3D,GACrCyB,EAAQL,GAAc2C,EAAenvD,KAAKysD,wBACzCrnD,EAAGC,GAAKwnD,EACTnhD,EAAK4iD,EAAUjpD,EAAIrF,KAAKgqB,OAAS3kB,EACvC,OAAsB,IAAf+lD,EAAI5qD,OAAe,CAAC4E,EAAGsG,GAAM,CAACtG,EAAGsG,EAAImhD,EAAM,IAGpD,UAAUzB,GAAK,QACbkD,GAAU,EAAI,QACd1B,GACE,IACF,MAAOxnD,EAAGC,EAAGC,GAAK8lD,EACZ1/C,EAAK4iD,EAAUjpD,EAAIrF,KAAKgqB,OAAS3kB,EACjC+pD,EAAexC,GAAWA,EAAU5sD,KAAK0uD,eAAelE,cAAc,GACtEqC,EAAQH,GAAc,CAACtnD,EAAGsG,EAAIpG,GAAItF,KAAK2sD,wBAAyByC,IAC/DC,EAAGC,EAAGC,GAAKvvD,KAAKgvD,kBAAkBnC,GAEzC,OAAIryC,OAAOC,SAASnV,GACX,CAAC+pD,EAAGC,EAAGC,GAGT/0C,OAAOC,SAASmyC,GAAW,CAACyC,EAAGC,EAAG1C,GAAW,CAACyC,EAAGC,GAG1D,gBAAgBlE,GACd,MAAOiE,EAAGC,GAAKtvD,KAAKkyD,YAAY9G,GAC1BmE,GAAKnE,EAAI,IAAM,GAAKprD,KAAK0uD,eAAelE,cAAc,GAC5D,MAAO,CAAC6E,EAAGC,EAAGC,GAGhB,kBAAkBnE,GAChB,MAAOiE,EAAGC,GAAKtvD,KAAKmyD,cAAc/G,GAC5BmE,GAAKnE,EAAI,IAAM,GAAKprD,KAAK0uD,eAAejE,cAAc,GAC5D,MAAO,CAAC4E,EAAGC,EAAGC,GAGhB,YAAYnE,GACV,OAAIprD,KAAKoyD,aACA9I,GAAc8B,GAGhBA,EAGT,cAAcA,GACZ,OAAIprD,KAAKoyD,aACAzI,GAAcyB,GAGhBA,EAGT,UAAUjzC,EAAU,IAClB,MAAMk6C,EAAkB,CACtBzF,QAASz0C,EAAQ7S,GAAK,GAElBgpD,EAAUtuD,KAAKiuD,UAAU,CAAC,EAAG,GAAIoE,GACjC9D,EAAWvuD,KAAKiuD,UAAU,CAACjuD,KAAK8pB,MAAO,GAAIuoC,GAC3CjE,EAAapuD,KAAKiuD,UAAU,CAAC,EAAGjuD,KAAKgqB,QAASqoC,GAC9ChE,EAAcruD,KAAKiuD,UAAU,CAACjuD,KAAK8pB,MAAO9pB,KAAKgqB,QAASqoC,GAC9D,MAAO,CAAChwD,KAAKgF,IAAIinD,EAAQ,GAAIC,EAAS,GAAIH,EAAW,GAAIC,EAAY,IAAKhsD,KAAKgF,IAAIinD,EAAQ,GAAIC,EAAS,GAAIH,EAAW,GAAIC,EAAY,IAAKhsD,KAAKC,IAAIgsD,EAAQ,GAAIC,EAAS,GAAIH,EAAW,GAAIC,EAAY,IAAKhsD,KAAKC,IAAIgsD,EAAQ,GAAIC,EAAS,GAAIH,EAAW,GAAIC,EAAY,KAG7Q,kBAAkBiE,EAAmB,MACnC,OAAIA,EACKrI,GAAkB,CACvBC,UAAWoI,EAAiB,GAC5BvI,SAAUuI,EAAiB,GAC3BnI,eAAe,IAIZnqD,KAAK0uD,eAGd,eAAc,EACZtpD,EAAC,EACDC,EAAC,MACDykB,EAAQ,EAAC,OACTE,EAAS,IAET,OAAO5kB,EAAIpF,KAAKoF,EAAIpF,KAAK8pB,OAAS9pB,KAAKoF,EAAIA,EAAI0kB,GAASzkB,EAAIrF,KAAKqF,EAAIrF,KAAKgqB,QAAUhqB,KAAKqF,EAAIA,EAAI2kB,EAGnG,mBACE,OAAIhqB,KAAK8xD,eAAeplD,MAIxB1S,OAAO4wB,OAAO5qB,KAAK8xD,eAAgB/L,GAAiB/lD,KAAKgmD,uBAHhDhmD,KAAK8xD,eAOhB,cAAcS,EAAQC,GACpB,OAAO,KAGT,oBACE,OAAOxyD,KAAKyyD,eAGd,qBACE,OAAOzyD,KAAK0yD,gBAGd,cACE,OAAO1yD,KAAK2yD,SAGd,yBAAwB,aACtBC,EAAY,YACZC,EAAW,OACX5lD,EAAM,cACN6E,EAAa,KACbpF,EAAI,IACJC,IAEA,OAAOimD,GAAe,IAAI,SAAUA,aAAa,CAC/C5lD,KAAM6lD,EACN5lD,SACA6E,gBACApF,OACAC,SACG,IAAI,SAAUI,YAAY,CAC7BC,KAAM6lD,EACN5lD,SACAP,OACAC,QAIJ,gBAAgBg/B,GACd,MAAM,WACJijB,EAAajgD,GAAQ,UACrBu7C,EAAY,KAAI,SAChBH,EAAW,KAAI,KACfZ,EAAO,KAAI,SACXwF,EAAW,KAAI,YACfmE,EAAc,KAAI,cAClBhhD,EAAgB,EAAC,eACjB48C,EAAiB,MACf/iB,EACJ3rC,KAAKoyD,aAAe53C,OAAOC,SAASsvC,IAAavvC,OAAOC,SAASyvC,GACjElqD,KAAKmpD,KAAOA,EAEP3uC,OAAOC,SAASza,KAAKmpD,QACxBnpD,KAAKmpD,KAAOnpD,KAAKoyD,aAAetI,GAAa,CAC3CC,aACG1nD,KAAKilD,KAAKx1C,GAAiB6/C,IAGlC,MAAMx/C,EAAQ9P,KAAK+mD,IAAI,EAAGppD,KAAKmpD,MAC/BnpD,KAAKmS,MAAQA,EACbnS,KAAK0uD,eAAiB1uD,KAAKoyD,aAAenI,GAAkB,CAC1DF,WACAG,cACGwE,GAAkBkD,GACvB5xD,KAAK8R,cAAgBA,EACrB9R,KAAK0uD,eAAejE,cAAgB,IAAI,QAAQzqD,KAAK0uD,eAAejE,eACpEzqD,KAAK0uD,eAAelE,cAAgB,IAAI,QAAQxqD,KAAK0uD,eAAelE,eACpExqD,KAAK2uD,SAAW+C,GAChB1xD,KAAK6uD,YAAc6C,GAEf/C,IACF3uD,KAAK2uD,SAAWA,EAChB3uD,KAAK8yD,YAAcA,EACnB9yD,KAAK6uD,YAAciE,EAAcA,EAAY7L,gBAAgB0H,GAAYA,GAGvE3uD,KAAKoyD,cACPpyD,KAAKkqD,UAAYA,EACjBlqD,KAAK+pD,SAAWA,EAChB/pD,KAAKyN,OAASzN,KAAK+yD,kBAAkB,CACnC7I,YACAH,cAGF/pD,KAAKyN,OAASkhD,EAAW3uD,KAAK+uD,gBAAgBJ,GAAY,CAAC,EAAG,EAAG,GAGnE3uD,KAAKgzD,qBAAuBpE,EAC5B5uD,KAAK4uD,YAAa,IAAI,SAAUqE,cAAcjzD,KAAKgzD,sBAAsBroD,UAAU,IAAI,QAAQ3K,KAAKyN,QAAUikD,IAAawB,UAG7H,mBAAkB,UAChBhJ,EAAS,SACTH,IAEA,MAAM,YACJ8E,EAAW,eACXH,GACE1uD,KACEyN,EAAS,IAAI,QAAQzN,KAAK+uD,gBAAgB,CAAC7E,EAAWH,EAAU,KAEtE,GAAI8E,EAAa,CACf,MAAMsE,EAAiB,IAAI,QAAQtE,GAAa18C,MAAMu8C,EAAelE,eACrE/8C,EAAOkzB,IAAIwyB,GAGb,OAAO1lD,EAGT,sBAAsBk+B,GACpB,MAAM,iBACJ4gB,EAAmB,KAAI,aACvBqG,GAAe,EAAK,YACpBC,EAAW,KACX7lD,EAAO,GAAE,KACTN,EAAO,GAAG,IACVC,EAAM,IAAI,cACVmF,EAAgB,GACd65B,EACJ3rC,KAAKusD,iBAAmBA,GAAoBvsD,KAAKozD,wBAAwB,CACvER,eACAC,YAAaA,GAAe7lD,EAAO,GACnCC,OAAQjN,KAAK8pB,MAAQ9pB,KAAKgqB,OAC1BlY,gBACApF,OACAC,QAIJ,qBACE,MAAMsiD,EAAMrJ,KACZ,GAAcqJ,EAAKA,EAAKjvD,KAAKusD,kBAC7B,GAAc0C,EAAKA,EAAKjvD,KAAK4uD,YAC7B5uD,KAAKgmD,qBAAuBiJ,EAC5BjvD,KAAK8lD,kBAAoB,GAAY,GAAI9lD,KAAK4uD,aAAe5uD,KAAK4uD,WAClE5uD,KAAKyyD,eAAiB5M,GAAkB7lD,KAAK8lD,mBAC7C,MAAMuN,EAAiBzN,KACjB6G,EAAwB7G,KAC9B,GAAWyN,EAAgBA,EAAgB,CAACrzD,KAAK8pB,MAAQ,GAAI9pB,KAAKgqB,OAAS,EAAG,IAC9E,GAAeqpC,EAAgBA,EAAgB,CAAC,GAAI,EAAG,IACvD,GAAc5G,EAAuB4G,EAAgBrzD,KAAKgmD,sBAC1DhmD,KAAKysD,sBAAwBA,EAC7BzsD,KAAKqzD,eAAiBA,EACtBrzD,KAAK2sD,wBAA0B,GAAY/G,KAAc5lD,KAAKysD,uBAEzDzsD,KAAK2sD,yBACR,EAAI7gC,KAAK,sCAAT,IAKN,GAAS+lC,YAAc,WC5ThB,MAAMyB,GAAgB,KAChBC,GAAkB,KCDhB,SAAS,GAAOh7C,EAAWC,GACxC,IAAKD,EACH,MAAM,IAAIxG,MAAMyG,GAAW,kCCF/B,MAAMg7C,GAAmB,CACvBC,OAAQ,CACN,SAASx2D,EAAOy2D,GACd,OAAOl5C,OAAOC,SAASxd,OAAa,QAASy2D,IAAaz2D,GAASy2D,EAASpxD,SAAW,QAASoxD,IAAaz2D,GAASy2D,EAASrsD,OAInI2I,MAAO,CACL,SAAS/S,EAAOy2D,GACd,OAAOrzD,MAAM6P,QAAQjT,IAAU0c,YAAYC,OAAO3c,MAKjD,SAAS02D,GAAeC,GAC7B,MAAMC,EAAY,GAElB,IAAK,MAAMC,KAAYF,EAAU,CAC/B,MAAMG,EAAUH,EAASE,GACnBJ,EAAWM,GAAcD,GAC/BF,EAAUC,GAAYJ,EAGxB,OAAOG,EAGT,SAASG,GAAcD,GACrB,IAAIj1D,EAAOm1D,GAAUF,GAErB,MAAa,WAATj1D,EACGi1D,EAOD,SAAUA,EACL/5D,OAAO4wB,OAAO,GAAImpC,EAASP,GAAiBO,EAAQj1D,OAGvD,UAAWi1D,GAOjBj1D,EAAOm1D,GAAUF,EAAQ92D,OAClBjD,OAAO4wB,OAAO,CACnB9rB,QACCi1D,EAASP,GAAiB10D,KATpB,CACLA,KAAM,SACN7B,MAAO82D,GAbF,CACLj1D,KAAM,SACN7B,MAAO,MAqBNjD,OAAO4wB,OAAO,CACnB9rB,OACA7B,MAAO82D,GACNP,GAAiB10D,IAGtB,SAASm1D,GAAUh3D,GACjB,OAAIoD,MAAM6P,QAAQjT,IAAU0c,YAAYC,OAAO3c,GACtC,eAGKA,EC/DhB,MAAM,GAAgB,KAChB,GAAkB,KACT,MAAM,GACnB,aAAY,KACVkG,EAAI,GACJ+wD,EAAE,GACFC,EAAE,aACFC,EAAe,GAAE,SACjBC,EAAQ,YACRC,EAAW,aACXC,EAAe,GAAE,QACjBC,EAAU,GAAE,OACZC,EAAS,GAAE,aACXC,EAAY,eACZC,IAEA,GAAuB,kBAATxxD,GACdnD,KAAKmD,KAAOA,EACZnD,KAAKk0D,GAAKA,GAAMQ,EAChB10D,KAAKm0D,GAAKA,GAAMQ,EAChB30D,KAAK40D,kBAAoBN,EACzBt0D,KAAKo0D,aAAeA,EACpBp0D,KAAKu0D,aAAev0D,KAAK60D,6BAA6BN,GACtDv0D,KAAKw0D,QAAUA,EACfx0D,KAAK80D,WAAaC,GAAoBN,GAElCJ,IACFr0D,KAAKq0D,SAAWV,GAAeU,IAInC,gBAAgBv1D,GACd,IAAIk2D,EAEJ,OAAQl2D,GACN,KAAK,GACHk2D,EAAeh1D,KAAKk0D,IAAM,GAC1B,MAEF,KAAK,GACHc,EAAeh1D,KAAKm0D,IAAM,GAC1B,MAEF,QACE,IAAO,GAGX,MAAO,kBACMn0D,KAAKmD,KAAKorB,cAAcrV,QAAQ,cAAe,SAC9D87C,kBACch1D,KAAKmD,WAKnB,YAAYwoC,EAAM0oB,GAChB,OAAIr0D,KAAK40D,kBACA50D,KAAK40D,kBAAkBjpB,EAAM0oB,GAGlCr0D,KAAKq0D,SACAr0D,KAAKi1D,oBAAoBtpB,GAG3B,GAGT,aACE,OAAO3rC,KAAKw0D,QAGd,kBAAkBU,EAAc51D,GAC9BU,KAAKu0D,aAAar4D,QAAQi5D,IACpBA,EAAIC,MAAMhmC,KAAK8lC,KACbC,EAAIvE,WACNtxD,EAAIsxD,WAAWuE,EAAIE,IAAKF,EAAIG,IAA5Bh2D,GAEAA,EAAIi2D,QAAQJ,EAAIE,IAAKF,EAAIG,IAAzBh2D,MAMR,6BAA6Bi1D,GAW3B,OAVAA,EAAar4D,QAAQi5D,IACnB,OAAQA,EAAIr2D,MACV,IAAK,WACHq2D,EAAIC,MAAQ,IAAIv8C,OAAO,MAAMs8C,EAAIE,UACjC,MAEF,QACEF,EAAIC,MAAQ,IAAIv8C,OAAO,GAAGs8C,EAAIr2D,QAAQq2D,EAAIE,WAGzCd,EAGT,oBAAoB5oB,EAAO,IACzB,MAAM0oB,EAAW,GACXR,EAAY7zD,KAAKq0D,SAEvB,IAAK,MAAMl4D,KAAO03D,EAAW,CAC3B,MAAME,EAAUF,EAAU13D,GAEtBA,KAAOwvC,IAASooB,EAAQyB,SACtBzB,EAAQ0B,UACV,GAAO1B,EAAQ0B,SAAS9pB,EAAKxvC,GAAM43D,GAAU,GAAG/zD,KAAKmD,iBAAiBhH,KAGxEk4D,EAASl4D,GAAOwvC,EAAKxvC,IAErBk4D,EAASl4D,GAAO43D,EAAQ92D,MAI5B,OAAOo3D,GAiBX,SAASU,GAAoBD,GAC3B,MAAM7sD,EAAS,CACbisD,GAAI,GACJC,GAAI,IAGN,IAAK,MAAMuB,KAAQZ,EAAY,CAC7B,IAAIa,EAAYb,EAAWY,GAC3B,MAAME,EAAQF,EAAKr7D,MAAM,EAAG,GAEH,kBAAds7D,IACTA,EAAY,CACVE,MAAO,EACPF,cAIJ1tD,EAAO2tD,GAAOF,GAAQC,EAGxB,OAAO1tD,ECxJF,SAAS6tD,GAAeC,GAC7B,OAAOC,GAAsBC,GAAmBF,IAGlD,SAASC,GAAsBD,GAC7B,MAAMG,EAAY,GACZC,EAAc,GAOpB,OANAC,GAAmB,CACjBL,UACA/rB,MAAO,EACPksB,YACAC,gBAEKn8D,OAAOiC,KAAKk6D,GAAanoC,KAAK,CAACvpB,EAAGC,IAAMyxD,EAAYzxD,GAAKyxD,EAAY1xD,IAAIuV,IAAI7W,GAAQ+yD,EAAU/yD,IAGxG,SAASizD,IAAmB,QAC1BL,EAAO,MACP/rB,EAAK,UACLksB,EAAS,YACTC,IAEA,GAAInsB,GAAS,EACX,MAAM,IAAIj4B,MAAM,4CAGlB,IAAK,MAAMzX,KAAUy7D,EACnBG,EAAU57D,EAAO6I,MAAQ7I,QAEQoF,IAA7By2D,EAAY77D,EAAO6I,OAAuBgzD,EAAY77D,EAAO6I,MAAQ6mC,KACvEmsB,EAAY77D,EAAO6I,MAAQ6mC,GAI/B,IAAK,MAAM1vC,KAAUy7D,EACfz7D,EAAO85D,cACTgC,GAAmB,CACjBL,QAASz7D,EAAO85D,aAChBpqB,MAAOA,EAAQ,EACfksB,YACAC,gBAMR,SAASF,GAAmBF,EAASM,GACnC,OAAON,EAAQ/7C,IAAI1f,IACbA,aAAkB,KAItB,GAAyB,kBAAXA,EAAqB,kEAAkEA,2BACrG,GAAOA,EAAO6I,KAAM,6BACpB7I,EAAS,IAAI,GAAaA,GAC1BA,EAAO85D,aAAe6B,GAAmB37D,EAAO85D,eANvC95D,ICnDE,SAASg8D,GAAQ3qB,EAAO,IACrC,MAAMhuC,EAA8B,qBAAX5D,QAAyBA,OAAO4D,WAAkB,GACrEC,EAAY+tC,EAAK/tC,WAAaD,EAAUC,WAAa,GACrDE,GAAyC,IAAhCF,EAAUC,QAAQ,SAC3BE,GAA+C,IAAnCH,EAAUC,QAAQ,YACpC,OAAOC,GAAUC,ECHnB,MAAMw4D,GAAY,KACZC,GAAc,KACdC,GAAa,KACbC,GAA8B,MAC9BC,GAAiB,CACrBC,eAAgB,CAAC,sBAAsB,GACvCC,gBAAiB,CAAC,kBAAkB,GACpCC,iBAAkB,CAAC,4BAA4B,GAC/CC,iBAAkB,CAAC,0BAA0B,IAEzCC,GAAW,GAMjB,SAASz5C,GAASriB,GAChB,MAAsC,qBAA3BmiB,wBAA0CniB,aAAcmiB,wBAI5Dre,QAAQ9D,GAAsB,IAAhBA,EAAGoiB,UAGnB,SAAS25C,GAAe/7D,GAC7B,MAAM4uC,EAAO5uC,EAAGc,aAAa,6BACvBk7D,EAASh8D,EAAGsG,aAAasoC,GAAQA,EAAK91B,uBAAyBuiD,IAC/DY,EAAWj8D,EAAGsG,aAAasoC,GAAQA,EAAK71B,yBAA2BuiD,IACnEY,EAAYC,GAAkBH,EAAQC,GACtCG,EAAU,CACdF,YACAF,SACAC,WACAz4D,QAASxD,EAAGsG,aAAai1D,IACzBc,uBAAwBr8D,EAAGsG,aAAak1D,KAE1C,OAAOY,EAGT,SAASD,GAAkBH,EAAQC,GACjC,OAAID,EAAO3V,MAAM,YAAc4V,EAAS5V,MAAM,WACrC,SAGL2V,EAAO3V,MAAM,WAAa4V,EAAS5V,MAAM,UACpC,QAGL2V,EAAO3V,MAAM,SAAW4V,EAAS5V,MAAM,SAAW2V,EAAO3V,MAAM,SAAW4V,EAAS5V,MAAM,QACpF,MAGF,cAzCTvnD,OAAOiC,KAAK06D,IAAgBz6D,QAAQC,IAClC66D,GAAS76D,GAAOA,IA2ClB,MAAMq7D,GAAyB,GACxB,SAASC,GAAwBv8D,EAAIw8D,EAAK/rB,EAAO,IACtD,MAAMgsB,EAAUhB,GAAee,GAG/B,GAFA,GAAOC,EAASD,IAEXpB,GAAQ3qB,GACX,OAAO,EAGT,GAAI+rB,KAAOF,GACT,OAAOA,GAAuBE,GAGhC,MAAME,EAAgBD,EAAQ,GACxBE,EAAWlsB,EAAKksB,UAAY,SAC5B7rC,EAAS,iBAAiB4rC,OAAmBC,wBAC7CC,EAAS58D,EAAG68D,aAAa,OAC/B78D,EAAGg6D,aAAa4C,EAAQ9rC,GACxB9wB,EAAG88D,cAAcF,GACjB,MAAMG,EAAa/8D,EAAGg9D,mBAAmBJ,EAAQ,OAGjD,OAFA58D,EAAGi9D,aAAaL,GAChBN,GAAuBE,GAAOO,EACvBA,EAGT,SAASG,GAAWl9D,EAAIw8D,GACtB,MAAMC,EAAUhB,GAAee,GAC/B,GAAOC,EAASD,GAChB,MAAME,EAAgBr6C,GAASriB,IAAMy8D,EAAQ,IAAmBA,EAAQ,GAClE16D,EAAiC,kBAAlB26D,EAA6B54D,QAAQ9D,EAAGc,aAAa47D,IAAkBA,EAE5F,OADA,IAAiB,IAAV36D,IAA6B,IAAVA,GACnBA,EAGF,SAASo7D,GAAYn9D,EAAI4c,GAE9B,OADAA,EAAWzX,MAAM6P,QAAQ4H,GAAYA,EAAW,CAACA,GAC1CA,EAASwgD,MAAMX,GAAWS,GAAWl9D,EAAIy8D,IC5F3C,SAASY,GAAyBr9D,GACvC,MAAMs9D,EAAYvB,GAAe/7D,GAEjC,OAAQs9D,EAAUpB,UAAUn/C,eAC1B,IAAK,SACH,MAAO,8IAMT,IAAK,QACH,MAAO,oYAUT,IAAK,MACH,MAAO,oBAIT,QACE,MAAO,sZAWN,SAASwgD,GAAkBv9D,EAAIw9D,EAAaC,GACjD,IAAIC,EAAiB,8TAqErB,OApDIP,GAAYn9D,EAAI87D,GAASH,mBAC3B+B,GAAkB,yNAYhBP,GAAYn9D,EAAI87D,GAASF,mBAAqBW,GAAwBv8D,EAAI87D,GAASF,oBACrF8B,GAAkB,mNAWhBP,GAAYn9D,EAAI87D,GAASJ,iBAAmBa,GAAwBv8D,EAAI87D,GAASJ,eAAgB,CACnGiB,SAAU,cAEVe,GAAkB,4LAWhBP,GAAYn9D,EAAI87D,GAASD,oBAC3B6B,GAAkB,4MAYbA,EC9GF,MAAMC,GAAsB,4EAKtBC,GAAsB,wdCF7BC,GAAmB,CACvB,CAACzF,IAAgBuF,GACjB,CAACtF,IAAkBuF,IAERE,GAA4B,+BACnCC,GAAsB,kCACtBC,GAAoB,cACpBC,GAAY,GACH,SAASC,GAAaptC,EAAQltB,EAAM21D,EAAQ4E,GAAsB,GAC/E,MAAMC,EAAWx6D,IAASw0D,GAE1B,IAAK,MAAMn3D,KAAOs4D,EAAQ,CACxB,MAAM8E,EAAe9E,EAAOt4D,GAC5Bo9D,EAAavrC,KAAK,CAACvpB,EAAGC,IAAMD,EAAEoxD,MAAQnxD,EAAEmxD,OACxCsD,GAAU34D,OAAS+4D,EAAa/4D,OAEhC,IAAK,IAAIsH,EAAI,EAAGwD,EAAMiuD,EAAa/4D,OAAQsH,EAAIwD,IAAOxD,EACpDqxD,GAAUrxD,GAAKyxD,EAAazxD,GAAG6tD,UAGjC,MAAM6D,EAAoBL,GAAU93D,KAAK,MAAlB,KAEvB,OAAQlF,GACN,IAAK,WACCm9D,IACFttC,EAASA,EAAO9S,QAAQ8/C,GAA2BQ,IAGrD,MAEF,IAAK,iBACCF,IACFttC,EAASA,EAAO9S,QAAQ+/C,GAAqB1X,GAASA,EAAQiY,IAGhE,MAEF,IAAK,eACCF,IACFttC,EAASA,EAAO9S,QAAQggD,GAAmB3X,GAASiY,EAAiBjY,IAGvE,MAEF,IAAK,WACE+X,IACHttC,EAASA,EAAO9S,QAAQ8/C,GAA2BQ,IAGrD,MAEF,IAAK,iBACEF,IACHttC,EAASA,EAAO9S,QAAQ+/C,GAAqB1X,GAASA,EAAQiY,IAGhE,MAEF,IAAK,eACEF,IACHttC,EAASA,EAAO9S,QAAQggD,GAAmB3X,GAASiY,EAAiBjY,IAGvE,MAEF,QACEv1B,EAASA,EAAO9S,QAAQ/c,EAAKolD,GAASA,EAAQiY,IAUpD,OANAxtC,EAASA,EAAO9S,QAAQ8/C,GAA2B,IAE/CK,IACFrtC,EAASA,EAAO9S,QAAQ,SAAUqoC,GAASA,EAAQwX,GAAiBj6D,KAG/DktB,EAEF,SAASytC,GAAeC,GAC7B,MAAMzxD,EAAS,GAOf,OANA,GAAO5H,MAAM6P,QAAQwpD,IAAYA,EAAQl5D,OAAS,GAClDk5D,EAAQx9D,QAAQu4D,IACd,IAAK,MAAMt4D,KAAOs4D,EAChBxsD,EAAO9L,GAAO8L,EAAO9L,GAAO,GAAG8L,EAAO9L,OAASs4D,EAAOt4D,KAASs4D,EAAOt4D,KAGnE8L,ECzFT,SAAS0xD,GAAaC,GACpB,OAAO,IAAI/gD,OAAO,MAAM+gD,0CAAmD,KAG7E,MAAMC,GAAqB,CAAC,CAAC,8CAA+C,qBAAsB,CAAC,wCAAyC,eAAgB,CAAC,qCAAsC,aAC7LC,GAA4B,IAAID,GAAoB,CAACF,GAAa,aAAc,SAAU,CAACA,GAAa,WAAY,WACpHI,GAA8B,IAAIF,GAAoB,CAACF,GAAa,WAAY,UAChFK,GAAqB,CAAC,CAAC,6BAA8B,gBAAiB,CAAC,kCAAmC,oBAAqB,CAAC,eAAgB,cAAe,CAAC,kBAAmB,qBACnLC,GAA4B,IAAID,GAAoB,CAACL,GAAa,MAAO,gBAAiB,CAACA,GAAa,OAAQ,eAChHO,GAA8B,IAAIF,GAAoB,CAACL,GAAa,MAAO,eAC3EQ,GAA6B,eAC7BC,GAA8B,uCAC9B,GAAsB,kCACb,SAASC,GAAgBruC,EAAQsuC,EAAmBhB,GACjE,OAAQgB,GACN,KAAK,IACH,OAAOhB,EAAWiB,GAAcvuC,EAAQ8tC,IAA6BU,GAA2BxuC,GAElG,KAAK,IACH,OAAOstC,EAAWiB,GAAcvuC,EAAQiuC,IAA6BQ,GAA2BzuC,GAElG,QACE,MAAM,IAAIja,MAAM,wBAAwBuoD,IAI9C,SAASC,GAAcvuC,EAAQ0uC,GAC7B,IAAK,MAAOC,EAASnpB,KAAgBkpB,EACnC1uC,EAASA,EAAO9S,QAAQyhD,EAASnpB,GAGnC,OAAOxlB,EAGT,SAASwuC,GAA2BxuC,GAClCA,EAASuuC,GAAcvuC,EAAQ+tC,IAC/B,MAAMa,EAAc5uC,EAAOu1B,MAAM6Y,IAEjC,GAAIQ,EAAa,CACf,MAAMC,EAAaD,EAAY,GAC/B5uC,EAASA,EAAO9S,QAAQ,IAAIL,OAAO,MAAMshD,QAAiC,KAAMU,OAC3E,CACL,MAAMA,EAAa,gBACnB7uC,EAASA,EAAO9S,QAAQ,GAAqBqoC,GAAS,YAAYsZ,OAAgBtZ,KAASroC,QAAQ,IAAIL,OAAO,MAAMshD,QAAiC,KAAMU,GAG7J,OAAO7uC,EAGT,SAASyuC,GAA2BzuC,GAClCA,EAASuuC,GAAcvuC,EAAQkuC,IAC/B,MAAMU,EAAc5uC,EAAOu1B,MAAM6Y,IAEjC,GAAIQ,EAAa,CACf,MAAMC,EAAaD,EAAY,GAC/B5uC,EAASA,EAAO9S,QAAQkhD,GAA6B,IAAIlhD,QAAQ,IAAIL,OAAO,MAAMgiD,OAAiB,KAAMV,IAG3G,OAAOnuC,ECpDT,MAAM8uC,GAA6B,OAAO9B,SACpC+B,GAAc,CAClB,CAACzH,IAAgB,SACjB,CAACC,IAAkB,YAEfyH,GAA2B,6BAI1B,SAASC,GAAgB//D,EAAIywC,GAClC,MAAM,GACJuoB,EAAE,GACFC,GACExoB,EACEoqB,EAAUD,GAAenqB,EAAKoqB,SAAW,IAC/C,MAAO,CACL76D,KACAg5D,GAAIgH,GAAehgE,EAAIlB,OAAO4wB,OAAO,GAAI+gB,EAAM,CAC7C3f,OAAQkoC,EACRp1D,KAAMw0D,GACNyC,aAEF5B,GAAI+G,GAAehgE,EAAIlB,OAAO4wB,OAAO,GAAI+gB,EAAM,CAC7C3f,OAAQmoC,EACRr1D,KAAMy0D,GACNwC,aAEFzB,YAAa6G,GAAoBpF,IAIrC,SAASmF,GAAehgE,GAAI,GAC1BihC,EAAE,OACFnQ,EAAM,KACNltB,EAAI,QACJi3D,EAAO,QACPvB,EAAU,GAAE,cACZ4G,EAAgB,GAAE,OAClB3G,EAAS,GAAE,mBACX4G,GAAqB,EAAK,SAC1BC,GAAW,EAAI,IACfh8D,IAEA,GAAyB,kBAAX0sB,EAAqB,kCACnC,MAAMstC,EAAWx6D,IAASw0D,GACpBiI,EAAcvvC,EAAOnH,MAAM,MACjC,IAAI6zC,EAAc,IACd8C,EAAc,GACdC,EAAazvC,EAE2B,IAAxCuvC,EAAY,GAAG19D,QAAQ,cACzB66D,EAAc,IACd8C,EAAcD,EAAY,GAC1BE,EAAaF,EAAYlhE,MAAM,GAAGgH,KAAK,OAEvCm6D,EAAc,YAAY9C,EAG5B,MAAMgD,EAAa,GACnB3F,EAAQ75D,QAAQ5B,IACdN,OAAO4wB,OAAO8wC,EAAYphE,EAAOqhE,gBAEnC3hE,OAAO4wB,OAAO8wC,EAAYlH,GAC1B,IAAIoH,EAAkBN,EAAW,GACjCE,MACAK,GAAc,CACZ1/B,KACAnQ,SACAltB,aAEFg9D,GAAc,CACZh9D,aAEFy5D,GAAyBr9D,OACzBu9D,GAAkBv9D,EAAIw9D,GAAcY,OACpCyC,GAAsBL,OACtBpC,EAAW,GAAK0B,OACXQ,EAAH,KAEF,MAAMQ,EAAkBC,GAAuBb,GACzCc,EAAiB,GACjBC,EAAiB,GACjBC,EAAiB,GAEvB,IAAK,MAAMjgE,KAAOs4D,EAAQ,CACxB,MAAMkB,EAAmC,kBAAhBlB,EAAOt4D,GAAoB,CAClDw5D,UAAWlB,EAAOt4D,GAClB05D,MAAO,GACLpB,EAAOt4D,GACLolD,EAAQplD,EAAIolD,MAAM,yBAExB,GAAIA,EAAO,CACT,MAAM8a,EAAO9a,EAAM,GACbp+C,EAAOo+C,EAAM,GAEf8a,EACW,SAATl5D,EACFg5D,EAAehgE,GAAO,CAACw5D,GAEvByG,EAAejgE,GAAO,CAACw5D,GAGzBuG,EAAe//D,GAAO,CAACw5D,QAGzByG,EAAejgE,GAAO,CAACw5D,GAI3B,IAAK,MAAMr7D,KAAUy7D,EAAS,CACxBz2D,GACFhF,EAAOgiE,kBAAkBb,EAAYn8D,GAGvC,MAAM01D,EAAe16D,EAAOiiE,gBAAgBz9D,EAAM45D,GAClDkD,GAAmB5G,EACnB,MAAMF,EAAax6D,EAAOw6D,WAAWh2D,GAErC,IAAK,MAAM3C,KAAO24D,EAAY,CAC5B,MAAMvT,EAAQplD,EAAIolD,MAAM,sBAExB,GAAIA,EAAO,CACT,MAAMp+C,EAAOo+C,EAAM,GACbib,EAAyB,SAATr5D,EAAkBg5D,EAAiBC,EACzDI,EAAcrgE,GAAOqgE,EAAcrgE,IAAQ,GAC3CqgE,EAAcrgE,GAAK8G,KAAK6xD,EAAW34D,SAEnC+/D,EAAe//D,GAAO+/D,EAAe//D,IAAQ,GAC7C+/D,EAAe//D,GAAK8G,KAAK6xD,EAAW34D,KAW1C,OANAy/D,GAAmBd,GACnBc,EAAkBxC,GAAawC,EAAiB98D,EAAMq9D,GACtDP,GAAmBa,GAAiBT,EAAgBl9D,GAAOo9D,GAC3DN,GAAmBH,EACnBG,EAAkBxC,GAAawC,EAAiB98D,EAAMs9D,GACtDR,EAAkBvB,GAAgBuB,EAAiBP,EAAqB,IAAM3C,EAAaY,GACpFsC,EAGT,SAAST,GAAoBpF,GAC3B,OAAO,SAAqBpqB,GAC1B,MAAM0oB,EAAW,GAEjB,IAAK,MAAM/5D,KAAUy7D,EAAS,CAC5B,MAAM2G,EAAiBpiE,EAAOg6D,YAAY3oB,EAAM0oB,GAChDr6D,OAAO4wB,OAAOypC,EAAUqI,GAG1B,OAAOrI,GAIX,SAASyH,IAAc,KACrBh9D,IAEA,MAAO,yBACai8D,GAAYj8D,GAAMyvB,kBAIxC,SAASstC,IAAc,GACrB1/B,EAAE,OACFnQ,EAAM,KACNltB,IAEA,MAAM69D,EAAmBxgC,GAAoB,kBAAPA,IAAsD,IAAnCnQ,EAAOnuB,QAAQ,eACxE,OAAO8+D,EAAmB,yBACNxgC,KAAM4+B,GAAYj8D,SAEpC,GAGJ,SAASi9D,GAAsBvH,EAAU,IACvC,IAAIj3B,EAAQ,EACRq/B,EAAa,GAEjB,IAAK,MAAMC,KAAUrI,EAAS,CACd,IAAVj3B,IACFq/B,GAAc,8BAGhBr/B,IACA,MAAMtgC,EAAQu3D,EAAQqI,IAElB5/D,GAASud,OAAOC,SAASxd,MAC3B2/D,GAAc,WAAWC,EAAOtuC,iBAAiBimC,EAAQqI,QAQ7D,OAJc,IAAVt/B,IACFq/B,GAAc,MAGTA,EAGT,SAASH,GAAiBrB,EAAec,GACvC,IAAIj0D,EAAS,GAEb,IAAK,MAAM60D,KAAY1B,EAAe,CACpC,MAAM2B,EAAe3B,EAAc0B,GAOnC,GANA70D,GAAU,QAAQ80D,EAAaC,gBAE3BD,EAAaE,SACfh1D,GAAU,KAAK80D,EAAaE,QAG1Bf,EAAeY,GAAW,CAC5B,MAAMhI,EAAaoH,EAAeY,GAClChI,EAAW9mC,KAAK,CAACvpB,EAAGC,IAAMD,EAAEoxD,MAAQnxD,EAAEmxD,OAEtC,IAAK,MAAMF,KAAab,EACtB7sD,GAAU,KAAK0tD,EAAUA,cAIzBoH,EAAaG,SACfj1D,GAAU,KAAK80D,EAAaG,QAG9Bj1D,GAAU,MAGZ,OAAOA,EAGT,SAASg0D,GAAuBb,GAC9B,MAAMnzD,EAAS,CACbisD,GAAI,GACJC,GAAI,IAmBN,OAjBAiH,EAAcl/D,QAAQw5D,IACpB,IAAI/pB,EAEgB,kBAAT+pB,GACT/pB,EAAO+pB,EACPA,EAAO/pB,EAAK+pB,MAEZ/pB,EAAO,GAGT+pB,EAAOA,EAAKr8C,OACZ,MAAOu8C,EAAOoH,GAAatH,EAAK7wC,MAAM,KAChC1hB,EAAOuyD,EAAKx8C,QAAQ,OAAQ,IAClCjR,EAAO2tD,GAAOzyD,GAAQnJ,OAAO4wB,OAAO+gB,EAAM,CACxCqxB,gBAGG/0D,EChQF,MAAM,GAAM,IAAI,EAAI,CACzBk0B,GAAI,Y,iFCFC,SAASghC,GAAiBjiE,GAC/B,MAAM,KACJC,GACED,EAEJ,GAAIA,EAAGwH,QAAUvH,EAAM,CACrB,MAAM,YACJiiE,GACEjiE,EAAKkiE,eACT,OAAOD,EAAcliE,EAAGoiE,mBAAqBF,EAAc,EAG7D,OAAO,EAEF,SAASG,GAAkBriE,EAAIsiE,EAAUC,GAAU,GACxD,MAAMC,EAAQP,GAAiBjiE,GACzB4uB,EAAQ5uB,EAAGoiE,mBACXtzC,EAAS9uB,EAAGyiE,oBAClB,OAAOC,GAAYJ,EAAUE,EAAO5zC,EAAOE,EAAQyzC,GAE9C,SAASI,GAAoBC,GAClC,MAAMC,EAAgC,qBAAXhkE,OAAyB,EAAIA,OAAOikE,kBAAoB,EAEnF,OAAIxjD,OAAOC,SAASqjD,GACXA,GAAmB,EAAI,EAAIA,EAG7BA,EAAkBC,EAAc,EAGzC,SAASH,GAAYpL,EAAOkL,EAAO5zC,EAAOE,EAAQyzC,GAChD,MAAMr4D,EAAI,GAAOotD,EAAM,GAAIkL,EAAO5zC,GAClC,IAAIzkB,EAAI,GAAOmtD,EAAM,GAAIkL,EAAO1zC,EAAQyzC,GACpCxyD,EAAI,GAAOunD,EAAM,GAAK,EAAGkL,EAAO5zC,GACpC,MAAMm0C,EAAQhzD,IAAM6e,EAAQ,EAAI7e,EAAIA,EAAI,EAExC,IAAIizD,EAUJ,OAXAjzD,EAAI,GAAOunD,EAAM,GAAK,EAAGkL,EAAO1zC,EAAQyzC,GAGpCA,GACFxyD,EAAU,IAANA,EAAUA,EAAIA,EAAI,EACtBizD,EAAQ74D,EACRA,EAAI4F,GAEJizD,EAAQjzD,IAAM+e,EAAS,EAAI/e,EAAIA,EAAI,EAG9B,CACL7F,IACAC,IACAykB,MAAOznB,KAAKC,IAAI27D,EAAQ74D,EAAI,EAAG,GAC/B4kB,OAAQ3nB,KAAKC,IAAI47D,EAAQ74D,EAAI,EAAG,IAIpC,SAAS,GAAOD,EAAGs4D,EAAO5zC,GACxB,MAAMrjB,EAAIpE,KAAKgF,IAAIhF,KAAKiX,MAAMlU,EAAIs4D,GAAQ5zC,EAAQ,GAClD,OAAOrjB,EAGT,SAAS,GAAOpB,EAAGq4D,EAAO1zC,EAAQyzC,GAChC,OAAOA,EAAUp7D,KAAKC,IAAI,EAAG0nB,EAAS,EAAI3nB,KAAKiX,MAAMjU,EAAIq4D,IAAUr7D,KAAKgF,IAAIhF,KAAKiX,MAAMjU,EAAIq4D,GAAQ1zC,EAAS,GCtD9G,MAAM,GAAY,0BACZm0C,GAAS,IAAiC,qBAAb9/D,SAC7B+/D,GAAmB,CACvBxpD,QAAQ,EACRypD,QAAQ,EACRC,cAAc,EACdC,aAAa,EACb77D,OAAQ,KACRgY,OAAO,EACPoP,MAAO,IACPE,OAAQ,KAEH,SAASw0C,GAAgBrmD,EAAU,IACxC,gBAAO,GAAW,4IAClBA,EAAUne,OAAO4wB,OAAO,GAAIwzC,GAAkBjmD,GAC9C,MAAM,MACJ2R,EAAK,OACLE,GACE7R,EAEJ,SAASuhC,EAAQlhC,GACf,GAAIL,EAAQmmD,aACV,MAAM,IAAIvsD,MAAMyG,GAIlB,OADAnZ,QAAQjF,MAAMoe,GACP,KAIT,IAAItd,EADJid,EAAQuhC,QAAUA,EAElB,MAAM,OACJh3C,GACEyV,EACEsmD,EAAeC,GAAU,CAC7Bh8D,SACAonB,QACAE,SACA0vB,YAIF,OAFAx+C,EAAKyjE,GAAqBF,EAActmD,GAEnCjd,GAILA,EAAK0jE,GAAoB1jE,EAAIid,GAC7B0mD,GAAQ3jE,GACDA,GALE,KAOJ,SAAS0jE,GAAoB1jE,EAAIid,EAAU,IAChD,IAAKjd,GAAMA,EAAG4jE,cACZ,OAAO5jE,EAGTA,EAAGoiB,SAAWpiB,EAAGoiB,UAAYyhD,GAAW7jE,GACxCA,EAAGC,KAAOD,EAAGC,MAAQ,GACrBD,EAAGC,KAAKkiE,eAAiBniE,EAAGC,KAAKkiE,gBAAkB,GACnDllD,EAAUne,OAAO4wB,OAAO,GAAIwzC,GAAkBjmD,GAC9C,MAAM,YACJomD,EAAW,MACX7jD,GACEvC,EAmBJ,OAjBIomD,GACF,gBAAkBrjE,EAAI,CACpB8jE,WAAW,EACX1/D,IAAK,IAAIxC,IAAS,GAAIwC,IAAI,KAAMxC,EAAd,KAIlB,IAAa4d,IACV,aAAOukD,kBAGV/jE,EAAK,aAAO+jE,iBAAiB/jE,EAAIid,GACjC,GAAI6xB,MAAQ3nC,KAAKC,IAAI,GAAI0nC,MAAO,IAHhC,GAAIle,KAAK,qEAAT,IAOJ5wB,EAAG4jE,eAAgB,EACZ5jE,EAEF,SAASgkE,GAAoBhkE,GAClC,MAAMikE,EAAejkE,EAAGsG,aAAa,MAC/B49D,EAAiBlkE,EAAGsG,aAAa,MACjC5E,EAAM1B,EAAGc,aAAa,6BACtBqjE,EAAiBziE,GAAO1B,EAAGsG,aAAa5E,EAAIoX,uBAAyB,MACrEsrD,EAAmB1iE,GAAO1B,EAAGsG,aAAa5E,EAAIqX,yBAA2B,MAC/E,MAAO,CACLijD,OAAQmI,GAAkBF,EAC1BhI,SAAUmI,GAAoBF,EAC9BD,eACAC,iBACA1gE,QAASxD,EAAGsG,aAAa,MACzB+1D,uBAAwBr8D,EAAGsG,aAAa,QAGrC,SAAS+9D,GAAgBrkE,EAAIid,EAAU,IAC5C,GAAIjd,EAAGwH,OAAQ,CACb,MAAMs7D,EAAmBH,GAAoB1lD,EAAQ2lD,iBAErD,YADA0B,GAAoBtkE,EAAI8iE,EAAkB7lD,GAI5C,MAAMvb,EAAM1B,EAAGc,aAAa,gCAExBY,GAAO,UAAWub,GAAW,WAAYA,GAC3Cvb,EAAI6iE,OAAOtnD,EAAQ2R,MAAO3R,EAAQ6R,QAItC,SAAS20C,GAAqBj8D,EAAQyV,GACpC,MAAM,QACJuhC,GACEvhC,EACJ,IAAIunD,EAAe,KAEnB,MAAMC,EAAgBvlE,GAASslE,EAAetlE,EAAMwlE,eAAiBF,EAErEh9D,EAAOC,iBAAiB,4BAA6Bg9D,GAAe,GACpE,MAAM,OACJtB,GAAS,EAAI,OACbzpD,GAAS,GACPuD,EACJ,IAAIjd,EAAK,KAcT,OAZI0Z,IACF1Z,EAAKA,GAAMwH,EAAOm9D,WAAW,SAAU1nD,GACvCjd,EAAKA,GAAMwH,EAAOm9D,WAAW,sBAAuB1nD,IAGlDkmD,IACFnjE,EAAKA,GAAMwH,EAAOm9D,WAAW,QAAS1nD,GACtCjd,EAAKA,GAAMwH,EAAOm9D,WAAW,qBAAsB1nD,IAGrDzV,EAAO0V,oBAAoB,4BAA6BunD,GAAe,GAElEzkE,GAIDid,EAAQ2nD,eACVp9D,EAAOC,iBAAiB,mBAAoBwV,EAAQ2nD,eAAe,GAGjE3nD,EAAQ4nD,mBACVr9D,EAAOC,iBAAiB,uBAAwBwV,EAAQ4nD,mBAAmB,GAGtE7kE,GAXEw+C,EAAQ,oBAAoB9kC,IAAWypD,EAAS,SAAW,oBAAoBqB,GAAgB,mBAc1G,SAAShB,IAAU,OACjBh8D,EAAM,MACNonB,EAAQ,IAAG,OACXE,EAAS,IAAG,QACZ0vB,IAEA,IAAI+kB,EAEJ,GAAsB,kBAAX/7D,EAAqB,CAC9B,MAAMs9D,EAAe7B,IAAkC,aAAxB9/D,SAAS4hE,WAEnCD,GACHtmB,EAAQ,qCAAqCh3C,6BAG/C+7D,EAAepgE,SAAS6hE,eAAex9D,QAC9BA,EACT+7D,EAAe/7D,GAEf+7D,EAAepgE,SAAS0sB,cAAc,UACtC0zC,EAAatiC,GAAK,gBAClBsiC,EAAa9kC,MAAM7P,MAAQtP,OAAOC,SAASqP,GAAYA,EAAH,KAAe,OACnE20C,EAAa9kC,MAAM3P,OAASxP,OAAOC,SAASuP,GAAaA,EAAH,KAAgB,OACtE3rB,SAASq3C,KAAKyqB,aAAa1B,EAAcpgE,SAASq3C,KAAK0qB,aAGzD,OAAO3B,EAGT,SAASI,GAAQ3jE,GACf,MAAMmlE,EAAQ,gBAASnlE,GAAM,SAAW,SAClC4uC,EAAOo1B,GAAoBhkE,GAC3BolE,EAASx2B,EAAO,IAAIA,EAAKotB,UAAUptB,EAAKqtB,YAAc,GACtDz8C,EAAQxf,EAAGwf,MAAQ,SAAW,GACpC,GAAIovB,KAAK,EAAG,GAAGu2B,IAAQ3lD,aAAiB4lD,IAAxC,GAGF,SAASvB,GAAW7jE,GAClB,MAAsC,qBAA3BmiB,wBAA0CniB,aAAcmiB,uBAC1D,EAGF,EAGT,SAASmiD,GAAoBtkE,EAAI8iE,EAAkB7lD,GACjD,IAAIilD,EAAc,UAAWjlD,EAAUA,EAAQ2R,MAAQ5uB,EAAGwH,OAAO06D,YAC7DmD,EAAe,WAAYpoD,EAAUA,EAAQ6R,OAAS9uB,EAAGwH,OAAO69D,aAE/DnD,GAAgBmD,IACnB,GAAIjhE,IAAI,EAAG,uCAAX,GACA0+D,EAAmB,EACnBZ,EAAcliE,EAAGwH,OAAOonB,OAAS,EACjCy2C,EAAerlE,EAAGwH,OAAOsnB,QAAU,GAGrC9uB,EAAGC,KAAOD,EAAGC,MAAQ,GACrBD,EAAGC,KAAKkiE,eAAiBniE,EAAGC,KAAKkiE,gBAAkB,GACnD,MAAMmD,EAAatlE,EAAGC,KAAKkiE,eAE3B,GAAImD,EAAWpD,cAAgBA,GAAeoD,EAAWD,eAAiBA,GAAgBC,EAAWxC,mBAAqBA,EAAkB,CAC1I,IAAIyC,EAAoBzC,EACxB,MAAM0C,EAAcr+D,KAAK6lC,MAAMk1B,EAAcqD,GACvCE,EAAet+D,KAAK6lC,MAAMq4B,EAAeE,GAC/CvlE,EAAGwH,OAAOonB,MAAQ42C,EAClBxlE,EAAGwH,OAAOsnB,OAAS22C,EAEfzlE,EAAGoiE,qBAAuBoD,GAAexlE,EAAGyiE,sBAAwBgD,IACtE,GAAI70C,KAAK,6BAAT,GACA20C,EAAoBp+D,KAAKgF,IAAInM,EAAGoiE,mBAAqBF,EAAaliE,EAAGyiE,oBAAsB4C,GAC3FrlE,EAAGwH,OAAOonB,MAAQznB,KAAK6lC,MAAMk1B,EAAcqD,GAC3CvlE,EAAGwH,OAAOsnB,OAAS3nB,KAAK6lC,MAAMq4B,EAAeE,IAG/CzmE,OAAO4wB,OAAO1vB,EAAGC,KAAKkiE,eAAgB,CACpCD,cACAmD,eACAvC,sBC1ON,MAAM,GAA4C,SAC5C4C,GAAkB,sDAExB,MAAM,GACJ,cACE5gE,KAAKyuC,MAAQ,IAAIlK,IAGnB,IAAIphC,GAOF,OANKnD,KAAKyuC,MAAM/K,IAAIvgC,IAClBnD,KAAKyuC,MAAM3uB,IAAI3c,EAAM,IAAI,GAAM,CAC7Bg5B,GAAIh5B,KAIDnD,KAAKyuC,MAAMxtB,IAAI9d,IAK1B,MAAM09D,GAAY,IAAI,GAEtB,GAAI,aAAO1lE,MAAQ,aAAOA,KAAKykC,UAAY,GACzC,MAAM,IAAI7tB,MAAM,yCAAyC,aAAO5W,KAAKykC,cAAc,MAGhF,aAAOzkC,OACN,2BACF,GAAImE,IAAI,EAAG,WAAW,QAAashE,KAAnC,GAGF,aAAOzlE,KAAO,aAAOA,MAAQ,CAC3BykC,QAAO,GACPlhC,QAAS,GACTY,IAAA,GACAmvC,MAAOoyB,GACP1iE,QAAS,CACP43D,QAAS,GACT+K,OAAQ,MAMC,aAAW,KC/CnB,SAAS,GAAOvoD,EAAWC,GAChC,IAAKD,EACH,MAAM,IAAIxG,MAAMyG,GAAW,8BCDxB,SAASuoD,GAAY7lE,EAAIiI,GAC9B,GAAoB,kBAATA,EACT,OAAOA,EAGT,MAAMswD,EAASj5C,OAAOrX,GAEtB,IAAK69D,MAAMvN,GACT,OAAOA,EAGTtwD,EAAOA,EAAK+V,QAAQ,QAAS,IAC7B,MAAMjc,EAAQ/B,EAAGiI,GAEjB,OADA,QAAiBzD,IAAVzC,EAAqB,mCAAmCkG,GACxDlG,EAEF,SAASgkE,GAAO/lE,EAAI+B,GACzBA,EAAQud,OAAOvd,GAEf,IAAK,MAAMd,KAAOjB,EAChB,GAAIA,EAAGiB,KAASc,EACd,MAAO,MAAMd,EAIjB,OAAOoC,OAAOtB,GCzBhB,MAAMikE,GAAc,GACb,SAAS/hD,GAAIgd,EAAK,MACvB+kC,GAAY/kC,GAAM+kC,GAAY/kC,IAAO,EACrC,MAAMoB,EAAQ2jC,GAAY/kC,KAC1B,MAAO,GAAGA,KAAMoB,IAEX,SAAS4jC,GAAa5gE,GAE3B,OADA,GAAoB,kBAANA,EAAgB,0BACvBA,GAAqB,KAAfA,EAAIA,EAAI,GAEhB,SAAS6gE,GAAcrpD,GAC5B,IAAIspD,GAAU,EAEd,IAAK,MAAMllE,KAAO4b,EAAK,CACrBspD,GAAU,EACV,MAGF,OAAOA,EClBF,SAASC,GAAmBC,EAAUC,EAAW9iE,EAAS+iE,GAC/D,MAAMC,EAAiB,eAAehjE,wDAEhC0C,EAAYpH,OAAO2vC,eAAe43B,GACxCE,EAAYvlE,QAAQylE,IACdvgE,EAAUugE,aAIdvgE,EAAUugE,GAAc,KAEtB,MADA,GAAIpM,QAAQ,0BAA0BiM,KAAaG,MAAgBD,EAAnE,GACM,IAAI3vD,MAAM4vD,OCNtB,MAAMC,GAAgC,gDACvB,MAAM,GACnB,YAAY1mE,EAAIywC,EAAO,IACrB,gBAAmBzwC,GACnB,MAAM,GACJihC,EAAE,SACFuO,EAAW,IACTiB,EACJ3rC,KAAK9E,GAAKA,EACV8E,KAAK6hE,IAAM3mE,EACX8E,KAAKm8B,GAAKA,GAAMhd,GAAInf,KAAKmb,YAAYhY,MACrCnD,KAAK0qC,SAAWA,EAChB1qC,KAAK8hE,QAAS,EACd9hE,KAAK+hE,QAAUp2B,EAAKj2B,YAEChW,IAAjBM,KAAK+hE,UACP/hE,KAAK+hE,QAAU/hE,KAAKgiE,iBAGtBhiE,KAAKsyC,WAAa,EAElBtyC,KAAKiiE,YAGP,WACE,MAAO,GAAGjiE,KAAKmb,YAAYhY,QAAQnD,KAAKm8B,MAG1C,aACE,OAAOn8B,KAAK+hE,QAGd,QAAO,eACLG,GAAiB,GACf,IACF,MAAMC,EAAWniE,KAAK+hE,SAAW/hE,KAAKoiE,cAAcpiE,KAAK+hE,SAYzD,OAVI/hE,KAAK+hE,SACP/hE,KAAKqiE,eAGPriE,KAAK+hE,QAAU,KAEXI,GAAYD,GACdC,EAAS9pC,OAAOr5B,SAAS9C,QAAQowB,GAASA,EAAM4Y,UAG3CllC,KAGT,KAAKsiE,EAAetiE,KAAK0V,QACvB,GAA4B,oBAAjB4sD,EAGT,OAFAtiE,KAAKuiE,YAAYD,GAEVtiE,KAGT,IAAI/C,EAcJ,OAZK+C,KAAK8hE,OASR7kE,EAAQqlE,KARRtiE,KAAKuiE,YAAYviE,KAAK0V,QAEtB1V,KAAK8hE,QAAS,EACd7kE,EAAQqlE,IACRtiE,KAAK8hE,QAAS,EAEd9hE,KAAKuiE,YAAY,OAKZtlE,EAGT,SACE+C,KAAK3D,KAAK,MAGZ,aAAayF,EAAO6pC,EAAO,IACzB7pC,EAAQi/D,GAAY/gE,KAAK9E,GAAI4G,GAC7B,GAAOA,GACP,MAAMya,EAAavc,KAAKmb,YAAYqnD,YAAc,GAC5CC,EAAYlmD,EAAWza,GAE7B,GAAI2gE,EAAW,CACb,MAAMC,EAAW,gBAAS1iE,KAAK9E,IACzBynE,KAAwB,WAAYF,IAAcC,OAAgB,cAAeD,IAAcziE,KAAK9E,GAAGc,aAAaymE,EAAU1mE,YAEpI,IAAK4mE,EAAoB,CACvB,MAAMC,EAAgBH,EAAUpE,OAC1BwE,EAAgB,WAAYJ,EAAYA,EAAU7tD,OAAS6tD,EAAUpE,OACrEyE,EAAeJ,EAAWG,EAAgBD,EAChD,OAAOE,GAIX,OAAO9iE,KAAK+iE,cAAcjhE,EAAO6pC,GAGnC,cAAcxzB,EAAU,IACtB,MAAM,WACJoE,EAAU,KACVtgB,GACEkc,EACEqqD,EAAaxiE,KAAKmb,YAAYqnD,YAAc,GAC5CE,EAAW,gBAAS1iE,KAAK9E,IACzB6gB,EAAS,GACTU,EAAgBF,GAAcviB,OAAOiC,KAAKumE,GAEhD,IAAK,MAAM1gE,KAAS2a,EAAe,CACjC,MAAMgmD,EAAYD,EAAW1gE,GACvB6gE,EAAqBF,MAAgB,WAAYA,IAAcC,OAAgB,cAAeD,IAAcziE,KAAK9E,GAAGc,aAAaymE,EAAU1mE,YAEjJ,GAAI4mE,EAAoB,CACtB,MAAMxmE,EAAMF,EAAOglE,GAAOjhE,KAAK9E,GAAI4G,GAASA,EAC5Cia,EAAO5f,GAAO6D,KAAKwB,aAAaM,EAAOqW,GAEnClc,GAA2B,WAAnBwmE,EAAU3jE,OACpBid,EAAO5f,GAAO8kE,GAAOjhE,KAAK9E,GAAI6gB,EAAO5f,MAK3C,OAAO4f,EAGT,aAAaja,EAAO7E,GAClB6E,EAAQi/D,GAAY/gE,KAAK9E,GAAI4G,GAC7B,GAAOA,GACP,MAAMya,EAAavc,KAAKmb,YAAYqnD,YAAc,GAC5CC,EAAYlmD,EAAWza,GAE7B,GAAI2gE,EAAW,CACb,MAAMC,EAAW,gBAAS1iE,KAAK9E,IACzBynE,KAAwB,WAAYF,IAAcC,OAAgB,cAAeD,IAAcziE,KAAK9E,GAAGc,aAAaymE,EAAU1mE,YAEpI,IAAK4mE,EACH,MAAM,IAAI5wD,MAAM,4CAGK,WAAnB0wD,EAAU3jE,OACZ7B,EAAQ8jE,GAAY9jE,IAMxB,OAFA+C,KAAKgjE,cAAclhE,EAAO7E,GAEnB+C,KAGT,cAAcuc,GACZ,IAAK,MAAMza,KAASya,EAClBvc,KAAKijE,aAAanhE,EAAOya,EAAWza,IAGtC,OAAO9B,KAGT,mBAAmBwhE,EAAW9iE,EAAS+iE,GACrC,OAAOH,GAAmBthE,KAAMwhE,EAAW9iE,EAAS+iE,GAGtD,WAAW91B,IAEX,gBACE,MAAM,IAAI55B,MAAM6vD,IAGlB,gBACE,MAAM,IAAI7vD,MAAM6vD,IAGlB,YAAYlsD,GACV,MAAM,IAAI3D,MAAM6vD,IAGlB,qBACE,MAAM,IAAI7vD,MAAM6vD,IAGlB,cAAc9/D,EAAO6pC,GACnB,MAAM,IAAI55B,MAAM6vD,IAGlB,cAAc9/D,EAAO7E,GACnB,MAAM,IAAI8U,MAAM6vD,IAGlB,WAEE,OADA5hE,KAAK9E,GAAGC,KAAO6E,KAAK9E,GAAGC,MAAQ,GACxB6E,KAAK9E,GAAGC,KAGjB,YACE,MAAMgI,EAAOnD,KAAKmb,YAAYhY,KACxBsrC,EAAQoyB,GAAU5/C,IAAI,mBAC5BwtB,EAAMxtB,IAAI,qBAAqBiiD,iBAC/Bz0B,EAAMxtB,IAAO9d,EAAH,aAAoB+/D,iBAC9Bz0B,EAAMxtB,IAAO9d,EAAH,YAAmB+/D,iBAG/B,eACE,MAAM//D,EAAOnD,KAAKmb,YAAYhY,KACxBsrC,EAAQoyB,GAAU5/C,IAAI,mBAC5BwtB,EAAMxtB,IAAO9d,EAAH,YAAmBggE,iBAG/B,sBAAsBpvB,EAAO5wC,EAAOnD,KAAKmb,YAAYhY,MACnD,MAAMsrC,EAAQoyB,GAAU5/C,IAAI,gBAC5BwtB,EAAMxtB,IAAI,cAAc4sB,SAASkG,GACjCtF,EAAMxtB,IAAO9d,EAAH,WAAkB0qC,SAASkG,GACrC/zC,KAAKsyC,WAAayB,EAGpB,wBAAwB5wC,EAAOnD,KAAKmb,YAAYhY,MAC9C,MAAMsrC,EAAQoyB,GAAU5/C,IAAI,gBAC5BwtB,EAAMxtB,IAAI,cAAc6sB,cAAc9tC,KAAKsyC,YAC3C7D,EAAMxtB,IAAO9d,EAAH,WAAkB2qC,cAAc9tC,KAAKsyC,YAC/CtyC,KAAKsyC,WAAa,GChOtB,MAAM8wB,GAAqB,gDACpB,SAASC,GAAwBC,GACtC,MAAMxkE,EAAO6a,YAAYC,OAAO0pD,GAAeA,EAAYnoD,YAAcmoD,EAEzE,OAAQxkE,GACN,KAAKyF,aACH,OAAO,KAET,KAAKg/D,YACH,OAAO,KAET,KAAKC,YACH,OAAO,KAET,KAAKxvB,WACH,OAAO,KAET,KAAKyvB,kBACH,OAAO,KAET,KAAKC,UACH,OAAO,KAET,KAAKC,WACH,OAAO,KAET,KAAKxtD,WACH,OAAO,KAET,QACE,MAAM,IAAIpE,MAAMqxD,KAGf,SAASQ,GAAwBC,GAAQ,QAC9CC,GAAU,GACR,IACF,OAAQD,GACN,KAAK,KACH,OAAOt/D,aAET,KAAK,KACL,KAAK,MACL,KAAK,MACL,KAAK,MACH,OAAOg/D,YAET,KAAK,KACH,OAAOC,YAET,KAAK,KACH,OAAOM,EAAUL,kBAAoBzvB,WAEvC,KAAK,KACH,OAAO0vB,UAET,KAAK,KACH,OAAOC,WAET,KAAK,KACH,OAAOxtD,WAET,QACE,MAAM,IAAIpE,MAAM,uDAGf,SAASgyD,IAAS,KACvBljC,EAAI,MACJ/W,EAAK,OACLE,EAAM,cACNg6C,EAAgB,EAAC,KACjBC,IAEA,MAAMC,EAAcp6C,EAAQk6C,EAC5BC,EAAOA,GAAQ,IAAIjwB,WAAWkwB,GAE9B,IAAK,IAAI7+D,EAAI,EAAGA,EAAI2kB,EAAS,IAAK3kB,EAAG,CACnC,MAAM8+D,EAAY9+D,EAAI6+D,EAChBE,GAAgBp6C,EAAS3kB,EAAI,GAAK6+D,EACxCD,EAAKnkD,IAAI+gB,EAAKmmB,SAASmd,EAAWA,EAAYD,IAC9CrjC,EAAK6M,WAAWy2B,EAAWC,EAAcA,EAAeF,GACxDrjC,EAAK/gB,IAAImkD,EAAMG,IAGZ,SAAS,IAAY,KAC1BvjC,EAAI,MACJ/W,EAAK,OACLE,IAEA,MAAMq6C,EAAWhiE,KAAKiX,MAAMwQ,EAAQ,GAC9Bw6C,EAAYjiE,KAAKiX,MAAM0Q,EAAS,GAChCu6C,EAAU,IAAIvwB,WAAWqwB,EAAWC,EAAY,GAEtD,IAAK,IAAIj/D,EAAI,EAAGA,EAAIi/D,EAAWj/D,IAC7B,IAAK,IAAID,EAAI,EAAGA,EAAIi/D,EAAUj/D,IAC5B,IAAK,IAAI4F,EAAI,EAAGA,EAAI,EAAGA,IACrBu5D,EAA6B,GAApBl/D,EAAIg/D,EAAWj/D,GAAS4F,GAAK61B,EAA+B,GAArB,EAAJx7B,EAAQykB,EAAY,EAAJ1kB,GAAa4F,GAK/E,MAAO,CACL61B,KAAM0jC,EACNz6C,MAAOu6C,EACPr6C,OAAQs6C,GCtGL,SAASE,GAAWhD,EAAW/sC,EAAOgwC,GAC3C,MAAM,aACJC,EAAe,GAAE,gBACjBC,EAAkB,GAAE,cACpBC,EAAgB,IACdH,EAEJ,IAAK,MAAM3Q,KAAY4Q,EACrB,GAAI5Q,KAAYr/B,EAAO,CACrB,MAAMowC,EAAkBH,EAAa5Q,GAC/BtiB,EAAcqzB,EAAkB,GAAGrD,KAAakD,EAAa5Q,KAAc,MACjF,GAAIyB,QAAQ,GAAGiM,KAAa1N,IAAYtiB,EAAxC,GAIJ,IAAK,MAAMsiB,KAAY6Q,EACrB,GAAI7Q,KAAYr/B,EAAO,CACrB,MAAMowC,EAAkBF,EAAgB7Q,GACxC,GAAIlD,WAAW,GAAG4Q,KAAa1N,IAAY,GAAG0N,KAAaqD,IAA3D,GAIJ,IAAIC,EAAW,KAEf,IAAK,MAAMhR,KAAY8Q,EACrB,GAAI9Q,KAAYr/B,EAAO,CACrB,MAAMowC,EAAkBD,EAAc9Q,GACtC,GAAIlD,WAAW,GAAG4Q,KAAa1N,IAAY,GAAG0N,KAAaqD,IAA3D,GACAC,EAAWA,GAAY9qE,OAAO4wB,OAAO,GAAI6J,GACzCqwC,EAASD,GAAmBpwC,EAAMq/B,UAC3BgR,EAAShR,GAIpB,OAAOgR,GAAYrwC,EChCrB,MAAMswC,GAA0B,CAC9B9jE,OAAQ,EACRD,OAAQ,EACRlC,KAAM,KACNgC,KAAM,EACNoU,QAAS,EACTnU,YAAY,EACZikE,SAAS,GAELC,GAAc,CAClBN,gBAAiB,CACfO,UAAW,UACXC,YAAa,YAGF,MAAM,GACnB,0BAA0BC,GACxB,MAAMC,EAAYzB,GAAwBwB,EAAStmE,MAAQ,MAC3D,OAAOumE,EAAUlgB,kBAGnB,yBAAyBigB,GACvB,GAAOA,EAAStkE,MAChB,MAAMukE,EAAYzB,GAAwBwB,EAAStmE,MAAQ,MAC3D,OAAOumE,EAAUlgB,kBAAoBigB,EAAStkE,KAGhD,kBAAkBwkE,GAChB,OAAO,IAAI,MAAY,CAACP,MAA4BO,IAGtD,eAAeA,GACbA,EAAUppE,QAAQkpE,GAAYplE,KAAKulE,QAAQH,IAC3CprE,OAAO4U,OAAO5O,MAGhB,WACE,OAAOonC,KAAK/jB,UAAUrjB,MAGxB,wBACE,OAAO,GAASwlE,mBAAmBxlE,MAGrC,uBACE,OAAO,GAASylE,kBAAkBzlE,MAGpC,QAAQy0B,EAAQ,IAuDd,OAtDAA,EAAQ+vC,GAAW,WAAY/vC,EAAOwwC,SAEnBvlE,IAAf+0B,EAAM31B,OACRkB,KAAKlB,KAAO21B,EAAM31B,KAEC,OAAf21B,EAAM31B,MAAgC,OAAf21B,EAAM31B,OAC/BkB,KAAKglE,SAAU,SAIAtlE,IAAf+0B,EAAM3zB,OACRd,KAAKc,KAAO2zB,EAAM3zB,WAGCpB,IAAjB+0B,EAAMxzB,SACRjB,KAAKiB,OAASwzB,EAAMxzB,aAGDvB,IAAjB+0B,EAAMzzB,SACRhB,KAAKgB,OAASyzB,EAAMzzB,aAGGtB,IAArB+0B,EAAM1zB,aACRf,KAAKe,WAAa0zB,EAAM1zB,iBAGJrB,IAAlB+0B,EAAMuwC,UACRhlE,KAAKglE,QAAUvwC,EAAMuwC,cAGDtlE,IAAlB+0B,EAAMvf,UACRlV,KAAKkV,QAAUuf,EAAMvf,cAGFxV,IAAjB+0B,EAAM5zB,SACRb,KAAKa,OAAS4zB,EAAM5zB,aAGFnB,IAAhB+0B,EAAMtyB,QACmB,mBAAhBsyB,EAAMtyB,MACfnC,KAAKmC,MAAQsyB,EAAMtyB,MAAQ,EAAI,EAE/BnC,KAAKmC,MAAQsyB,EAAMtyB,YAICzC,IAApB+0B,EAAMywC,YACRllE,KAAKkV,QAAUuf,EAAMywC,UAAY,EAAI,QAGbxlE,IAAtB+0B,EAAM0wC,cACRnlE,KAAKkV,QAAUuf,EAAM0wC,YAAc,EAAI,GAGlCnlE,MCpGX,MAAM0lE,GAAoB,GACpBC,GAAmB,CACvB1kE,OAAQ,kBACRD,OAAQ,kBACRlC,KAAM,gBACNgC,KAAM,gBACNoU,QAAS,mBACTnU,WAAY,sBACZikE,QAAS,mBACTE,UAAW,mBACXC,YAAa,oBAETS,GAAyB,CAC7BlB,aAAc,GACdE,cAAe,CACb7wB,MAAO,cAET4wB,gBAAiBgB,IAEbE,GAAwB,CAC5BnB,aAAciB,IAED,MAAM,WAAe,GAClC,YAAYzqE,EAAIu5B,EAAQ,IACtBxkB,MAAM/U,EAAIu5B,GACVz0B,KAAKshE,mBAAmB,SAAU,OAAQ,CAAC,SAAU,YAAa,wBAClEthE,KAAKxE,OAASi5B,EAAMj5B,SAAWwE,KAAK9E,GAAG0Z,OAAS,MAAQ,OACxD5U,KAAKglD,WAAWvwB,GAChBz6B,OAAO2wC,KAAK3qC,MAGd,gBAAgBolE,EAAWplE,KAAKolE,UAC9B,OAAO/iE,KAAKiX,MAAMtZ,KAAKsyC,WAAa,GAASkzB,mBAAmBJ,IAGlE,eAAeA,EAAWplE,KAAKolE,UAC7B,OAAO/iE,KAAKiX,MAAMtZ,KAAKsyC,WAAa,GAASmzB,kBAAkBL,IAGjE,WAAW3wC,EAAQ,IAwBjB,OAvBI9a,YAAYC,OAAO6a,KACrBA,EAAQ,CACNoM,KAAMpM,IAINja,OAAOC,SAASga,KAClBA,EAAQ,CACN6d,WAAY7d,IAIhBA,EAAQ+vC,GAAW,SAAU/vC,EAAOmxC,IACpC5lE,KAAK8lE,MAAQrxC,EAAMqxC,OAAS,MAC5B9lE,KAAK+lE,UAAY,KACjB/lE,KAAKgmE,YAAYhsE,OAAO4wB,OAAO,GAAI6J,EAAOA,EAAM2wC,WAE5C3wC,EAAMoM,KACR7gC,KAAKimE,SAASxxC,EAAMoM,KAAMpM,EAAMxzB,OAAQwzB,EAAM6d,YAE9CtyC,KAAKkmE,eAAezxC,EAAM6d,YAAc,GAGnCtyC,KAGT,SAASy0B,GAOP,OANAA,EAAQ+vC,GAAW,SAAU/vC,EAAOoxC,IAEhC,aAAcpxC,GAChBz0B,KAAKgmE,YAAYvxC,EAAM2wC,UAGlBplE,KAGT,YAAYolE,GAIV,OAHAA,EAAWprE,OAAO4wB,OAAO,GAAIw6C,UACtBA,EAASvkE,OAChBb,KAAKolE,SAAW,IAAI,GAASA,GACtBplE,KAGT,WAAWsyC,GACT,OAAIA,EAAatyC,KAAKsyC,YACpBtyC,KAAKkmE,eAAe5zB,IAEb,IAGTtyC,KAAKmmE,UAAY7zB,GACV,GAGT,QAAQ7d,GACN,OAAOz0B,KAAKglD,WAAWvwB,GAGzB,QAAQA,GACF9a,YAAYC,OAAO6a,KACrBA,EAAQ,CACNoM,KAAMpM,IAIV,MAAM,KACJoM,EAAI,OACJ5/B,EAAS,EAAC,UACVmlE,EAAY,GACV3xC,EACE6d,EAAa7d,EAAM6d,YAAc7d,EAAMj0B,OAC7C,GAAOqgC,GACP,MAAMrlC,EAASwE,KAAK9E,GAAG0Z,OAAS,MAAQ5U,KAAKxE,OAe7C,OAdAwE,KAAK9E,GAAGyG,WAAWnG,EAAQwE,KAAK0V,QAEd,IAAd0wD,QAAkC1mE,IAAf4yC,GACrB,gBAAoBtyC,KAAK9E,IACzB8E,KAAK9E,GAAGmrE,cAAcrmE,KAAKxE,OAAQyF,EAAQ4/B,EAAMulC,EAAW9zB,IAE5DtyC,KAAK9E,GAAGmrE,cAAc7qE,EAAQyF,EAAQ4/B,GAGxC7gC,KAAK9E,GAAGyG,WAAWnG,EAAQ,MAC3BwE,KAAK+lE,UAAY,KAEjB/lE,KAAKsmE,WAAWzlC,GAET7gC,KAGT,UAAS,aACPumE,EAAY,WACZC,EAAa,EAAC,YACdC,EAAc,EAAC,KACf3lE,IAEA,MAAM,GACJ5F,GACE8E,KAQJ,OAPA,gBAAoB9E,GACpBA,EAAGyG,WAAW,MAAO4kE,EAAa7wD,QAClCxa,EAAGyG,WAAW,MAAO3B,KAAK0V,QAC1Bxa,EAAGwrE,kBAAkB,MAAO,MAAOF,EAAYC,EAAa3lE,GAC5D5F,EAAGyG,WAAW,MAAO,MACrBzG,EAAGyG,WAAW,MAAO,MACrB3B,KAAK+lE,UAAY,KACV/lE,KAGT,SAAQ,QACN2mE,EAAU,KAAI,cACdC,EAAgB,EAAC,UACjBC,EAAY,EAAC,OACbrmE,EAAS,GACP,IACF,gBAAoBR,KAAK9E,IACzB,MAAMmqE,EAAYzB,GAAwB5jE,KAAKolE,SAAStmE,MAAQ,KAAM,CACpEglE,SAAS,IAGLgD,EAA8B9mE,KAAK+mE,0BAA0BH,GAE7DI,EAAmBH,EACzB,IAAII,EACAC,EAEAP,GACFO,EAAkBP,EAAQnmE,OAC1BymE,EAA2BC,EAAkBF,IAE7CC,EAA2B5kE,KAAKgF,IAAIy/D,EAA6BtmE,GAAUsmE,GAC3EI,EAAkBF,EAAmBC,GAGvC,MAAME,EAAmB9kE,KAAKgF,IAAIy/D,EAA6BG,GAO/D,OANAzmE,EAASA,GAAU2mE,EACnB,GAAO3mE,GAAU2mE,GACjBR,EAAUA,GAAW,IAAItB,EAAU6B,GACnClnE,KAAK9E,GAAGyG,WAAW,MAAO3B,KAAK0V,QAC/B1V,KAAK9E,GAAGksE,iBAAiB,MAAOR,EAAeD,EAASE,EAAWrmE,GACnER,KAAK9E,GAAGyG,WAAW,MAAO,MACnBglE,EAGT,MAAK,OACHnrE,EAASwE,KAAKxE,OAAM,MACpB2G,EAAQnC,KAAKolE,UAAYplE,KAAKolE,SAASjjE,MAAK,OAC5ClB,EAAS,EAAC,KACVH,GACE,IAYF,OAXe,QAAXtF,GAA+B,QAAXA,OACTkE,IAAToB,EACFd,KAAK9E,GAAGmsE,gBAAgB7rE,EAAQ2G,EAAOnC,KAAK0V,OAAQzU,EAAQH,IAE5D,GAAkB,IAAXG,GACPjB,KAAK9E,GAAGosE,eAAe9rE,EAAQ2G,EAAOnC,KAAK0V,SAG7C1V,KAAK9E,GAAGyG,WAAWnG,EAAQwE,KAAK0V,QAG3B1V,KAGT,QAAO,OACLxE,EAASwE,KAAKxE,OAAM,MACpB2G,EAAQnC,KAAKolE,UAAYplE,KAAKolE,SAASjjE,OACrC,IACF,MAAMolE,EAA6B,QAAX/rE,GAA+B,QAAXA,EAQ5C,OANI+rE,EACFvnE,KAAK9E,GAAGosE,eAAe9rE,EAAQ2G,EAAO,MAEtCnC,KAAK9E,GAAGyG,WAAWnG,EAAQ,MAGtBwE,KAGT,eACE,OAAKA,KAAK+lE,UAUH,CACLllC,KAAM7gC,KAAK+lE,UACXpuC,SAAS,IAXT33B,KAAK+lE,UAAY/lE,KAAKgjD,QAAQ,CAC5BxiD,OAAQ6B,KAAKgF,IAAIq+D,GAAmB1lE,KAAKsyC,cAEpC,CACLzR,KAAM7gC,KAAK+lE,UACXpuC,SAAS,IAUf,sBACE33B,KAAK+lE,UAAY,KAGnB,SAASllC,EAAM5/B,EAAS,EAAGqxC,EAAazR,EAAKyR,WAAarxC,GACxD,GAAO0Y,YAAYC,OAAOinB,IAE1B7gC,KAAKwnE,0BAEL,MAAMhsE,EAASwE,KAAKynE,aAEpBznE,KAAK9E,GAAGyG,WAAWnG,EAAQwE,KAAK0V,QAChC1V,KAAK9E,GAAGwsE,WAAWlsE,EAAQ82C,EAAYtyC,KAAK8lE,OAC5C9lE,KAAK9E,GAAGmrE,cAAc7qE,EAAQyF,EAAQ4/B,GACtC7gC,KAAK9E,GAAGyG,WAAWnG,EAAQ,MAC3BwE,KAAK+lE,UAAYllC,EAAKxmC,MAAM,EAAGqrE,IAC/B1lE,KAAKmmE,UAAY7zB,EAEjBtyC,KAAK2nE,sBAAsBr1B,GAE3B,MAAMxzC,EAAOukE,GAAwBxiC,GAKrC,OAJA,GAAO/hC,GACPkB,KAAKgmE,YAAY,IAAI,GAAShmE,KAAKolE,SAAU,CAC3CtmE,UAEKkB,KAGT,eAAesyC,EAAYwzB,EAAQ9lE,KAAK8lE,OACtC,GAAOxzB,GAAc,GAErBtyC,KAAKwnE,0BAEL,IAAI3mC,EAAOyR,EAEQ,IAAfA,IACFzR,EAAO,IAAIt8B,aAAa,IAG1B,MAAM/I,EAASwE,KAAKynE,aAWpB,OATAznE,KAAK9E,GAAGyG,WAAWnG,EAAQwE,KAAK0V,QAChC1V,KAAK9E,GAAGwsE,WAAWlsE,EAAQqlC,EAAMilC,GACjC9lE,KAAK9E,GAAGyG,WAAWnG,EAAQ,MAC3BwE,KAAK8lE,MAAQA,EACb9lE,KAAK+lE,UAAY,KACjB/lE,KAAKmmE,UAAY7zB,EAEjBtyC,KAAK2nE,sBAAsBr1B,GAEpBtyC,KAGT,aACE,OAAOA,KAAK9E,GAAG0Z,OAAS,MAAQ5U,KAAKxE,OAGvC,0BAA0BorE,GACxB,MAAMvB,EAAYzB,GAAwB5jE,KAAKolE,SAAStmE,MAAQ,KAAM,CACpEglE,SAAS,IAEL8D,EAAsBhB,EAAgBvB,EAAUlgB,kBACtD,OAAOnlD,KAAK6nE,kBAAoBD,EAGlC,WAAW/mC,GACJ7gC,KAAKolE,SAAStmE,MACjBkB,KAAKgmE,YAAY,IAAI,GAAShmE,KAAKolE,SAAU,CAC3CtmE,KAAMukE,GAAwBxiC,MAKpC,gBACE,OAAO7gC,KAAK9E,GAAG4sE,eAGjB,gBACE9nE,KAAK9E,GAAG6sE,aAAa/nE,KAAK0V,QAE1B1V,KAAKwnE,0BAGP,cAAc1lE,GACZ9B,KAAK9E,GAAGyG,WAAW3B,KAAKxE,OAAQwE,KAAK0V,QACrC,MAAMzY,EAAQ+C,KAAK9E,GAAG8sE,mBAAmBhoE,KAAKxE,OAAQsG,GAEtD,OADA9B,KAAK9E,GAAGyG,WAAW3B,KAAKxE,OAAQ,MACzByB,EAGT,WAEE,OADA,GAAI2zD,WAAW,cAAe,uBAA9B,GACO5wD,KAAKolE,SAAStmE,KAGvB,YAEE,OADA,GAAI8xD,WAAW,eAAgB,oBAA/B,GACO5wD,KAAKsyC,WAGd,cAAcA,GAEZ,OADA,GAAIse,WAAW,gBAAiB,aAAhC,GACO5wD,KAAKioE,WAAW31B,GAGzB,eAAe3G,GAGb,OAFA,GAAIilB,WAAW,sBAAuB,iDAAtC,GACA5wD,KAAKolE,SAAW,IAAI,GAASplE,KAAKolE,SAAUz5B,GACrC3rC,MC7VJ,MAAMkoE,GAAkB,CAC7B,CAAC,MAAO,CACNC,WAAY,KACZl7C,MAAO,CAAC,KAAM,QAEhB,CAAC,MAAO,CACNk7C,WAAY,KACZl7C,MAAO,CAAC,KAAM,MAAO,QAEvB,CAAC,MAAO,CACNk7C,WAAY,KACZl7C,MAAO,CAAC,OAEV,CAAC,MAAO,CACNk7C,WAAY,KACZl7C,MAAO,CAAC,OAEV,CAAC,MAAO,CACNk7C,WAAY,KACZl7C,MAAO,CAAC,OAEV,CAAC,OAAQ,CACPk7C,WAAY,KACZl7C,MAAO,CAAC,MACR40C,KAAK,GAEP,CAAC,OAAQ,CACPsG,WAAY,MACZl7C,MAAO,CAAC,MACR40C,KAAK,GAEP,CAAC,OAAQ,CACPsG,WAAY,KACZl7C,MAAO,CAAC,MACR40C,KAAK,GAEP,CAAC,OAAQ,CACPsG,WAAY,KACZl7C,MAAO,CAAC,MACR40C,KAAK,IAGIuG,GAAuB,CAClC,CAAC,MAAO,EACR,CAAC,OAAQ,EACT,CAAC,OAAQ,EACT,CAAC,OAAQ,EACT,CAAC,MAAO,EACR,CAAC,OAAQ,EACT,CAAC,MAAO,EACR,CAAC,OAAQ,EACT,CAAC,MAAO,EACR,CAAC,OAAQ,EACT,CAAC,MAAO,EACR,CAAC,MAAO,EACR,CAAC,MAAO,GAEGC,GAAa,CACxB,CAAC,MAAO,EACR,CAAC,MAAO,EACR,CAAC,MAAO,EACR,CAAC,MAAO,EACR,CAAC,MAAO,EACR,CAAC,MAAO,EACR,CAAC,MAAO,EACR,CAAC,MAAO,GAEH,SAASC,GAAkBptE,EAAIgb,GACpC,MAAM4zB,EAAOo+B,GAAgBhyD,GAE7B,IAAK4zB,EACH,OAAO,EAGT,QAAiBpqC,IAAboqC,EAAKy+B,UAAkC7oE,IAAboqC,EAAK+3B,IACjC,OAAO,EAGT,MAAM5kE,EAAQ,gBAAS/B,IAAM4uC,EAAK+3B,KAAkB/3B,EAAKy+B,IACzD,MAAwB,kBAAVtrE,EAAqB/B,EAAGc,aAAaiB,GAASA,EAEvD,SAASurE,GAA2BttE,EAAIgb,GAC7C,MAAM4zB,EAAOo+B,GAAgBhyD,GAE7B,OAAQ4zB,GAAQA,EAAK7c,MAAM,IACzB,KAAK,KACH,OAAO/xB,EAAGc,aAAa,4BAEzB,KAAK,KACH,OAAOd,EAAGc,aAAa,iCAEzB,QACE,OAAO,GCtFb,MAAMysE,GAAmB,CAAC,KAAM,MAE1BC,GAAc,aAAOA,aAAe,aAE3B,MAAM,WAAgB,GACnC,mBAAmBxtE,EAAIywC,EAAO,IAC5B,MAAM,OACJz1B,EAAM,gBACNyyD,GACEh9B,EACJ,IAAIi9B,GAAY,EAOhB,OALI1yD,IACF0yD,EAAYA,GAAaN,GAAkBptE,EAAIgb,GAC/C0yD,EAAYA,KAAeD,GAAmBH,GAA2BttE,EAAIgb,KAGxE0yD,EAGT,YAAY1tE,EAAIu5B,GACd,MAAM,GACJ0H,EAAKhd,GAAI,WAAU,OACnBzJ,EAAM,OACNla,GACEi5B,EACJxkB,MAAM/U,EAAI,CACRihC,KACAzmB,WAEF1V,KAAKxE,OAASA,EACdwE,KAAK6oE,iBAAcnpE,EACnBM,KAAK8oE,QAAS,EACd9oE,KAAK8pB,WAAQpqB,EACbM,KAAKgqB,YAAStqB,EACdM,KAAK0pB,WAAQhqB,EACbM,KAAKkW,YAASxW,EACdM,KAAKlB,UAAOY,EACZM,KAAKmoE,gBAAazoE,EAClBM,KAAK+oE,YAASrpE,EACdM,KAAK6oE,iBAAcnpE,EACnBM,KAAKgpE,aAAUtpE,EAGjB,WACE,MAAO,WAAWM,KAAKm8B,MAAMn8B,KAAK8pB,SAAS9pB,KAAKgqB,UAGlD,WAAWyK,EAAQ,IACjB,IAAIoM,EAAOpM,EAAMoM,KAEjB,GAAIA,aAAgB2S,QAKlB,OAJA3S,EAAKiM,KAAKm8B,GAAqBjpE,KAAKglD,WAAWhrD,OAAO4wB,OAAO,GAAI6J,EAAO,CACtE28B,OAAQ6X,EACRpoC,KAAMooC,MAEDjpE,KAGT,MAAMkpE,EAAsC,qBAArBC,kBAAoCtoC,aAAgBsoC,iBAE3E,GAAID,GAAWroC,EAAKo/B,WAAakJ,iBAAiBC,cAGhD,OAFAppE,KAAKqpE,OAAS,KACdxoC,EAAKl+B,iBAAiB,aAAc,IAAM3C,KAAKglD,WAAWvwB,IACnDz0B,KAGT,MAAM,OACJoxD,EAAS,KAAI,OACbl7C,EAAS,KAAI,OACb6yD,EAAS,EAAC,SACVO,GAAW,EAAK,WAChB/sD,EAAa,GAAE,WACfgtD,EAAa,GAAE,YACfV,GACEp0C,EAECoM,IACHA,EAAOuwB,GAGT,IAAI,MACFtnC,EAAK,OACLE,EAAM,WACNm+C,EAAU,KACVrpE,EAAI,WACJ0qE,GAAa,EAAK,QAClBR,GAAU,GACRv0C,EACJ,MAAM,MACJ/K,EAAQ,GACN+K,EAsEJ,QApEE3K,QACAE,SACAw/C,aACArB,aACArpE,QACEkB,KAAKypE,kBAAkB,CACzBvzD,SACApX,OACAqpE,aACAqB,aACA3oC,OACA/W,QACAE,YAEFhqB,KAAK8pB,MAAQA,EACb9pB,KAAKgqB,OAASA,EACdhqB,KAAK0pB,MAAQA,EACb1pB,KAAKkW,OAASA,EACdlW,KAAKlB,KAAOA,EACZkB,KAAKmoE,WAAaA,EAClBnoE,KAAK+oE,OAASA,EACd/oE,KAAK6oE,YAAcA,EAEfruD,OAAOC,SAASza,KAAK6oE,eACvB7oE,KAAK9E,GAAGwuE,cAAc,MAAQ1pE,KAAK6oE,aACnC7oE,KAAK9E,GAAGyuE,YAAY3pE,KAAKxE,OAAQwE,KAAK0V,SAGpCszD,GAAWhpE,KAAK4pE,YAClB,GAAI99C,KAAK,YAAY9rB,gDAArB,GACAgpE,GAAU,EAEVhpE,KAAK6pE,eAAettD,IAGtBvc,KAAKgpE,QAAUA,EACfhpE,KAAK8pE,aAAa,CAChBjpC,OACA/W,QACAE,SACAN,QACAxT,SACApX,OACAqpE,aACAY,SACAC,UACAzsD,WAAYgtD,EACZC,eAGER,GACFhpE,KAAK+pE,iBAGP/pE,KAAK8b,cAAcS,GAEf+sD,IACFtpE,KAAK6gC,KAAOA,GAGVqoC,IACFlpE,KAAKqpE,OAAS,CACZW,MAAOnpC,EACPtkB,aACA0tD,SAAUppC,EAAKo/B,YAAckJ,iBAAiBe,kBAAoBrpC,EAAKspC,aAAe,IAInFnqE,KAGT,SACE,GAAIA,KAAKqpE,OAAQ,CACf,MAAM,MACJW,EAAK,WACLztD,EAAU,SACV0tD,GACEjqE,KAAKqpE,OAET,GAAIY,IAAaD,EAAMG,aAAeH,EAAM/J,WAAakJ,iBAAiBe,kBACxE,OAGFlqE,KAAKoqE,gBAAgB,CACnBvpC,KAAMmpC,EACNztD,eAGEvc,KAAKgpE,SACPhpE,KAAK+pE,iBAGP/pE,KAAKqpE,OAAOY,SAAWD,EAAMG,aAIjC,QAAO,OACLngD,EAAM,MACNF,EAAK,QACLk/C,GAAU,IAEV,OAAIl/C,IAAU9pB,KAAK8pB,OAASE,IAAWhqB,KAAKgqB,OACnChqB,KAAKglD,WAAW,CACrBl7B,QACAE,SACA9T,OAAQlW,KAAKkW,OACbpX,KAAMkB,KAAKlB,KACXqpE,WAAYnoE,KAAKmoE,WACjBY,OAAQ/oE,KAAK+oE,OACbC,YAIGhpE,KAGT,eAAeqqE,EAAS,IACtB,OAAIrqE,KAAK4pE,WACP,GAAI99C,KAAK,YAAY9rB,gDAArB,GACOA,OAGTA,KAAKgpE,SAAU,EACfhpE,KAAK9E,GAAGyuE,YAAY3pE,KAAKxE,OAAQwE,KAAK0V,QACtC,gBAAe1V,KAAK9E,GAAImvE,EAAQ,KAC9BrqE,KAAK9E,GAAG6uE,eAAe/pE,KAAKxE,UAE9BwE,KAAK9E,GAAGyuE,YAAY3pE,KAAKxE,OAAQ,MAC1BwE,MAGT,aAAamY,GACXnY,KAAKwnE,wBAAwB,WAE7B,MAAM,OACJhsE,EAASwE,KAAKxE,OAAM,OACpB41D,EAAS,KAAI,MACbpnB,EAAQ,EAAC,OACT9zB,EAASlW,KAAKkW,OAAM,OACpB6yD,EAAS/oE,KAAK+oE,OAAM,OACpB9nE,EAAS,EAAC,WACVsb,EAAa,IACXpE,EACJ,IAAI,KACF0oB,EAAO,KAAI,KACX/hC,EAAOkB,KAAKlB,KAAI,MAChBgrB,EAAQ9pB,KAAK8pB,MAAK,OAClBE,EAAShqB,KAAKgqB,OAAM,WACpBm+C,EAAanoE,KAAKmoE,WAAU,WAC5BqB,GAAa,GACXrxD,EAEC0oB,IACHA,EAAOuwB,KAIPtyD,OACAqpE,aACAqB,aACA1/C,QACAE,UACEhqB,KAAKypE,kBAAkB,CACzBvzD,SACApX,OACAqpE,aACAqB,aACA3oC,OACA/W,QACAE,YAEF,MAAM,GACJ9uB,GACE8E,KACJ9E,EAAGyuE,YAAY3pE,KAAKxE,OAAQwE,KAAK0V,QACjC,IAQImsD,EARArsB,EAAW,KA+Cf,KA7CE3U,OACA2U,YACEx1C,KAAKsqE,aAAa,CACpBzpC,OACA2oC,gBAGF,gBAAexpE,KAAK9E,GAAIqhB,EAAY,KAClC,OAAQi5B,GACN,IAAK,OACHt6C,EAAGqvE,WAAW/uE,EAAQwuC,EAAO9zB,EAAQ4T,EAAOE,EAAQ++C,EAAQZ,EAAYrpE,EAAM+hC,GAC9E,MAEF,IAAK,cACH3lC,EAAGqvE,WAAW/uE,EAAQwuC,EAAO9zB,EAAQ4T,EAAOE,EAAQ++C,EAAQZ,EAAYrpE,EAAM+hC,EAAM5/B,GACpF,MAEF,IAAK,SACH4gE,EAAM,gBAAoB3mE,GAC1B2mE,EAAIlgE,WAAW,MAAOk/B,EAAKnrB,QAAUmrB,GACrCghC,EAAI0I,WAAW/uE,EAAQwuC,EAAO9zB,EAAQ4T,EAAOE,EAAQ++C,EAAQZ,EAAYrpE,EAAMmC,GAC/E4gE,EAAIlgE,WAAW,MAAO,MACtB,MAEF,IAAK,iBACC,gBAASzG,GACXA,EAAGqvE,WAAW/uE,EAAQwuC,EAAO9zB,EAAQ4T,EAAOE,EAAQ++C,EAAQZ,EAAYrpE,EAAM+hC,GAE9E3lC,EAAGqvE,WAAW/uE,EAAQwuC,EAAO9zB,EAAQiyD,EAAYrpE,EAAM+hC,GAGzD,MAEF,IAAK,aACH,IAAK,MAAO2pC,EAAYC,KAAc5pC,EAAK6pC,UACzCxvE,EAAGyvE,qBAAqBnvE,EAAQgvE,EAAYC,EAAUv0D,OAAQu0D,EAAU3gD,MAAO2gD,EAAUzgD,OAAQ++C,EAAQ0B,EAAU5pC,MAGrH,MAEF,QACE,IAAO,EAAO,8BAIhBA,GAAQA,EAAKyR,WACftyC,KAAK2nE,sBAAsB9mC,EAAKyR,WAAY,eACvC,CACL,MAAMhO,EAAW8jC,GAAqBpoE,KAAKmoE,aAAe,EACpDyC,EAAcvC,GAAWroE,KAAKlB,OAAS,EAE7CkB,KAAK2nE,sBAAsB3nE,KAAK8pB,MAAQ9pB,KAAKgqB,OAASsa,EAAWsmC,EAAa,WAIhF,OADA5qE,KAAK8oE,QAAS,EACP9oE,KAGT,iBAAgB,OACdxE,EAASwE,KAAKxE,OAAM,OACpB41D,EAAS,KAAI,KACbvwB,EAAO,KAAI,EACXz7B,EAAI,EAAC,EACLC,EAAI,EAAC,MACLykB,EAAQ9pB,KAAK8pB,MAAK,OAClBE,EAAShqB,KAAKgqB,OAAM,MACpBggB,EAAQ,EAAC,OACT9zB,EAASlW,KAAKkW,OAAM,KACpBpX,EAAOkB,KAAKlB,KAAI,WAChBqpE,EAAanoE,KAAKmoE,WAAU,WAC5BqB,GAAa,EAAK,OAClBvoE,EAAS,EAAC,OACV8nE,EAAS/oE,KAAK+oE,OAAM,WACpBxsD,EAAa,KAuBb,KApBEzd,OACAqpE,aACAqB,aACA1/C,QACAE,UACEhqB,KAAKypE,kBAAkB,CACzBvzD,SACApX,OACAqpE,aACAqB,aACA3oC,OACA/W,QACAE,YAEF,GAAsB,IAAfhqB,KAAK0pB,MAAa,6CAEpBmX,IACHA,EAAOuwB,GAGLvwB,GAAQA,EAAKA,KAAM,CACrB,MAAMgqC,EAAUhqC,EAChBA,EAAOgqC,EAAQhqC,KACf/W,EAAQ+gD,EAAQC,MAAM,GACtB9gD,EAAS6gD,EAAQC,MAAM,GAGrBjqC,aAAgB,KAClBA,EAAOA,EAAKnrB,QAGd1V,KAAK9E,GAAGyuE,YAAY3pE,KAAKxE,OAAQwE,KAAK0V,QACtC,gBAAe1V,KAAK9E,GAAIqhB,EAAY,KAClC,GAAIitD,EACFxpE,KAAK9E,GAAG6vE,wBAAwBvvE,EAAQwuC,EAAO5kC,EAAGC,EAAGykB,EAAOE,EAAQ9T,EAAQ2qB,QACvE,GAAa,OAATA,EACT7gC,KAAK9E,GAAG8vE,cAAcxvE,EAAQwuC,EAAO5kC,EAAGC,EAAGykB,EAAOE,EAAQm+C,EAAYrpE,EAAM,WACvE,GAAI6a,YAAYC,OAAOinB,GAC5B7gC,KAAK9E,GAAG8vE,cAAcxvE,EAAQwuC,EAAO5kC,EAAGC,EAAGykB,EAAOE,EAAQm+C,EAAYrpE,EAAM+hC,EAAM5/B,QAC7E,GAAI4/B,aAAgB6nC,GAAa,CACtC,MAAM7G,EAAM,gBAAoB7hE,KAAK9E,IACrC2mE,EAAIlgE,WAAW,MAAOk/B,GACtBghC,EAAImJ,cAAcxvE,EAAQwuC,EAAO5kC,EAAGC,EAAGykB,EAAOE,EAAQm+C,EAAYrpE,EAAMmC,GACxE4gE,EAAIlgE,WAAW,MAAO,WACjB,GAAI,gBAAS3B,KAAK9E,IAAK,CAC5B,MAAM2mE,EAAM,gBAAoB7hE,KAAK9E,IACrC2mE,EAAImJ,cAAcxvE,EAAQwuC,EAAO5kC,EAAGC,EAAGykB,EAAOE,EAAQm+C,EAAYrpE,EAAM+hC,QAExE7gC,KAAK9E,GAAG8vE,cAAcxvE,EAAQwuC,EAAO5kC,EAAGC,EAAG8iE,EAAYrpE,EAAM+hC,KAGjE7gC,KAAK9E,GAAGyuE,YAAY3pE,KAAKxE,OAAQ,MAGnC,gBAAgBmwC,EAAO,IAErB,OADA,GAAIvxC,MAAM,kGAAV,GACO,KAGT,gBACE,OAAO4F,KAAK9E,GAAGsG,aAAa,OAAS,MAGvC,KAAKqnE,EAAc7oE,KAAK6oE,aACtB,MAAM,GACJ3tE,GACE8E,KAQJ,YANoBN,IAAhBmpE,IACF7oE,KAAK6oE,YAAcA,EACnB3tE,EAAGwuE,cAAc,MAAQb,IAG3B3tE,EAAGyuE,YAAY3pE,KAAKxE,OAAQwE,KAAK0V,QAC1BmzD,EAGT,OAAOA,EAAc7oE,KAAK6oE,aACxB,MAAM,GACJ3tE,GACE8E,KAQJ,YANoBN,IAAhBmpE,IACF7oE,KAAK6oE,YAAcA,EACnB3tE,EAAGwuE,cAAc,MAAQb,IAG3B3tE,EAAGyuE,YAAY3pE,KAAKxE,OAAQ,MACrBqtE,EAGT,cAAa,KACXhoC,EAAI,WACJ2oC,GAAa,IAEb,OAAIA,EACK,CACL3oC,OACA2U,SAAU,cAID,OAAT3U,EACK,CACLA,OACA2U,SAAU,QAIV77B,YAAYC,OAAOinB,GACd,CACLA,OACA2U,SAAU,eAIV3U,aAAgB,GACX,CACLA,KAAMA,EAAKnrB,OACX8/B,SAAU,UAIV3U,aAAgB6nC,GACX,CACL7nC,OACA2U,SAAU,UAIP,CACL3U,OACA2U,SAAU,kBAId,kBAAkB7J,GAChB,MAAM,OACJz1B,EAAM,KACN2qB,GACE8K,EACJ,IAAI,MACF7hB,EAAK,OACLE,EAAM,WACNm+C,EAAU,KACVrpE,EAAI,WACJ0qE,GACE79B,EACJ,MAAMs/B,EAAgB/C,GAAgBhyD,GAQtC,OAPAiyD,EAAaA,GAAc8C,GAAiBA,EAAc9C,WAC1DrpE,EAAOA,GAAQmsE,GAAiBA,EAAch+C,MAAM,GACpDu8C,EAAaA,GAAcyB,GAAiBA,EAAczB,aAExD1/C,QACAE,UACEhqB,KAAKkrE,iBAAiBrqC,EAAM/W,EAAOE,IAChC,CACLm+C,aACArpE,OACA0qE,aACA1/C,QACAE,SACA9T,SACA2qB,QAIJ,iBAAiBA,EAAM/W,EAAOE,GAC5B,IAAIlpB,EA0CJ,OAvCEA,EADuB,qBAAdqqE,WAA6BtqC,aAAgBsqC,UAC/C,CACLrhD,MAAO+W,EAAK/W,MACZE,OAAQ6W,EAAK7W,QAEsB,qBAArBohD,kBAAoCvqC,aAAgBuqC,iBAC7D,CACLthD,MAAO+W,EAAKwqC,aACZrhD,OAAQ6W,EAAKyqC,eAEuB,qBAAtBC,mBAAqC1qC,aAAgB0qC,mBAKrC,qBAAhBlyB,aAA+BxY,aAAgBwY,YAJxD,CACLvvB,MAAO+W,EAAK/W,MACZE,OAAQ6W,EAAK7W,QAOsB,qBAArBm/C,kBAAoCtoC,aAAgBsoC,iBAC7D,CACLr/C,MAAO+W,EAAK2qC,WACZxhD,OAAQ6W,EAAK4qC,aAEL5qC,EAMH,CACL/W,QACAE,UAPK,CACLF,MAAOA,GAAS,EAAIA,EAAQ,EAC5BE,OAAQA,GAAU,EAAIA,EAAS,GASnC,GAAOlpB,EAAM,kCACb,QAAiBpB,IAAVoqB,GAAuBhpB,EAAKgpB,QAAUA,EAAO,uDACpD,QAAkBpqB,IAAXsqB,GAAwBlpB,EAAKkpB,SAAWA,EAAQ,yDAChDlpB,EAGT,gBACE,OAAOd,KAAK9E,GAAGwwE,gBAGjB,gBACE1rE,KAAK9E,GAAGywE,cAAc3rE,KAAK0V,QAE3B1V,KAAKwnE,wBAAwB,WAG/B,cAAc1lE,GACZ,OAAQA,GACN,KAAK,KACH,OAAO9B,KAAK8pB,MAEd,KAAK,KACH,OAAO9pB,KAAKgqB,OAEd,QACEhqB,KAAK9E,GAAGyuE,YAAY3pE,KAAKxE,OAAQwE,KAAK0V,QACtC,MAAMzY,EAAQ+C,KAAK9E,GAAG0wE,gBAAgB5rE,KAAKxE,OAAQsG,GAEnD,OADA9B,KAAK9E,GAAGyuE,YAAY3pE,KAAKxE,OAAQ,MAC1ByB,GAIb,cAAc6E,EAAO+pE,GAInB,OAHA7rE,KAAK9E,GAAGyuE,YAAY3pE,KAAKxE,OAAQwE,KAAK0V,QACtCm2D,EAAQ7rE,KAAK8rE,cAAchqE,EAAO+pE,GAE1B/pE,GACN,KAAK,MACL,KAAK,MACH9B,KAAK9E,GAAG6wE,cAAc/rE,KAAK0V,OAAQ5T,EAAO+pE,GAC1C,MAEF,KAAK,KACL,KAAK,KACH,IAAO,GACP,MAEF,QACE7rE,KAAK9E,GAAG8wE,cAAchsE,KAAKxE,OAAQsG,EAAO+pE,GAC1C,MAIJ,OADA7rE,KAAK9E,GAAGyuE,YAAY3pE,KAAKxE,OAAQ,MAC1BwE,KAGT,UACE,OAAI,gBAASA,KAAK9E,SAIb8E,KAAK8pB,QAAU9pB,KAAKgqB,WAIjBm3C,GAAanhE,KAAK8pB,SAAWq3C,GAAanhE,KAAKgqB,UAGzD,eAAezN,QACkC7c,IAA3C6c,EAAWvc,KAAK9E,GAAG+wE,sBACrB1vD,EAAWvc,KAAK9E,GAAG+wE,oBAAsBjsE,KAAK9E,GAAGgxE,aAGRxsE,IAAvC6c,EAAWvc,KAAK9E,GAAGixE,kBACrB5vD,EAAWvc,KAAK9E,GAAGixE,gBAAkBnsE,KAAK9E,GAAGkxE,oBAGJ1sE,IAAvC6c,EAAWvc,KAAK9E,GAAGmxE,kBACrB9vD,EAAWvc,KAAK9E,GAAGmxE,gBAAkBrsE,KAAK9E,GAAGkxE,eAIjD,cAActqE,EAAO+pE,GACnB,GAAI7rE,KAAK4pE,UACP,OAAQ9nE,GACN,KAAK,OACsC,IAArC2mE,GAAiB5qE,QAAQguE,KAC3BA,EAAQ,MAGV,MAEF,KAAK,MACL,KAAK,MACW,QAAVA,IACFA,EAAQ,OAGV,MAEF,QACE,MAIN,OAAOA,GCxpBX,IAAI,GAAa,GAUV,SAASS,GAAUx6B,EAAKnG,GAG7B,OAFA,GAAsB,kBAARmG,GACdA,EAAM,GAAaA,EACZ,IAAI0B,QAAQ,CAACl8B,EAASsjC,KAC3B,IACE,MAAM7S,EAAQ,IAAIiF,MAElBjF,EAAMkF,OAAS,IAAM31B,EAAQywB,GAE7BA,EAAMqS,QAAU,IAAMQ,EAAO,IAAI7oC,MAAM,wBAAwB+/B,OAE/D/J,EAAMwkC,YAAc5gC,GAAQA,EAAK4gC,aAAe,YAChDxkC,EAAM3e,IAAM0oB,EACZ,MAAO13C,GACPwgD,EAAOxgD,MCtBE,MAAM,WAAkB,GACrC,mBAAmBc,EAAIywC,GACrB,OAAO,GAAQoQ,YAAY7gD,EAAIywC,GAGjC,YAAYzwC,EAAIu5B,EAAQ,IACtB,gBAAmBv5B,IAEfu5B,aAAiB+e,SAA4B,kBAAV/e,KACrCA,EAAQ,CACNoM,KAAMpM,IAIgB,kBAAfA,EAAMoM,OACfpM,EAAQz6B,OAAO4wB,OAAO,GAAI6J,EAAO,CAC/BoM,KAAMyrC,GAAU73C,EAAMoM,SAI1B5wB,MAAM/U,EAAIlB,OAAO4wB,OAAO,GAAI6J,EAAO,CACjCj5B,OAAQ,QAEVwE,KAAKglD,WAAWvwB,GAChBz6B,OAAO2wC,KAAK3qC,OC3BhB,MAAMwsE,GAAmB,yBACV,QACb,CAAC,OAAQ,CACPC,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACPA,IAAK,GAEP,CAAC,OAAQ,CACPA,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACPA,IAAK,GAEP,CAAC,OAAQ,CACPA,IAAK,GAEP,CAAC,OAAQ,CACPA,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,GAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,IAEP,CAAC,OAAQ,CACP5K,KAAK,EACL4K,IAAK,IAEP,CAAC,OAAQ,CACP5K,IAAK2K,GACLC,IAAK,GAEP,CAAC,OAAQ,CACP5K,IAAK2K,GACLC,IAAK,GAEP,CAAC,OAAQ,CACP5K,IAAK2K,GACLC,IAAK,GAEP,CAAC,OAAQ,CACP5K,IAAK2K,GACLC,IAAK,GAEP,CAAC,OAAQ,CACP5K,IAAK2K,GACLC,IAAK,GAEP,CAAC,OAAQ,CACP5K,IAAK2K,GACLC,IAAK,IAEP,CAAC,OAAQ,CACP5K,IAAK2K,GACLC,IAAK,ICzJT,SAAS,GAAkBvxE,EAAIgb,EAAQw2D,GACrC,MAAM5iC,EAAO4iC,EAAQx2D,GAErB,IAAK4zB,EACH,OAAO,EAGT,MAAM7sC,EAAQ,gBAAS/B,IAAM4uC,EAAK+3B,KAAkB/3B,EAAKy+B,IAEzD,MAAqB,kBAAVtrE,EACF/B,EAAGc,aAAaiB,GAGlBA,EAGM,MAAM,WAAqB,GACxC,mBAAmB/B,GAAI,OACrBgb,GACE,CACFA,OAAQ,OAER,OAAQA,GAAU,GAAkBhb,EAAIgb,EAAQ,IAGlD,2BAA2Bhb,GAAI,OAC7Bgb,IAEA,OAAOhb,EAAG+a,2BAA2B,MAAOC,EAAQ,OAGtD,YAAYhb,EAAIywC,EAAO,IACrB17B,MAAM/U,EAAIywC,GACV3rC,KAAKglD,WAAWrZ,GAChB3xC,OAAO2wC,KAAK3qC,MAGd,YAAW,OACTkW,EAAM,MACN4T,EAAQ,EAAC,OACTE,EAAS,EAAC,QACV4jB,EAAU,IAqBV,OAnBA,GAAO13B,EAAQ,gBAEflW,KAAKwnE,0BAELxnE,KAAK9E,GAAGyxE,iBAAiB,MAAO3sE,KAAK0V,QAErB,IAAZk4B,GAAiB,gBAAS5tC,KAAK9E,IACjC8E,KAAK9E,GAAG0xE,+BAA+B,MAAOh/B,EAAS13B,EAAQ4T,EAAOE,GAEtEhqB,KAAK9E,GAAG2xE,oBAAoB,MAAO32D,EAAQ4T,EAAOE,GAGpDhqB,KAAKkW,OAASA,EACdlW,KAAK8pB,MAAQA,EACb9pB,KAAKgqB,OAASA,EACdhqB,KAAK4tC,QAAUA,EAEf5tC,KAAK2nE,sBAAsB3nE,KAAK8pB,MAAQ9pB,KAAKgqB,QAAUhqB,KAAK4tC,SAAW,GAAK,GAAqB5tC,KAAKkW,QAAQu2D,KAEvGzsE,KAGT,QAAO,MACL8pB,EAAK,OACLE,IAEA,OAAIF,IAAU9pB,KAAK8pB,OAASE,IAAWhqB,KAAKgqB,OACnChqB,KAAKglD,WAAW,CACrBl7B,QACAE,SACA9T,OAAQlW,KAAKkW,OACb03B,QAAS5tC,KAAK4tC,UAIX5tC,KAGT,gBACE,OAAOA,KAAK9E,GAAG4xE,qBAGjB,gBACE9sE,KAAK9E,GAAG6xE,mBAAmB/sE,KAAK0V,QAEhC1V,KAAKwnE,0BAGP,YAAY9xD,GACV1V,KAAK9E,GAAGyxE,iBAAiB,MAAOj3D,GAGlC,YAAYA,GACV1V,KAAKkW,OAASlW,KAAKwB,aAAa,OAChCxB,KAAK8pB,MAAQ9pB,KAAKwB,aAAa,OAC/BxB,KAAKgqB,OAAShqB,KAAKwB,aAAa,OAChCxB,KAAK4tC,QAAU5tC,KAAKwB,aAAa,OAGnC,cAAcM,GACZ9B,KAAK9E,GAAGyxE,iBAAiB,MAAO3sE,KAAK0V,QACrC,MAAMzY,EAAQ+C,KAAK9E,GAAG8xE,yBAAyB,MAAOlrE,GACtD,OAAO7E,GC5GX,MAAMgwE,GAAsB,IACtBC,GAAwB,KACxBC,GAAsB,MACtBC,GAAW,KACXC,GAAW,KACXC,GAAa,KACbC,GAAmB,MACnBC,GAAgB,uBACf,SAASC,GAAMvyE,GAAI,YACxBorB,EAAc,KAAI,MAClB+iB,EAAQ,KAAI,MACZ3f,EAAQ,KAAI,QACZgkD,EAAU,MACR,IACF,MAAMnxD,EAAa,GAEf+J,IACF/J,EAAW+J,YAAcA,GAG3B,IAAIqnD,EAAa,EAEbtkC,IACFskC,GAAcR,IAEA,IAAV9jC,IACF9sB,EAAWkJ,WAAa4jB,IAIxB3f,IACFikD,GAAcV,IAEA,IAAVvjD,IACFnN,EAAWqJ,WAAa8D,IAIxBgkD,IACFC,GAAcT,IAEA,IAAVxjD,IACFnN,EAAW4J,aAAeuD,IAI9B,GAAsB,IAAfikD,EAAkBH,IACzB,gBAAetyE,EAAIqhB,EAAY,KAC7BrhB,EAAGuyE,MAAME,KAGN,SAASC,GAAY1yE,GAAI,YAC9BorB,EAAc,KAAI,OAClBzlB,EAASusE,GAAQ,WACjBS,EAAa,EAAC,MACd5wE,EAAQ,CAAC,EAAG,EAAG,EAAG,IAChB,IACF,gBAAoB/B,GACpB,gBAAeA,EAAI,CACjBorB,eACC,KACD,OAAQzlB,GACN,KAAKusE,GACH,OAAQnwE,EAAMke,aACZ,KAAKhF,WACHjb,EAAG4yE,cAAcjtE,EAAQgtE,EAAY5wE,GACrC,MAEF,KAAKumE,YACHtoE,EAAG6yE,eAAeltE,EAAQgtE,EAAY5wE,GACtC,MAEF,KAAKsH,aACL,QACErJ,EAAG8yE,cAAcntE,EAAQgtE,EAAY5wE,GAGzC,MAEF,KAAKowE,GACHnyE,EAAG8yE,cAAcX,GAAU,EAAG,CAACpwE,IAC/B,MAEF,KAAKqwE,GACHpyE,EAAG4yE,cAAcR,GAAY,EAAG,CAACrwE,IACjC,MAEF,KAAKswE,GACH,MAAO7jD,EAAOgkD,GAAWzwE,EACzB/B,EAAG+yE,cAAcV,GAAkB,EAAG7jD,EAAOgkD,GAC7C,MAEF,QACE,IAAO,EAAOF,OC9Ff,SAASU,GAAqBh4D,GACnC,OAAQA,GACN,KAAK,KACL,KAAK,MACL,KAAK,KACH,OAAO,EAET,KAAK,MACL,KAAK,MACH,OAAO,EAET,KAAK,KACL,KAAK,MACH,OAAO,EAET,KAAK,KACL,KAAK,MACH,OAAO,EAET,QAEE,OADA,IAAO,GACA,GCpBb,MAAMi4D,GAAQ,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,OACnC,MAAM,WAAoB,GACvC,YAAYjzE,EAAIu5B,EAAQ,IACtB,gBAAmBv5B,GACnB+U,MAAM/U,EAAIlB,OAAO4wB,OAAO,GAAI6J,EAAO,CACjCj5B,OAAQ,SAEVwE,KAAKglD,WAAWvwB,GAChBz6B,OAAO2wC,KAAK3qC,MAGd,WAAWy0B,EAAQ,IACjB,MAAM,QACJu0C,GAAU,EAAI,WACdzsD,EAAa,IACXkY,EAWJ,OAVAz0B,KAAK2rC,KAAOlX,EACZz0B,KAAKouE,oBAAoB35C,GAAOqY,KAAK,KACnC9sC,KAAK8oE,QAAS,EAEVE,GACFhpE,KAAK+pE,eAAet1C,GAGtBz0B,KAAK8b,cAAcS,KAEdvc,KAGT,UAAS,KACP6pB,EAAI,KACJgX,EAAI,EACJz7B,EAAI,EAAC,EACLC,EAAI,EAAC,YACLgpE,EAAc,IAEd,OAAOruE,KAAKsuE,UAAU,CACpB9yE,OAAQquB,EACRgX,OACAz7B,IACAC,IACAgpE,gBAIJ,2BAA0B,MACxBvkD,EAAK,OACLE,EAAM,OACNonC,EAAM,KACNvwB,EAAI,OACJkoC,EAAS,EAAC,OACV7yD,EAAS,KAAI,KACbpX,EAAO,OAEP,MAAM,GACJ5D,GACE8E,KACEuuE,EAAend,GAAUvwB,EACzB2tC,QAAsBh7B,QAAQ/b,IAAI02C,GAAMn0D,IAAI6P,IAChD,MAAM4kD,EAAaF,EAAa1kD,GAChC,OAAO2pB,QAAQ/b,IAAIp3B,MAAM6P,QAAQu+D,GAAcA,EAAa,CAACA,OAE/DzuE,KAAK3D,OACL8xE,GAAMjyE,QAAQ,CAAC2tB,EAAM1nB,KACfqsE,EAAcrsE,GAAO3B,OAAS,IAA2B,IAAtBR,KAAK2rC,KAAKq9B,SAC/C,GAAIl9C,KAAQ9rB,KAAKm8B,GAAR,iCAAT,GAGFqyC,EAAcrsE,GAAOjG,QAAQ,CAAC6rC,EAAO2mC,KAC/B5kD,GAASE,EACX9uB,EAAGqvE,WAAW1gD,EAAM6kD,EAAUx4D,EAAQ4T,EAAOE,EAAQ++C,EAAQ7yD,EAAQpX,EAAMipC,GAE3E7sC,EAAGqvE,WAAW1gD,EAAM6kD,EAAUx4D,EAAQA,EAAQpX,EAAMipC,OAI1D/nC,KAAK2uE,SAGP,oBAAoBx2D,GAClB,MAAM,KACJ0R,EAAI,MACJC,EAAK,OACLE,EAAM,OACNonC,EAAM,KACNvwB,EAAI,OACJkoC,EAAS,EAAC,OACV7yD,EAAS,KAAI,KACbpX,EAAO,MACLqZ,GACE,GACJjd,GACE8E,KACE4uE,EAAYxd,GAAUvwB,EAe5B,OAdA7gC,KAAK3D,OAEDuyE,aAAqBp7B,QACvBo7B,EAAU9hC,KAAKm8B,GAAqBjpE,KAAK6uE,oBAAoB70E,OAAO4wB,OAAO,GAAIzS,EAAS,CACtF0R,OACAgX,KAAMooC,EACN7X,OAAQ6X,MAEDjpE,KAAK8pB,OAAS9pB,KAAKgqB,OAC5B9uB,EAAGqvE,WAAW1gD,EAAM,EAAG3T,EAAQ4T,EAAOE,EAAQ++C,EAAQ7yD,EAAQpX,EAAM8vE,GAEpE1zE,EAAGqvE,WAAW1gD,EAAM,EAAG3T,EAAQA,EAAQpX,EAAM8vE,GAGxC5uE,MAIX,GAAYmuE,MAAQA,GC9GL,MAAM,WAAkB,GACrC,mBAAmBjzE,GACjB,OAAO,gBAASA,GAGlB,YAAYA,EAAIu5B,EAAQ,IACtB,gBAAoBv5B,GACpBu5B,EAAQz6B,OAAO4wB,OAAO,CACpBlB,MAAO,GACN+K,EAAO,CACRj5B,OAAQ,MACRszE,aAAa,IAEf7+D,MAAM/U,EAAIu5B,GACVz0B,KAAKglD,WAAWvwB,GAChBz6B,OAAO2wC,KAAK3qC,MAGd,cAAa,MACXgqC,EAAQ,EAAC,WACTm+B,EAAa,KAAI,MACjBr+C,EAAK,OACLE,EAAM,MACNN,EAAQ,EAAC,OACTq/C,EAAS,EAAC,OACV7yD,EAAM,KACNpX,EAAO,KAAI,OACXmC,EAAS,EAAC,KACV4/B,EAAI,WACJtkB,EAAa,KAgBb,GAdAvc,KAAKwnE,wBAAwB,WAE7BxnE,KAAK9E,GAAGyuE,YAAY3pE,KAAKxE,OAAQwE,KAAK0V,QACtC,gBAAe1V,KAAK9E,GAAIqhB,EAAY,KAC9B5C,YAAYC,OAAOinB,IACrB7gC,KAAK9E,GAAG6zE,WAAW/uE,KAAKxE,OAAQwuC,EAAOm+B,EAAYr+C,EAAOE,EAAQN,EAAOq/C,EAAQ7yD,EAAQpX,EAAM+hC,GAG7FA,aAAgB,KAClB7gC,KAAK9E,GAAGyG,WAAW,MAAOk/B,EAAKnrB,QAC/B1V,KAAK9E,GAAG6zE,WAAW/uE,KAAKxE,OAAQwuC,EAAOm+B,EAAYr+C,EAAOE,EAAQN,EAAOq/C,EAAQ7yD,EAAQpX,EAAMmC,MAI/F4/B,GAAQA,EAAKyR,WACftyC,KAAK2nE,sBAAsB9mC,EAAKyR,WAAY,eACvC,CACL,MAAMhO,EAAW8jC,GAAqBpoE,KAAKmoE,aAAe,EACpDyC,EAAcvC,GAAWroE,KAAKlB,OAAS,EAE7CkB,KAAK2nE,sBAAsB3nE,KAAK8pB,MAAQ9pB,KAAKgqB,OAAShqB,KAAK0pB,MAAQ4a,EAAWsmC,EAAa,WAI7F,OADA5qE,KAAK8oE,QAAS,EACP9oE,MCtDJ,SAASgvE,GAAiBC,EAAYC,GAC3C,GAAOD,aAAsB,IAAaA,aAAsB,IAAeA,aAAsB,IACrG,MAAME,EAAcF,EAAW9zD,aACzB,GACJjgB,EAAE,MACF4uB,EAAK,OACLE,EAAM,OACN9T,EAAM,KACNpX,EAAI,WACJqpE,EAAU,OACVY,EAAM,QACNC,GACEiG,EACEG,EAAiBp1E,OAAO4wB,OAAO,CACnCd,QACAE,SACA9T,SACApX,OACAqpE,aACAY,SACAC,WACCkG,GACH,OAAO,IAAIC,EAAYj0E,EAAIk0E,GAEtB,SAASC,GAAcC,EAAS3jC,GACrC,MAAM,GACJzwC,EAAE,MACF4uB,EAAK,OACLE,EAAM,GACNmS,GACEmzC,EACEhpD,EAAc,IAAI,GAAYprB,EAAIlB,OAAO4wB,OAAO,GAAI+gB,EAAM,CAC9DxP,GAAI,mBAAmBA,EACvBrS,QACAE,SACAulD,YAAa,CACX,CAAC,OAAQD,MAGb,OAAOhpD,ECnCF,SAASkpD,GAAkBxjD,EAAQ7T,EAAU,IAClD,MAAM,QACJs3D,EAAU,EAAC,QACXC,EAAU,EAAC,aACXC,EAAe,MACbx3D,EACJ,IAAI,iBACFy3D,EAAmB,MAAK,OACxBp0E,EAAS,KAAI,YACbq0E,EAAW,aACXC,EAAY,WACZC,GACE53D,EACJ,MAAM,YACJmO,EAAW,kBACX0pD,GACEC,GAAejkD,GACnB,GAAO1F,GACP,MAAM,GACJprB,EAAE,OACFwa,EAAM,YACN65D,GACEjpD,EACJupD,EAAcA,GAAevpD,EAAYwD,MACzCgmD,EAAeA,GAAgBxpD,EAAY0D,OAElB,QAArB4lD,GAAyC,OAAXl6D,IAChCk6D,EAAmB,MAGrB,GAAOL,EAAYK,IACnBG,EAAaA,GAAcR,EAAYK,GAAkB9wE,KACzDtD,EAAS00E,GAAc10E,EAAQu0E,EAAYJ,EAAcE,EAAaC,GACtEC,EAAaA,GAAc1M,GAAwB7nE,GACnD,MAAM20E,EAAaj1E,EAAGmqB,gBAAgB,MAAO3P,GAQ7C,OAPAxa,EAAGk1E,WAAWX,EAASC,EAASG,EAAaC,EAAcH,EAAcI,EAAYv0E,GACrFN,EAAGmqB,gBAAgB,MAAO8qD,GAAc,MAEpCH,GACF1pD,EAAY4e,SAGP1pC,EAqDF,SAAS60E,GAAcrkD,GAAQ,iBACpC4jD,EAAmB,MAAK,gBACxBU,EAAkB91D,OAAO+1D,kBACvB,IACF,IAAI1vC,EAAO2uC,GAAkBxjD,EAAQ,CACnC4jD,sBAEE,MACF9lD,EAAK,OACLE,GACEgC,EAEJ,MAAOhC,EAASsmD,IAEZzvC,OACA/W,QACAE,UACE,GAAY,CACd6W,OACA/W,QACAE,YAIJ+5C,GAAS,CACPljC,OACA/W,QACAE,WAEF,MAAMtnB,EAASrE,SAAS0sB,cAAc,UACtCroB,EAAOonB,MAAQA,EACfpnB,EAAOsnB,OAASA,EAChB,MAAMmB,EAAUzoB,EAAOm9D,WAAW,MAC5B+O,EAAYzjD,EAAQqlD,gBAAgB1mD,EAAOE,GAGjD,OAFA4kD,EAAU/tC,KAAK/gB,IAAI+gB,GACnB1V,EAAQslD,aAAa7B,EAAW,EAAG,GAC5BlsE,EAAOyqC,YAwKhB,SAAS8iC,GAAejkD,GACtB,OAAMA,aAAkB,GAOjB,CACL1F,YAAa0F,EACbgkD,mBAAmB,GARZ,CACL1pD,YAAa+oD,GAAcrjD,GAC3BgkD,mBAAmB,GAUzB,SAASE,GAAcQ,EAAY5xE,EAAMoX,EAAQ4T,EAAOE,GACtD,GAAI0mD,EACF,OAAOA,EAGT5xE,EAAOA,GAAQ,KACf,MAAMumE,EAAYzB,GAAwB9kE,EAAM,CAC9CglE,SAAS,IAEL6M,EAAazC,GAAqBh4D,GACxC,OAAO,IAAImvD,EAAUv7C,EAAQE,EAAS2mD,GC1UjC,MAAM,GAAW,CACtBC,OAAQ,SACRC,oBAAqB,sBACrBC,YAAa,cACbC,oBAAqB,sBACrBC,wBAAyB,0BACzBC,qBAAsB,uBACtBC,sBAAuB,wBACvBC,YAAa,cACbC,oBAAqB,sBACrBC,cAAe,gBACfC,cAAe,gBACfC,mBAAoB,qBACpBC,4BAA6B,8BAC7BC,iCAAkC,mCAClCC,2BAA4B,6BAC5BC,yBAA0B,2BAC1BC,uBAAwB,yBACxBC,4BAA6B,8BAC7Bjb,eAAgB,iBAChBC,gBAAiB,kBACjBC,iBAAkB,mBAClBC,iBAAkB,oBAGpB,SAAS+a,GAA4B52E,GACnC,MAAM62E,EAAc,IAAI,GAAU72E,EAAI,CACpCgb,OAAQ,KACRpX,KAAM,KACNqpE,WAAY,OAER6J,EAAS,IAAI,GAAY92E,EAAI,CACjCihC,GAAI,mBACJ/rB,OAAO,EACPm/D,YAAa,CACX,CAAC,OAAQwC,KAGP7+B,EAAS8+B,EAAOC,YAGtB,OAFAF,EAAY7sC,SACZ8sC,EAAO9sC,SACW,QAAXgO,EAGM,QACb,CAAC,GAAS09B,QAAS,EAAC,GAAO,GAC3B,CAAC,GAASC,qBAAsB,CAAC,2BAA2B,GAC5D,CAAC,GAASC,aAAc,CAAC,2BAA4B,mCACrD,CAAC,GAASC,qBAAsB,CAAC,0BAA0B,GAC3D,CAAC,GAASC,yBAA0B,CAAC,sBAAsB,GAC3D,CAAC,GAASC,sBAAuB,CAAC,0BAA0B,GAC5D,CAAC,GAASC,uBAAwB,CAAC,oBAAoB,GACvD,CAAC,GAASC,aAAc,CAAC,mBACzB,CAAC,GAASC,qBAAsB,CAAC,YAAY,GAC7C,CAAC,GAASC,eAAgB,CAAC,uBAAuB,GAClD,CAAC,GAASC,eAAgB,CAAC,qBAAqB,GAChD,CAAC,GAASC,oBAAqB,CAAC,0BAA0B,GAC1D,CAAC,GAASC,6BAA8B,CAAC,4BACzC,CAAC,GAASC,kCAAmC,CAAC,iCAC9C,CAAC,GAASC,4BAA6B,CAAC,kCACxC,CAAC,GAASC,0BAA2B,CAACG,GAA6B,0BACnE,CAAC,GAASF,wBAAyB,EAAC,EAAO,0BAC3C,CAAC,GAASC,6BAA8B,CAAC,+BACzC,CAAC,GAASjb,gBAAiB,CAAC,sBAAsB,GAClD,CAAC,GAASC,iBAAkB,CAAC,kBAAkB,GAC/C,CAAC,GAASC,kBAAmB,CAAC,4BAA4B,GAC1D,CAAC,GAASC,kBAAmB,CAAC,0BAA0B,ICjE1D,MAAMmb,GAA0B,EACzB,SAASC,GAAWj3E,EAAIy8D,GAC7B,OAAO,GAAYz8D,EAAIy8D,GAElB,SAAS,GAAYz8D,EAAI4c,GAE9B,OADAA,EAAWzX,MAAM6P,QAAQ4H,GAAYA,EAAW,CAACA,GAC1CA,EAASwgD,MAAMX,GACbya,GAAmBl3E,EAAIy8D,IAG3B,SAAS0a,GAAYn3E,GAC1BA,EAAGC,KAAOD,EAAGC,MAAQ,GACrBD,EAAGC,KAAKm3E,KAAOp3E,EAAGC,KAAKm3E,MAAQ,GAE/B,IAAK,MAAM5a,KAAO,QACUh4D,IAAtBxE,EAAGC,KAAKm3E,KAAK5a,KACfx8D,EAAGC,KAAKm3E,KAAK5a,GAAO0a,GAAmBl3E,EAAIw8D,IAI/C,OAAOx8D,EAAGC,KAAKm3E,KAGjB,SAASF,GAAmBl3E,EAAIw8D,GAY9B,OAXAx8D,EAAGC,KAAOD,EAAGC,MAAQ,GACrBD,EAAGC,KAAKm3E,KAAOp3E,EAAGC,KAAKm3E,MAAQ,QAEL5yE,IAAtBxE,EAAGC,KAAKm3E,KAAK5a,KACfx8D,EAAGC,KAAKm3E,KAAK5a,GAAO6a,GAAar3E,EAAIw8D,IAGlCx8D,EAAGC,KAAKm3E,KAAK5a,IAChB,GAAIp4D,IAAI4yE,GAAyB,YAAYxa,kBAA7C,GAGKx8D,EAAGC,KAAKm3E,KAAK5a,GAGtB,SAAS6a,GAAar3E,EAAIw8D,GACxB,MAAMC,EAAU,GAAeD,GAE/B,IAAI3b,EADJ,GAAO4b,EAASD,GAEhB,MAAM8a,EAAoB,gBAASt3E,IAAMy8D,EAAQ,IAAmBA,EAAQ,GAE5E,GAAiC,oBAAtB6a,EACTz2B,EAAcy2B,EAAkBt3E,QAC3B,GAAImF,MAAM6P,QAAQsiE,GAAoB,CAC3Cz2B,GAAc,EAEd,IAAK,MAAMhgD,KAAay2E,EACtBz2B,EAAcA,GAAe/8C,QAAQ9D,EAAGc,aAAaD,QAEjB,kBAAtBy2E,EAChBz2B,EAAc/8C,QAAQ9D,EAAGc,aAAaw2E,IACA,mBAAtBA,EAChBz2B,EAAcy2B,EAEd,IAAO,GAGT,OAAOz2B,ECtDT,MAAM02B,GAA6B,wCACpB,MAAM,WAAoB,GACvC,mBAAmBv3E,EAAIid,EAAU,IAC/B,MAAM,iBACJu6D,EAAgB,qBAChBC,GACEx6D,EACJ,IAAIywD,GAAY,EAUhB,OARI8J,IACF9J,EAAY5pE,QAAQ9D,EAAGc,aAAa,2BAA6Bd,EAAGc,aAAa,6BAA+Bd,EAAGc,aAAa,uBAG9H22E,IACF/J,EAAYA,GAAa5pE,QAAQ9D,EAAGc,aAAa,2BAA6Bd,EAAGc,aAAa,iCAGzF4sE,EAGT,6BAA6B1tE,GAO3B,OANAA,EAAGC,KAAOD,EAAGC,MAAQ,GACrBD,EAAGC,KAAKy3E,mBAAqB13E,EAAGC,KAAKy3E,oBAAsB,IAAI,GAAY13E,EAAI,CAC7EihC,GAAI,sBACJzmB,OAAQ,KACR65D,YAAa,KAERr0E,EAAGC,KAAKy3E,mBAGjB,4BACE,MAAM/Q,EAAM,gBAAoB7hE,KAAK9E,IACrC,OAAO2mE,EAAIrgE,aAAaqgE,EAAIgR,uBAG9B,uBACE,MAAMhR,EAAM,gBAAoB7hE,KAAK9E,IACrC,OAAO2mE,EAAIrgE,aAAaqgE,EAAIiR,kBAG9B,YAAY53E,EAAIywC,EAAO,IACrB17B,MAAM/U,EAAIywC,GACV3rC,KAAK8pB,MAAQ,KACb9pB,KAAKgqB,OAAS,KACdhqB,KAAKuvE,YAAc,GACnBvvE,KAAK6V,WAAa,MAClB7V,KAAKqV,YAAc,CAAC,OACpBrV,KAAK+yE,aAAe,GACpB/yE,KAAKglD,WAAWrZ,GAChB3xC,OAAO2wC,KAAK3qC,MAGd,YACE,OAAOA,KAAKuvE,YAAY,QAAU,KAGpC,cACE,OAAOvvE,KAAKuvE,YAAY,QAAU,KAGpC,YACE,OAAOvvE,KAAKuvE,YAAY,QAAUvvE,KAAKuvE,YAAY,QAAU,KAG/D,cACE,OAAOvvE,KAAKuvE,YAAY,QAAUvvE,KAAKuvE,YAAY,QAAU,KAG/D,YAAW,MACTzlD,EAAQ,EAAC,OACTE,EAAS,EAAC,YACVulD,EAAc,KAAI,MAClBlmC,GAAQ,EAAI,MACZ3f,GAAQ,EAAI,QACZgkD,GAAU,EAAK,MACft9D,GAAQ,EAAI,WACZyF,EAAsB,YACtBR,IAMA,GAJA,GAAOyU,GAAS,GAAKE,GAAU,EAAG,wCAClChqB,KAAK8pB,MAAQA,EACb9pB,KAAKgqB,OAASA,EAEVulD,EACF,IAAK,MAAMz5D,KAAcy5D,EAAa,CACpC,MAAM/zE,EAAS+zE,EAAYz5D,GACrB+sB,EAASxiC,MAAM6P,QAAQ1U,GAAUA,EAAO,GAAKA,EACnDqnC,EAAO48B,OAAO,CACZ31C,QACAE,gBAIJulD,EAAcvvE,KAAKgzE,0BAA0B3pC,EAAO3f,EAAOgkD,EAAS5jD,EAAOE,GAG7EhqB,KAAK8oB,OAAO,CACVmqD,kBAAkB,EAClB1D,cACA15D,aACAR,gBAGEk6D,GAAen/D,GACjBpQ,KAAKkzE,cAIT,SACE,IAAK,MAAMjhC,KAAYjyC,KAAK+yE,aAC1B9gC,EAAS/M,SAIX,OADAj1B,MAAMi1B,SACCllC,KAGT,QAAO,YACLuvE,EAAc,GAAE,WAChB15D,EAAU,YACVR,EAAW,iBACX49D,GAAmB,EAAK,kBACxBE,GAAoB,IAEpBnzE,KAAKozE,OAAO7D,EAAa,CACvB0D,mBACAE,sBAEF,MAAM,GACJj4E,GACE8E,KACEmwE,EAAaj1E,EAAGmqB,gBAAgB,MAAOrlB,KAAK0V,QAWlD,OATIG,GACF7V,KAAKqzE,eAAex9D,GAGlBR,GACFrV,KAAKszE,gBAAgBj+D,GAGvBna,EAAGmqB,gBAAgB,MAAO8qD,GAAc,MACjCnwE,KAGT,OAAOmY,EAAU,IACf,IAAI,MACF2R,EAAK,OACLE,GACE7R,EAEJ,GAAoB,OAAhBnY,KAAK0V,OAIP,OAHA,QAAiBhW,IAAVoqB,QAAkCpqB,IAAXsqB,GAC9BhqB,KAAK8pB,MAAQ9pB,KAAK9E,GAAGoiE,mBACrBt9D,KAAKgqB,OAAShqB,KAAK9E,GAAGyiE,oBACf39D,UAGKN,IAAVoqB,IACFA,EAAQ9pB,KAAK9E,GAAGoiE,yBAGH59D,IAAXsqB,IACFA,EAAShqB,KAAK9E,GAAGyiE,qBAGf7zC,IAAU9pB,KAAK8pB,OAASE,IAAWhqB,KAAKgqB,QAC1C,GAAI1qB,IAAI,EAAG,wBAAwBU,KAAKm8B,SAASrS,KAASE,IAA1D,GAGF,IAAK,MAAMupD,KAAmBvzE,KAAKuvE,YACjCvvE,KAAKuvE,YAAYgE,GAAiB9T,OAAO,CACvC31C,QACAE,WAMJ,OAFAhqB,KAAK8pB,MAAQA,EACb9pB,KAAKgqB,OAASA,EACPhqB,KAGT,OAAOuvE,GAAa,iBAClB0D,GAAmB,EAAK,kBACxBE,GAAoB,GAClB,IACF,MAAMK,EAAiB,GAEnBP,GACFj5E,OAAOiC,KAAK+D,KAAKuvE,aAAarzE,QAAQC,IACpCq3E,EAAer3E,GAAO,OAI1BnC,OAAO4wB,OAAO4oD,EAAgBjE,GAC9B,MAAMY,EAAanwE,KAAK9E,GAAGmqB,gBAAgB,MAAOrlB,KAAK0V,QAEvD,IAAK,MAAMvZ,KAAOq3E,EAAgB,CAChC,QAAe9zE,IAARvD,EAAmB,yCAC1B,MAAM2Z,EAAa0E,OAAOre,GACpBimB,EAAaoxD,EAAe19D,GAClC,IAAI+sB,EAASzgB,EAEb,GAAKygB,EAEE,GAAIA,aAAkB,GAC3B7iC,KAAKyzE,oBAAoB,CACvB39D,aACA49D,aAAc7wC,SAEX,GAAIxiC,MAAM6P,QAAQkS,GAAa,CACpC,MAAOktD,EAASqE,EAAQ,EAAG3pC,EAAQ,GAAK5nB,EACxCygB,EAASysC,EAETtvE,KAAK4zE,eAAe,CAClB99D,aACAw5D,UACAqE,QACA3pC,eAGFhqC,KAAK4zE,eAAe,CAClB99D,aACAw5D,QAASzsC,EACT8wC,MAAO,EACP3pC,MAAO,SArBThqC,KAAK6zE,UAAU/9D,GAyBbq9D,GAAqBtwC,GACvBA,EAAO48B,OAAO,CACZ31C,MAAO9pB,KAAK8pB,MACZE,OAAQhqB,KAAKgqB,SAKnBhqB,KAAK9E,GAAGmqB,gBAAgB,MAAO8qD,GAAc,MAC7Cn2E,OAAO4wB,OAAO5qB,KAAKuvE,YAAaA,GAChCv1E,OAAOiC,KAAK+D,KAAKuvE,aAAal3C,OAAOl8B,IAAQ6D,KAAKuvE,YAAYpzE,IAAMD,QAAQC,WACnE6D,KAAKuvE,YAAYpzE,KAI5B,cACE,MAAM,GACJjB,GACE8E,KACEkzC,EAASlzC,KAAKiyE,YAEpB,GAAe,QAAX/+B,EACF,MAAM,IAAInhC,MAAM+hE,GAAsB5gC,IAGxC,OAAOlzC,KAGT,YACE,MAAM,GACJ9E,GACE8E,KACEmwE,EAAaj1E,EAAGmqB,gBAAgB,MAAOrlB,KAAK0V,QAC5Cw9B,EAASh4C,EAAG64E,uBAAuB,OAEzC,OADA74E,EAAGmqB,gBAAgB,MAAO8qD,GAAc,MACjCj9B,EAGT,MAAM/6B,EAAU,IACd,MAAM,MACJkxB,EAAK,MACL3f,EAAK,QACLgkD,EAAO,YACPr4D,EAAc,IACZ8C,EACEg4D,EAAanwE,KAAK9E,GAAGmqB,gBAAgB,MAAOrlB,KAAK0V,QAiBvD,OAfI2zB,GAAS3f,GAASgkD,IACpBD,GAAMztE,KAAK9E,GAAI,CACbmuC,QACA3f,QACAgkD,YAIJr4D,EAAYnZ,QAAQ,CAACe,EAAO4wE,KAC1BD,GAAY5tE,KAAK9E,GAAI,CACnB2yE,aACA5wE,YAGJ+C,KAAK9E,GAAGmqB,gBAAgB,MAAO8qD,GAAc,MACtCnwE,KAGT,WAAW2rC,EAAO,IAEhB,OADA,GAAIvxC,MAAM,sFAAV,GACO,KAGT,mBAAmBuxC,EAAO,IAExB,OADA,GAAIvxC,MAAM,8FAAV,GACO,KAGT,cAAcuxC,EAAO,IAEnB,OADA,GAAIvxC,MAAM,qFAAV,GACO,KAGT,YAAYuxC,EAAO,IAEjB,OADA,GAAIvxC,MAAM,iFAAV,GACO,KAGT,cAAcuxC,EAAO,IAEnB,OADA,GAAIvxC,MAAM,oGAAV,GACO,KAGT,KAAKuxC,EAAO,IAEV,OADA,GAAIvxC,MAAM,iFAAV,GACO,KAGT,YAAW,YACTm1E,EAAc,GAAE,EAChBnqE,EAAI,EAAC,EACLC,EAAI,EAAC,MACLykB,EAAK,OACLE,IAEA,MAAM63C,EAAM,gBAAoB7hE,KAAK9E,IAC/Bi1E,EAAatO,EAAIx8C,gBAAgB,MAAOrlB,KAAK0V,QAC7Cs+D,EAAsB,IAAN5uE,GAAiB,IAANC,QAAqB3F,IAAVoqB,QAAkCpqB,IAAXsqB,EASnE,OAPIgqD,EACFnS,EAAIoS,sBAAsB,MAAO1E,GAEjC1N,EAAIoS,sBAAsB,MAAO1E,EAAanqE,EAAGC,EAAGykB,EAAOE,GAG7D63C,EAAIx8C,gBAAgB,MAAO8qD,GACpBnwE,KAGT,uBAAuB8V,EAAYhU,EAAO7F,GACxC,IAAIgB,EAAQ+C,KAAKk0E,gCAAgCpyE,GAYjD,OAVc,OAAV7E,IACF+C,KAAK9E,GAAGmqB,gBAAgB,MAAOrlB,KAAK0V,QACpCzY,EAAQ+C,KAAK9E,GAAGi5E,kCAAkC,MAAOr+D,EAAYhU,GACrE9B,KAAK9E,GAAGmqB,gBAAgB,MAAO,OAG7BppB,GAAQgB,EAAQ,MAClBA,EAAQgkE,GAAOjhE,KAAK9E,GAAI+B,IAGnBA,EAGT,wBAAwB6Y,EAAa,MAAO7Z,EAAMsgB,EAAavc,KAAKmb,YAAYi5D,uBAAyB,IACvG,MAAMr4D,EAAS,GAEf,IAAK,MAAMja,KAASya,EAAY,CAC9B,MAAMpgB,EAAMF,EAAOglE,GAAOjhE,KAAK9E,GAAI4G,GAASA,EAC5Cia,EAAO5f,GAAO6D,KAAKq0E,uBAAuBv+D,EAAYhU,EAAO7F,GAG/D,OAAO8f,EAGT,cAAc9f,GAAO,GACnB,MAAMszE,EAAcv1E,OAAOiC,KAAK+D,KAAKuvE,aAC/BhzD,EAAa,GAEnB,IAAK,MAAM+3D,KAAkB/E,EAAa,CACxC,MAAMz5D,EAAa0E,OAAO85D,GACpBn4E,EAAMF,EAAOglE,GAAOjhE,KAAK9E,GAAI4a,GAAcA,EACjDyG,EAAWpgB,GAAO6D,KAAKu0E,wBAAwBz+D,EAAY7Z,GAG7D,OAAOsgB,EAGT,OAKE,MAJsB,qBAAXxiB,QACTA,OAAOy6E,KAAKnE,GAAcrwE,MAAO,sBAG5BA,KAGT,IAAImrC,EAAW,EAAG3yB,EAAU,IAC1B,GAAI2yB,EAAW,GAAInB,OAA2B,qBAAXjwC,OACjC,OAAOiG,KAGTwY,EAAUA,GAAW,eAAexY,KAAKm8B,GACzC,MAAM4L,EAAQsoC,GAAcrwE,KAAM,CAChCswE,gBAAiB,MAOnB,OALA,GAAIvoC,MAAM,CACRoD,WACA3yB,UACAuvB,SACCvvB,EAJH,GAKOxY,KAGT,MAAK,OACHxE,EAAS,OACP,IAEF,OADAwE,KAAK9E,GAAGmqB,gBAAgB7pB,EAAQwE,KAAK0V,QAC9B1V,KAGT,QAAO,OACLxE,EAAS,OACP,IAEF,OADAwE,KAAK9E,GAAGmqB,gBAAgB7pB,EAAQ,MACzBwE,KAGT,0BAA0BqpC,EAAO3f,EAAOgkD,EAAS5jD,EAAOE,GACtD,IAAIyqD,EAAqB,KA4CzB,OA1CIprC,IACForC,EAAqBA,GAAsB,GAC3CA,EAAmB,OAAS,IAAI,GAAUz0E,KAAK9E,GAAI,CACjDihC,GAAOn8B,KAAKm8B,GAAR,UACJi1B,OAAQ,KACRl7C,OAAQ,KACRpX,KAAM,KACNgrB,QACAE,SACAg/C,SAAS,EACTzsD,WAAY,CACV,CAAC,OAAQ,KACT,CAAC,OAAQ,KACT,CAAC,OAAQ,MACT,CAAC,OAAQ,SAGbvc,KAAK+yE,aAAa9vE,KAAKwxE,EAAmB,SAGxC/qD,GAASgkD,GACX+G,EAAqBA,GAAsB,GAC3CA,EAAmB,OAAS,IAAI,GAAaz0E,KAAK9E,GAAI,CACpDihC,GAAOn8B,KAAKm8B,GAAR,iBACJjmB,OAAQ,MACR4T,QACAE,OAAQ,MAEVhqB,KAAK+yE,aAAa9vE,KAAKwxE,EAAmB,SACjC/qD,GACT+qD,EAAqBA,GAAsB,GAC3CA,EAAmB,OAAS,IAAI,GAAaz0E,KAAK9E,GAAI,CACpDihC,GAAOn8B,KAAKm8B,GAAR,SACJjmB,OAAQ,MACR4T,QACAE,WAEFhqB,KAAK+yE,aAAa9vE,KAAKwxE,EAAmB,SACjC/G,GACT,IAAO,GAGF+G,EAGT,UAAU3+D,GACR,MAAM4+D,EAAgB10E,KAAKuvE,YAAYz5D,GAElC4+D,IAIDA,aAAyB,GAC3B10E,KAAK9E,GAAGy5E,wBAAwB,MAAO7+D,EAAY,MAAO,MAE1D9V,KAAK9E,GAAG05E,qBAAqB,MAAO9+D,EAAY,KAAM,KAAM,UAGvD9V,KAAKuvE,YAAYz5D,IAG1B,qBAAoB,WAClBA,EAAa,MAAK,aAClB49D,IAEA,MAAM,GACJx4E,GACE8E,KACJ9E,EAAGy5E,wBAAwB,MAAO7+D,EAAY,MAAO49D,EAAah+D,QAClE1V,KAAKuvE,YAAYz5D,GAAc49D,EAGjC,gBAAe,WACb59D,EAAa,MAAK,QAClBw5D,EAAO,MACPqE,EAAK,MACL3pC,IAEA,MAAM,GACJ9uC,GACE8E,KAGJ,OAFA9E,EAAGyuE,YAAY2F,EAAQ9zE,OAAQ8zE,EAAQ55D,QAE/B45D,EAAQ9zE,QACd,KAAK,MACL,KAAK,MACH,MAAMqmE,EAAM,gBAAoB3mE,GAChC2mE,EAAIgT,wBAAwB,MAAO/+D,EAAYw5D,EAAQ9zE,OAAQwuC,EAAO2pC,GACtE,MAEF,KAAK,MACH,MAAM9pD,EAAOirD,GAAsBnB,GACnCz4E,EAAG05E,qBAAqB,MAAO9+D,EAAY+T,EAAMylD,EAAQ55D,OAAQs0B,GACjE,MAEF,KAAK,KACH9uC,EAAG05E,qBAAqB,MAAO9+D,EAAY,KAAMw5D,EAAQ55D,OAAQs0B,GACjE,MAEF,QACE,IAAO,EAAO,wBAGlB9uC,EAAGyuE,YAAY2F,EAAQ9zE,OAAQ,MAC/BwE,KAAKuvE,YAAYz5D,GAAcw5D,EAGjC,eAAez5D,GACb,MAAMgsD,EAAM,gBAAiB7hE,KAAK9E,IAE9B2mE,EACFA,EAAIhsD,WAAWA,GAEf,GAAsB,QAAfA,GAAuC,OAAfA,EAAqB48D,IAGtDzyE,KAAK6V,WAAaA,EAGpB,gBAAgBR,GACd,MAAM,GACJna,GACE8E,KACE6hE,EAAM,gBAAoB3mE,GAEhC,GAAI2mE,EACFA,EAAIxsD,YAAYA,OACX,CACL,MAAMzY,EAAM1B,EAAGc,aAAa,sBAExBY,EACFA,EAAIm4E,iBAAiB1/D,GAErB,GAA8B,IAAvBA,EAAY7U,SAAoC,QAAnB6U,EAAY,IAAmC,OAAnBA,EAAY,IAAco9D,IAI9FzyE,KAAKqV,YAAcA,EAGrB,gCAAgCvT,GAC9B,MAAMwwE,EAAOD,GAAYryE,KAAK9E,IAE9B,OAAQ4G,GACN,KAAK,MACH,OAAQwwE,EAAK1B,OAAa,KAAJ,EAExB,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACH,OAAQ0B,EAAK1B,OAAa,KAAJ,EAExB,KAAK,MACH,OAAQ0B,EAAK1B,OAAgB,KAAP,KAExB,KAAK,MACH,OAAQ0B,EAAK1B,QAAW0B,EAAK0C,SAAkB,KAAP,KAE1C,QACE,OAAO,MAIb,gBACE,OAAOh1E,KAAK9E,GAAG+5E,oBAGjB,gBACEj1E,KAAK9E,GAAG80E,kBAAkBhwE,KAAK0V,QAGjC,YAAYA,GACV,OAAO1V,KAAK9E,GAAGmqB,gBAAgB,MAAO3P,IAK1C,SAASo/D,GAAsBnB,GAC7B,OAAOA,EAAQ,MAAQA,EAAQ,MAAQA,EAGzC,SAASG,GAAsB5gC,GAC7B,MAAMgiC,EAAS,GAAYA,QAAU,GACrC,OAAOA,EAAOhiC,IAAW,qBAAqBA,EAGzC,MAAMiiC,GAAoC,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC1G,GAAYf,sBAAwBe,GC7mBpC,MAAMC,GAAkB,CACtB,CAAC,MAAOC,GAAeh5E,KAAK,KAAM,aAAci5E,GAAc,EAAGC,IACjE,CAAC,OAAQF,GAAeh5E,KAAK,KAAM,aAAci5E,GAAc,EAAGC,IAClE,CAAC,OAAQF,GAAeh5E,KAAK,KAAM,aAAci5E,GAAc,EAAGC,IAClE,CAAC,OAAQF,GAAeh5E,KAAK,KAAM,aAAci5E,GAAc,EAAGC,IAClE,CAAC,MAAOF,GAAeh5E,KAAK,KAAM,aAAcm5E,GAAY,EAAGD,IAC/D,CAAC,OAAQF,GAAeh5E,KAAK,KAAM,aAAcm5E,GAAY,EAAGD,IAChE,CAAC,OAAQF,GAAeh5E,KAAK,KAAM,aAAcm5E,GAAY,EAAGD,IAChE,CAAC,OAAQF,GAAeh5E,KAAK,KAAM,aAAcm5E,GAAY,EAAGD,IAChE,CAAC,OAAQF,GAAeh5E,KAAK,KAAM,aAAcm5E,GAAY,EAAGD,IAChE,CAAC,OAAQF,GAAeh5E,KAAK,KAAM,aAAcm5E,GAAY,EAAGD,IAChE,CAAC,OAAQF,GAAeh5E,KAAK,KAAM,aAAcm5E,GAAY,EAAGD,IAChE,CAAC,OAAQF,GAAeh5E,KAAK,KAAM,aAAcm5E,GAAY,EAAGD,IAChE,CAAC,OAAQF,GAAeh5E,KAAK,KAAM,mBAAoBi5E,GAAc,EAAGG,IACxE,CAAC,OAAQJ,GAAeh5E,KAAK,KAAM,mBAAoBi5E,GAAc,EAAGG,IACxE,CAAC,OAAQJ,GAAeh5E,KAAK,KAAM,mBAAoBi5E,GAAc,GAAIG,IACzE,CAAC,OAAQC,GACT,CAAC,OAAQA,GACT,CAAC,MAAOL,GAAeh5E,KAAK,KAAM,cAAes5E,GAAa,EAAGJ,IACjE,CAAC,OAAQF,GAAeh5E,KAAK,KAAM,cAAes5E,GAAa,EAAGJ,IAClE,CAAC,OAAQF,GAAeh5E,KAAK,KAAM,cAAes5E,GAAa,EAAGJ,IAClE,CAAC,OAAQF,GAAeh5E,KAAK,KAAM,cAAes5E,GAAa,EAAGJ,IAClE,CAAC,OAAQF,GAAeh5E,KAAK,KAAM,qBAAsBi5E,GAAc,EAAGG,IAC1E,CAAC,OAAQJ,GAAeh5E,KAAK,KAAM,qBAAsBi5E,GAAc,EAAGG,IAC1E,CAAC,OAAQJ,GAAeh5E,KAAK,KAAM,qBAAsBi5E,GAAc,EAAGG,IAC1E,CAAC,OAAQJ,GAAeh5E,KAAK,KAAM,qBAAsBi5E,GAAc,GAAIG,IAC3E,CAAC,OAAQJ,GAAeh5E,KAAK,KAAM,qBAAsBi5E,GAAc,EAAGG,IAC1E,CAAC,OAAQJ,GAAeh5E,KAAK,KAAM,qBAAsBi5E,GAAc,GAAIG,IAC3E,CAAC,OAAQC,GACT,CAAC,OAAQA,GACT,CAAC,OAAQA,GACT,CAAC,OAAQA,GACT,CAAC,OAAQA,GACT,CAAC,OAAQA,GACT,CAAC,OAAQA,GACT,CAAC,OAAQA,GACT,CAAC,OAAQA,GACT,CAAC,OAAQA,GACT,CAAC,OAAQA,GACT,CAAC,OAAQA,GACT,CAAC,OAAQA,GACT,CAAC,OAAQA,GACT,CAAC,OAAQA,IAELE,GAAc,GACdC,GAAY,GACZC,GAAa,GACbt4B,GAAS,CAAC,GAEhB,SAASu4B,GAAa94E,EAAO+4E,EAAehlD,EAAM7U,GAC1B,IAAlB65D,GAAwC,mBAAV/4E,IAChCA,EAAQA,EAAQ,EAAI,GAGlBud,OAAOC,SAASxd,KAClBugD,GAAO,GAAKvgD,EACZA,EAAQugD,IAGV,MAAMh9C,EAASvD,EAAMuD,OAMrB,GAJIA,EAASw1E,GACX,GAAIlqD,KAAK,uCAAuCkqD,EAAiB/4E,EAAjE,GAGEA,aAAiB+zB,EACnB,OAAO/zB,EAGT,IAAIgL,EAASkU,EAAM3b,GAEdyH,IACHA,EAAS,IAAI+oB,EAAKxwB,GAClB2b,EAAM3b,GAAUyH,GAGlB,IAAK,IAAIH,EAAI,EAAGA,EAAItH,EAAQsH,IAC1BG,EAAOH,GAAK7K,EAAM6K,GAGpB,OAAOG,EAGT,SAASqtE,GAAar4E,EAAO+4E,GAC3B,OAAOD,GAAa94E,EAAO+4E,EAAezxE,aAAcqxE,IAG1D,SAASJ,GAAWv4E,EAAO+4E,GACzB,OAAOD,GAAa94E,EAAO+4E,EAAe7/D,WAAY0/D,IAGxD,SAASF,GAAY14E,EAAO+4E,GAC1B,OAAOD,GAAa94E,EAAO+4E,EAAexS,YAAasS,IAGlD,SAASG,GAAiB/6E,EAAI+Z,EAAU60B,GAC7C,MAAM5tB,EAASk5D,GAAgBtrC,EAAKhrC,MAEpC,IAAKod,EACH,MAAM,IAAInK,MAAM,6BAA6B+3B,EAAKhrC,MAGpD,OAAOod,IAAS7f,KAAK,KAAMnB,EAAI+Z,GAE1B,SAASihE,GAAiB/yE,GAC/B,GAA8B,MAA1BA,EAAKA,EAAK3C,OAAS,GACrB,MAAO,CACL2C,OACA3C,OAAQ,EACR0P,SAAS,GAIb,MAAMimE,EAAsB,uBACtB13E,EAAU0E,EAAKo+C,MAAM40B,GAE3B,IAAK13E,GAAWA,EAAQ+B,OAAS,EAC/B,MAAM,IAAIuR,MAAM,qCAAqC5O,GAGvD,MAAO,CACLA,KAAM1E,EAAQ,GACd+B,OAAQ/B,EAAQ,IAAM,EACtByR,QAASlR,QAAQP,EAAQ,KAGtB,SAAS23E,GAAmB/hB,EAAUroC,EAAQqqD,GACnD,IAAK,MAAMC,KAAejiB,EAAU,CAClC,MAAMp3D,EAAQo3D,EAASiiB,GACjBC,GAAeF,GAAcr3E,QAAQq3E,EAAWC,IAEtD,GAAIC,IAAgBC,GAAkBv5E,GAGpC,MAFA+uB,EAASA,EAAYA,EAAH,IAAe,GACjC3sB,QAAQjF,MAAM,GAAG4xB,iBAAsBsqD,IAAer5E,GAChD,IAAI8U,MAAM,GAAGia,iBAAsBsqD,KAI7C,OAAO,EAGT,SAASE,GAAkBv5E,GACzB,OAAIoD,MAAM6P,QAAQjT,IAAU0c,YAAYC,OAAO3c,GACtCw5E,GAAkBx5E,KAGvBwd,SAASxd,MAEQ,IAAVA,IAA4B,IAAVA,IAElBA,aAAiB,KAEjBA,aAAiB,IAEjBA,aAAiB,IACnB+B,QAAQ/B,EAAMqyE,YAMlB,SAASoH,GAAYriB,EAAUl4D,EAAKc,GACzC,GAAIoD,MAAM6P,QAAQjT,IAAU0c,YAAYC,OAAO3c,GAC7C,GAAIo3D,EAASl4D,GAAM,CACjB,MAAMgwB,EAAOkoC,EAASl4D,GAEtB,IAAK,IAAI2L,EAAI,EAAGwD,EAAMrO,EAAMuD,OAAQsH,EAAIwD,IAAOxD,EAC7CqkB,EAAKrkB,GAAK7K,EAAM6K,QAGlBusD,EAASl4D,GAAOc,EAAM5C,aAGxBg6D,EAASl4D,GAAOc,EAIpB,SAASw5E,GAAkBx5E,GACzB,GAAqB,IAAjBA,EAAMuD,OACR,OAAO,EAGT,MAAMm2E,EAAct0E,KAAKgF,IAAIpK,EAAMuD,OAAQ,IAE3C,IAAK,IAAIsH,EAAI,EAAGA,EAAI6uE,IAAe7uE,EACjC,IAAK0S,OAAOC,SAASxd,EAAM6K,IACzB,OAAO,EAIX,OAAO,EAGT,SAAS4tE,KACP,IAAIv5D,EAAQ,KACZ,MAAO,CAACjhB,EAAI+Z,EAAUhY,KACpB,MAAM6rB,EAAS3M,IAAUlf,EAOzB,OALI6rB,IACF5tB,EAAG07E,UAAU3hE,EAAUhY,GACvBkf,EAAQlf,GAGH6rB,GAIX,SAASusD,GAAewB,EAAc/oD,EAAShtB,EAAMg2E,GACnD,IAAI36D,EAAQ,KACR46D,EAAc,KAClB,MAAO,CAAC77E,EAAI+Z,EAAUhY,KACpB,MAAM+5E,EAAalpD,EAAQ7wB,EAAO6D,GAC5BN,EAASw2E,EAAWx2E,OAC1B,IAAIsoB,GAAS,EAEb,GAAc,OAAV3M,EACFA,EAAQ,IAAI5X,aAAa/D,GACzBu2E,EAAcv2E,EACdsoB,GAAS,MACJ,CACL,GAAOiuD,IAAgBv2E,EAAQ,iCAE/B,IAAK,IAAIsH,EAAI,EAAGA,EAAItH,IAAUsH,EAC5B,GAAIkvE,EAAWlvE,KAAOqU,EAAMrU,GAAI,CAC9BghB,GAAS,EACT,OAUN,OALIA,IACFguD,EAAc57E,EAAI27E,EAAc5hE,EAAU+hE,GAC1C76D,EAAM2D,IAAIk3D,IAGLluD,GAIX,SAASysD,GAAiBr6E,EAAI27E,EAAc5hE,EAAUhY,GACpD/B,EAAG27E,GAAc5hE,EAAUhY,GAG7B,SAASw4E,GAAiBv6E,EAAI27E,EAAc5hE,EAAUhY,GACpD/B,EAAG27E,GAAc5hE,GAAU,EAAOhY,GCzPrB,SAAS,GAAc66D,EAAQmf,EAAc,WAC1D,MAAMC,EAAqB,oDACrB31B,EAAQuW,EAAOvW,MAAM21B,GAC3B,OAAO31B,EAAQA,EAAM,GAAK01B,ECH5B,MAAME,GAAqB,MACrBC,GAAmB,MACV,SAASC,GAAkBv4E,GACxC,OAAQA,GACN,KAAKq4E,GACH,MAAO,WAET,KAAKC,GACH,MAAO,SAET,QACE,MAAO,gBCDN,SAASE,GAAuBC,EAAQnuD,EAAKouD,EAAYC,GAC9D,MAAMC,EAAeH,EAAO1yD,MAAM,SAC5B8yD,EAAS,GACTC,EAAW,GACXz0E,EAAOs0E,GAAc,GAAcruD,IAAQ,YAC3CyuD,EAAoB,GAAGR,GAAkBG,aAAsBr0E,IAErE,IAAK,IAAI2E,EAAI,EAAGA,EAAI4vE,EAAal3E,OAAQsH,IAAK,CAC5C,MAAMgwE,EAAcJ,EAAa5vE,GAEjC,GAAIgwE,EAAYt3E,QAAU,EACxB,SAGF,MAAMu3E,EAAWD,EAAYjzD,MAAM,KAC7B/lB,EAAOi5E,EAAS,GAChBC,EAAOl4E,SAASi4E,EAAS,GAAI,IAEnC,GAAI/W,MAAMgX,GACR,MAAM,IAAIjmE,MAAM,6BAA6B8lE,MAAsBN,KAGxD,YAATz4E,EACF64E,EAAOK,GAAQF,EAEfF,EAASI,GAAQF,EAIrB,MAAMG,EAAQC,GAAe9uD,GAC7B,MAAO,CACLquD,WAAYI,EACZF,OAAQQ,GAAaR,EAAQM,GAC7BL,SAAUO,GAAaP,EAAUK,IAIrC,SAASE,GAAaR,EAAQM,GAC5B,IAAIz/D,EAAU,GAEd,IAAK,IAAI1Q,EAAI,EAAGA,EAAImwE,EAAMz3E,OAAQsH,IAAK,CACrC,MAAMkwE,EAAOC,EAAMnwE,GAEnB,IAAK6vE,EAAO7vE,EAAI,IAAO6vE,EAAO7vE,EAAI,IAAO6vE,EAAO7vE,EAAI,MAIpD0Q,GAAcw/D,EAAH,KAEPL,EAAO7vE,EAAI,IAAI,CACjB,MAAM1N,EAAQu9E,EAAO7vE,EAAI,GACnBiwE,EAAW39E,EAAMyqB,MAAM,IAAK,GAC5B/lB,EAAOi5E,EAAS,GAChBK,EAASt4E,SAASi4E,EAAS,GAAI,KAAO,EACtCv4E,EAAMpF,EAAMi+E,UAAUN,EAAS12E,KAAK,KAAKb,OAAS,GAAG6Y,OAC3Db,GAAW8/D,GAAQ,OAAOx5E,MAASU,QAAW44E,IAIlD,OAAO5/D,EAGT,SAAS0/D,GAAe1wE,EAAQ2R,EAAQ,EAAGo/D,EAAQ,MACjD,MAAMN,EAAQzwE,EAAOqd,MAAM,SACrB2zD,EAAYj6E,OAAO05E,EAAMz3E,OAAS2Y,EAAQ,GAAG3Y,OACnD,OAAOy3E,EAAMj+D,IAAI,CAACg+D,EAAMlwE,KACtB,MAAM2wE,EAAal6E,OAAOuJ,EAAIqR,GACxBqL,EAASi0D,EAAWj4E,OACpB4tB,EAASkqD,GAAQG,EAAYD,EAAYh0D,GAC/C,OAAO4J,EAASmqD,EAAQP,IAI5B,SAASM,GAAQ9wE,EAAQgd,GACvB,IAAIvc,EAAS,GAEb,IAAK,IAAIH,EAAI,EAAGA,EAAI0c,IAAU1c,EAC5BG,GAAU,IAGZ,MAAO,GAAGA,IAAST,ICrFrB,MAAMkxE,GAAa,uDACZ,MAAM,WAAe,GAC1B,mBAAmBlB,GACjB,OAAQA,GACN,KAAK,MACH,MAAO,gBAET,KAAK,MACH,MAAO,kBAET,QAEE,OADA,IAAO,GACA,WAIb,YAAYt8E,EAAIu5B,GACd,gBAAmBv5B,GACnB,GAA+B,kBAAjBu5B,EAAMzI,OAAqB0sD,IACzC,MAAMv8C,EAAK,GAAc1H,EAAMzI,OAAQ,OAASyI,EAAM0H,IAAMhd,GAAI,WAAW,GAAOw5D,YAAYlkD,EAAM+iD,aACpGvnE,MAAM/U,EAAI,CACRihC,OAEFn8B,KAAKw3E,WAAa/iD,EAAM+iD,WACxBx3E,KAAKgsB,OAASyI,EAAMzI,OACpBhsB,KAAKglD,WAAWvwB,GAGlB,YAAW,OACTzI,IAEA,MAAMyrD,EAAa,GAAczrD,EAAQ,MAErCyrD,IACFz3E,KAAKm8B,GAAKhd,GAAIs4D,IAGhBz3E,KAAK44E,SAAS5sD,GAGhB,aAAalqB,GACX,OAAO9B,KAAK9E,GAAGg9D,mBAAmBl4D,KAAK0V,OAAQ5T,GAGjD,WACE,MAAO,GAAG,GAAO62E,YAAY34E,KAAKw3E,eAAex3E,KAAKm8B,KAGxD,UACE,OAAO,GAAcn8B,KAAKgsB,SAAW,iBAGvC,YACE,OAAOhsB,KAAK9E,GAAG29E,gBAAgB74E,KAAK0V,QAGtC,sBACE,MAAM3Z,EAAYiE,KAAK9E,GAAGc,aAAa,uBACvC,OAAOD,EAAYA,EAAU+8E,0BAA0B94E,KAAK0V,QAAU,sEAGxE,SAASsW,EAAShsB,KAAKgsB,QAChBA,EAAOulB,WAAW,eACrBvlB,EAAS,iBAAiBA,GAG5BhsB,KAAKgsB,OAASA,EACdhsB,KAAK9E,GAAGg6D,aAAal1D,KAAK0V,OAAQ1V,KAAKgsB,QACvChsB,KAAK9E,GAAG88D,cAAch4D,KAAK0V,QAC3B,MAAMqjE,EAAgB/4E,KAAKwB,aAAa,OAExC,IAAKu3E,EAAe,CAClB,MAAMC,EAAUh5E,KAAK9E,GAAG+9E,iBAAiBj5E,KAAK0V,SACxC,WACJ+hE,EAAU,OACVE,EAAM,SACNC,GACEN,GAAuB0B,EAASh5E,KAAKgsB,OAAQhsB,KAAKw3E,WAAYx3E,KAAKm8B,IAGvE,MAFA,GAAI/hC,MAAM,8BAA8Bq9E,MAAeE,IAAvD,GACA,GAAI7rD,KAAK,gCAAgC2rD,MAAeG,IAAxD,GACM,IAAI7lE,MAAM,8BAA8B0lE,IAIlD,gBACEz3E,KAAK9E,GAAGi9D,aAAan4D,KAAK0V,QAG5B,qBACE,MAAO,CACL5W,KAAMkB,KAAKwB,aAAa,OACxBwqB,OAAQhsB,KAAKk5E,cAKZ,MAAMC,WAAqB,GAChC,YAAYj+E,EAAIu5B,GACO,kBAAVA,IACTA,EAAQ,CACNzI,OAAQyI,IAIZxkB,MAAM/U,EAAIlB,OAAO4wB,OAAO,GAAI6J,EAAO,CACjC+iD,WAAY,SAIhB,gBACE,OAAOx3E,KAAK9E,GAAG68D,aAAa,QAIzB,MAAMqhB,WAAuB,GAClC,YAAYl+E,EAAIu5B,GACO,kBAAVA,IACTA,EAAQ,CACNzI,OAAQyI,IAIZxkB,MAAM/U,EAAIlB,OAAO4wB,OAAO,GAAI6J,EAAO,CACjC+iD,WAAY,SAIhB,gBACE,OAAOx3E,KAAK9E,GAAG68D,aAAa,QCpIhC,MAAMshB,GAAU,KACVC,GAAmB,KACnBC,GAAW,KACXC,GAAoB,KACpBC,GAAY,EACZC,GAAW,EACXC,GAAe,EACfC,GAAgB,EAChBC,GAAe,EACfC,GAAoB,EACpBC,GAAkB,EAClBC,GAAW,KACXC,GAAgB,MAChBC,GAAgB,MAChBC,GAAgB,MAChBC,GAAS,KACTC,GAAc,MACdC,GAAc,MACdC,GAAc,MACdC,GAAkB,KAClBC,GAAuB,MACvBC,GAAuB,MACvBC,GAAuB,MACvBC,GAAU,MACVC,GAAe,MACfC,GAAe,MACfC,GAAe,MACfC,GAAgB,MAChBC,GAAgB,MAChBC,GAAgB,MAChBC,GAAkB,MAClBC,GAAkB,MAClBC,GAAkB,MAClBC,GAAkB,MAClBC,GAAkB,MAClBC,GAAkB,MAClBC,GAAqB,CACzB,CAACzB,IAAW,CAACA,GAAU,EAAG,SAC1B,CAACC,IAAgB,CAACD,GAAU,EAAG,QAC/B,CAACE,IAAgB,CAACF,GAAU,EAAG,QAC/B,CAACG,IAAgB,CAACH,GAAU,EAAG,QAC/B,CAACI,IAAS,CAACA,GAAQ,EAAG,OACtB,CAACC,IAAc,CAACD,GAAQ,EAAG,SAC3B,CAACE,IAAc,CAACF,GAAQ,EAAG,SAC3B,CAACG,IAAc,CAACH,GAAQ,EAAG,SAC3B,CAACI,IAAkB,CAACA,GAAiB,EAAG,QACxC,CAACC,IAAuB,CAACD,GAAiB,EAAG,SAC7C,CAACE,IAAuB,CAACF,GAAiB,EAAG,SAC7C,CAACG,IAAuB,CAACH,GAAiB,EAAG,SAC7C,CAACI,IAAU,CAACZ,GAAU,EAAG,QACzB,CAACa,IAAe,CAACb,GAAU,EAAG,SAC9B,CAACc,IAAe,CAACd,GAAU,EAAG,SAC9B,CAACe,IAAe,CAACf,GAAU,EAAG,SAC9B,CAACgB,IAAgB,CAAChB,GAAU,EAAG,QAC/B,CAACmB,IAAkB,CAACnB,GAAU,EAAG,UACjC,CAACoB,IAAkB,CAACpB,GAAU,EAAG,UACjC,CAACiB,IAAgB,CAACjB,GAAU,GAAI,QAChC,CAACqB,IAAkB,CAACrB,GAAU,GAAI,UAClC,CAACsB,IAAkB,CAACtB,GAAU,GAAI,UAClC,CAACkB,IAAgB,CAAClB,GAAU,GAAI,QAChC,CAACuB,IAAkB,CAACvB,GAAU,GAAI,UAClC,CAACwB,IAAkB,CAACxB,GAAU,GAAI,WAE7B,SAAS0B,GAAqBC,GACnC,OAAQA,GACN,KAAKlC,GACH,OAAOA,GAET,KAAKC,GACH,OAAOA,GAET,KAAKE,GACH,OAAOF,GAET,KAAKC,GACH,OAAOD,GAET,KAAKG,GACH,OAAOA,GAET,KAAKC,GACH,OAAOD,GAET,KAAKE,GACH,OAAOF,GAET,QAEE,OADA,IAAO,GACA,GAsDN,SAAS+B,GAAyBC,GACvC,MAAMC,EAAcL,GAAmBI,GAEvC,IAAKC,EACH,OAAO,KAGT,MAAOh9E,EAAM6xE,GAAcmL,EAC3B,MAAO,CACLh9E,OACA6xE,cAGG,SAASoL,GAAmBj9E,EAAM6xE,GACvC,OAAQ7xE,GACN,KAAKu6E,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACH16E,EAAOk7E,GACP,MAEF,SAGF,IAAK,MAAMnW,KAAU4X,GAAoB,CACvC,MAAOO,EAAUC,EAAgB94E,GAAQs4E,GAAmB5X,GAE5D,GAAImY,IAAal9E,GAAQm9E,IAAmBtL,EAC1C,MAAO,CACL9M,SACA1gE,QAKN,OAAO,KChLM,MAAM,GACnB,YAAY6S,GACVhW,KAAKm8B,GAAKnmB,EAAQmmB,GAClBn8B,KAAKk8E,eAAiB,GACtBl8E,KAAKm8E,qBAAuB,GAC5Bn8E,KAAKo8E,yBAA2B,GAChCp8E,KAAKq8E,aAAe,GACpBr8E,KAAKs8E,mBAAqB,GAC1BtiF,OAAO2wC,KAAK3qC,MAEZA,KAAKu8E,2BAA2BvmE,GAEhChW,KAAKw8E,yBAAyBxmE,GAGhC,iBAAiBymE,GACf,MAAMxnE,EAAWuF,OAAOiiE,GAExB,OAAIjiE,OAAOC,SAASxF,GACXjV,KAAKo8E,yBAAyBnnE,GAGhCjV,KAAKm8E,qBAAqBM,IAAmB,KAGtD,qBAAqBA,GACnB,MAAMC,EAAgB18E,KAAK28E,iBAAiBF,GAC5C,OAAOC,EAAgBA,EAAcznE,UAAY,EAGnD,qBAAqBwnE,GACnB,MAAMC,EAAgB18E,KAAK28E,iBAAiBF,GAC5C,OAAOC,EAAgBA,EAActX,SAAW,KAGlD,eAAeqX,GACb,MAAMxnE,EAAWuF,OAAOiiE,GAExB,OAAIjiE,OAAOC,SAASxF,GACXjV,KAAKq8E,aAAapnE,GAGpBjV,KAAKs8E,mBAAmBG,IAAmB,KAGpD,gBAAgBA,GACd,MAAMG,EAAU58E,KAAK68E,iBACrB,OAAOD,EAAUA,EAAQ3nE,UAAY,EAGvC,mBAAmBwnE,GACjB,MAAMG,EAAU58E,KAAK68E,iBACrB,OAAOD,EAAUA,EAAQxX,SAAW,KAGtC,2BAA2BpvD,GACzB,MAAM,GACJ9a,GACE8a,EACEunB,EAAQriC,EAAG6a,oBAAoBC,EAAQN,OAAQ,OAErD,IAAK,IAAIvT,EAAQ,EAAGA,EAAQo7B,EAAOp7B,IAAS,CAC1C,MAAM,KACJgB,EAAI,KACJrE,EAAI,KACJgC,GACE5F,EAAG4hF,gBAAgB9mE,EAAQN,OAAQvT,GACjC8S,EAAW/Z,EAAG6hF,kBAAkB/mE,EAAQN,OAAQvS,GAElD8R,GAAY,GACdjV,KAAKg9E,cAAc/nE,EAAU9R,EAAMrE,EAAMgC,GAI7Cd,KAAKk8E,eAAeluD,KAAK,CAACvpB,EAAGC,IAAMD,EAAEwQ,SAAWvQ,EAAEuQ,UAGpD,yBAAyBe,GACvB,MAAM,GACJ9a,GACE8a,EAEJ,IAAK,gBAAS9a,GACZ,OAGF,MAAMqiC,EAAQriC,EAAG6a,oBAAoBC,EAAQN,OAAQ,OAErD,IAAK,IAAIT,EAAW,EAAGA,EAAWsoB,EAAOtoB,IAAY,CACnD,MAAM,KACJ9R,EAAI,KACJrE,EAAI,KACJgC,GACE5F,EAAG+hF,4BAA4BjnE,EAAQN,OAAQT,GAEnDjV,KAAKk9E,YAAYjoE,EAAU9R,EAAMrE,EAAMgC,GAGzCd,KAAKq8E,aAAaruD,KAAK,CAACvpB,EAAGC,IAAMD,EAAEwQ,SAAWvQ,EAAEuQ,UAGlD,cAAcA,EAAU9R,EAAMg6E,EAAer8E,GAC3C,MAAM,KACJhC,EAAI,WACJ6xE,GACEiL,GAAyBuB,GACvB/X,EAAW,CACftmE,OACAgC,KAAMA,EAAO6vE,GAGf3wE,KAAKo9E,iBAAiBnoE,EAAU9R,EAAMiiE,GAEtC,MAAMsX,EAAgB,CACpBznE,WACA9R,OACAiiE,SAAU,IAAI,GAASA,IAEzBplE,KAAKk8E,eAAej5E,KAAKy5E,GACzB18E,KAAKo8E,yBAAyBnnE,GAAYynE,EAC1C18E,KAAKm8E,qBAAqBO,EAAcv5E,MAAQu5E,EAGlD,iBAAiBznE,EAAU9R,EAAMiiE,GAC3B,YAAYh2C,KAAKjsB,KACnBiiE,EAASlwD,QAAU,GAIvB,YAAYD,EAAU9R,EAAMg6E,EAAer8E,GACzC,MAAM,KACJhC,EAAI,WACJ6xE,GACEiL,GAAyBuB,GACvB/X,EAAW,IAAI,GAAS,CAC5BtmE,OACAgC,KAAMA,EAAO6vE,IAETiM,EAAU,CACd3nE,WACA9R,OACAiiE,YAEFplE,KAAKq8E,aAAap5E,KAAK25E,GACvB58E,KAAKs8E,mBAAmBM,EAAQz5E,MAAQy5E,GCvI5C,MAAMS,GAA4B,EAC5BC,GAAsB,MACtBC,GAAwB,CAAC,iBAAkB,gBAAiB,aAAc,eAAgB,MAAO,kBAAmB,iBAAkB,qBAAsB,kBAAmB,aAAc,sBAAuB,qBAAsB,oBAAqB,uBAAwB,oBAC9Q,MAAM,WAAgB,GACnC,YAAYriF,EAAIu5B,EAAQ,IACtBxkB,MAAM/U,EAAIu5B,GACVz0B,KAAKshE,mBAAmB,UAAW,OAAQic,IAC3Cv9E,KAAKw9E,WAAY,EACjBx9E,KAAKglD,WAAWvwB,GAChBz6B,OAAO2wC,KAAK3qC,MAEZA,KAAKy9E,OAAOhpD,EAAM0H,IAGpB,WAAW1H,EAAQ,IACjB,MAAM,KACJ4nC,EAAI,GACJnI,EAAE,GACFC,EAAE,SACFupB,EAAQ,WACRC,EAAaL,IACX7oD,EA0BJ,OAzBAz0B,KAAKq8D,KAAOA,GAAQ,GACpBr8D,KAAKk0D,GAAmB,kBAAPA,EAAkB,IAAIilB,GAAan5E,KAAK9E,GAAI,CAC3DihC,GAAO1H,EAAM0H,GAAT,MACJnQ,OAAQkoC,IACLA,EACLl0D,KAAKm0D,GAAmB,kBAAPA,EAAkB,IAAIilB,GAAep5E,KAAK9E,GAAI,CAC7DihC,GAAO1H,EAAM0H,GAAT,MACJnQ,OAAQmoC,IACLA,EACL,GAAOn0D,KAAKk0D,cAAcilB,IAC1B,GAAOn5E,KAAKm0D,cAAcilB,IAC1Bp5E,KAAKq0D,SAAW,GAChBr0D,KAAK49E,iBAAmB,GAEpBF,GAAYA,EAASl9E,OAAS,IAChC,gBAAoBR,KAAK9E,IACzB8E,KAAK09E,SAAWA,EAChB19E,KAAK6hE,IAAIgc,0BAA0B79E,KAAK0V,OAAQgoE,EAAUC,IAG5D39E,KAAK89E,kBAEL99E,KAAK+9E,yCAEL/9E,KAAKinC,cAAgB,IAAI,GAAqBjnC,MACvCA,KAAK86C,SAASrmB,GAGvB,OAAOtc,EAAU,IACf,OAAInY,KAAKw9E,UACAx9E,KAGFiQ,MAAMi1B,OAAO/sB,GAGtB,SAASsc,GAKP,MAJI,aAAcA,GAChBz0B,KAAKg+E,YAAYvpD,EAAM4/B,UAGlBr0D,KAGT,MAAK,YACHi+E,EAAW,SACXtC,EAAW,EAAC,YACZuC,EAAW,OACXj9E,EAAS,EAAC,MACVkY,EAAK,IACLC,EAAG,UACH+kE,GAAY,EAAK,UACjBC,EAAY,KAAI,cAChBC,EAAgB,EAAC,YACjBlZ,EAAckZ,EAAgB,EAAC,YAC/BC,EAAc,KAAI,kBAClBC,EAAiB,YACjBj4D,EAAW,WACX/J,EAAa,GAAE,SACf83C,EAAQ,SACRmqB,IAOA,IALInqB,GAAYmqB,KACd,GAAI5tB,WAAW,2BAA4B,gCAA3C,GACA5wD,KAAKg+E,YAAY3pB,GAAY,KAG3B,GAAIhpB,UAAY4yC,EAAa,CAC/B,MAAMQ,EAAKn4D,EAAcA,EAAY6V,GAAK,UACpC3jB,EAAU,QAAQyoD,GAAOjhE,KAAK9E,GAAIygF,YAAmBuC,eAA8BG,eAA2Bpd,GAAOjhE,KAAK9E,GAAIkjF,kBAA+BjZ,eAAyBgZ,iBAA8BM,EAC1N,GAAIn/E,IAAI2+E,EAAazlE,EAArB,GAMF,OAHA,GAAO8lE,GACPt+E,KAAK9E,GAAGwjF,WAAW1+E,KAAK0V,WAEnB1V,KAAK2+E,0BAA4C,IAAhBT,GAAqB/Y,GAAiC,IAAlBkZ,KAI1EC,EAAYM,YAAYV,EAAaG,EAAe,KAOlD,QANoB3+E,IAAhB4mB,IACF/J,EAAaviB,OAAO4wB,OAAO,GAAIrO,EAAY,CACzC+J,iBAIAi4D,EAAmB,CACrB,MAAMM,EAAgBnD,GAAqBC,GAC3C4C,EAAkBO,MAAMD,GAG1B7+E,KAAK++E,gBAEL,gBAAe/+E,KAAK9E,GAAIqhB,EAAY,KAC9B4hE,GAAahZ,EACfnlE,KAAK6hE,IAAI1sD,sBAAsBwmE,EAAUuC,EAAaE,EAAWn9E,EAAQo9E,GAChEF,GAAa,gBAASn+E,KAAK9E,MAAQ8lE,MAAM7nD,KAAW6nD,MAAM5nD,GACnEpZ,KAAK6hE,IAAImd,kBAAkBrD,EAAUxiE,EAAOC,EAAK8kE,EAAaE,EAAWn9E,GAChEk9E,EACTn+E,KAAK9E,GAAG+jF,aAAatD,EAAUuC,EAAaE,EAAWn9E,GAC9CkkE,EACTnlE,KAAK6hE,IAAIzsD,oBAAoBumE,EAAU16E,EAAQi9E,EAAaG,GAE5Dr+E,KAAK9E,GAAGgkF,WAAWvD,EAAU16E,EAAQi9E,KAIrCK,GACFA,EAAkBnlE,SAGf,GAGT,YAAYi7C,EAAW,IACjB,GAAIhpB,UAAY,GAClB+qC,GAAmB/hB,EAAUr0D,KAAKm8B,GAAIn8B,KAAKm/E,iBAG7Cn/E,KAAK9E,GAAGwjF,WAAW1+E,KAAK0V,QAExB,IAAK,MAAM4gE,KAAejiB,EAAU,CAClC,MAAM+qB,EAAU/qB,EAASiiB,GACnBQ,EAAgB92E,KAAKm/E,gBAAgB7I,GAE3C,GAAIQ,EAAe,CACjB,IAAI75E,EAAQmiF,EACRC,GAAgB,EAMpB,GAJIpiF,aAAiB,KACnBA,EAAQA,EAAMqyE,SAGZryE,aAAiB,GAGnB,GAFAoiF,EAAgBr/E,KAAKq0D,SAASiiB,KAAiB8I,EAE3CC,EAAe,MACkB3/E,IAA/Bo3E,EAAcwI,eAChBxI,EAAcwI,aAAet/E,KAAKu/E,wBAGpC,MAAMjQ,EAAUryE,GACV,aACJqiF,GACExI,EACJxH,EAAQjzE,KAAKijF,GACbriF,EAAQqiF,EACRt/E,KAAK49E,iBAAiBtH,GAAehH,OAErCryE,EAAQ65E,EAAcwI,kBAEft/E,KAAK49E,iBAAiBtH,WACxBt2E,KAAK49E,iBAAiBtH,IAG3BQ,EAAc75E,IAAUoiF,IAC1B3I,GAAY12E,KAAKq0D,SAAUiiB,EAAa8I,IAK9C,OAAOp/E,KAGT,yBACE,IAAIw/E,GAAqB,EAEzB,IAAK,MAAMlJ,KAAet2E,KAAK49E,iBAAkB,CAC/C,MAAMtO,EAAUtvE,KAAK49E,iBAAiBtH,GACtChH,EAAQxmD,SACR02D,EAAqBA,GAAsBlQ,EAAQxG,OAGrD,OAAO0W,EAGT,gBACE,IAAK,MAAMlJ,KAAet2E,KAAK49E,iBAAkB,CAC/C,MAAM0B,EAAet/E,KAAKm/E,gBAAgB7I,GAAagJ,aAEvDt/E,KAAK49E,iBAAiBtH,GAAaj6E,KAAKijF,IAI5C,gBACE,OAAOt/E,KAAK9E,GAAGukF,gBAGjB,gBACEz/E,KAAK9E,GAAGwkF,cAAc1/E,KAAK0V,QAG7B,sBAAsBA,GACpB,MAAMiqE,EAAgB3/E,KAAK9E,GAAG0kF,mBAAmBlqE,GAC3Ci2B,EAAO,GAEb,IAAK,MAAMk0C,KAAgBF,EAAe,CACxC,MAAM7gF,EAAOkB,KAAK9E,GAAGg9D,mBAAmBl4D,KAAK0V,OAAQ,OAErD,OAAQ5W,GACN,KAAK,MACH6sC,EAAKuoB,GAAK,IAAIilB,GAAa,CACzBzjE,OAAQmqE,IAEV,MAEF,KAAK,MACHl0C,EAAKwoB,GAAK,IAAIilB,GAAe,CAC3B1jE,OAAQmqE,IAEV,MAEF,UAIJ,OAAOl0C,EAGT,cAAc7pC,GACZ,OAAO9B,KAAK9E,GAAG6a,oBAAoB/V,KAAK0V,OAAQ5T,GAGlD,OAAOq6B,GACL,IAAKA,EAAI,CACP,MAAM2jD,EAAc9/E,KAAK+/E,WAEzB//E,KAAKm8B,GAAKhd,GAAI2gE,IAIlB,WACE,IAAIA,EAAc9/E,KAAKk0D,GAAG8rB,WAAahgF,KAAKm0D,GAAG6rB,UAG/C,OAFAF,EAAcA,EAAY5mE,QAAQ,UAAW,IAC7C4mE,EAAcA,EAAiBA,EAAH,WAA2B,UAChDA,EAGT,kBACE,MAAM,GACJ5kF,GACE8E,KAOJ,GANA9E,EAAG+kF,aAAajgF,KAAK0V,OAAQ1V,KAAKk0D,GAAGx+C,QACrCxa,EAAG+kF,aAAajgF,KAAK0V,OAAQ1V,KAAKm0D,GAAGz+C,QACrC,GAAIqpB,KAAKs+C,GAA2B,mBAAmBr9E,KAAK+/E,WAA5D,GACA7kF,EAAGglF,YAAYlgF,KAAK0V,QACpB,GAAIg2B,QAAQ2xC,GAA2B,mBAAmBr9E,KAAK+/E,WAA/D,GAEI7kF,EAAGwf,OAAS,GAAIsvB,MAAQ,EAAG,CAC7B,MAAMm2C,EAASjlF,EAAG6a,oBAAoB/V,KAAK0V,OAAQ,OAEnD,IAAKyqE,EACH,MAAM,IAAIpuE,MAAM,kBAAkB7W,EAAGklF,kBAAkBpgF,KAAK0V,SAG9Dxa,EAAGmlF,gBAAgBrgF,KAAK0V,QACxB,MAAM4qE,EAAYplF,EAAG6a,oBAAoB/V,KAAK0V,OAAQ,OAEtD,IAAK4qE,EACH,MAAM,IAAIvuE,MAAM,qBAAqB7W,EAAGklF,kBAAkBpgF,KAAK0V,UAKrE,yCACE,MAAM,GACJxa,GACE8E,KACJA,KAAKm/E,gBAAkB,GACvBn/E,KAAKugF,cAAgBvgF,KAAK+iE,cAAc,OAExC,IAAK,IAAIj7D,EAAI,EAAGA,EAAI9H,KAAKugF,cAAez4E,IAAK,CAC3C,MAAMgiC,EAAO9pC,KAAK9E,GAAGslF,iBAAiBxgF,KAAK0V,OAAQ5N,IAC7C,KACJ3E,GACE+yE,GAAiBpsC,EAAK3mC,MAC1B,IAAI8R,EAAW/Z,EAAGulF,mBAAmBzgF,KAAK0V,OAAQvS,GAGlD,GAFAnD,KAAKm/E,gBAAgBh8E,GAAQ8yE,GAAiB/6E,EAAI+Z,EAAU60B,GAExDA,EAAKhpC,KAAO,EACd,IAAK,IAAI4/E,EAAI,EAAGA,EAAI52C,EAAKhpC,KAAM4/E,IAC7BzrE,EAAW/Z,EAAGulF,mBAAmBzgF,KAAK0V,OAAQ,GAAGvS,KAAQu9E,MACzD1gF,KAAKm/E,gBAAgB,GAAGh8E,KAAQu9E,MAAQzK,GAAiB/6E,EAAI+Z,EAAU60B,GAK7E9pC,KAAKu/E,qBAAuB,EAG9B,kBAAkBoB,EAAgB7+E,GAChC,OAAO9B,KAAK6hE,IAAI+e,kBAAkB5gF,KAAK0V,OAAQirE,EAAgB7+E,GAGjE,qBAAqB++E,GACnB,OAAO7gF,KAAK6hE,IAAIif,qBAAqB9gF,KAAK0V,OAAQmrE,GAGpD,+BAA+BE,EAAYj/E,GACzC,OAAO9B,KAAK6hE,IAAImf,+BAA+BhhF,KAAK0V,OAAQqrE,EAAYj/E,GAG1E,oBAAoBi/E,EAAYE,GAC9BjhF,KAAK6hE,IAAIqf,oBAAoBlhF,KAAK0V,OAAQqrE,EAAYE,IChV3C,MAAM,GACnB,gCAAgC/lF,GAG9B,OAFAA,EAAGC,KAAOD,EAAGC,MAAQ,GACrBD,EAAGC,KAAKgmF,sBAAwBjmF,EAAGC,KAAKgmF,uBAAyB,IAAI,GAAejmF,GAC7EA,EAAGC,KAAKgmF,sBAGjB,YAAYjmF,GACV8E,KAAK9E,GAAKA,EACV8E,KAAKohF,cAAgB,GACrBphF,KAAKqhF,aAAe,GACpBrhF,KAAKshF,mBAAqB,GAC1BthF,KAAKuhF,eAAiB,GACtBvhF,KAAKwhF,gBAAkB,GACvBxhF,KAAKyhF,QAAU,GACfzhF,KAAK0hF,aAAe,EACpB1hF,KAAK2hF,UAAY,EACjB3hF,KAAK4hF,WAAa,GAGpB,iBAAiBtnF,GACV0F,KAAKwhF,gBAAgB7zD,KAAKxoB,GAAKA,EAAEhC,OAAS7I,EAAO6I,OACpDnD,KAAKwhF,gBAAgBv+E,KAAK3I,GAG5B0F,KAAK2hF,YAGP,oBAAoBrnF,GAClB,MAAMunF,EAA+B,kBAAXvnF,EAAsBA,EAASA,EAAO6I,KAChEnD,KAAKwhF,gBAAkBxhF,KAAKwhF,gBAAgBnpD,OAAOlzB,GAAKA,EAAEhC,OAAS0+E,GACnE7hF,KAAK2hF,YAGP,cAAcjsB,EAAM/pB,GACdA,IACF+pB,EAAO17D,OAAO4wB,OAAO+gB,EAAM,CACzB+pB,UAIJ11D,KAAKuhF,eAAet+E,KAAKyyD,GAEzB11D,KAAK2hF,YAGP,IAAIltD,EAAQ,IACV,MAAM,GACJy/B,EAAK,GAAE,GACPC,EAAK,GAAE,QACPK,EAAU,GAAE,OACZC,EAAS,GAAE,SACXipB,EAAW,GAAE,WACbC,EAAa,MAAM,mBACnBtiB,GAAqB,GACnB5mC,EAEEshC,EAAU/1D,KAAK8hF,eAAertD,EAAMshC,SAEpCgsB,EAAS/hF,KAAKgiF,SAAS9tB,GAEvB+tB,EAASjiF,KAAKgiF,SAAS7tB,GAEvB+tB,EAAensB,EAAQ/7C,IAAI7U,GAAKnF,KAAKgiF,SAAS78E,EAAEhC,OAAO6qB,OACvDm0D,EAAgBzE,EAAS1jE,IAAIpP,GAAK5K,KAAKgiF,SAASp3E,IAChDw3E,EAAapoF,OAAOiC,KAAKu4D,GAASxmC,OAClCq0D,EAAaroF,OAAOiC,KAAKw4D,GAAQzmC,OACjCs0D,EAAe,GACfC,EAAe,GAErB,IAAK,MAAMpmF,KAAOimF,EAChBE,EAAar/E,KAAKjD,KAAKgiF,SAAS7lF,IAChCmmF,EAAar/E,KAAKjD,KAAKgiF,SAASxtB,EAAQr4D,KAG1C,IAAK,MAAMA,KAAOkmF,EAChBE,EAAat/E,KAAKjD,KAAKgiF,SAAS7lF,IAChComF,EAAat/E,KAAKjD,KAAKgiF,SAASvtB,EAAOt4D,KAGzC,MAAMkgE,EAAO,GAAG0lB,KAAUE,KAAUK,EAAajhF,KAAK,QAAQ6gF,EAAa7gF,KAAK,QAAQkhF,EAAalhF,KAAK,QAAQ8gF,EAAc9gF,KAAK,QAAQrB,KAAK2hF,aAAahE,IAAatiB,EAAqB,IAAM,KAEvM,IAAKr7D,KAAKohF,cAAc/kB,GAAO,CAC7B,MAAMmmB,EAAYvnB,GAAgBj7D,KAAK9E,GAAI,CACzCg5D,KACAC,KACA4B,UACAtB,SACAD,UACA4G,cAAep7D,KAAKuhF,eACpBlmB,uBAEFr7D,KAAKohF,cAAc/kB,GAAQ,IAAI,GAAQr8D,KAAK9E,GAAI,CAC9CmhE,OACAnI,GAAIsuB,EAAUtuB,GACdC,GAAIquB,EAAUruB,GACdupB,WACAC,eAGF39E,KAAKqhF,aAAahlB,GAAQmmB,EAAUluB,aAAe,CAAClvD,OAEpDpF,KAAK4hF,WAAWvlB,GAAQ,EAI1B,OADAr8D,KAAK4hF,WAAWvlB,KACTr8D,KAAKohF,cAAc/kB,GAG5B,YAAYrmD,GACV,OAAOhW,KAAKqhF,aAAarrE,EAAQqmD,OAAS,KAG5C,QAAQrmD,GACN,MAAMqmD,EAAOrmD,EAAQqmD,KACrBr8D,KAAK4hF,WAAWvlB,KAEc,IAA1Br8D,KAAK4hF,WAAWvlB,KAClBr8D,KAAKohF,cAAc/kB,GAAMn3B,gBAElBllC,KAAKohF,cAAc/kB,UACnBr8D,KAAKqhF,aAAahlB,UAClBr8D,KAAK4hF,WAAWvlB,IAI3B,SAASlgE,GAKP,YAJ0BuD,IAAtBM,KAAKyhF,QAAQtlF,KACf6D,KAAKyhF,QAAQtlF,GAAO6D,KAAK0hF,gBAGpB1hF,KAAKyhF,QAAQtlF,GAGtB,eAAesmF,EAAa,IAC1B,MAAM1sB,EAAU,IAAI11D,MAAML,KAAKwhF,gBAAgBhhF,OAASiiF,EAAWjiF,QAC7D61D,EAAO,GACb,IAAI94B,EAAQ,EAEZ,IAAK,IAAIz1B,EAAI,EAAGwD,EAAMtL,KAAKwhF,gBAAgBhhF,OAAQsH,EAAIwD,IAAOxD,EAAG,CAC/D,MAAMxN,EAAS0F,KAAKwhF,gBAAgB15E,GAC9B3E,EAAO7I,EAAO6I,KACpB4yD,EAAQx4B,KAAWjjC,EACnB+7D,EAAKlzD,IAAQ,EAGf,IAAK,IAAI2E,EAAI,EAAGwD,EAAMm3E,EAAWjiF,OAAQsH,EAAIwD,IAAOxD,EAAG,CACrD,MAAMxN,EAASmoF,EAAW36E,GACpB3E,EAAO7I,EAAO6I,KAEfkzD,EAAKlzD,KACR4yD,EAAQx4B,KAAWjjC,EACnB+7D,EAAKlzD,IAAQ,GAKjB,OADA4yD,EAAQv1D,OAAS+8B,EACVw4B,GC/JX,MAAM2sB,GAAa,mrGAoJNC,GAAO,CAClBx/E,KAAM,OACN+wD,GAAIwuB,GACJvuB,GAAI,MCvJA,GAAK,wQACL,GAAK,wNACI,QACbhxD,KAAM,WACN+wD,GAAE,GACFC,GAAE,ICJJ,MAAMyuB,GAAmC5oF,OAAOiC,KAAKq0D,IAAmBt2C,IAAI7d,GAAO,+BAA+B0L,OAAO1L,EAAK,OAAO0L,OAAOyoD,GAAkBn0D,GAAM,MAAMkF,KAAK,IACzKwhF,GAAiC7oF,OAAOiC,KAAK40D,IAAiB72C,IAAI7d,GAAO,6BAA6B0L,OAAO1L,EAAK,OAAO0L,OAAOgpD,GAAgB10D,GAAM,MAAMkF,KAAK,IACjKyhF,GAAsB9oF,OAAOiC,KAAKg1D,IAAMj3C,IAAI7d,GAAO,kBAAkB0L,OAAO1L,EAAIoyB,cAAe,OAAO1mB,OAAOopD,GAAK90D,GAAM,MAAMkF,KAAK,IAC1H,u9MCQR,SAAS,KACd,IAAIiD,EAAM,IAAI,GAAoB,GASlC,OAPI,IAAuBC,eACzBD,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,GAGJA,EA0cF,SAAS,GAAcA,EAAKG,EAAGU,GACpC,IAAIC,EAAIX,EAAE,GACNY,EAAIZ,EAAE,GACNa,EAAIb,EAAE,GACNc,EAAId,EAAE,GAKV,OAJAH,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,GAAKG,EAAIH,EAAE,IAAMI,EAClDjB,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,GAAKG,EAAIH,EAAE,IAAMI,EAClDjB,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,IAAMG,EAAIH,EAAE,IAAMI,EACnDjB,EAAI,GAAKa,EAAE,GAAKC,EAAID,EAAE,GAAKE,EAAIF,EAAE,IAAMG,EAAIH,EAAE,IAAMI,EAC5CjB,GA4IY,WACnB,IAAIgD,EAAM,MADS,GCrnBrB,SAASy7E,GAAQt+E,EAAGC,GAClB,GAAID,IAAMC,EACR,OAAO,EAGT,GAAIrE,MAAM6P,QAAQzL,GAAI,CACpB,MAAM6G,EAAM7G,EAAEjE,OAEd,IAAKkE,GAAKA,EAAElE,SAAW8K,EACrB,OAAO,EAGT,IAAK,IAAIxD,EAAI,EAAGA,EAAIwD,EAAKxD,IACvB,GAAIrD,EAAEqD,KAAOpD,EAAEoD,GACb,OAAO,EAIX,OAAO,EAGT,OAAO,EAGM,SAASk7E,GAAQloD,GAC9B,IACImoD,EADAC,EAAa,GAEjB,OAAOpmF,IACL,IAAK,MAAMX,KAAOW,EAChB,IAAKimF,GAAQjmF,EAAKX,GAAM+mF,EAAW/mF,IAAO,CACxC8mF,EAAenoD,EAAQh+B,GACvBomF,EAAapmF,EACb,MAIJ,OAAOmmF,GChCX,MAAM,GAAc,CAAC,EAAG,EAAG,EAAG,GACxBE,GAAyB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACvEC,GAAkB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAChEC,GAA2B,CAAC,EAAG,EAAG,GAClCC,GAA4B,CAAC,EAAG,EAAG,GACnCC,GAA8BP,GAAQQ,IACrC,SAASC,GAAgBp9D,EAAUq9D,EAAkBpxB,EAAmBgxB,IAC7E,IACIK,EADAC,EAAyBtxB,EAEzBuxB,GAAa,EAQjB,OALEF,EADED,IAAqBpzB,GAAkBI,gBAAkBgzB,IAAqBpzB,GAAkBG,cAC/E6B,EAEAjsC,EAAS+rC,aAAe,CAAC/vD,KAAKmkD,OAAOngC,EAAS6jC,WAAY7nD,KAAKmkD,OAAOngC,EAAS0jC,UAAW,GAAK,KAG5G1jC,EAASy9D,gBACf,KAAKjzB,GAAgBC,aACf4yB,IAAqBpzB,GAAkBE,QAAUkzB,IAAqBpzB,GAAkBK,YAC1FgzB,EAAmB,CAAC,EAAG,EAAG,GAC1BE,GAAa,GAGf,MAEF,KAAKhzB,GAAgBG,yBACf0yB,IAAqBpzB,GAAkBE,OACzCozB,EAAyBD,EAChBD,IAAqBpzB,GAAkBK,YAChDizB,EAAyB,CAACvhF,KAAKmkD,OAAOngC,EAAS5Y,OAAO,IAAKpL,KAAKmkD,OAAOngC,EAAS5Y,OAAO,IAAK,GAC5Fk2E,EAAmBt9D,EAAS2oC,kBAAkB40B,GAC9CA,EAAuB,IAAMtxB,EAAiB,GAC9CsxB,EAAuB,IAAMtxB,EAAiB,GAC9CsxB,EAAuB,IAAMtxB,EAAiB,IAGhD,MAEF,KAAKzB,GAAgBliD,SACnBi1E,EAAyBv9D,EAASsoC,SAAS30C,IAAI3X,KAAKmkD,QACpD,MAEF,KAAKqK,GAAgBE,MACnB8yB,GAAa,EACbF,EAAmB,KACnB,MAEF,QACEE,GAAa,EAIjB,OADAD,EAAuB,GAAKA,EAAuB,IAAM,EAClD,CACLD,mBACAC,yBACAC,cAIJ,SAASE,GAAyB19D,EAAUq9D,EAAkBpxB,GAC5D,MAAM,qBACJU,EAAoB,iBACpBzG,GACElmC,EACJ,IAAI,WACFuoC,EAAU,qBACV5I,GACE3/B,EACA29D,EAAmB,GACnBC,EAAe,GACfC,EAAkB79D,EAASosC,eAC/B,MAAM,iBACJkxB,EAAgB,uBAChBC,EAAsB,WACtBC,GACEJ,GAAgBp9D,EAAUq9D,EAAkBpxB,GAYhD,OAVIuxB,IACFI,EAAe59D,EAAS0oC,gBAAgB40B,GAAoBC,GAC5DM,EAAkB,CAACA,EAAgB,GAAKD,EAAa,GAAIC,EAAgB,GAAKD,EAAa,GAAIC,EAAgB,GAAKD,EAAa,IACjIA,EAAa,GAAK,EAClBD,EAAmB,GAAmB,GAAIC,EAAcj+B,GACxD4I,EAAaoE,GAAwBpE,EACrC5I,EAAuB,GAAc,GAAIuG,EAAkBqC,GAC3D5I,EAAuB,GAAc,GAAIA,EAAsBm9B,KAG1D,CACLv0B,aACA5I,uBACAg+B,mBACAC,eACAC,kBACAN,yBACAD,oBAIG,SAASQ,IAAwB,SACtC99D,EAAQ,iBACR23C,EAAmB,EAAC,YACpBlL,EAAc,KAAI,iBAClB4wB,EAAmBpzB,GAAkBC,QAAO,iBAC5C+B,EAAgB,kBAChB8xB,GAAoB,GAClB,IACEV,IAAqBpzB,GAAkBC,UACzCmzB,EAAmBr9D,EAAS+rC,aAAe9B,GAAkBE,OAASF,GAAkBK,WAG1F,MAAM0D,EAAWkvB,GAA4B,CAC3Cl9D,WACA23C,mBACA0lB,mBACApxB,qBAIF,OAFA+B,EAASgwB,uBAAyBD,EAClC/vB,EAASiwB,qBAAuBxxB,GAAeswB,GACxC/uB,EAGT,SAASmvB,IAA0B,SACjCn9D,EAAQ,iBACR23C,EAAgB,iBAChB0lB,EAAgB,iBAChBpxB,IAEA,MAAM,iBACJ0xB,EAAgB,qBAChBh+B,EAAoB,aACpBi+B,EAAY,gBACZC,EAAe,uBACfN,EAAsB,iBACtBD,GACEI,GAAyB19D,EAAUq9D,EAAkBpxB,GACnD5D,EAAiBroC,EAAS4jC,oBAC1Bs6B,EAAe,CAACl+D,EAASyD,MAAQk0C,EAAkB33C,EAAS2D,OAASg0C,GACrElsD,EAAgBuU,EAASkmC,iBAAiBi4B,UAAU,CAAC,EAAG,GAAIn+D,EAASvU,cAAe,IAAI,IAAM,EAC9FuiD,EAAW,CACfowB,0BAA2Bf,EAC3BgB,wBAAyBr+D,EAASy9D,eAClCa,0BAA2Bf,EAC3BgB,sBAAuBX,EAAa5pF,MAAM,EAAG,GAC7CwqF,gBAAiBb,EACjBc,sBAAuB9lF,QAAQqnB,EAAS0+D,eACxCC,sBAAuBT,EACvBU,0BAA2BjnB,EAC3BknB,uBAAwBpzE,EACxBqzE,6BAA8Bz2B,EAAelE,cAC7C46B,iCAAkC12B,EAAelE,cACjD66B,kCAAmChC,GACnCiC,eAAgBj/D,EAASlU,MACzBozE,8BAA+Bv/B,EAC/Bw/B,wBAAyBtB,GAG3B,GAAIP,EAAkB,CACpB,MAAM8B,EAAyBp/D,EAAS4jC,kBAAkB05B,GAE1D,OAAQD,GACN,KAAKpzB,GAAkBG,cACrB4D,EAAS+wB,iCAAmCK,EAAuBj7B,cACnE6J,EAASgxB,kCAAoCI,EAAuBx6B,eACpE,MAEF,KAAKqF,GAAkBE,OACvB,KAAKF,GAAkBI,eAChBrqC,EAAS0+D,gBACZ1wB,EAAS8wB,6BAA+BM,EAAuBj7B,eAGjE6J,EAAS+wB,iCAAmCK,EAAuB/6B,eACnE2J,EAASgxB,kCAAoCI,EAAuBz6B,gBACpE,MAEF,KAAKsF,GAAkBK,UACrB0D,EAAS+wB,iCAAmC,CAAC,EAAG,EAAGK,EAAuBj7B,cAAc,IACxF6J,EAASgxB,kCAAoC,CAAC,EAAG,EAAGI,EAAuBx6B,eAAe,IAC1F,MAEF,QACE,OAIN,OAAOoJ,EC1LT,MAAMqxB,GAAyB,GAE/B,SAAS,GAAY/5C,EAAO+5C,IAC1B,OAAI/5C,EAAKtlB,SACA89D,GAAwBx4C,GAG1B,GAGM,QACbxoC,KAAM,UACNixD,aAAc,CAACuuB,GAAM,IACrBzuB,GAAI,GACJI,YAAW,ICZb,MAAMqxB,GAAkB,CAACl4B,IACnBm4B,GAAe,CAAC,kEAAmE,6EAA8E,oEAAqE,uEACrO,SAASC,GAAqB3qF,GACnC,MAAM4qF,EAAiB,GAAeC,yBAAyB7qF,GAE/D,IAAK,MAAM8qF,KAAgBL,GACzBG,EAAeG,iBAAiBD,GAGlC,IAAK,MAAME,KAAcN,GACvBE,EAAeK,cAAcD,GAG/B,OAAOJ,ECVT,MAAMM,GAAmB,yBACnBC,GAA0B,gCAC1BC,GAAkBtsF,OAAO2wC,KAAK,CAClC47C,aAAc,KACd9iC,gBAAiB,KACjB+iC,KAAM,KACNtrF,GAAI,KACJuzC,MAAO,KACPg4C,YAAa,KACbC,WAAY,KACZC,cAAe,KACfj8C,SAAU,KAEG,MAAM,GACnB,YAAYxvC,GAAI,KACdsrF,EAAI,MACJ/3C,EAAK,SACLpoB,EAAQ,SACRugE,GACE,IACF5mF,KAAK6mF,mBAAqB,GAC1B7mF,KAAK8mF,OAAS,GACd9mF,KAAKyjD,gBAAkB,IAAI,GAAgB,CACzCvoD,KACAqoD,SAAU,YAEZvjD,KAAKmrB,QAAU,IAAKm7D,GAClBC,aAAcvmF,KACd9E,KACAsrF,OACAV,eAAgB5qF,GAAM2qF,GAAqB3qF,GAC3CuzC,MAAOA,GAAS,IAAI,GAAM,CACxBtS,GAAI,YAEN9V,SAAUA,GAAY,IAAI,GAAS,CACjC8V,GAAI,6BAENyqD,SAAUA,GAAY,IAAIviD,EAC1Bof,gBAAiBzjD,KAAKyjD,iBAExBzjD,KAAK+mF,YAAc,KACnB/mF,KAAKgnF,aAAe,iBACpBhnF,KAAKinF,cAAe,EACpBjnF,KAAKknF,QAAS,EACdlnF,KAAKmnF,iBAAmBnnF,KAAKmnF,iBAAiB9qF,KAAK2D,MACnDhG,OAAO2wC,KAAK3qC,MAGd,WACEA,KAAKyjD,gBAAgB2jC,WAErB,IAAK,MAAMzT,KAAS3zE,KAAK8mF,OACvB9mF,KAAKqnF,eAAe1T,GAIxB,YAAYhoC,EAAO,CACjB27C,kBAAkB,IAElB,IAAIC,EAASvnF,KAAKgnF,aAEdr7C,EAAK27C,mBACPtnF,KAAKgnF,cAAe,GAGtB,IAAK,MAAMrT,KAAS3zE,KAAK8mF,OAAQ,CAC/B,MAAMU,EAAmB7T,EAAM8T,eAAe97C,GAC9C47C,EAASA,GAAUC,EAGrB,OAAOD,EAGT,cACE,OAAIvnF,KAAK+mF,aAAe/mF,KAAK+mF,cAAgB/mF,KAAK6mF,mBACzC,iBAGF7mF,KAAKinF,aAGd,eAAeS,GACb1nF,KAAKgnF,aAAehnF,KAAKgnF,cAAgBU,EAG3C,eAAeA,GACb1nF,KAAKinF,aAAejnF,KAAKinF,cAAgBS,EAG3C,WAAU,SACRC,EAAW,MACT,IACF,OAAOA,EAAW3nF,KAAK8mF,OAAOzuD,OAAOs7C,GAASgU,EAASh6D,KAAKi6D,GAAyC,IAA9BjU,EAAMx3C,GAAGt+B,QAAQ+pF,KAAmB5nF,KAAK8mF,OAGlH,SAASryD,GACH,UAAWA,IACbz0B,KAAKknF,OAASzyD,EAAM/Z,OAGlB,aAAc+Z,IAChBz0B,KAAKmrB,QAAQuf,SAAWjW,EAAMiW,UAG5B,WAAYjW,IACdz0B,KAAK+mF,YAActyD,EAAMqyD,QAGvB,YAAaryD,IACfz0B,KAAKmrB,QAAQuuB,QAAUjlB,EAAMilB,SAIjC,UAAUmuC,EAAWH,GACnB,GAAMtB,GAAkBpmF,KAAM0nF,EAAQG,GACtC7nF,KAAK6mF,mBAAqBgB,EAC1BA,EAAYv6C,GAAQu6C,EAAW7oF,SAE/B,IAAK,MAAM20E,KAASkU,EAClBlU,EAAMxoD,QAAUnrB,KAAKmrB,QAKvB,OAFAnrB,KAAK8nF,cAAc9nF,KAAK8mF,OAAQe,GAEzB7nF,KAGT,eACE,MAAM0nF,EAAS1nF,KAAK+nF,cAEhBL,IACF1nF,KAAKgoF,eAAe,oBAAoBngF,OAAO6/E,IAC/C1nF,KAAKioF,UAAUjoF,KAAK+mF,aAAe/mF,KAAK6mF,mBAAoBa,IAG9D1nF,KAAK+mF,YAAc,KAGrB,iBAAiB1gE,GAOf,OANA,GAAMggE,GAAyBrmF,KAAMqmB,GAEjCA,IACFrmB,KAAKmrB,QAAQ9E,SAAWA,GAGnBrmB,KAGT,aAAa41D,EAAOx7D,EAAOu5E,GACzBA,EAAMuU,WAAW9tF,EAAO,GAAGyN,OAAO+tD,EAAO,QAAQ/tD,OAAO8rE,IAG1D,cAAcwU,EAAWN,GACvB,MAAMO,EAAc,GAEpB,IAAK,MAAMC,KAAYF,EACjBC,EAAYC,EAASlsD,IACvB,EAAIrQ,KAAK,oCAAoCjkB,OAAOwgF,EAASlsD,IAA7D,GAEAisD,EAAYC,EAASlsD,IAAMksD,EAI/B,MAAMC,EAAkB,GAExBtoF,KAAKuoF,4BAA4BV,EAAWO,EAAaE,GAEzDtoF,KAAKwoF,mBAAmBJ,GAExB,IAAIL,GAAc,EAElB,IAAK,MAAMpU,KAAS2U,EAClB,GAAI3U,EAAM8U,uBAAwB,CAChCV,GAAc,EACd,MAIJ/nF,KAAKinF,aAAec,EACpB/nF,KAAK8mF,OAASwB,EAGhB,4BAA4BT,EAAWO,EAAaE,GAClD,IAAK,MAAMI,KAAYb,EAAW,CAChCa,EAASv9D,QAAUnrB,KAAKmrB,QACxB,MAAMk9D,EAAWD,EAAYM,EAASvsD,IAErB,OAAbksD,GACF,EAAIv8D,KAAK,oCAAoCjkB,OAAO6gF,EAASvsD,IAA7D,GAGFisD,EAAYM,EAASvsD,IAAM,KAC3B,IAAIwsD,EAAY,KAEhB,IACM3oF,KAAKknF,QAAUmB,IAAaK,GAC9BA,EAASE,gBAGNP,GAGHroF,KAAK6oF,oBAAoBR,EAAUK,GAEnC1oF,KAAK8oF,aAAaJ,IAJlB1oF,KAAK+oF,iBAAiBL,GAOxBJ,EAAgBrlF,KAAKylF,GACrBC,EAAYD,EAASM,aAAeN,EAASO,eAC7C,MAAOzpF,GACPQ,KAAKkpF,aAAa,WAAY1pF,EAAKkpF,GAGjCC,GACF3oF,KAAKuoF,4BAA4BI,EAAWP,EAAaE,IAK/D,mBAAmBF,GACjB,IAAK,MAAMR,KAAWQ,EAAa,CACjC,MAAMzU,EAAQyU,EAAYR,GAEtBjU,GACF3zE,KAAKqnF,eAAe1T,IAK1B,iBAAiBA,GACf,IACEA,EAAMwV,cAENxV,EAAMyV,UAAYvjD,EAAUG,YAC5B,MAAOxmC,GACPQ,KAAKkpF,aAAa,iBAAkB1pF,EAAKm0E,IAI7C,oBAAoB0U,EAAUK,GAC5BA,EAASW,eAAehB,GAExBK,EAASU,UAAYvjD,EAAUE,QAE3B2iD,IAAaL,IACfA,EAASe,UAAYvjD,EAAUI,aAInC,aAAa0tC,GACX,IACEA,EAAM2V,UACN,MAAO9pF,GACPQ,KAAKkpF,aAAa,SAAU1pF,EAAKm0E,IAIrC,eAAeA,GACb3zE,KAAKgnF,aAAehnF,KAAKgnF,cAAgB,aAAan/E,OAAO8rE,GAC7DA,EAAMyV,UAAYvjD,EAAUK,sBAE5B,IACEytC,EAAM4V,YAEN5V,EAAMyV,UAAYvjD,EAAUM,UAC5B,MAAO3mC,GACPQ,KAAKkpF,aAAa,eAAgB1pF,EAAKm0E,KCnRtC,SAAS6V,GAAU/kF,EAAGC,GAC3B,GAAID,IAAMC,EACR,OAAO,EAGT,IAAKD,IAAMC,EACT,OAAO,EAGT,IAAK,MAAMvI,KAAOsI,EAAG,CACnB,MAAMglF,EAAShlF,EAAEtI,GACXutF,EAAShlF,EAAEvI,GACXke,EAASovE,IAAWC,GAAUrpF,MAAM6P,QAAQu5E,IAAWppF,MAAM6P,QAAQw5E,IAAWF,GAAUC,EAAQC,GAExG,IAAKrvE,EACH,OAAO,EAIX,OAAO,EChBM,MAAM,GACnB,YAAYoa,EAAQ,IAClBz0B,KAAK2pF,MAAQ,GACb3pF,KAAK8pB,MAAQ,IACb9pB,KAAKgqB,OAAS,IACdhqB,KAAK4pF,UAAY,GACjB5pF,KAAK6pF,YAAc,GACnB7pF,KAAK4mF,SAAWnyD,EAAMmyD,SACtB5mF,KAAK8pF,WAAa,GAClB9pF,KAAK+pF,aAAe,GACpB/pF,KAAKgqF,aAAc,EACnBhqF,KAAKgnF,aAAe,iBACpBhnF,KAAKinF,cAAe,EACpBjnF,KAAKiqF,cAAgBx1D,EAAMy1D,aAC3BlqF,KAAKmqF,gBAAkB,CACrBC,kBAAmB31D,EAAM21D,kBACzBC,yBAA0B51D,EAAM41D,0BAElCrwF,OAAO2wC,KAAK3qC,MACZA,KAAK86C,SAASrmB,GAGhB,WACE,IAAK,MAAMt4B,KAAO6D,KAAK6pF,YACjB7pF,KAAK6pF,YAAY1tF,IACnB6D,KAAK6pF,YAAY1tF,GAAKirF,WAI1BpnF,KAAK6pF,YAAc,GAGrB,YAAYl+C,EAAO,CACjB27C,kBAAkB,IAElB,MAAMC,EAASvnF,KAAKgnF,aAMpB,OAJIr7C,EAAK27C,mBACPtnF,KAAKgnF,cAAe,GAGfO,EAGT,eAAeG,GACb1nF,KAAKinF,aAAejnF,KAAKinF,cAAgBS,EACzC1nF,KAAKgnF,aAAehnF,KAAKgnF,cAAgBU,EAG3C,mBACE,IAAK,MAAM4C,KAAUtqF,KAAK6pF,YAAa,CACrC,MAAMU,EAAavqF,KAAK6pF,YAAYS,GAEhCC,GACFA,EAAWC,oBAKjB,aAAaC,GACX,OAAIA,EACKzqF,KAAK8pF,WAAWzxD,OAAOhS,GAAYA,EAASqkE,cAAcD,IAG5DzqF,KAAK8pF,WAGd,WACE,MAAMa,EAAU,GAIhB,OAHA3qF,KAAK2pF,MAAMztF,QAAQ0uF,IACjBD,EAAQC,EAAKzuD,IAAMyuD,IAEdD,EAGT,QAAQE,GACN,MAA+B,kBAAjBA,EAA4B7qF,KAAK2pF,MAAMh8D,KAAKi9D,GAAQA,EAAKzuD,KAAO0uD,GAAgBA,EAGhG,aAAaP,GACX,MAAMM,EAAO5qF,KAAK8qF,QAAQR,GACpBV,EAAYgB,GAAQ5qF,KAAK4pF,UAAUgB,EAAKG,mBAAqB/qF,KAAK4pF,UACxE,OAAOgB,EAAOA,EAAKI,gBAAgBpB,GAAaA,EAGlD,YAAYU,GACV,OAAOtqF,KAAK+pF,aAAaO,GAG3B,UAAUl/B,EAAKzf,GACb,MAAMs/C,EAAYjrF,KAAKkrF,eACjB14B,EAAQ,CACZptD,EAAGgmD,EAAI,GACP/lD,EAAG+lD,EAAI,IAGT,IAAK,IAAItjD,EAAImjF,EAAUzqF,OAAS,EAAGsH,GAAK,IAAKA,EAAG,CAC9C,MAAMue,EAAW4kE,EAAUnjF,GAE3B,GAAIue,EAASqkE,cAAcl4B,GAAQ,CACjC,MAAMhsD,EAAI4kD,EAAI/wD,QAGd,OAFAmM,EAAE,IAAM6f,EAASjhB,EACjBoB,EAAE,IAAM6f,EAAShhB,EACVghB,EAAS4nC,UAAUznD,EAAGmlC,IAIjC,OAAO,KAGT,SAASlX,GACH,UAAWA,GACbz0B,KAAKmrF,UAAU12D,EAAMk1D,OAGnB,cAAel1D,GACjBz0B,KAAKorF,cAAc32D,EAAMm1D,YAGvB,UAAWn1D,GAAS,WAAYA,IAClCz0B,KAAKqrF,SAAS52D,EAAM3K,MAAO2K,EAAMzK,QAG9BhqB,KAAKgqF,aACRhqF,KAAKspF,UAIT,UACEtpF,KAAKgqF,aAAc,EAEfhqF,KAAKinF,eACPjnF,KAAKinF,cAAe,EAEpBjnF,KAAKsrF,qBAGHtrF,KAAKinF,eACPjnF,KAAKinF,cAAe,EAEpBjnF,KAAKsrF,qBAGPtrF,KAAKgqF,aAAc,EAGrB,SAASlgE,EAAOE,GACVF,IAAU9pB,KAAK8pB,OAASE,IAAWhqB,KAAKgqB,SAC1ChqB,KAAK8pB,MAAQA,EACb9pB,KAAKgqB,OAASA,EACdhqB,KAAKurF,eAAe,iBAIxB,UAAU5B,GACRA,EAAQr8C,GAAQq8C,EAAO3qF,SAEvB,MAAMwsF,EAAexrF,KAAKyrF,WAAW9B,EAAO3pF,KAAK2pF,OAE7C6B,GACFxrF,KAAKurF,eAAe,iBAGtBvrF,KAAK2pF,MAAQA,EAGf,cAAcC,GACZ,GAAIA,EAAW,CACb,MAAM8B,GAAoBlC,GAAUI,EAAW5pF,KAAK4pF,WAEhD8B,GACF1rF,KAAKurF,eAAe,qBAGtBvrF,KAAK4pF,UAAYA,OAEjB,EAAI99D,KAAK,4CAAT,GAIJ,mBAAmBw+D,EAAQrsD,GACzBA,EAAMqsD,OAASA,EAEXtqF,KAAKmqF,gBAAgBC,mBACvBpqF,KAAKmqF,gBAAgBC,kBAAkBnsD,GAI3C,kBAAkB2sD,EAAMn2D,GACtB,MAAMk3D,EAAal3D,EAAM31B,KACnByrF,EAAa,IAAIoB,EAAW,CAChC/E,SAAU5mF,KAAK4mF,SACfsD,aAAclqF,KAAKiqF,cACnBG,kBAAmBpqF,KAAK4rF,mBAAmBvvF,KAAK2D,KAAMy0B,EAAM0H,IAC5D0vD,cAAe7rF,KAAKmqF,gBAAgBE,yBACpCyB,aAAclC,GAAagB,EAAKmB,aAAanC,EAAW,CACtD9/D,MAAO8/D,EAAU9/D,MACjBE,OAAQ4/D,EAAU5/D,YAEjByK,IAEL,OAAO81D,EAGT,kBAAkBK,EAAMhB,EAAWvjE,EAAUkkE,GAC3C,IAAIyB,EAAkBpB,EAAKL,WAE3B,OAAIyB,GACFA,EAAkB,IAAKpC,KAClBgB,EAAKn2D,SACLu3D,EACH7vD,GAAIyuD,EAAKzuD,GACT/2B,EAAGihB,EAASjhB,EACZC,EAAGghB,EAAShhB,EACZykB,MAAOzD,EAASyD,MAChBE,OAAQ3D,EAAS2D,QAGfugE,EACFA,EAAWzvC,SAASkxC,GAEpBzB,EAAavqF,KAAKisF,kBAAkBrB,EAAMoB,GAGrCzB,GAGF,KAGT,oBACE,MAAM,MACJzgE,EAAK,OACLE,EAAM,MACN2/D,GACE3pF,KACEksF,EAAiBlsF,KAAK6pF,YAC5B7pF,KAAK8pF,WAAa,GAClB9pF,KAAK6pF,YAAc,GACnB,IAAIsC,GAAwB,EAE5B,IAAK,IAAIrkF,EAAI6hF,EAAMnpF,OAAQsH,KAAM,CAC/B,MAAM8iF,EAAOjB,EAAM7hF,GACb8hF,EAAY5pF,KAAKosF,aAAaxB,GAC9BvkE,EAAWukE,EAAKkB,aAAa,CACjChiE,QACAE,SACA4/D,cAEF,IAAIyC,EAAgBH,EAAetB,EAAKzuD,IAEpCyuD,EAAKL,aAAe8B,IACtBF,GAAwB,IAGrBA,GAA0BvB,EAAKL,aAAe8B,IACjDA,EAAcjF,WACdiF,EAAgB,MAGlBrsF,KAAK6pF,YAAYe,EAAKzuD,IAAMn8B,KAAKssF,kBAAkB1B,EAAMhB,EAAWvjE,EAAUgmE,GAE9ErsF,KAAK8pF,WAAWp9C,QAAQrmB,GAG1B,IAAK,MAAM8V,KAAM+vD,EACXA,EAAe/vD,KAAQn8B,KAAK6pF,YAAY1tD,IAC1C+vD,EAAe/vD,GAAIirD,WAIvBpnF,KAAKusF,oBAGP,oBACEvsF,KAAK+pF,aAAe,GAEpB/pF,KAAK8pF,WAAW5tF,QAAQmqB,IAClBA,EAAS8V,KACXn8B,KAAK+pF,aAAa1jE,EAAS8V,IAAMn8B,KAAK+pF,aAAa1jE,EAAS8V,KAAO9V,KAKzE,WAAWmmE,EAAUC,GACnB,OAAID,EAAShsF,SAAWisF,EAASjsF,QAI1BgsF,EAASzqC,KAAK,CAAC2qC,EAAG5kF,KAAO0kF,EAAS1kF,GAAGuS,OAAOoyE,EAAS3kF,MCpShE,MAAM6kF,GAA0B,0BACzB,SAASC,GAAc3vF,GAC5B,cAAeA,GACb,IAAK,SACH,MAAO,CACL0xD,SAAU1xD,EACV4vF,UAAU,GAGd,IAAK,SACH,MAAMtrC,EAAQtkD,EAAMskD,MAAMorC,IAE1B,GAAIprC,GAASA,EAAM/gD,QAAU,EAAG,CAC9B,MAAMqsF,EAAwB,MAAbtrC,EAAM,GACjBoN,EAAW/vD,WAAW2iD,EAAM,IAClC,MAAO,CACLoN,SAAUk+B,EAAWl+B,EAAW,IAAMA,EACtCk+B,YAIN,QACE,MAAM,IAAI96E,MAAM,mCAAmClK,OAAO5K,KAGzD,SAAS6vF,GAAYn+B,EAAUo+B,GACpC,OAAOp+B,EAASk+B,SAAWxqF,KAAKiX,MAAMq1C,EAASA,SAAWo+B,GAAUp+B,EAASA,SC1BhE,SAAS,GAAOp2C,EAAWC,GACxC,IAAKD,EACH,MAAM,IAAIxG,MAAMyG,GAAW,8BCEhB,MAAM,GACnB,YAAYic,EAAQ,IAClB,MAAM,GACJ0H,EAAK,KAAI,EACT/2B,EAAI,EAAC,EACLC,EAAI,EAAC,MACLykB,EAAQ,OAAM,OACdE,EAAS,OAAM,iBACfgjE,EAAgB,KAChBluF,EAAO,IACL21B,EACJ,IAAQu4D,GAAoBA,aAA4B,IACxDhtF,KAAKgtF,iBAAmBA,EACxBhtF,KAAKm8B,GAAKA,GAAMn8B,KAAKmb,YAAY02C,aAAe,OAChD7xD,KAAKlB,KAAOA,EACZkB,KAAKy0B,MAAQ,IAAKA,EAChB0H,GAAIn8B,KAAKm8B,IAGXn8B,KAAKitF,iBAAiB,CACpB7nF,IACAC,IACAykB,QACAE,WAGFhqB,KAAKqa,OAASra,KAAKqa,OAAOhe,KAAK2D,MAC/BhG,OAAO2wC,KAAK3qC,MAGd,OAAO4qF,GACL,GAAI5qF,OAAS4qF,EACX,OAAO,EAGT,GAAI5qF,KAAKgtF,iBACP,OAAOpC,EAAKoC,kBAAoBhtF,KAAKgtF,iBAAiB3yE,OAAOuwE,EAAKoC,kBAGpE,MAAME,EAAc1D,GAAUxpF,KAAKy0B,MAAOm2D,EAAKn2D,OAC/C,OAAOy4D,EAGT,cAAa,MACXpjE,EAAK,OACLE,EAAM,UACN4/D,IAEA,GAAI5pF,KAAKgtF,iBACP,OAAOhtF,KAAKgtF,iBAGdpD,EAAY5pF,KAAKgrF,gBAAgBpB,GACjC,MAAMuD,EAAqBntF,KAAKotF,cAAc,CAC5CtjE,QACAE,WAEF,OAAOhqB,KAAK+rF,aAAanC,EAAWuD,GAGtC,iBACE,cAAentF,KAAKy0B,MAAMm1D,WACxB,IAAK,SACH,OAAO5pF,KAAKy0B,MAAMm1D,UAEpB,IAAK,SACH,OAAO5pF,KAAKy0B,MAAMm1D,WAAa5pF,KAAKy0B,MAAMm1D,UAAUztD,GAEtD,QACE,OAAOn8B,KAAKm8B,IAIlB,gBAAgBytD,GACd,GAAI5pF,KAAKy0B,MAAMm1D,WAA6C,kBAAzB5pF,KAAKy0B,MAAMm1D,UAAwB,CACpE,IAAK5pF,KAAKy0B,MAAMm1D,UAAUztD,GACxB,OAAOn8B,KAAKy0B,MAAMm1D,UAGpB,MAAMyD,EAAe,IAAKzD,GAG1B,IAAK,MAAMztF,KAAO6D,KAAKy0B,MAAMm1D,UACf,OAARztF,IACFkxF,EAAalxF,GAAO6D,KAAKy0B,MAAMm1D,UAAUztF,IAI7C,OAAOkxF,EAGT,OAAOzD,EAGT,eAAc,MACZ9/D,EAAK,OACLE,IAEA,MAAO,CACL5kB,EAAG0nF,GAAY9sF,KAAKstF,GAAIxjE,GACxBzkB,EAAGynF,GAAY9sF,KAAKutF,GAAIvjE,GACxBF,MAAOgjE,GAAY9sF,KAAKwtF,OAAQ1jE,GAChCE,OAAQ8iE,GAAY9sF,KAAKytF,QAASzjE,IAItC,oBAAoB0jE,GAClB,IAAI/hD,EAAO3rC,KAAKy0B,MAAM81D,WAEtB,OAAK5+C,GAIQ,IAATA,EACK+hD,GAGW,oBAAT/hD,IACTA,EAAO,CACL7sC,KAAM6sC,IAIH,IAAK+hD,KACP/hD,IAdI,KAkBX,aAAai+C,EAAWuD,GACtB,MACEruF,KAAM6uF,GACJ3tF,KACJ,OAAO,IAAI2tF,EAAa,IAAK/D,KACxB5pF,KAAKy0B,SACL04D,IAIP,kBAAiB,EACf/nF,EAAC,EACDC,EAAC,MACDykB,EAAK,OACLE,IAEAhqB,KAAKstF,GAAKV,GAAcxnF,GACxBpF,KAAKutF,GAAKX,GAAcvnF,GACxBrF,KAAKwtF,OAASZ,GAAc9iE,GAC5B9pB,KAAKytF,QAAUb,GAAc5iE,IC3I1B,SAAS,KACd,IAAI1lB,EAAM,IAAI,GAAoB,GAOlC,OALI,IAAuBC,eACzBD,EAAI,GAAK,EACTA,EAAI,GAAK,GAGJA,EAiEF,SAAS,GAAIA,EAAKG,EAAGC,GAG1B,OAFAJ,EAAI,GAAKG,EAAE,GAAKC,EAAE,GAClBJ,EAAI,GAAKG,EAAE,GAAKC,EAAE,GACXJ,EAsMF,SAAS,GAAOA,EAAKG,GAG1B,OAFAH,EAAI,IAAMG,EAAE,GACZH,EAAI,IAAMG,EAAE,GACLH,GAiTY,WACnB,IAAIgD,EAAM,MADS,GC9kBrB,MAAM,GAAY,IACZ,GAAsB,OACtB,GAAqBjF,KAAKwP,GAAK,IAErC,SAAS24C,GAAcT,GACrB,MAAMC,EAAY3nD,KAAKqE,IAAIqjD,EAAW,IACtC,OAAO,GAAY,GAAsBC,EAG5B,MAAM,WAA4B,GAC/C,YAAYre,EAAO,IACjB,MAAM,SACJoe,EAAW,EAAC,UACZG,EAAY,EAAC,KACbf,EAAO,GAAE,MACTsC,EAAQ,EAAC,QACTC,EAAU,EAAC,gBACXK,EAAkB,GAAG,eACrBC,EAAiB,KAAI,aACrB4G,GAAe,EAAK,iBACpBrG,EAAgB,OAChBxnB,GAAS,EAAK,YACd6oD,EAAc,EAAC,iBACfC,GAAmB,GACjBliD,EACJ,IAAI,MACF7hB,EAAK,OACLE,EAAM,SACN2hC,EAAW,KACThgB,EACJ,MAAMx5B,EAAQ9P,KAAK+mD,IAAI,EAAGD,GAG1B,IAAIn8C,EAFJ8c,EAAQA,GAAS,EACjBE,EAASA,GAAU,EAEnB,IAAI8jE,EAAuB,KAEvBvhC,GACFZ,EAAWY,EAAiB,GAAK,EACjCv/C,EAAO8+C,GAAeH,KAElBhgB,EAAK3+B,MACPA,EAAO2+B,EAAK3+B,KACZ2+C,EAAWO,GAAel/C,IAE1BA,EAAO8+C,GAAeH,GAGxBmiC,EAAuBjiC,GAAwB,CAC7C/hC,QACAE,SACAyhC,QACAz+C,OACA++C,kBACAC,oBAIJ,IAAIgH,EAAuBxH,GAAc,CACvCxhC,SACAyhC,QACAC,UACAv5C,QACAw5C,aAGF,GAAIiiC,EAAa,CACf,MAAMG,GAAa,IAAI,SAAUpjF,UAAU,CAAC,IAAMijF,EAAa,EAAG,IAClE56B,EAAuB+6B,EAAWC,aAAah7B,GAGjD/iD,MAAM,IAAK07B,EACT7hB,QACAE,SACA4kC,WAAYoE,EACZ9I,YACAH,WACAZ,UACG2kC,EACH9gF,OACA8E,cAAe65C,IAEjB3rD,KAAK+pD,SAAWA,EAChB/pD,KAAKkqD,UAAYA,EACjBlqD,KAAKmpD,KAAOA,EACZnpD,KAAKyrD,MAAQA,EACbzrD,KAAK0rD,QAAUA,EACf1rD,KAAK2rD,SAAWA,EAChB3rD,KAAKgN,KAAOA,EACZhN,KAAK4yD,aAAeA,EACpB5yD,KAAKiuF,cAAgBlpD,EAAS,GAAK,KACnC/kC,KAAK+kF,cAAgB8I,EACrB7zF,OAAO4U,OAAO5O,MAGhB,mBACE,GAAIA,KAAKiuF,gBAAkBjuF,KAAKiuF,cAAcztF,OAAQ,CACpD,MAAMysD,EAASjtD,KAAKkuD,YACdggC,EAAY7rF,KAAK6lC,OAAO+kB,EAAO,GAAK,KAAO,KAC3CkhC,EAAY9rF,KAAKojD,MAAMwH,EAAO,GAAK,KAAO,KAEhD,IAAK,IAAI7nD,EAAI8oF,EAAW9oF,GAAK+oF,EAAW/oF,IAAK,CAC3C,MAAMgpF,EAAiBhpF,EAAI,IAAI,GAAoB,IAAKpF,KACtD4tF,YAAaxoF,IACVpF,KAELA,KAAKiuF,cAAchrF,KAAKmrF,IAI5B,OAAOpuF,KAAKiuF,cAGd,gBAAgB7iC,GACd,GAAIprD,KAAK+kF,cACP,OAAO90E,MAAM8+C,gBAAgB3D,GAG/B,MAAOiE,EAAGC,GAAKtvD,KAAKkyD,YAAY9G,GAC1BmE,GAAKnE,EAAI,IAAM,GAAKZ,GAAcY,EAAI,IAC5C,MAAO,CAACiE,EAAGC,EAAGC,GAGhB,kBAAkBnE,GAChB,GAAIprD,KAAK+kF,cACP,OAAO90E,MAAM++C,kBAAkB5D,GAGjC,MAAOiE,EAAGC,GAAKtvD,KAAKmyD,cAAc/G,GAC5BmE,GAAKnE,EAAI,IAAM,GAAKZ,GAAc8E,GACxC,MAAO,CAACD,EAAGC,EAAGC,GAGhB,kBAAkBpE,EAASC,GACzB,OAAOF,GAAkBC,EAASC,GAGpC,cAAcmH,EAAQC,GACpB,MAAM7C,EAAejD,GAAc8F,EAAOxyD,KAAK2sD,yBACzCiD,EAAa5vD,KAAKkyD,YAAYK,GAC9B5nD,EAAY,GAAS,GAAIilD,EAAY,GAAY,GAAID,IACrDE,EAAY,GAAS,GAAI7vD,KAAKyN,OAAQ9C,IACrCu/C,EAAWH,GAAY/pD,KAAKmyD,cAActC,GACjD,MAAO,CACL3F,YACAH,YAIJ,UAAU5xC,EAAU,IAClB,MAAM43C,EAAU7B,GAAUluD,KAAMmY,EAAQ7S,GAAK,GAC7C,MAAO,CAACjD,KAAKgF,IAAI0oD,EAAQ,GAAG,GAAIA,EAAQ,GAAG,GAAIA,EAAQ,GAAG,GAAIA,EAAQ,GAAG,IAAK1tD,KAAKgF,IAAI0oD,EAAQ,GAAG,GAAIA,EAAQ,GAAG,GAAIA,EAAQ,GAAG,GAAIA,EAAQ,GAAG,IAAK1tD,KAAKC,IAAIytD,EAAQ,GAAG,GAAIA,EAAQ,GAAG,GAAIA,EAAQ,GAAG,GAAIA,EAAQ,GAAG,IAAK1tD,KAAKC,IAAIytD,EAAQ,GAAG,GAAIA,EAAQ,GAAG,GAAIA,EAAQ,GAAG,GAAIA,EAAQ,GAAG,KAG7R,UAAU9C,EAAQ90C,EAAU,IAC1B,MAAM,MACJ2R,EAAK,OACLE,GACEhqB,MACE,UACJkqD,EAAS,SACTH,EAAQ,KACRZ,GACE6D,GAAU,CACZljC,QACAE,SACAijC,YACG90C,IAEL,OAAO,IAAI,GAAoB,CAC7B2R,QACAE,SACAkgC,YACAH,WACAZ,UCjLN,SAAS,MDsLT,GAAoB0I,YAAc,sBCpLlC,MAAM,GAAmB,CACvBxW,QAAS,GACTgzC,SAAU,GACVC,YAAa,GACbC,MAAO,IAEM,MAAMC,GACnB,YAAY5H,GACV5mF,KAAKyuF,aAAc,EACnBzuF,KAAK+hE,QAAU,KACf/hE,KAAK4mF,SAAWA,EAChB5mF,KAAK0uF,SAAW,GAGlB,iBACE,OAAO1uF,KAAKyuF,YAGd,MAAMh6D,GACJz0B,KAAKgwC,SACLhwC,KAAK0uF,SAAW,IAAK,MAChBj6D,GAELz0B,KAAKyuF,aAAc,EACnBzuF,KAAK0uF,SAASrzC,QAAQr7C,MAGxB,MACMA,KAAKyuF,cACPzuF,KAAK4mF,SAAS+H,cAAc3uF,KAAK+hE,SACjC/hE,KAAK+hE,QAAU,KACf/hE,KAAKyuF,aAAc,EACnBzuF,KAAK0uF,SAASH,MAAMvuF,OAIxB,SACMA,KAAKyuF,cACPzuF,KAAK0uF,SAASJ,YAAYtuF,MAC1BA,KAAK4mF,SAAS+H,cAAc3uF,KAAK+hE,SACjC/hE,KAAK+hE,QAAU,KACf/hE,KAAKyuF,aAAc,GAIvB,SACE,IAAKzuF,KAAKyuF,YACR,OAAO,EAGT,GAAqB,OAAjBzuF,KAAK+hE,QAAkB,CACzB,MAAM,SACJ6kB,EAAQ,SACR8H,GACE1uF,KACJA,KAAK+hE,QAAU6kB,EAASgI,WAAW,CACjCjqD,MAAOiiD,EAASphD,UAChBZ,SAAU8pD,EAAS9pD,WAcvB,OAVA5kC,KAAK++B,KAAO/+B,KAAK4mF,SAASphD,QAAQxlC,KAAK+hE,SAEvC/hE,KAAK6uF,YAEL7uF,KAAK0uF,SAASL,SAASruF,MAEnBA,KAAK4mF,SAASkI,WAAW9uF,KAAK+hE,UAChC/hE,KAAKoZ,OAGA,EAGT,cC1EF,MAAM,GAAO,OAEA21E,GAAoB,CAC/BC,MAAO,EACPC,YAAa,EACbC,OAAQ,GAEJ,GAAgB,CACpBC,iBAAkBlkF,GAAKA,EACvBmkF,uBAAwBL,GAAkBC,MAC1CK,kBAAmB,GACnBC,sBAAuB,GACvBC,gBAAiB,IAEJ,MAAM,GACnB,YAAYC,EAAiB/6D,EAAQ,IACnCz0B,KAAKwvF,gBAAkBA,EACvBxvF,KAAKy0B,MAAQ,IAAK,MACbA,GAELz0B,KAAKyvF,kBAAoB,KACzBzvF,KAAK0vF,WAAa,IAAIlB,GAAW/5D,EAAMmyD,UACvC5mF,KAAKoqF,kBAAoB31D,EAAM21D,mBAAqB,GACpDpqF,KAAK6rF,cAAgBp3D,EAAMo3D,eAAiB,GAC5C7rF,KAAK2vF,oBAAsB3vF,KAAK2vF,oBAAoBtzF,KAAK2D,MAG3D,WACEA,KAAK0vF,WAAW1/C,SAGlB,0BACE,OAAOhwC,KAAKyvF,kBAGd,uBAAuBG,GACrB,IAAIC,GAAsB,EAC1B,MAAMC,EAAe9vF,KAAKy0B,MAM1B,GALAm7D,EAAY,IAAK,MACZA,GAEL5vF,KAAKy0B,MAAQm7D,EAET5vF,KAAK+vF,4BAA4BD,EAAcF,GACjD,OAAOC,EAGT,GAAI7vF,KAAKgwF,qBAAqBJ,GAAY,CACxC,MAAM,aACJK,EAAY,SACZC,GACElwF,KAAK0vF,WAAWhB,SACdyB,EAAa,IAAKL,KAClBG,IAAiBlB,GAAkBE,YAAciB,EAAWlwF,KAAKyvF,mBAAqBK,GAG5F9vF,KAAKowF,mBAAmBD,EAAYP,GAEpCC,GAAsB,OAEtB7vF,KAAK0vF,WAAW1/C,SAGlB,OAAO6/C,EAGT,mBACE7vF,KAAK0vF,WAAW5mE,SAGlB,qBAAqB2L,GACnB,MAAM,mBACJ47D,EAAkB,uBAClBC,GACE77D,EACJ,OAAQ47D,EAAqB,GAA4B,SAAvBA,IAAkCrxF,QAAQsxF,GAG9E,gCAAgC77D,GAC9B,QAAIz0B,KAAK0vF,WAAWa,YACXvwF,KAAK0vF,WAAWhB,SAAS8B,aAAaC,cAAch8D,EAAOz0B,KAAKyvF,mBAM3E,4BAA4BK,EAAcF,GACxC,OAAI5vF,KAAK0vF,WAAWa,WACXvwF,KAAK0vF,WAAWhB,SAASuB,eAAiBlB,GAAkBG,QAAUlvF,KAAK0wF,gCAAgCd,IACzG5vF,KAAKgwF,qBAAqBJ,IAC5BA,EAAUU,uBAAuBG,cAAcX,EAAcF,GAMxE,mBAAmBO,EAAYD,GAC7B,MAAMS,EAAiB,IAAI3wF,KAAKwvF,gBAAgBW,GAC1CS,EAAoB,IAAI5wF,KAAKwvF,gBAAgBU,GAAUW,iBAAiBF,IACxE,uBACJL,GACEJ,EACEtrD,EAAW0rD,EAAuBQ,YAAcR,EAAuBQ,YAAYX,EAAYD,GAAYA,EAASG,mBAE1H,GAAiB,IAAbzrD,EACF,OAGF,MAAMmsD,EAAeb,EAASI,uBAAuBU,gBAAgBb,EAAYS,GACjF5wF,KAAKyvF,kBAAoB,GACzBzvF,KAAK4kC,SAAWA,EAChB5kC,KAAK0vF,WAAWv2E,MAAM,CACpByrB,WACAqsD,OAAQf,EAASf,iBACjBqB,aAAcN,EAASI,uBACvBL,aAAcC,EAASd,uBACvBe,WAAYY,EAAa53E,MACzB+2E,SAAUa,EAAa33E,IACvBiiC,QAAS60C,EAASb,kBAClBhB,SAAUruF,KAAK2vF,oBACfrB,YAAatuF,KAAKkxF,iBAAiBhB,EAASZ,uBAC5Cf,MAAOvuF,KAAKkxF,iBAAiBhB,EAASX,mBAExCvvF,KAAK6rF,cAAc,CACjBsF,cAAc,IAEhBnxF,KAAKwqF,mBAGP,iBAAiB95D,GACf,OAAOg/D,IACL1vF,KAAKyvF,kBAAoB,KACzBzvF,KAAK6rF,cAAc,CACjBsF,cAAc,EACdC,WAAW,EACXC,WAAW,EACXC,YAAY,IAEd5gE,EAASg/D,IAIb,oBAAoBA,GAClB,MAAM,KACJ3wD,EACA2vD,UAAU,aACR8B,EAAY,WACZL,EAAU,SACVD,EAAQ,SACRtrD,EAAQ,OACRqsD,IAEAvB,EACEzkF,EAAIgmF,EAAOlyD,EAAO6F,GAClBve,EAAWmqE,EAAae,iBAAiBpB,EAAYD,EAAUjlF,GACrEjL,KAAKyvF,kBAAoB,IAAIzvF,KAAKwvF,gBAAgB,IAAKxvF,KAAKy0B,SACvDpO,IACFmrE,mBACHxxF,KAAKoqF,kBAAkB,CACrBR,UAAW5pF,KAAKyvF,kBAChBgC,aAAczxF,KAAKy0B,SChKV,MAAM,GACnB,YAAYkX,EAAO,IACbtrC,MAAM6P,QAAQy7B,KAChBA,EAAO,CACL+lD,QAAS/lD,EACTgmD,QAAShmD,EACTimD,SAAUjmD,IAId,MAAM,QACJ+lD,EAAO,QACPC,EAAO,SACPC,GACEjmD,EACJ3rC,KAAK6xF,gBAAkBH,EACvB1xF,KAAK8xF,gBAAkBH,EACvB3xF,KAAK+xF,eAAiBH,EAGxB,cAAc9B,EAAcF,GAC1B,IAAK,MAAMzzF,KAAO6D,KAAK6xF,iBAAmB73F,OAAOiC,KAAK2zF,GACpD,KAAMzzF,KAAO2zF,MAAmB3zF,KAAOyzF,KAAe,gBAAOE,EAAa3zF,GAAMyzF,EAAUzzF,IACxF,OAAO,EAIX,OAAO,EAGT,gBAAgBg0F,EAAYD,GAC1B,IAAIjoF,EAEJ,GAAIjI,KAAK8xF,gBAAiB,CACxB,MAAME,EAAsB,GACtBpB,EAAoB,GAE1B,IAAK,MAAMz0F,KAAO6D,KAAK8xF,gBACrBE,EAAoB71F,GAAOg0F,EAAWh0F,GACtCy0F,EAAkBz0F,GAAO+zF,EAAS/zF,GAGpC8L,EAAS,CACPkR,MAAO64E,EACP54E,IAAKw3E,QAGP3oF,EAAS,CACPkR,MAAOg3E,EACP/2E,IAAK82E,GAQT,OAJAlwF,KAAKiyF,oBAAoBhqF,EAAOkR,OAEhCnZ,KAAKiyF,oBAAoBhqF,EAAOmR,KAEzBnR,EAGT,iBAAiBkoF,EAAYD,EAAUjlF,GACrC,OAAOilF,EAGT,YAAYC,EAAYD,GACtB,OAAOA,EAASG,mBAGlB,oBAAoB57D,GACbz0B,KAAK+xF,gBAIV/xF,KAAK+xF,eAAe71F,QAAQ43D,IAC1B,MAAM72D,EAAQw3B,EAAMq/B,GACpB,GAAOt5C,OAAOC,SAASxd,IAAUoD,MAAM6P,QAAQjT,GAAQ,GAAG4K,OAAOisD,EAAU,mCC3EjF,MAAM,GAAgB,CAAC,YAAa,WAAY,OAAQ,UAAW,SAC7Do+B,GAAyB,CAAC,YAAa,WAAY,QAC1C,MAAM,WAA2B,GAC9C,YAAYvmD,EAAO,IACjB,MAAMwmD,EAAkB9xF,MAAM6P,QAAQy7B,GAAQA,EAAOA,EAAKwmD,gBAC1DliF,MAAMkiF,GAAmB,CACvBT,QAAS,GACTC,QAAS,GACTC,SAAUM,KAEZlyF,KAAK2rC,KAAOA,EAGd,gBAAgBwkD,EAAYD,GAC1B,MAAMjoF,EAASgI,MAAM+gF,gBAAgBb,EAAYD,IAC3C,aACJpE,EAAY,OACZsG,GACEpyF,KAAK2rC,KAET,GAAImgD,GAAgBsG,EAAQ,CAC1B,MAAMC,EAAgBvG,EAAaqE,GAC7BmC,EAAcxG,EAAaoE,GAC3BqC,EAAiBF,EAAcpkC,UAAUmkC,GAC/CnqF,EAAOkR,MAAMi5E,OAASA,EACtBp4F,OAAO4wB,OAAO3iB,EAAOmR,IAAK,CACxBg5E,OAAQE,EAAY7kC,QAAQ8kC,GAC5BA,iBACAzoE,MAAOomE,EAASpmE,MAChBE,OAAQkmE,EAASlmE,SAIrB,OAAO/hB,EAGT,iBAAiBkoF,EAAYD,EAAUjlF,GACrC,MAAMwkF,EAAoB,GAE1B,IAAK,MAAMtzF,KAAO6D,KAAK8xF,gBACrBrC,EAAkBtzF,GAAO,gBAAKg0F,EAAWh0F,IAAQ,EAAG+zF,EAAS/zF,IAAQ,EAAG8O,GAG1E,GAAIilF,EAASqC,eAAgB,CAC3B,MAAMlsE,EAAWrmB,KAAK2rC,KAAKmgD,aAAa,IAAKoE,KACxCT,IAELz1F,OAAO4wB,OAAO6kE,EAAmBppE,EAASmsE,cAActC,EAASqC,eAAgB,gBAAKpC,EAAWiC,OAAQlC,EAASkC,OAAQnnF,KAG5H,OAAOwkF,GClDX,MAAMgD,GAAsB,CAC1BpC,mBAAoB,GAEhBqC,GAA0B,CAC9BrC,mBAAoB,IACpBlB,iBAAkBlkF,GAAKA,EACvBmkF,uBAAwBL,GAAkBC,OAEtC2D,GAAkB,IAElBC,GAAiB3nF,GAAK,GAAK,EAAIA,IAAM,EAAIA,GAEzC4nF,GAAc,CAClBC,MAAO,CAAC,SACRC,IAAK,CAAC,WAAY,UAAW,UAC7BC,MAAO,CAAC,aAAc,YAAa,YACnCC,WAAY,CAAC,cAAe,aAAc,aAC1CC,WAAY,CAAC,aACbC,SAAU,CAAC,YAEE,MAAM,GACnB,YAAY3D,EAAiBr3E,EAAU,IACrCnY,KAAKwvF,gBAAkBA,EACvBxvF,KAAKozF,gBAAkB,KACvBpzF,KAAKqzF,qBAAuB,KAC5BrzF,KAAKkqF,aAAe,KACpBlqF,KAAKszF,kBAAoB,IAAI,GAAkB9D,EAAiB,IAAKr3E,EACnEiyE,kBAAmBpqF,KAAKuzF,cAAcl3F,KAAK2D,MAC3C6rF,cAAe7rF,KAAKwzF,qBAAqBn3F,KAAK2D,QAEhD,MAAMyzF,EAAwBzzF,KAAKyzF,sBACnCzzF,KAAK0zF,YAAcD,GAAyB,IAAKf,GAC/CpC,uBAAwB,IAAI,GAAmB,CAC7C6B,gBAAiBsB,KAGrBzzF,KAAK2zF,QAAU,KACf3zF,KAAK4zF,kBAAoB,CACvBC,YAAY,GAEd7zF,KAAK8zF,cAAgB,GACrB9zF,KAAKoqF,kBAAoB,KACzBpqF,KAAK6rF,cAAgB,KACrB7rF,KAAK+zF,YAAc/zF,KAAK+zF,YAAY13F,KAAK2D,MACzCA,KAAK86C,SAAS3iC,GAGhB,4BACE,OAAO,KAGT,WAAW67E,GACTh0F,KAAKi0F,aAAaj0F,KAAK8zF,eAAe,GACtC9zF,KAAKi0F,aAAaD,GAAc,GAChCh0F,KAAK8zF,cAAgBE,EACrBh0F,KAAK86C,SAAS96C,KAAKqzF,sBAGrB,WACE,IAAK,MAAMa,KAAal0F,KAAK2zF,QACvB3zF,KAAK2zF,QAAQO,IACfl0F,KAAKkqF,aAAavoD,IAAIuyD,EAAWl0F,KAAK+zF,aAI1C/zF,KAAKszF,kBAAkBlM,WAGzB,YAAYnpD,GACV,MAAM,gBACJuxD,GACExvF,KACJA,KAAKozF,gBAAkB,IAAI5D,EAAgB,CACzC1D,aAAc9rF,KAAK8rF,gBAChB9rF,KAAKqzF,wBACLrzF,KAAKo2C,SAEV,MAAM+9C,EAAoBn0F,KAAKo0F,mBAE/B,OAAQn2D,EAAMn/B,MACZ,IAAK,WACH,OAAOq1F,GAA4Bn0F,KAAKq0F,YAAYp2D,GAEtD,IAAK,UACH,OAAOj+B,KAAKs0F,OAAOr2D,GAErB,IAAK,SACH,OAAOj+B,KAAKu0F,UAAUt2D,GAExB,IAAK,aACH,OAAOk2D,GAA4Bn0F,KAAKw0F,cAAcv2D,GAExD,IAAK,YACH,OAAOj+B,KAAKy0F,SAASx2D,GAEvB,IAAK,WACH,OAAOj+B,KAAK00F,YAAYz2D,GAE1B,IAAK,cACH,OAAOk2D,GAA4Bn0F,KAAK20F,kBAAkB12D,GAE5D,IAAK,aACH,OAAOj+B,KAAK40F,aAAa32D,GAE3B,IAAK,YACH,OAAOj+B,KAAK60F,gBAAgB52D,GAE9B,IAAK,YACH,OAAOj+B,KAAK80F,aAAa72D,GAE3B,IAAK,QACH,OAAOj+B,KAAK+0F,SAAS92D,GAEvB,IAAK,UACH,OAAOj+B,KAAKg1F,WAAW/2D,GAEzB,QACE,OAAO,GAIb,UAAUA,GACR,MAAM,EACJ74B,EAAC,EACDC,GACErF,KAAKqzF,sBACH,aACJ7gE,GACEyL,EACJ,MAAO,CAACzL,EAAaptB,EAAIA,EAAGotB,EAAantB,EAAIA,GAG/C,gBAAgBqqD,EAAKzxB,GACnB,MAAM,MACJnU,EAAK,OACLE,GACEhqB,KAAKqzF,qBAET,GAAIp1D,GAASA,EAAMg3D,QACjB,OAAO,EAGT,MAAMC,EAASxlC,EAAI,IAAM,GAAKA,EAAI,IAAM5lC,GAAS4lC,EAAI,IAAM,GAAKA,EAAI,IAAM1lC,EAM1E,OAJIkrE,GAAUj3D,GACZA,EAAMk3D,kBAGDD,EAGT,qBAAqBj3D,GACnB,MAAM,SACJrK,GACEqK,EACJ,OAAOj/B,QAAQ40B,EAASwhE,SAAWxhE,EAASyhE,QAAUzhE,EAAS0hE,SAAW1hE,EAAS2hE,UAGrF,aACE,OAAOv1F,KAAK4zF,kBAAkBC,WAGhC,YAAY3oE,GACV,MAAMsqE,EAAQ/+E,WAAW,KACnBzW,KAAKo0F,qBAAuBoB,IAC9Bx1F,KAAKo0F,mBAAqB,OAE3BlpE,GACHlrB,KAAKo0F,mBAAqBoB,EAG5B,SAAS/gE,GACH,sBAAuBA,IACzBz0B,KAAKoqF,kBAAoB31D,EAAM21D,mBAG7B,kBAAmB31D,IACrBz0B,KAAK6rF,cAAgBp3D,EAAMo3D,eAGzB,iBAAkBp3D,IACpBz0B,KAAK8rF,aAAer3D,EAAMq3D,cAGxB,aAAcr3D,IAChBz0B,KAAKy1F,SAAWhhE,EAAMghE,UAGxBz1F,KAAKqzF,qBAAuB5+D,EAExB,iBAAkBA,GAASz0B,KAAKkqF,eAAiBz1D,EAAMy1D,eACzDlqF,KAAKkqF,aAAez1D,EAAMy1D,aAC1BlqF,KAAK2zF,QAAU,GACf3zF,KAAKi0F,aAAaj0F,KAAK8zF,eAAe,IAGlC,2BAA4Br/D,IAChCA,EAAM67D,uBAAyBtwF,KAAK01F,sBAAsBpF,wBAG5DtwF,KAAKszF,kBAAkBqC,uBAAuBlhE,GAC9C,IAAI,QACFmhE,GACEnhE,GAEY,IAAZmhE,IACFA,EAAUjD,IAGZ3yF,KAAK41F,QAAUA,EACf,MAAM,WACJC,GAAa,EAAI,QACjBC,GAAU,EAAI,WACdC,GAAa,EAAI,gBACjBC,GAAkB,EAAI,UACtBC,GAAY,EAAI,YAChBC,GAAc,EAAK,SACnBC,GAAW,GACT1hE,EACE2hE,EAAgBp3F,QAAQgB,KAAKoqF,mBACnCpqF,KAAKi0F,aAAapB,GAAYC,MAAOsD,GAAiBP,GACtD71F,KAAKi0F,aAAapB,GAAYE,IAAKqD,IAAkBN,GAAWC,IAChE/1F,KAAKi0F,aAAapB,GAAYG,MAAOoD,IAAkBH,GAAaC,IACpEl2F,KAAKi0F,aAAapB,GAAYI,WAAYmD,GAAiBF,GAC3Dl2F,KAAKi0F,aAAapB,GAAYK,WAAYkD,GAAiBJ,GAC3Dh2F,KAAKi0F,aAAapB,GAAYM,SAAUiD,GAAiBD,GACzDn2F,KAAK61F,WAAaA,EAClB71F,KAAK81F,QAAUA,EACf91F,KAAK+1F,WAAaA,EAClB/1F,KAAKg2F,gBAAkBA,EACvBh2F,KAAKi2F,UAAYA,EACjBj2F,KAAKk2F,YAAcA,EACnBl2F,KAAKm2F,SAAWA,EAGlB,mBACEn2F,KAAKszF,kBAAkB9I,mBAGzB,aAAa6L,EAAYz1F,GACnBZ,KAAKkqF,cACPmM,EAAWn6F,QAAQg4F,IACbl0F,KAAK2zF,QAAQO,KAAetzF,IAC9BZ,KAAK2zF,QAAQO,GAAatzF,EAEtBA,EACFZ,KAAKkqF,aAAazoD,GAAGyyD,EAAWl0F,KAAK+zF,aAErC/zF,KAAKkqF,aAAavoD,IAAIuyD,EAAWl0F,KAAK+zF,gBAOhD,eAAeuC,EAAoBC,EAAa,GAAIC,EAAmB,IACrE,MAAM5M,EAAY,IAAK0M,EAAmB9E,sBACrC+E,GAEC5+D,EAAU33B,KAAKozF,kBAAoBkD,EAKzC,GAJAt2F,KAAKo2C,OAASkgD,EAAmBG,WAEjCz2F,KAAKwzF,qBAAqBgD,GAEtB7+D,EAAS,CACX,MAAM85D,EAAezxF,KAAKozF,gBAAkBpzF,KAAKozF,gBAAgB5B,mBAAqB,KAElFxxF,KAAKoqF,mBACPpqF,KAAKoqF,kBAAkB,CACrBR,YACA4M,iBAAkBx2F,KAAK4zF,kBACvBnC,kBAMR,cAAcpnB,GACRrqE,KAAKoqF,oBACP/f,EAAOmsB,iBAAmBx2F,KAAK4zF,kBAC/B5zF,KAAKoqF,kBAAkB/f,IAI3B,qBAAqBqsB,GACnB18F,OAAO4wB,OAAO5qB,KAAK4zF,kBAAmB8C,GAElC12F,KAAK6rF,eACP7rF,KAAK6rF,cAAc7rF,KAAK4zF,mBAI5B,YAAY31D,GACV,MAAMyxB,EAAM1vD,KAAKyyB,UAAUwL,GAE3B,IAAKj+B,KAAK22F,gBAAgBjnC,EAAKzxB,GAC7B,OAAO,EAGT,IAAI24D,EAAgB52F,KAAK62F,qBAAqB54D,IAAUA,EAAM64D,aAE1D92F,KAAK+2F,WAA+B,QAAlB/2F,KAAKy1F,YACzBmB,GAAiBA,GAGnB,MAAMN,EAAqBt2F,KAAKozF,gBAAgBwD,EAAgB,WAAa,eAAe,CAC1FlnC,QAMF,OAJA1vD,KAAKg3F,SAAWJ,EAChB52F,KAAKi3F,eAAeX,EAAoB7D,GAAqB,CAC3DoB,YAAY,KAEP,EAGT,OAAO51D,GACL,QAAKj+B,KAAK6zF,eAIH7zF,KAAKg3F,SAAWh3F,KAAKk3F,WAAWj5D,GAASj+B,KAAKm3F,aAAal5D,IAGpE,UAAUA,GACR,QAAKj+B,KAAK6zF,eAIH7zF,KAAKg3F,SAAWh3F,KAAKo3F,cAAcn5D,GAASj+B,KAAKq3F,gBAAgBp5D,IAG1E,WAAWA,GACT,IAAKj+B,KAAK81F,QACR,OAAO,EAGT,MAAMpmC,EAAM1vD,KAAKyyB,UAAUwL,GACrBq4D,EAAqBt2F,KAAKozF,gBAAgBkE,IAAI,CAClD5nC,QAMF,OAJA1vD,KAAKi3F,eAAeX,EAAoB7D,GAAqB,CAC3DoB,YAAY,EACZxC,WAAW,KAEN,EAGT,cAAcpzD,GACZ,MAAM,QACJ23D,GACE51F,KAEJ,GAAIA,KAAK81F,SAAWF,GAAW33D,EAAMlK,SAAU,CAC7C,MAAM27B,EAAM1vD,KAAKyyB,UAAUwL,GACrBs5D,EAAS,CAAC7nC,EAAI,GAAKzxB,EAAMjK,UAAY4hE,EAAU,EAAGlmC,EAAI,GAAKzxB,EAAMhK,UAAY2hE,EAAU,GACvFU,EAAqBt2F,KAAKozF,gBAAgBkE,IAAI,CAClD5nC,IAAK6nC,IACJC,SACHx3F,KAAKi3F,eAAeX,EAAoB,IAAKt2F,KAAK01F,sBAChDrF,mBAAoBuF,EACpBzG,iBAAkByD,IACjB,CACDiB,YAAY,EACZxC,WAAW,QAER,CACL,MAAMiF,EAAqBt2F,KAAKozF,gBAAgBoE,SAChDx3F,KAAKi3F,eAAeX,EAAoB,KAAM,CAC5CzC,YAAY,EACZxC,WAAW,IAIf,OAAO,EAGT,aAAapzD,GACX,IAAKj+B,KAAK+1F,WACR,OAAO,EAGT,MAAMrmC,EAAM1vD,KAAKyyB,UAAUwL,GACrBq4D,EAAqBt2F,KAAKozF,gBAAgBvoF,OAAO,CACrD6kD,QAMF,OAJA1vD,KAAKi3F,eAAeX,EAAoB7D,GAAqB,CAC3DoB,YAAY,EACZvC,YAAY,KAEP,EAGT,gBAAgBrzD,GACd,MAAM,QACJ23D,GACE51F,KAEJ,GAAIA,KAAK+1F,YAAcH,GAAW33D,EAAMlK,SAAU,CAChD,MAAM27B,EAAM1vD,KAAKyyB,UAAUwL,GACrBs5D,EAAS,CAAC7nC,EAAI,GAAKzxB,EAAMjK,UAAY4hE,EAAU,EAAGlmC,EAAI,GAAKzxB,EAAMhK,UAAY2hE,EAAU,GACvFU,EAAqBt2F,KAAKozF,gBAAgBvoF,OAAO,CACrD6kD,IAAK6nC,IACJE,YACHz3F,KAAKi3F,eAAeX,EAAoB,IAAKt2F,KAAK01F,sBAChDrF,mBAAoBuF,EACpBzG,iBAAkByD,IACjB,CACDiB,YAAY,EACZvC,YAAY,QAET,CACL,MAAMgF,EAAqBt2F,KAAKozF,gBAAgBqE,YAChDz3F,KAAKi3F,eAAeX,EAAoB,KAAM,CAC5CzC,YAAY,EACZvC,YAAY,IAIhB,OAAO,EAGT,SAASrzD,GACP,IAAKj+B,KAAK61F,WACR,OAAO,EAGT53D,EAAM5C,iBACN,MAAMq0B,EAAM1vD,KAAKyyB,UAAUwL,GAE3B,IAAKj+B,KAAK22F,gBAAgBjnC,EAAKzxB,GAC7B,OAAO,EAGT,MAAM,MACJy5D,EAAQ,IAAI,OACZC,GAAS,GACP33F,KAAK61F,YACH,MACJxpD,GACEpO,EACJ,IAAI9rB,EAAQ,GAAK,EAAI9P,KAAKwnD,KAAKxnD,KAAKqM,IAAI29B,EAAQqrD,KAE5CrrD,EAAQ,GAAe,IAAVl6B,IACfA,EAAQ,EAAIA,GAGd,MAAMmkF,EAAqBt2F,KAAKozF,gBAAgBjqC,KAAK,CACnDuG,MACAv9C,UAUF,OARAnS,KAAKi3F,eAAeX,EAAoB,IAAKt2F,KAAK01F,oBAAoB,CAClEtD,OAAQ1iC,IAEV2gC,mBAAoBsH,EAAS,IAAM,GAClC,CACDvG,WAAW,EACXC,WAAW,KAEN,EAGT,kBAAkBpzD,GAChB,MAAMyxB,EAAM1vD,KAAKyyB,UAAUwL,GAE3B,IAAKj+B,KAAK22F,gBAAgBjnC,EAAKzxB,GAC7B,OAAO,EAGT,MAAMq4D,EAAqBt2F,KAAKozF,gBAAgBwE,YAAY,CAC1DloC,QAKF,OAHA1vD,KAAKi3F,eAAeX,EAAoB7D,GAAqB,CAC3DoB,YAAY,KAEP,EAGT,aAAa51D,GACX,IAAKj+B,KAAKk2F,YACR,OAAO,EAGT,IAAKl2F,KAAK6zF,aACR,OAAO,EAGT,MAAMnkC,EAAM1vD,KAAKyyB,UAAUwL,GAC3ByxB,EAAI,IAAMzxB,EAAM/K,OAChB,MAAMojE,EAAqBt2F,KAAKozF,gBAAgBvoF,OAAO,CACrD6kD,QAMF,OAJA1vD,KAAKi3F,eAAeX,EAAoB7D,GAAqB,CAC3DoB,YAAY,EACZvC,YAAY,KAEP,EAGT,gBAAgBrzD,GACd,IAAKj+B,KAAK6zF,aACR,OAAO,EAGT,MAAM,QACJ+B,GACE51F,KAEJ,GAAIA,KAAKk2F,aAAeN,GAAW33D,EAAMhK,UAAW,CAClD,MAAMy7B,EAAM1vD,KAAKyyB,UAAUwL,GACrBs5D,EAAS,CAAC7nC,EAAI,GAAIA,EAAI,IAAMzxB,EAAMhK,UAAY2hE,EAAU,GACxDU,EAAqBt2F,KAAKozF,gBAAgBvoF,OAAO,CACrD6kD,IAAK6nC,IAEPv3F,KAAKi3F,eAAeX,EAAoB,IAAKt2F,KAAK01F,sBAChDrF,mBAAoBuF,EACpBzG,iBAAkByD,IACjB,CACDiB,YAAY,EACZvC,YAAY,IAEdtxF,KAAK63F,YAAYjC,OACZ,CACL,MAAMU,EAAqBt2F,KAAKozF,gBAAgBqE,YAChDz3F,KAAKi3F,eAAeX,EAAoB,KAAM,CAC5CzC,YAAY,EACZvC,YAAY,IAIhB,OAAO,EAGT,cAAcrzD,GACZ,MAAMyxB,EAAM1vD,KAAKyyB,UAAUwL,GAE3B,IAAKj+B,KAAK22F,gBAAgBjnC,EAAKzxB,GAC7B,OAAO,EAGT,MAAMq4D,EAAqBt2F,KAAKozF,gBAAgB0E,UAAU,CACxDpoC,QACCkoC,YAAY,CACbloC,QAOF,OALA1vD,KAAK+3F,oBAAsB95D,EAAMzK,SACjCxzB,KAAKg4F,gBAAkB/5D,EACvBj+B,KAAKi3F,eAAeX,EAAoB7D,GAAqB,CAC3DoB,YAAY,KAEP,EAGT,SAAS51D,GACP,IAAKj+B,KAAKi2F,YAAcj2F,KAAKk2F,YAC3B,OAAO,EAGT,IAAKl2F,KAAK6zF,aACR,OAAO,EAGT,IAAIyC,EAAqBt2F,KAAKozF,gBAE9B,GAAIpzF,KAAKi2F,UAAW,CAClB,MAAM,MACJ9jF,GACE8rB,EACEyxB,EAAM1vD,KAAKyyB,UAAUwL,GAC3Bq4D,EAAqBA,EAAmBntC,KAAK,CAC3CuG,MACAv9C,UAIJ,GAAInS,KAAKk2F,YAAa,CACpB,MAAM,SACJ1iE,GACEyK,EACJq4D,EAAqBA,EAAmBzrF,OAAO,CAC7CotF,YAAaj4F,KAAK+3F,oBAAsBvkE,IAW5C,OAPAxzB,KAAKi3F,eAAeX,EAAoB7D,GAAqB,CAC3DoB,YAAY,EACZxC,UAAWrxF,KAAKi2F,UAChB7E,UAAWpxF,KAAKi2F,UAChB3E,WAAYtxF,KAAKk2F,cAEnBl2F,KAAKg4F,gBAAkB/5D,GAChB,EAGT,YAAYA,GACV,IAAKj+B,KAAK6zF,aACR,OAAO,EAGT,MAAM,QACJ+B,EAAO,gBACPoC,GACEh4F,KAEJ,GAAIA,KAAKi2F,WAAaL,GAAWoC,GAAmB/5D,EAAM9rB,QAAU6lF,EAAgB7lF,MAAO,CACzF,MAAMu9C,EAAM1vD,KAAKyyB,UAAUwL,GAC3B,IAAIq4D,EAAqBt2F,KAAKozF,gBAAgBqE,YAC9C,MAAMnyF,EAAIjD,KAAKilD,KAAKrpB,EAAM9rB,OAEpB+lF,GAAa5yF,EAAIjD,KAAKilD,KAAK0wC,EAAgB7lF,SAAW8rB,EAAMtL,UAAYqlE,EAAgBrlE,WAExFwlE,EAAW91F,KAAK+mD,IAAI,EAAG9jD,EAAI4yF,EAAYtC,EAAU,GACvDU,EAAqBA,EAAmBntC,KAAK,CAC3CuG,MACAv9C,MAAOgmF,IACNC,UACHp4F,KAAKi3F,eAAeX,EAAoB,IAAKt2F,KAAK01F,oBAAoB,CAClEtD,OAAQ1iC,IAEV2gC,mBAAoBuF,EACpBzG,iBAAkByD,IACjB,CACDiB,YAAY,EACZxC,UAAWrxF,KAAKi2F,UAChB7E,UAAWpxF,KAAKi2F,UAChB3E,YAAY,IAEdtxF,KAAK63F,YAAYjC,OACZ,CACL,MAAMU,EAAqBt2F,KAAKozF,gBAAgBgF,UAAUX,YAC1Dz3F,KAAKi3F,eAAeX,EAAoB,KAAM,CAC5CzC,YAAY,EACZxC,WAAW,EACXD,WAAW,EACXE,YAAY,IAMhB,OAFAtxF,KAAK+3F,oBAAsB,KAC3B/3F,KAAKg4F,gBAAkB,MAChB,EAGT,aAAa/5D,GACX,IAAKj+B,KAAKg2F,gBACR,OAAO,EAGT,MAAMtmC,EAAM1vD,KAAKyyB,UAAUwL,GAE3B,IAAKj+B,KAAK22F,gBAAgBjnC,EAAKzxB,GAC7B,OAAO,EAGT,MAAMo6D,EAAYr4F,KAAK62F,qBAAqB54D,GACtCq4D,EAAqBt2F,KAAKozF,gBAAgBjqC,KAAK,CACnDuG,MACAv9C,MAAOkmF,EAAY,GAAM,IAS3B,OAPAr4F,KAAKi3F,eAAeX,EAAoBt2F,KAAK01F,oBAAoB,CAC/DtD,OAAQ1iC,IACN,CACF0hC,WAAW,EACXC,WAAW,IAEbrxF,KAAK63F,YAAY,MACV,EAGT,WAAW55D,GACT,IAAKj+B,KAAKm2F,SACR,OAAO,EAGT,MAAMmC,EAAUt4F,KAAK62F,qBAAqB54D,IACpC,UACJs6D,EAAS,UACTC,EAAS,aACTC,EAAY,aACZC,GACE14F,KAAKm2F,UACH,gBACJ/C,GACEpzF,KACJ,IAAIs2F,EACJ,MAAME,EAAmB,GAEzB,OAAQv4D,EAAMrK,SAASnP,MACrB,IAAK,QACH6xE,EAAqBgC,EAAUlF,EAAgBuF,QAAQJ,GAAWI,QAAQJ,GAAanF,EAAgBuF,QAAQJ,GAC/G/B,EAAiBpF,WAAY,EAC7B,MAEF,IAAK,QACHkF,EAAqBgC,EAAUlF,EAAgBwF,OAAOL,GAAWK,OAAOL,GAAanF,EAAgBwF,OAAOL,GAC5G/B,EAAiBpF,WAAY,EAC7B,MAEF,IAAK,YACCkH,GACFhC,EAAqBlD,EAAgByF,WAAWJ,GAChDjC,EAAiBlF,YAAa,IAE9BgF,EAAqBlD,EAAgB0F,SAASN,GAC9ChC,EAAiBnF,WAAY,GAG/B,MAEF,IAAK,aACCiH,GACFhC,EAAqBlD,EAAgB2F,YAAYN,GACjDjC,EAAiBlF,YAAa,IAE9BgF,EAAqBlD,EAAgB4F,UAAUR,GAC/ChC,EAAiBnF,WAAY,GAG/B,MAEF,IAAK,UACCiH,GACFhC,EAAqBlD,EAAgB6F,SAASP,GAC9ClC,EAAiBlF,YAAa,IAE9BgF,EAAqBlD,EAAgB8F,OAAOV,GAC5ChC,EAAiBnF,WAAY,GAG/B,MAEF,IAAK,YACCiH,GACFhC,EAAqBlD,EAAgB+F,WAAWT,GAChDlC,EAAiBlF,YAAa,IAE9BgF,EAAqBlD,EAAgBgG,SAASZ,GAC9ChC,EAAiBnF,WAAY,GAG/B,MAEF,QACE,OAAO,EAIX,OADArxF,KAAKi3F,eAAeX,EAAoBt2F,KAAK01F,sBAAuBc,IAC7D,EAGT,oBAAoB7qD,GAClB,MAAM,YACJ+nD,GACE1zF,KAEJ,OAAK0zF,EAIE/nD,EAAO,IAAK+nD,EACjBpD,uBAAwB,IAAI,GAAmB,IAAK3kD,EAClDwmD,gBAAiBnyF,KAAKyzF,sBACtB3H,aAAc9rF,KAAKozF,gBAAgBtH,gBAEnC4H,EARKjB,ICrvBE,MAAM4G,GACnB,YAAY1tD,GACV3rC,KAAKs5F,eAAiBt5F,KAAKu5F,kBAAkB5tD,GAG/C,mBACE,OAAO3rC,KAAKs5F,eAGd,WACE,OAAOt5F,KAAKo2C,OAGd,iBAAiBwzC,GACf,OAAO5pF,KAAKs5F,eAGd,kBAAkB7kE,GAChB,OAAOA,GCbX,MAAM+kE,GAAwB,EACxBC,GAAc,IACdC,GAAgB,CACpBjuC,MAAO,EACPC,QAAS,EACTC,SAAU,IACVuE,QAAS,EACT/C,QAAS,GACTwsC,SAAU,EACVC,SAAU,IAEL,MAAM,WAAiBP,GAC5B,aAAY,aACVvN,EAAY,MACZhiE,EAAK,OACLE,EAAM,SACN+/B,EAAQ,UACRG,EAAS,KACTf,EAAI,QACJuC,EAAUguC,GAAchuC,QAAO,MAC/BD,EAAQiuC,GAAcjuC,MAAK,SAC3BE,EAAW+tC,GAAc/tC,SAAQ,QACjCwB,EAAUusC,GAAcvsC,QAAO,QAC/B+C,EAAUwpC,GAAcxpC,QAAO,SAC/B0pC,EAAWF,GAAcE,SAAQ,SACjCD,EAAWD,GAAcC,SAAQ,eACjCE,EAAc,gBACdC,EAAe,eACfC,EAAc,aACdC,EAAY,WACZC,EAAU,UACVC,EAAS,UACTC,GACE,IACF,GAAO3/E,OAAOC,SAASyvC,IACvB,GAAO1vC,OAAOC,SAASsvC,IACvB,GAAOvvC,OAAOC,SAAS0uC,IACvBl5C,MAAM,CACJ6Z,QACAE,SACA+/B,WACAG,YACAf,OACAuC,UACAD,QACAE,WACAwB,UACA+C,UACA0pC,WACAD,WACAQ,cAEFn6F,KAAKo2C,OAAS,CACZyjD,iBACAC,kBACAC,iBACAC,eACAC,aACAC,aAEFl6F,KAAK8rF,aAAeA,EAGtB,UAAS,IACPp8B,IAEA,OAAO1vD,KAAKo6F,iBAAiB,CAC3BP,eAAgB75F,KAAKq6F,WAAW3qC,KAIpC,KAAI,IACFA,EAAG,SACH4qC,IAEA,MAAMT,EAAiB75F,KAAKo2C,OAAOyjD,gBAAkB75F,KAAKq6F,WAAWC,GAErE,IAAKT,EACH,OAAO75F,KAGT,MAAMqmB,EAAWrmB,KAAK8rF,aAAa9rF,KAAKs5F,gBAClCx0B,EAAWz+C,EAASmsE,cAAcqH,EAAgBnqC,GACxD,OAAO1vD,KAAKo6F,iBAAiBt1B,GAG/B,SACE,OAAO9kE,KAAKo6F,iBAAiB,CAC3BP,eAAgB,OAIpB,aAAY,IACVnqC,IAEA,OAAO1vD,KAAKo6F,iBAAiB,CAC3BL,eAAgBrqC,EAChBsqC,aAAch6F,KAAKs5F,eAAe5tC,QAClCuuC,WAAYj6F,KAAKs5F,eAAe7tC,QAIpC,QAAO,IACLiE,EAAG,YACHuoC,EAAc,EAAC,YACfsC,EAAc,IAEd,MAAM,eACJR,EAAc,aACdC,EAAY,WACZC,GACEj6F,KAAKo2C,OAET,IAAK2jD,IAAmBv/E,OAAOC,SAASu/E,KAAkBx/E,OAAOC,SAASw/E,GACxE,OAAOj6F,KAGT,IAAIw6F,EAcJ,OAXEA,EADE9qC,EACY1vD,KAAKy6F,6BAA6B,IAAKz6F,KAAK06F,mBAAmBhrC,EAAKqqC,GAChFC,eACAC,eAGY,CACZvuC,QAASsuC,EAAe/B,EACxBxsC,MAAOwuC,EAAaM,GAIjBv6F,KAAKo6F,iBAAiBI,GAG/B,YACE,OAAOx6F,KAAKo6F,iBAAiB,CAC3BJ,aAAc,KACdC,WAAY,OAIhB,WAAU,IACRvqC,IAEA,OAAO1vD,KAAKo6F,iBAAiB,CAC3BN,gBAAiB95F,KAAKq6F,WAAW3qC,GACjCwqC,UAAWl6F,KAAKs5F,eAAenwC,OAInC,MAAK,IACHuG,EAAG,SACH4qC,EAAQ,MACRnoF,IAEA,IAAI,UACF+nF,EAAS,gBACTJ,GACE95F,KAAKo2C,OAEJ57B,OAAOC,SAASy/E,KACnBA,EAAYl6F,KAAKs5F,eAAenwC,KAChC2wC,EAAkB95F,KAAKq6F,WAAWC,IAAat6F,KAAKq6F,WAAW3qC,IAGjE,MAAMvG,EAAOnpD,KAAK26F,kBAAkB,CAClCxoF,QACA+nF,cAGIU,EAAiB56F,KAAK8rF,aAAa,IAAK9rF,KAAKs5F,eACjDnwC,SAEF,OAAOnpD,KAAKo6F,iBAAiB,CAC3BjxC,UACGyxC,EAAepI,cAAcsH,EAAiBpqC,KAIrD,UACE,OAAO1vD,KAAKo6F,iBAAiB,CAC3BN,gBAAiB,KACjBI,UAAW,OAIf,OAAOxC,EAAQ,GACb,OAAO13F,KAAK66F,gBAAgBnD,GAG9B,QAAQA,EAAQ,GACd,OAAO13F,KAAK66F,gBAAgB,EAAInD,GAGlC,SAASA,EAAQ,KACf,OAAO13F,KAAK86F,eAAe,CAACpD,EAAO,IAGrC,UAAUA,EAAQ,KAChB,OAAO13F,KAAK86F,eAAe,EAAEpD,EAAO,IAGtC,OAAOA,EAAQ,KACb,OAAO13F,KAAK86F,eAAe,CAAC,EAAGpD,IAGjC,SAASA,EAAQ,KACf,OAAO13F,KAAK86F,eAAe,CAAC,GAAIpD,IAGlC,WAAWA,EAAQ,IACjB,OAAO13F,KAAKo6F,iBAAiB,CAC3B1uC,QAAS1rD,KAAKs5F,eAAe5tC,QAAUgsC,IAI3C,YAAYA,EAAQ,IAClB,OAAO13F,KAAKo6F,iBAAiB,CAC3B1uC,QAAS1rD,KAAKs5F,eAAe5tC,QAAUgsC,IAI3C,SAASA,EAAQ,IACf,OAAO13F,KAAKo6F,iBAAiB,CAC3B3uC,MAAOzrD,KAAKs5F,eAAe7tC,MAAQisC,IAIvC,WAAWA,EAAQ,IACjB,OAAO13F,KAAKo6F,iBAAiB,CAC3B3uC,MAAOzrD,KAAKs5F,eAAe7tC,MAAQisC,IAIvC,iBAAiB9N,GACf,MAAMmR,EAAYnR,EAAU4H,mBACtB/8D,EAAQ,IAAKz0B,KAAKs5F,iBAElB,QACJ5tC,EAAO,UACPxB,GACEz1B,EAUJ,OARIpyB,KAAKqM,IAAIg9C,EAAUqvC,EAAUrvC,SAAW,MAC1Cj3B,EAAMi3B,QAAUA,EAAU,EAAIA,EAAU,IAAMA,EAAU,KAGtDrpD,KAAKqM,IAAIw7C,EAAY6wC,EAAU7wC,WAAa,MAC9Cz1B,EAAMy1B,UAAYA,EAAY,EAAIA,EAAY,IAAMA,EAAY,KAG3Dz1B,EAGT,gBAAgBtiB,GACd,MAAM,MACJ2X,EAAK,OACLE,GACEhqB,KAAKs5F,eACT,OAAOt5F,KAAKmpD,KAAK,CACfuG,IAAK,CAAC5lC,EAAQ,EAAGE,EAAS,GAC1B7X,UAIJ,eAAelR,GACb,MAAM,MACJ6oB,EAAK,OACLE,GACEhqB,KAAKs5F,eACT,OAAOt5F,KAAKs3F,IAAI,CACdgD,SAAU,CAACxwE,EAAQ,EAAGE,EAAS,GAC/B0lC,IAAK,CAAC5lC,EAAQ,EAAI7oB,EAAO,GAAI+oB,EAAS,EAAI/oB,EAAO,MAIrD,iBAAiB6jE,GACf,OAAO,IAAI9kE,KAAKmb,YAAY,CAC1B2wE,aAAc9rF,KAAK8rF,gBAChB9rF,KAAKs5F,kBACLt5F,KAAKo2C,UACL0uB,IAIP,kBAAkBrwC,GAChB,MAAM,QACJ04B,EAAO,QACP+C,EAAO,KACP/G,GACE10B,EACJA,EAAM00B,KAAO,gBAAMA,EAAM+G,EAAS/C,GAClC,MAAM,SACJysC,EAAQ,SACRD,EAAQ,MACRluC,GACEh3B,EACJA,EAAMg3B,MAAQ,gBAAMA,EAAOkuC,EAAUC,GACrC,MAAM,UACJO,GAAY,GACV1lE,EAMJ,OAJI0lE,GACFngG,OAAO4wB,OAAO6J,EAAOw7B,GAAuBx7B,IAGvCA,EAGT,WAAWi7B,GACT,MAAMrpC,EAAWrmB,KAAK8rF,aAAa9rF,KAAKs5F,gBACxC,OAAO5pC,GAAOrpC,EAAS4nC,UAAUyB,GAGnC,mBAAkB,MAChBv9C,EAAK,UACL+nF,IAEA,MAAM,QACJ/sC,EAAO,QACP+C,GACElwD,KAAKs5F,eACHnwC,EAAO+wC,EAAY73F,KAAKilD,KAAKn1C,GACnC,OAAO,gBAAMg3C,EAAM+G,EAAS/C,GAG9B,8BAA6B,YAC3B6tC,EAAW,YACXC,EAAW,aACXjB,EAAY,WACZC,IAEAgB,EAAc,gBAAMA,GAAc,EAAG,GACrC,MAAM,SACJtB,EAAQ,SACRC,GACE55F,KAAKs5F,eACH5tC,EAAUsuC,EAAe,IAAMgB,EACrC,IAAIvvC,EAAQwuC,EAQZ,OANIgB,EAAc,EAChBxvC,EAAQwuC,EAAagB,GAAerB,EAAWK,GACtCgB,EAAc,IACvBxvC,EAAQwuC,EAAagB,GAAetB,EAAWM,IAG1C,CACLxuC,QACAC,WAIJ,mBAAmBgE,EAAK4qC,GACtB,MAAMpnE,EAASw8B,EAAI,GAAK4qC,EAAS,GAC3BnnE,EAASu8B,EAAI,GAAK4qC,EAAS,GAC3BY,EAAUxrC,EAAI,GACdyrC,EAASb,EAAS,IAClB,MACJxwE,EAAK,OACLE,GACEhqB,KAAKs5F,eACH0B,EAAc9nE,EAASpJ,EAC7B,IAAImxE,EAAc,EAalB,OAXI9nE,EAAS,EACP9wB,KAAKqM,IAAIsb,EAASmxE,GAAU3B,KAC9ByB,EAAc9nE,GAAUgoE,EAASnxE,GAAUyvE,IAEpCtmE,EAAS,GACdgoE,EAAS3B,KACXyB,EAAc,EAAIC,EAAUC,GAIhCF,EAAc54F,KAAKgF,IAAI,EAAGhF,KAAKC,KAAK,EAAG24F,IAChC,CACLD,cACAC,gBAKS,MAAM,WAAsB,GACzC,YAAYxmE,GACVA,EAAMghE,SAAWhhE,EAAMghE,UAAY,MACnCxlF,MAAM,GAAUwkB,GAGlB,SAASA,GACP,MAAM2mE,EAAWp7F,KAAKqzF,qBACtBpjF,MAAM6qC,SAASrmB,GACf,MAAM4mE,GAAoBD,GAAYA,EAASpxE,SAAWyK,EAAMzK,OAE5DqxE,GACFr7F,KAAKi3F,eAAe,IAAIj3F,KAAKwvF,gBAAgB,CAC3C1D,aAAc9rF,KAAK8rF,gBAChB9rF,KAAKqzF,wBACLrzF,KAAKo2C,UAKd,4BACE,MAAO,CAAC,YAAa,WAAY,OAAQ,UAAW,UCrZzC,MAAM,WAAgB,GACnC,YAAY3hB,GACVxkB,MAAM,IAAKwkB,EACT31B,KAAM,KAIV,iBACE,OAAOkB,KAAKs7F,oBAAoB,CAC9Bx8F,KAAM,MAKZ,GAAQ+yD,YAAc,UCjBtB,MAAM0pC,GAAsB,CAAC,IAAK,IAAK,KACjCC,GAA0B,EAChC,IAAIC,GAAU,EACP,MAAMC,GACX,YAAYjnE,EAAQ,IAClB,MAAM,MACJ4U,EAAQkyD,IACN9mE,GACE,UACJknE,EAAYH,IACV/mE,EACJz0B,KAAKm8B,GAAK1H,EAAM0H,IAAM,WAAWt0B,OAAO4zF,MACxCz7F,KAAKqpC,MAAQA,EACbrpC,KAAK27F,UAAYA,EACjB37F,KAAKlB,KAAO,WCbhB,MAAM,GAAsB,CAAC,IAAK,IAAK,KACjC,GAA0B,EAC1B88F,GAA0B,CAAC,EAAK,GAAM,GAC5C,IAAI,GAAU,EACP,MAAM,GACX,YAAYnnE,EAAQ,IAClB,MAAM,MACJ4U,EAAQ,IACN5U,GACE,UACJknE,EAAY,IACVlnE,GACE,UACJP,EAAY0nE,IACVnnE,GACE,QACJonE,GAAU,GACRpnE,EACJz0B,KAAKm8B,GAAK1H,EAAM0H,IAAM,eAAet0B,OAAO,MAC5C7H,KAAKqpC,MAAQA,EACbrpC,KAAK27F,UAAYA,EACjB37F,KAAKlB,KAAO,cACZkB,KAAKk0B,UAAY,IAAI,QAAQA,GAAWimE,YAAYrsE,UACpD9tB,KAAK87F,OAASD,EAGhB,oBACE,OAAO77F,MC5BI,MAAM+7F,GACnB,YAAYtnE,EAAQ,IAClB,MAAM,GACJ0H,EAAK,UACH1H,EACJz0B,KAAKm8B,GAAKA,EACVn8B,KAAKy0B,MAAQ,IAAKA,GAIpB,aAEA,uBAEA,YCda,MAAMunE,GACnB,YAAY9gG,EAAIu5B,EAAQ,IACtB,MAAM,GACJ0H,EAAK,QACH1H,EACJz0B,KAAKm8B,GAAKA,EACVn8B,KAAK9E,GAAKA,EACV8E,KAAKy0B,MAAQ,IAAKA,GAIpB,SAASA,GACPz6B,OAAO4wB,OAAO5qB,KAAKy0B,MAAOA,GAG5B,UAEA,YCfa,MAAM,WAAmBunE,GACtC,OAAOvnE,GACL,MAAMv5B,EAAK8E,KAAK9E,GAIhB,OAHA,gBAAcA,EAAI,CAChBorB,YAAamO,EAAMj5B,SAEdwE,KAAKi8F,YAAYxnE,GAG1B,YAAYA,GACV,MAAM,UACJw2D,EAAS,MACTtB,EAAK,iBACLuS,EAAgB,YAChBC,GAAc,GACZ1nE,EACJA,EAAM2nE,KAAO3nE,EAAM2nE,MAAQ,UAC3B,MAAMlhG,EAAK8E,KAAK9E,GAEZihG,GACFE,GAAcnhG,GAGhB,MAAMohG,EAAc,GAEpB,IAAK,MAAMC,KAAwBtR,EAAW,CAC5C,MAAM5kE,EAAWk2E,EAAqBl2E,UAAYk2E,EAC5C3R,EAAOjB,GAASA,EAAMtjE,EAAS8V,IACrC+/D,EAAiB71E,GAEjB,MAAMm2E,EAAkBx8F,KAAKy8F,oBAAoBp2E,EAAUoO,GAE3DA,EAAMm2D,KAAOA,EACb,MAAM8R,EAAer2E,EAASq2E,cAAgB,CAACr2E,GAE/C,IAAK,MAAMs2E,KAAeD,EAAc,CACtCjoE,EAAMpO,SAAWs2E,EAEjB,MAAMluD,EAAQzuC,KAAK48F,sBAAsB1hG,EAAIu5B,EAAO+nE,GAEpDF,EAAYr5F,KAAKwrC,IAIrB,OAAO6tD,EAGT,oBAAoBj2E,GAAU,OAC5BygE,EAAM,KACNsV,EAAI,YACJS,EAAW,QACXC,EAAO,iBACPC,IAEA,MAAMP,EAAkB,GAClBQ,EAAgBC,KAChBC,EAAc,CAClB72E,WACA82E,UAAWf,EAAK7qD,WAAW,WAC3B6rD,WAAYhB,GAERiB,EAAmB,GAEzB,IAAK,IAAIC,EAAa,EAAGA,EAAaxW,EAAOtmF,OAAQ88F,IAAc,CACjE,MAAM3pB,EAAQmT,EAAOwW,GAEfC,EAAkBv9F,KAAKw9F,iBAAiB7pB,EAAOupB,EAAaL,EAAaQ,GAEzEI,EAAmBT,EAAcrpB,EAAO4pB,GACxCG,EAAa,CACjBH,kBACAE,oBAGEF,IACFG,EAAWX,iBAAmB/8F,KAAK29F,qBAAqBhqB,EAAOmpB,EAASV,EAAMW,GAC9EW,EAAWE,gBAAkB59F,KAAK69F,mBAAmBlqB,EAAO2pB,EAAYj3E,IAG1Em2E,EAAgBc,GAAcI,EAGhC,OAAOlB,EAGT,sBAAsBthG,GAAI,OACxB4rF,EAAM,KACNsV,EAAI,SACJ/1E,EAAQ,KACRukE,GACC4R,GACD,MAAMsB,EAAaC,GAAc7iG,EAAI,CACnCmrB,aAGF,GAAIukE,GAAQA,EAAKn2D,MAAMg5C,MAAO,CAC5B,MAAMuwB,GAAiC,IAArBpT,EAAKn2D,MAAMg5C,MAAiB,CAC5CpkC,OAAO,EACP3f,OAAO,GACLkhE,EAAKn2D,MAAMg5C,MACf,gBAAevyE,EAAI,CACjBksB,aAAa,EACblB,QAAS43E,GACR,IAAMrwB,GAAMvyE,EAAI8iG,IAGrB,MAAMC,EAAe,CACnBC,WAAYpX,EAAOtmF,OACnB29F,aAAc,EACdC,eAAgB,EAChBC,cAAe,GAEjB,gBAAcnjG,EAAI,CAChBmrB,SAAUy3E,IAGZ,IAAK,IAAIR,EAAa,EAAGA,EAAaxW,EAAOtmF,OAAQ88F,IAAc,CACjE,MAAM3pB,EAAQmT,EAAOwW,IACf,gBACJC,EAAe,iBACfE,EAAgB,iBAChBV,EAAgB,gBAChBa,GACEpB,EAAgBc,GAMpB,GAJIC,GAAmB5pB,EAAMl/C,MAAM6pE,UACjCL,EAAaI,gBAGX1qB,EAAMqV,YACRiV,EAAaG,sBACR,GAAIb,EAAiB,CAC1BU,EAAaE,eACbpB,EAAiB12E,SAAWA,EAE5B,IACEstD,EAAM4qB,UAAU,CACdxB,mBACA1oC,SAAU,CACRipC,WAAYG,GAEdlhF,WAAYqhF,IAEd,MAAOp+F,GACPm0E,EAAMuU,WAAW1oF,EAAK,WAAWqI,OAAO8rE,EAAO,QAAQ9rE,OAAOu0F,MAKpE,OAAO6B,EAGT,gBAAgBtqB,GACd,OAAO,EAGT,oBAAoBA,EAAOmpB,GACzB,OAAO,KAGT,mBAAmBnpB,EAAO2pB,GACxB,OAAO3pB,EAAMl/C,MAAMlY,WAGrB,iBAAiBo3D,EAAOupB,EAAaL,EAAaQ,GAChD,MAAME,EAAkBv9F,KAAKu9F,gBAAgB5pB,IAAUA,EAAMl/C,MAAM+pE,QAEnE,IAAKjB,EACH,OAAO,EAGTL,EAAYvpB,MAAQA,EACpB,IAAIpmD,EAASomD,EAAMpmD,OAEnB,MAAOA,EAAQ,CACb,IAAKA,EAAOkH,MAAM+pE,UAAYjxE,EAAOkxE,eAAevB,GAClD,OAAO,EAGTA,EAAYvpB,MAAQpmD,EACpBA,EAASA,EAAOA,OAGlB,GAAIsvE,EAAa,CACf,MAAM6B,EAAcxB,EAAYvpB,MAAMx3C,GAMtC,GAJMuiE,KAAerB,IACnBA,EAAiBqB,GAAe7B,EAAYK,KAGzCG,EAAiBqB,GACpB,OAAO,EAKX,OADA/qB,EAAMwT,iBAAiB+V,EAAY72E,WAC5B,EAGT,qBAAqBstD,EAAOmpB,EAASV,EAAMltB,GACzC,MAAM6tB,EAAmB/iG,OAAO4wB,OAAO5wB,OAAOqK,OAAOsvE,EAAMl/C,OAAQ,CACjE2vD,kBAAmBzQ,EAAMgrB,cACzBt4E,SAAUstD,EAAMxoD,QAAQ9E,SACxBsgE,cAAehT,EAAMxoD,QAAQw7D,cAC7BiY,cAAe,EACf5gC,iBAAkBb,GAAiBn9D,KAAK9E,MAG1C,GAAI4hG,EACF,IAAK,MAAM+B,KAAU/B,EACnB9iG,OAAO4wB,OAAOmyE,EAAkB8B,EAAOC,oBAAoBnrB,IAI/D,OAAO35E,OAAO4wB,OAAOmyE,EAAkB/8F,KAAK8+F,oBAAoBnrB,EAAOmpB,GAAU5tB,IAI9E,SAAS+tB,GAAmBt2C,EAAa,EAAGo4C,EAAe,IAChE,MAAMC,EAAY,GAEZC,EAAoB,CAACtrB,EAAOurB,KAChC,MAAMC,EAAgBxrB,EAAMl/C,MAAM2qE,QAC5BxX,EAAUjU,EAAMx3C,GAChBkjE,EAAW1rB,EAAMpmD,QAAUomD,EAAMpmD,OAAO4O,GAC9C,IAAIh6B,EAMJ,GAJIk9F,KAAcA,KAAYN,IAC5BE,EAAkBtrB,EAAMpmD,QAAQ,GAG9B8xE,KAAYL,EAAW,CACzB,MAAMM,EAAWN,EAAUK,GAAYL,EAAUK,IAAapC,GAAmB8B,EAAaM,GAAWN,GACzG58F,EAAQm9F,EAAS3rB,EAAOurB,GACxBF,EAAUpX,GAAW0X,OACZ9kF,OAAOC,SAAS0kF,IACzBh9F,EAAQg9F,GAAiBJ,EAAaM,IAAa,GACnDL,EAAUpX,GAAW,MAErBzlF,EAAQwkD,EAQV,OALIu4C,GAAW/8F,GAASwkD,IACtBA,EAAaxkD,EAAQ,GAGvB48F,EAAanX,GAAWzlF,EACjBA,GAGT,OAAO88F,EAGT,SAASlB,GAAc7iG,GAAI,SACzBmrB,IAEA,MAAM2D,EAAS9uB,EAAGwH,OAASxH,EAAGwH,OAAO69D,cAAgBrlE,EAAGwH,OAAOsnB,OAAS,IAClEu1E,EAAal5E,EACbm5E,EAAariC,GAAiBjiE,GACpC,MAAO,CAACqkG,EAAWn6F,EAAIo6F,GAAax1E,EAASu1E,EAAWl6F,EAAIk6F,EAAWv1E,QAAUw1E,EAAYD,EAAWz1E,MAAQ01E,EAAYD,EAAWv1E,OAASw1E,GAGlJ,SAASnD,GAAcnhG,GACrB,MAAM4uB,EAAQ5uB,EAAGoiE,mBACXtzC,EAAS9uB,EAAGyiE,oBAClB,gBAAcziE,EAAI,CAChBmrB,SAAU,CAAC,EAAG,EAAGyD,EAAOE,KAE1B9uB,EAAGuyE,MAAM,OC5QI,MAAM,WAAmB,GACtC,YAAYvyE,EAAIu5B,GACdxkB,MAAM/U,EAAIu5B,GACVz0B,KAAKy/F,UAAY,IAAI,GAAUvkG,EAAI,CACjC4uB,MAAO,EACPE,OAAQ,EACRzN,WAAY,CACV,CAAC,OAAQ,KACT,CAAC,OAAQ,KACT,CAAC,OAAQ,MACT,CAAC,OAAQ,SAGbvc,KAAK0/F,YAAc,IAAI,GAAaxkG,EAAI,CACtCgb,OAAQ,MACR4T,MAAO,EACPE,OAAQ,IAEVhqB,KAAK2/F,IAAM,IAAI,GAAYzkG,EAAI,CAC7BihC,GAAI,YACJrS,MAAO,EACPE,OAAQ,EACRulD,YAAa,CACX,CAAC,OAAQvvE,KAAKy/F,UACd,CAAC,OAAQz/F,KAAK0/F,eAKpB,OAAOr1B,GACL,MAAM7uE,EAASwE,KAAK2/F,IACpB,gBAAe3/F,KAAK9E,GAAI,CACtB4qB,WAAY,CAAC,EAAG,GAChBe,WAAW,EACXN,OAAO,EACPd,WAAY,CAAC,EAAG,EAAG,EAAG,IACrB,KACD,MAAMY,EAAWgkD,EAAO4gB,UAAU,GAC5BuU,EAAariC,GAAiBn9D,KAAK9E,IACnC4uB,EAAQzD,EAASyD,MAAQ01E,EACzBx1E,EAAS3D,EAAS2D,OAASw1E,EAE7B11E,IAAUtuB,EAAOsuB,OAASE,IAAWxuB,EAAOwuB,QAC9CxuB,EAAOikE,OAAO,CACZ31C,QACAE,WAIJ/Z,MAAM2vF,OAAO,IAAKv1B,EAChB7uE,SACA4gG,KAAM,aAKZ,gBAAgBzoB,GACd,OAAqC,IAA9BA,EAAMl/C,MAAMorE,cAGrB,sBACE,MAAO,CACLC,iBAAiB,GAIrB,SACM9/F,KAAK2/F,MACP3/F,KAAK2/F,IAAIz6D,SACTllC,KAAK2/F,IAAM,MAGT3/F,KAAKy/F,YACPz/F,KAAKy/F,UAAUv6D,SACfllC,KAAKy/F,UAAY,MAGfz/F,KAAK0/F,cACP1/F,KAAK0/F,YAAYx6D,SACjBllC,KAAK0/F,YAAc,OC5EzB,MAAM,GAAK,q+BACL,GAAK,47CACLK,GAAoC/c,GAAQgd,IAC5CC,GAAoCjd,GAAQkd,IAC5CC,GAAuB,CAAC,EAAG,EAAG,EAAG,GACjC,GAAyB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAE7E,SAASC,GAAoBh1C,EAAKuB,GAChC,MAAOvnD,EAAGC,EAAGC,GAAK8lD,EACZyB,EAAQH,GAAc,CAACtnD,EAAGC,EAAGC,GAAIqnD,GAEvC,OAAInyC,OAAOC,SAASnV,GACXunD,EAGF,CAACA,EAAM,GAAIA,EAAM,GAAI,GAG9B,SAASmzC,IAA0B,SACjC35E,EAAQ,OACR5Y,IAEA,OAAO,IAAI,QAAQ4Y,EAAS2/B,sBAAsBn9C,SAAS27E,UAAU/2E,GAGvE,SAASyyF,IAA0B,SACjC75E,EAAQ,eACRg6E,IAEA,MAAMC,EAAqB,GACrB3zC,EAA0BtmC,EAASsmC,wBACnCN,EAAOhmC,EAAS+rC,kBAAe1yD,EAAY,EAC3CqwD,EAAU,CAAC,CAAC,EAAG,EAAG1D,GAAO,CAAChmC,EAASyD,MAAO,EAAGuiC,GAAO,CAAC,EAAGhmC,EAAS2D,OAAQqiC,GAAO,CAAChmC,EAASyD,MAAOzD,EAAS2D,OAAQqiC,GAAO,CAAC,EAAG,GAAI,GAAI,CAAChmC,EAASyD,MAAO,GAAI,GAAI,CAAC,EAAGzD,EAAS2D,QAAS,GAAI,CAAC3D,EAASyD,MAAOzD,EAAS2D,QAAS,IAAIhQ,IAAIw4C,GAAS4tC,GAAoB5tC,EAAO7F,IAE7Q,IAAK,MAAM4zC,KAAgBF,EAAgB,CACzC,MAAMzxC,EAAa2xC,EAAaxmF,QAAQpP,UAAU,IAAI,QAAQ0b,EAAS5Y,QAAQylD,UACzEstC,EAAYzwC,EAAQ/1C,IAAIymF,GAAU7xC,EAAW41B,UAAUic,IACvDl0C,GAAmB,IAAI,SAAUn/C,MAAM,CAC3Cd,KAAMjK,KAAKgF,OAAOm5F,EAAUxmF,IAAI20C,GAAYA,EAAS,KACrDpiD,MAAOlK,KAAKC,OAAOk+F,EAAUxmF,IAAI20C,GAAYA,EAAS,KACtDniD,OAAQnK,KAAKgF,OAAOm5F,EAAUxmF,IAAI20C,GAAYA,EAAS,KACvDliD,IAAKpK,KAAKC,OAAOk+F,EAAUxmF,IAAI20C,GAAYA,EAAS,KACpDjiD,KAAMrK,KAAKgF,OAAOm5F,EAAUxmF,IAAI20C,IAAaA,EAAS,KACtDhiD,IAAKtK,KAAKC,OAAOk+F,EAAUxmF,IAAI20C,IAAaA,EAAS,OAEvD2xC,EAAmBr9F,KAAKspD,EAAiB0G,cAAcstC,IAGzD,OAAOD,EAGT,SAASI,GAAqB/0D,EAAO,GAAIxgB,EAAU,IACjD,MAAMkpC,EAAW,CACfssC,sBAAuB3hG,QAAQ2sC,EAAKm0D,iBACpCc,uBAAsBj1D,EAAKk1D,YAAal1D,EAAKk1D,WAAWrgG,OAAS,EACjEsgG,cAAen1D,EAAKo1D,aAAeZ,GACnCa,gBAAiBr1D,EAAKs1D,eAAiB,EACvCC,mBAAoBv1D,EAAK00D,eAAe7/F,QAEpCiN,EAASsyF,GAAkC,CAC/C15E,SAAUslB,EAAKtlB,SACf5Y,OAAQ0d,EAAQ05D,kBAEZsc,EAAiB,GACjBC,EAAyBnB,GAAkC,CAC/DI,eAAgB10D,EAAK00D,eACrBh6E,SAAUslB,EAAKtlB,WACdhsB,QAEH,IAAK,IAAIyN,EAAI,EAAGA,EAAI6jC,EAAK00D,eAAe7/F,OAAQsH,IAAK,CACnD,MAAMk+C,EAAuBo7C,EAAuBt5F,GAC9Cu5F,EAA+Br7C,EAAqBjsC,QAAQpP,UAAU,IAAI,QAAQghC,EAAKtlB,SAAS5Y,QAAQylD,UAE1G/nC,EAAQs5D,4BAA8Bn0B,GAAkBE,QAAUrlC,EAAQu5D,0BAA4B7zB,GAAgBC,cACxHswC,EAAuBt5F,GAAKu5F,EAC5BF,EAAer5F,GAAK2F,IAEpB2zF,EAAuBt5F,GAAKk+C,EAAqBjsC,QAAQk5C,cAAc,IACvEkuC,EAAer5F,GAAKu5F,EAA6B7c,UAAU/2E,IAI/D,IAAK,IAAI3F,EAAI,EAAGA,EAAIs5F,EAAuB5gG,OAAQsH,IACjDusD,EAAS,kCAAkCxsD,OAAOC,EAAG,MAAQs5F,EAAuBt5F,GACpFusD,EAAS,0BAA0BxsD,OAAOC,EAAG,MAAQq5F,EAAer5F,GAEhE6jC,EAAKk1D,YAAcl1D,EAAKk1D,WAAWrgG,OAAS,EAC9C6zD,EAAS,oBAAoBxsD,OAAOC,IAAM6jC,EAAKk1D,WAAW/4F,GAE1DusD,EAAS,oBAAoBxsD,OAAOC,IAAM6jC,EAAK21D,eAInD,OAAOjtC,EAGM,QACblxD,KAAM,SACNixD,aAAc,CAAC3G,IACfyG,GAAE,GACFC,GAAE,GACFM,OAAQ,CACN,+BAAgC,sEAChC,yBAA0B,wDAE5BH,YAAa,CAAC3oB,EAAO,GAAIxgB,EAAU,MACjC,GAAIwgB,EAAKm0D,iBAAmBn0D,EAAKk1D,YAAcl1D,EAAKk1D,WAAWrgG,OAAS,EAAG,CACzE,MAAM,cACJq/F,GAAgB,GACdl0D,EACJ,OAAOk0D,GAAiBl0D,EAAK00D,gBAAkB10D,EAAK00D,eAAe7/F,OAAS,EAAIkgG,GAAqB/0D,EAAMxgB,GAAW,CACpHw1E,uBAAuB,EACvBC,sBAAsB,GAI1B,MAAO,KClHX,MAAMW,GAA8B,CAClCl4D,MAAO,CAAC,IAAK,IAAK,KAClBsyD,UAAW,GAEP6F,GAAkC,CAAC,CACvCn4D,MAAO,CAAC,IAAK,IAAK,KAClBsyD,UAAW,EACXznE,UAAW,EAAE,EAAG,GAAI,IACnB,CACDmV,MAAO,CAAC,IAAK,IAAK,KAClBsyD,UAAW,GACXznE,UAAW,CAAC,GAAI,GAAI,OAEhB,GAAuB,CAAC,EAAG,EAAG,EAAG,IAAM,KAC9B,MAAM,WAAuB6nE,GAC1C,YAAYtnE,GACVxkB,MAAMwkB,GACNz0B,KAAKyhG,aAAe,KACpBzhG,KAAK0hG,kBAAoB,GACzB1hG,KAAK2hG,YAAc,GACnB3hG,KAAK+gG,YAAc,GACnB/gG,KAAK4hG,aAAe,GACpB5hG,KAAK6gG,WAAa,GAClB7gG,KAAKshG,eAAiB,KACtBthG,KAAK87F,QAAS,EACd97F,KAAK8lF,eAAiB,KAEtB,IAAK,MAAM3pF,KAAOs4B,EAAO,CACvB,MAAMotE,EAAcptE,EAAMt4B,GAE1B,OAAQ0lG,EAAY/iG,MAClB,IAAK,UACHkB,KAAKyhG,aAAeI,EACpB,MAEF,IAAK,cACH7hG,KAAK0hG,kBAAkBz+F,KAAK4+F,GAC5B,MAEF,IAAK,QACH7hG,KAAK2hG,YAAY1+F,KAAK4+F,GACtB,MAEF,UAIJ7hG,KAAK8hG,sBAEL9hG,KAAK87F,OAAS97F,KAAK0hG,kBAAkB3/C,KAAKggD,GAASA,EAAMjG,QAG3D,UAAU5gG,GAAI,OACZ4rF,EAAM,YACN+V,EAAW,UACX5R,EAAS,iBACTiR,EAAgB,MAChBvS,IAEA,GAAK3pF,KAAK87F,OAAV,CACA97F,KAAKqgG,eAAiBrgG,KAAKgiG,qBAEM,IAA7BhiG,KAAK4hG,aAAaphG,QACpBR,KAAKiiG,oBAAoB/mG,GAGtB8E,KAAK8lF,iBACR9lF,KAAK8lF,eAAiB,GAAeC,yBAAyB7qF,GAE1D4gG,IACF97F,KAAK8lF,eAAeG,iBAAiB6V,KAIpC97F,KAAKshG,iBACRthG,KAAKshG,eAAiB,IAAI,GAAUpmG,EAAI,CACtC4uB,MAAO,EACPE,OAAQ,KAIZ,IAAK,IAAIliB,EAAI,EAAGA,EAAI9H,KAAK4hG,aAAaphG,OAAQsH,IAAK,CACjD,MAAMo6F,EAAaliG,KAAK4hG,aAAa95F,GACrCo6F,EAAWtC,OAAO,CAChB9Y,SACA+V,cACA5R,YACAiR,mBACAvS,QACAoT,iBAAkB,CAChBkE,cAAen5F,EACfw5F,eAAgBthG,KAAKshG,eACrBjB,eAAgBrgG,KAAKqgG,oBAM7B,oBAAoB1sB,GAClB,MAAMp3D,EAAavc,KAAK87F,OAAS,CAC/B+E,WAAY7gG,KAAK6gG,WACjBS,eAAgBthG,KAAKshG,eACrBP,YAAa/gG,KAAK+gG,YAClBV,eAAgBrgG,KAAKqgG,gBACnB,GAUJ,OATA9jF,EAAW4lF,aAAe,CACxBV,aAAczhG,KAAKyhG,aACnBC,kBAAmB1hG,KAAK0hG,kBAAkB1nF,IAAIooF,GAAoBA,EAAiBC,kBAAkB,CACnG1uB,WAEFguB,YAAa3hG,KAAK2hG,YAAY3nF,IAAIsoF,GAAcA,EAAWD,kBAAkB,CAC3E1uB,YAGGp3D,EAGT,UACE,IAAK,MAAM2lF,KAAcliG,KAAK4hG,aAC5BM,EAAWh9D,SAGbllC,KAAK4hG,aAAaphG,OAAS,EAC3BR,KAAK6gG,WAAWrgG,OAAS,EAErBR,KAAKshG,iBACPthG,KAAKshG,eAAep8D,SACpBllC,KAAKshG,eAAiB,MAGpBthG,KAAK87F,QAAU97F,KAAK8lF,iBACtB9lF,KAAK8lF,eAAeyc,oBAAoBzG,IACxC97F,KAAK8lF,eAAiB,MAI1B,qBACE,MAAM0c,EAAgB,GAEtB,IAAK,MAAMT,KAAS/hG,KAAK0hG,kBAAmB,CAC1C,MAAM9yC,GAAa,IAAI,SAAUrhD,OAAO,CACtCC,IAAK,IAAI,QAAQu0F,EAAM7tE,WAAWg/B,WAEpCsvC,EAAcv/F,KAAK2rD,GAGrB,OAAO4zC,EAGT,oBAAoBtnG,GAClB,IAAK,IAAI4M,EAAI,EAAGA,EAAI9H,KAAK0hG,kBAAkBlhG,OAAQsH,IAAK,CACtD,MAAMo6F,EAAa,IAAI,GAAWhnG,GAClC8E,KAAK4hG,aAAa95F,GAAKo6F,EACvBliG,KAAK6gG,WAAW/4F,GAAKo6F,EAAWzC,WAIpC,sBACE,MAAM,aACJgC,EAAY,YACZE,EAAW,kBACXD,GACE1hG,KAECyhG,GAAuC,IAAvBE,EAAYnhG,QAA6C,IAA7BkhG,EAAkBlhG,SACjER,KAAKyhG,aAAe,IAAI/F,GAAa6F,IACrCvhG,KAAK0hG,kBAAkBz+F,KAAK,IAAI,GAAiBu+F,GAAgC,IAAK,IAAI,GAAiBA,GAAgC,OC3KjJ,MAAMiB,GAA0B,IAAI,GACrB,MAAM,GACnB,cACEziG,KAAK88F,QAAU,GACf98F,KAAK0iG,iBAAmB,GACxB1iG,KAAKgnF,aAAe,iBACpBhnF,KAAK2iG,aAGP,SAASluE,GACH,YAAaA,IACXA,EAAMqoE,QAAQt8F,SAAWR,KAAK88F,QAAQt8F,QAAWgpF,GAAU/0D,EAAMqoE,QAAS98F,KAAK88F,WACjF98F,KAAK2iG,WAAWluE,EAAMqoE,SACtB98F,KAAKgnF,aAAe,oBAK1B,YAAYr7C,EAAO,CACjB27C,kBAAkB,IAElB,MAAMC,EAASvnF,KAAKgnF,aAMpB,OAJIr7C,EAAK27C,mBACPtnF,KAAKgnF,cAAe,GAGfO,EAGT,aACE,OAAOvnF,KAAK0iG,iBAGd,WACE1iG,KAAK4iG,UAGP,WAAW9F,EAAU,IACnB98F,KAAK4iG,UACL5iG,KAAK88F,QAAUA,EAEf98F,KAAK6iG,yBAGP,UACE,IAAK,MAAMhE,KAAU7+F,KAAK88F,QACxB+B,EAAO+D,UAGT,IAAK,MAAM/D,KAAU7+F,KAAK0iG,iBACxB7D,EAAO+D,UAGT5iG,KAAK88F,QAAQt8F,OAAS,EACtBR,KAAK0iG,iBAAiBliG,OAAS,EAGjC,yBACER,KAAK0iG,iBAAmB1iG,KAAK88F,QAAQziG,QAEhC2F,KAAK88F,QAAQ/6C,KAAK88C,GAAUA,aAAkB,KACjD7+F,KAAK0iG,iBAAiBz/F,KAAKw/F,KC/DlB,MAAM,WAAuB,ICE5C,MAAMK,GAAqB,CACzBp8E,UAAW,CAAC,EAAG,EAAG,MAAO,GACzBF,cAAe,OAEF,MAAM,WAAuB,GAC1C,OAAOiO,GACL,OAAIA,EAAMiyD,WACD1mF,KAAK+iG,mBAAmBtuE,GAG1BxkB,MAAM2vF,OAAOnrE,GAGtB,oBAAmB,OACjBqyD,EAAM,YACN+V,EAAW,MACXlT,EAAK,UACLsB,EAAS,iBACTiR,EAAgB,WAChBxV,EACAsc,YAAY,EACV59F,EAAC,EACDC,EAAC,MACDykB,EAAK,OACLE,GACD,KACDoyE,EAAO,UAAS,aAChB6G,EAAY,MACZC,IAEA,MAAMhoG,EAAK8E,KAAK9E,GAChB8E,KAAKkjG,MAAQA,EACb,MAAMC,GAAiBD,GAAS,CAC9BE,QAAS,IAAI7+D,IACb8+D,QAAS,IAEXrjG,KAAKsjG,QAAUH,EACf,MAAMlF,EAAe,gBAAe/iG,EAAI,CACtCksB,aAAa,EACblB,QAAS,CAAC9gB,EAAGC,EAAGykB,EAAOE,GACvBvE,WAAY,CAAC,EAAG,EAAG,EAAG,GACtBM,WAAW,EACXc,WAAW,EACXf,WAAY,CAAC,EAAG,GAChBJ,UAAW,EAAC,GAAM,GAAM,GAAM,MAC3Bo9E,GACHv8E,OAAQ28E,GACP,IAAMjzF,MAAM2vF,OAAO,CACpBpkG,OAAQkrF,EACRI,SACA+V,cACAlT,QACAsB,YACAiR,mBACAE,OACA6G,kBAEFjjG,KAAKsjG,QAAU,KACf,MAAMC,EAAqBJ,GAAiBK,GAAYnnG,KAAK,KAAM8mG,GACnE,MAAO,CACLI,qBACA90D,MAAOwvD,GAIX,gBAAgBtqB,GACd,OAAOA,EAAMl/C,MAAM6pE,SAGrB,sBACE,MAAO,CACLM,cAAe,EACf6E,iBAAkBzjG,KAAKkjG,MACvBf,aAAc,IAIlB,mBAAmBxuB,EAAO2pB,EAAYj3E,GACpC,MAAMq9E,EAAiB,IAAK/vB,EAAMl/C,MAAMlY,YAWxC,OARIvc,KAAKkjG,MACPQ,EAAen9E,OAAQ,GAEvBvsB,OAAO4wB,OAAO84E,EAAgBZ,IAC9BY,EAAen9E,OAAQ,EACvBm9E,EAAel+E,WAAam+E,GAAY3jG,KAAKsjG,QAAS3vB,EAAOttD,IAGxDq9E,GAKX,SAASC,GAAYC,EAASjwB,EAAOttD,GACnC,MAAM,QACJ+8E,EAAO,QACPC,GACEO,EACJ,IAAIn/F,EAEJ,GAAI2+F,EAAQ1/D,IAAIiwC,GAAQ,CACtB,MAAMkwB,EAAQT,EAAQniF,IAAI0yD,GAC1BkwB,EAAM5Y,UAAUhoF,KAAKojB,GACrB5hB,EAAIo/F,EAAMp/F,OAIV,GAFAA,EAAI2+F,EAAQtiG,KAAO,EAEf2D,GAAK,IAAK,CACZ,MAAMo/F,EAAQ,CACZp/F,IACAkvE,QACAsX,UAAW,CAAC5kE,IAEd+8E,EAAQtjF,IAAI6zD,EAAOkwB,GACnBR,EAAQ5+F,GAAKo/F,OAEb,EAAI/3E,KAAK,uDAAT,GACArnB,EAAI,EAIR,MAAO,CAAC,EAAG,EAAG,EAAGA,EAAI,KAGvB,SAAS++F,GAAYI,EAASE,GAC5B,MAAMD,EAAQD,EAAQP,QAAQS,EAAY,IAC1C,OAAOD,GAAS,CACdE,YAAaF,EAAMlwB,MACnBqwB,gBAAiBH,EAAM5Y,UACvBgZ,kBAAmBJ,EAAMlwB,MAAM4vB,mBAAmBO,ICjItD,MAAMI,GAAsB,4BACb,MAAM,GACnB,YAAYhpG,GACV8E,KAAK9E,GAAKA,EACV8E,KAAK68F,YAAc,KACnB78F,KAAKmkG,mBAAoB,EACzBnkG,KAAKokG,eAAiB,IAAI,GAAelpG,GACzC8E,KAAKqkG,eAAiB,IAAI,GAAenpG,GACzC8E,KAAKskG,YAAc,EACnBtkG,KAAKgnF,aAAe,iBACpBhnF,KAAKukG,cAAgB,GACrBvkG,KAAKwkG,sBAAwB,KAG/B,SAAS/vE,GACH,gBAAiBA,GAASz0B,KAAK68F,cAAgBpoE,EAAMooE,cACvD78F,KAAK68F,YAAcpoE,EAAMooE,YACzB78F,KAAKgnF,aAAe,uBAGlB,sBAAuBvyD,GAASz0B,KAAKmkG,oBAAsB1vE,EAAM0vE,oBACnEnkG,KAAKmkG,kBAAoB1vE,EAAM0vE,kBAC/BnkG,KAAKgnF,aAAe,6BAIxB,aAAar7C,GACX,MAAM84D,EAAYzkG,KAAKmkG,kBAAoBnkG,KAAKqkG,eAAiBrkG,KAAKokG,eACtEz4D,EAAKkxD,YAAclxD,EAAKkxD,aAAe78F,KAAK68F,YAC5ClxD,EAAKmxD,QAAUnxD,EAAKmxD,SAAW,GAC/BnxD,EAAKnwC,OAASmwC,EAAKnwC,QAAU,GAAYkpG,sBAAsB1kG,KAAK9E,IAEpE8E,KAAK2kG,WAAWh5D,EAAKmxD,QAASnxD,GAE9B,MAAMi5D,EAAe5kG,KAAKwkG,sBAAwBxkG,KAAKukG,cAAc,GAAK54D,EAAKnwC,OACzE8gG,EAAcmI,EAAU7E,OAAO,IAAKj0D,EACxCnwC,OAAQopG,IAGV5kG,KAAK6kG,YAAYl5D,EAAKmxD,QAASnxD,GAE/B3rC,KAAKskG,cACL,GAAMJ,GAAqBlkG,KAAMs8F,EAAa3wD,GAGhD,YAAYA,EAAO,CACjB27C,kBAAkB,IAElB,MAAMC,EAASvnF,KAAKgnF,aAMpB,OAJIr7C,EAAK27C,mBACPtnF,KAAKgnF,cAAe,GAGfO,EAGT,WACE,MAAM,cACJgd,GACEvkG,KAEJ,IAAK,MAAMa,KAAU0jG,EACnB1jG,EAAOqkC,SAGTq/D,EAAc/jG,OAAS,EAGzB,WAAWs8F,EAASnxD,GAClB,IAAI64D,EAAwB,KAE5B,IAAK,MAAM3F,KAAU/B,EACnB+B,EAAOiG,UAAU9kG,KAAK9E,GAAIywC,GAEtBkzD,EAAOkG,aACTP,EAAwB3F,GAIxB2F,GACFxkG,KAAKglG,uBAGPhlG,KAAKwkG,sBAAwBA,EAG/B,uBACE,MAAM,cACJD,GACEvkG,KAEyB,IAAzBukG,EAAc/jG,QAChB+jG,EAActhG,KAAK,IAAI,GAAYjD,KAAK9E,IAAK,IAAI,GAAY8E,KAAK9E,KAGpE,IAAK,MAAM2F,KAAU0jG,EACnB1jG,EAAO4+D,SAIX,YAAYq9B,EAASnxD,GACnB,MAAM,cACJ44D,GACEvkG,KACEqqE,EAAS,CACb46B,YAAaV,EAAc,GAC3BW,WAAYX,EAAc,GAC1B/oG,OAAQ,MAGV,IAAK,MAAMqjG,KAAU/B,EACnB,GAAI+B,EAAOkG,WAAY,CACrB,GAAIlG,IAAW7+F,KAAKwkG,sBAAuB,CACzCn6B,EAAO7uE,OAASmwC,EAAKnwC,OACrBqjG,EAAOkG,WAAW/kG,KAAK9E,GAAImvE,GAC3B,MAGF,MAAMxpE,EAASg+F,EAAOkG,WAAW/kG,KAAK9E,GAAImvE,GAC1CA,EAAO46B,YAAcpkG,EACrBwpE,EAAO66B,WAAarkG,IAAW0jG,EAAc,GAAKA,EAAc,GAAKA,EAAc,KC5H3F,MAAMY,GAAmB,CACvBrB,YAAa,KACbC,YAAa,KACbE,mBAAoB,GAEf,SAASmB,IAAiB,aAC/BC,EAAY,mBACZ9B,EAAkB,QAClB+B,EAAO,QACPC,EAAO,aACPC,EAAY,WACZxC,IAEA,GAAIqC,EAAc,CAChB,MAAM,EACJjgG,EAAC,EACDC,EAAC,MACDykB,EAAK,OACLE,GACEg5E,EACJ,IAAIyC,EAA4BD,EAAeA,EAC3CE,GAAqB,EACrB59F,EAAI,EAER,IAAK,IAAIJ,EAAM,EAAGA,EAAMsiB,EAAQtiB,IAAO,CACrC,MAAM0xB,EAAK1xB,EAAMrC,EAAIkgG,EACfI,EAAMvsE,EAAKA,EAEjB,GAAIusE,EAAMF,EACR39F,GAAK,EAAIgiB,OAET,IAAK,IAAIliB,EAAM,EAAGA,EAAMkiB,EAAOliB,IAAO,CACpC,MAAMg+F,EAAmBP,EAAav9F,EAAI,GAAK,EAE/C,GAAI89F,GAAoB,EAAG,CACzB,MAAMzsE,EAAKvxB,EAAMxC,EAAIkgG,EACfO,EAAK1sE,EAAKA,EAAKwsE,EAEjBE,GAAMJ,IACRA,EAA4BI,EAC5BH,EAAoB59F,GAIxBA,GAAK,GAKX,GAAI49F,GAAqB,EAAG,CAC1B,MAAM5B,EAAcuB,EAAahrG,MAAMqrG,EAAmBA,EAAoB,GACxEI,EAAevC,EAAmBO,GAExC,GAAIgC,EAAc,CAChB,MAAM1sE,EAAK/2B,KAAK6lC,MAAMw9D,EAAoB,EAAI57E,GACxCqP,EAAKusE,EAAoB,EAAItsE,EAAKtP,EACxC,MAAO,IAAKg8E,EACVhC,cACAiC,QAAS3gG,EAAI+zB,EACb6sE,QAAS3gG,EAAI+zB,GAIjB,EAAIh/B,MAAM,wDAAV,IAIJ,OAAO+qG,GAEF,SAASc,IAAiB,aAC/BZ,EAAY,mBACZ9B,IAEA,MAAM2C,EAAe,IAAI3hE,IAEzB,GAAI8gE,EACF,IAAK,IAAIv9F,EAAI,EAAGA,EAAIu9F,EAAa7kG,OAAQsH,GAAK,EAAG,CAC/C,MAAM89F,EAAmBP,EAAav9F,EAAI,GAAK,EAE/C,GAAI89F,GAAoB,EAAG,CACzB,MAAM9B,EAAcuB,EAAahrG,MAAMyN,EAAGA,EAAI,GACxCq+F,EAAWrC,EAAYziG,KAAK,KAElC,IAAK6kG,EAAaxiE,IAAIyiE,GAAW,CAC/B,MAAML,EAAevC,EAAmBO,GAEpCgC,EACFI,EAAapmF,IAAIqmF,EAAU,IAAKL,EAC9BhC,gBAGF,EAAI1pG,MAAM,wDAAV,KAOV,OAAOiG,MAAMosC,KAAKy5D,EAAanqF,UCnG1B,SAASqqF,IAAoB,SAClCC,EAAQ,UACRpb,EAAS,WACTuU,EAAU,EACVp6F,EAAC,EACDC,EAAC,EACDC,IAEA,IAAIghG,EAAiBrb,EAAU,GAE3BA,EAAUzqF,OAAS,IACrB8lG,EAAiBC,IAAyC,OAAbF,QAAkC,IAAbA,OAAsB,EAASA,EAASrC,kBAAoB/Y,EAAW,CACvI7lF,IACAC,OAIJ,MAAMmhG,EAAaF,GAAkBA,EAAer4C,UAAU,CAAC7oD,EAAIkhG,EAAelhG,EAAGC,EAAIihG,EAAejhG,GAAI,CAC1GunD,QAAStnD,IAEX,MAAO,CACL+jC,MAAO,KACPsqC,MAAO,KACPttD,SAAUigF,EACVnkG,OAAQ,EACRskG,QAAQ,EACRrhG,IACAC,IACAmtD,MAAO,CAACptD,EAAGC,GACXmhG,aACAE,YAAaL,GAAY,CAACA,EAASN,QAASM,EAASL,SACrDxG,cAGG,SAASmH,GAAgBh7D,GAC9B,MAAM,SACJ06D,EAAQ,eACRO,EAAc,KACd39E,EAAI,OACJ69D,GACEn7C,GACE,YACJm4D,EAAW,YACXC,EAAW,kBACXE,GACEoC,EACEQ,EAAiB9C,EAAc,CAACA,GAAe,GAErD,GAAa,UAAT96E,EAAkB,CACpB,MAAM69E,EAAwBF,EAAezkG,MACvC4kG,EAAoBH,EAAehf,QACnCof,EAAgBjD,GAAeA,EAAYtvE,MAAM0H,GAEvD,GAAI6qE,IAAkBD,GAAqB9C,IAAsB6C,EAAuB,CACtF,GAAIE,IAAkBD,EAAmB,CACvC,MAAME,EAAkBngB,EAAOn5D,KAAKgmD,GAASA,EAAMl/C,MAAM0H,KAAO4qE,GAE5DE,GACFJ,EAAen6D,QAAQu6D,GAI3BL,EAAehf,QAAUof,EACzBJ,EAAezkG,MAAQ8hG,EACvB2C,EAAe98D,KAAO,MAI1B,MAAMo9D,EAAWd,GAAoBz6D,GAC/Bw7D,EAAQ,IAAI5iE,IA4BlB,OA3BA4iE,EAAMrnF,IAAI,KAAMonF,GAChBL,EAAe3qG,QAAQy3E,IACrB,IAAI7pC,EAAO,IAAKo9D,GAGZvzB,IAAUowB,IACZj6D,EAAKT,MAAQy6D,EACbh6D,EAAK3nC,MAAQ8hG,EACbn6D,EAAK28D,QAAS,GAGhB38D,EAAOs9D,GAAoB,CACzBzzB,QACA7pC,OACA7gB,SAGE0qD,IAAUowB,GAAwB,UAAT96E,IAC3B29E,EAAe98D,KAAOA,GAGxBq9D,EAAMrnF,IAAIgqB,EAAK6pC,MAAMx3C,GAAI2N,GAEZ,UAAT7gB,GACF6gB,EAAK6pC,MAAM0zB,oBAAoBv9D,KAG5Bq9D,EAEF,SAASC,IAAoB,MAClCzzB,EAAK,KACL7pC,EAAI,KACJ7gB,IAEA,MAAO0qD,GAAS7pC,EAAM,CACpB,MAAMw9D,EAAcx9D,EAAK6pC,OAAS,KAClC7pC,EAAKw9D,YAAcA,EACnBx9D,EAAK6pC,MAAQA,EACb7pC,EAAO6pC,EAAM4zB,eAAe,CAC1Bz9D,OACA7gB,OACAq+E,gBAEF3zB,EAAQA,EAAMpmD,OAGhB,OAAOuc,EAGT,SAASy8D,GAA2Btb,EAAWz4B,GAC7C,IAAK,IAAI1qD,EAAImjF,EAAUzqF,OAAS,EAAGsH,GAAK,EAAGA,IAAK,CAC9C,MAAMue,EAAW4kE,EAAUnjF,GAE3B,GAAIue,EAASqkE,cAAcl4B,GACzB,OAAOnsC,EAIX,OAAO4kE,EAAU,GC5HJ,MAAM,GACnB,YAAY/vF,GACV8E,KAAK9E,GAAKA,EACV8E,KAAK0mF,WAAa,KAClB1mF,KAAKqkG,eAAiB,IAAI,GAAenpG,GACzC8E,KAAK68F,YAAc,KACnB78F,KAAK4mG,eAAiB,CACpBzkG,OAAQ,EACRylF,QAAS,KACT99C,KAAM,MAIV,SAASrV,GACH,gBAAiBA,IACnBz0B,KAAK68F,YAAcpoE,EAAMooE,aAGvB,cAAepoE,IACjBz0B,KAAKwnG,UAAY/yE,EAAM+yE,WAI3B,WACMxnG,KAAK0mF,YACP1mF,KAAK0mF,WAAWxhD,SAGdllC,KAAKynG,WACPznG,KAAKynG,SAASp+D,MAAMnE,SACpBllC,KAAKynG,SAASviE,UAIlB,WAAWyG,GACT,OAAO3rC,KAAK0nG,mBAAmB/7D,GAGjC,YAAYA,GACV,OAAO3rC,KAAK2nG,oBAAoBh8D,GAGlC,qBAAoB,EAClBvmC,EAAC,EACDC,EAAC,OACDyhF,EAAM,UACNmE,GACC2b,EAAiB5mG,KAAK4mG,eAAe98D,MACtC,MAAMi9D,EAAoBH,GAAkBA,EAAejzB,OAASizB,EAAejzB,MAAMx3C,GACnFyrE,EAAuBhB,GAAkBA,EAAevgF,UAAYugF,EAAevgF,SAAS8V,GAC5Fw3C,EAAQozB,EAAoBjgB,EAAOn5D,KAAK+yD,GAAKA,EAAEvkD,KAAO4qE,GAAqB,KAC3E1gF,EAAWuhF,GAAwB3c,EAAUt9D,KAAK/iB,GAAKA,EAAEuxB,KAAOyrE,IAAyB3c,EAAU,GACnGub,EAAangF,GAAYA,EAAS4nC,UAAU,CAAC7oD,EAAIihB,EAASjhB,EAAGC,EAAIghB,EAAShhB,IAC1EykC,EAAO,CACX1kC,IACAC,IACAghB,WACAmgF,aACA7yB,SAGF,OAAIA,EACK,IAAKizB,KACP98D,GAIA9vC,OAAO4wB,OAAOkf,EAAM,CACzBT,MAAO,KACPxG,OAAQ,KACR1gC,OAAQ,IAIZ,gBACE,MAAM,GACJjH,GACE8E,KA8BJ,OA5BKA,KAAK0mF,aACR1mF,KAAK0mF,WAAa,IAAI,GAAYxrF,GAE9B,GAAY6gD,YAAY7gD,EAAI,CAC9Bw3E,kBAAkB,MAElB1yE,KAAKynG,SAAW,IAAI,GAAYvsG,GAChC8E,KAAKynG,SAASr0B,OAAO,CACnB,CAAC,OAAQ,IAAI,GAAUl4E,EAAI,CACzBgb,OAAQ,gBAAShb,GAAM,MAAQ,KAC/B4D,KAAM,WAMdkB,KAAK0mF,WAAWjnB,OAAO,CACrB31C,MAAO5uB,EAAGwH,OAAOonB,MACjBE,OAAQ9uB,EAAGwH,OAAOsnB,SAGhBhqB,KAAKynG,UACPznG,KAAKynG,SAAShoC,OAAO,CACnB31C,MAAO5uB,EAAGwH,OAAOonB,MACjBE,OAAQ9uB,EAAGwH,OAAOsnB,SAIfhqB,KAAK0mF,WAGd,aAAaI,GACX,IAAuB,IAAnB9mF,KAAKwnG,UACP,OAAO,KAGT,MAAMK,EAAiB/gB,EAAOzuD,OAAOs7C,GAASA,EAAMm0B,eAAiBn0B,EAAMqV,aAC3E,OAAO6e,EAAernG,OAASqnG,EAAiB,KAGlD,oBAAmB,OACjB/gB,EAAM,MACN6C,EAAK,UACLsB,EAAS,EACT7lF,EAAC,EACDC,EAAC,OACD0iG,EAAS,EAAC,MACVr+E,EAAQ,EAAC,KACTT,EAAO,QAAO,YACd++E,EAAW,iBACX9L,IAIA,GAFApV,EAAS9mF,KAAKioG,aAAanhB,IAEtBA,EACH,MAAO,CACL7+E,OAAQ,GACRigG,UAAW9B,GAAoB,CAC7Bnb,YACA7lF,IACAC,OAKNrF,KAAKmoG,gBAEL,MAAM3I,EAAariC,GAAiBn9D,KAAK9E,IACnCktG,EAAmB7qC,GAAkBv9D,KAAK9E,GAAI,CAACkK,EAAGC,IAAI,GACtDqhG,EAAc,CAAC0B,EAAiBhjG,EAAI/C,KAAK6lC,MAAMkgE,EAAiBt+E,MAAQ,GAAIs+E,EAAiB/iG,EAAIhD,KAAK6lC,MAAMkgE,EAAiBp+E,OAAS,IACtIw7E,EAAenjG,KAAKiX,MAAMyuF,EAASvI,IACnC,MACJ11E,EAAK,OACLE,GACEhqB,KAAK0mF,WAEHsc,EAAahjG,KAAKqoG,gBAAgB,CACtC/C,QAASoB,EAAY,GACrBnB,QAASmB,EAAY,GACrBlB,eACA8C,YAAax+E,EACby+E,aAAcv+E,IAGhB,IAAIm9E,EACJ,MAAMl/F,EAAS,GACT4+F,EAAiB,GAEvB,IAAK,IAAI/+F,EAAI,EAAGA,EAAI4hB,EAAO5hB,IAAK,CAC9B,MAAM0gG,EAAexF,GAAchjG,KAAKyoG,eAAe,CACrD3hB,SACA6C,QACAsB,YACAiR,mBACA8G,aACA5G,KAAM,WAAWv0F,OAAOohB,GACxBg6E,aAAch6E,IAGVo9E,EAAWjB,GAAiB,IAAKoD,EACrClD,QAASoB,EAAY,GACrBnB,QAASmB,EAAY,GACrBlB,eACAxC,eAEF,IAAI19F,EAEJ,GAAI+gG,EAAStC,aAAeiE,GAAehoG,KAAKynG,SAAU,CACxD,MAAMiB,EAAoB1oG,KAAKyoG,eAAe,CAC5C3hB,OAAQ,CAACuf,EAAStC,aAClBpa,QACAsB,YACAiR,mBACA8G,WAAY,CACV59F,EAAGihG,EAASN,QACZ1gG,EAAGghG,EAASL,QACZl8E,MAAO,EACPE,OAAQ,GAEVoyE,KAAM,WAAWv0F,OAAOohB,GACxBg6E,aAAc,SACdC,OAAO,IAGT59F,EAAIojG,EAAkBrD,aAAa,GAAKpa,EAAU,GAAGv8B,eAAejE,cAAc,GAAKwgC,EAAU,GAAGt8B,SAAS,GAG/G,GAAI03C,EAASvC,aAAeh8F,EAAI,EAAI4hB,EAAO,CACzC,MAAMk+D,EAAUye,EAASvC,YAAY,GAAK,EAC1C+C,EAAejf,IAAW,EAC1Bd,EAAOc,GAAS+gB,oBAAoBtC,EAASpC,mBAG/CkD,EAAQR,GAAgB,CACtBN,WACAO,eAAgB5mG,KAAK4mG,eACrB39E,OACA69D,SACAmE,YACA7lF,IACAC,IACAC,IACAk6F,eAGF,IAAK,MAAM11D,KAAQq9D,EAAMprF,SACnB+tB,EAAK6pC,OACP1rE,EAAOhF,KAAK6mC,GAIhB,IAAKu8D,EAASvC,YACZ,MAIJ,IAAK,MAAMlc,KAAWif,EACpB/f,EAAOc,GAASghB,uBAGlB,MAAO,CACL3gG,SACAigG,UAAWf,GAASA,EAAMlmF,IAAI,OAIlC,qBAAoB,OAClB6lE,EAAM,MACN6C,EAAK,UACLsB,EAAS,EACT7lF,EAAC,EACDC,EAAC,MACDykB,EAAQ,EAAC,OACTE,EAAS,EAAC,KACVf,EAAO,QAAO,WACd4/E,EAAa,KAAI,iBACjB3M,IAIA,GAFApV,EAAS9mF,KAAKioG,aAAanhB,IAEtBA,EACH,MAAO,GAGT9mF,KAAKmoG,gBAEL,MAAM3I,EAAariC,GAAiBn9D,KAAK9E,IACnC4tG,EAAUvrC,GAAkBv9D,KAAK9E,GAAI,CAACkK,EAAGC,IAAI,GAC7C0jG,EAAaD,EAAQ1jG,EACrB4jG,EAAYF,EAAQzjG,EAAIyjG,EAAQ9+E,OAChCi/E,EAAc1rC,GAAkBv9D,KAAK9E,GAAI,CAACkK,EAAI0kB,EAAOzkB,EAAI2kB,IAAS,GAClEk/E,EAAcD,EAAY7jG,EAAI6jG,EAAYn/E,MAC1Cq/E,EAAeF,EAAY5jG,EAC3B29F,EAAa,CACjB59F,EAAG2jG,EACH1jG,EAAG8jG,EACHr/E,MAAOo/E,EAAcH,EACrB/+E,OAAQg/E,EAAYG,GAGhBX,EAAexoG,KAAKyoG,eAAe,CACvC3hB,SACA6C,QACAsB,YACAiR,mBACA8G,aACA5G,KAAM,WAAWv0F,OAAOohB,GACxBg6E,aAAch6E,IAGVmgF,EAAYnD,GAAiBuC,GAC7Ba,EAAc,IAAI9kE,IAClB+kE,EAAe9uF,OAAOC,SAASouF,GAErC,IAAK,IAAI/gG,EAAI,EAAGA,EAAIshG,EAAU5oG,OAAQsH,IAAK,CACzC,GAAIwhG,GAAgBD,EAAYvoG,MAAQ+nG,EACtC,MAGF,MAAMxC,EAAW+C,EAAUthG,GAC3B,IAAIgiC,EAAO,CACTT,MAAOg9D,EAASvC,YAChBnwB,MAAO,KACPxxE,MAAOkkG,EAASpC,kBAChBwC,QAAQ,EACRrhG,IACAC,IACAykB,QACAE,SACAw1E,cAEF11D,EAAOs9D,GAAoB,CACzBzzB,MAAO0yB,EAAStC,YAChBj6D,OACA7gB,SAGGogF,EAAY3lE,IAAIoG,EAAKjH,SACxBwmE,EAAYvpF,IAAIgqB,EAAKjH,OAAQiH,GAIjC,OAAOzpC,MAAMosC,KAAK48D,EAAYttF,UAGhC,gBAAe,OACb+qE,EAAM,MACN6C,EAAK,UACLsB,EAAS,iBACTiR,EAAgB,WAChB8G,EAAU,KACV5G,EAAI,aACJ6G,EAAY,MACZC,IAEA,MAAMxc,EAAawc,EAAQljG,KAAKynG,SAAWznG,KAAK0mF,YAC1C,mBACJ6c,GACEvjG,KAAKqkG,eAAezE,OAAO,CAC7B9Y,SACA+V,YAAa78F,KAAK68F,YAClBlT,QACAsB,YACAiR,mBACAxV,aACAsc,aACA5G,OACA6G,eACAC,WAEI,EACJ99F,EAAC,EACDC,EAAC,MACDykB,EAAK,OACLE,GACEg5E,EACEqC,EAAe,IAAKnC,EAAQ3+F,aAAeyvC,YAAYlqB,EAAQE,EAAS,GAQ9E,OAPAwlD,GAAkBkX,EAAY,CAC5BjX,QAASrqE,EACTsqE,QAASrqE,EACTwqE,YAAa/lD,EACbgmD,aAAc9lD,EACdxuB,OAAQ6pG,IAEH,CACLA,eACA9B,sBAIJ,iBAAgB,QACd+B,EAAO,QACPC,EAAO,aACPC,EAAY,YACZ8C,EAAW,aACXC,IAEA,MAAMnjG,EAAI/C,KAAKC,IAAI,EAAGgjG,EAAUE,GAC1BngG,EAAIhD,KAAKC,IAAI,EAAGijG,EAAUC,GAC1B17E,EAAQznB,KAAKgF,IAAIihG,EAAahD,EAAUE,EAAe,GAAKpgG,EAC5D4kB,EAAS3nB,KAAKgF,IAAIkhG,EAAchD,EAAUC,EAAe,GAAKngG,EAEpE,OAAIykB,GAAS,GAAKE,GAAU,EACnB,KAGF,CACL5kB,IACAC,IACAykB,QACAE,WCzYN,MAAMu/E,GAAe,CACnBC,OAAQ,EACR76C,SAAU,WACVp4B,cAAe,OACf8S,MAAO,UACPogE,gBAAiB,UACjB1kD,QAAS,OACTt4C,IAAK,EACLH,KAAM,EACNo9F,QAAS,QAEI,MAAMC,GACnB,YAAYjnG,GACV,MAAMknG,EAAelnG,EAAOmnG,cAExBD,IACF5pG,KAAK8pG,GAAKzrG,SAAS0sB,cAAc,OACjC/qB,KAAK8pG,GAAGtoC,UAAY,eACpBxnE,OAAO4wB,OAAO5qB,KAAK8pG,GAAGnwE,MAAO4vE,IAC7BK,EAAaG,YAAY/pG,KAAK8pG,KAGhC9pG,KAAKgqG,WAAY,EAGnB,WAAWC,EAAa7kG,EAAGC,GACzB,MAAMykG,EAAK9pG,KAAK8pG,GAEhB,GAA2B,kBAAhBG,EACTH,EAAGI,UAAYD,MACV,KAAKA,EAGV,OAFAjqG,KAAKgqG,WAAY,OACjBF,EAAGnwE,MAAM+vE,QAAU,QAGf,SAAUO,IACZH,EAAGI,UAAYD,EAAYx6D,MAGzB,SAAUw6D,IACZH,EAAGK,UAAYF,EAAYG,MAGzB,cAAeH,IACjBH,EAAGtoC,UAAYyoC,EAAYzoC,WAG7BxnE,OAAO4wB,OAAOk/E,EAAGnwE,MAAOswE,EAAYtwE,OAGtC35B,KAAKgqG,WAAY,EACjBF,EAAGnwE,MAAM+vE,QAAU,QACnBI,EAAGnwE,MAAM6qD,UAAY,aAAa38E,OAAOzC,EAAG,QAAQyC,OAAOxC,EAAG,OAGhE,SACMrF,KAAK8pG,IACP9pG,KAAK8pG,GAAGtoE,UCzDP,MAAM,GAA4C,SCAlD,SAAS,GAAOjpB,EAAWC,GAChC,IAAKD,EACH,MAAM,IAAIxG,MAAMyG,G,iBCDpB,MACE6xF,gBAAe,IACb,QACEC,GAAmC,qBAAVt9D,MACzBu9D,GAAgD,qBAAhBlxD,YAChCmxD,GAAuBxrG,QAAQ,IAC/ByrG,KAAiB,SAAmBD,GACnC,SAASE,GAAqB5rG,GACnC,OAAQA,GACN,IAAK,OACH,OAAOyrG,IAA0BD,IAAmBG,GAEtD,IAAK,cACH,OAAOF,GAET,IAAK,QACH,OAAOD,GAET,IAAK,OACH,OAAOG,GAET,QACE,MAAM,IAAI14F,MAAM,6BAA6BjT,wCAG5C,SAAS6rG,KACd,GAAIJ,GACF,MAAO,cAGT,GAAID,GACF,MAAO,QAGT,GAAIG,GACF,MAAO,OAGT,MAAM,IAAI14F,MAAM,iEC3BX,SAAS64F,GAAa7iE,GAC3B,MAAM7xB,EAAS20F,GAAmB9iE,GAElC,IAAK7xB,EACH,MAAM,IAAInE,MAAM,gBAGlB,OAAOmE,EAKF,SAAS40F,GAAa/iE,GAC3B,OAAQ6iE,GAAa7iE,IACnB,IAAK,OACH,OAAOA,EAET,IAAK,QACL,IAAK,cACH,MAAMrlC,EAASrE,SAAS0sB,cAAc,UAChCI,EAAUzoB,EAAOm9D,WAAW,MAElC,IAAK10C,EACH,MAAM,IAAIpZ,MAAM,gBAMlB,OAHArP,EAAOonB,MAAQie,EAAMje,MACrBpnB,EAAOsnB,OAAS+d,EAAM/d,OACtBmB,EAAQ4/E,UAAUhjE,EAAO,EAAG,GACrB5c,EAAQ2/E,aAAa,EAAG,EAAG/iE,EAAMje,MAAOie,EAAM/d,QAEvD,QACE,MAAM,IAAIjY,MAAM,iBAItB,SAAS84F,GAAmB9iE,GAC1B,MAA2B,qBAAhBsR,aAA+BtR,aAAiBsR,YAClD,cAGY,qBAAVrM,OAAyBjF,aAAiBiF,MAC5C,QAGLjF,GAA0B,kBAAVA,GAAsBA,EAAMlH,MAAQkH,EAAMje,OAASie,EAAM/d,OACpE,OAGF,KC7DT,MAAMghF,GAAuB,wBACvBC,GAAkB,oBACjB,SAASC,GAAMp5D,GACpB,OAAOA,IAAQk5D,GAAqB57E,KAAK0iB,IAAQm5D,GAAgB77E,KAAK0iB,IAEjE,SAASq5D,GAAoB37D,EAAasC,GAC/C,GAAIo5D,GAAMp5D,GAAM,CACd,MAAM0N,EAAc,IAAIC,YACxB,IAAI2rD,EAAU5rD,EAAYE,OAAOlQ,GAEjC,IAC0B,oBAAb67D,UAAyD,oBAAvBC,qBAC3CF,EAAUC,SAASC,mBAAmBF,KAExC,MAAOhxG,GACP,MAAM,IAAI2X,MAAM3X,EAAMoe,SAGxB,MAAM4Q,EAAM,6BAA6B8qB,KAAKk3D,GAC9C,OAAOhiF,EAGT,OAAOmiF,GAAQ/7D,EAAasC,GAEvB,SAASy5D,GAAQ/7D,EAAasC,GACnC,GAAIo5D,GAAMp5D,GACR,MAAM,IAAI//B,MAAM,gDAGlB,OAAO,IAAI69B,KAAK,CAAC,IAAIoE,WAAWxE,KC5BnB+C,eAAei5D,GAAah8D,EAAar3B,EAAS25B,GAC/D,MAAM25D,EAAgBN,GAAoB37D,EAAasC,GACjD6G,EAAMv6C,KAAKu6C,KAAOv6C,KAAKstG,UACvBC,EAAqC,kBAAlBF,GAA8B9yD,EAAIC,gBAAgB6yD,GAE3E,IACE,aAAaG,GAAYD,GAAaF,EAAetzF,GACrD,QACIwzF,GACFhzD,EAAIkzD,gBAAgBF,IAInBp5D,eAAeq5D,GAAY95D,EAAK35B,GACrC,MAAM4vB,EAAQ,IAAIiF,MAGlB,OAFAjF,EAAM3e,IAAM0oB,EAER35B,EAAQ4vB,OAAS5vB,EAAQ4vB,MAAM2X,QAAU3X,EAAM2X,cAC3C3X,EAAM2X,SACL3X,SAGI,IAAIyL,QAAQ,CAACl8B,EAASsjC,KACjC,IACE7S,EAAMkF,OAAS,IAAM31B,EAAQywB,GAE7BA,EAAMqS,QAAU56C,GAAOo7C,EAAO,IAAI7oC,MAAM,wBAAwB+/B,MAAQtyC,MACxE,MAAOpF,GACPwgD,EAAOxgD,MC3Bb,MAAM0xG,GAAe,GACrB,IAAIC,IAA8B,EACnBx5D,eAAey5D,GAAmBx8D,EAAar3B,EAAS25B,GACrE,IAAI4G,EAEJ,GAAIwyD,GAAMp5D,GAAM,CACd,MAAM/J,QAAcyjE,GAAah8D,EAAar3B,EAAS25B,GACvD4G,EAAO3Q,OAEP2Q,EAAO6yD,GAAQ/7D,EAAasC,GAG9B,MAAMm6D,EAAqB9zF,GAAWA,EAAQ+zF,YAC9C,aAAaC,GAAsBzzD,EAAMuzD,GAG3C15D,eAAe45D,GAAsBzzD,EAAMuzD,EAAqB,MAK9D,IAJIG,GAAcH,IAAwBF,KACxCE,EAAqB,MAGnBA,EACF,IACE,aAAaI,kBAAkB3zD,EAAMuzD,GACrC,MAAO7xG,GACPiF,QAAQysB,KAAK1xB,GACb2xG,IAA8B,EAIlC,aAAaM,kBAAkB3zD,GAGjC,SAAS0zD,GAAcvpE,GACrB,IAAK,MAAM1mC,KAAO0mC,GAAUipE,GAC1B,OAAO,EAGT,OAAO,ECxCT,MAAMQ,IAAa,EACbC,IAAgB,EACf,SAASC,GAAuBC,GACrC,MAAMtqD,EAAWuqD,GAAWD,GAC5B,OAAOE,GAAexqD,IAAayqD,GAAgBzqD,IAAa0qD,GAAe1qD,IAAa2qD,GAAe3qD,GAG7G,SAASwqD,GAAeF,GACtB,MAAMtqD,EAAWuqD,GAAWD,GACtBM,EAAQ5qD,EAAS7P,YAAc,IAA4C,aAAtC6P,EAAS6qD,UAAU,EAAGV,IAEjE,OAAKS,EAIE,CACLt4D,SAAU,YACV3qB,MAAOq4B,EAAS6qD,UAAU,GAAIV,IAC9BtiF,OAAQm4B,EAAS6qD,UAAU,GAAIV,KANxB,KAUX,SAASO,GAAeJ,GACtB,MAAMtqD,EAAWuqD,GAAWD,GACtBQ,EAAQ9qD,EAAS7P,YAAc,IAA4C,aAAtC6P,EAAS6qD,UAAU,EAAGV,IAEjE,OAAKW,EAIE,CACLx4D,SAAU,YACV3qB,MAAOq4B,EAAS+qD,UAAU,EAAGX,IAC7BviF,OAAQm4B,EAAS+qD,UAAU,EAAGX,KANvB,KAUJ,SAASO,GAAeL,GAC7B,MAAMtqD,EAAWuqD,GAAWD,GACtBU,EAAQhrD,EAAS7P,YAAc,IAA4C,QAAtC6P,EAAS+qD,UAAU,EAAGZ,KAA0BnqD,EAAS6qD,UAAU,EAAGT,MAAmBpqD,EAAS7P,WAE7I,OAAK66D,EAIE,CACL14D,SAAU,YACV3qB,MAAOq4B,EAAS6qD,UAAU,GAAIT,IAC9BviF,OAAQm4B,EAAS6qD,UAAU,GAAIT,KANxB,KAUX,SAASK,GAAgBH,GACvB,MAAMtqD,EAAWuqD,GAAWD,GACtBW,EAASjrD,EAAS7P,YAAc,GAA2C,QAAtC6P,EAAS+qD,UAAU,EAAGZ,KAAmD,MAAzBnqD,EAASC,SAAS,GAE7G,IAAKgrD,EACH,OAAO,KAGT,MAAM,aACJC,EAAY,WACZC,GACEC,KACJ,IAAIzlG,EAAI,EAER,MAAOA,EAAI,EAAIq6C,EAAS7P,WAAY,CAClC,MAAMk7D,EAASrrD,EAAS+qD,UAAUplG,EAAGwkG,IAErC,GAAIgB,EAAW5pE,IAAI8pE,GACjB,MAAO,CACL/4D,SAAU,aACVzqB,OAAQm4B,EAAS+qD,UAAUplG,EAAI,EAAGwkG,IAClCxiF,MAAOq4B,EAAS+qD,UAAUplG,EAAI,EAAGwkG,KAIrC,IAAKe,EAAa3pE,IAAI8pE,GACpB,OAAO,KAGT1lG,GAAK,EACLA,GAAKq6C,EAAS+qD,UAAUplG,EAAGwkG,IAG7B,OAAO,KAGT,SAASiB,KACP,MAAMF,EAAe,IAAIn0D,IAAI,CAAC,MAAQ,MAAQ,MAAQ,MAAQ,QAE9D,IAAK,IAAIpxC,EAAI,MAAQA,EAAI,QAAUA,EACjCulG,EAAa1sE,IAAI74B,GAGnB,MAAMwlG,EAAa,IAAIp0D,IAAI,CAAC,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,MAAQ,QACpI,MAAO,CACLm0D,eACAC,cAIJ,SAASZ,GAAW7rE,GAClB,GAAIA,aAAgBhnB,SAClB,OAAOgnB,EAGT,GAAIlnB,YAAYC,OAAOinB,GACrB,OAAO,IAAIhnB,SAASgnB,EAAKhgC,QAG3B,GAAIggC,aAAgBlnB,YAClB,OAAO,IAAIE,SAASgnB,GAGtB,MAAM,IAAI9uB,MAAM,cChHH,SAAS07F,GAAiBj+D,EAAar3B,GACpD,MAAM,SACJs8B,GACE+3D,GAAuBh9D,IAAgB,IACrC,gBACJ66D,GACE,QAEJ,OADA,GAAOA,GACAA,EAAgB76D,EAAaiF,EAAUt8B,GCLjCo6B,eAAem7D,GAAWl+D,EAAar3B,EAASgT,GAC7DhT,EAAUA,GAAW,GACrB,MAAMw1F,EAAex1F,EAAQ4vB,OAAS,GAChC6lE,EAAYD,EAAa7uG,MAAQ,QACjC,IACJgzC,GACE3mB,GAAW,GACT0iF,EAAWC,GAAqBF,GACtC,IAAI7lE,EAEJ,OAAQ8lE,GACN,IAAK,cACH9lE,QAAcikE,GAAmBx8D,EAAar3B,EAAS25B,GACvD,MAEF,IAAK,QACH/J,QAAcyjE,GAAah8D,EAAar3B,EAAS25B,GACjD,MAEF,IAAK,OACH/J,QAAc0lE,GAAiBj+D,EAAar3B,GAC5C,MAEF,QACE,IAAO,GAOX,MAJkB,SAAdy1F,IACF7lE,EAAQ+iE,GAAa/iE,IAGhBA,EAGT,SAAS+lE,GAAqBhvG,GAC5B,OAAQA,GACN,IAAK,OACL,IAAK,OACH,OAAO6rG,KAET,QAEE,OADAD,GAAqB5rG,GACdA,GC7Cb,MAAMjD,GAAa,CAAC,MAAO,MAAO,OAAQ,MAAO,OAAQ,MAAO,MAAO,OACjEkyG,GAAa,CAAC,YAAa,aAAc,YAAa,aAAc,YAAa,2BAA4B,iBACtGC,GAAc,CACzB7xE,GAAI,QACJ7hC,OAAQ,SACR6I,KAAM,SACNzE,QAAS,GACTgjD,UAAWqsD,GACXnyG,WAAYC,GACZ0rC,MAAOmmE,GACP5rD,MAAO,CAACtS,GAAexwC,QAAQwtG,GAAuB,IAAI3yF,SAAS21B,MACnEr3B,QAAS,CACP4vB,MAAO,CACLjpC,KAAM,OACN4gD,QAAQ,KCjBd,SAASuuD,GAAOx+D,GACd,MAAMy+D,EAAYz+D,EAAK,GACjB0+D,EAAW1+D,EAAKA,EAAKjvC,OAAS,GACpC,MAAqB,MAAd0tG,GAAkC,MAAbC,GAAkC,MAAdD,GAAkC,MAAbC,EAGxD,QACbhrG,KAAM,OACNvH,WAAY,CAAC,OAAQ,WACrB8lD,UAAW,CAAC,mBAAoB,wBAChCG,SAAUosD,GACVl9D,cAAe3J,KAAKG,OCLtB,MAAM,GAA2C,QAC3C6mE,GAAkB,aAAO5nB,MAAQ,aAAOA,KAAK5mD,QAEnD,GAAIwuE,IAAmBA,KAAoB,GACzC,MAAM,IAAIr8F,MAAM,yCAAyClK,OAAOumG,GAAiB,QAAQvmG,OAAO,KAG7FumG,KACH,EAAI9uG,IAAI,EAAG,WAAWuI,OAAO,IAA7B,GACA,aAAO2+E,KAAOxsF,OAAO4wB,OAAO,aAAO47D,MAAQ,GAAI,CAC7C5mD,QAAS,GACTlhC,QAAO,GACPY,IAAA,EACA+uG,iBAAkBhhE,KAEpBgT,GAAgB,CAAC,GAAY,CAAC2tD,GAAa,CACzC9B,YAAa,CACXoC,iBAAkB,aAKT,oBAAW,KCxB1B,MAAMC,GAAkB,MAClBC,GAA4B,MAC5BC,GAAsB,MACtBh7F,GAAsB,MACtBi7F,GAA2C,MAC3CC,GAAwB,MACxBC,GAAqC,MAC5B,MAAM,WAAc,GACjC,mBAAmB1zG,EAAIywC,EAAO,IAC5B,MAAM/2B,EAAS,gBAAS1Z,GAClB2zG,EAAgB,GAAY3zG,EAAI,GAAS41E,aAC/C,IAAIlI,EAAYh0D,GAAUi6F,EAE1B,IAAK,MAAM1yG,KAAOwvC,EAChB,OAAQxvC,GACN,IAAK,UACHysE,EAAYA,GAAah0D,EACzB,MAEF,IAAK,SACHg0D,EAAYA,GAAaimC,EACzB,MAEF,QACE,IAAO,GAIb,OAAOjmC,EAGT,YAAY1tE,EAAIywC,EAAO,IACrB17B,MAAM/U,EAAIywC,GACV3rC,KAAKxE,OAAS,KACdwE,KAAK8uG,eAAgB,EACrB9uG,KAAK+uG,gBAAkB,KACvB/0G,OAAO2wC,KAAK3qC,MAGd,wBACE,OAAOA,KAAK8+E,MAAM2vB,IAGpB,qBAAoB,aAClBO,GAAe,GACb,IACF,OAAOhvG,KAAK8+E,MAAMkwB,EAAeJ,GAAqCD,IAGxE,8BACE,OAAO3uG,KAAK8+E,MAAM4vB,IAGpB,MAAMlzG,GACJ,OAAIwE,KAAK8uG,gBAIT9uG,KAAKxE,OAASA,EACdwE,KAAK6hE,IAAIrsD,WAAWxV,KAAKxE,OAAQwE,KAAK0V,SAJ7B1V,KAQX,MACE,OAAIA,KAAK8uG,eAIL9uG,KAAKxE,SACPwE,KAAK6hE,IAAIpsD,SAASzV,KAAKxE,QACvBwE,KAAKxE,OAAS,KACdwE,KAAK8uG,eAAgB,GANd9uG,KAYX,oBACE,IAAKA,KAAK8uG,cACR,OAAO,EAGT,MAAMG,EAAkBjvG,KAAK6hE,IAAIqtC,kBAAkBlvG,KAAK0V,OAAQ84F,IAMhE,OAJIS,IACFjvG,KAAK8uG,eAAgB,GAGhBG,EAGT,kBACE,OAAOjvG,KAAK6hE,IAAIrgE,aAAaiS,IAG/B,YACE,OAAOzT,KAAK6hE,IAAIqtC,kBAAkBlvG,KAAK0V,OAAQ64F,IAGjD,uBACE,OAAOvuG,KAAKmvG,YAAc,IAG5B,WAAW56F,EAAQiG,OAAOqqB,mBACxB,GAAI7kC,KAAK+uG,gBACP,OAAO/uG,KAAK+uG,gBAGd,IAAIK,EAAU,EAgBd,OAfApvG,KAAK+uG,gBAAkB,IAAIv7D,QAAQ,CAACl8B,EAASsjC,KAC3C,MAAMy0D,EAAO,KACPrvG,KAAKsvG,qBACPh4F,EAAQtX,KAAKmvG,aACbnvG,KAAK+uG,gBAAkB,MACdK,IAAY76F,GACrBqmC,EAAO,aACP56C,KAAK+uG,gBAAkB,MAEvBQ,sBAAsBF,IAI1BE,sBAAsBF,KAEjBrvG,KAAK+uG,gBAGd,gBACE,OAAO,GAAMhzD,YAAY/7C,KAAK9E,IAAM8E,KAAK6hE,IAAIvsD,cAAgB,KAG/D,gBACEtV,KAAK6hE,IAAItsD,YAAYvV,KAAK0V,SCxIvB,SAAS,GAAsBgb,GACpC,MAAyB,qBAAX32B,QAA0BA,OAAOw1G,sBAAwBx1G,OAAOw1G,sBAAsB7+E,GAAYja,WAAWia,EAAU,IAAO,IAEvI,SAAS8+E,GAAqBC,GACnC,MAAyB,qBAAX11G,QAA0BA,OAAOy1G,qBAAuBz1G,OAAOy1G,qBAAqBC,GAAWtwE,aAAaswE,GCD5H,MAAM,GAAS,2BAAmC,qBAAbpxG,SACrC,IAAIqxG,GAAgB,EACL,MAAM,GACnB,YAAYj7E,EAAQ,IAClB,MAAM,gBACJk7E,EAAkBhkE,IAAQ6yB,GAAgB7yB,IAAK,UAC/CikE,EAAY,KAAI,aAChBC,EAAe,SAAQ,SACvBC,EAAW,SAAQ,WACnBC,EAAa,SAAQ,QACrBr2D,EAAO,GACPx+C,EAAK,KAAI,UACT80G,EAAY,GAAE,MACdt1F,GAAQ,EAAK,kBACbu6D,GAAoB,EAAK,mBACzBg7B,GAAqB,EAAI,wBACzBC,GAA0B,EAAI,MAC9BzhE,EAAQoyB,GAAU5/C,IAAI,kBAAkByuF,OACtCj7E,EACJ,IAAI,gBACFqpC,GAAkB,GAChBrpC,EAEA,wBAAyBA,IAC3B,GAAIm8B,WAAW,sBAAuB,kBAAtC,GACAkN,EAAkBrpC,EAAM07E,qBAG1BnwG,KAAKy0B,MAAQ,CACXk7E,kBACAC,YACAC,eACAC,WACAC,aACAr2D,UACAx+C,KACA80G,YACAt1F,QACAu6D,qBAEFj1E,KAAK9E,GAAKA,EACV8E,KAAKowG,YAAc,KACnBpwG,KAAK4mF,SAAW,KAChB5mF,KAAKyuC,MAAQA,EACbzuC,KAAKqwG,QAAUrwG,KAAKyuC,MAAMxtB,IAAI,YAC9BjhB,KAAKswG,QAAUtwG,KAAKyuC,MAAMxtB,IAAI,YAC9BjhB,KAAKuwG,UAAYvwG,KAAKyuC,MAAMxtB,IAAI,cAChCjhB,KAAKwwG,cAAe,EACpBxwG,KAAKywG,UAAW,EAChBzwG,KAAK0wG,kBAAoB,KACzB1wG,KAAK2wG,kBAAoB,KACzB3wG,KAAK4wG,kBAAoB,KACzB5wG,KAAK6wG,cAAgB,EACrB7wG,KAAK86C,SAAS,CACZm1D,qBACAC,0BACApyC,oBAEF99D,KAAKmZ,MAAQnZ,KAAKmZ,MAAM9c,KAAK2D,MAC7BA,KAAKmhC,KAAOnhC,KAAKmhC,KAAK9kC,KAAK2D,MAC3BA,KAAK8wG,iBAAmB,KACxB9wG,KAAK+wG,aAAe/wG,KAAK+wG,aAAa10G,KAAK2D,MAC3CA,KAAKgxG,cAAgBhxG,KAAKgxG,cAAc30G,KAAK2D,MAG/C,SACEA,KAAKmhC,OAELnhC,KAAKixG,YAAY,MAGnB,eAAevpB,GAGb,OAFA,GAAyB,kBAAXA,GACd1nF,KAAKowG,YAAcpwG,KAAKowG,aAAe1oB,EAChC1nF,KAGT,SAASy0B,GAaP,MAZI,uBAAwBA,IAC1Bz0B,KAAKiwG,mBAAqBx7E,EAAMw7E,oBAG9B,4BAA6Bx7E,IAC/Bz0B,KAAKkwG,wBAA0Bz7E,EAAMy7E,yBAGnC,oBAAqBz7E,IACvBz0B,KAAK89D,gBAAkBrpC,EAAMqpC,iBAGxB99D,KAGT,MAAM2rC,EAAO,IACX,GAAI3rC,KAAKywG,SACP,OAAOzwG,KAGTA,KAAKywG,UAAW,EAEhB,MAAMr1D,EAAep7C,KAAKkxG,sBAAsBpkE,KAAK,KAC9C9sC,KAAKywG,UAAYzwG,KAAKwwG,aAClB,MAGTxwG,KAAKmxG,oBAAoBxlE,GAEzB3rC,KAAKoxG,qBAELpxG,KAAKqxG,sBAELrxG,KAAKsxG,0BAELtxG,KAAKuxG,sBAELvxG,KAAKwxG,6BAELxxG,KAAKyxG,kBAELzxG,KAAK0xG,cAAgB,GAAM31D,YAAY/7C,KAAK9E,GAAI,CAAC,WAAa,IAAI,GAAM8E,KAAK9E,IAAM,KACnF8E,KAAKwwG,cAAe,EACbxwG,KAAK6vG,aAAa7vG,KAAK2xG,kBAC7B7kE,KAAK8kE,IACF5xG,KAAKywG,WACPzwG,KAAK6xG,iBAAiBD,GAAc,KAEjB,IAAfA,GACF5xG,KAAK8xG,gBASX,OAJI9xG,KAAKy0B,MAAMilB,SACb0B,EAAagI,MAAMpjD,KAAKy0B,MAAMilB,SAGzB15C,KAGT,SACE,OAAIA,KAAK+xG,kBAIT/xG,KAAKgyG,eAELhyG,KAAKiyG,cAELjyG,KAAKuxG,sBAELvxG,KAAKkyG,aAAalyG,KAAK2xG,gBAEvB3xG,KAAKmyG,oBAEDnyG,KAAKoyG,WAAapyG,KAAK9E,GAAGm3G,QAC5BryG,KAAK9E,GAAGm3G,SAGNryG,KAAK4wG,oBACP5wG,KAAK4wG,kBAAkB5wG,MAEvBA,KAAK2wG,kBAAoB,KACzB3wG,KAAK4wG,kBAAoB,MAG3B5wG,KAAKsyG,cAxBItyG,KA6BX,OAYE,OAXIA,KAAKywG,WACPzwG,KAAKuyG,wBAELvyG,KAAKwyG,sBAAsBxyG,KAAK0wG,mBAEhC1wG,KAAK2wG,kBAAoB,KACzB3wG,KAAK4wG,kBAAoB,KACzB5wG,KAAK0wG,kBAAoB,KACzB1wG,KAAKywG,UAAW,GAGXzwG,KAGT,eAAe4mF,GAEb,OADA5mF,KAAK4mF,SAAWA,EACT5mF,KAAK4mF,SAGd,iBACE5mF,KAAK4mF,SAAW,KAGlB,gBASE,OARA5mF,KAAKgoF,eAAe,iBAEfhoF,KAAK2wG,oBACR3wG,KAAK2wG,kBAAoB,IAAIn9D,QAAQl8B,IACnCtX,KAAK4wG,kBAAoBt5F,KAItBtX,KAAK2wG,kBAGd,kBAGE,OAFA3wG,KAAKgoF,eAAe,mBACdhoF,KAAKyyG,gBACJzyG,KAAK9E,GAAGwH,OAAOyqC,YAGxB,gBACE,OAAOntC,KAAK9E,GAAG62G,gBAGjB,mBAAmBj1G,GACjB,OAAOkD,KAAKy0B,MAAMk7E,mBAAmB7yG,GAGvC,gBAAgBA,GACd,OAAOkD,KAAKy0B,MAAMo7E,gBAAgB/yG,GAGpC,YAAYA,GACV,OAAOkD,KAAKy0B,MAAMq7E,YAAYhzG,GAGhC,cAAcA,GACZ,OAAOkD,KAAKy0B,MAAMs7E,cAAcjzG,GAGlC,oBAAoBq/B,EAAI2mC,EAAe,GACrC,MAAMn0C,EAAUtwB,SAAS6hE,eAAe/jC,GACxC,OAAOxN,EAAUnU,OAAOmU,EAAQ1xB,OAAS6lE,EAG3C,oBAEE,OADA,GAAIvN,QAAQ,kCAAmC,yBAA/C,GACOv1D,KAGT,aACE,MAAM0yG,EAAc,KACb1yG,KAAKywG,WAIVzwG,KAAKunF,SACLvnF,KAAK0wG,kBAAoB1wG,KAAK2yG,uBAAuBD,KAGvD1yG,KAAKwyG,sBAAsBxyG,KAAK0wG,mBAEhC1wG,KAAK0wG,kBAAoB1wG,KAAK2yG,uBAAuBD,GAGvD,sBAcE,OAbK1yG,KAAK8wG,mBACR9wG,KAAK8wG,iBAAmB,GAAS,IAAIt9D,QAAQ,CAACl8B,EAASsjC,KACjD,IAAkC,aAAxBv8C,SAAS4hE,WACrB3oD,EAAQjZ,UAIVtE,OAAO4I,iBAAiB,OAAQ,KAC9B2U,EAAQjZ,cAEPm1C,QAAQl8B,QAAQ,KAGhBtX,KAAK8wG,iBAGd,YAAYpH,GACN1pG,KAAK0pG,UACP1pG,KAAK0pG,QAAQxkE,SACbllC,KAAK0pG,QAAQkJ,cAAgB,MAG3BlJ,IACFA,EAAQkJ,cAAgB5yG,MAG1BA,KAAK0pG,QAAUA,EAGjB,sBAAsBmJ,GACpB,OAAI7yG,KAAK0pG,SAAW1pG,KAAK0pG,QAAQ8F,qBACxBxvG,KAAK0pG,QAAQ8F,qBAAqBqD,GAGpCrD,GAAqBqD,GAG9B,uBAAuBC,GACrB,GAAI9yG,KAAKywG,SACP,OAAIzwG,KAAK0pG,SAAW1pG,KAAK0pG,QAAQ6F,sBACxBvvG,KAAK0pG,QAAQ6F,sBAAsBuD,GAGrC,GAAsBA,GAMjC,gBAAgBh2G,GACVkD,KAAK0pG,QACP1pG,KAAK0pG,QAAQwI,gBAAgBp1G,GAK/BkD,KAAK8vG,YAAYhzG,GAGnB,oBACEkD,KAAKowG,YAAc,KAGrB,cACEpwG,KAAKwxG,6BAELxxG,KAAKyxG,kBAELzxG,KAAK+yG,qBAGP,0BACE/yG,KAAK2xG,eAAiB,CACpBz2G,GAAI8E,KAAK9E,GACTimC,KAAMnhC,KAAKmhC,KACXz+B,OAAQ1C,KAAK9E,GAAGwH,OAChB4jB,YAAatmB,KAAKsmB,YAClBw3C,gBAAiB99D,KAAK89D,gBACtBsyC,YAAa,KACb4C,UAAWh4G,KAAKJ,MAChB8qC,WAAY,EACZutE,KAAM,EACNC,KAAM,EACNn0E,KAAM,EACNo0E,UAAWnzG,KAAK4mF,SAChBwsB,MAAOpzG,KACPqzG,eAAgBrzG,KAChBszG,eAAgB,MAIpB,sBACE,MAAM,MACJxpF,EAAK,OACLE,EAAM,OACN/c,GACEjN,KAAKuzG,oBAELzpF,IAAU9pB,KAAK2xG,eAAe7nF,OAASE,IAAWhqB,KAAK2xG,eAAe3nF,QACxEhqB,KAAKgoF,eAAe,0BAGlB/6E,IAAWjN,KAAK2xG,eAAe1kG,QACjCjN,KAAKgoF,eAAe,iCAGtBhoF,KAAK2xG,eAAe7nF,MAAQA,EAC5B9pB,KAAK2xG,eAAe3nF,OAASA,EAC7BhqB,KAAK2xG,eAAe1kG,OAASA,EAC7BjN,KAAK2xG,eAAevB,YAAcpwG,KAAKowG,YACvCpwG,KAAK2xG,eAAejsE,WAAa1qC,KAAKJ,MAAQoF,KAAK2xG,eAAeqB,UAE9DhzG,KAAK4mF,UACP5mF,KAAK4mF,SAAS99D,OAAO9oB,KAAK2xG,eAAejsE,YAG3C1lC,KAAK2xG,eAAesB,KAAO5wG,KAAK6lC,MAAMloC,KAAK2xG,eAAe5yE,KAAO,IAAO,IACxE/+B,KAAK2xG,eAAeuB,OACpBlzG,KAAK2xG,eAAe5yE,KAAO/+B,KAAK4mF,SAAW5mF,KAAK4mF,SAASphD,UAAYxlC,KAAK2xG,eAAejsE,WACzF1lC,KAAK2xG,eAAe6B,WAAaxzG,KAAKoyG,UAGxC,wBACEpyG,KAAK+vG,WAAW/vG,KAAK2xG,gBAGvB,iBAAiBC,GACW,kBAAfA,GAA0C,OAAfA,IACpC5xG,KAAK2xG,eAAiB33G,OAAO4wB,OAAO,GAAI5qB,KAAK2xG,eAAgBC,IAIjE,oBAAoBjmE,GAKlB,GAJA3rC,KAAKoyG,UAAYzmE,EAAKjpC,QAAqC,qBAApB42C,iBAAmC3N,EAAKjpC,kBAAkB42C,gBACjG3N,EAAO3xC,OAAO4wB,OAAO,GAAI+gB,EAAM3rC,KAAKy0B,MAAMu7E,WAC1ChwG,KAAK9E,GAAK8E,KAAKy0B,MAAMv5B,GAAK0jE,GAAoB5+D,KAAKy0B,MAAMv5B,GAAIywC,GAAQ3rC,KAAK2vG,gBAAgBhkE,IAErF,gBAAQ3rC,KAAK9E,IAChB,MAAM,IAAI6W,MAAM,4DAGlB,gBAAgB/R,KAAK9E,IAErB8E,KAAKyzG,iBAGP,iBACE,GAAIzzG,KAAK9E,GAAGwH,QAAU1C,KAAKy0B,MAAMm7E,UAAW,CAC1C,MAAM8D,EAAar1G,SAAS0sB,cAAc,OAC1C1sB,SAASq3C,KAAKq0D,YAAY2J,GAC1BA,EAAW/5E,MAAMg1B,SAAW,WAC5B,MAAMglD,EAAMt1G,SAAS0sB,cAAc,OACnC4oF,EAAIh6E,MAAMg1B,SAAW,WACrBglD,EAAIh6E,MAAMrtB,KAAO,OACjBqnG,EAAIh6E,MAAMntB,OAAS,OACnBmnG,EAAIh6E,MAAM7P,MAAQ,QAClB6pF,EAAIh6E,MAAM4P,WAAa,QACvBmqE,EAAW3J,YAAY/pG,KAAK9E,GAAGwH,QAC/BgxG,EAAW3J,YAAY4J,GACvB,MAAMvJ,EAAOpqG,KAAKy0B,MAAMm7E,UAAU+D,GAE9BvJ,IACFuJ,EAAIxJ,UAAYC,IAKtB,oBACE,MAAMtgF,EAAQ9pB,KAAK9E,GAAGoiE,mBAChBtzC,EAAShqB,KAAK9E,GAAGyiE,oBACvB,IAAI1wD,EAAS,EACb,MAAM,OACJvK,GACE1C,KAAK9E,GAQT,OANIwH,GAAUA,EAAO69D,aACnBtzD,EAASvK,EAAO06D,YAAc16D,EAAO69D,aAC5Bz2C,EAAQ,GAAKE,EAAS,IAC/B/c,EAAS6c,EAAQE,GAGZ,CACLF,QACAE,SACA/c,UAIJ,kBACMjN,KAAKiwG,oBACPjwG,KAAK9E,GAAGmrB,SAAS,EAAG,EAAGrmB,KAAK9E,GAAGoiE,mBAAoBt9D,KAAK9E,GAAGyiE,qBAI/D,6BACM39D,KAAKkwG,yBACP3wC,GAAgBv/D,KAAK9E,GAAI,CACvB4iE,gBAAiB99D,KAAK89D,kBAK5B,qBACM99D,KAAKy0B,MAAMwgD,oBACbj1E,KAAKsmB,YAAc,IAAI,GAAYtmB,KAAK9E,KAI5C,qBACM8E,KAAKsmB,aACPtmB,KAAKsmB,YAAYm5C,OAAO,CACtB31C,MAAO9pB,KAAK9E,GAAGoiE,mBACftzC,OAAQhqB,KAAK9E,GAAGyiE,sBAKtB,eACE39D,KAAKuwG,UAAU7kE,UACf1rC,KAAKuwG,UAAUqD,YAEX5zG,KAAK0xG,eAAiB1xG,KAAK0xG,cAAcpC,sBAAwBtvG,KAAK0xG,cAAcmC,mBACtF7zG,KAAKyuC,MAAMxtB,IAAI,YAAYqtB,QAAQtuC,KAAK0xG,cAAcoC,wBAGpD9zG,KAAK0xG,eACP1xG,KAAK0xG,cAAcqC,wBAGrB/zG,KAAKqwG,QAAQuD,YAGf,aACE5zG,KAAKqwG,QAAQ3kE,UAET1rC,KAAK0xG,eACP1xG,KAAK0xG,cAAct4F,MAIvB,sBACE,MAAM,OACJ1W,GACE1C,KAAK9E,GAELwH,IACFA,EAAOC,iBAAiB,YAAa3C,KAAK+wG,cAC1CruG,EAAOC,iBAAiB,aAAc3C,KAAKgxG,gBAI/C,aAAaplF,GACX5rB,KAAK2xG,eAAe2B,eAAiB,CAAC1nF,EAAEkiC,QAASliC,EAAEmiC,SAGrD,cAAcniC,GACZ5rB,KAAK2xG,eAAe2B,eAAiB,M,4BCrgBzC,MAAM5jF,GAAc,EACdC,GAAa,EACbC,GAAY,EACZmF,GAAkB,CACtBC,UAAWtF,GACXuF,UAAWtF,GACXuF,QAAStF,IAGX,SAASmyB,GAAK/xC,EAAOgkG,GACnB,IAAK,IAAIlsG,EAAI,EAAGA,EAAIkI,EAAMxP,OAAQsH,IAChC,GAAIksG,EAAQhkG,EAAMlI,IAChB,OAAO,EAIX,OAAO,EAGF,SAASmsG,GAAyB/iF,GACvC,MAAMgjF,EAAahjF,EAAkB9vB,UAAU8rB,QAE/CgE,EAAkB9vB,UAAU8rB,QAAU,SAAiB2D,GACrD,MAAMyF,EAAQt2B,KAAKs2B,MAEfzF,EAAGyE,OAAS,GAAiB,gBAAZzE,EAAG/xB,OACjBijD,GAAKzrB,EAAO1K,GAAKA,EAAEkL,YAAcjG,EAAGiG,YACvCR,EAAMrzB,KAAK4tB,IAIfqjF,EAAW15G,KAAKwF,KAAM6wB,IAGnB,SAASsjF,GAAkB9iF,GAChCA,EAAWjwB,UAAU8rB,QAAU,SAAiB2D,GAC9C,IAAIU,EAAYwD,GAAgBlE,EAAG/xB,MAE/ByyB,EAAY7B,IAAemB,EAAGyE,QAAU,IAC1Ct1B,KAAKq1B,SAAU,GAGb9D,EAAY5B,IAA2B,IAAbkB,EAAG0E,QAC/BhE,EAAY3B,IAGT5vB,KAAKq1B,UAIN9D,EAAY3B,KACd5vB,KAAKq1B,SAAU,GAGjBr1B,KAAK0wB,SAAS1wB,KAAKywB,QAASc,EAAW,CACrCG,SAAU,CAACb,GACXe,gBAAiB,CAACf,GAClB2E,YAAa,QACb5B,SAAU/C,MCxDhBojF,GAAyB,KAAS/iF,mBAClCijF,GAAkB,KAAS9iF,YACpB,MAAMqM,GAAU,KAASA,QACjB,UAAQ,ECJhB,MAAM02E,GAAc,GAAS,CAAC,CAAC,GAAOvyE,IAAK,CAChD5D,MAAO,SACPvM,SAAU,EACViN,UAAW,EACX3Z,QAAQ,IACN,CAAC,GAAOgd,OAAQ,CAClBhd,QAAQ,IACN,CAAC,GAAO+c,MAAO,CACjB/c,QAAQ,IACN,CAAC,GAAO8c,MAAO,CACjB9c,QAAQ,IACN,CAAC,GAAO6c,IAAK,CACflD,UAAW,EACX3Z,QAAQ,IACN,CAAC,GAAOid,MAAO,CACjBjd,QAAQ,IACN,CAAC,GAAO4c,IAAK,CACf3D,MAAO,YACPmB,KAAM,EACNpa,QAAQ,IACN,CAAC,GAAO4c,IAAK,CACf3D,MAAO,SACPjZ,QAAQ,IACN,CAAC,GAAO4c,IAAK,CACf5c,QAAQ,KACJ,KACOqvF,GAA4B,CACvCC,OAAQ,CAAC,SAAU,QAAS,OAC5BzpG,OAAQ,CAAC,SACT0pG,MAAO,CAAC,OACRjd,IAAK,CAAC,QAAS,YAAa,SAAU,OACtCkd,UAAW,CAAC,UACZC,OAAQ,CAAC,QAEEC,GAA0B,CACrCF,UAAW,CAAC,QAEDG,GAAsB,CACjCj/E,YAAa,cACbC,YAAa,cACbC,UAAW,YACXoB,WAAY,cACZC,UAAW,cACXC,SAAU,YACVlC,UAAW,cACXC,UAAW,cACXC,QAAS,aAEE0/E,GAAoB,CAC/BC,WAAY,CAAC,UAAW,SACxBC,aAAc,CAAC,YAAa,YAAa,UAAW,YAAa,WAAY,cAC7EC,aAAc,CAAC,QAAS,eAEbC,GAAuB,CAClCC,IAAK,MACLR,OAAQ,SACRD,UAAW,YACXU,MAAO,QACPX,MAAO,QACPY,QAAS,QACTC,SAAU,QACVC,WAAY,QACZC,UAAW,QACXC,SAAU,QACVC,YAAa,QACb3qG,OAAQ,SACR4qG,YAAa,SACbC,WAAY,SACZC,UAAW,SACXC,aAAc,SACdtB,OAAQ,SACRuB,YAAa,SACbC,WAAY,SACZC,SAAU,SACVC,WAAY,SACZC,WAAY,SACZC,YAAa,SACbC,UAAW,SACXC,aAAc,SACd9e,IAAK,MACL/lC,SAAU,MACVC,QAAS,MACT6kD,MAAO,MACPC,QAAS,MACTC,QAAS,MACTC,SAAU,MACV/kD,OAAQ,MACRglD,UAAW,MACXC,MAAO,QACPC,UAAW,QACXC,WAAY,QACZC,QAAS,QACTC,UAAW,SAEAC,GAAwB,CACnCzlD,MAAO,MACP0lD,SAAU,SACVC,SAAU,YACVjiF,UAAW,cACXC,UAAW,cACXC,QAAS,YACTgiF,UAAW,cACXC,SAAU,aACVC,WAAY,gB,iBCtGd,MAAMC,IAA4C,IAAlC,QAAUx5G,QAAQ,YAC5B,aACJk3G,IACEH,GACE0C,GAAa,QACbC,GAA2B,eAC3BC,GAAuB,GACvBC,GAAmB,IACV,MAAM,GACnB,YAAY9oF,EAAS+B,EAAUvY,EAAU,IACvCnY,KAAK2uB,QAAUA,EACf3uB,KAAK0wB,SAAWA,EAChB1wB,KAAKmY,QAAUne,OAAO4wB,OAAO,CAC3B5F,QAAQ,GACP7M,GACHnY,KAAK0hC,OAASqzE,GAAaltG,OAAOsQ,EAAQupB,QAAU,IACpD1hC,KAAK+zF,YAAc/zF,KAAK+zF,YAAY13F,KAAK2D,MACzCA,KAAK0hC,OAAOxlC,QAAQ+hC,GAAStP,EAAQhsB,iBAAiBs7B,EAAOj+B,KAAK+zF,cAAa,SAAmB,CAChG2jB,SAAS,KAIb,UACE13G,KAAK0hC,OAAOxlC,QAAQ+hC,GAASj+B,KAAK2uB,QAAQvW,oBAAoB6lB,EAAOj+B,KAAK+zF,cAG5E,gBAAgBxiE,EAAW3wB,GACrB2wB,IAAc+lF,KAChBt3G,KAAKmY,QAAQ6M,OAASpkB,GAI1B,YAAYq9B,GACV,IAAKj+B,KAAKmY,QAAQ6M,OAChB,OAGF,IAAI/nB,EAAQghC,EAAM9K,OAEd,QAAOwkF,aACLN,IAAWp5E,EAAM25E,YAAc,QAAOD,WAAWE,kBACnD56G,GAAS,QAAO+gE,kBAGd//B,EAAM25E,YAAc,QAAOD,WAAWG,iBACxC76G,GAASu6G,KAIb,MAAMO,EAAgB,CACpB3yG,EAAG64B,EAAM5J,QACThvB,EAAG44B,EAAM3J,SAGG,IAAVr3B,GAAeA,EAAQs6G,KAA6B,IACtDt6G,EAAQoF,KAAK6lC,MAAMjrC,EAAQs6G,KAGzBt5E,EAAMs3D,UAAYt4F,IACpBA,GAAgBw6G,IAGlBz3G,KAAK+0F,SAAS92D,GAAQhhC,EAAO86G,GAG/B,SAASnkF,EAAUyY,EAAOsiB,GACxB3uD,KAAK0wB,SAAS,CACZ5xB,KAAMw4G,GACN7pG,OAAQkhD,EACRtiB,QACAzY,WACA4B,YAAa,QACbh6B,OAAQo4B,EAASp4B,UCzEvB,MAAM,aACJs5G,IACEF,GACEoD,GAAkB,cAClBC,GAAkB,cAClBC,GAAiB,aACjBC,GAAmB,eACV,MAAMC,GACnB,YAAYzpF,EAAS+B,EAAUvY,EAAU,IACvCnY,KAAK2uB,QAAUA,EACf3uB,KAAK0wB,SAAWA,EAChB1wB,KAAKq1B,SAAU,EACfr1B,KAAKmY,QAAUne,OAAO4wB,OAAO,CAC3B5F,QAAQ,GACP7M,GACHnY,KAAKq4G,gBAAkBr4G,KAAKmY,QAAQ6M,OACpChlB,KAAKs4G,iBAAmBt4G,KAAKmY,QAAQ6M,OACrChlB,KAAKu4G,eAAiBv4G,KAAKmY,QAAQ6M,OACnChlB,KAAKw4G,gBAAkBx4G,KAAKmY,QAAQ6M,OACpChlB,KAAK0hC,OAASozE,GAAajtG,OAAOsQ,EAAQupB,QAAU,IACpD1hC,KAAK+zF,YAAc/zF,KAAK+zF,YAAY13F,KAAK2D,MACzCA,KAAK0hC,OAAOxlC,QAAQ+hC,GAAStP,EAAQhsB,iBAAiBs7B,EAAOj+B,KAAK+zF,cAGpE,UACE/zF,KAAK0hC,OAAOxlC,QAAQ+hC,GAASj+B,KAAK2uB,QAAQvW,oBAAoB6lB,EAAOj+B,KAAK+zF,cAG5E,gBAAgBxiE,EAAW3wB,GACrB2wB,IAAcymF,KAChBh4G,KAAKq4G,gBAAkBz3G,GAGrB2wB,IAAc0mF,KAChBj4G,KAAKw4G,gBAAkB53G,GAGrB2wB,IAAc2mF,KAChBl4G,KAAKu4G,eAAiB33G,GAGpB2wB,IAAc4mF,KAChBn4G,KAAKs4G,iBAAmB13G,GAI5B,YAAYq9B,GACVj+B,KAAKy4G,gBAAgBx6E,GACrBj+B,KAAK04G,eAAez6E,GACpBj+B,KAAK24G,iBAAiB16E,GACtBj+B,KAAK44G,gBAAgB36E,GAGvB,gBAAgBA,GACVj+B,KAAKw4G,iBACY,cAAfv6E,EAAMn/B,MACRkB,KAAK0wB,SAAS,CACZ5xB,KAAMm5G,GACNrkF,SAAUqK,EACVzI,YAAa,QACbh6B,OAAQyiC,EAAMziC,SAMtB,eAAeyiC,GACTj+B,KAAKu4G,gBACY,aAAft6E,EAAMn/B,MACRkB,KAAK0wB,SAAS,CACZ5xB,KAAMo5G,GACNtkF,SAAUqK,EACVzI,YAAa,QACbh6B,OAAQyiC,EAAMziC,SAMtB,iBAAiByiC,GACXj+B,KAAKs4G,kBACY,eAAfr6E,EAAMn/B,MACRkB,KAAK0wB,SAAS,CACZ5xB,KAAMq5G,GACNvkF,SAAUqK,EACVzI,YAAa,QACbh6B,OAAQyiC,EAAMziC,SAMtB,gBAAgByiC,GACd,GAAIj+B,KAAKq4G,gBACP,OAAQp6E,EAAMn/B,MACZ,IAAK,YACCm/B,EAAM3I,QAAU,IAClBt1B,KAAKq1B,SAAU,GAGjB,MAEF,IAAK,YACiB,IAAhB4I,EAAM1I,QACRv1B,KAAKq1B,SAAU,GAGZr1B,KAAKq1B,SACRr1B,KAAK0wB,SAAS,CACZ5xB,KAAMk5G,GACNpkF,SAAUqK,EACVzI,YAAa,QACbh6B,OAAQyiC,EAAMziC,SAIlB,MAEF,IAAK,UACHwE,KAAKq1B,SAAU,EACf,MAEF,WC1HR,MAAM,WACJw/E,IACED,GACEiE,GAAkB,UAClBC,GAAgB,QACP,MAAMC,GACnB,YAAYpqF,EAAS+B,EAAUvY,EAAU,IACvCnY,KAAK2uB,QAAUA,EACf3uB,KAAK0wB,SAAWA,EAChB1wB,KAAKmY,QAAUne,OAAO4wB,OAAO,CAC3B5F,QAAQ,GACP7M,GACHnY,KAAKg5G,gBAAkBh5G,KAAKmY,QAAQ6M,OACpChlB,KAAKi5G,cAAgBj5G,KAAKmY,QAAQ6M,OAClChlB,KAAK0hC,OAASmzE,GAAWhtG,OAAOsQ,EAAQupB,QAAU,IAClD1hC,KAAK+zF,YAAc/zF,KAAK+zF,YAAY13F,KAAK2D,MACzC2uB,EAAQuqF,SAAW/gG,EAAQ+gG,UAAY,EACvCvqF,EAAQgL,MAAMw/E,QAAU,OACxBn5G,KAAK0hC,OAAOxlC,QAAQ+hC,GAAStP,EAAQhsB,iBAAiBs7B,EAAOj+B,KAAK+zF,cAGpE,UACE/zF,KAAK0hC,OAAOxlC,QAAQ+hC,GAASj+B,KAAK2uB,QAAQvW,oBAAoB6lB,EAAOj+B,KAAK+zF,cAG5E,gBAAgBxiE,EAAW3wB,GACrB2wB,IAAcsnF,KAChB74G,KAAKg5G,gBAAkBp4G,GAGrB2wB,IAAcunF,KAChB94G,KAAKi5G,cAAgBr4G,GAIzB,YAAYq9B,GACV,MAAMm7E,EAAgBn7E,EAAMziC,QAAUyiC,EAAMo7E,WAEd,UAA1BD,EAAcE,SAA8C,SAAvBF,EAAct6G,MAA6C,aAA1Bs6G,EAAcE,UAIpFt5G,KAAKg5G,iBAAkC,YAAf/6E,EAAMn/B,MAChCkB,KAAK0wB,SAAS,CACZ5xB,KAAM+5G,GACNjlF,SAAUqK,EACV9hC,IAAK8hC,EAAM9hC,IACXX,OAAQyiC,EAAMziC,SAIdwE,KAAKi5G,eAAgC,UAAfh7E,EAAMn/B,MAC9BkB,KAAK0wB,SAAS,CACZ5xB,KAAMg6G,GACNllF,SAAUqK,EACV9hC,IAAK8hC,EAAM9hC,IACXX,OAAQyiC,EAAMziC,WCzDtB,MAAM,GAAa,cACJ,MAAM+9G,GACnB,YAAY5qF,EAAS+B,EAAUvY,EAAU,IACvCnY,KAAK2uB,QAAUA,EACf3uB,KAAK0wB,SAAWA,EAChB1wB,KAAKmY,QAAUne,OAAO4wB,OAAO,CAC3B5F,QAAQ,GACP7M,GACHnY,KAAK+zF,YAAc/zF,KAAK+zF,YAAY13F,KAAK2D,MACzC2uB,EAAQhsB,iBAAiB,cAAe3C,KAAK+zF,aAG/C,UACE/zF,KAAK2uB,QAAQvW,oBAAoB,cAAepY,KAAK+zF,aAGvD,gBAAgBxiE,EAAW3wB,GACrB2wB,IAAc,KAChBvxB,KAAKmY,QAAQ6M,OAASpkB,GAI1B,YAAYq9B,GACLj+B,KAAKmY,QAAQ6M,QAIlBhlB,KAAK0wB,SAAS,CACZ5xB,KAAM,GACN2O,OAAQ,CACNrI,EAAG64B,EAAM5J,QACThvB,EAAG44B,EAAM3J,SAEXV,SAAUqK,EACVzI,YAAa,QACbh6B,OAAQyiC,EAAMziC,UCnCpB,MAAMg+G,GAAa,EACbC,GAAa,EACbC,GAAW,EACX,GAAe,CACnBhkF,YAAa8jF,GACb7jF,YAAa8jF,GACb7jF,UAAW8jF,GACX1kF,UAAWwkF,GACXvkF,UAAWwkF,GACXvkF,QAASwkF,IAELC,GAAyB,EACzBC,GAA2B,EAC3BC,GAA0B,EAC1BC,GAA0B,EAC1BC,GAA4B,EAC5BC,GAA2B,EAC3BC,GAAgC,EAChCC,GAAiC,EACjCC,GAAkC,EACjC,SAASC,GAAan8E,GAC3B,MAAM1M,EAAY,GAAa0M,EAAMrK,SAAS90B,MAE9C,IAAKyyB,EACH,OAAO,KAGT,MAAM,QACJ8oF,EAAO,OACP/kF,EAAM,MACNC,GACE0I,EAAMrK,SACV,IAAI0mF,GAAa,EACbC,GAAe,EACfzjB,GAAc,EAgBlB,OAdIvlE,IAAcmoF,IAAYnoF,IAAckoF,KAAej/F,OAAOC,SAAS4/F,IACzEC,EAAa/kF,IAAUokF,GACvBY,EAAehlF,IAAUqkF,GACzB9iB,EAAcvhE,IAAUskF,IACftoF,IAAckoF,IACvBa,EAAat7G,QAAQq7G,EAAUJ,IAC/BM,EAAev7G,QAAQq7G,EAAUF,IACjCrjB,EAAc93F,QAAQq7G,EAAUH,KACvB3oF,IAAcioF,KACvBc,EAAahlF,IAAWwkF,GACxBS,EAAejlF,IAAWykF,GAC1BjjB,EAAcxhE,IAAW0kF,IAGpB,CACLM,aACAC,eACAzjB,eAGG,SAAS0jB,GAAkBv8E,EAAOw8E,GACvC,MAAM,SACJ7mF,GACEqK,EAEJ,IAAKA,EAAMxwB,SAAW+M,OAAOC,SAASmZ,EAASS,SAC7C,OAAO,KAGT,MAAM5mB,EAASwwB,EAAMxwB,QAAU,CAC7BrI,EAAGwuB,EAASS,QACZhvB,EAAGuuB,EAASU,SAERm2D,EAAOgwB,EAAYC,wBACnB9sD,EAAS68B,EAAK3gE,MAAQ2wF,EAAYE,aAAe,EACjD9sD,EAAS48B,EAAKzgE,OAASywF,EAAYG,cAAgB,EACnDpoF,EAAe,CACnBptB,GAAIqI,EAAOrI,EAAIqlF,EAAKn+E,KAAOmuG,EAAYI,YAAcjtD,EACrDvoD,GAAIoI,EAAOpI,EAAIolF,EAAKh+E,IAAMguG,EAAYK,WAAajtD,GAErD,MAAO,CACLpgD,SACA+kB,gBC7EJ,MAAMuoF,GAAkB,CACtB1B,WAAY,OACZhuE,SAAU,GAEG,MAAM,GACnB,YAAY6+C,GACVlqF,KAAKkqF,aAAeA,EACpBlqF,KAAKugC,SAAW,GAChBvgC,KAAKg7G,kBAAoB,IAAIz2E,IAC7BvkC,KAAK+zF,YAAc/zF,KAAK+zF,YAAY13F,KAAK2D,MACzCA,KAAKi7G,SAAU,EAGjB,UACE,OAAQj7G,KAAKi7G,QAGf,IAAIn8G,EAAMouB,EAASye,EAAMxB,GAAO,EAAOutE,GAAU,GAC/C,MAAM,SACJn3E,EAAQ,kBACRy6E,GACEh7G,KAEA2rC,IAAyB,kBAATA,GAAqBA,EAAKhpC,oBAC5CgpC,EAAO,CACL0tE,WAAY1tE,IAIhBA,EAAOA,EAAO3xC,OAAO4wB,OAAO,GAAImwF,GAAiBpvE,GAAQovE,GACzD,IAAIrwC,EAAUswC,EAAkB/5F,IAAI0qB,EAAK0tE,YAEpC3uC,IACHA,EAAU,GACVswC,EAAkBl7F,IAAI6rB,EAAK0tE,WAAY3uC,IAGzC,MAAMm5B,EAAQ,CACZ/kG,OACAouB,UACAmsF,WAAY1tE,EAAK0tE,WACjBhuE,SAAUM,EAAKN,UAGblB,IACF05D,EAAM15D,MAAO,GAGXutE,IACF7T,EAAM6T,SAAU,GAGlBn3E,EAASt9B,KAAK4gG,GACd7jG,KAAKi7G,QAAUj7G,KAAKi7G,UAAYpX,EAAM6T,QACtC,IAAIwD,EAAiBxwC,EAAQlqE,OAAS,EAEtC,MAAO06G,GAAkB,EAAG,CAC1B,GAAIxwC,EAAQwwC,GAAgB7vE,UAAYw4D,EAAMx4D,SAC5C,MAGF6vE,IAGFxwC,EAAQ9mE,OAAOs3G,EAAiB,EAAG,EAAGrX,GAGxC,OAAO/kG,EAAMouB,GACX,MAAM,SACJqT,EAAQ,kBACRy6E,GACEh7G,KAEJ,IAAK,IAAI8H,EAAIy4B,EAAS//B,OAAS,EAAGsH,GAAK,EAAGA,IAAK,CAC7C,MAAM+7F,EAAQtjE,EAASz4B,GAEvB,GAAI+7F,EAAM/kG,OAASA,GAAQ+kG,EAAM32E,UAAYA,EAAS,CACpDqT,EAAS38B,OAAOkE,EAAG,GACnB,MAAM4iE,EAAUswC,EAAkB/5F,IAAI4iF,EAAMwV,YAC5C3uC,EAAQ9mE,OAAO8mE,EAAQ7sE,QAAQgmG,GAAQ,GAEhB,IAAnBn5B,EAAQlqE,QACVw6G,EAAkB91E,OAAO2+D,EAAMwV,aAKrCr5G,KAAKi7G,QAAU16E,EAASwhB,KAAK8hD,IAAUA,EAAM6T,SAG/C,YAAYz5E,GACV,GAAIj+B,KAAKqhE,UACP,OAGF,MAAM85C,EAAen7G,KAAKo7G,gBAAgBn9E,GAE1C,IAAIziC,EAASyiC,EAAMrK,SAASp4B,OAE5B,MAAOA,GAAUA,IAAW2/G,EAAaV,YAAa,CAGpD,GAFAz6G,KAAKq7G,MAAMF,EAAc3/G,GAErB2/G,EAAalmB,QACf,OAGFz5F,EAASA,EAAOgyB,WAGlBxtB,KAAKq7G,MAAMF,EAAc,QAG3B,MAAMl9E,EAAOo7E,GACX,MAAM3uC,EAAU1qE,KAAKg7G,kBAAkB/5F,IAAIo4F,GAE3C,GAAI3uC,EAAS,CACX,IAAI4wC,GAA8B,EAElC,MAAMnmB,EAAkB,KACtBl3D,EAAMg3D,SAAU,GAGZsmB,EAA2B,KAC/Bt9E,EAAMg3D,SAAU,EAChBqmB,GAA8B,GAG1BE,EAAkB,GAExB,IAAK,IAAI1zG,EAAI,EAAGA,EAAI4iE,EAAQlqE,OAAQsH,IAAK,CACvC,MAAM,KACJhJ,EAAI,QACJouB,EAAO,KACPid,GACEugC,EAAQ5iE,GAWZ,GAVAolB,EAAQlzB,OAAO4wB,OAAO,GAAIqT,EAAO,CAC/Bn/B,OACAq2F,kBACAomB,8BAGEpxE,GACFqxE,EAAgBv4G,KAAKynE,EAAQ5iE,IAG3BwzG,EACF,MAIJ,IAAK,IAAIxzG,EAAI,EAAGA,EAAI0zG,EAAgBh7G,OAAQsH,IAAK,CAC/C,MAAM,KACJhJ,EAAI,QACJouB,GACEsuF,EAAgB1zG,GACpB9H,KAAKwhC,OAAO1iC,EAAMouB,KAKxB,gBAAgB+Q,GACd,MAAMw8E,EAAcz6G,KAAKkqF,aAAav7D,QACtC,OAAO30B,OAAO4wB,OAAO,GAAIqT,EAAOm8E,GAAan8E,GAAQu8E,GAAkBv8E,EAAOw8E,GAAc,CAC1FxlB,SAAS,EACTwlB,iBC9JN,MAAM,GAAkB,CACtB/4E,OAAQ,KACR1G,YAAa,KACbygF,kBAAmB,GACnB/9E,WACA3C,YAAa,OACbm+E,SAAU,GAEG,MAAM,GACnB,YAAYvqF,EAAU,KAAMxW,EAAU,IACpCnY,KAAKmY,QAAUne,OAAO4wB,OAAO,GAAI,GAAiBzS,GAClDnY,KAAK0hC,OAAS,IAAI6C,IAClBvkC,KAAK07G,cAAgB17G,KAAK07G,cAAcr/G,KAAK2D,MAC7CA,KAAK27G,cAAgB37G,KAAK27G,cAAct/G,KAAK2D,MAC7CA,KAAK47G,WAAWjtF,GAChB,MAAM,OACJ+S,GACEvpB,EAEAupB,GACF1hC,KAAKyhC,GAAGC,GAIZ,WAAW/S,GAOT,GANI3uB,KAAK2uB,SACP3uB,KAAK80B,UAGP90B,KAAK2uB,QAAUA,GAEVA,EACH,OAGF,MAAM,QACJxW,GACEnY,KACE67G,EAAe1jG,EAAQulB,QAC7B19B,KAAKywB,QAAU,IAAIorF,EAAaltF,EAAS,CACvCoM,YAAa5iB,EAAQ4iB,YACrBC,YAAa7iB,EAAQ6iB,aAAeo5E,KACnC3yE,GAAG,eAAgBzhC,KAAK07G,eAEtBvjG,EAAQ6iB,aACXhhC,OAAOiC,KAAKo4G,IAA2Bn4G,QAAQiH,IAC7C,MAAM83B,EAAaj7B,KAAKywB,QAAQxP,IAAI9d,GAEhC83B,GACFo5E,GAA0BlxG,GAAMjH,QAAQ4/G,IACtC7gF,EAAW0C,cAAcm+E,OAMjC,IAAK,MAAMC,KAAkB5jG,EAAQsjG,kBAAmB,CACtD,MAAMxgF,EAAaj7B,KAAKywB,QAAQxP,IAAI86F,GAEpC,GAAI9gF,EAAY,CACd,MAAM+gF,EAAmB7jG,EAAQsjG,kBAAkBM,UAC5CC,EAAiBh3F,OACxBiW,EAAWnb,IAAIk8F,IAInBh8G,KAAKi8G,WAAa,IAAI,GAAWttF,EAAS3uB,KAAK27G,cAAe,CAC5D32F,QAAQ,IAEVhlB,KAAKk8G,UAAY,IAAI9D,GAAUzpF,EAAS3uB,KAAK27G,cAAe,CAC1D32F,QAAQ,IAEVhlB,KAAKm8G,SAAW,IAAIpD,GAASpqF,EAAS3uB,KAAK27G,cAAe,CACxD32F,QAAQ,EACRk0F,SAAU/gG,EAAQ+gG,WAEpBl5G,KAAKo8G,iBAAmB,IAAI7C,GAAiB5qF,EAAS3uB,KAAK27G,cAAe,CACxE32F,QAAQ,IAGV,IAAK,MAAOq3F,EAAYC,KAAmBt8G,KAAK0hC,OACzC46E,EAAej7C,YAClBrhE,KAAKu8G,kBAAkBD,EAAeP,gBAAgB,GAEtD/7G,KAAKywB,QAAQgR,GAAG46E,EAAYC,EAAevoB,cAKjD,UACM/zF,KAAK2uB,UACP3uB,KAAKi8G,WAAWnnF,UAChB90B,KAAKk8G,UAAUpnF,UACf90B,KAAKm8G,SAASrnF,UACd90B,KAAKo8G,iBAAiBtnF,UACtB90B,KAAKywB,QAAQqE,UACb90B,KAAKi8G,WAAa,KAClBj8G,KAAKk8G,UAAY,KACjBl8G,KAAKm8G,SAAW,KAChBn8G,KAAKo8G,iBAAmB,KACxBp8G,KAAKywB,QAAU,KACfzwB,KAAK2uB,QAAU,MAInB,GAAGsP,EAAO/Q,EAASye,GACjB3rC,KAAKw8G,iBAAiBv+E,EAAO/Q,EAASye,GAAM,GAG9C,KAAK1N,EAAO/Q,EAASye,GACnB3rC,KAAKw8G,iBAAiBv+E,EAAO/Q,EAASye,GAAM,GAG9C,MAAM1N,EAAO/Q,EAASye,GACpB3rC,KAAKw8G,iBAAiBv+E,EAAO/Q,EAASye,GAAM,GAAO,GAGrD,IAAI1N,EAAO/Q,GACTltB,KAAKy8G,oBAAoBx+E,EAAO/Q,GAGlC,kBAAkB/pB,EAAMvC,GACtB,MAAM,QACJ6vB,GACEzwB,KAEJ,IAAKywB,EACH,OAGF,MAAMwK,EAAaxK,EAAQxP,IAAI9d,GAE/B,GAAI83B,GAAcA,EAAW9iB,QAAQ6M,SAAWpkB,EAAS,CACvDq6B,EAAWnb,IAAI,CACbkF,OAAQpkB,IAEV,MAAM87G,EAAsBhI,GAAwBvxG,GAEhDu5G,IAAwB18G,KAAKmY,QAAQ6iB,aACvC0hF,EAAoBxgH,QAAQ4/G,IAC1B,MAAMr/E,EAAkBhM,EAAQxP,IAAI66F,GAEhCl7G,GACF67B,EAAgBoB,eAAe16B,GAC/B83B,EAAW6C,mBAAmBg+E,IAE9Br/E,EAAgBqB,mBAAmB36B,KAM3CnD,KAAKi8G,WAAWU,gBAAgBx5G,EAAMvC,GACtCZ,KAAKk8G,UAAUS,gBAAgBx5G,EAAMvC,GACrCZ,KAAKm8G,SAASQ,gBAAgBx5G,EAAMvC,GACpCZ,KAAKo8G,iBAAiBO,gBAAgBx5G,EAAMvC,GAG9C,iBAAiBq9B,EAAO/Q,EAASye,EAAMxB,EAAMutE,GAC3C,GAAqB,kBAAVz5E,EAAoB,CAC7B0N,EAAOze,EAEP,IAAK,MAAMgnE,KAAaj2D,EACtBj+B,KAAKw8G,iBAAiBtoB,EAAWj2D,EAAMi2D,GAAYvoD,EAAMxB,EAAMutE,GAGjE,OAGF,MAAM,QACJjnF,EAAO,OACPiR,GACE1hC,KACEq8G,EAAatF,GAAsB94E,IAAUA,EACnD,IAAIq+E,EAAiB56E,EAAOzgB,IAAIo7F,GAE3BC,IACHA,EAAiB,IAAI,GAAet8G,MACpC0hC,EAAO5hB,IAAIu8F,EAAYC,GACvBA,EAAeP,eAAiB/G,GAAqBqH,IAAeA,EAEhE5rF,GACFA,EAAQgR,GAAG46E,EAAYC,EAAevoB,cAI1CuoB,EAAe37E,IAAI1C,EAAO/Q,EAASye,EAAMxB,EAAMutE,GAE1C4E,EAAej7C,WAClBrhE,KAAKu8G,kBAAkBD,EAAeP,gBAAgB,GAI1D,oBAAoB99E,EAAO/Q,GACzB,GAAqB,kBAAV+Q,EAAoB,CAC7B,IAAK,MAAMi2D,KAAaj2D,EACtBj+B,KAAKy8G,oBAAoBvoB,EAAWj2D,EAAMi2D,IAG5C,OAGF,MAAM,OACJxyD,GACE1hC,KACEq8G,EAAatF,GAAsB94E,IAAUA,EAC7Cq+E,EAAiB56E,EAAOzgB,IAAIo7F,GAElC,GAAKC,IAILA,EAAe96E,OAAOvD,EAAO/Q,GAEzBovF,EAAej7C,WAAW,CAC5B,MAAM,eACJ06C,GACEO,EACJ,IAAIM,GAAmB,EAEvB,IAAK,MAAMC,KAAMn7E,EAAO3lB,SACtB,GAAI8gG,EAAGd,iBAAmBA,IAAmBc,EAAGx7C,UAAW,CACzDu7C,GAAmB,EACnB,MAICA,GACH58G,KAAKu8G,kBAAkBR,GAAgB,IAK7C,cAAc99E,GACZ,MAAM,SACJrK,GACEqK,EACEqT,EAAQqjE,GAAoB/gF,EAAS90B,MAEvCwyC,GACFtxC,KAAKywB,QAAQwB,KAAKqf,EAAOrT,GAI7B,cAAcA,GACZj+B,KAAKywB,QAAQwB,KAAKgM,EAAMn/B,KAAMm/B,ICzOlC,SAAS,MAET,MAAM6+E,GAAY,EAChBjpB,gBACIA,EAAa,WAAa,OAEhC,SAASkpB,GAAaC,GACpB,MAAO,CACL7gF,GAAI6gF,EAAUx1G,OACdsiB,MAAOkzF,EAAUC,UAAU,CAACD,EAAUvpD,OAAQupD,EAAUx1G,SACxDwiB,OAAQgzF,EAAUC,UAAU,CAACD,EAAUvpD,OAAQupD,EAAUx1G,SACzDs/E,OAAQk2B,EAAUC,UAAU,CAACD,EAAUn6E,OAAQm6E,EAAUhtG,QACzD6sF,YAAamgB,EAAU/iG,KACvB0vE,MAAOqzB,EAAUC,UAAU,CAACD,EAAUn6E,OAAQm6E,EAAUhtG,QACxD45E,UAAWozB,EAAUn6E,OACrBi6D,QAASkgB,EAAUE,QAAQF,EAAUG,WAAWphB,KAChDxR,WAAYyyB,EAAUC,UAAU,CAACD,EAAU/iG,KAAM+iG,EAAUI,KAAMJ,EAAUn6E,SAC3E3nC,GAAI8hH,EAAUn6E,OACdmtE,UAAWgN,EAAUn6E,OACrBtmB,WAAYygG,EAAUn6E,OACtBw6E,cAAeL,EAAUvpD,OACzBqK,gBAAiBk/C,EAAUC,UAAU,CAACD,EAAUI,KAAMJ,EAAUvpD,SAChE14B,YAAaiiF,EAAUx1G,OACvB81G,uBAAwBN,EAAUn6E,OAClC06E,mBAAoBP,EAAU/iG,KAC9BujG,SAAUR,EAAU/iG,KACpBmwE,kBAAmB4yB,EAAU/iG,KAC7BowE,yBAA0B2yB,EAAU/iG,KACpCwjG,eAAgBT,EAAU/iG,KAC1ByjG,cAAeV,EAAU/iG,KACzB0jG,OAAQX,EAAU/iG,KAClBy/B,QAASsjE,EAAU/iG,KACnBS,MAAOsiG,EAAUI,KACjBjZ,kBAAmB6Y,EAAUI,KAC7BQ,aAAcZ,EAAUn6E,OACxBg7E,SAAUb,EAAUI,KACpB5V,UAAWwV,EAAUI,KACrBU,wBAAyBd,EAAUn6E,QAIvC,MAAM,GAAe,CACnB1G,GAAI,GACJrS,MAAO,OACPE,OAAQ,OACRqzF,cAAe,EACfxgB,YAAa,KACbmT,UAAW,GACX90G,GAAI,KACJ4rF,OAAQ,GACRgW,QAAS,GACTnT,MAAO,KACPY,WAAY,KACZzsB,iBAAiB,EACjB/iC,YAAa,OACbuiF,uBAAwB,GACxBM,aAAc,KACdC,UAAU,EACVrW,WAAW,EACXsW,wBAAyB,GACzBP,mBAAoB,GACpBC,SAAU,GACVpzB,kBAAmB,GACnBC,yBAA0B,GAC1BozB,eAAgB,GAChBC,cAAe,GACfC,OAAQ,GACRjkE,QAAS,CAACt/C,EAAOu5E,IAAU,EAAIv5E,MAAMA,EAAV,GAC3B2jH,WAAY,KACZjB,aACApiG,OAAO,EACPypF,mBAAmB,GAEN,MAAM,GACnB,YAAY1vE,GACVA,EAAQ,IAAK,MACRA,GAELz0B,KAAKy0B,MAAQ,GACbz0B,KAAK8pB,MAAQ,EACb9pB,KAAKgqB,OAAS,EACdhqB,KAAKg+G,YAAc,KACnBh+G,KAAKumF,aAAe,KACpBvmF,KAAKi+G,cAAgB,KACrBj+G,KAAKk+G,aAAe,KACpBl+G,KAAKm+G,WAAa,KAClBn+G,KAAKgnF,cAAe,EACpBhnF,KAAKo+G,aAAe,GACpBp+G,KAAKq+G,qBAAuB,KAC5Br+G,KAAK4pF,UAAY,KACjB5pF,KAAKs+G,iBAAmB,CACtBC,YAAY,EACZ1qB,YAAY,GAEd7zF,KAAKw+G,SAAWx+G,KAAKw+G,SAASniH,KAAK2D,MACnCA,KAAKy+G,eAAiBz+G,KAAKy+G,eAAepiH,KAAK2D,MAC/CA,KAAK0+G,eAAiB1+G,KAAK0+G,eAAeriH,KAAK2D,MAE3Cy0B,EAAMm1D,WAAan1D,EAAMkqF,kBAC3B,EAAI7yF,KAAK,mHAAT,GAGmB,OAAjB,4BACF,EAAIA,KAAK,2CAAT,GAGG2I,EAAMv5B,IACe,qBAAbmD,WACT2B,KAAK0C,OAAS1C,KAAK4+G,cAAcnqF,IAIrCz0B,KAAK4yG,cAAgB5yG,KAAK6+G,qBAAqBpqF,GAC/Cz0B,KAAKyuC,MAAQ,IAAI,GAAM,CACrBtS,GAAI,YAENn8B,KAAK8+G,QAAU,CACbC,IAAK,EACLC,aAAc,EACdC,qBAAsB,EACtBC,cAAe,EACfC,SAAU,EACVC,UAAW,EACX9O,QAAS,EACT+O,gBAAiB,EACjBhP,QAAS,EACTiP,gBAAiB,EACjBC,aAAc,EACdC,cAAe,EACfC,mBAAoB,EACpBC,UAAW,GAEb1/G,KAAK2/G,gBAAkB,EACvB3/G,KAAK86C,SAASrmB,GAEVA,EAAMqpF,yBACR,GAAkBhjE,SAASrmB,EAAMqpF,yBAGnC99G,KAAK4yG,cAAcz5F,QAGrB,WACEnZ,KAAK4yG,cAAczxE,OACnBnhC,KAAK4yG,cAAgB,KACrB5yG,KAAKq+G,qBAAuB,KAExBr+G,KAAKumF,eACPvmF,KAAKumF,aAAaa,WAClBpnF,KAAKumF,aAAe,KACpBvmF,KAAKg+G,YAAY52B,WACjBpnF,KAAKg+G,YAAc,KACnBh+G,KAAKi+G,cAAc72B,WACnBpnF,KAAKi+G,cAAgB,KACrBj+G,KAAKk+G,aAAa92B,WAClBpnF,KAAKk+G,aAAe,KACpBl+G,KAAKm+G,WAAW/2B,WAChBpnF,KAAKm+G,WAAa,KAClBn+G,KAAKkqF,aAAap1D,UAClB90B,KAAKkqF,aAAe,KACpBlqF,KAAK4/G,QAAQp+E,SACbxhC,KAAK4/G,QAAU,MAGZ5/G,KAAKy0B,MAAM/xB,QAAW1C,KAAKy0B,MAAMv5B,KAAM8E,KAAK0C,SAC/C1C,KAAK0C,OAAOmnG,cAAcgW,YAAY7/G,KAAK0C,QAC3C1C,KAAK0C,OAAS,MAIlB,SAAS+xB,GACPz0B,KAAKyuC,MAAMxtB,IAAI,iBAAiB2yF,YAE5B,iBAAkBn/E,GACpB,EAAI8gC,QAAQ,eAAgB,UAA5B,GAGE,iBAAkB9gC,GACpB,EAAI8gC,QAAQ,eAAgB,UAA5B,GAGE9gC,EAAMkqF,mBAAqBn1B,GAAUxpF,KAAKy0B,MAAMkqF,iBAAkBlqF,EAAMkqF,oBAC1E3+G,KAAK4pF,UAAYn1D,EAAMkqF,kBAGzB3kH,OAAO4wB,OAAO5qB,KAAKy0B,MAAOA,GAE1Bz0B,KAAK8/G,eAAe9/G,KAAKy0B,OAEzB,MAAMsrF,EAAgB/lH,OAAOqK,OAAOrE,KAAKy0B,OACzCz6B,OAAO4wB,OAAOm1F,EAAe,CAC3Bp2B,MAAO3pF,KAAKggH,YACZl2F,MAAO9pB,KAAK8pB,MACZE,OAAQhqB,KAAKgqB,OACb4/D,UAAW5pF,KAAKigH,kBAElBjgH,KAAK4yG,cAAc93D,SAASilE,GAExB//G,KAAKumF,eACPvmF,KAAKg+G,YAAYljE,SAASilE,GAC1B//G,KAAKumF,aAAaY,iBAAiBnnF,KAAKkrF,eAAe,IACvDlrF,KAAKumF,aAAazrC,SAASilE,GAC3B//G,KAAKi+G,cAAcnjE,SAASilE,GAC5B//G,KAAKk+G,aAAapjE,SAASilE,GAC3B//G,KAAKm+G,WAAWrjE,SAASilE,IAG3B//G,KAAKyuC,MAAMxtB,IAAI,iBAAiByqB,UAGlC,YAAYC,EAAO,CACjB27C,kBAAkB,IAElB,GAAItnF,KAAKy0B,MAAMopF,SACb,MAAO,gBAGT,IAAIt2B,EAASvnF,KAAKgnF,aAEdr7C,EAAK27C,mBACPtnF,KAAKgnF,cAAe,GAGtB,MAAMk5B,EAAyBlgH,KAAKg+G,YAAY5N,YAAYzkE,GACtDw0E,EAA0BngH,KAAKumF,aAAa6pB,YAAYzkE,GACxDy0E,EAA2BpgH,KAAKi+G,cAAc7N,YAAYzkE,GAC1D00E,EAA0BrgH,KAAKk+G,aAAa9N,YAAYzkE,GAE9D,OADA47C,EAASA,GAAU24B,GAA0BC,GAA2BC,GAA4BC,EAC7F94B,EAGT,OAAOnmD,GACL,IAAKphC,KAAKumF,aACR,OAGF,MAAM0c,EAAe7hE,GAASphC,KAAKowG,YAAY,CAC7C9oB,kBAAkB,IAGf2b,IAILjjG,KAAKyuC,MAAMxtB,IAAI,gBAAgBiiD,iBAE3BljE,KAAKy0B,MAAM6rF,cACbtgH,KAAKy0B,MAAM6rF,cAAcrd,GAEzBjjG,KAAKi8F,YAAYgH,IAIrB,WACE,OAAOjjG,KAAKg+G,YAAYr0B,MAG1B,aAAac,GACX,OAAOzqF,KAAKg+G,YAAY9yB,aAAaT,GAGvC,WAAW9+C,GACT,MAAMw7D,EAAQnnG,KAAKugH,MAAM,aAAc,kBAAmB50E,GAAM1jC,OAEhE,OAAOk/F,EAAM3mG,OAAS2mG,EAAM,GAAK,KAGnC,oBAAoBx7D,GAElB,OADAA,EAAKjiB,MAAQiiB,EAAKjiB,OAAS,GACpB1pB,KAAKugH,MAAM,aAAc,2BAA4B50E,GAAM1jC,OAGpE,YAAY0jC,GACV,OAAO3rC,KAAKugH,MAAM,cAAe,mBAAoB50E,GAGvD,cAAc0Y,EAAWpB,GAAc,GACrC,IAAK,MAAM9mB,KAAMkoB,EACfrkD,KAAKumF,aAAa9iC,gBAAgB9iB,IAAI,CACpCkjB,WAAY1nB,EACZ0E,KAAMwjB,EAAUloB,GAChB8mB,gBAKN,iBAAiBu9D,GACf,IAAK,MAAMrkF,KAAMqkF,EACfxgH,KAAKumF,aAAa9iC,gBAAgBjiB,OAAOrF,GAI7C,MAAMzQ,EAAQ+0F,EAAS90E,GACrB,MAAM,MACJ8C,GACEzuC,KACJyuC,EAAMxtB,IAAI,cAAciiD,iBACxBz0B,EAAMxtB,IAAIw/F,GAAS7M,YACnB,MAAMzM,EAAQnnG,KAAKm+G,WAAWzyF,GAAQ,CACpCo7D,OAAQ9mF,KAAKumF,aAAam6B,UAAU/0E,GACpCg+C,MAAO3pF,KAAKg+G,YAAY2C,WACxB11B,UAAWjrF,KAAKkrF,aAAav/C,GAC7BuwD,iBAAkBl8F,KAAKumF,aAAaY,oBACjCx7C,IAGL,OADA8C,EAAMxtB,IAAIw/F,GAAS/0E,UACZy7D,EAGT,cAAc1yE,GACZ,IAAI/xB,EAAS+xB,EAAM/xB,OAOnB,GALsB,kBAAXA,IACTA,EAASrE,SAAS6hE,eAAex9D,GACjC,GAAOA,KAGJA,EAAQ,CACXA,EAASrE,SAAS0sB,cAAc,UAChCroB,EAAOy5B,GAAK1H,EAAM0H,IAAM,iBACxB,MAAM5O,EAASkH,EAAMlH,QAAUlvB,SAASq3C,KACxCnoB,EAAOw8E,YAAYrnG,GAIrB,OADA1I,OAAO4wB,OAAOloB,EAAOi3B,MAAOlF,EAAMkF,OAC3Bj3B,EAGT,eAAe+xB,GACb,IAAKz0B,KAAK0C,OACR,OAGF,IAAI,MACFonB,EAAK,OACLE,GACEyK,GAEA3K,GAAmB,IAAVA,KACXA,EAAQtP,OAAOC,SAASqP,GAAS,GAAGjiB,OAAOiiB,EAAO,MAAQA,EAC1D9pB,KAAK0C,OAAOi3B,MAAM7P,MAAQA,IAGxBE,GAAqB,IAAXA,KACZA,EAASxP,OAAOC,SAASuP,GAAU,GAAGniB,OAAOmiB,EAAQ,MAAQA,EAC7DhqB,KAAK0C,OAAOi3B,MAAMg1B,SAAW,WAC7B3uD,KAAK0C,OAAOi3B,MAAM3P,OAASA,GAI/B,oBACE,GAAIhqB,KAAK4gH,4BAA6B,CACpC,MAAM,MACJ92F,EAAK,OACLE,GACEhqB,KACJA,KAAKg+G,YAAYljE,SAAS,CACxBhxB,QACAE,WAEFhqB,KAAKy0B,MAAM+oF,SAAS,CAClB1zF,MAAO9pB,KAAK8pB,MACZE,OAAQhqB,KAAKgqB,UAKnB,4BACE,MAAM,OACJtnB,GACE1C,KAEJ,IAAK0C,EACH,OAAO,EAGT,MAAM2hE,EAAW3hE,EAAO06D,aAAe16D,EAAOonB,MACxCw6C,EAAY5hE,EAAO69D,cAAgB79D,EAAOsnB,OAEhD,OAAIq6C,IAAarkE,KAAK8pB,OAASw6C,IAActkE,KAAKgqB,UAChDhqB,KAAK8pB,MAAQu6C,EACbrkE,KAAKgqB,OAASs6C,GACP,GAMX,qBAAqB7vC,GACnB,MAAM,MACJ3K,EAAK,OACLE,EAAM,GACN9uB,EAAE,UACF80G,EAAS,MACTt1F,EAAK,QACLg/B,EAAO,eACP+jE,EAAc,cACdC,EAAa,gBACb5/C,EAAe,wBACfoyC,GACEz7E,EACJ,OAAO,IAAI,GAAc,CACvB3K,QACAE,SACA8zC,kBACAoyC,0BACAD,oBAAoB,EACpB/0G,KACAy0G,gBAAiBhkE,GAAQ6yB,GAAgB,IAAKwxC,KACzCrkE,EACHjpC,OAAQ1C,KAAK0C,OACbgY,QACAolD,cAAe,IAAM9/D,KAAK6gH,mBAE5BhR,aAAc1kF,GAAWnrB,KAAK8gH,cAAc31F,EAAQjwB,IACpD40G,SAAU9vG,KAAK+gH,eAAe1kH,KAAK2D,MACnCy9G,iBACAC,gBACAhkE,YAIJ,gBACE,OAAO15C,KAAKy0B,MAAMm1D,WAAa5pF,KAAK4pF,UAGtC,YACE,IAAID,EAAQ3pF,KAAKy0B,MAAMk1D,OAAS,CAAC,IAAI,GAAQ,CAC3CxtD,GAAI,kBAQN,OANAwtD,EAAQtpF,MAAM6P,QAAQy5E,GAASA,EAAQ,CAACA,GAEpCA,EAAMnpF,QAAUR,KAAKy0B,MAAM81D,aAC7BZ,EAAM,GAAGl1D,MAAM81D,WAAavqF,KAAKy0B,MAAM81D,YAGlCZ,EAGT,iBACE,MAAM,QACJjwC,GACE15C,KAAKy0B,MAELz0B,KAAK4yG,eAAiBl5D,GACxBA,EAAQ,IAAI3nC,MAAM,0BAItB,eAAeksB,GACb,MAAM,aACJmgF,GACEp+G,KAEJ,GAAmB,iBAAfi+B,EAAMn/B,KACRs/G,EAAah5G,GAAK,EAClBg5G,EAAa/4G,GAAK,EAClB+4G,EAAarW,OAAS,MACjB,IAAI9pE,EAAMq8E,YAAcr8E,EAAM64D,YACnC,OACK,CACL,MAAMpnC,EAAMzxB,EAAMzL,aAElB,IAAKk9B,EACH,OAGF0uD,EAAah5G,EAAIsqD,EAAItqD,EACrBg5G,EAAa/4G,EAAIqqD,EAAIrqD,EACrB+4G,EAAarW,OAAS/nG,KAAKy0B,MAAM4oF,eAG/Br9G,KAAKumF,eACPvmF,KAAKumF,aAAap7D,QAAQw7D,cAAgB,CACxCvhF,EAAGg5G,EAAah5G,EAChBC,EAAG+4G,EAAa/4G,IAIpB+4G,EAAangF,MAAQA,EACrBmgF,EAAan1F,KAAO,QAGtB,mBACE,MAAM,aACJm1F,GACEp+G,KAEJ,GAAIo+G,EAAangF,MAAO,CACtB,MAAM,OACJh2B,EAAM,UACNigG,GACEloG,KAAKugH,MAAM,aAAc,kBAAmBnC,GAEhDp+G,KAAKs+G,iBAAiBC,WAAat2G,EAAOzH,OAAS,EACnD,IAAIwgH,EAAa9Y,EACbjT,GAAU,EAEd,IAAK,MAAMnrD,KAAQ7hC,EACjB+4G,EAAal3E,EACbmrD,EAAUnrD,EAAK6pC,MAAMstC,QAAQn3E,EAAMs0E,EAAangF,OAOlD,IAJKg3D,GAAWj1F,KAAKy0B,MAAMwsF,SACzBjhH,KAAKy0B,MAAMwsF,QAAQD,EAAY5C,EAAangF,OAG1Cj+B,KAAKy0B,MAAMysF,WAAY,CACzB,MAAMjX,EAAcjqG,KAAKy0B,MAAMysF,WAAWF,GAC1ChhH,KAAK4/G,QAAQuB,WAAWlX,EAAa+W,EAAW57G,EAAG47G,EAAW37G,GAGhE+4G,EAAangF,MAAQ,MAIzB,gBACE,MAAMmjF,EAAYphH,KAAKy0B,MAAMlH,QAAUvtB,KAAK0C,OAExC0+G,IACFA,EAAUznF,MAAM0nF,OAASrhH,KAAKy0B,MAAMqoF,UAAU98G,KAAKs+G,mBAIvD,cAAcpjH,GACZ,GAAI8E,KAAKumF,aACP,OAGGvmF,KAAK0C,SACR1C,KAAK0C,OAASxH,EAAGwH,OACjBk8D,GAAoB1jE,EAAI,CACtB8pB,QAAQ,EACRg6C,WAAW,KAIfh/D,KAAK4/G,QAAU,IAAIjW,GAAQ3pG,KAAK0C,QAChC,gBAAcxH,EAAI,CAChBqrB,OAAO,EACPG,UAAW,CAAC,IAAK,IAAK,EAAG,KACzBO,mBAAmB,EACnBJ,WAAW,EACXhB,UAAW,MAEb7lB,KAAKy0B,MAAM8oF,mBAAmBriH,GAC9B,MAAM0rF,EAAW,IAAIviD,EACrBuiD,EAAS06B,OACTthH,KAAK4yG,cAAc2O,eAAe36B,GAClC5mF,KAAKkqF,aAAe,IAAI,GAAalqF,KAAKy0B,MAAMlH,QAAUryB,EAAGwH,OAAQ,CACnEq4B,YAAa/6B,KAAKy0B,MAAMsG,YACxB0gF,kBAAmBz7G,KAAKy0B,MAAM6oF,uBAC9B57E,OAAQ,CACNhM,YAAa11B,KAAKy+G,eAClB9oF,YAAa31B,KAAK0+G,eAClB8C,aAAcxhH,KAAK0+G,kBAIvB,IAAK,MAAMntF,KAAa8/B,GACtBrxD,KAAKkqF,aAAazoD,GAAGlQ,EAAWvxB,KAAKw+G,UAGvCx+G,KAAKg+G,YAAc,IAAI,GAAY,CACjCp3B,WACAsD,aAAclqF,KAAKkqF,aACnBE,kBAAmBpqF,KAAK4rF,mBAAmBvvF,KAAK2D,MAChDqqF,yBAA0BrqF,KAAKyhH,0BAA0BplH,KAAK2D,MAC9D2pF,MAAO3pF,KAAKggH,YACZp2B,UAAW5pF,KAAKigH,gBAChBn2F,MAAO9pB,KAAK8pB,MACZE,OAAQhqB,KAAKgqB,SAEf,MAAM3D,EAAWrmB,KAAKg+G,YAAY9yB,eAAe,GACjDlrF,KAAKumF,aAAe,IAAI,GAAarrF,EAAI,CACvCsrF,KAAMxmF,KACNyuC,MAAOzuC,KAAKyuC,MACZpoB,WACAugE,aAEF5mF,KAAKi+G,cAAgB,IAAI,GACzBj+G,KAAKk+G,aAAe,IAAI,GAAahjH,GACrC8E,KAAKm+G,WAAa,IAAI,GAAWjjH,GACjC8E,KAAK86C,SAAS96C,KAAKy0B,OAEnBz0B,KAAK0hH,oBAEL1hH,KAAKy0B,MAAMkpF,SAGb,YAAY1a,EAAc0e,GACxB,MAAM,GACJzmH,GACE8E,KAAKumF,aAAap7D,QACtB,gBAAcjwB,EAAI8E,KAAKy0B,MAAMlY,YAC7Bvc,KAAKy0B,MAAMgpF,eAAe,CACxBviH,OAEF8E,KAAKk+G,aAAa0D,aAAa,CAC7BpmH,OAAQwE,KAAKy0B,MAAMmpF,aACnB92B,OAAQ9mF,KAAKumF,aAAam6B,YAC1Bz1B,UAAWjrF,KAAKg+G,YAAY9yB,eAC5BgR,iBAAkBl8F,KAAKumF,aAAaY,iBACpCwC,MAAO3pF,KAAKg+G,YAAY2C,WACxBvkB,KAAM,SACN6G,eACAnG,QAAS98F,KAAKi+G,cAAc4D,gBACzBF,IAEL3hH,KAAKy0B,MAAMipF,cAAc,CACvBxiH,OAIJ,eAAey2G,GACb3xG,KAAK8hH,iBAED9hH,KAAK2/G,kBAAoB,KAAO,IAClC3/G,KAAK+hH,cAEL/hH,KAAKyuC,MAAMnQ,QACX,EAAI+L,MAAM,EAAGrqC,KAAK8+G,QAAlB,GAEI9+G,KAAKy0B,MAAMspF,YACb/9G,KAAKy0B,MAAMspF,WAAW/9G,KAAK8+G,UAI/B9+G,KAAK0hH,oBAEL1hH,KAAKgiH,gBAEDhiH,KAAK4/G,QAAQ5V,WAAahqG,KAAKg+G,YAAY5N,eAC7CpwG,KAAK4/G,QAAQuB,WAAW,MAG1BnhH,KAAKumF,aAAa07B,eAElBjiH,KAAKkiH,mBAELliH,KAAKunF,QAAO,GAERvnF,KAAKg+G,aACPh+G,KAAKg+G,YAAYmE,mBAIrB,mBAAmB93C,GACjB,MAAMuf,EAAY5pF,KAAKy0B,MAAM21D,kBAAkB/f,IAAWA,EAAOuf,UAE7D5pF,KAAK4pF,YACP5pF,KAAK4pF,UAAY,IAAK5pF,KAAK4pF,UACzB,CAACvf,EAAOigB,QAASV,GAGd5pF,KAAKy0B,MAAMm1D,WACV5pF,KAAKg+G,aACPh+G,KAAKg+G,YAAYljE,SAAS,CACxB8uC,UAAW5pF,KAAK4pF,aAO1B,0BAA0B4M,GACxBx2F,KAAKs+G,iBAAiBzqB,WAAa2C,EAAiB3C,WACpD7zF,KAAKy0B,MAAM41D,yBAAyBmM,GAGtC,SAASv4D,GACP,MAAMmkF,EAAe/wD,GAAOpzB,EAAMn/B,MAC5B4wD,EAAMzxB,EAAMzL,aAElB,IAAK4vF,IAAiB1yD,EACpB,OAGF,MAAMo3B,EAAS9mF,KAAKumF,aAAam6B,YAC3B52E,EAAO9pC,KAAKm+G,WAAWkE,oBAAoB,CAC/Cj9G,EAAGsqD,EAAItqD,EACPC,EAAGqqD,EAAIrqD,EACPyhF,SACAmE,UAAWjrF,KAAKkrF,aAAax7B,IAC5B1vD,KAAKq+G,uBACF,MACJ1qC,GACE7pC,EACEw4E,EAAe3uC,IAAUA,EAAMyuC,EAAal1F,UAAYymD,EAAMl/C,MAAM2tF,EAAal1F,UACjFq1F,EAAcviH,KAAKy0B,MAAM2tF,EAAal1F,SAC5C,IAAI+nE,GAAU,EAEVqtB,IACFrtB,EAAUqtB,EAAa9nH,KAAKm5E,EAAO7pC,EAAM7L,KAGtCg3D,GAAWstB,GACdA,EAAYz4E,EAAM7L,GAItB,eAAeA,GACb,MAAMyxB,EAAMzxB,EAAMzL,aAClBxyB,KAAKq+G,qBAAuBr+G,KAAKwiH,WAAW,CAC1Cp9G,EAAGsqD,EAAItqD,EACPC,EAAGqqD,EAAIrqD,EACP0iG,OAAQ/nG,KAAKy0B,MAAM4oF,gBAIvB,iBACE,MAAM,MACJ5uE,GACEzuC,KACJyuC,EAAMxtB,IAAI,aAAayqB,UACvB+C,EAAMxtB,IAAI,aAAa2yF,YACvB,MAAM6O,EAAqBziH,KAAK4yG,cAAcnkE,MAC9CA,EAAMxtB,IAAI,YAAYqtB,QAAQm0E,EAAmBxhG,IAAI,YAAYktB,YACjEM,EAAMxtB,IAAI,YAAYqtB,QAAQm0E,EAAmBxhG,IAAI,YAAYktB,YAGnE,cACE,MAAM,QACJ2wE,EAAO,MACPrwE,GACEzuC,KACJ8+G,EAAQC,IAAMtwE,EAAMxtB,IAAI,aAAa8tB,QACrC+vE,EAAQE,aAAevwE,EAAMxtB,IAAI,iBAAiB8d,KAClD+/E,EAAQG,qBAAuBxwE,EAAMxtB,IAAI,qBAAqB8d,KAC9D+/E,EAAQI,cAAgBzwE,EAAMxtB,IAAI,gBAAgBsc,MAClDuhF,EAAQK,SAAW1wE,EAAMxtB,IAAI,mBAAmB8d,KAAO0P,EAAMxtB,IAAI,4BAA4B8d,KAAO0P,EAAMxtB,IAAI,oBAAoB8d,KAClI+/E,EAAQM,UAAY3wE,EAAMxtB,IAAI,cAAcsc,MAC5CuhF,EAAQxO,QAAU7hE,EAAMxtB,IAAI,YAAY8d,KACxC+/E,EAAQzO,QAAU5hE,EAAMxtB,IAAI,YAAY8d,KACxC+/E,EAAQO,gBAAkB5wE,EAAMxtB,IAAI,YAAY4tB,iBAChDiwE,EAAQQ,gBAAkB7wE,EAAMxtB,IAAI,YAAY4tB,iBAChD,MAAM6zE,EAAc7hD,GAAU5/C,IAAI,gBAClC69F,EAAQS,aAAemD,EAAYzhG,IAAI,iBAAiBsc,MACxDuhF,EAAQU,cAAgBkD,EAAYzhG,IAAI,kBAAkBsc,MAC1DuhF,EAAQW,mBAAqBiD,EAAYzhG,IAAI,uBAAuBsc,MACpEuhF,EAAQY,UAAYgD,EAAYzhG,IAAI,cAAcsc,OCtvB/C,SAASolF,IAAgB,IAC9B3oG,EAAG,GACH9e,EAAE,KACFsrF,IAEA,GAAIxsE,EAAI4oG,OACN,OAAO5oG,EAAI4oG,OAGb,MAAMC,EAAer8B,GAAQA,EAAK/xD,MAAM6rF,cAClCwC,EAAY,CAChBhlD,iBAAiB,EACjBwiD,cAAe,KACbtmG,EAAI+oG,iBAEAF,GACFA,KAGJtmG,WAAY,CACVwJ,WAAW,EACXc,WAAW,EACXH,UAAW,CAAC,IAAK,IAAK,EAAG,KACzBF,cAAe,OAEjBkkB,SAAU,CACRs4E,YAAY,EACZC,aAAc,IAAI/pE,MA4BtB,OAxBIstC,GACFA,EAAK1rC,SAASgoE,GACdt8B,EAAK/xD,MAAMiW,SAASs4E,YAAa,IAEjChpH,OAAO4wB,OAAOk4F,EAAW,CACvB5nH,KACA4uB,OAAO,EACPE,QAAQ,EACR+Q,YAAa,QACb6uD,UAAWwC,GAAapyE,KAE1BwsE,EAAO,IAAI,GAAKs8B,GAChB9oG,EAAIynB,GAAG,OAAQ,IAAMyhF,GAAU18B,EAAMxsE,IACrCA,EAAIynB,GAAG,SAAU,KACf+kD,EAAKY,WACLptE,EAAI4oG,OAAS,QAIjBp8B,EAAK/xD,MAAMiW,SAASy4E,cAAgBC,GAAiBppG,GACrDA,EAAI4oG,OAASp8B,EACbxsE,EAAIynB,GAAG,SAAU,KACX+kD,EAAKD,cAAc88B,GAAY78B,EAAMxsE,KAEpCwsE,EAEF,SAAS88B,GAAS98B,EAAM7S,GAC7B6S,EAAK/xD,MAAMiW,SAASu4E,aAAatiF,IAAIgzC,GACrCsuC,GAAaz7B,GAER,SAAS+8B,GAAY/8B,EAAM7S,GAChC6S,EAAK/xD,MAAMiW,SAASu4E,aAAa/9E,OAAOyuC,GACxCsuC,GAAaz7B,GAER,SAASg9B,GAAYh9B,EAAM7S,GAChCsuC,GAAaz7B,GAER,SAAS+X,GAAU/X,EAAMxsE,EAAK25D,GACnC,IAAI,gBACF8vC,GACEj9B,EAAK/xD,MAAMiW,SAEV+4E,IACHA,EAAkBC,GAAYl9B,EAAMxsE,GAAK,GACzCwsE,EAAK/xD,MAAMiW,SAAS+4E,gBAAkBA,GAGnCj9B,EAAKD,cAIVC,EAAKyV,YAAY,iBAAkB,CACjChR,UAAW,CAACw4B,GACZ5mB,YAAa,EACXlpB,MAAOgwC,KACHhwC,EAAMx3C,KAAOwnF,EAAUxnF,GAC7BggE,aAAa,IAIjB,SAAS/P,GAAapyE,GACpB,MAAM,IACJuvC,EAAG,IACHC,GACExvC,EAAIyY,YACR,MAAO,CACLy3B,UAAWX,EACXQ,SAAUP,EACVL,KAAMnvC,EAAI4pG,UACVl4D,QAAS1xC,EAAI6pG,aACbp4D,MAAOzxC,EAAI8pG,YAIf,SAASV,GAAiBppG,GACxB,IAAI+pG,EAAQ,EACRC,EAAQ,EAMZ,OAJIhqG,EAAItb,WACLqlH,EAAOC,GAAShqG,EAAItb,QAAQmmB,MAAM,KAAKxqB,MAAM,EAAG,GAAG2f,IAAIQ,SAGnD,CACLupG,QACAC,SAIJ,SAASN,GAAYl9B,EAAMxsE,EAAKiqG,GAAsB,GACpD,MAAM,cACJd,GACE38B,EAAK/xD,MAAMiW,SACf,OAAO,IAAI,GAAoB1wC,OAAO4wB,OAAO,CAC3CxlB,EAAG,EACHC,EAAG,EACHykB,MAAO08D,EAAK18D,MACZE,OAAQw8D,EAAKx8D,OACb+a,QAAQ,GACPqnD,GAAapyE,GAAMiqG,EAAsB,CAC1Cl4D,gBAAyC,IAAxBo3D,EAAcY,OAAeZ,EAAca,OAAS,GAAKb,EAAcY,OAAS,EAAI,IAAO,GAAKv9B,EAAKx8D,QAAU,IAC9H,CACF+hC,gBAAiB,MAIrB,SAASs3D,GAAY78B,EAAMxsE,GACzB,MAAM,aACJipG,EAAY,WACZD,GACEx8B,EAAK/xD,MAAMiW,SAEf,GAAIs4E,EAAY,CACd,MAAMkB,EAAiB7jH,MAAMosC,KAAKw2E,EAActvC,GAASA,EAAMx3C,IACzDgoF,EAAqB39B,EAAK/xD,MAAMqyD,OAAO/kC,KAAK4xB,IAAUuwC,EAAe7wE,SAASsgC,EAAMx3C,KAEtFgoF,GACF39B,EAAKyV,YAAY,iBAAkB,CACjChR,UAAW,CAACy4B,GAAYl9B,EAAMxsE,GAAK,IACnC6iF,YAAa,EACXlpB,YACKuwC,EAAe7wE,SAASsgC,EAAMx3C,IACrCggE,aAAa,IAKnB3V,EAAK/xD,MAAMiW,SAAS+4E,gBAAkB,KAGxC,SAASP,GAAU18B,EAAMxsE,GACvBwsE,EAAK1rC,SAAS,CACZ8uC,UAAWwC,GAAapyE,KAE1BwsE,EAAK4pB,YAAY,CACf9oB,kBAAkB,IAItB,SAAS26B,GAAaz7B,GACpB,GAAIA,EAAK/xD,MAAMiW,SAASs4E,WACtB,OAGF,MAAMl8B,EAAS,GACfN,EAAK/xD,MAAMiW,SAASu4E,aAAa/mH,QAAQynH,IACvC,MAAMS,EAAYT,EAAUlvF,MAAM31B,KAC5B60E,EAAQ,IAAIywC,EAAUT,EAAUlvF,OACtCqyD,EAAO7jF,KAAK0wE,KAEd6S,EAAK1rC,SAAS,CACZgsC,WDqkBJ,GAAKi2B,aAAeA,GACpB,GAAKsH,aAAe,GACpB,GAAKzkF,QAAU,GAAWA,QE5vBX,MAAM,GACnB,YAAYnL,GACV,IAAKA,EAAM0H,GACT,MAAM,IAAIpqB,MAAM,gCAGlB/R,KAAKm8B,GAAK1H,EAAM0H,GAChBn8B,KAAKlB,KAAO,SACZkB,KAAKskH,cAAgB7vF,EAAM6vF,eAAiB,KAC5CtkH,KAAKga,IAAM,KACXha,KAAKwmF,KAAO,KACZxmF,KAAKy0B,MAAQA,EAGf,MAAMza,EAAK9e,GACT8E,KAAKga,IAAMA,EACXha,KAAKwmF,KAAOm8B,GAAgB,CAC1B3oG,MACA9e,KACAsrF,KAAMxmF,KAAKy0B,MAAM+xD,OAEnB88B,GAAStjH,KAAKwmF,KAAMxmF,MAGtB,WACEujH,GAAYvjH,KAAKwmF,KAAMxmF,MAGzB,SAASy0B,GACPz6B,OAAO4wB,OAAO5qB,KAAKy0B,MAAOA,EAAO,CAC/B0H,GAAIn8B,KAAKm8B,KAGPn8B,KAAKwmF,MACPg9B,GAAYxjH,KAAKwmF,KAAMxmF,MAI3B,OAAO9E,EAAIgsD,GACTq3C,GAAUv+F,KAAKwmF,KAAMxmF,KAAKga,IAAKha,OCxCpB,MAAMukH,GACnB,YAAYC,EAAY74E,GACtB3rC,KAAK2rC,KAAOA,EACZ3rC,KAAKgsB,OAASw4F,EAGhB,YACE,OAAOxkH,KAAKgsB,OAAO/uB,MAGrB,WACE,MAAM4D,EAASb,KAAKgsB,OAAOy4F,YACrBr/C,EAAWplE,KAAK0kH,cAEtB,GAAI7jH,EACF,MAAO,CAACA,EAAQukE,GAGlB,MAAM,MACJnoE,GACE+C,KAAKgsB,QACH,KACJlrB,GACEskE,EACJ,IAAIu/C,EAAgB1nH,EAEpB,GAAIA,GAASA,EAAMuD,SAAWM,EAAM,CAClC6jH,EAAgB,IAAIpgH,aAAazD,GACjC,MAAMqB,EAAQijE,EAASw/C,eAAiB,EAExC,IAAK,IAAI98G,EAAI,EAAGA,EAAIhH,IAAQgH,EAC1B68G,EAAc78G,GAAK7K,EAAMkF,EAAQ2F,GAIrC,OAAO68G,EAGT,cACE,MAAO,IAAK3kH,KAAKgsB,OAAO04F,iBACnB1kH,KAAK2rC,OCxCP,SAASk5E,GAAgBhhD,GAC9B,OAAQA,GACN,KAAK,KACH,OAAOt/D,aAET,KAAK,KACH,OAAOugH,aAET,KAAK,KACL,KAAK,MACL,KAAK,MACL,KAAK,MACH,OAAOvhD,YAET,KAAK,KACH,OAAOC,YAET,KAAK,KACH,OAAOC,kBAET,KAAK,KACH,OAAOC,UAET,KAAK,KACH,OAAOC,WAET,KAAK,KACH,OAAOxtD,WAET,QACE,MAAM,IAAIpE,MAAM,oBCvBtB,SAASgzG,GAAU3/C,GACjB,OAAOA,EAASpkE,QAAUokE,EAAStkE,KAAOskE,EAAS4/C,gBAGrD,SAASC,GAAuBC,EAAcC,GACxCA,EAAuBlkH,QACzB,EAAIs0D,QAAQ,yBAA0B,8BAAtC,GAGF,MAAMv0D,EAAS+jH,GAAUG,GACnBE,EAAe,iBAAkBD,EAAyBA,EAAuBC,aAAeF,EAAaE,cAAgB,EAC7HR,EAAgBO,EAAuBP,eAAiB,EACxD3jH,EAASmkH,EAAepkH,EAAS4jH,EAAgBM,EAAaF,iBAAmBE,EAAajkH,QAAU,GAC9G,MAAO,IAAKkkH,EACVlkH,SACAD,UAIJ,SAASqkH,GAAuCH,EAAcC,GAC5D,MAAMG,EAAkBL,GAAuBC,EAAcC,GAC7D,MAAO,CACLI,KAAMD,EACNE,IAAK,IAAKF,EACRrkH,OAAQqkH,EAAgBrkH,OAA6B,EAApBikH,EAAapkH,OAKrC,MAAM,GACnB,YAAY5F,EAAIywC,GACd3rC,KAAK9E,GAAKA,EACV8E,KAAKm8B,GAAKwP,EAAKxP,GACfn8B,KAAKc,KAAO6qC,EAAK7qC,KACjB,MAAM2kH,EAAc95E,EAAK85E,aAAe95E,EAAK7sC,KACvC4mH,EAAkC,OAAhBD,EACxB,IAAI,aACF3iD,GACEn3B,EACJm3B,EAAetoD,OAAOC,SAASqoD,GAAgB,CAACA,GAAgBA,GAAgB,IAAIziE,MAAML,KAAKc,MAAMoH,KAAK,GAC1GyjC,EAAKm3B,aAAeA,EACpB,IAAI6iD,EAAaF,EAEbC,EACFC,EAAa,MACHA,GAAch6E,EAAKwyC,UAC7BwnC,EAAazqH,GAAMi3E,GAAWj3E,EAAI,GAAS+1E,sBAAwB,KAAO,KAChE00C,IACVA,EAAa,MAGfh6E,EAAK85E,YAAcA,EACnB95E,EAAK7sC,KAAO6mH,EACZ,IAAIC,EAAcf,GAAgBY,GAAeE,GAAc,MAC/D3lH,KAAK6lH,iBAAmB,GACxB7lH,KAAK0lH,gBAAkBA,EAEnBA,IAAiC,IAAd/5E,EAAKm6E,OAC1BF,EAAcrhH,cAGhBonC,EAAKq5E,gBAAkBY,EAAYzgE,kBACnCnlD,KAAK4lH,YAAcA,EACnB5lH,KAAK/C,MAAQ,KACb+C,KAAK0uF,SAAW/iD,EAChB3rC,KAAKoc,MAAQ,CACX2pG,eAAgB,KAChBC,eAAgBr6E,EAChBs6E,eAAgB,KAChBC,UAAU,GAEZlmH,KAAKmmH,QAAU,KACfnmH,KAAK2iD,QAAQhX,GAGf,aACE,IAAK3rC,KAAKmmH,QAAS,CACjB,MAAM,UACJhoC,EAAS,KACTr/E,GACEkB,KAAK0uF,SACT1uF,KAAKmmH,QAAU,IAAI,GAAOnmH,KAAK9E,GAAI,CACjCihC,GAAIn8B,KAAKm8B,GACT3gC,OAAQ2iF,EAAY,MAAQ,MAC5B/Y,SAAU,CACRtmE,UAKN,OAAOkB,KAAKmmH,QAGd,iBACE,MAAM/gD,EAAWplE,KAAK0kH,cAEtB,OAAIt/C,EAASggD,aACJhgD,EAASggD,aAAeL,GAAU3/C,GAGpC,EAGT,SACMplE,KAAKmmH,UACPnmH,KAAKmmH,QAAQjhF,SAEbllC,KAAKmmH,QAAU,MAGjB,GAAkBC,QAAQpmH,KAAKoc,MAAM6pG,gBAGvC,oBAAoB9pF,EAAIhkB,GACtB,GAAInY,KAAK0lH,gBAAiB,CACxB,MAAMG,EAAmB,GACnBQ,EAAgBrmH,KAAK/C,iBAAiB6nH,aACtCwB,EAA4BjB,GAAuCrlH,KAAK0kH,cAAevsG,GAAW,IAGxG,OAFA0tG,EAAiB1pF,GAAM,IAAIooF,GAAgBvkH,KAAMsmH,EAA0Bf,MAC3EM,EAAiB,GAAGh+G,OAAOs0B,EAAI,UAAYkqF,EAAgB,IAAI9B,GAAgBvkH,KAAMsmH,EAA0Bd,KAAO,IAAIjhH,aAAavE,KAAKc,MACrI+kH,EAGT,GAAI1tG,EAAS,CACX,MAAMouG,EAAqBtB,GAAuBjlH,KAAK0kH,cAAevsG,GACtE,MAAO,CACL,CAACgkB,GAAK,IAAIooF,GAAgBvkH,KAAMumH,IAIpC,MAAO,CACL,CAACpqF,GAAKn8B,MAIV,YACE,OAAIA,KAAKoc,MAAM8pG,SACN,KAGFlmH,KAAKoc,MAAM2pG,gBAAkB/lH,KAAKmmH,QAG3C,WACE,OAAInmH,KAAKoc,MAAM8pG,SACNlmH,KAAK/C,MAGP,CAAC+C,KAAKykH,YAAazkH,KAAK0kH,eAGjC,cACE,OAAO1kH,KAAKoc,MAAM4pG,eAGpB,QAAQr6E,GACN,MAAM,MACJvvB,GACEpc,KAEA2Z,YAAYC,OAAO+xB,GACrBA,EAAO,CACL1uC,MAAO0uC,GAEAA,aAAgB,KACzBA,EAAO,CACL9qC,OAAQ8qC,IAIZ,MAAMy5B,EAAW,IAAKplE,KAAK0uF,YACtB/iD,GAIL,GAFAvvB,EAAM4pG,eAAiB5gD,EAEnBz5B,EAAKu6E,SAAU,CACjB,IAAIjpH,EAAQ0uC,EAAK1uC,MACjBA,EAAQ+C,KAAKwmH,gBAAgBvpH,EAAO,GAAI,GAEpC+C,KAAK0uF,SAAS3tF,aAChB9D,EAAQ+C,KAAKymH,mBAAmBxpH,IAGlC,MAAMypH,GAActqG,EAAM8pG,WAAalmH,KAAK2mH,gBAAgB1pH,EAAO+C,KAAK/C,OAExE,IAAKypH,EACH,OAAO,EAGTtqG,EAAM2pG,eAAiB,KACvB3pG,EAAM8pG,UAAW,EACjBlmH,KAAK/C,MAAQA,OACR,GAAI0uC,EAAK9qC,OAAQ,CACtB,MAAMA,EAAS8qC,EAAK9qC,OACpBub,EAAM2pG,eAAiBllH,EACvBub,EAAM8pG,UAAW,EACjBlmH,KAAK/C,MAAQ0uC,EAAK1uC,MAClB,MAAMopH,EAAgB16E,EAAK1uC,iBAAiB6nH,aAC5C1/C,EAAStmE,KAAO6sC,EAAK7sC,MAAQ+B,EAAOukE,SAAStmE,KAC7CsmE,EAAS4/C,gBAAkBnkH,EAAOukE,SAASjgB,mBAAqBkhE,EAAgB,EAAI,GACpFjhD,EAASpkE,OAAS+jH,GAAU3/C,QACvB,GAAIz5B,EAAK1uC,MAAO,CACrB+C,KAAK4mH,qBAAqBj7E,GAE1B,IAAI1uC,EAAQ0uC,EAAK1uC,MACjBmf,EAAM2pG,eAAiB,KACvB3pG,EAAM8pG,UAAW,EACjBlmH,KAAK/C,MAAQA,EACbmoE,EAAS4/C,gBAAkB/nH,EAAMkoD,kBACjCigB,EAASpkE,OAAS+jH,GAAU3/C,GAC5B,MAAM,OACJvkE,EAAM,WACNq8C,GACEl9C,KAEAA,KAAK0lH,iBAAmBzoH,aAAiB6nH,eAC3C7nH,EAAQypD,GAAuBzpD,EAAOmoE,IAGxC,MAAMyhD,EAAqB5pH,EAAMq1C,WAAa4K,EAA+B,EAAlBkoB,EAASpkE,OAEhEH,EAAOyxC,WAAau0E,GACtBhmH,EAAOonE,WAAW4+C,GAGpBhmH,EAAOmlE,YAAY,MACnBnlE,EAAOimH,QAAQ,CACbjmF,KAAM5jC,EACNgE,OAAQi8C,IAEVkoB,EAAStmE,KAAO6sC,EAAK7sC,MAAQ+B,EAAOukE,SAAStmE,KAG/C,OAAO,EAGT,gBAAgB6sC,EAAO,IACrB,MAAM,MACJ1uC,GACE+C,MACE,YACJ+mH,EAAc,EAAC,UACfC,GACEr7E,EACJ3rC,KAAKa,OAAOimH,QAAQ,CAClBjmF,KAAM7gC,KAAK0lH,iBAAmBzoH,aAAiB6nH,aAAep+D,GAAuBzpD,EAAO,CAC1F6D,KAAMd,KAAKc,KACX6lD,WAAYogE,EACZngE,SAAUogE,IACP/pH,EAAM+pD,SAAS+/D,EAAaC,GACjC/lH,OAAQ8lH,EAAc9pH,EAAMkoD,kBAAoBnlD,KAAKk9C,aAIzD,UAAS,aACP+pE,EAAY,KACZ92G,GAAO,IAEP,MAAM,MACJiM,GACEpc,KACEknH,EAAW9qG,EAAM6pG,eACjBhpH,EAAQ,GAAkB4pD,SAASqgE,EAAUD,EAAe,EAAG,CACnEnmH,KAAMd,KAAKc,KACXhC,KAAMkB,KAAK4lH,YACXz1G,SAEFnQ,KAAK/C,MAAQA,EACb,MAAM,OACJ4D,EAAM,WACNq8C,GACEl9C,KAiBJ,OAfIa,EAAOyxC,WAAar1C,EAAMq1C,WAAa4K,IACzCr8C,EAAOonE,WAAWhrE,EAAMq1C,WAAa4K,GAEjC/sC,GAAQ+2G,GACVrmH,EAAOimH,QAAQ,CACbjmF,KAAMqmF,aAAoBpC,aAAep+D,GAAuBwgE,EAAUlnH,MAAQknH,EAClFjmH,OAAQi8C,KAKd9gC,EAAM6pG,eAAiBhpH,EACvBmf,EAAM8pG,UAAW,EACjB9pG,EAAM2pG,eAAiB,KACvB3pG,EAAM4pG,eAAiBhmH,KAAK0uF,UACrB,EAGT,qBAAqB/iD,GACnB,MAAM,MACJ1uC,GACE0uC,EAEJ,IAAKA,EAAKu6E,UAAYjpH,EAAO,CAC3B,MAAMooE,EAAYrlE,KAAK4lH,YACvB,IAAIuB,GAAmB,EAMvB,GAJInnH,KAAK0lH,kBACPyB,EAAmBlqH,EAAMkoD,kBAAoB,GAG3CgiE,EACF,MAAM,IAAIp1G,MAAM,aAAalK,OAAO7H,KAAKm8B,GAAI,sBAAsBt0B,OAAO5K,EAAMke,YAAYhY,OAGxFlG,aAAiBooE,IAAcrlE,KAAK0uF,SAAS3tF,YAAgB,eAAgB4qC,GACjF,EAAI7f,KAAK,aAAajkB,OAAO7H,KAAKm8B,GAAI,kBAAtC,IAKN,mBAAmBl/B,GACjB,OAAQ+C,KAAK0uF,SAAS5vF,MACpB,KAAK,KACH,OAAO,IAAIyF,aAAatH,GAAO+c,IAAI5U,IAAMA,EAAI,KAAO,IAAM,EAAI,GAEhE,KAAK,KACH,OAAO,IAAIb,aAAatH,GAAO+c,IAAI5U,IAAMA,EAAI,OAAS,MAAQ,EAAI,GAEpE,KAAK,KACH,OAAO,IAAIb,aAAatH,GAAO+c,IAAI5U,GAAKA,EAAI,KAE9C,KAAK,KACH,OAAO,IAAIb,aAAatH,GAAO+c,IAAI5U,GAAKA,EAAI,OAE9C,QACE,OAAOnI,GAIb,gBAAgBA,EAAOqH,EAAK6U,GAC1B,MAAM,aACJ2pD,EAAY,KACZhiE,GACEd,KAAK0uF,SAET,GAAIl0E,OAAOC,SAASxd,GAElB,OADAqH,EAAI6U,GAASlc,EACNqH,EAGT,IAAKrH,EAEH,OADAqH,EAAI6U,GAAS2pD,EAAa,GACnBx+D,EAGT,OAAQxD,GACN,KAAK,EACHwD,EAAI6U,EAAQ,GAAKqB,OAAOC,SAASxd,EAAM,IAAMA,EAAM,GAAK6lE,EAAa,GAEvE,KAAK,EACHx+D,EAAI6U,EAAQ,GAAKqB,OAAOC,SAASxd,EAAM,IAAMA,EAAM,GAAK6lE,EAAa,GAEvE,KAAK,EACHx+D,EAAI6U,EAAQ,GAAKqB,OAAOC,SAASxd,EAAM,IAAMA,EAAM,GAAK6lE,EAAa,GAEvE,KAAK,EACHx+D,EAAI6U,EAAQ,GAAKqB,OAAOC,SAASxd,EAAM,IAAMA,EAAM,GAAK6lE,EAAa,GACrE,MAEF,QACE,IAAIh7D,EAAIhH,EAER,QAASgH,GAAK,EACZxD,EAAI6U,EAAQrR,GAAK0S,OAAOC,SAASxd,EAAM6K,IAAM7K,EAAM6K,GAAKg7D,EAAah7D,GAK3E,OAAOxD,EAGT,gBAAgB8iH,EAAQC,GACtB,IAAKD,IAAWC,EACd,OAAO,EAGT,MAAM,KACJvmH,GACEd,KAEJ,IAAK,IAAI8H,EAAI,EAAGA,EAAIhH,EAAMgH,IACxB,GAAIs/G,EAAOt/G,KAAOu/G,EAAOv/G,GACvB,OAAO,EAIX,OAAO,GC7YX,MAAMw/G,GAAc,GACdC,GAAmB,GAClB,SAASC,GAAe3mF,EAAM4mF,EAAW,EAAGC,EAASv6G,KAC1D,IAAIw6G,EAAWL,GACf,MAAMM,EAAa,CACjBzlH,OAAQ,EACR0+B,OACArlC,OAAQ,IAiBV,OAdKqlC,EAEuC,oBAA1BA,EAAK5lB,OAAOC,UAC5BysG,EAAW9mF,EACFA,EAAKrgC,OAAS,IACvB+mH,GAAiB/mH,OAASqgC,EAAKrgC,OAC/BmnH,EAAWJ,IALXI,EAAWL,IAQTG,EAAW,GAAKjtG,OAAOC,SAASitG,MAClCC,GAAYtnH,MAAM6P,QAAQy3G,GAAYA,EAAWtnH,MAAMosC,KAAKk7E,IAAWttH,MAAMotH,EAAUC,GACvFE,EAAWzlH,MAAQslH,EAAW,GAGzB,CACLE,WACAC,cAGG,SAAS,GAAgB/mF,GAC9B,OAAOA,GAAQA,EAAK5lB,OAAOo0B,eAEtB,SAASw4E,GAAsB9pE,GAAY,KAChDj9C,EAAI,OACJE,EAAM,OACNC,EAAM,aACN6mH,EAAY,OACZC,IAEA,MAAM/C,EAAkBjnE,EAAWoH,kBAC7B6iE,EAAgBhnH,EAASA,EAASgkH,EAAkBlkH,EACpD8jH,EAAgB3jH,EAASA,EAAS+jH,EAAkB,EACpD9mC,EAAc77E,KAAK6lC,OAAO6V,EAAWv9C,OAASokH,GAAiBoD,GACrE,MAAO,CAACt7B,GACNvqF,QACA3G,aAEA,IAAKssH,EAAc,CACjB,MAAMhhE,EAAc3kD,EAAQ6lH,EAAgBpD,EAE5C,IAAK,IAAI9/F,EAAI,EAAGA,EAAIhkB,EAAMgkB,IACxBtpB,EAAOspB,GAAKi5B,EAAW+I,EAAchiC,GAGvC,OAAOtpB,EAGT,MAAMmrD,EAAamhE,EAAa3lH,GAC1BykD,EAAWkhE,EAAa3lH,EAAQ,IAAM+7E,EAC5C,IAAIj2E,EAEJ,GAAI8/G,EAAQ,CACV9/G,EAAS,IAAI5H,MAAMumD,EAAWD,GAE9B,IAAK,IAAI7+C,EAAI6+C,EAAY7+C,EAAI8+C,EAAU9+C,IAAK,CAC1C,MAAMg/C,EAAch/C,EAAIkgH,EAAgBpD,EACxCppH,EAAS,IAAI6E,MAAMS,GAEnB,IAAK,IAAIgkB,EAAI,EAAGA,EAAIhkB,EAAMgkB,IACxBtpB,EAAOspB,GAAKi5B,EAAW+I,EAAchiC,GAGvC7c,EAAOH,EAAI6+C,GAAcnrD,QAEtB,GAAIwsH,IAAkBlnH,EAC3BmH,EAAS81C,EAAWiJ,SAASL,EAAa7lD,EAAO8jH,EAAeh+D,EAAW9lD,EAAO8jH,OAC7E,CACL38G,EAAS,IAAI81C,EAAW5iC,aAAayrC,EAAWD,GAAc7lD,GAC9D,IAAIimD,EAAc,EAElB,IAAK,IAAIj/C,EAAI6+C,EAAY7+C,EAAI8+C,EAAU9+C,IAAK,CAC1C,MAAMg/C,EAAch/C,EAAIkgH,EAAgBpD,EAExC,IAAK,IAAI9/F,EAAI,EAAGA,EAAIhkB,EAAMgkB,IACxB7c,EAAO8+C,KAAiBhJ,EAAW+I,EAAchiC,IAKvD,OAAO7c,GCzFJ,MAAMggH,GAAQ,GACRC,GAAO,CAAC,CAAC,EAAG/6G,MAClB,SAAS,GAAIg7G,EAAWC,GAC7B,GAAID,IAAcD,GAChB,OAAOC,EAOT,GAJIC,EAAM,GAAK,IACbA,EAAM,GAAK,GAGTA,EAAM,IAAMA,EAAM,GACpB,OAAOD,EAGT,MAAME,EAAe,GACf/8G,EAAM68G,EAAU3nH,OACtB,IAAI06G,EAAiB,EAErB,IAAK,IAAIpzG,EAAI,EAAGA,EAAIwD,EAAKxD,IAAK,CAC5B,MAAMwgH,EAASH,EAAUrgH,GAErBwgH,EAAO,GAAKF,EAAM,IACpBC,EAAaplH,KAAKqlH,GAClBpN,EAAiBpzG,EAAI,GACZwgH,EAAO,GAAKF,EAAM,GAC3BC,EAAaplH,KAAKqlH,GAElBF,EAAQ,CAAC/lH,KAAKgF,IAAIihH,EAAO,GAAIF,EAAM,IAAK/lH,KAAKC,IAAIgmH,EAAO,GAAIF,EAAM,KAKtE,OADAC,EAAazkH,OAAOs3G,EAAgB,EAAGkN,GAChCC,ECjCT,SAASE,IAAc,OACrBv8F,EAAM,OACNxwB,EAAM,MACN2d,EAAQ,EAAC,IACTC,EAAG,KACHtY,EAAI,QACJkiD,IAEA5pC,EAAMA,GAAO5d,EAAOgF,OACpB,MAAMgoH,EAAex8F,EAAOxrB,OACtBioH,EAAervG,EAAMD,EAE3B,GAAIqvG,EAAeC,EAEjB,YADAjtH,EAAOskB,IAAIkM,EAAOg7B,SAAS,EAAGyhE,GAAetvG,GAM/C,GAFA3d,EAAOskB,IAAIkM,EAAQ7S,IAEd6pC,EACH,OAGF,IAAIl7C,EAAI0gH,EAER,MAAO1gH,EAAI2gH,EAAc,CACvB,MAAMC,EAAQ1lE,EAAQl7C,EAAGkkB,GAEzB,IAAK,IAAIlH,EAAI,EAAGA,EAAIhkB,EAAMgkB,IACxBtpB,EAAO2d,EAAQrR,GAAK4gH,EAAM5jG,IAAM,EAChChd,KAKC,SAAS6gH,IAAS,OACvB38F,EAAM,OACNxwB,EAAM,KACNsF,EAAI,QACJkiD,EAAO,mBACP4lE,EAAkB,mBAClBC,IAEA,IAAKxoH,MAAM6P,QAAQ24G,GAOjB,OANAN,GAAc,CACZv8F,SACAxwB,SACAsF,OACAkiD,YAEKxnD,EAGT,IAAIsrD,EAAc,EACdC,EAAc,EAElB,MAAM+hE,EAAe9lE,GAAW,EAAEl7C,EAAGq2C,IAAU6E,EAAQl7C,EAAIi/C,EAAa5I,IAElE59C,EAAI8B,KAAKgF,IAAIuhH,EAAmBpoH,OAAQqoH,EAAmBroH,QAEjE,IAAK,IAAIsH,EAAI,EAAGA,EAAIvH,EAAGuH,IAAK,CAC1B,MAAMihH,EAAkBH,EAAmB9gH,GAAKhH,EAC1CkoH,EAAkBH,EAAmB/gH,GAAKhH,EAChDynH,GAAc,CACZv8F,OAAQA,EAAOg7B,SAASF,EAAaiiE,GACrCvtH,SACA2d,MAAO4tC,EACP3tC,IAAK4vG,EACLloH,OACAkiD,QAAS8lE,IAEXhiE,EAAciiE,EACdhiE,EAAciiE,EAahB,OAVIjiE,EAAcvrD,EAAOgF,QACvB+nH,GAAc,CACZv8F,OAAQ,GACRxwB,SACA2d,MAAO4tC,EACPjmD,OACAkiD,QAAS8lE,IAINttH,ECpFT,MAAMytH,GAA8B,CAClCC,cAAe,CACbtkF,SAAU,EACVqsD,OAAQhmF,GAAKA,GAEfk+G,OAAQ,CACNC,UAAW,IACXC,QAAS,KAGN,SAASC,GAA4BC,EAAcC,GACxD,OAAKD,GAID/uG,OAAOC,SAAS8uG,KAClBA,EAAe,CACb3kF,SAAU2kF,IAIdA,EAAazqH,KAAOyqH,EAAazqH,MAAQ,gBAClC,IAAKmqH,GAA4BM,EAAazqH,SAChD0qH,KACAD,IAZI,KAeJ,SAASE,GAAyBvuH,EAAIwuH,GAC3C,MAAM7oH,EAAS6oH,EAAUjF,YAEzB,OAAI5jH,EACK,CAAC6oH,EAAUjF,YAAa,CAC7BvvG,QAAS,EACTpU,KAAM4oH,EAAU5oH,KAChBC,WAAY2oH,EAAUh7B,SAAS3tF,aAI5B2oH,EAAUzsH,MAEZ,SAAS0sH,GAAyB7oH,GACvC,OAAQA,GACN,KAAK,EACH,MAAO,QAET,KAAK,EACH,MAAO,OAET,KAAK,EACH,MAAO,OAET,KAAK,EACH,MAAO,OAET,QACE,MAAM,IAAIiR,MAAM,uCAAwClK,OAAO/G,EAAM,OAGpE,SAAS8oH,GAAaC,GAC3BA,EAAQ5mH,KAAK4mH,EAAQrzG,SAEhB,SAASszG,GAAyBJ,EAAWzC,GAClD,MAAM,gBACJvB,EAAe,SACfh3B,EAAQ,MACRzxF,EAAK,KACL6D,GACE4oH,EACEK,EAAarE,GAAmBzoH,aAAiB6nH,aAAe,EAAI,EAC1E,OAAQp2B,EAASs7B,QAAU/sH,EAAMuD,OAASymH,EAAenmH,GAAQipH,EAE5D,SAASE,IAAU,OACxBppH,EAAM,aACNomH,EAAY,UACZyC,EAAS,WACTQ,EAAU,iBACVC,EAAgB,QAChBnnE,EAAU59C,IAAKA,KAEf,MAAMglH,EAAsBV,EAAUhE,iBAAmBgE,EAAUzsH,iBAAiB6nH,aAAe,EAAI,EACjGhkH,EAAO4oH,EAAU5oH,KAAOspH,EACxBltE,EAAawsE,EAAUxsE,WACvBmtE,EAAiBX,EAAU5B,aAC3BwC,EAAkBH,GAAoBE,EACtCE,EAAWT,GAAyBJ,EAAWzC,GAC/CuD,EAAad,EAAUttG,MAAM8pG,SAEnC,IAAKoE,GAAmBJ,GAAcK,EACpC,OAGF,MAAME,EAASD,EAAad,EAAUzsH,MAAQysH,EAAUjF,YAAYzhE,QAAQ,CAC1E4jB,cAAe1pB,IAGjB,GAAIwsE,EAAUh7B,SAAS3tF,aAAeypH,EAAY,CAChD,MAAMhuG,EAASwmC,EAEfA,EAAU,CAAC/lD,EAAOkhD,IAAUurE,EAAUjD,mBAAmBjqG,EAAOvf,EAAOkhD,IAGzE,MAAMusE,EAAiBF,EAAa,CAAC1iH,EAAGq2C,IAAU6E,EAAQynE,EAAQtsE,GAAS,CAACr2C,EAAGq2C,IAAU6E,EAAQynE,EAAOzjE,SAASl/C,EAAGA,EAAIhH,GAAOq9C,GACzHnyB,EAASnrB,EAAOmiD,QAAQ,CAC5BxiD,OAAQ0pH,IAEJrpF,EAAO,IAAIt8B,aAAagmH,GAC9B5B,GAAS,CACP38F,SACAxwB,OAAQqlC,EACR+nF,mBAAoBuB,EACpBtB,mBAAoBwB,EACpBvpH,OACAkiD,QAAS0nE,IAGP7pH,EAAOyxC,WAAazR,EAAKyR,WAAa4K,GACxCr8C,EAAOonE,WAAWpnC,EAAKyR,WAAa4K,GAGtCr8C,EAAOimH,QAAQ,CACbjmF,OACA5/B,OAAQi8C,ICpHG,MAAM,WAAkB,GACrC,YAAYhiD,EAAIywC,EAAO,IACrB17B,MAAM/U,EAAIywC,GACV,MAAM,WACJ+jD,GAAa,EAAK,QAClBs6B,GAAU,EAAK,OACflhG,EAAS,KAAI,SACbs8C,EAAW,KAAI,UACfof,EAAY,KAAI,aAChBsjC,EAAe,MACbn8E,EACJ3xC,OAAO4wB,OAAO5qB,KAAK0uF,SAAU,CAC3BgB,aACAs6B,UACAlhG,OAAQA,GAAUs8C,GAAYplE,KAAK2qH,aACnCvlD,WACAof,cAEFxqF,OAAO4wB,OAAO5qB,KAAKoc,MAAO,CACxBwuG,mBAAoB,KACpBC,YAAa,KACbC,eAAgB,KAChB/iC,aAAa,EACbqoB,aAAa,EACb2a,aAAc,GACdjD,iBAEF9tH,OAAO2wC,KAAK3qC,KAAK0uF,UACjB10F,OAAO2wC,KAAK3qC,KAAKoc,OAEjBpc,KAAKgrH,6BAGP,mBACE,OAAOhrH,KAAKoc,MAAM0rG,aAGpB,iBAAiBmD,GACfjrH,KAAKoc,MAAM0rG,aAAemD,EAG5B,cACE,OAAOjrH,KAAKoc,MAAM2rE,YAGpB,aAAY,kBACVmjC,GAAoB,GAClB,IACF,MAAM9a,EAAcpwG,KAAKoc,MAAMg0F,YAE/B,OADApwG,KAAKoc,MAAMg0F,YAAcA,IAAgB8a,EAClC9a,EAGT,oBACE,MAAM,SACJhrC,GACEplE,KAAK0uF,SACT,MAAO,CAAC1uF,KAAKm8B,IAAIt0B,OAA2B,oBAAbu9D,GAA2BA,GAAY,IAGxE,qBACE,OAAOpmE,QAAQgB,KAAK0uF,SAASgB,YAG/B,qBAAqB/jD,GACnB,IAAKA,IAAS3rC,KAAKmrH,qBACjB,OAAO,KAGT,MAAM,SACJ/lD,GACEplE,KAAK0uF,SACH86B,EAAgBxpH,KAAK0uF,SAASgB,WAC9B65B,EAAelpH,MAAM6P,QAAQk1D,GAAYz5B,EAAKy5B,EAASz3C,KAAKlpB,GAAKknC,EAAKlnC,KAAOknC,EAAKy5B,GACxF,OAAOkkD,GAA4BC,EAAcC,GAGnD,eAAe9hC,EAAS1nF,KAAKm8B,GAAIivF,GAI/B,GAHAprH,KAAKoc,MAAM2rE,YAAc/nF,KAAKoc,MAAM2rE,aAAeL,EACnD1nF,KAAKgoF,eAAeN,GAEhB0jC,EAAW,CACb,MAAM,SACJ3D,EAAW,EAAC,OACZC,EAASv6G,KACPi+G,EACJprH,KAAKoc,MAAM2uG,aAAe,GAAU/qH,KAAKoc,MAAM2uG,aAAc,CAACtD,EAAUC,SAExE1nH,KAAKoc,MAAM2uG,aAAe,GAI9B,mBACE/qH,KAAKoc,MAAM2rE,aAAc,EACzB/nF,KAAKoc,MAAM2uG,aAAe,GAG5B,eAAerjC,EAAS1nF,KAAKm8B,IAC3Bn8B,KAAKoc,MAAMg0F,YAAcpwG,KAAKoc,MAAMg0F,aAAe1oB,EAGrD,OAAO/7C,GACL3rC,KAAK2iD,QAAQhX,GAGf,SAASs7E,GACP,MAAM,MACJ7qG,EAAK,SACLsyE,GACE1uF,KAEJ,OAAI0uF,EAASs7B,YAITt7B,EAAS5lE,SACX7Y,MAAM42C,SAAS,CACbogE,eACA92G,KAAMiM,EAAM2uG,eAAiB,MAExB,IAMX,cAAa,aACX9D,EAAY,KACZpmF,EAAI,MACJpM,EAAK,QACLtJ,IAEA,IAAKnrB,KAAK+nF,cACR,OAAO,EAGT,MACE3rE,OAAO,aACL2uG,GAEFr8B,UAAU,OACR5lE,EAAM,QACNkhG,IAEAhqH,KACJ,IAAIqrH,GAAU,EAEd,GAAIviG,EAAQ,CACV,IAAK,MAAO2+F,EAAUC,KAAWqD,EAC/BjiG,EAAOtuB,KAAK2wB,EAASnrB,KAAM,CACzB6gC,OACA4mF,WACAC,SACAjzF,QACAwyF,iBAIJ,GAAKjnH,KAAK/C,MAAe,GAAI+C,KAAKkmH,UAAYlmH,KAAKa,OAAOyxC,WAAatyC,KAAK/C,MAAMq1C,WAAatyC,KAAKk9C,WAClGl9C,KAAK2iD,QAAQ,CACX1lD,MAAO+C,KAAK/C,MACZipH,SAAUlmH,KAAKkmH,WAEjBlmH,KAAKkmH,UAAW,OAEhB,IAAK,MAAOuB,EAAUC,KAAWqD,EAAc,CAC7C,MAAMhE,EAAcvsG,OAAOC,SAASgtG,GAAYznH,KAAKsrH,gBAAgB7D,GAAY,EAC3ET,EAAYxsG,OAAOC,SAASitG,GAAU1nH,KAAKsrH,gBAAgB5D,GAAUsC,IAAYxvG,OAAOC,SAASwsG,GAAgBjnH,KAAK/C,MAAMuD,OAASymH,EAAejnH,KAAKc,KAC/JmP,MAAMs7G,gBAAgB,CACpBxE,cACAC,mBAKNhnH,KAAKwrH,4BAELH,GAAU,EAKZ,OAFArrH,KAAKyrH,mBACLzrH,KAAKgoF,iBACEqjC,EAGT,iBAAiBpuH,GACf,QAAcyC,IAAVzC,GAAwC,oBAAVA,EAChC,OAAO,EAGT,MAAMypH,EAAa1mH,KAAK2iD,QAAQ,CAC9BujE,UAAU,EACVjpH,UAQF,OALIypH,GACF1mH,KAAKgoF,iBAGPhoF,KAAKyrH,oBACE,EAGT,kBAAkB5qH,GAChB,MAAM,MACJub,GACEpc,KAEJ,OAAKa,GAKLb,KAAKyrH,mBAEDrvG,EAAMwuG,qBAAuB/pH,IAIjCub,EAAMwuG,mBAAqB/pH,EAC3Bb,KAAKgoF,iBACLhoF,KAAK2iD,QAAQ9hD,KALJ,IAPPub,EAAMwuG,mBAAqB,MACpB,GAeX,eAAe/pH,EAAQinH,EAAe,MACpC,MAAM,MACJ1rG,EAAK,SACLsyE,GACE1uF,KAEJ,IAAKa,EAGH,OAFAub,EAAMyuG,YAAc,KACpBzuG,EAAM0uG,eAAiB,MAChB,EAGT,GAAIp8B,EAASs7B,QACX,OAAO,EAGT,GAAI5tG,EAAMyuG,cAAgBhqH,EAExB,OADAb,KAAKyrH,oBACE,EAGTrvG,EAAMyuG,YAAchqH,EACpBb,KAAKgoF,iBAEDruE,YAAYC,OAAO/Y,KACrBA,EAAS,CACP5D,MAAO4D,IAIX,MAAMknF,EAAc2G,EAASlK,WAAasjC,IAAiB9nH,KAAK8nH,aAEhE,GAAI//B,EAAa,CACf,GAAOpuE,YAAYC,OAAO/Y,EAAO5D,OAAQ,WAAW4K,OAAO6mF,EAAStpB,WACpE,MAAMsmD,EAAiB7qH,EAAOC,MAAQD,EAAOC,OAASd,KAAKc,KAQ3D,OAPAsb,EAAM0uG,eAAiBjD,GAAsBhnH,EAAO5D,MAAO,CACzD6D,KAAMD,EAAOC,MAAQd,KAAKc,KAC1BE,OAAQH,EAAOG,OACfC,OAAQJ,EAAOI,OACf6mH,eACAC,OAAQ2D,KAEH,EAKT,OAFA1rH,KAAKyrH,mBACLzrH,KAAK2iD,QAAQ9hD,IACN,EAGT,gBAAgB6G,GACd,MAAM,aACJogH,GACE9nH,KACE2rH,EAAc7D,EAAeA,EAAapgH,GAAOA,EACvD,OAAOikH,EAAc3rH,KAAKc,KAG5B,sBACE,MAAM8qH,EAAsB5rH,KAAK0uF,SAASm3B,kBAAoB,CAC5D,CAAC7lH,KAAKm8B,IAAK,MAEP0pF,EAAmB,GAEzB,IAAK,MAAMgG,KAAuBD,EAChC5xH,OAAO4wB,OAAOi7F,EAAkB51G,MAAM67G,oBAAoBD,EAAqBD,EAAoBC,KAGrG,OAAOhG,EAGT,aAAa6D,GAAW,KACtB7oF,EAAI,SACJ4mF,EAAQ,OACRC,EAAM,MACNjzF,EAAK,aACLwyF,IAEA,GAAIyC,EAAUxD,SACZ,OAGF,MAAM,SACJx3B,EAAQ,MACRtyE,EAAK,MACLnf,EAAK,KACL6D,EAAI,aACJgnH,GACE4B,GACE,SACJtkD,EAAQ,UACRof,GACEkK,EACEq9B,EAAe3vG,EAAM0uG,iBAAuC,oBAAb1lD,EAA0BA,EAAW3wC,EAAM2wC,IAChG,GAA+B,oBAAjB2mD,EAA6B,aAAclkH,OAAOu9D,EAAU,wBAC1E,IAAIt9D,EAAI4hH,EAAU4B,gBAAgB7D,GAClC,MAAM,SACJE,EAAQ,WACRC,GACEJ,GAAe3mF,EAAM4mF,EAAUC,GAEnC,IAAK,MAAM7kF,KAAU8kF,EAAU,CAC7BC,EAAWzlH,QACX,IAAI6pH,EAAcD,EAAalpF,EAAQ+kF,GAMvC,GAJIpjC,IACFwnC,EAAcxnC,EAAUhqF,KAAKwF,KAAMgsH,IAGjClE,EAAc,CAChB,MAAMmE,GAAerE,EAAWzlH,MAAQ2lH,EAAatnH,OAAS,EAAIsnH,EAAaF,EAAWzlH,MAAQ,GAAK8kH,GAAgBa,EAAaF,EAAWzlH,OAE/I,GAAI6pH,GAAe3rH,MAAM6P,QAAQ87G,EAAY,IAAK,CAChD,IAAIrlE,EAAa7+C,EAEjB,IAAK,MAAM44B,KAAQsrF,EACjBtC,EAAUlD,gBAAgB9lF,EAAMzjC,EAAO0pD,GAEvCA,GAAc7lD,OAEPkrH,GAAeA,EAAYxrH,OAASM,EAC7C7D,EAAM6iB,IAAIksG,EAAalkH,IAEvB4hH,EAAUlD,gBAAgBwF,EAAapE,EAAWpsH,OAAQ,GAE1DgyC,GAAU,CACRhyC,OAAQyB,EACR+uB,OAAQ47F,EAAWpsH,OACnB2d,MAAOrR,EACPy1B,MAAO0uF,KAIXnkH,GAAKmkH,EAAcnrH,OAEnB4oH,EAAUlD,gBAAgBwF,EAAa/uH,EAAO6K,GAE9CA,GAAKhH,GAKX,6BACE,MAAM,SACJ4tF,GACE1uF,KACEksH,EAAax9B,EAASs7B,SAAsC,oBAApBt7B,EAAS5lE,OAEvD,IAAKojG,EACH,MAAM,IAAIn6G,MAAM,aAAalK,OAAO7H,KAAKm8B,GAAI,gCAIjD,uBACE,MAAM,MACJl/B,GACE+C,KACEuU,EAAQlS,KAAKgF,IAAI,EAAGrH,KAAKc,MAE/B,GAAI7D,GAASA,EAAMuD,QAAU+T,EAAO,CAClC,IAAI43G,GAAQ,EAEZ,OAAQ53G,GACN,KAAK,EACH43G,EAAQA,GAAS3xG,OAAOC,SAASxd,EAAM,IAEzC,KAAK,EACHkvH,EAAQA,GAAS3xG,OAAOC,SAASxd,EAAM,IAEzC,KAAK,EACHkvH,EAAQA,GAAS3xG,OAAOC,SAASxd,EAAM,IAEzC,KAAK,EACHkvH,EAAQA,GAAS3xG,OAAOC,SAASxd,EAAM,IACvC,MAEF,QACEkvH,GAAQ,EAGZ,IAAKA,EACH,MAAM,IAAIp6G,MAAM,mCAAmClK,OAAO7H,KAAKm8B,OC3ZvE,MAAMiwF,GAAQ,wCACRC,GAAU,8EAKVC,GAAQ,oBAAoBD,GAC3B,SAASE,GAAoBv0C,EAAMw0C,GACxCA,EAAansH,MAAM6P,QAAQs8G,GAAcA,EAAa,CAACA,GACvD,MAAMC,EAAQz0C,EAAK9+D,QAAQ,OAAQ,IAAI2L,MAAM,QACtC+0C,EAAW96D,EAAM4tH,GAAcD,EAEtC,IAAKD,EAAWn5E,SAASumB,KAAe96D,IAAS4tH,EAC/C,OAAO,KAGT,MAAMvpH,EAAOupH,EAAW7nG,MAAM,KAAK,GACnC,MAAO,CACL+0C,YACA96D,OACAqE,QAGG,SAASwpH,GAAiBx0G,EAAU,IACzC,MAAM,QACJzZ,EAAU,IAAG,MACb8yB,EAAK,UACLo7F,EAAS,OACT7gG,GACE5T,EAEJ,IAAKqZ,EACH,OAAgB,MAAZ9yB,EACK4tH,GACE5tH,EAAU,IACZ,YAAYA,MAAY2tH,KAG1BD,GAGT,MAAMS,EAAcC,GAAct7F,EAAOo7F,GAEzC,OAAIluH,GAAW,IACN,YACAA,KAAuB,MAAZA,EAAkB,KAAO,UAC1CkuH,KAAap7F,gBACPzF,wBAEPA,OAAY8gG,QAIP,WACCD,KAAap7F,uCAEJq7F,QAGZ,SAASE,GAAoBjuH,GAClC,OAAQA,GACN,IAAK,QACH,MAAO,IAET,IAAK,OACH,MAAO,KAET,IAAK,OACH,MAAO,MAET,IAAK,OACH,MAAO,OAET,QAEE,OADA,IAAO,GACA,MAGN,SAASkuH,GAAmBluH,GACjC,OAAQA,GACN,IAAK,QACH,OAAO,EAET,IAAK,OACH,OAAO,EAET,IAAK,OACH,OAAO,EAET,IAAK,OACH,OAAO,EAET,QAEE,OADA,IAAO,GACA,MAGN,SAASguH,GAAcG,EAAUnuH,GACtC,OAAQA,GACN,IAAK,QACH,MAAO,QAAQmuH,oBAEjB,IAAK,OACH,MAAO,QAAQA,eAEjB,IAAK,OACH,MAAO,QAAQA,UAEjB,IAAK,OACH,OAAOA,EAET,QAEE,OADA,IAAO,GACA,MC9GE,MAAM,WAA0B,GAC7C,mBAAmB/xH,GACjB,OAAO,gBAASA,GAGlB,YAAYA,EAAIu5B,EAAQ,IACtB,gBAAoBv5B,GACpB+U,MAAM/U,EAAIu5B,GACVz0B,KAAKglD,WAAWvwB,GAChBz0B,KAAKshE,mBAAmB,oBAAqB,OAAQ,CAAC,QAAS,WAC/DtnE,OAAO2wC,KAAK3qC,MAGd,WAAWy0B,EAAQ,IAWjB,OAVAz0B,KAAK6pH,QAAU,GACf7pH,KAAKktH,OAAS,GACdltH,KAAKinC,cAAgB,KACrBjnC,KAAKmtH,WAAY,EAEZ/rD,GAAcphE,KAAK6pH,UACtB7pH,KAAK3D,KAAK,IAAM2D,KAAKotH,kBAGvBptH,KAAK86C,SAASrmB,GACPz0B,KAGT,SAASy0B,GACH,YAAaA,IACfz0B,KAAKinC,cAAgBxS,EAAMze,SAAWye,EAAMze,QAAQixB,eAGlD,kBAAmBxS,IACrBz0B,KAAKinC,cAAgBxS,EAAMwS,eAGzB,cAAexS,IACjBA,EAAQA,EAAM04F,WAGZ,YAAa14F,GACfz0B,KAAKqtH,WAAW54F,EAAMo1F,SAI1B,WAAWA,EAAU,IAMnB,OALA7pH,KAAK3D,KAAK,KACR,IAAK,MAAMixH,KAAczD,EACvB7pH,KAAKutH,UAAUD,EAAYzD,EAAQyD,MAGhCttH,KAGT,UAAUy8E,EAAgB+wC,GACxB,MAAMv4G,EAAWjV,KAAKytH,iBAAiBhxC,IAEjC,OACJ57E,EAAM,SACN6sH,EAAQ,WACRxwE,GACEl9C,KAAK2tH,iBAAiBH,GAE1B,OAAIv4G,EAAW,GACbjV,KAAKktH,OAAOzwC,GAAkB57E,EAC9B,GAAIirB,KAAK,IAAM,GAAG9rB,KAAKm8B,4BAA4BsgD,IAAnD,GACOz8E,OAGTA,KAAK6pH,QAAQ50G,GAAYu4G,EAEpBxtH,KAAKmtH,WACRntH,KAAK4tH,YAAY34G,EAAUpU,EAAQq8C,EAAYwwE,GAG1C1tH,MAGT,MAAM6+E,EAAgB,GAMpB,OALA7+E,KAAK9E,GAAG2yH,sBAAsB,MAAO7tH,KAAK0V,QAE1C1V,KAAK8tH,eAEL9tH,KAAK9E,GAAG6yH,uBAAuBlvC,GACxB7+E,KAGT,MAME,OALAA,KAAK9E,GAAG8yH,uBAERhuH,KAAKotH,iBAELptH,KAAK9E,GAAG2yH,sBAAsB,MAAO,MAC9B7tH,KAGT,iBAAiBwtH,GACf,IAAItwE,EACAwwE,EACA7sH,EAeJ,OAbI2sH,aAA0B,MAAW,GACvC3sH,EAAS2sH,EAAe3sH,OACxB6sH,EAAWF,EAAeE,SAC1BxwE,EAAaswE,EAAetwE,YAE5Br8C,EAAS2sH,OAGQ9tH,IAAfw9C,QAAyCx9C,IAAbguH,IAC9BxwE,EAAaA,GAAc,EAC3BwwE,EAAWA,GAAY7sH,EAAOyxC,WAAa4K,GAGtC,CACLr8C,SACAq8C,aACAwwE,YAIJ,gBAAgBjxC,GACd,OAAOz8E,KAAKinC,eAAiBjnC,KAAKinC,cAAc41C,eAAeJ,GAGjE,iBAAiBA,GACf,GAAIz8E,KAAKinC,cACP,OAAOjnC,KAAKinC,cAAc41C,eAAeJ,GAAgBxnE,SAG3D,MAAMA,EAAWuF,OAAOiiE,GACxB,OAAOjiE,OAAOC,SAASxF,GAAYA,GAAY,EAGjD,eACE,GAAIjV,KAAKmtH,UACP,IAAK,MAAMc,KAAejuH,KAAK6pH,QAAS,CACtC,MAAM,OACJhpH,EAAM,SACN6sH,EAAQ,WACRxwE,GACEl9C,KAAK2tH,iBAAiB3tH,KAAK6pH,QAAQoE,IAEvCjuH,KAAK4tH,YAAYK,EAAaptH,EAAQq8C,EAAYwwE,IAKxD,iBACE,GAAI1tH,KAAKmtH,UACP,IAAK,MAAMc,KAAejuH,KAAK6pH,QAC7B7pH,KAAK4tH,YAAYK,EAAa,MAKpC,YAAY9rH,EAAOtB,EAAQq8C,EAAa,EAAGwwE,GACzC,MAAMh4G,EAAS7U,GAAUA,EAAO6U,OAQhC,OANKA,QAAuBhW,IAAbguH,EAGb1tH,KAAK9E,GAAGmsE,gBAAgB,MAAOllE,EAAOuT,EAAQwnC,EAAYwwE,GAF1D1tH,KAAK9E,GAAGosE,eAAe,MAAOnlE,EAAOuT,GAKhC1V,KAGT,gBACE,OAAOA,KAAK9E,GAAGgzH,0BAGjB,gBACEluH,KAAK9E,GAAGizH,wBAAwBnuH,KAAK0V,QAGvC,YAAYA,GACV1V,KAAK9E,GAAG2yH,sBAAsB,MAAO7tH,KAAK0V,SClL/B,MAAM,GACnB,YAAYxa,EAAIu5B,EAAQ,IACtBz0B,KAAK9E,GAAKA,EACV8E,KAAKouH,aAAe,EACpBpuH,KAAKquH,YAAc,GACnBruH,KAAK09E,SAAW,KAChB19E,KAAKsuH,SAAW,GAChBtuH,KAAKqkD,UAAY,GAEjBrkD,KAAKmpF,YAAY10D,GAEjBz6B,OAAO2wC,KAAK3qC,MAGd,eAAe2rC,GACb,IAAK,MAAM10B,KAAWjX,KAAKsuH,SACzBtuH,KAAKuuH,wBAAwBt3G,EAAS00B,GAI1C,iBAAiBlX,EAAQ,IACvB,MAAM,SACJipD,GACE19E,KAQJ,OANI09E,EAASl9E,OAAS,IACpBi0B,EAAQz6B,OAAO4wB,OAAO,GAAI6J,EAAO,CAC/BipD,cAIGjpD,EAGT,eAAekX,EAAO,IACpB,MAAM10B,EAAUjX,KAAKsuH,SAAStuH,KAAKouH,eAC7B,cACJI,EAAa,kBACbjwC,GACEtnE,EACEw3G,EAAaz0H,OAAO4wB,OAAO,GAAI4jG,EAAe7iF,EAAK8iF,YACzD,MAAO,CACLA,aACAlwC,qBAIJ,OACE,QAAIv+E,KAAKquH,cACPruH,KAAKouH,aAAepuH,KAAK0uH,iBAClB,GAMX,OAAO/iF,EAAO,IACZ3rC,KAAK2uH,cAAchjF,GAGrB,UAAUijF,GACR,MAAM,gBACJC,GACE7uH,KAAKsuH,SAAStuH,KAAKouH,cACjBZ,EAAiBoB,EAAcC,EAAgBD,GAAe,KAEpE,OAAKpB,EAIEA,aAA0B,GAASA,EAAiBA,EAAe3sH,OAHjE,KAMX,QAAQsX,EAAU,IAChB,MAAM,YACJy2G,GACEz2G,EACEtX,EAASb,KAAKykH,UAAUmK,GAE9B,OAAI/tH,EACKA,EAAOmiD,UAGT,KAGT,SACE,IAAK,MAAM7/C,KAAQnD,KAAKqkD,UACtBrkD,KAAKqkD,UAAUlhD,GAAM+hC,SAIzB,YAAYzQ,EAAQ,IAClBz0B,KAAK2uH,cAAcl6F,GAEnBz0B,KAAK09E,SAAWjpD,EAAMipD,UAAY1jF,OAAOiC,KAAK+D,KAAKsuH,SAAStuH,KAAKouH,cAAcS,iBAE3E7uH,KAAK09E,SAASl9E,OAAS,GACzB,GAAO,gBAASR,KAAK9E,KAIzB,oBAAoBu5B,GAClB,MAAM,cACJ+5F,EAAgB,IACd/5F,EACEo6F,EAAkB,GAMxB,GAJI7uH,KAAKsuH,SAAStuH,KAAKouH,eACrBp0H,OAAO4wB,OAAOikG,EAAiB7uH,KAAKsuH,SAAStuH,KAAKouH,cAAcS,iBAG9D7uH,KAAKquH,YACP,IAAK,MAAMS,KAAc9uH,KAAKquH,YAAa,CACzC,MAAMU,EAAe/uH,KAAKquH,YAAYS,GAElCA,KAAcN,IAChBK,EAAgBE,GAAgBD,GAKtC90H,OAAO4wB,OAAOikG,EAAiBp6F,EAAMo6F,iBAErC,IAAK,MAAMvB,KAAcuB,EAAiB,CACxC,MAAMG,EAAcH,EAAgBvB,GAEpC,GAA2B,kBAAhB0B,EAA0B,CACnC,MAAMzoD,EAAeioD,EAAcQ,IAC7B,WACJ18E,EAAU,MACVwzB,EAAK,SACLV,GACEmB,EACJsoD,EAAgBvB,GAActtH,KAAKivH,iBAAiB3B,EAAY,CAC9Dh7E,aACAwzB,QACAV,cAKN,OAAOypD,EAGT,cAAcp6F,EAAQ,IACpB,MAAM,cACJ+5F,EAAgB,MACd/5F,EACJz6B,OAAO4wB,OAAO5qB,KAAKquH,YAAa55F,EAAM45F,aAEtC,MAAMQ,EAAkB7uH,KAAKkvH,oBAAoBz6F,GAEjDz0B,KAAKmvH,gBAAgB,CACnBX,gBACAK,oBAIJ,wBAAwB53G,GAAS,MAC/Bm4G,IAEA,MAAM,QACJp5G,GACEo5G,EACJn4G,EAAQsnE,kBAAoB,IAAI,GAAkBv+E,KAAK9E,GAAI,CACzD8a,UACA6zG,QAAS5yG,EAAQ43G,kBAIrB,gBAAgBljF,GAGd,GAFA3rC,KAAKsuH,SAAStuH,KAAKouH,cAAgBpuH,KAAKqvH,eAAervH,KAAKsuH,SAAStuH,KAAKouH,cAAeziF,GAErF3rC,KAAKquH,YAAa,CACpB,MAAM,cACJG,EAAa,gBACbK,GACE7uH,KAAKsvH,aAAatvH,KAAKsuH,SAAStuH,KAAKouH,eAEnCmB,EAAYvvH,KAAK0uH,gBAEvB1uH,KAAKsuH,SAASiB,GAAavvH,KAAKqvH,eAAervH,KAAKsuH,SAASiB,GAAY,CACvEf,gBACAK,qBAKN,eAAe53G,EAAS00B,GACtB,OAAK10B,GAOLjd,OAAO4wB,OAAO3T,EAAQu3G,cAAe7iF,EAAK6iF,eAC1Cx0H,OAAO4wB,OAAO3T,EAAQ43G,gBAAiBljF,EAAKkjF,iBAExC53G,EAAQsnE,mBACVtnE,EAAQsnE,kBAAkB8uC,WAAWp2G,EAAQ43G,iBAGxC53G,GAbE,CACLu3G,cAAex0H,OAAO4wB,OAAO,GAAI+gB,EAAK6iF,eACtCK,gBAAiB70H,OAAO4wB,OAAO,GAAI+gB,EAAKkjF,kBAc9C,aAAaljF,GACX,IAAK3rC,KAAKquH,YACR,OAAO,KAGT,MAAMG,EAAgBx0H,OAAO4wB,OAAO,GAAI+gB,EAAK6iF,eACvCK,EAAkB70H,OAAO4wB,OAAO,GAAI+gB,EAAKkjF,iBAE/C,IAAK,MAAMW,KAAWxvH,KAAKquH,YAAa,CACtC,MAAMoB,EAAUzvH,KAAKquH,YAAYmB,GACjChB,EAAcgB,GAAW7jF,EAAKkjF,gBAAgBY,GAC9CZ,EAAgBY,GAAW9jF,EAAK6iF,cAAcgB,GAC9C,GAAOX,EAAgBY,aAAoB,IAG7C,MAAO,CACLjB,gBACAK,mBAIJ,iBAAiB1rH,EAAMwoC,GACrB,MAAM9qC,EAAS,IAAI,GAAOb,KAAK9E,GAAIywC,GAOnC,OALI3rC,KAAKqkD,UAAUlhD,IACjBnD,KAAKqkD,UAAUlhD,GAAM+hC,SAGvBllC,KAAKqkD,UAAUlhD,GAAQtC,EAChBA,EAGT,gBACE,OAAQb,KAAKouH,aAAe,GAAK,GCnPtB,SAASsB,GAAiB1jG,GACvC,IAAIttB,EAAU,IACd,MAAM+tH,EAAQzgG,EAAOu1B,MAAM,WAE3B,GAAIkrE,EAAMjsH,QAAU,GAAkB,aAAbisH,EAAM,GAAmB,CAChD,MAAM7hH,EAAI9K,SAAS2sH,EAAM,GAAI,IAEzBjyG,OAAOC,SAAS7P,KAClBlM,EAAUkM,GAId,OAAOlM,ECZT,MAAM,GAAK,o7BA4BE,GAAY,CACvByE,KAAM,YACN+wD,GAAE,GACFC,GAAI,MC7BAw7D,GAAyB,sBACzBC,GAAsB,mBACtBC,GAAkB,qBACjB,SAASC,IAAkB,GAChC57D,EAAE,iBACF67D,EAAgB,qBAChBC,EAAoB,cACpBC,IAEA,MAAMC,EAAoBl2H,OAAOiC,KAAK8zH,GACtC,IAAII,EAAcD,EAAkB1vH,OAChC4vH,EAAoB,KACxB,MAAMC,EAAoB,GAC1B,IAAIC,EAAYp8D,EACZq8D,EAAc,GAElB,GAAIJ,EAAc,GAAKH,EAAsB,CAC3C,MAAMQ,EAAUF,EAAUzrG,MAAM,MAC1B4rG,EAAgBD,EAAQn2H,QAsB9B,GArBAm2H,EAAQt0H,QAAQ,CAAC87E,EAAM71E,EAAO81E,KAC5B,GAAIk4C,EAAc,EAAG,CACnB,MAAM9E,EAAUqF,GAA2B14C,EAAM+3C,GAEjD,GAAI1E,EAAS,CACX,MAAM,YACJsF,EAAW,OACXl8D,GACE42D,EACJoF,EAActuH,GAASwuH,EACvBJ,EAAc92D,GAAe,CAAC82D,EAAa97D,IAC3Cz6D,OAAO4wB,OAAOylG,EAAmBhF,EAAQgF,mBACzCF,KAIAH,IAAyBI,IAC3BA,EAAoBQ,GAAe54C,EAAMg4C,MAIzCA,EAAsB,CACxB,GAAOC,GACP,MAAMY,EAAW,GAAGjB,KAAsBI,IACpCc,EAAqB,gBAAgBD,OACrCE,EAAkB,aAClBlB,yBAAsCgB,gCACxBhB,gBACdp7D,EAAS,CACb,WAAYq8D,EACZ,iBAAkBC,GAEpBR,EAAc92D,GAAe,CAAC82D,EAAa97D,IAG7C67D,EAAYG,EAAcpvH,KAAK,MAGjC,MAAO,CACL6yD,GAAIo8D,EACJF,oBACA37D,OAAQ87D,EACRF,qBAGG,SAASW,IAAgB,iBAC9BjB,EAAgB,qBAChBC,EAAoB,cACpBC,IAEA,MAAM57D,EAAW,GACjB,IAAIvqC,EACAE,EAEAgmG,MAEAlmG,QACAE,UACEimG,GACJ57D,EAAS,GAAGu7D,KAAsBI,KAA0B,CAAClmG,EAAOE,IAGtE,IAAK,MAAMinG,KAAelB,IAEtBjmG,QACAE,UACE+lG,EAAiBkB,IACrB58D,EAAS,GAAGu7D,KAAsBqB,KAAiB,CAACnnG,EAAOE,GAG7D,OAAOqqC,EAGT,SAAS68D,GAAuBl5C,GAC9B,OAAOu0C,GAAoBv0C,EAAM,CAAC,YAAa,OAGjD,SAASm5C,GAAuBF,GAC9B,MAAMG,EAAc,GAAGzB,KAAyBsB,IAC1CJ,EAAW,GAAGjB,KAAsBqB,IACpCI,EAAsB,uBACRD,sBACLP,KACf,MAAO,CACLO,cACAP,WACAQ,uBAIG,SAAST,GAAe54C,EAAM4E,GACnC,MAAM00C,EAAmB/E,GAAoBv0C,EAAM,CAAC,UAAW,QAE/D,OAAKs5C,GAIEA,EAAiBnuH,OAASy5E,EAAU00C,EAAiBxyH,KAHnD,KAKJ,SAAS4xH,GAA2B14C,EAAMu5C,GAC/C,MAAMlB,EAAoB,GACpBmB,EAAgBN,GAAuBl5C,GAE7C,IAAKw5C,EACH,OAAO,KAGT,MAAM,KACJ1yH,EAAI,KACJqE,GACEquH,EAEJ,GAAIruH,GAAQouH,EAAWpuH,GAAO,CAC5B,MAAMwtH,EAAc,MAAO34C,6CACrB,YACJo5C,EAAW,SACXP,EAAQ,oBACRQ,GACEF,GAAuBhuH,GACrBmhC,EAAWyoF,GAAoBjuH,GAC/B2yH,EAAoB,KAAK3yH,KAAQqE,0BAA6BiuH,MAAgBP,MAAavsF,OACjG+rF,EAAkBe,GAAejuH,EACjC,MAAMsxD,EAAS,CACb,WAAY48D,EACZ,iBAAkBI,GAEpB,MAAO,CACLd,cACAl8D,SACA47D,qBAIJ,OAAO,KCvJT,MAAMqB,GAA8B,CAClC,CAAC,OAAQ,KACT,CAAC,OAAQ,KACT,CAAC,OAAQ,MACT,CAAC,OAAQ,OAELC,GAAqB,mBACZ,MAAM,GACnB,YAAYz2H,EAAIu5B,EAAQ,IACtBz0B,KAAK9E,GAAKA,EACV8E,KAAKm8B,GAAKn8B,KAAKouH,aAAe,EAC9BpuH,KAAK4xH,aAAe,KACpB5xH,KAAKgwH,qBAAuB,KAC5BhwH,KAAKowH,kBAAoB,KACzBpwH,KAAKqwH,kBAAoB,KACzBrwH,KAAKsuH,SAAW,GAChBtuH,KAAKqkD,UAAY,GAEjBrkD,KAAKmpF,YAAY10D,GAEjBz6B,OAAO2wC,KAAK3qC,MAGd,iBAAiBy0B,EAAQ,IACvB,MAAMo9F,EAAoB7xH,KAAK8xH,qBAAqBr9F,GAEpD,OAAOz6B,OAAO4wB,OAAO,GAAI6J,EAAOo9F,GAGlC,eAAelmF,EAAO,IACpB,MAAM,cACJ6iF,EAAa,eACbuD,EAAc,YACdzrG,EAAW,cACX2pG,GACEjwH,KAAKsuH,SAAStuH,KAAKouH,cACjBK,EAAaz0H,OAAO4wB,OAAO,GAAI4jG,EAAe7iF,EAAK8iF,YACnDp6D,EAAWr6D,OAAO4wB,OAAO,GAAI+gB,EAAK0oB,UAClC93C,EAAaviB,OAAO4wB,OAAO,GAAI+gB,EAAKpvB,YAC1C,IAAIy1G,EAAUrmF,EAAKqmF,QAEnB,GAAIhyH,KAAKiyH,mBAAqBjyH,KAAKkyH,iBAAkB,CACnDzD,EAAW0D,oBAAsBnyH,KAAKoyH,gBAEtC,IAAK,MAAMC,KAAWryH,KAAKqwH,kBAAmB,CAC5C,MAAMY,EAAcjxH,KAAKqwH,kBAAkBgC,GAC3Ch+D,EAASg+D,GAAWN,EAAed,GAGrCjxH,KAAKsyH,8BAEL,MAAMC,EAAevB,GAAgB,CACnCjB,iBAAkBgC,EAClB/B,qBAAsBhwH,KAAKgwH,qBAC3BC,kBAEFj2H,OAAO4wB,OAAOypC,EAAUk+D,GAQ1B,OALIvyH,KAAKkyH,mBACPF,GAAU,EACVz1G,EAAW8J,SAAW,CAAC,EAAG,EAAGC,EAAYwD,MAAOxD,EAAY0D,SAGvD,CACLykG,aACAnoG,cACA+tC,WACA29D,UACAz1G,cAIJ,OACE,QAAIvc,KAAK4xH,eACP5xH,KAAKouH,aAAepuH,KAAK0uH,iBAClB,GAMX,OAAO/iF,EAAO,IACZ3rC,KAAKwyH,eAAe7mF,GAGtB,mBACE,MAAM,cACJskF,GACEjwH,KAAKsuH,SAAStuH,KAAKouH,cACvB,OAAO6B,EAGT,SAAQ,OACNwC,GAAS,GACP,IACF,MAAM,YACJnsG,GACEtmB,KAAKsuH,SAAStuH,KAAKouH,cACjBh9D,EAASoe,GAAkBlpD,GAEjC,IAAKmsG,EACH,OAAOrhE,EAGT,MAAMiU,EAAYjU,EAAOj2C,YACnBu3G,EAAe1F,GAAmBhtH,KAAKowH,mBACvCuC,EAAe,IAAIttD,EAAUjU,EAAO5wD,OAASkyH,EAAe,GAClE,IAAIE,EAAY,EAEhB,IAAK,IAAI9qH,EAAI,EAAGA,EAAIspD,EAAO5wD,OAAQsH,GAAK,EACtC,IAAK,IAAIgd,EAAI,EAAGA,EAAI4tG,EAAc5tG,IAChC6tG,EAAaC,KAAexhE,EAAOtpD,EAAIgd,GAI3C,OAAO6tG,EAGT,iBACE,MAAME,EAAmB7yH,KAAKsuH,SAAStuH,KAAKouH,cAC5C,OAAOyE,EAAiBvsG,YAG1B,SACMtmB,KAAK8yH,YACP9yH,KAAK8yH,WAAW5tF,SAGdllC,KAAKoyH,iBACPpyH,KAAKoyH,gBAAgBltF,SAIzB,YAAYzQ,EAAQ,IAClB,MAAM,sBACJs+F,EAAqB,aACrBnB,GACEn9F,EACJz0B,KAAK4xH,aAAeA,EACpB5xH,KAAKgwH,qBAAuB+C,EAC5B/yH,KAAKkyH,iBAAmBa,EAExB/yH,KAAKwyH,eAAe/9F,GAGtB,qBAAqBA,GACnB,MAAM,eACJs9F,EAAc,mBACdiB,GACEv+F,EAEJ,GAAIu+F,aAA8B,GAChC,OAAOA,EAGT,MAAM/jD,EAAa8iD,EAAeiB,GAElC,OAAK/jD,GAILjvE,KAAKizH,kBAAoBD,EAClBhzH,KAAKkzH,kBAAkBjkD,IAJrB,KAOX,eAAex6C,EAAQ,IACrB,MAAM,cACJ+5F,EAAa,gBACb2E,EAAkB,GAAE,eACpBC,GACE3+F,EAEEw7F,EAAgBjwH,KAAKqzH,qBAAqB,CAC9CtB,eAAgBoB,EAChBH,mBAAoBI,IAGtBpzH,KAAKiyH,kBAAoBjyH,KAAKiyH,mBAAqBkB,GAAmBn5H,OAAOiC,KAAKk3H,GAAiB3yH,OAAS,EAE5GR,KAAKmvH,gBAAgB,CACnBX,gBACAuD,eAAgBoB,EAChBlD,kBAGE,iBAAkBx7F,GACpBz0B,KAAKszH,uBAAuB7+F,EAAM8+F,cAItC,uBAAuBA,GACrB,GAA4B,kBAAjBA,GAA6BvzH,KAAKuzH,cAAgBA,EAC3D,OAGF,MAAMC,EAAa,IAAIjvH,aAAagvH,GACpCC,EAAWt3H,QAAQ,CAACwwF,EAAGvqF,EAAO6N,KAC5BA,EAAM7N,GAASA,IAGZnC,KAAKoyH,gBAQRpyH,KAAKoyH,gBAAgBzvE,QAAQ,CAC3B9hB,KAAM2yF,IARRxzH,KAAKoyH,gBAAkB,IAAI,GAAOpyH,KAAK9E,GAAI,CACzC2lC,KAAM2yF,EACNpuD,SAAU,CACRtkE,KAAM,KASZd,KAAKuzH,aAAeA,EAGtB,gBAAgB5nF,GAGd,GAFA3rC,KAAKsuH,SAAStuH,KAAKouH,cAAgBpuH,KAAKqvH,eAAervH,KAAKsuH,SAAStuH,KAAKouH,cAAeziF,GAErF3rC,KAAK4xH,aAAc,CACrB,MAAM,eACJG,EAAc,cACd9B,GACEjwH,KAAKyzH,cAAczzH,KAAKsuH,SAAStuH,KAAKouH,eAEpCmB,EAAYvvH,KAAK0uH,gBAEvB1uH,KAAKsuH,SAASiB,GAAavvH,KAAKqvH,eAAervH,KAAKsuH,SAASiB,GAAY,CACvEwC,iBACA9B,mBAKN,eAAeh5G,EAAS00B,GACtB,MAAM,cACJ6iF,EAAa,eACbuD,EAAc,cACd9B,GACEtkF,EAaJ,GAXK10B,IACHA,EAAU,CACRu3G,cAAe,GACfuD,eAAgB,GAChB9B,cAAe,OAInBj2H,OAAO4wB,OAAO3T,EAAQ86G,eAAgBA,GACtC/3H,OAAO4wB,OAAO3T,EAAQu3G,cAAeA,GAEjCyB,EAAe,CACjBh5G,EAAQg5G,cAAgBA,EACxB,MAAM,MACJnmG,EAAK,OACLE,GACEimG,GACE,YACJ3pG,GACErP,EAEAqP,GACFA,EAAYwC,OAAO,CACjBymD,YAAa,CACX,CAAC,OAAQ0gD,GAEX98C,mBAAmB,IAErB7sD,EAAYm5C,OAAO,CACjB31C,QACAE,YAGF/S,EAAQqP,YAAc,IAAI,GAAYtmB,KAAK9E,GAAI,CAC7CihC,GAAI,wBACJrS,QACAE,SACAulD,YAAa,CACX,CAAC,OAAQ0gD,KAMjB,OAAOh5G,EAGT,8BACE,MAAM9U,EAAQnC,KAAKouH,cACb,eACJ2D,GACE/xH,KAAKsuH,SAASnsH,GAElB,IAAK,MAAMgB,KAAQ4uH,EACjBA,EAAe5uH,GAAM2Y,cAAc41G,IAIvC,cAAc/lF,GACZ,IAAK3rC,KAAK4xH,aACR,OAAO,KAGT,MAAMG,EAAiB/3H,OAAO4wB,OAAO,GAAI+gB,EAAKomF,gBAC9CA,EAAe/xH,KAAK4xH,cAAgBjmF,EAAKskF,cACzC,MAAMA,EAAgBtkF,EAAKomF,eAAe/xH,KAAK4xH,cAC/C,MAAO,CACLG,iBACA9B,iBAIJ,kBAAkBhhD,GAChB,MAAMK,EAAUN,GAAiBC,EAAY,CAC3C1yD,WAAY,CACV,CAAC,OAAQ,KACT,CAAC,OAAQ,KACT,CAAC,OAAQ,MACT,CAAC,OAAQ,OAEXgtD,WAAY,CACV,CAAC,QAAQ,KASb,OALIvpE,KAAK8yH,YACP9yH,KAAK8yH,WAAW5tF,SAGlBllC,KAAK8yH,WAAaxjD,EACXA,EAGT,gBACE,OAAQtvE,KAAKouH,aAAe,GAAK,EAGnC,qBAAqB35F,EAAQ,IAC3B,MAAM,eACJs9F,EAAc,cACd9B,GACEjwH,KAAKsuH,SAAStuH,KAAKouH,eACjB,GACJl6D,EAAE,SACFG,EAAQ,kBACR+7D,EAAiB,OACjB37D,EAAM,kBACN47D,GACEP,GAAkB,CACpB57D,GAAIz/B,EAAMy/B,GACV67D,iBAAkBgC,EAClB/B,qBAAsBhwH,KAAKgwH,qBAC3BC,kBAEIyD,EAAiBj6D,GAAe,CAAChlC,EAAMggC,QAAU,GAAIA,IAC3Dz0D,KAAKowH,kBAAoBA,EACzBpwH,KAAKqwH,kBAAoBA,EACzB,MAAMl8D,EAAK1/B,EAAMk/F,KAAOhH,GAAiB,CACvCjuH,QAASgxH,GAAiBx7D,GAC1B1iC,MAAOxxB,KAAKgwH,qBACZpD,UAAWwD,EACXrkG,OAAQ4lG,KAEJ57D,EAAU/1D,KAAKiyH,mBAAqBjyH,KAAKgwH,qBAAuB,CAAC,IAAiBnoH,OAAO4sB,EAAMshC,SAAW,IAAMthC,EAAMshC,QAC5H,MAAO,CACL7B,KACAC,KACA4B,UACA1B,WACAI,OAAQi/D,ICtXd,IAAI,GAAc,KACX,SAASE,GAAsBthF,GAKpC,QAJK,IAAe,GAAYA,WAAaA,KAC3C,GAAc,IAAI34B,YAAY24B,IAGzB,GAEF,SAASuhF,GAAgB7iG,EAAMxwB,GACpC,MAAMszH,EAAqBF,GAAsB5iG,EAAKm0B,kBAAoB3kD,GAC1E,OAAO,IAAIwwB,EAAK8iG,EAAoB,EAAGtzH,GAElC,SAAS,IAAU,OACxBhF,EAAM,OACNwwB,EAAM,MACN7S,EAAQ,EAAC,MACTokB,EAAQ,IAER,MAAM/8B,EAASwrB,EAAOxrB,OAChB2rC,EAAQ5O,EAAQ/8B,EACtB,IAAIitC,EAAS,EAEb,IAAK,IAAI3lC,EAAIqR,EAAOs0B,EAASjtC,EAAQitC,IACnCjyC,EAAOsM,KAAOkkB,EAAOyhB,GAGvB,MAAOA,EAAStB,EACVsB,EAAStB,EAAQsB,GACnBjyC,EAAOkyC,WAAWv0B,EAAQs0B,EAAQt0B,EAAOA,EAAQs0B,GACjDA,GAAU,IAEVjyC,EAAOkyC,WAAWv0B,EAAQs0B,EAAQt0B,EAAOA,EAAQgzB,EAAQsB,GACzDA,EAAStB,GAIb,OAAO3wC,E,iBC9BM,SAAS4B,GAAWK,GACjC,IAAKA,IAAkB,iBACrB,MAAO,OAGT,GAAI,gBAAWA,GACb,MAAO,WAGT,MAAMC,EAAkC,qBAAdC,UAA4BA,UAAY,GAC5DC,EAAYH,GAAiBC,EAAWE,WAAa,GAE3D,GAAIA,EAAUC,QAAQ,SAAW,EAC/B,MAAO,OAGT,MAAMC,GAAyC,IAAhCF,EAAUC,QAAQ,SAC3BE,GAA+C,IAAnCH,EAAUC,QAAQ,YAEpC,OAAIC,GAAUC,EACL,KAGL,OAAOC,OACF,SAGL,OAAOC,OACF,SAGL,OAAOC,gBACF,UAGF,UCnCT,MAAM61H,GAAe,2CACN,MAAM,WAA0B,GAC7C,mBAAmB74H,EAAIid,EAAU,IAC/B,OAAIA,EAAQ67G,wBACH,gBAAS94H,IAAwB,WAAjBkC,MAM3B,uBAAuBlC,GAUrB,OATAA,EAAGC,KAAOD,EAAGC,MAAQ,GAEhBD,EAAGC,KAAK84H,qBACX/4H,EAAGC,KAAK84H,mBAAqB,IAAI,GAAkB/4H,EAAI,CACrDwa,OAAQ,KACRw+G,gBAAgB,KAIbh5H,EAAGC,KAAK84H,mBAGjB,wBAAwB/4H,GAEtB,OADA,GAAkBi5H,eAAiB,GAAkBA,gBAAkBj5H,EAAGsG,aAAa,OAChF,GAAkB2yH,eAG3B,mBAAmBj5H,EAAI+Z,EAAUjF,GAC/B,OAAQA,EAAMmL,aACZ,KAAK5W,aACH,GAAkB6vH,uBAAuBl5H,EAAI+Z,EAAUjF,GAEvD,MAEF,KAAKmG,WACH,GAAkBk+G,qBAAqBn5H,EAAI+Z,EAAUjF,GAErD,MAEF,KAAKwzD,YACH,GAAkB8wD,sBAAsBp5H,EAAI+Z,EAAUjF,GAEtD,MAEF,QACE,IAAO,IAIb,YAAY9U,EAAIywC,EAAO,IACrB,MAAMxP,EAAKwP,EAAKxP,IAAMwP,EAAK31B,SAAW21B,EAAK31B,QAAQmmB,GACnDlsB,MAAM/U,EAAIlB,OAAO4wB,OAAO,GAAI+gB,EAAM,CAChCxP,QAEFn8B,KAAKa,OAAS,KACdb,KAAKu0H,YAAc,KACnBv0H,KAAKk0H,eAAiBvoF,EAAKuoF,iBAAkB,EAC7Cl0H,KAAK6hE,IAAM3mE,EACX8E,KAAKglD,WAAWrZ,GAChB3xC,OAAO2wC,KAAK3qC,MAGd,SAOE,OANAiQ,MAAMi1B,SAEFllC,KAAKa,QACPb,KAAKa,OAAOqkC,SAGPllC,KAGT,qBACE,OAAO,GAAkBw0H,iBAAiBx0H,KAAK9E,IAGjD,WAAWu5B,EAAQ,IACjB,OAAOz0B,KAAK86C,SAASrmB,GAGvB,SAASA,GACP,OAAOz0B,KAGT,iBAAiBy0H,EAAgB,KAAM9oF,EAAO,IAK5C,OAJA,IAAQ8oF,GAA0C,QAAzBA,EAAcj5H,OAAkBu4H,IACzD/zH,KAAK3D,KAAK,KACR2D,KAAK9E,GAAGyG,WAAW,MAAO8yH,EAAgBA,EAAc/+G,OAAS,QAE5D1V,KAGT,UAAUiV,EAAUpU,EAAQukE,GAC1B,GAAsB,QAAlBvkE,EAAOrF,OACT,OAAOwE,KAAK00H,iBAAiB7zH,EAAQukE,GAGvC,MAAM,KACJtkE,EAAI,KACJhC,EAAI,OACJkC,EAAM,OACNC,EAAM,WACNF,EAAU,QACVikE,EAAO,QACP9vD,GACEkwD,GACE,GACJlqE,EAAE,IACF2mE,GACE7hE,KAeJ,OAdAiV,EAAWuF,OAAOvF,GAClBjV,KAAK3D,KAAK,KACRnB,EAAGyG,WAAW,MAAOd,EAAO6U,QAExBsvD,GACF,GAAO,gBAAS9pE,IAChB2mE,EAAI8yD,qBAAqB1/G,EAAUnU,EAAMhC,EAAMkC,EAAQC,IAEvD/F,EAAG2G,oBAAoBoT,EAAUnU,EAAMhC,EAAMiC,EAAYC,EAAQC,GAGnE/F,EAAGuG,wBAAwBwT,GAC3B4sD,EAAI+yD,oBAAoB3/G,EAAUC,GAAW,KAExClV,KAGT,OAAOiV,EAAU+P,GAAS,GACxB,MAAM6vG,GAA0B7vG,GAAuB,IAAb/P,IAAmB,GAAkB8mC,YAAY/7C,KAAK9E,GAAI,CAClG84H,uBAAuB,IAQzB,OALKa,IACH5/G,EAAWuF,OAAOvF,GAClBjV,KAAK3D,KAAK,IAAM2oB,EAAShlB,KAAK9E,GAAGuG,wBAAwBwT,GAAYjV,KAAK9E,GAAGwG,yBAAyBuT,KAGjGjV,KAGT,kBAAkBuzH,EAAct2H,GAC9B,MAAM0nH,EAAgB3kH,KAAK80H,6BAA6B73H,GAElDq1C,EAAaqyE,EAAcryE,WAAaihF,EACxC/yH,EAASmkH,EAAcnkH,OAAS+yH,EACtC,IAAIwB,GAAgB/0H,KAAKa,OAKzB,GAJAb,KAAKa,OAASb,KAAKa,QAAU,IAAI,GAAOb,KAAK9E,GAAIo3C,GACjDyiF,EAAeA,GAAgB/0H,KAAKa,OAAOonE,WAAW31B,GACtDyiF,EAAeA,IAAiB/0H,KAAKg1H,4BAA4BrQ,EAAe3kH,KAAKu0H,aAEjFQ,EAAc,CAChB,MAAMh3E,EAAa81E,GAAgB52H,EAAMke,YAAa3a,GACtD,GAAU,CACRhF,OAAQuiD,EACR/xB,OAAQ24F,EACRxrG,MAAO,EACPokB,MAAO/8B,IAETR,KAAKa,OAAOimH,QAAQ/oE,GACpB/9C,KAAKu0H,YAAct3H,EAGrB,OAAO+C,KAAKa,OAGd,6BAA6Bm2E,GAC3B,OAAI32E,MAAM6P,QAAQ8mE,GACT,IAAIzyE,aAAayyE,GAGnBA,EAGT,4BAA4Bi+C,EAAIC,GAC9B,IAAKD,IAAOC,GAAMD,EAAGz0H,SAAW00H,EAAG10H,QAAUy0H,EAAG95G,cAAgB+5G,EAAG/5G,YACjE,OAAO,EAGT,IAAK,IAAIrT,EAAI,EAAGA,EAAImtH,EAAGz0H,SAAUsH,EAC/B,GAAImtH,EAAGntH,KAAOotH,EAAGptH,GACf,OAAO,EAIX,OAAO,EAGT,8BAA8B5M,EAAI+Z,EAAUjF,GAC1C,OAAQA,EAAMxP,QACZ,KAAK,EACHtF,EAAGi6H,gBAAgBlgH,EAAUjF,GAC7B,MAEF,KAAK,EACH9U,EAAGk6H,gBAAgBngH,EAAUjF,GAC7B,MAEF,KAAK,EACH9U,EAAGm6H,gBAAgBpgH,EAAUjF,GAC7B,MAEF,KAAK,EACH9U,EAAGo6H,gBAAgBrgH,EAAUjF,GAC7B,MAEF,QACE,IAAO,IAIb,4BAA4B9U,EAAI+Z,EAAUjF,GAGxC,OAFA,GAAO,gBAAS9U,IAER8U,EAAMxP,QACZ,KAAK,EACHtF,EAAGq6H,iBAAiBtgH,EAAUjF,GAC9B,MAEF,KAAK,EACH9U,EAAGs6H,iBAAiBvgH,EAAUjF,GAC9B,MAEF,KAAK,EACH9U,EAAGu6H,iBAAiBxgH,EAAUjF,GAC9B,MAEF,KAAK,EACH9U,EAAGw6H,iBAAiBzgH,EAAUjF,GAC9B,MAEF,QACE,IAAO,IAIb,6BAA6B9U,EAAI+Z,EAAUjF,GAGzC,OAFA,GAAO,gBAAS9U,IAER8U,EAAMxP,QACZ,KAAK,EACHtF,EAAGy6H,kBAAkB1gH,EAAUjF,GAC/B,MAEF,KAAK,EACH9U,EAAG06H,kBAAkB3gH,EAAUjF,GAC/B,MAEF,KAAK,EACH9U,EAAG26H,kBAAkB5gH,EAAUjF,GAC/B,MAEF,KAAK,EACH9U,EAAG46H,kBAAkB7gH,EAAUjF,GAC/B,MAEF,QACE,IAAO,IAIb,gBACE,MAAM6xD,EAAM7hE,KAAK9E,GACjB,OAAO2mE,EAAI/+D,oBAGb,cAAc4S,GAEZ,OADA1V,KAAK6hE,IAAI/sD,kBAAkBY,GACpB,CAAC1V,KAAK+1H,UAGf,YAAYrgH,GACV1V,KAAK6hE,IAAI9sD,gBAAgBW,GAG3B,cAAc5T,GAAO,SACnBmT,IAGA,OADA,GAAOuF,OAAOC,SAASxF,IAChBjV,KAAK3D,KAAK,KACf,OAAQyF,GACN,KAAK,MACH,OAAO9B,KAAK9E,GAAG86H,sBAAsB/gH,EAAUnT,GAEjD,QACE,OAAO9B,KAAK9E,GAAG0G,gBAAgBqT,EAAUnT,OC7RnD,MAAMm0H,GAAqB,0EACrBC,GAAkC,4BAClCC,GAAkB,CAAC,aAAc,aAAc,gBAAiB,eAAgB,mBAAoB,aAAc,SAAU,WACnH,MAAM,GACnB,YAAYj7H,EAAIywC,EAAO,IACrB,MAAMxP,EAAKwP,EAAKxP,IAAMwP,EAAK31B,SAAW21B,EAAK31B,QAAQmmB,GACnDn8B,KAAKm8B,GAAKA,EACVn8B,KAAK9E,GAAKA,EACV8E,KAAKinC,cAAgB,KACrBjnC,KAAK+1H,SAAW,KAChB/1H,KAAKo2H,iBAAmB,KACxBp2H,KAAK+b,OAAS,KACd/b,KAAKslE,UAAY,KACjBtlE,KAAKktH,OAAS,KACdltH,KAAKq2H,WAAa,KAClBr2H,KAAKa,OAAS,KACdb,KAAKyuH,WAAa,GAClBzuH,KAAKs2H,kBAAoB,IAAI,GAAkBp7H,GAC/ComE,GAAmBthE,KAAM,cAAe,OAAQm2H,IAChDn2H,KAAKglD,WAAWrZ,GAChB3xC,OAAO2wC,KAAK3qC,MAGd,SACMA,KAAKa,QACPb,KAAKa,OAAOqkC,SAGdllC,KAAKs2H,kBAAkBpxF,SAGzB,WAAWzQ,EAAQ,IAIjB,OAHAz0B,KAAKs+B,QACLt+B,KAAKinC,cAAgB,KACrBjnC,KAAKmtH,WAAY,EACVntH,KAAK86C,SAASrmB,GAGvB,QACEz0B,KAAK+1H,SAAW,KAChB/1H,KAAKo2H,iBAAmB,KACxB,MAAM,eACJjC,GACEn0H,KAAKs2H,kBAKT,OAJAt2H,KAAK+b,OAAS,IAAI1b,MAAM8zH,GAAgBjsH,KAAK,MAC7ClI,KAAKslE,UAAY,IAAIjlE,MAAM8zH,GAAgBjsH,KAAK,MAChDlI,KAAKktH,OAAS,GACdltH,KAAKq2H,WAAa,KACXr2H,KAGT,SAASy0B,GAqBP,MApBI,YAAaA,IACfz0B,KAAKinC,cAAgBxS,EAAMze,SAAWye,EAAMze,QAAQixB,eAGlD,kBAAmBxS,IACrBz0B,KAAKinC,cAAgBxS,EAAMwS,eAGzB,eAAgBxS,GAClBz0B,KAAKu2H,cAAc9hG,EAAMg6F,YAGvB,aAAch6F,GAChBz0B,KAAK00H,iBAAiBjgG,EAAMshG,UAG1B,cAAethG,IACjBA,EAAQA,EAAM04F,WAGTntH,KAGT,kBACEA,KAAKq2H,WAAa,KAGpB,gBAEE,OADAr2H,KAAKq2H,WAAar2H,KAAKq2H,YAAcr2H,KAAKw2H,oBACnCx2H,KAAKq2H,WAGd,cAAc5H,GAWZ,OAVAz0H,OAAO4wB,OAAO5qB,KAAKyuH,WAAYA,GAC/BzuH,KAAKs2H,kBAAkBj6H,KAAK,KAC1B,IAAK,MAAMogF,KAAkBgyC,EAAY,CACvC,MAAMxxH,EAAQwxH,EAAWhyC,GAEzBz8E,KAAKy2H,cAAch6C,EAAgBx/E,GAGrC+C,KAAK9E,GAAGyG,WAAW,MAAO,QAErB3B,KAGT,iBAAiBy0H,EAAgB,KAAMrvD,EAAW,IAKhD,OAJAplE,KAAK+1H,SAAWtB,EAChBz0H,KAAKo2H,iBAAmBhxD,EACxBplE,KAAK02H,kBACL12H,KAAKs2H,kBAAkB5B,iBAAiBD,EAAervD,GAChDplE,KAGT,UAAUy8E,EAAgB57E,EAAQ81H,EAAc,IAC9C,GAAsB,QAAlB91H,EAAOrF,OACT,OAAOwE,KAAK00H,iBAAiB7zH,EAAQ81H,GAGvC,MAAM,SACJ1hH,EAAQ,SACRmwD,GACEplE,KAAK42H,4BAA4Bn6C,EAAgB57E,EAAQA,EAAOukE,SAAUuxD,GAS9E,OAPI1hH,GAAY,IACdjV,KAAK+b,OAAO9G,GAAYpU,EACxBb,KAAKslE,UAAUrwD,GAAYmwD,EAC3BplE,KAAK02H,kBACL12H,KAAKs2H,kBAAkB/I,UAAUt4G,EAAUpU,EAAQukE,IAG9CplE,KAGT,YAAYy8E,EAAgBzF,EAAY2/C,EAAc,IACpD,MAAM,SACJ1hH,EAAQ,SACRmwD,GACEplE,KAAK42H,4BAA4Bn6C,EAAgBzF,EAAYh9E,OAAO4wB,OAAO,CAC7E9pB,KAAMk2E,EAAWx2E,QAChBm2H,IAUH,OARI1hH,GAAY,IACd+hE,EAAah3E,KAAKs2H,kBAAkBxB,6BAA6B99C,GACjEh3E,KAAK+b,OAAO9G,GAAY+hE,EACxBh3E,KAAKslE,UAAUrwD,GAAYmwD,EAC3BplE,KAAK02H,kBACL12H,KAAKs2H,kBAAkBtxG,OAAO/P,GAAU,IAGnCjV,KAGT,gBAoBE,OAnBAA,KAAKs2H,kBAAkBj6H,KAAK,KACtB2D,KAAK+1H,UACP/1H,KAAKs2H,kBAAkB5B,iBAAiB,MAG1C10H,KAAKa,OAASb,KAAKa,QAAU,IAAI,GAAOb,KAAK9E,GAAI,CAC/CkqE,SAAU,CACRtkE,KAAM,KAIV,IAAK,IAAImU,EAAW,EAAGA,EAAWjV,KAAKs2H,kBAAkBnC,eAAgBl/G,IACnEjV,KAAK+b,OAAO9G,aAAqB,KACnCjV,KAAK9E,GAAGwG,yBAAyBuT,GACjCjV,KAAK9E,GAAGyG,WAAW,MAAO3B,KAAKa,OAAO6U,QACtC1V,KAAK9E,GAAG2G,oBAAoBoT,EAAU,EAAG,MAAM,EAAO,EAAG,MAIxDjV,KAGT,cAcE,OAbAA,KAAKs2H,kBAAkBj6H,KAAK,KACtB2D,KAAK+1H,UACP/1H,KAAK00H,iBAAiB10H,KAAK+1H,UAG7B,IAAK,IAAI9gH,EAAW,EAAGA,EAAWjV,KAAKs2H,kBAAkBnC,eAAgBl/G,IAAY,CACnF,MAAMpU,EAASb,KAAK+b,OAAO9G,GAEvBpU,aAAkB,IACpBb,KAAKutH,UAAUt4G,EAAUpU,MAIxBb,KAGT,YAAYk+E,EAAaG,EAAepkE,GACtC,IAAIhd,EAMJ,OALA+C,KAAKs2H,kBAAkBj6H,KAAK,KAC1B2D,KAAK62H,uBAAuB34C,EAAaG,GAEzCphF,EAAQgd,MAEHhd,EAGT,4BAA4Bw/E,EAAgBx/E,EAAO65H,EAAeH,GAChE,MAAMI,EAAiB,CACrB9hH,UAAW,EACXmwD,SAAU,OAGN,SACJnwD,EAAQ,KACR9R,GACEnD,KAAKg3H,mBAAmBv6C,GAE5B,IAAKjiE,OAAOC,SAASxF,IAAaA,EAAW,EAG3C,OAFAjV,KAAKktH,OAAOzwC,GAAkBx/E,EAC9B,GAAIktC,KAAK,EAAG,IAAM,gBAAgBsyC,QAAqBz8E,KAAKm8B,KAA5D,GACO46F,EAGT,MAAME,EAAaj3H,KAAKk3H,kBAAkB/zH,GAAQ8R,GAElD,IAAKgiH,EACH,OAAOF,EAGT,MAAMI,EAAkBn3H,KAAKslE,UAAUrwD,IAAa,GAC9CmwD,EAAW,GAAS9tD,QAAQ2/G,EAAW7xD,SAAU+xD,EAAiBL,EAAeH,IACjF,KACJ71H,EAAI,KACJhC,GACEsmE,EAEJ,OADA,GAAO5qD,OAAOC,SAAS3Z,IAAS0Z,OAAOC,SAAS3b,IACzC,CACLmW,WACAmwD,YAIJ,kBAAkBgyD,GAChB,OAAOp3H,KAAKinC,eAAiBjnC,KAAKinC,cAAc01C,iBAAiBy6C,GAGnE,mBAAmB36C,GACjB,MAAMxnE,EAAWuF,OAAOiiE,GAExB,GAAIjiE,OAAOC,SAASxF,GAClB,MAAO,CACLA,YAIJ,MAAMoiH,EAAgBnB,GAAgCv3H,KAAK89E,GACrDt5E,EAAOk0H,EAAgBA,EAAc,GAAK56C,EAC1C66C,EAAiBD,EAAgB78G,OAAO68G,EAAc,IAAM,EAElE,OAAIr3H,KAAKinC,cACA,CACLhyB,SAAUjV,KAAKinC,cAAcswF,qBAAqBp0H,GAAQm0H,EAC1Dn0H,QAIG,CACL8R,UAAW,GAIf,cAAcwnE,EAAgBx/E,GAC5B,GAAIA,aAAiB,GACnB+C,KAAKutH,UAAU9wC,EAAgBx/E,QAC1B,GAAIoD,MAAM6P,QAAQjT,IAAUA,EAAMuD,QAAUvD,EAAM,aAAc,GAAQ,CAC7E,MAAM4D,EAAS5D,EAAM,GACfmoE,EAAWnoE,EAAM,GACvB+C,KAAKutH,UAAU9wC,EAAgB57E,EAAQukE,QAClC,GAAIzrD,YAAYC,OAAO3c,IAAUoD,MAAM6P,QAAQjT,GAAQ,CAC5D,MAAMipH,EAAWjpH,EACjB+C,KAAKw3H,YAAY/6C,EAAgBypC,OAC5B,MAAIjpH,EAAM4D,kBAAkB,IAIjC,MAAM,IAAIkR,MAAMkkH,IAJyB,CACzC,MAAM7wD,EAAWnoE,EACjB+C,KAAKutH,UAAU9wC,EAAgBrX,EAASvkE,OAAQukE,KAMpD,uBAAuB8Y,EAAaG,GAClC,MAAMk1C,EAAelxH,KAAKC,IAAkB,EAAd47E,EAAiC,EAAhBG,GAC/C,IAAI6nC,EAAWlmH,KAAK+b,OAAO,GAEvBpC,YAAYC,OAAOssG,IACrBlmH,KAAKy3H,0BAA0BvR,EAAUqN,GAG3C,IAAK,IAAIt+G,EAAW,EAAGA,EAAWjV,KAAKs2H,kBAAkBnC,eAAgBl/G,IACvEixG,EAAWlmH,KAAK+b,OAAO9G,GAEnB0E,YAAYC,OAAOssG,IACrBlmH,KAAK03H,sBAAsBziH,EAAUixG,GAK3C,0BAA0BA,EAAUqN,GAClC,GAAI,GAAkBx3E,YAAY/7C,KAAK9E,GAAI,CACzC84H,uBAAuB,IAIvB,YAFAh0H,KAAK03H,sBAAsB,EAAGxR,GAKhC,MAAMrlH,EAASb,KAAKs2H,kBAAkBqB,kBAAkBpE,EAAcrN,GACtElmH,KAAKs2H,kBAAkB/I,UAAU,EAAG1sH,EAAQb,KAAKslE,UAAU,IAG7D,sBAAsBrwD,EAAUixG,GAC9B,GAAkBsR,YAAYx3H,KAAK9E,GAAI+Z,EAAUixG,GAGnD,oBACE,MAAMmQ,EAAa,CACjBl4C,WAAW,EACXhZ,aAAa,EACbyyD,WAAYzqH,IACZ+wE,YAAa/wE,IACbkxE,cAAelxE,KAGjB,IAAK,IAAI8H,EAAW,EAAGA,EAAWjV,KAAKs2H,kBAAkBnC,eAAgBl/G,IACvEjV,KAAK63H,6BAA6BxB,EAAYphH,GAsBhD,OAnBIjV,KAAK+1H,WACPM,EAAW9C,aAAevzH,KAAK+1H,SAASluD,gBAAgB7nE,KAAK+1H,SAAS3wD,UACtEixD,EAAWl4C,WAAY,EACvBk4C,EAAWj4C,UAAYp+E,KAAKo2H,iBAAiBt3H,MAAQkB,KAAK+1H,SAAS3wD,SAAStmE,KAC5Eu3H,EAAWyB,YAAc93H,KAAKo2H,iBAAiBn1H,QAAU,GAGvDo1H,EAAWuB,aAAezqH,MAC5BkpH,EAAWuB,WAAa,GAGtBvB,EAAWn4C,cAAgB/wE,MAC7BkpH,EAAWn4C,YAAc,GAGvBm4C,EAAWh4C,gBAAkBlxE,MAC/BkpH,EAAWh4C,cAAgB,GAGtBg4C,EAGT,6BAA6BA,EAAYphH,GACvC,MAAMhY,EAAQ+C,KAAK+b,OAAO9G,GACpBmwD,EAAWplE,KAAKslE,UAAUrwD,GAEhC,IAAKhY,EACH,OAGF,MAAM,QACJiY,GACEkwD,EACED,EAAcjwD,EAAU,EAG9B,GAFAmhH,EAAWlxD,YAAckxD,EAAWlxD,aAAeA,EAE/CloE,aAAiB,GAAQ,CAC3B,MAAM4D,EAAS5D,EAEf,GAAIkoE,EAAa,CACf,MAAMkZ,EAAgBx9E,EAAOk3H,eAAe3yD,GAC5CixD,EAAWh4C,cAAgBh8E,KAAKgF,IAAIgvH,EAAWh4C,cAAeA,OACzD,CACL,MAAMH,EAAcr9E,EAAOk3H,eAAe3yD,GAC1CixD,EAAWn4C,YAAc77E,KAAKgF,IAAIgvH,EAAWn4C,YAAaA,KAKhE,YAAYu2C,EAAgB,KAAMrvD,EAAW,IAE3C,OADA,GAAIxU,WAAW,cAAe,mBAA9B,GACO5wD,KAAK00H,iBAAiBD,EAAervD,IC9XhD,SAAS,GAAiBx6D,EAAG+gC,GAC3B,MAAM,QACJqsF,EAAU,GAAE,KACZl3H,EAAO,GACL6qC,EACJ,IAAInkC,EAAS,IAEb,IAAK,IAAIM,EAAI,EAAGA,EAAI8C,EAAEpK,QAAUsH,EAAIkwH,IAAWlwH,EACzCA,EAAI,IACNN,GAAU,KAAIM,EAAIhH,IAAS,EAAI,IAAM,KAGvC0G,GAAU,GAAYoD,EAAE9C,GAAI6jC,GAG9B,MAAMssF,EAAartH,EAAEpK,OAASw3H,EAAU,MAAQ,IAChD,MAAO,GAAGxwH,IAASywH,IAGd,SAAS,GAAYrtH,EAAG+gC,EAAO,IACpC,MAAMpyB,EAAU,OACV,UACJ2+G,GAAY,GACVvsF,EAEJ,GAAItrC,MAAM6P,QAAQtF,IAAM+O,YAAYC,OAAOhP,GACzC,OAAO,GAAiBA,EAAG+gC,GAG7B,IAAKnxB,OAAOC,SAAS7P,GACnB,OAAOrM,OAAOqM,GAGhB,GAAIvI,KAAKqM,IAAI9D,GAAK2O,EAChB,OAAO2+G,EAAY,IAAM,KAG3B,GAAIA,EACF,OAAOttH,EAAE+8B,QAAQ,GAGnB,GAAItlC,KAAKqM,IAAI9D,GAAK,KAAOvI,KAAKqM,IAAI9D,GAAK,IACrC,OAAOA,EAAE+8B,QAAQ,GAGnB,MAAMngC,EAASoD,EAAE8O,YAAY,GACvBy+G,EAAU3wH,EAAO3J,QAAQ,MAC/B,OAAOs6H,IAAY3wH,EAAOhH,OAAS,EAAIgH,EAAOnN,MAAM,GAAI,GAAKmN,EC3CxD,SAAS4wH,IAA4B,YAC1C95C,EAAW,OACXrhB,EAAS,eAET,IAAKqhB,EAAYr3C,cACf,MAAO,GAGT,MAAMoD,EAAQ,GAEVi0C,EAAYy3C,WACd1rF,EAAMguF,qBAAuBC,GAAiBh6C,EAAaA,EAAYy3C,SAAU,KAAM94D,IAGzF,MAAMwxD,EAAanwC,EAAYviE,OAE/B,IAAK,MAAMw8G,KAAqB9J,EAAY,CAC1C,MAAM3kF,EAAOw0C,EAAY44C,kBAAkBqB,GAE3C,GAAIzuF,EAAM,CACR,IAAI0uF,EAAY,GAAGD,MAAsBzuF,EAAK3mC,OAC9C,MAAMiiE,EAAWkZ,EAAYhZ,UAAUx7B,EAAK70B,UAExCmwD,IACFozD,EAAY,GAAGD,MAAsBE,GAAmB3uF,EAAK3mC,KAAMiiE,MAGrE/6B,EAAMmuF,GAAaF,GAAiBh6C,EAAamwC,EAAW8J,GAAoBnzD,EAAUnI,IAI9F,OAAO5yB,EAGT,SAASiuF,GAAiBh6C,EAAaorC,EAAWtkD,EAAUnI,GAC1D,MAAM,GACJ/hE,GACEojF,EAEJ,IAAKorC,EACH,MAAO,CACL,CAACzsD,GAAS,OACV,UAAW,OAIf,IAIIi7D,EACA1qB,EACAvwG,EANA6B,EAAO,eACPgC,EAAO,EACP43H,EAAQ,EACR3kF,EAAQ,EAYZ,GAPIqxB,IACFtmE,EAAOsmE,EAAStmE,KAChBgC,EAAOskE,EAAStkE,KAChBhC,EAAOP,OAAOO,GAAMoa,QAAQ,QAAS,IACrCg/G,GAAoC,IAAxBp5H,EAAKjB,QAAQ,OAGvB6rH,aAAqB,GAAQ,CAC/B,MAAM7oH,EAAS6oH,GACT,KACJ7oF,EAAI,QACJlJ,GACE92B,EAAO83H,eAKX,IAAIziH,EAEJ,GANAs3F,EAAS71E,EAAU,IAAM,GACzB16B,EAAQ4jC,EACRkT,EAAQlzC,EAAOyxC,WACfomF,EAAQ3kF,EAAQlT,EAAKskB,kBAAoBrkD,EAGrCskE,EAAU,CACZ,MAAMF,EAAYE,EAASlwD,QAAU,EACrCgB,EAAS,GAAGgvD,EAAY,KAAO,QAAQwzD,OAAW53H,KAAQizC,WAAektB,GAAO/lE,EAAI4D,WAEpFo5H,GAAY,EACZhiH,EAAY69B,EAAH,SAGX,MAAO,CACL,CAACkpB,GAAS,GAAGuwC,IAAS,GAAYvwG,EAAO,CACvC6D,OACAo3H,gBAEF,UAAWhiH,GAQf,OAJAjZ,EAAQysH,EACR5oH,EAAO4oH,EAAUlpH,OACjB1B,EAAOP,OAAOmrH,EAAUvuG,YAAYhY,MAAM+V,QAAQ,QAAS,IAC3Dg/G,GAAoC,IAAxBp5H,EAAKjB,QAAQ,MAClB,CACL,CAACo/D,GAAY,GAAYhgE,EAAO,CAC9B6D,OACAo3H,cAFQ,cAIV,UAAW,GAAGp3H,KAAQhC,gBAI1B,SAAS25H,GAAmBt1H,EAAMiiE,GAChC,MAAM,KACJtmE,EAAI,KACJgC,GACEskE,EACEwzD,EAAc78C,GAAmBj9E,EAAMgC,GAC7C,OAAO83H,EAAc,GAAGz1H,MAASy1H,EAAYz1H,QAAUA,EC/GlD,SAAS01H,IAAyB,OACvC57D,EAAS,WAAU,QACnBjnD,EAAO,SACPq+C,EAAQ,cACRykE,GAAgB,IAEhB,GAAO9iH,GACP,MAAM+iH,EAA+B,QAC/BC,EAAgC,WAChCC,EAAmBjjH,EAAQmpE,gBAC3B90C,EAAQ,GACR6uF,EAAel/H,OAAOiC,KAAKg9H,GAAkBjrG,OACnD,IAAIuP,EAAQ,EAEZ,IAAK,MAAM+4C,KAAe4iD,EACnB5iD,EAAY/0B,MAAMw3E,IAAkCziD,EAAY/0B,MAAMy3E,IACrEG,GAAkB,CACpB9uF,QACA4yB,SACA5I,WACAiiB,cACAwiD,mBAEAv7F,IAKN,IAAK,MAAM+4C,KAAe4iD,EACpB5iD,EAAY/0B,MAAMy3E,IAChBG,GAAkB,CACpB9uF,QACA4yB,SACA5I,WACAiiB,cACAwiD,mBAEAv7F,IAKN,IAAK,MAAM+4C,KAAe4iD,EACnB7uF,EAAMisC,IACL6iD,GAAkB,CACpB9uF,QACA4yB,SACA5I,WACAiiB,cACAwiD,mBAEAv7F,IAKN,IAAI67F,EAAc,EAClB,MAAMC,EAAc,GAEpB,IAAKP,EACH,IAAK,MAAMxiD,KAAejiB,EAAU,CAClC,MAAM+qB,EAAU/qB,EAASiiB,GAEpBjsC,EAAMisC,KACT8iD,IACAC,EAAY/iD,GAAe,CACzBtlD,KAAM,aAAaouD,EACnB,CAACniB,GAAS,GAAYmiB,KAM9B,MAAO,CACL/0C,QACA9M,QACA87F,cACAD,eAIJ,SAASD,IAAkB,MACzB9uF,EAAK,OACL4yB,EAAM,SACN5I,EAAQ,YACRiiB,EAAW,cACXwiD,IAEA,MAAM77H,EAAQo3D,EAASiiB,GACjBgjD,EAAYC,GAAiBt8H,GAEnC,QAAK67H,IAAkBQ,KACrBjvF,EAAMisC,GAAe,CACnB,CAACrZ,GAASq8D,EAAY,GAAYr8H,GAAS,MAC3C,eAAgBq8H,EAAYr8H,EAAQ,iBAE/B,GAMX,SAASs8H,GAAiBt8H,GACxB,YAAiByC,IAAVzC,GAAiC,OAAVA,ECxGzB,SAASu8H,GAAqClhH,GACnD,MAAM+xB,EAAQ,GACR4yB,EAAS,iBAAiB3kD,EAAO6jB,GAEvC,IAAK,MAAMugD,KAAiBpkE,EAAO4jE,eACjC,GAAIQ,EAAe,CACjB,MAAM+8C,EAAkB,GAAmB/8C,GAC3CryC,EAAM,MAAMovF,GAAqB,CAC/B,CAACx8D,GAAS71B,KAAK/jB,UAAUq5D,EAActX,WAK7C,IAAK,MAAMs0D,KAAephH,EAAO+jE,aAC/B,GAAIq9C,EAAa,CACf,MAAMD,EAAkB,GAAmBC,GAC3CrvF,EAAM,OAAOovF,GAAqB,CAChC,CAACx8D,GAAS71B,KAAK/jB,UAAUq2G,EAAYt0D,WAK3C,OAAO/6B,EAGT,SAAS,GAAmBqyC,GAC1B,MAAM,KACJ59E,EAAI,KACJgC,GACE47E,EAActX,SACZwzD,EAAc78C,GAAmBj9E,EAAMgC,GAE7C,OAAI83H,EACK,GAAGA,EAAYz1H,QAAQu5E,EAAcv5E,OAGvCu5E,EAAcv5E,KCpCvB,MAAMw2H,GAA6B,CACjCC,SAAU,YACVC,OAAQ,UACRC,QAAS,SACTC,WAAY,YACZC,WAAY,aACZC,WAAY,cAEP,SAASC,GAAuBh/H,EAAIi/H,EAAUhiH,GACnD,MAAM0xG,EAAU,GAChB,IAAIuQ,EAAUD,EAASC,QAEvB,IAAK,MAAMj3H,KAAQg3H,EAAS1L,WAAY,CACtC,MAAM/E,EAAYyQ,EAAS1L,WAAWtrH,GAChCk3H,EAAeC,GAAiBn3H,EAAMgV,GAE5C,GAAa,YAAThV,EACFi3H,EAAU1Q,OACL,GAAIA,EAAUxD,SACnB2D,EAAQwQ,GAAgB3Q,EAAUzsH,UAC7B,CACL,MAAM8gD,EAAa2rE,EAAUzsH,MACvBmoE,EAAW,IAAKskD,UAEftkD,EAASnoE,MAChB4sH,EAAQwQ,GAAgB,CAAC,IAAI,GAAOn/H,EAAI6iD,GAAaqnB,GACrDm1D,GAAuBp3H,EAAMiiE,IAIjC,GAAIg1D,EAAS,CACX,MAAMv5F,EAAOu5F,EAAQn9H,OAASm9H,EAC9B,GAAOv5F,aAAgB0iC,aAAe1iC,aAAgB2iC,YAAa,yDACnE,MAAM4B,EAAW,CACftkE,KAAM,EACNq9E,eAAiCz+E,IAAtB06H,EAAQj8C,WAAiCi8C,EAAQj8C,WAE9D0rC,EAAQuQ,QAAU,CAAC,IAAI,GAAOl/H,EAAI,CAChC2lC,OACArlC,OAAQ,QACN4pE,GAGN,OAAOykD,EAGT,SAASyQ,GAAiBn3H,EAAMgV,GAC9B,MAAM,aACJqiH,EAAeb,IACbxhH,GAAW,GACf,OAAOqiH,GAAgBA,EAAar3H,IAASA,EAGxC,SAASo3H,GAAuBnD,EAAe1N,GACpD,IAAI+Q,EAEJ,OAAQrD,GACN,IAAK,YACL,IAAK,YACL,IAAK,YACL,IAAK,YACHqD,EAAW,MACX,MAEF,IAAK,WACL,IAAK,YACL,IAAK,UACL,IAAK,gBACHA,EAAW,UACX,MAEF,SAGF,OAAQA,GACN,IAAK,UACH/Q,EAAU5oH,KAAO4oH,EAAU5oH,MAAQ,EACnC,MAEF,IAAK,MACH4oH,EAAU5oH,KAAO4oH,EAAU5oH,MAAQ,EACnC,MAEF,SAGF,GAAO0Z,OAAOC,SAASivG,EAAU5oH,MAAO,aAAas2H,gBClFvD,MAAMsD,GAAoB,EACpBC,GAAmB,IACnBC,GAAmB,uCAEnB,GAAO,OAEPC,GAAc,GACL,MAAM,GACnB,YAAY3/H,EAAIu5B,EAAQ,IACtB,MAAM,GACJ0H,EAAKhd,GAAI,UACPsV,EACJ,GAAO,gBAAQv5B,IACf8E,KAAKm8B,GAAKA,EACVn8B,KAAK9E,GAAKA,EACV8E,KAAKm8B,GAAK1H,EAAM0H,IAAMhd,GAAI,SAC1Bnf,KAAK86H,YAAc,EACnB96H,KAAK+6H,UAAW,EAChB/6H,KAAKglD,WAAWvwB,GAGlB,WAAWA,GACTz0B,KAAKy0B,MAAQ,GACbz0B,KAAK8lF,eAAiBrxD,EAAMqxD,gBAAkB,GAAeC,yBAAyB/lF,KAAK9E,IAC3F8E,KAAKg7H,sBAAwB,EAC7Bh7H,KAAKi7H,iBAAkB,EACvB,MAAM,QACJjlH,EAAU,KAAI,GACdk+C,EAAE,GACFC,EAAE,QACF4B,EAAO,QACPvB,EAAO,OACPC,EAAM,SACNipB,EAAQ,WACRC,EAAU,mBACVtiB,GACE5mC,EACJz0B,KAAKk7H,aAAe,CAClBllH,UACAk+C,KACAC,KACA4B,UACAvB,UACAC,SACAipB,WACAC,aACAtiB,sBAEFr7D,KAAKgW,QAAU,KACfhW,KAAKs+E,YAAc,KACnBt+E,KAAKm7H,eAAgB,EACrBn7H,KAAK0qC,SAAW,GAChB1qC,KAAKowG,aAAc,EACnBpwG,KAAKo7H,YAAc,GACnBp7H,KAAKyuH,WAAa,GAClBzuH,KAAKq0D,SAAW,GAChBr0D,KAAKs+F,UAAW,EAEhBt+F,KAAKq7H,gBAELr7H,KAAKg+E,YAAYhkF,OAAO4wB,OAAO,GAAI5qB,KAAK40D,kBAAkBngC,EAAM6mG,kBAChEt7H,KAAK27E,cAA8Bj8E,IAAnB+0B,EAAMknD,SAAyBlnD,EAAMknD,SAAW,EAChE37E,KAAKk+E,YAAczpD,EAAMypD,aAAe,EACxCl+E,KAAKu7H,gBAAkB,GACvBv7H,KAAKmlE,YAAc1wC,EAAM0wC,aAAe1wC,EAAMywC,WAAazwC,EAAM4pD,cAAgB,EAEjFr+E,KAAKw7H,eAAe/mG,GAEpBz0B,KAAKm6H,SAAW,GAChB,QAAyBz6H,IAAlBM,KAAK27E,UAA0BnhE,OAAOC,SAASza,KAAKk+E,aAAc08C,IAG3E,SAASnmG,GACPz0B,KAAKw7H,eAAe/mG,GAGtB,SACE,IAAK,MAAMt4B,KAAO6D,KAAKo7H,YACjBp7H,KAAKo7H,YAAYj/H,KAAS6D,KAAKyuH,WAAWtyH,IAC5C6D,KAAKo7H,YAAYj/H,GAAK+oC,SAItBllC,KAAKi7H,kBACPj7H,KAAK8lF,eAAesgC,QAAQpmH,KAAKgW,SACjChW,KAAKi7H,iBAAkB,GAGzBj7H,KAAKs+E,YAAYp5C,SAEjBllC,KAAKy7H,yBAGP,cACE,OAAOz7H,KAAK27E,SAGd,iBACE,OAAO37E,KAAKk+E,YAGd,mBACE,OAAOl+E,KAAKq+E,cAGd,gBACE,OAAOr+E,KAAKyuH,WAGd,aACE,OAAOzuH,KAAKgW,QAGd,WAAWye,GACT,MAAM,QACJze,EAAO,GACPk+C,EAAE,GACFC,EAAE,QACF4B,EAAO,QACPvB,EAAO,OACPC,EAAM,SACNipB,EAAQ,WACRC,EAAU,mBACVtiB,GACE5mC,EACJz0B,KAAKk7H,aAAe,CAClBllH,UACAk+C,KACAC,KACA4B,UACAvB,UACAC,SACAipB,WACAC,aACAtiB,sBAEFr7D,KAAKm7H,eAAgB,EAGvB,cACE,OAAOn7H,KAAKq0D,SAGd,YAAYsnB,GAEV,OADA37E,KAAK27E,SAAWA,EACT37E,KAGT,eAAek+E,GAGb,OAFA,GAAO1jE,OAAOC,SAASyjE,IACvBl+E,KAAKk+E,YAAcA,EACZl+E,KAGT,iBAAiBq+E,GAGf,OAFA,GAAO7jE,OAAOC,SAAS4jE,IACvBr+E,KAAKq+E,cAAgBA,EACdr+E,KAGT,YAAYm6H,GAQV,OAPAn6H,KAAK27E,SAAWw+C,EAASx+C,SACzB37E,KAAKk+E,YAAci8C,EAASpC,iBAE5B/3H,KAAKy7H,yBAELz7H,KAAKu7H,gBAAkBrB,GAAuBl6H,KAAK9E,GAAIi/H,GACvDn6H,KAAKs+E,YAAYi4C,cAAcv2H,KAAKu7H,iBAC7Bv7H,KAGT,cAAcyuH,EAAa,IACzB,GAAIrtD,GAAcqtD,GAChB,OAAOzuH,KAGT,MAAM07H,EAAuB,GAE7B,IAAK,MAAMv4H,KAAQsrH,EAAY,CAC7B,MAAM/E,EAAY+E,EAAWtrH,GAC7Bu4H,EAAqBv4H,GAAQumH,EAAUphG,SAAWohG,EAAUphG,WAAaohG,EAI3E,OADA1pH,KAAKs+E,YAAYi4C,cAAcmF,GACxB17H,KAGT,YAAYq0D,EAAW,IAErB,OADAr6D,OAAO4wB,OAAO5qB,KAAKq0D,SAAUA,GACtBr0D,KAGT,kBAAkB2rC,GAChB3rC,KAAKq7H,gBAEL,MAAM/mE,EAAct0D,KAAK8lF,eAAexxB,YAAYt0D,KAAKgW,SAEzD,OAAIs+C,EACKA,EAAY3oB,GAGd,GAGT,qBAAqBA,GACnB,MAAM0oB,EAAWr0D,KAAK40D,kBAAkBjpB,GAAQ,IAChD,OAAO3rC,KAAKg+E,YAAY3pB,GAG1B,MAAM1oB,GAEJ,OADA8hC,GAAMztE,KAAKgW,QAAQ9a,GAAIywC,GAChB3rC,KAGT,KAAK2rC,EAAO,IACV3rC,KAAKq7H,gBAEL,MAAM,eACJC,EAAiB,KAAI,YACrBh1G,EAAW,SACX+tC,EAAW,GAAE,WACbo6D,EAAa,GAAE,kBACflwC,EAAoBv+E,KAAKu+E,kBAAiB,WAC1ChiE,EAAa,GAAE,YACf+hE,EAAct+E,KAAKs+E,aACjB3yC,EAIJ,IAAIsyC,EAHJj+E,KAAKu2H,cAAc9H,GACnBzuH,KAAK27H,qBAAqBL,GAC1Bt7H,KAAKg+E,YAAY3pB,GAGb,GAAIhpB,UAAYqvF,KAClBz8C,EAAcj+E,KAAK47H,kBAAkBlB,KAGvC,MAAMrE,EAAar2H,KAAKs+E,YAAYu9C,iBAC9B,UACJ19C,EAAYk4C,EAAWl4C,UAAS,UAChCC,EAAYi4C,EAAWj4C,UAAS,YAChC05C,EAAczB,EAAWyB,YAAW,qBACpCgE,EAAuBzF,EAAWlxD,aAChCnlE,KAAKy0B,MAELqnG,IAAyB97H,KAAKmlE,aAChC,GAAIr5C,KAAK,oDAAqD9rB,KAAKm8B,GAAnE,GAGF,MAAM,YACJgpC,EAAW,cACXkZ,GACEr+E,MACE,eACJy9G,EAAiB,GAAI,cACrBC,EAAgB,IACd19G,KAAKy0B,MACTgpF,IACAz9G,KAAKgW,QAAQgoE,YAAYh+E,KAAKq0D,UAC9B,MAAM0nE,EAAU/7H,KAAKgW,QAAQgmH,KAAKhiI,OAAO4wB,OAAOiwG,GAAalvF,EAAM,CACjEsyC,cACA5pB,SAAU,KACV/tC,cACA/J,aACAo/D,SAAU37E,KAAKi8H,cACf/9C,YAAal+E,KAAK+3H,iBAClBz5C,cACAC,oBACAJ,YACAC,YACAjZ,cACAkZ,gBACAp9E,OAAQk9E,EAAY25C,EAAc,KAQpC,OANApa,IAEI,GAAIryE,UAAYqvF,IAClB16H,KAAKk8H,gBAAgBj+C,EAAaK,EAAah4D,GAG1Cy1G,EAGT,UAAUpwF,EAAO,IACf,MAAM,QACJqmF,GAAU,EAAI,gBACdnD,EAAe,aACfsN,EAAe,IACbxwF,EACJ,IAAI,WACFpvB,GACEovB,EAEAkjF,GACF7uH,KAAKo8H,oBAAoBvN,GAGvBmD,IACFz1G,EAAaviB,OAAO4wB,OAAO,GAAIrO,EAAY,CACzC,CAAC,OAAQy1G,KAIbmK,EAAajgI,QAAQkzH,GAASA,EAAM9wC,YAAY+9C,iBAEhD,IACEr8H,KAAKg8H,KAAKhiI,OAAO4wB,OAAO,GAAI+gB,EAAM,CAChCpvB,gBAEF,QACA4/G,EAAajgI,QAAQkzH,GAASA,EAAM9wC,YAAYg+C,eAGlD,OAAOt8H,KAGT,OAAOq0D,EAAW,IAEhB,OADA,GAAIvoC,KAAK,yEAAT,GACO9rB,KAAKg+E,YAAY3pB,GAAU2nE,OAGpC,eAAevnG,GACbz6B,OAAO4wB,OAAO5qB,KAAKy0B,MAAOA,GAEtB,aAAcA,GAChBz0B,KAAKg+E,YAAYvpD,EAAM4/B,UAGrB,aAAc5/B,IAChBz0B,KAAKs+F,SAAW7pE,EAAM6pE,UAGpB,kBAAmB7pE,IACrBz0B,KAAKq+E,cAAgB5pD,EAAM4pD,eAGzB,aAAc5pD,GAChBz0B,KAAKu8H,YAAY9nG,EAAM0lG,UAGrB,eAAgB1lG,GAClBz0B,KAAKu2H,cAAc9hG,EAAMg6F,YAGvB,qBAAsBh6F,GACxBz0B,KAAKo8H,oBAAoB3nG,EAAM+nG,kBAInC,gBACE,MAAMz0C,EAAc/nF,KAAKm7H,eAAiBn7H,KAAK8lF,eAAenE,YAAc3hF,KAAKg7H,qBAEjF,IAAKjzC,EACH,OAGF,IAAI,QACF/xE,GACEhW,KAAKk7H,aAET,GAAIllH,EACFhW,KAAKi7H,iBAAkB,MAClB,CACL,MAAM,GACJ/mE,EAAE,GACFC,EAAE,QACF4B,EAAO,OACPtB,EAAM,QACND,EAAO,SACPkpB,EAAQ,WACRC,EAAU,mBACVtiB,GACEr7D,KAAKk7H,aACTllH,EAAUhW,KAAK8lF,eAAe7kE,IAAI,CAChCizC,KACAC,KACA4B,UACAtB,SACAD,UACAkpB,WACAC,aACAtiB,uBAGEr7D,KAAKgW,SAAWhW,KAAKi7H,iBACvBj7H,KAAK8lF,eAAesgC,QAAQpmH,KAAKgW,SAGnChW,KAAKg7H,qBAAuBh7H,KAAK8lF,eAAenE,UAChD3hF,KAAKi7H,iBAAkB,EAGzB,GAAOjlH,aAAmB,GAAS,yBACnChW,KAAKm7H,eAAgB,EAEjBnlH,IAAYhW,KAAKgW,UAIrBhW,KAAKgW,QAAUA,EAEXhW,KAAKs+E,YACPt+E,KAAKs+E,YAAYxjC,SAAS,CACxB9kC,QAAShW,KAAKgW,QACdy4G,WAAYzuH,KAAKs+E,YAAYmwC,aAG/BzuH,KAAKs+E,YAAc,IAAI,GAAYt+E,KAAK9E,GAAI,CAC1C8a,QAAShW,KAAKgW,UAIlBhW,KAAKg+E,YAAYhkF,OAAO4wB,OAAO,GAAI5qB,KAAK40D,uBAG1C,yBACE,IAAK,MAAMzxD,KAAQnD,KAAKu7H,gBAAiB,CACvC,MAAM16H,EAASb,KAAKu7H,gBAAgBp4H,GAAM,IAAMnD,KAAKu7H,gBAAgBp4H,GAEjEtC,aAAkB,IACpBA,EAAOqkC,UAKb,mBAAmBysE,GACb3xG,KAAK+6H,UACP,GAAOppB,EAAgB,yDAI3B,oBAAoBkd,EAAkB,IACpC,GAAIztD,GAAcytD,GAChB,OAAO7uH,KAGT,MAAM,GACJ9E,GACE8E,KAAKgW,QAKT,OAJAhW,KAAKu+E,kBAAoBv+E,KAAKu+E,mBAAqB,IAAI,GAAkBrjF,EAAI,CAC3E8a,QAAShW,KAAKgW,UAEhBhW,KAAKu+E,kBAAkB8uC,WAAWwB,GAC3B7uH,KAGT,kBAAkBmrC,GAChB,MAAMsxF,EAAiBtxF,EAAW,EAAI,EAAIwvF,GAE1C,KAAI3/H,KAAKJ,MAAQoF,KAAK86H,YAAc2B,GAQpC,OAJAz8H,KAAK86H,YAAc9/H,KAAKJ,MACxB,GAAImxC,MAAM2uF,GAAmB,qBAAqB16H,KAAKm8B,GAAM,CAC3DyP,UAAW,GAAI5B,OAAS,GAD1B,GAGOmB,EAGT,gBAAgBA,EAAUmzC,EAAajqB,EAAU/tC,GAC/C,QAAiB5mB,IAAbyrC,EACF,OAGF,MAAMuxF,EAAiBtE,GAA4B,CACjD95C,cACArhB,OAAWj9D,KAAKm8B,GAAR,cACRsyF,WAAYzuH,KAAKo7H,eAGjB/wF,MAAOsyF,EAAY,YACnBtD,EAAW,YACXD,GACEP,GAAyB,CAC3B57D,OAAWj9D,KAAKm8B,GAAR,YACRnmB,QAAShW,KAAKgW,QACdq+C,SAAUr6D,OAAO4wB,OAAO,GAAI5qB,KAAKgW,QAAQq+C,SAAUA,MAGnDhqB,MAAOuyF,EACPr/F,MAAOs/F,GACLhE,GAAyB,CAC3B57D,OAAWj9D,KAAKm8B,GAAR,YACRnmB,QAAShW,KAAKgW,QACdq+C,SAAUr6D,OAAO4wB,OAAO,GAAI5qB,KAAKgW,QAAQq+C,SAAUA,GACnDykE,eAAe,IAGb+D,EAAe,GACjB,GAAIv9H,IAAI,mBAAoBtF,OAAOiC,KAAK2gI,GAAxC,GAGExD,EAAc,GAChB,GAAI95H,IAAI,kBAAmBtF,OAAOiC,KAAKo9H,GAAvC,GAGF,MAAMyD,EAActD,GAAqCx5H,KAAKs+E,YAAYr3C,eAC1E,GAAIoD,MAAMc,EAAUuxF,EAApB,GACA,GAAIryF,MAAMc,EAAUwxF,EAApB,GACA,GAAItyF,MAAMc,EAAW,EAAG2xF,EAAxB,GAEIx2G,GACFA,EAAYhnB,IAAI,CACd6rC,SAAUuvF,GACVliH,QAAS,eAAe8N,EAAY6V,KAIxC,GAAI6P,SAAS0uF,GAAmB,qBAAqB16H,KAAKm8B,GAA1D,IC1fW,MAAM,GACnB,mBAAmBjhC,GACjB,OAAO,gBAASA,GAGlB,YAAYA,EAAIu5B,EAAQ,IACtBz0B,KAAK9E,GAAKA,EACV8E,KAAKovH,MAAQ,KACbpvH,KAAKuzH,aAAe,EACpBvzH,KAAK+8H,gBAAkB,KACvB/8H,KAAKg9H,iBAAmB,KACxBh9H,KAAKoyH,gBAAkB,KAEvBpyH,KAAKmpF,YAAY10D,GAEjBz6B,OAAO2wC,KAAK3qC,MAGd,SACE,MAAM,MACJovH,EAAK,gBACL2N,EAAe,iBACfC,GACEh9H,KAEAovH,GACFA,EAAMlqF,SAGJ63F,GACFA,EAAgB73F,SAGd83F,GACFA,EAAiB93F,SAIrB,IAAIyG,EAAO,IACT,MAAM,kBACJsxF,GAAoB,GAClBtxF,EAEEuxF,EAAcl9H,KAAKm9H,mBAAmBxxF,GAExCsxF,GAAqBC,EAAY52G,aACnC42G,EAAY52G,YAAYmnD,MAAM,CAC5BpkC,OAAO,IAIXrpC,KAAKovH,MAAM5qC,UAAU04C,GAGvB,OACE,IAAIE,GAAU,EACd,MAAMC,EAAqB,CAACr9H,KAAK+8H,gBAAiB/8H,KAAKg9H,kBAAkB3kG,OAAOr5B,SAEhF,IAAK,MAAMs+H,KAAqBD,EAC9BD,EAAUA,GAAWE,EAAkBC,OAGzC,GAAOH,EAAS,mBAGlB,UAAUxO,EAAc,MACtB,OAAO5uH,KAAK+8H,iBAAmB/8H,KAAK+8H,gBAAgBtY,UAAUmK,GAGhE,QAAQjjF,EAAO,IACb,MAAM0xF,EAAqB,CAACr9H,KAAK+8H,gBAAiB/8H,KAAKg9H,kBAAkB3kG,OAAOr5B,SAEhF,IAAK,MAAMs+H,KAAqBD,EAAoB,CAClD,MAAMx8F,EAAOy8F,EAAkBt6E,QAAQrX,GAEvC,GAAI9K,EACF,OAAOA,EAIX,OAAO,KAGT,iBACE,OAAO7gC,KAAKg9H,kBAAoBh9H,KAAKg9H,iBAAiB/sD,iBAGxD,OAAOtkC,EAAO,IACR,iBAAkBA,GACpB3rC,KAAKovH,MAAMoO,eAAe7xF,EAAK4nF,cAGjC,MAAM8J,EAAqB,CAACr9H,KAAK+8H,gBAAiB/8H,KAAKg9H,kBAAkB3kG,OAAOr5B,SAEhF,IAAK,MAAMs+H,KAAqBD,EAC9BC,EAAkBx0G,OAAO6iB,GAI7B,YAAYlX,EAAQ,IAClB,MAAM,GACJv5B,GACE8E,KAEJA,KAAKy9H,yBAAyBviI,EAAIu5B,GAElCA,EAAQz0B,KAAK09H,kBAAkBjpG,GAC/Bz0B,KAAKovH,MAAQ,IAAI,GAAMl0H,EAAIlB,OAAO4wB,OAAO,GAAI6J,EAAO,CAClD0/B,GAAI1/B,EAAM0/B,IAAMw4D,GAAiB,CAC/BjuH,QAASgxH,GAAiBj7F,EAAMy/B,MAElC/3B,GAAI1H,EAAM0H,IAAM,kBAChBw/C,SAAUlnD,EAAMknD,UAAY,EAC5BuC,YAAazpD,EAAM8+F,gBAErBvzH,KAAK+8H,iBAAmB/8H,KAAK+8H,gBAAgBY,eAAe,CAC1DvO,MAAOpvH,KAAKovH,QAIhB,kBAAkB36F,GAChB,IAAImpG,EAAe5jI,OAAO4wB,OAAO,GAAI6J,GACrC,MAAM4oG,EAAqB,CAACr9H,KAAK+8H,gBAAiB/8H,KAAKg9H,kBAAkB3kG,OAAOr5B,SAEhF,IAAK,MAAMs+H,KAAqBD,EAC9BO,EAAeN,EAAkBO,iBAAiBD,GAGpD,OAAOA,EAGT,yBAAyB1iI,EAAIu5B,GACvBqpG,GAAyBrpG,KAC3Bz0B,KAAK+8H,gBAAkB,IAAI,GAAgB7hI,EAAIu5B,IAG7CspG,GAA0BtpG,KAC5Bz0B,KAAKg9H,iBAAmB,IAAI,GAAiB9hI,EAAIu5B,IAGnD,GAAOz0B,KAAK+8H,iBAAmB/8H,KAAKg9H,iBAAkB,kEAGxD,mBAAmBrxF,GACjB,IAAIuxF,EAAcljI,OAAO4wB,OAAO,GAAI+gB,GACpC,MAAM0xF,EAAqB,CAACr9H,KAAK+8H,gBAAiB/8H,KAAKg9H,kBAAkB3kG,OAAOr5B,SAEhF,IAAK,MAAMs+H,KAAqBD,EAC9BH,EAAcljI,OAAO4wB,OAAOsyG,EAAaI,EAAkBU,eAAed,IAG5E,OAAOA,GAKX,SAASY,GAAyBrpG,GAChC,QAAK2sC,GAAc3sC,EAAMo6F,kBAAqBztD,GAAc3sC,EAAM45F,gBAAgB55F,EAAMipD,UAAYjpD,EAAMipD,SAASl9E,OAAS,IAO9H,SAASu9H,GAA0BtpG,GACjC,QAAK2sC,GAAc3sC,EAAM0+F,mBAAoB1+F,EAAM2+F,iBAAkB3+F,EAAMs+F,uBCvK9D,MAAM,GACnB,aAAY,GACV73H,EAAE,UACFwuH,EAAS,SACT9iC,IAEA5mF,KAAK9E,GAAKA,EACV8E,KAAKlB,KAAO,gBACZkB,KAAK0vF,WAAa,IAAIlB,GAAW5H,GACjC5mF,KAAK0pH,UAAYA,EACjB1pH,KAAKi+H,sBAAwB,IAAI,GAAU/iI,EAAIwuH,EAAUh7B,UACzD1uF,KAAKk+H,oBAAsBxU,EAAU5B,aACrC9nH,KAAKm+H,cAAgB,EACrBn+H,KAAKwkF,UAAY45C,GAAaljI,EAAIwuH,GAClC,MAAM2U,EAAa,CACjB/rF,WAAY,EACZwzB,MAAO,OAET9lE,KAAK6pH,QAAU,CAAC,IAAI,GAAO3uH,EAAImjI,GAAa,IAAI,GAAOnjI,EAAImjI,IAG7D,iBACE,OAAOr+H,KAAK0vF,WAAWa,WAGzB,MAAM+tC,EAAoBrX,GACxB,GAAIqX,EAAmB15F,UAAY,EAEjC,YADA5kC,KAAK0vF,WAAW1/C,SAIlB,MAAM,GACJ90C,EAAE,QACF2uH,EAAO,UACPH,GACE1pH,KACJ4pH,GAAaC,GACb,MAAM0U,EAAgB,CACpBtX,eACAyC,YACAQ,WAAYlqH,KAAKm+H,cACjBhU,iBAAkBnqH,KAAKk+H,oBACvBl7E,QAASs7E,EAAmBE,OAG9B,IAAK,MAAM39H,KAAUgpH,EACnBI,GAAU,CACRppH,YACG09H,IAIPv+H,KAAKk+H,oBAAsBxU,EAAU5B,aACrC9nH,KAAKm+H,cAAgBrU,GAAyBJ,EAAWzC,GACzDjnH,KAAKi+H,sBAAsBn1G,OAAO,CAChCjoB,OAAQgpH,EAAQ,GAChB5sH,MAAOysH,EAAUzsH,QAEnB+C,KAAK0vF,WAAWv2E,MAAMmlH,GACtBt+H,KAAKwkF,UAAU17D,OAAO,CACpByqG,aAAclxH,KAAK6lC,MAAMloC,KAAKm+H,cAAgBzU,EAAU5oH,MACxD0tH,cAAe,CACbiQ,MAAO5U,EAAQ,GACf6U,IAAKjV,GAAyBvuH,EAAIwuH,IAEpCmF,gBAAiB,CACf8P,SAAU9U,EAAQ,MAKxB,SACE,MAAMwB,EAAUrrH,KAAK0vF,WAAW5mE,SAEhC,GAAIuiG,EAAS,CACX,MAAM,KACJtsF,EACA2vD,UAAU,SACR9pD,EAAQ,OACRqsD,IAEAjxF,KAAK0vF,WACHzkF,EAAIgmF,EAAOlyD,EAAO6F,GACxB5kC,KAAKwkF,UAAUo6C,IAAI,CACjBvqE,SAAU,CACRt1B,KAAM9zB,KAKZ,OAAOogH,EAGT,SACErrH,KAAK0vF,WAAW1/C,SAChBhwC,KAAKwkF,UAAUt/C,SAEf,MAAOllC,KAAK6pH,QAAQrpH,OAClBR,KAAK6pH,QAAQgV,MAAM35F,UAKzB,MAAM,GAAK,mRAEX,SAASk5F,GAAaljI,EAAIwuH,GACxB,MAAMoV,EAAgBnV,GAAyBD,EAAU5oH,MACzD,OAAO,IAAI,GAAU5F,EAAI,CACvBg5D,GAAE,GACFM,QAAS,CACPuqE,eAAgBD,GAElBphD,SAAU,CAAC,cChHA,MAAM,GACnB,aAAY,GACVxiF,EAAE,UACFwuH,EAAS,SACT9iC,IAEA5mF,KAAK9E,GAAKA,EACV8E,KAAKlB,KAAO,SACZkB,KAAK0vF,WAAa,IAAIlB,GAAW5H,GACjC5mF,KAAK0pH,UAAYA,EACjB1pH,KAAKi+H,sBAAwB,IAAI,GAAU/iI,EAAI,IAAKwuH,EAAUh7B,SAC5D3tF,YAAY,IAEdf,KAAKk+H,oBAAsBxU,EAAU5B,aACrC9nH,KAAKm+H,cAAgB,EACrBn+H,KAAKsvE,QAAU0vD,GAAW9jI,GAC1B8E,KAAKsmB,YAAc,GAAeprB,EAAI8E,KAAKsvE,SAC3CtvE,KAAKwkF,UAAY,GAAatpF,EAAIwuH,EAAW1pH,KAAKsmB,aAClD,MAAM+3G,EAAa,CACjB/rF,WAAY,EACZwzB,MAAO,OAET9lE,KAAK6pH,QAAU,CAAC,IAAI,GAAO3uH,EAAImjI,GAAa,IAAI,GAAOnjI,EAAImjI,GAAa,IAAI,GAAOnjI,EAAImjI,IAGzF,iBACE,OAAOr+H,KAAK0vF,WAAWa,WAGzB,MAAM+tC,EAAoBrX,GACxB,MAAM,GACJ/rH,EAAE,QACF2uH,EAAO,UACPH,GACE1pH,KACEu+H,EAAgB,CACpBtX,eACAyC,YACAQ,WAAYlqH,KAAKm+H,cACjBhU,iBAAkBnqH,KAAKk+H,oBACvBl7E,QAASs7E,EAAmBE,OAG9B,IAAK,MAAM39H,KAAUgpH,EACnBI,GAAU,CACRppH,YACG09H,IAIPv+H,KAAKk+H,oBAAsBxU,EAAU5B,aACrC9nH,KAAKm+H,cAAgBrU,GAAyBJ,EAAWzC,GACzDjnH,KAAKi+H,sBAAsBn1G,OAAO,CAChCjoB,OAAQgpH,EAAQ,GAChB5sH,MAAOysH,EAAUzsH,QAEnB+C,KAAK0vF,WAAWv2E,MAAMmlH,GACtBt+H,KAAKwkF,UAAU17D,OAAO,CACpByqG,aAAclxH,KAAK6lC,MAAMloC,KAAKm+H,cAAgBzU,EAAU5oH,MACxD0tH,cAAe,CACbkQ,IAAKjV,GAAyBvuH,EAAIwuH,MAKxC,SACE,MAAM,QACJG,EAAO,UACPrlC,EAAS,YACTl+D,EAAW,WACXopE,GACE1vF,KACEqrH,EAAU37B,EAAW5mE,SAE3B,IAAKuiG,EACH,OAAO,EAGT7mC,EAAU17D,OAAO,CACf0lG,cAAe,CACbyQ,MAAOpV,EAAQ,GACfqV,KAAMrV,EAAQ,IAEhBgF,gBAAiB,CACfsQ,MAAOtV,EAAQ,MAGnBrlC,EAAUo6C,IAAI,CACZt4G,cACA0rG,SAAS,EACTiL,mBAAmB,EACnB5oE,SAAU,CACR+0D,UAAW15B,EAAWhB,SAAS06B,UAC/BC,QAAS35B,EAAWhB,SAAS26B,SAE/B9sG,WAAY,CACVsK,WAAW,EACXN,OAAO,EACPF,SAAU,CAAC,EAAG,EAAG,EAAG,GACpBK,UAAW,CAAC,EAAG,GACfF,cAAe,CAAC,MAAO,UAG3BojG,GAAaC,GACb7pH,KAAKi+H,sBAAsBn1G,OAAO,CAChCjoB,OAAQgpH,EAAQ,GAChB5sH,MAAO+C,KAAK0pH,UAAUzsH,QAExB,MAAMmiI,EAAkB5vD,GAAkBlpD,GAAa,GAAK,EAM5D,OAJK84G,GACH1vC,EAAWt2E,OAGN,EAGT,SACEpZ,KAAK0vF,WAAW1/C,SAChBhwC,KAAKwkF,UAAUt/C,SAEf,MAAOllC,KAAK6pH,QAAQrpH,OAClBR,KAAK6pH,QAAQgV,MAAM35F,SAGrBllC,KAAKsvE,QAAQpqC,SACbllC,KAAKsvE,QAAU,KACftvE,KAAKsmB,YAAY4e,SACjBllC,KAAKsmB,YAAc,MAKvB,SAAS,GAAaprB,EAAIwuH,EAAWpjG,GACnC,MAAMw4G,EAAgBnV,GAAyBD,EAAU5oH,MACzD,OAAO,IAAI,GAAU5F,EAAI,CACvBorB,cACA4tC,GAAI,g4BACJC,GAAI,gOACJK,QAAS,CACPuqE,eAAgBD,GAElBphD,SAAU,CAAC,WAIf,SAASshD,GAAW9jI,GAClB,OAAO,IAAI,GAAUA,EAAI,CACvB2lC,KAAM,IAAImT,WAAW,GACrB99B,OAAQ,KACRpX,KAAM,KACNiqE,OAAQ,EACRC,SAAS,EACTb,WAAY,KACZr+C,MAAO,EACPE,OAAQ,IAIZ,SAAS,GAAe9uB,EAAIo0E,GAC1B,OAAO,IAAI,GAAYp0E,EAAI,CACzBihC,GAAI,iDACJrS,MAAO,EACPE,OAAQ,EACRulD,YAAa,CACX,CAAC,OAAQD,KCrKf,MAAM+vD,GAAmB,CACvBnW,cAAe,GACfC,OAAQ,IAEK,MAAM,GACnB,YAAYjuH,GAAI,GACdihC,EAAE,SACFyqD,IAEA5mF,KAAKm8B,GAAKA,EACVn8B,KAAK9E,GAAKA,EACV8E,KAAK4mF,SAAWA,EAChB5mF,KAAKs/H,YAAc,GACnBt/H,KAAKowG,aAAc,EACnBpwG,KAAKinH,aAAe,EACpBjnH,KAAK+7C,YAAc,GAAUA,YAAY7gD,GAG3C,WACE,IAAK,MAAMk8H,KAAiBp3H,KAAKs/H,YAC/Bt/H,KAAKu/H,kBAAkBnI,GAI3B,QAAO,WACL3I,EAAU,YACV6Q,EAAW,aACXrY,IAEAjnH,KAAKinH,aAAeA,GAAgB,EAEpC,IAAK,MAAMmQ,KAAiB3I,EAAY,CACtC,MAAM/E,EAAY+E,EAAW2I,GACvB1oC,EAAWg7B,EAAU8V,qBAAqBF,GAC3C5wC,GAEL1uF,KAAKy/H,iBAAiBrI,EAAe1N,EAAWh7B,GAGlD,IAAK,MAAM0oC,KAAiBp3H,KAAKs/H,YAAa,CAC5C,MAAM5V,EAAY+E,EAAW2I,GAExB1N,GAAcA,EAAU8V,qBAAqBF,IAChDt/H,KAAKu/H,kBAAkBnI,IAK7B,aAAaA,GACX,MAAM1nC,EAAa1vF,KAAKs/H,YAAYlI,GACpC,OAAO1nC,GAAcA,EAAWa,WAGlC,gBACE,MAAMmvC,EAAqB,GAE3B,IAAK,MAAMtI,KAAiBp3H,KAAKs/H,YAAa,CAC5C,MAAM5vC,EAAa1vF,KAAKs/H,YAAYlI,GAEhC1nC,EAAWa,aACbmvC,EAAmBtI,GAAiB1nC,EAAWuuC,uBAInD,OAAOyB,EAGT,MACE,IAAK1/H,KAAK+7C,aAAqC,IAAtB/7C,KAAKinH,aAC5B,OAAO,EAGT,IAAK,MAAMmQ,KAAiBp3H,KAAKs/H,YAAa,CAC5C,MAAMjU,EAAUrrH,KAAKs/H,YAAYlI,GAAetuG,SAE5CuiG,IACFrrH,KAAKowG,aAAc,GAIvB,MAAMA,EAAcpwG,KAAKowG,YAEzB,OADApwG,KAAKowG,aAAc,EACZA,EAGT,kBAAkBgnB,GAChBp3H,KAAKs/H,YAAYlI,GAAepnF,gBACzBhwC,KAAKs/H,YAAYlI,GAG1B,iBAAiBA,EAAe1N,EAAWh7B,GACzC,MAAMgB,EAAa1vF,KAAKs/H,YAAYlI,GACpC,IAAIuI,GAASjwC,GAAcA,EAAW5wF,OAAS4vF,EAAS5vF,KAExD,GAAI6gI,EAAO,CACT,IAAK3/H,KAAK+7C,YAER,YADA,EAAIjwB,KAAK,wDAAwDjkB,OAAOuvH,EAAe,iBAAvF,GAIE1nC,GACF1vF,KAAKu/H,kBAAkBnI,GAGzB,MAAMwI,EAAiBP,GAAiB3wC,EAAS5vF,MAE7C8gI,EACF5/H,KAAKs/H,YAAYlI,GAAiB,IAAIwI,EAAe,CACnDlW,YACA9iC,SAAU5mF,KAAK4mF,SACf1rF,GAAI8E,KAAK9E,MAGX,EAAId,MAAM,gCAAgCyN,OAAO6mF,EAAS5vF,KAAM,KAAhE,GACA6gI,GAAQ,IAIRA,GAASjW,EAAUtZ,iBACrBpwG,KAAKowG,aAAc,EACnBpwG,KAAKs/H,YAAYlI,GAAej+G,MAAMu1E,EAAU1uF,KAAKinH,gBCxH3D,MAAM4Y,GAAmB,8BACnBC,GAAqB,+BACrBC,GAAmB,6BACnBC,GAA+B,wBAC/BC,GAA2B,qBAC3BC,GAA6B,sBACpB,MAAM,GACnB,YAAYhlI,GAAI,GACdihC,EAAK,oBAAmB,MACxBsS,EAAK,SACLm4C,GACE,IACF5mF,KAAKm8B,GAAKA,EACVn8B,KAAK9E,GAAKA,EACV8E,KAAKyuH,WAAa,GAClBzuH,KAAKmgI,eAAiB,GACtBngI,KAAKslE,UAAY,GACjBtlE,KAAKowG,aAAc,EACnBpwG,KAAK0qC,SAAW,GAChB1qC,KAAKyuC,MAAQA,EACbzuC,KAAKogI,2BAA6B,IAAI,GAA2BllI,EAAI,CACnEihC,GAAI,GAAGt0B,OAAOs0B,EAAI,gBAClByqD,aAEF5sF,OAAO2wC,KAAK3qC,MAGd,WACE,IAAK,MAAMo3H,KAAiBp3H,KAAKyuH,WAC/BzuH,KAAKyuH,WAAW2I,GAAelyF,SAGjCllC,KAAKogI,2BAA2Bh5C,WAGlC,eAAez7C,EAAO,CACpB27C,kBAAkB,IAElB,MAAMC,EAASvnF,KAAKowG,YAEpB,OADApwG,KAAKowG,YAAcpwG,KAAKowG,cAAgBzkE,EAAK27C,iBACtCC,GAAUvnF,KAAKm8B,GAGxB,eAAeorD,GAAS,GAEtB,OADAvnF,KAAKowG,aAAc,EACZpwG,KAGT,IAAIyuH,EAAY4R,GACdrgI,KAAKsgI,KAAK7R,EAAY4R,GAGxB,aAAa5R,EAAY4R,GACvBrgI,KAAKsgI,KAAK7R,EAAY4R,EAAU,CAC9Bn7D,UAAW,IAIf,OAAOq7D,GACL,IAAK,IAAIz4H,EAAI,EAAGA,EAAIy4H,EAAmB//H,OAAQsH,IAAK,CAClD,MAAM3E,EAAOo9H,EAAmBz4H,QAEFpI,IAA1BM,KAAKyuH,WAAWtrH,KAClBnD,KAAKyuH,WAAWtrH,GAAM+hC,gBACfllC,KAAKyuH,WAAWtrH,KAK7B,WAAWq9H,EAAapV,GACtB,MAAMqV,EAAwBzgI,KAAK0gI,mBAAmBF,EAAapV,GAEnE,GAAMyU,GAAkB7/H,KAAMwgI,EAAaC,GAG7C,cAAcrV,GACZ,IAAK,MAAMgM,KAAiBp3H,KAAKyuH,WAC/BzuH,KAAKyuH,WAAW2I,GAAe7rC,eAAe6rC,EAAehM,GAG/D,GAAMyU,GAAkB7/H,KAAM,OAGhC,QAAO,KACL6gC,EAAI,aACJomF,EAAY,aACZa,EAAe,KAAI,YACnBwX,EAAW,MACX7qG,EAAQ,GAAE,QACVo1F,EAAU,GAAE,QACZ1+F,EAAU,IACR,IACF,IAAIkgG,GAAU,EACd,GAAMyU,GAAoB9/H,MAEtBA,KAAKyuC,OACPzuC,KAAKyuC,MAAMxtB,IAAI,qBAAqB2yF,YAGtC,IAAK,MAAMwjB,KAAiBp3H,KAAKyuH,WAAY,CAC3C,MAAM/E,EAAY1pH,KAAKyuH,WAAW2I,GAC5BuJ,EAAejX,EAAUh7B,SAAStpB,SACxCskD,EAAU5B,aAAeA,EAErBrzF,EAAM2iG,IACR,EAAI7hE,QAAQ,SAAS1tD,OAAOuvH,GAAgB,mBAAmBvvH,OAAOuvH,GAAtE,GAGE1N,EAAUkX,kBAAkB/W,EAAQuN,KAA6B1N,EAAUmX,eAAehX,EAAQ8W,GAAe9/F,EAAKinF,gBAA4B+B,EAAQ8W,IAAiBjX,EAAUoX,iBAAiBrsG,EAAMksG,KAA4BjX,EAAU3hC,gBACpPsjC,GAAU,EAEVrrH,KAAKy/H,iBAAiB,CACpB/V,YACAzC,eACApmF,OACApM,QACAtJ,aAIJnrB,KAAKowG,aAAesZ,EAAUtZ,cAG5Bib,GACF,GAAM0U,GAAkB//H,KAAMinH,GAG5BjnH,KAAKyuC,OACPzuC,KAAKyuC,MAAMxtB,IAAI,qBAAqByqB,UAGtC1rC,KAAKogI,2BAA2Bt3G,OAAO,CACrC2lG,WAAYzuH,KAAKyuH,WACjBxH,eACAqY,gBAIJ,mBACE,MAAM,2BACJc,GACEpgI,KACE+gI,EAAoBX,EAA2BxB,MAErD,OADA5+H,KAAKowG,YAAcpwG,KAAKowG,aAAe2wB,EAChCA,EAGT,gBACE,OAAO/gI,KAAKyuH,WAGd,qBAAqB9iF,EAAO,CAC1Bu/E,mBAAmB,IAEnB,MAAM,WACJuD,EAAU,2BACV2R,GACEpgI,KACEghI,EAAoB,IAAKZ,EAA2Ba,iBAG1D,IAAK,MAAM7J,KAAiB3I,EAAY,CACtC,MAAM/E,EAAY+E,EAAW2I,GAEzB1N,EAAUtZ,YAAYzkE,KAAUy0F,EAA2Bc,aAAa9J,KAC1E4J,EAAkB5J,GAAiB1N,GAIvC,OAAOsX,EAGT,oBAAoBvS,EAAY0S,EAAoB,IAC7C1S,IACHA,EAAazuH,KAAKihI,iBAGpB,MAAMpb,EAAmB,GAEzB,IAAK,MAAMuR,KAAiB3I,EACrB0S,EAAkB/J,IACrBp9H,OAAO4wB,OAAOi7F,EAAkB4I,EAAW2I,GAAetL,uBAI9D,OAAOjG,EAGT,eACE,OAAO7lH,KAAKmgI,eAGd,KAAK1R,EAAY4R,EAAU9pC,EAAa,IAClC8pC,GACF,EAAIv0G,KAAK,qEAAT,GAGF,IAAK,MAAMsrG,KAAiB3I,EAAY,CACtC,MAAM/E,EAAY+E,EAAW2I,GAC7Bp3H,KAAKyuH,WAAW2I,GAAiBp3H,KAAKohI,iBAAiBhK,EAAe1N,EAAWnzB,GAGnFv2F,KAAKqhI,iCAGP,iBAAiBl+H,EAAMumH,EAAWnzB,GAChC,MAAM9hE,EAAQ,IAAKi1F,EACjBvtF,GAAIh5B,EACJg7E,UAAWurC,EAAUvrC,WAAaurC,EAAUqM,WAAY,EACxD7P,SAAUwD,EAAUxD,WAAY,EAChCplH,MAAM4oH,EAAUqM,SAAY,EAAKrM,EAAU5oH,OAAQ,EACnD7D,MAAOysH,EAAUzsH,OAAS,KAC1BiY,QAASw0G,EAAUxkD,WAAaqxB,EAAWrxB,UAAY,EAAIwkD,EAAUx0G,SAAW,GAElF,OAAO,IAAI,GAAUlV,KAAK9E,GAAIu5B,GAGhC,iCACE,MAAM6sG,EAAW,GAEjB,IAAK,MAAMlK,KAAiBp3H,KAAKyuH,WAAY,CAC3C,MAAM/E,EAAY1pH,KAAKyuH,WAAW2I,GAClC1N,EAAU6X,oBAAoBrlI,QAAQskI,IAC/Bc,EAASd,KACZc,EAASd,GAAe,IAG1Bc,EAASd,GAAav9H,KAAKm0H,KAI/Bp3H,KAAKmgI,eAAiBmB,EAGxB,mBAAmBd,EAAapV,GAC9B,MAAM,WACJqD,EAAU,eACV0R,GACEngI,KACEygI,EAAwBN,EAAeK,GAY7C,OAVIC,GACFA,EAAsBvkI,QAAQiH,IAC5B,MAAMumH,EAAY+E,EAAWtrH,GAEzBumH,GACFA,EAAUn+B,eAAem+B,EAAUvtF,GAAIivF,KAKtCqV,EAGT,iBAAiB90F,GACf,MAAM,UACJ+9E,EAAS,aACTzC,GACEt7E,EAGJ,GAFA,GAAMq0F,GAA8BtW,GAEhCA,EAAUxD,SAEZ,YADAwD,EAAUoX,iBAAiBpX,EAAUzsH,OAInCysH,EAAU7iE,SAASogE,IACrB,GAAMgZ,GAA0BvW,EAAWzC,GAG7C,MAAMoE,EAAU3B,EAAU8X,aAAa71F,GAEnC0/E,IACFrrH,KAAKowG,aAAc,EACnB,GAAM8vB,GAA4BxW,EAAWzC,KCpRpC,MAAM,WAAmCz4B,GACtD,YACE,OAAOxuF,KAAKyhI,OAGd,YACE,MAAM,KACJ1iG,EACA2vD,UAAU,UACRgzC,EAAS,QACTC,EAAO,SACP/8F,EAAQ,OACRqsD,IAEAjxF,KACEiL,EAAIgmF,EAAOlyD,EAAO6F,GACxB5kC,KAAKyhI,OAAS,gBAAKC,EAAWC,EAAS12H,ICjB3C,MAAM,GAAU,KAEhB,SAAS22H,GAAoBC,EAAMC,EAAK31G,EAAMk9F,EAASD,GACrD,MAAMr1F,EAAW+tG,EAAMD,EACjBx1F,EAAQlgB,EAAO21G,EACf3Y,EAAS98E,EAAQ+8E,EACjB2Y,GAAUhuG,EAAWs1F,EAC3B,OAAOF,EAAS4Y,EAAShuG,EAAW+tG,EAGtC,SAASE,GAAaH,EAAMC,EAAK31G,EAAMk9F,EAASD,GAC9C,GAAI/oH,MAAM6P,QAAQic,GAAO,CACvB,MAAM81G,EAAO,GAEb,IAAK,IAAIn6H,EAAI,EAAGA,EAAIqkB,EAAK3rB,OAAQsH,IAC/Bm6H,EAAKn6H,GAAK85H,GAAoBC,EAAK/5H,GAAIg6H,EAAIh6H,GAAIqkB,EAAKrkB,GAAIuhH,EAASD,GAGnE,OAAO6Y,EAGT,OAAOL,GAAoBC,EAAMC,EAAK31G,EAAMk9F,EAASD,GAGvD,SAAS,GAAShC,EAAQC,GACxB,GAAIhnH,MAAM6P,QAAQk3G,GAAS,CACzB,IAAI8a,EAAiB,EAErB,IAAK,IAAIp6H,EAAI,EAAGA,EAAIs/G,EAAO5mH,OAAQsH,IAAK,CACtC,MAAMs+C,EAAIghE,EAAOt/G,GAAKu/G,EAAOv/G,GAC7Bo6H,GAAkB97E,EAAIA,EAGxB,OAAO/jD,KAAK2E,KAAKk7H,GAGnB,OAAO7/H,KAAKqM,IAAI04G,EAASC,GAGZ,MAAM,WAA4B74B,GAC/C,YACE,OAAOxuF,KAAKmiI,WAGd,YACE,MAAM,UACJT,EAAS,QACTC,EAAO,QACPtY,EAAO,UACPD,GACEppH,KAAK0uF,UACH,WACJ0zC,EAAaV,EAAS,WACtBS,EAAaT,GACX1hI,KACJ,IAAIqiI,EAAYL,GAAaI,EAAYD,EAAYR,EAAStY,EAASD,GACvE,MAAM/8E,EAAQ,GAASg2F,EAAWV,GAC5B5tG,EAAW,GAASsuG,EAAWF,GAEjC91F,EAAQ,IAAWtY,EAAW,KAChCsuG,EAAYV,EACZ3hI,KAAKoZ,OAGPpZ,KAAKoiI,WAAaD,EAClBniI,KAAKmiI,WAAaE,GC9DtB,MAAM,GAAmB,CACvBnZ,cAAe,GACfC,OAAQ,IAEK,MAAM,GACnB,YAAYviC,GACV5mF,KAAKs/H,YAAc,IAAI/6F,IACvBvkC,KAAK4mF,SAAWA,EAGlB,aACE,OAAO5mF,KAAKs/H,YAAYx+H,KAAO,EAGjC,IAAI3E,EAAKulI,EAAWC,EAASjzC,GAC3B,MAAM,YACJ4wC,GACEt/H,KAEJ,GAAIs/H,EAAY57F,IAAIvnC,GAAM,CACxB,MAAMuzF,EAAa4vC,EAAYr+G,IAAI9kB,IAC7B,MACJc,EAAQyyF,EAAWhB,SAASgzC,WAC1BhyC,EACJgyC,EAAYzkI,EACZ+C,KAAKwhC,OAAOrlC,GAKd,GAFAuyF,EAAW46B,GAA4B56B,IAElCA,EACH,OAGF,MAAMkxC,EAAiB,GAAiBlxC,EAAS5vF,MAEjD,IAAK8gI,EAEH,YADA,EAAIxlI,MAAM,gCAAgCyN,OAAO6mF,EAAS5vF,KAAM,KAAhE,GAIF,MAAM4wF,EAAa,IAAIkwC,EAAe5/H,KAAK4mF,UAC3C8I,EAAWv2E,MAAM,IAAKu1E,EACpBgzC,YACAC,YAEFrC,EAAYx/G,IAAI3jB,EAAKuzF,GAGvB,OAAOvzF,GACL,MAAM,YACJmjI,GACEt/H,KAEAs/H,EAAY57F,IAAIvnC,KAClBmjI,EAAYr+G,IAAI9kB,GAAK6zC,SACrBsvF,EAAYp6F,OAAO/oC,IAIvB,SACE,MAAMszF,EAAoB,GAE1B,IAAK,MAAOtzF,EAAKuzF,KAAe1vF,KAAKs/H,YACnC5vC,EAAW5mE,SACX2mE,EAAkBtzF,GAAOuzF,EAAWzyF,MAE/ByyF,EAAWa,YACdvwF,KAAKwhC,OAAOrlC,GAIhB,OAAOszF,EAGT,QACE,IAAK,MAAMtzF,KAAO6D,KAAKs/H,YAAYrjI,OACjC+D,KAAKwhC,OAAOrlC,IChFlB,MAAM,UACJkqC,IACED,EACG,SAASwiD,GAAcn0D,GAC5B,MAAMo/B,EAAY,GAAap/B,GAE/B,IAAK,MAAMq/B,KAAYD,EAAW,CAChC,MAAMH,EAAWG,EAAUC,IACrB,SACJ2B,GACE/B,EAEJ,GAAI+B,IAAaA,EAAShhC,EAAMq/B,GAAWJ,GACzC,MAAM,IAAI3hD,MAAM,gBAAgBlK,OAAOisD,EAAU,MAAMjsD,OAAO4sB,EAAMq/B,MAInE,SAASwuE,GAAU7tG,EAAO2mE,GAC/B,MAAMmnC,EAAqBC,GAAa,CACtC19D,SAAUrwC,EACV2mE,WACAvnC,UAAW,GAAap/B,GACxBguG,YAAa,CACX5hG,KAAM,KACNs/F,eAAgB,KAChBvkI,WAAY,KACZ0jI,YAAa,QAGXoD,EAAoBC,GAAcluG,EAAO2mE,GAC/C,IAAIwnC,GAA8B,EAMlC,OAJKF,IACHE,EAA8BC,GAAmBpuG,EAAO2mE,IAGnD,CACL0nC,YAAaJ,EACbK,aAAcR,EACdS,sBAAuBJ,EACvBK,kBAAmBC,GAAezuG,EAAO2mE,GACzC+nC,mBAAoBC,GAAgB3uG,EAAO2mE,IAI/C,SAASgoC,GAAgB3uG,EAAO2mE,GAC9B,IAAK3mE,EAAM6qG,YACT,OAAO,KAGT,MAAMr3H,EAAS,GACT4rD,EAAY,GAAap/B,GAE/B,IAAK,MAAMt4B,KAAOs4B,EAAM6qG,YAAa,CACnC,MAAM5rE,EAAWG,EAAU13D,GACrB2C,EAAO40D,GAAYA,EAAS50D,KAC5BukI,EAA4B,WAATvkI,GAA8B,UAATA,GAA6B,UAATA,EAE9DukI,GAAoBC,GAAkB7uG,EAAMt4B,GAAMi/F,EAASj/F,GAAMu3D,KACnEzrD,EAAO9L,IAAO,GAIlB,OAAO8L,EAGF,SAASu6H,IAAa,SAC3B19D,EAAQ,SACRs2B,EAAQ,YACRqnC,EAAc,GAAE,UAChB5uE,EAAY,GAAE,YACd2sE,EAAc,SACZ,IACF,GAAIplC,IAAat2B,EACf,OAAO,KAGT,GAAwB,kBAAbA,GAAsC,OAAbA,EAClC,MAAO,GAAGj9D,OAAO24H,EAAa,sBAGhC,GAAwB,kBAAbplC,GAAsC,OAAbA,EAClC,MAAO,GAAGvzF,OAAO24H,EAAa,sBAGhC,IAAK,MAAMrkI,KAAOnC,OAAOiC,KAAK6oE,GAC5B,KAAM3oE,KAAOsmI,GAAc,CACzB,KAAMtmI,KAAOi/F,GACX,MAAO,GAAGvzF,OAAO24H,EAAa,KAAK34H,OAAO1L,EAAK,UAGjD,MAAMw7B,EAAU2rG,GAAkBx+D,EAAS3oE,GAAMi/F,EAASj/F,GAAM03D,EAAU13D,IAE1E,GAAIw7B,EACF,MAAO,GAAG9vB,OAAO24H,EAAa,KAAK34H,OAAO1L,EAAK,KAAK0L,OAAO8vB,GAKjE,IAAK,MAAMx7B,KAAOnC,OAAOiC,KAAKm/F,GAC5B,KAAMj/F,KAAOsmI,GAAc,CACzB,KAAMtmI,KAAO2oE,GACX,MAAO,GAAGj9D,OAAO24H,EAAa,KAAK34H,OAAO1L,EAAK,YAGjD,IAAKnC,OAAOwxB,eAAehxB,KAAKsqE,EAAU3oE,GAAM,CAC9C,MAAMw7B,EAAU2rG,GAAkBx+D,EAAS3oE,GAAMi/F,EAASj/F,GAAM03D,EAAU13D,IAE1E,GAAIw7B,EACF,MAAO,GAAG9vB,OAAO24H,EAAa,KAAK34H,OAAO1L,EAAK,KAAK0L,OAAO8vB,IAMnE,OAAO,KAGT,SAAS2rG,GAAkBC,EAASC,EAAS9vE,GAC3C,IAAI+vE,EAAQ/vE,GAAYA,EAAS+vE,MAEjC,OAAIA,IAAUA,EAAMF,EAASC,EAAS9vE,GAC7B,iBAGJ+vE,IACHA,EAAQF,GAAWC,GAAWD,EAAQlpH,QAElCopH,GAAUA,EAAMjpI,KAAK+oI,EAASC,IAK/BC,GAASD,IAAYD,EAInB,KAHE,oBALE,iBAWb,SAASZ,GAAcluG,EAAO2mE,GAC5B,GAAiB,OAAbA,EACF,MAAO,iCAGT,IAAI0nC,EAAc,KAClB,MAAM,eACJY,EAAc,UACdC,GACElvG,EAcJ,OAZIivG,EACGA,EAAejvG,EAAMoM,KAAMu6D,EAASv6D,QACvCiiG,EAAc,qCAEPruG,EAAMoM,OAASu6D,EAASv6D,OACjCiiG,EAAc,qCAGZA,GAAea,IACjBb,EAAca,EAAUlvG,EAAMoM,KAAMu6D,EAASv6D,OAASiiG,GAGjDA,EAGT,SAASD,GAAmBpuG,EAAO2mE,GACjC,GAAiB,OAAbA,EACF,MAAO,iCAGT,GAAI,QAAS3mE,EAAM0rG,eAAgB,CACjC,MAAMyD,EAAaC,GAAkBpvG,EAAO2mE,EAAU,OAEtD,GAAIwoC,EACF,MAAO,CACLnsG,KAAK,GAKX,MAAMqsG,EAAiB,GACvB,IAAIp8C,GAAS,EAEb,IAAK,MAAM84C,KAAe/rG,EAAM0rG,eAC9B,GAAoB,QAAhBK,EAAuB,CACzB,MAAMoD,EAAaC,GAAkBpvG,EAAO2mE,EAAUolC,GAElDoD,IACFE,EAAetD,IAAe,EAC9B94C,EAASo8C,GAKf,OAAOp8C,EAGT,SAASw7C,GAAezuG,EAAO2mE,GAC7B,GAAiB,OAAbA,EACF,MAAO,iCAGT,MAAM2oC,EAAgB3oC,EAASx/F,YACzB,WACJA,GACE64B,EAEJ,GAAI74B,IAAemoI,EACjB,OAAO,EAGT,GAAInoI,EAAW4E,SAAWujI,EAAcvjI,OACtC,OAAO,EAGT,IAAK,IAAIsH,EAAI,EAAGA,EAAIlM,EAAW4E,OAAQsH,IACrC,IAAKlM,EAAWkM,GAAGuS,OAAO0pH,EAAcj8H,IACtC,OAAO,EAIX,OAAO,EAGT,SAAS+7H,GAAkBpvG,EAAO2mE,EAAUolC,GAC1C,IAAIwD,EAAcvvG,EAAM0rG,eAAeK,GACvCwD,OAA8BtkI,IAAhBskI,GAA6C,OAAhBA,EAAuB,GAAKA,EACvE,IAAIC,EAAc7oC,EAAS+kC,eAAeK,GAC1CyD,OAA8BvkI,IAAhBukI,GAA6C,OAAhBA,EAAuB,GAAKA,EACvE,MAAML,EAAapB,GAAa,CAC9BpnC,SAAU6oC,EACVn/D,SAAUk/D,EACVxD,gBAEF,OAAOoD,EAGT,SAAS,GAAanvG,GACpB,MAAMk/C,EAAQl/C,EAAM4R,IACd+9E,EAAYzwC,GAASA,EAAMx4D,YACjC,OAAOipG,EAAYA,EAAU8f,WAAa,GClP5C,MAAMC,GAAiB,kCACjBC,GAAoB,oCACnB,SAAS,GAAMhjB,GACpB,IAAK,GAASA,GACZ,MAAM,IAAIrvG,MAAMoyH,IAGlB,GAA+B,oBAApB/iB,EAAU7jF,MACnB,OAAO6jF,EAAU7jF,QAGnB,GAAI/iB,OAAOC,SAAS2mG,EAAUtgH,MAC5B,OAAOsgH,EAAUtgH,KAGnB,GAAI0Z,OAAOC,SAAS2mG,EAAU5gH,QAC5B,OAAO4gH,EAAU5gH,OAGnB,GAAI6jI,GAAcjjB,GAChB,OAAOpnH,OAAOiC,KAAKmlH,GAAW5gH,OAGhC,MAAM,IAAIuR,MAAMqyH,IAGlB,SAASC,GAAcpnI,GACrB,OAAiB,OAAVA,GAAmC,kBAAVA,GAAsBA,EAAMke,cAAgBnhB,OAG9E,SAAS,GAASiD,GAChB,OAAiB,OAAVA,GAAmC,kBAAVA,EC/B3B,SAASqnI,GAAa9oI,EAAQwwB,GACnC,IAAKA,EACH,OAAOxwB,EAGT,MAAMyM,EAAS,IAAKzM,KACfwwB,GASL,GANI,YAAaA,IACf/jB,EAAOusD,QAAU,IAAKh5D,EAAOg5D,WACxBxoC,EAAOwoC,UAIV,YAAaxoC,IACf/jB,EAAO8tD,SAAWv6D,EAAOu6D,SAAW,IAAIluD,OAAOmkB,EAAO+pC,SAElD/pC,EAAO+pC,QAAQhU,KAAKznD,GAA0B,cAAhBA,EAAO6I,OAAuB,CAC9D,MAAMhB,EAAQ8F,EAAO8tD,QAAQpQ,UAAUrrD,GAA0B,cAAhBA,EAAO6I,MAEpDhB,GAAS,GACX8F,EAAO8tD,QAAQnyD,OAAOzB,EAAO,GAKnC,GAAI,WAAY6pB,EACd,GAAKxwB,EAAOi5D,OAEL,CACL,MAAM8vE,EAAkB,IAAK/oI,EAAOi5D,QAGpC,IAAK,MAAMt4D,KAAO6vB,EAAOyoC,OACvB8vE,EAAgBpoI,IAAQooI,EAAgBpoI,IAAQ,IAAM6vB,EAAOyoC,OAAOt4D,GAGtE8L,EAAOwsD,OAAS8vE,OAThBt8H,EAAOwsD,OAASzoC,EAAOyoC,OAa3B,OAAOxsD,EC9BF,SAAS,KACd,IAAI3D,EAAM,IAAI,GAAoB,GAQlC,OANI,IAAuBC,eACzBD,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,GAGJA,EAmGF,SAAS,GAASA,EAAKG,EAAGC,GAI/B,OAHAJ,EAAI,GAAKG,EAAE,GAAKC,EAAE,GAClBJ,EAAI,GAAKG,EAAE,GAAKC,EAAE,GAClBJ,EAAI,GAAKG,EAAE,GAAKC,EAAE,GACXJ,EAqkBF,IAAI,GAAM,IAkDI,WACnB,IAAIgD,EAAM,MADS,GC5uBrB,SAASk9H,GAAuBr5E,EAAS9kC,EAAUw9D,GAAa,GAC9D,MAAMr9E,EAAI6f,EAAS0oC,gBAAgB5D,GAEnC,GAAI04B,GAAcx9D,aAAoB,GAAqB,CACzD,MAAO6jC,EAAWH,EAAUzkD,EAAI,GAAK6lD,EAC/BuD,EAAiBroC,EAAS4jC,kBAAkB,CAACC,EAAWH,IAC9DvjD,EAAE,GAAKlB,EAAIopD,EAAelE,cAAc,GAG1C,OAAOhkD,EAGT,SAASi+H,GAAoB94F,GAC3B,MAAM+4F,EAAmB,IAAK/4F,GAE9B,IAAI,iBACF+3C,GACE/3C,EACJ,MAAM,SACJtlB,EAAQ,iBACRisC,EAAgB,qBAChBqyE,EAAoB,qBACpBC,GACEj5F,EAeJ,OAbI+3C,IAAqBpzB,GAAkBC,UACzCmzB,EAAmBr9D,EAAS+rC,aAAe9B,GAAkBE,OAASF,GAAkBK,gBAG7DjxD,IAAzBilI,IACFD,EAAiBC,qBAAuBjhD,QAGbhkF,IAAzBklI,IACFF,EAAiBE,qBAAuBtyE,GAG1CoyE,EAAiBhhD,iBAAmBA,EAC7BghD,EAGF,SAASG,GAAiBl2E,GAAU,SACzCtoC,EAAQ,YACRysC,EAAW,iBACX4wB,EAAgB,iBAChBpxB,EAAgB,WAChBuxB,IAEA,IAAKz+E,EAAGC,EAAGC,EAAI,GAAKqpD,EAMpB,OAJImE,KACD1tD,EAAGC,EAAGC,GAAK,GAAmB,GAAI,CAACF,EAAGC,EAAGC,EAAG,GAAMwtD,IAG7C4wB,GACN,KAAKpzB,GAAkBE,OACrB,OAAOg0E,GAAuB,CAACp/H,EAAGC,EAAGC,GAAI+gB,EAAUw9D,GAErD,KAAKvzB,GAAkBI,eACrB,OAAO8zE,GAAuB,CAACp/H,EAAIktD,EAAiB,GAAIjtD,EAAIitD,EAAiB,GAAIhtD,GAAKgtD,EAAiB,IAAM,IAAKjsC,EAAUw9D,GAE9H,KAAKvzB,GAAkBG,cACrB,OAAO+zE,GAAuBt5E,GAAkBoH,EAAkB,CAACltD,EAAGC,EAAGC,IAAK+gB,EAAUw9D,GAE1F,KAAKvzB,GAAkBK,UACvB,QACE,OAAOtqC,EAAS+rC,aAAe,CAAChtD,EAAIktD,EAAiB,GAAIjtD,EAAIitD,EAAiB,GAAIhtD,EAAIgtD,EAAiB,IAAMjsC,EAAS0oC,gBAAgB,CAAC3pD,EAAGC,EAAGC,KAG5I,SAASypD,GAAgBJ,EAAU0b,GACxC,MAAM,SACJhkD,EAAQ,iBACRq9D,EAAgB,iBAChBpxB,EAAgB,YAChBQ,EAAW,qBACX6xE,EAAoB,qBACpBC,GACEH,GAAoBp6D,IAClB,iBACJsZ,EAAgB,uBAChBC,EAAsB,WACtBC,GACEJ,GAAgBp9D,EAAUq9D,EAAkBpxB,GAC1CnD,EAAgB01E,GAAiBl2E,EAAU,CAC/CtoC,WACAysC,cACA4wB,iBAAkBihD,EAClBryE,iBAAkBsyE,EAClB/gD,eAGF,GAAIA,EAAY,CACd,MAAMihD,EAAsBz+G,EAAS0oC,gBAAgB40B,GAAoBC,GACzE,GAASz0B,EAAeA,EAAe21E,GAGzC,OAAO31E,ECtGT,MAAM41E,GAA6B,CACjC,CAAC,OAAQ,KACT,CAAC,OAAQ,KACT,CAAC,OAAQ,MACT,CAAC,OAAQ,OAELC,GAAmB,GAClB,SAASt5D,GAAciI,EAAO5rC,GACnC,MAAM7sC,EAAKy4E,EAAMxoD,SAAWwoD,EAAMxoD,QAAQjwB,GAE1C,IAAKA,IAAO6sC,EACV,OAAO,KAGT,GAAIA,aAAiB,GACnB,OAAOA,EACEA,EAAM5sB,aAA0C,WAA3B4sB,EAAM5sB,YAAYhY,OAChD4kC,EAAQ,CACNlH,KAAMkH,IAIV,IAAIk9F,EAA2B,KAE3Bl9F,EAAMyhC,aACRy7D,EAA2B,CACzB,CAAC,OAAQl9F,EAAMlH,KAAKrgC,OAAS,EAAI,KAAO,OAI5C,MAAM8uE,EAAU,IAAI,GAAUp0E,EAAI,IAAK6sC,EACrCxrB,WAAY,IAAKwoH,MACZE,KACAtxD,EAAMl/C,MAAMywG,qBAInB,OADAF,GAAiB11D,EAAQnzC,KAAM,EACxBmzC,EAEF,SAAS61D,GAAe71D,GACxBA,GAAaA,aAAmB,IAIjC01D,GAAiB11D,EAAQnzC,MAC3BmzC,EAAQpqC,gBACD8/F,GAAiB11D,EAAQnzC,KC9CpC,MAAM,GAAmB,CACvBipG,QAAS,CACP,SAASnoI,EAAOy2D,GACd,OAAO,GAGT,MAAM0zD,EAAQC,EAAQ3zD,GACpB,OAAO10D,QAAQooH,KAAYpoH,QAAQqoH,KAIvC5zD,OAAQ,CACN,SAASx2D,EAAOy2D,GACd,OAAOl5C,OAAOC,SAASxd,OAAa,QAASy2D,IAAaz2D,GAASy2D,EAASpxD,SAAW,QAASoxD,IAAaz2D,GAASy2D,EAASrsD,OAInIgiC,MAAO,CACL,SAASpsC,EAAOy2D,GACd,OAAOA,EAAS2xE,WAAapoI,GAASiT,GAAQjT,KAA4B,IAAjBA,EAAMuD,QAAiC,IAAjBvD,EAAMuD,SAGvF,MAAM4mH,EAAQC,EAAQ3zD,GACpB,OAAO4xE,GAAWle,EAAQC,KAI9BjiD,SAAU,CACR,SAASnoE,EAAOy2D,GACd,MAAM6xE,EAAY,GAAUtoI,GAC5B,MAAqB,aAAdsoI,GAA4BA,IAAc,GAAU7xE,EAASz2D,QAGtE,MAAMmqH,EAAQC,EAAQ3zD,GACpB,MAAsB,oBAAX2zD,GAIJie,GAAWle,EAAQC,KAI9Br3G,MAAO,CACL,SAAS/S,EAAOy2D,GACd,OAAOA,EAAS2xE,WAAapoI,GAASiT,GAAQjT,IAGhD,MAAMmqH,EAAQC,EAAQ3zD,GACpB,OAAOA,EAASg+B,QAAU4zC,GAAWle,EAAQC,GAAUD,IAAWC,IAItEme,SAAU,CACR,SAASvoI,EAAOy2D,GACd,OAAOA,EAAS2xE,WAAapoI,GAA0B,oBAAVA,GAG/C,MAAMmqH,EAAQC,EAAQ3zD,GACpB,OAAQA,EAASg+B,SAAW01B,IAAWC,IAI3CxmF,KAAM,CACJ2jD,UAAW,CAACvnF,EAAOy2D,EAAU+xE,KAC3B,MAAM,cACJC,GACED,EAAYA,EAAUhxG,MAAQ,GAClC,OAAOixG,GAAiBzoI,EAAQyoI,EAAczoI,GAASA,IAG3D8qC,MAAO,CACLy8C,UAAW,CAACvnF,EAAOy2D,EAAU+xE,IACpB/5D,GAAc+5D,EAAWxoI,GAElCmpH,QAASnpH,IACPkoI,GAAeloI,MAKrB,SAASqoI,GAAW9nF,EAAQC,GAC1B,GAAID,IAAWC,EACb,OAAO,EAGT,IAAKvtC,GAAQstC,KAAYttC,GAAQutC,GAC/B,OAAO,EAGT,MAAMnyC,EAAMkyC,EAAOh9C,OAEnB,GAAI8K,IAAQmyC,EAAOj9C,OACjB,OAAO,EAGT,IAAK,IAAIsH,EAAI,EAAGA,EAAIwD,EAAKxD,IACvB,GAAI01C,EAAO11C,KAAO21C,EAAO31C,GACvB,OAAO,EAIX,OAAO,EAGF,SAAS,GAAe8rD,GAC7B,MAAMC,EAAY,GACZwwD,EAAe,GACf1/C,EAAkB,GAExB,IAAK,MAAO7Q,EAAUC,KAAY/5D,OAAO0wE,QAAQ9W,GAC/C,GAAIG,GAAWA,EAAQ4xE,cACrBhhE,EAAgB7Q,GAAYzzD,MAAM6P,QAAQ6jD,EAAQ4xE,eAAiB5xE,EAAQ4xE,cAAgB,CAAC5xE,EAAQ4xE,mBAC/F,CACL,MAAMjyE,EAAW,GAAcI,EAAUC,GACzCF,EAAUC,GAAYJ,EACtB2wD,EAAavwD,GAAYJ,EAASz2D,MAItC,MAAO,CACL42D,YACAwwD,eACA1/C,mBAIJ,SAAS,GAAcxhE,EAAM4wD,GAC3B,OAAQ,GAAUA,IAChB,IAAK,SACH,OAAO6xE,GAAwBziI,EAAM4wD,GAEvC,IAAK,QACH,OAAO6xE,GAAwBziI,EAAM,CACnCrE,KAAM,QACN7B,MAAO82D,EACP29B,SAAS,IAGb,IAAK,UACH,OAAOk0C,GAAwBziI,EAAM,CACnCrE,KAAM,UACN7B,MAAO82D,IAGX,IAAK,SACH,OAAO6xE,GAAwBziI,EAAM,CACnCrE,KAAM,SACN7B,MAAO82D,IAGX,IAAK,WACH,OAAO6xE,GAAwBziI,EAAM,CACnCrE,KAAM,WACN7B,MAAO82D,EACP29B,SAAS,IAGb,QACE,MAAO,CACLvuF,OACArE,KAAM,UACN7B,MAAO82D,IAKf,SAAS6xE,GAAwBziI,EAAM4wD,GACrC,MAAM,SAAUA,EAgBT,CACL5wD,UACG,GAAiB4wD,EAAQj1D,SACzBi1D,GAlBG,UAAWA,EAQV,CACL5wD,OACArE,KAAM,GAAUi1D,EAAQ92D,UACrB82D,GAVI,CACL5wD,OACArE,KAAM,SACN7B,MAAO82D,GAkBf,SAAS7jD,GAAQjT,GACf,OAAOoD,MAAM6P,QAAQjT,IAAU0c,YAAYC,OAAO3c,GAGpD,SAAS,GAAUA,GACjB,OAAIiT,GAAQjT,GACH,QAGK,OAAVA,EACK,cAGKA,ECxMhB,MACEopC,UAAS,kBACTE,GAAc,eACdC,GAAc,eACdF,IACEF,EACG,SAASy/F,KACd,MAAMJ,EAAYzlI,KACZ8lI,EAAiBC,GAAkBN,EAAUtqH,aAC7C6qH,EAAgBhsI,OAAOqK,OAAOyhI,GACpCE,EAAc,IAAaP,EAC3BO,EAAcz/F,IAAkB,GAChCy/F,EAAcx/F,IAAkB,GAEhC,IAAK,IAAI1+B,EAAI,EAAGA,EAAI5F,UAAU1B,SAAUsH,EAAG,CACzC,MAAM2sB,EAAQvyB,UAAU4F,GAExB,IAAK,MAAM3L,KAAOs4B,EAChBuxG,EAAc7pI,GAAOs4B,EAAMt4B,GAK/B,OADAnC,OAAO4U,OAAOo3H,GACPA,EAGT,SAASD,GAAkBE,GACzB,MAAM5hB,EAAe6hB,GAAeD,EAAgB,uBAEpD,OAAK5hB,IACH8hB,GAA6BF,GACtBA,EAAeG,qBAM1B,SAASD,GAA6BF,GACpC,MAAM14G,EAAS04G,EAAe7kI,UAE9B,IAAKmsB,EACH,OAGF,MAAM84G,EAAcrsI,OAAO2vC,eAAes8F,GACpCK,EAAqBP,GAAkBM,GACvCE,EAAwBL,GAAeD,EAAgB,iBAAmB,GAC1EO,EAAoB,GAAeD,GACnCliB,EAAeoiB,GAAqBD,EAAkBniB,aAAciiB,EAAoBL,GACxFpyE,EAAY,IAAKwyE,EAAYnC,cAC9BsC,EAAkB3yE,WAEvB6yE,GAA6BriB,EAAcxwD,GAC3C,MAAM8Q,EAAkB,IAAK0hE,EAAYM,oBACpCH,EAAkB7hE,iBAEvBiiE,GAAkCviB,EAAc1/C,GAChDshE,EAAeG,oBAAsB/hB,EACrC4hB,EAAe/B,WAAarwE,EAC5BoyE,EAAeU,iBAAmBhiE,EAGpC,SAAS8hE,GAAqBhyG,EAAOoyG,EAAaZ,GAChD,MAAM5hB,EAAerqH,OAAOqK,OAAO,MACnCrK,OAAO4wB,OAAOy5F,EAAcwiB,EAAapyG,GACzC,MAAM0H,EAAK2qG,GAAiBb,GAQ5B,cAPOxxG,EAAM0H,GACbniC,OAAOipB,iBAAiBohG,EAAc,CACpCloF,GAAI,CACF+H,UAAU,EACVjnC,MAAOk/B,KAGJkoF,EAGT,SAASuiB,GAAkCviB,EAAc1/C,GACvD,IAAK,MAAM7Q,KAAY6Q,EACrB3qE,OAAOgD,eAAeqnH,EAAcvwD,EAAU,CAC5CnyC,YAAY,EAEZ,IAAIolH,GACF,MAAMC,EAAU,GAAGn/H,OAAO7H,KAAKm8B,GAAI,MAAMt0B,OAAOisD,GAEhD,IAAK,MAAMmzE,KAAetiE,EAAgB7Q,GACnC,GAAe9zD,KAAMinI,KACxBjnI,KAAKinI,GAAeF,GAIxB,EAAIn2E,WAAWo2E,EAASriE,EAAgB7Q,GAAUzyD,KAAK,KAAvD,MAOR,SAASqlI,GAA6BriB,EAAcxwD,GAClD,MAAMqzE,EAAgB,GAChBC,EAAc,GAEpB,IAAK,MAAMrzE,KAAYD,EAAW,CAChC,MAAMH,EAAWG,EAAUC,IACrB,KACJ3wD,EAAI,MACJlG,GACEy2D,EAEAA,EAASnhB,QACX20F,EAAc/jI,GAAQlG,EACtBkqI,EAAYhkI,GAAQikI,GAA0BjkI,EAAMlG,IAIxDonH,EAAa/9E,IAAkB4gG,EAC/B7iB,EAAa99E,IAAkB,GAC/BvsC,OAAOipB,iBAAiBohG,EAAc8iB,GAGxC,SAASC,GAA0BjkI,GACjC,MAAO,CACLwe,YAAY,EAEZ,IAAIolH,GACsB,kBAAbA,GAAyBA,aAAoBvzF,SAAW,GAAgBuzF,GACjF/mI,KAAKumC,IAAgBpjC,GAAQ4jI,EAE7B/mI,KAAKwmC,IAAgBrjC,GAAQ4jI,GAIjC,MACE,GAAI/mI,KAAKwmC,IAAiB,CACxB,GAAIrjC,KAAQnD,KAAKwmC,IAAiB,CAChC,MAAMvpC,EAAQ+C,KAAKwmC,IAAgBrjC,GACnC,OAAOlG,GAAS+C,KAAKsmC,IAAgBnjC,GAGvC,GAAIA,KAAQnD,KAAKumC,IAAiB,CAChC,MAAMnqB,EAAQpc,KAAK,KAAcA,KAAK,IAAWqnI,cAEjD,GAAIjrH,GAASA,EAAMkrH,aAAankI,GAC9B,OAAOiZ,EAAMmrH,aAAapkI,IAASnD,KAAKsmC,IAAgBnjC,IAK9D,OAAOnD,KAAKsmC,IAAgBnjC,KAMlC,SAAS,GAAe0/B,EAAQxU,GAC9B,OAAOr0B,OAAOoH,UAAUoqB,eAAehxB,KAAKqoC,EAAQxU,GAGtD,SAAS63G,GAAerjG,EAAQxU,GAC9B,OAAO,GAAewU,EAAQxU,IAASwU,EAAOxU,GAGhD,SAASy4G,GAAiBb,GACxB,MAAMuB,EAAgBtB,GAAeD,EAAgB,cAAgBC,GAAeD,EAAgB,iBAMpG,OAJKuB,GACH,EAAIr9F,KAAK,EAAG,GAAGtiC,OAAOo+H,EAAe9iI,KAAM,gCAA3C,GAGKqkI,GAAiBvB,EAAe9iI,KC1KzC,MACEojC,eAAc,GACdC,eAAc,GACdF,eAAc,IACZF,EACEqhG,GAAcztI,OAAO4U,OAAO,IACnB,MAAM,GACnB,YAAY62H,EAAY,MACtBzlI,KAAKylI,UAAYA,EACjBzlI,KAAK0nI,WAAa,GAElB1nI,KAAK2nI,mBAAqB,OAE1B3nI,KAAKo7F,SAAWqsC,GAChBznI,KAAK4nI,cAAgB,KAGvB,WACE,IAAK,MAAM9zE,KAAY9zD,KAAK0nI,WAAY,CACtC,MAAMG,EAAY7nI,KAAK0nI,WAAW5zE,GAE9B+zE,EAAU/oI,MAAQ+oI,EAAU/oI,KAAKsnH,SACnCyhB,EAAU/oI,KAAKsnH,QAAQyhB,EAAUC,cAAeD,EAAU/oI,KAAMkB,KAAKylI,YAK3E,cACE,OAAOzlI,KAAK4nI,eAAiB5nI,KAAKo7F,SAGpC,gBACEp7F,KAAK4nI,cAAgB,KACrB5nI,KAAKo7F,SAAWp7F,KAAKylI,UAAUhxG,MAGjC,sBACE,IAAKz0B,KAAK4nI,cAAe,CACvB5nI,KAAKo7F,SAAWp7F,KAAKo7F,UAAYp7F,KAAKylI,UAAUhxG,MAChDz0B,KAAK4nI,cAAgB5tI,OAAOqK,OAAOrE,KAAKo7F,UAExC,IAAK,MAAMtnC,KAAY9zD,KAAK0nI,WAC1B1tI,OAAOgD,eAAegD,KAAK4nI,cAAe9zE,EAAU,CAClDnyC,YAAY,EACZ1kB,MAAO+C,KAAKo7F,SAAStnC,MAM7B,aAAaA,GACX,OAAOA,KAAY9zD,KAAK0nI,WAG1B,aAAa5zE,GACX,MAAM+zE,EAAY7nI,KAAK0nI,WAAW5zE,GAClC,OAAO+zE,GAAaA,EAAUC,cAGhC,mBAAmBh0E,GACjB,GAAIA,EAAU,CACZ,MAAM+zE,EAAY7nI,KAAK0nI,WAAW5zE,GAClC,OAAO90D,QAAQ6oI,GAAaA,EAAUE,iBAAmB,GAAKF,EAAUE,mBAAqBF,EAAUG,mBAGzG,IAAK,MAAM7rI,KAAO6D,KAAK0nI,WACrB,GAAI1nI,KAAKioI,mBAAmB9rI,GAC1B,OAAO,EAIX,OAAO,EAGT,gBAAgB23D,EAAU72D,GACxB+C,KAAKkoI,cAAcp0E,EAAUtgB,QAAQl8B,QAAQra,IAG/C,cAAcw3B,GACZ,MAAM0zG,EAAiB1zG,EAAM,KAAmB,GAC1C2zG,EAAiB3zG,EAAM,KAAmBA,EAC1CyyG,EAAgBzyG,EAAM,KAAmB,GAE/C,IAAK,MAAMq/B,KAAYq0E,EAAgB,CACrC,MAAMlrI,EAAQkrI,EAAer0E,GAE7B9zD,KAAKqoI,qBAAqBv0E,EAAUozE,EAAcpzE,IAElD9zD,KAAKsoI,iBAAiBx0E,EAAU72D,GAEhCkrI,EAAer0E,GAAY9zD,KAAKunI,aAAazzE,GAG/C,IAAK,MAAMA,KAAYs0E,EAAgB,CACrC,MAAMnrI,EAAQmrI,EAAet0E,GAE7B9zD,KAAKqoI,qBAAqBv0E,EAAUozE,EAAcpzE,IAElD9zD,KAAKsoI,iBAAiBx0E,EAAU72D,IAIpC,iBAAiB62D,EAAU72D,GACzB,GAAK+C,KAAKuoI,0BAA0Bz0E,EAAU72D,GAA9C,CAIA,GAAqB,kBAAVA,EAAoB,CAC7B,IAAIurI,EAEJ,MAAMn0F,EAAuC,QAA9Bm0F,EAAcxoI,KAAK2zE,aAAmC,IAAhB60D,OAAyB,EAASA,EAAY/zG,MAAM4f,MACnGvC,EAAM70C,EAERo3C,IACFp3C,EAAQo3C,EAAMvC,EAAK,CACjBgiB,WACA6f,MAAO3zE,KAAK2zE,SAKd12E,aAAiBu2C,QACnBxzC,KAAKkoI,cAAcp0E,EAAU72D,GAK3B,GAAgBA,GAClB+C,KAAKyoI,sBAAsB30E,EAAU72D,GAKvC+C,KAAK0oI,cAAc50E,EAAU72D,IAG/B,0BAA0B62D,EAAU72D,GAClC,MAAM4qI,EAAY7nI,KAAK0nI,WAAW5zE,GAElC,OAAI72D,IAAU4qI,EAAUC,eAAiB7qI,IAAU4qI,EAAUc,YAI7Dd,EAAUc,UAAY1rI,GACf,GAGT,cAAc62D,EAAU72D,GACtB+C,KAAK4oI,sBACL,MAAMf,EAAY7nI,KAAK0nI,WAAW5zE,GAClC72D,EAAQ+C,KAAK6oI,kBAAkBhB,EAAW5qI,GAC1C4qI,EAAUC,cAAgB7qI,EAC1B4qI,EAAUE,mBACVF,EAAUG,kBAAoBH,EAAUE,iBAG1C,mBAAmBj0E,EAAU72D,EAAOkmD,GAClC,MAAM0kF,EAAY7nI,KAAK0nI,WAAW5zE,GAE9B+zE,GAAa1kF,GAAa0kF,EAAUG,wBAA+BtoI,IAAVzC,IAC3D+C,KAAK4oI,sBACLf,EAAUC,cAAgB7qI,EAC1B4qI,EAAUG,kBAAoB7kF,EAC9BnjD,KAAK2nI,mBAAmB7zE,EAAU72D,IAItC,cAAc62D,EAAUg1E,GACtB,MAAMjB,EAAY7nI,KAAK0nI,WAAW5zE,GAClC+zE,EAAUE,mBACV,MAAM5kF,EAAY0kF,EAAUE,iBAC5Be,EAAQh8F,KAAKjM,IACX,IAAIkoG,EAEJloG,EAAO7gC,KAAK6oI,kBAAkBhB,EAAWhnG,GAEzC7gC,KAAKgpI,mBAAmBl1E,EAAUjzB,EAAMsiB,GAExC,MAAM8lF,EAA6C,QAA/BF,EAAe/oI,KAAK2zE,aAAoC,IAAjBo1D,OAA0B,EAASA,EAAat0G,MAAMw0G,WAEhG,SAAbn1E,GAAuBm1E,GACzBA,EAAWpoG,EAAM,CACfizB,WACA6f,MAAO3zE,KAAK2zE,UAGfvwB,MAAMhpD,IACP,IAAI8uI,EAE4B,QAA/BA,EAAelpI,KAAK2zE,aAAoC,IAAjBu1D,GAAmCA,EAAahhD,WAAW9tF,EAAO,WAAWyN,OAAOisD,EAAU,QAAQjsD,OAAO7H,KAAK2zE,UAI9J,4BAA4B7f,EAAU6zD,GACpC,IAAIwhB,EAEa,SAAbr1E,GACF9zD,KAAK0oI,cAAc50E,EAAU6zD,GAG/B,MAAMkgB,EAAY7nI,KAAK0nI,WAAW5zE,GAClC+zE,EAAUE,mBACV,MAAM5kF,EAAY0kF,EAAUE,iBAC5B,IAAIlnG,EAAO,GACPtD,EAAQ,EAEZ,UAAW,MAAM4gB,KAASwpE,EAAU,CAClC,MAAM,cACJ+d,GACE1lI,KAAKylI,UAAYzlI,KAAKylI,UAAUhxG,MAAQ,GAG1CoM,EADE6kG,EACKA,EAAcvnF,EAAOtd,GAErBA,EAAKh5B,OAAOs2C,GAGrBnkD,OAAOgD,eAAe6jC,EAAM,SAAU,CACpClf,YAAY,EACZ1kB,MAAO,CAAC,CACNwqH,SAAUlqF,EACVmqF,OAAQ7mF,EAAKrgC,WAGjB+8B,EAAQsD,EAAKrgC,OAEbR,KAAKgpI,mBAAmBl1E,EAAUjzB,EAAMsiB,GAG1C,MAAM8lF,EAA6C,QAA/BE,EAAenpI,KAAK2zE,aAAoC,IAAjBw1D,OAA0B,EAASA,EAAa10G,MAAMw0G,WAE7GA,GACFA,EAAWpoG,EAAM,CACfizB,WACA6f,MAAO3zE,KAAK2zE,QAKlB,kBAAkBk0D,EAAW5qI,GAC3B,MAAMy2D,EAAWm0E,EAAU/oI,KAE3B,OAAI40D,IACEA,EAAS0yD,SACX1yD,EAAS0yD,QAAQyhB,EAAUC,cAAep0E,EAAU1zD,KAAKylI,WAGvD/xE,EAAS8wB,WACJ9wB,EAAS8wB,UAAUvnF,EAAOy2D,EAAU1zD,KAAKylI,WAI7CxoI,EAGT,qBAAqB62D,EAAUgP,GAC7B,MAAM+kE,EAAY7nI,KAAK0nI,WAAW5zE,GAElC,IAAK+zE,EAAW,CACd,MAAMh0E,EAAY7zD,KAAKylI,WAAazlI,KAAKylI,UAAUtqH,YAAY+oH,WAC/DlkI,KAAK0nI,WAAW5zE,GAAY,CAC1Bh1D,KAAM+0D,GAAaA,EAAUC,GAC7B60E,UAAW,KACXb,cAAehlE,EACfilE,iBAAkB,EAClBC,kBAAmB,KCxQ3B,MACEzhG,eAAc,GACdC,eAAc,GACdF,eAAc,IACZF,EAEE,GAAe,GACrB,IAAIgpE,GAAU,EACC,MAAM,GACnB,cACEpvG,KAAKy0B,MAAQoxG,GAAYhmI,MAAMG,KAAMkC,WACrClC,KAAKm8B,GAAKn8B,KAAKy0B,MAAM0H,GACrBn8B,KAAKu9B,MAAQ6xE,KACbpvG,KAAKopF,UAAYvjD,EAAUC,SAC3B9lC,KAAKutB,OAAS,KACdvtB,KAAKmrB,QAAU,KACfnrB,KAAKoc,MAAQ,KACbpc,KAAKqnI,cAAgB,KACrBrtI,OAAO2wC,KAAK3qC,MAGd,WACE,IAAIylI,EAAYzlI,KAEhB,MAAOylI,EAAUl4G,OACfk4G,EAAYA,EAAUl4G,OAGxB,OAAOk4G,EAGT,MAAM3gE,GACJ,MAAM,MACJrwC,GACEz0B,KACE0nI,EAAa,GAEnB,IAAK,MAAMvrI,KAAOs4B,EAAM,IAClBt4B,KAAOs4B,EAAM,IACfizG,EAAWvrI,GAAOs4B,EAAM,IAAgBt4B,GAC/BA,KAAOs4B,EAAM,MACtBizG,EAAWvrI,GAAOs4B,EAAM,IAAgBt4B,IAI5C,OAAO,IAAI6D,KAAKmb,YAAY,IAAKsZ,KAC5BizG,KACA5iE,IAIP,YACE,OAAO9kE,KAAKqnI,cAAc54F,MAG5B,aACEzuC,KAAKqnI,cAAgB,IAAI,GAAe,KAI5C,GAAUG,cAAgB,YAC1B,GAAUnjB,aAAe,GC/DV,MAAM,WAAmB,GACtC,aAAY,iBACV+kB,EAAgB,MAChBz1D,IAEA1jE,MAAM0jE,GACN3zE,KAAKopI,iBAAmBA,EACxBppI,KAAKovH,MAAQ,KACbpvH,KAAKowG,aAAc,EACnBpwG,KAAKqpI,UAAY,KACjBrpI,KAAKspI,uBAAwB,EAG/B,YACE,OAAOtpI,KAAKylI,UAGd,UAAU9xD,GACR3zE,KAAKylI,UAAY9xD,GCFrB,MAAM41D,GAAoB,mBACpBC,GAAmB,mBACnBC,GAAe,eACfC,GAAiB,iBACjBC,GAAgB,gBAChBC,GAA+B,GAAK,GAAK,EACzC,GAAc5vI,OAAO4U,OAAO,IAC5Bi7H,GAAoB7mD,GAAQ,EAChC8mD,cACAzjH,cAEOyjH,EAAYzvH,OAAOgM,IAE5B,IAAI0jH,GAAoB,IAAItmE,kBAAkB,GAC9C,MAAM,GAAe,CACnB5iC,KAAM,CACJ/hC,KAAM,OACN7B,MAAO,GACPs1C,OAAO,GAETmxF,eAAgB,KAChBC,UAAW,CACT7kI,KAAM,WACN7B,MAAO4jC,GAAQA,GAAQA,EAAKmpG,OAC5Bt4C,SAAS,EACT2zC,UAAU,GAEZK,cAAe,CACb5mI,KAAM,WACN7B,MAAO,KACPy0F,SAAS,EACT2zC,UAAU,GAEZ4D,WAAY,CACVnqI,KAAM,WACN7B,MAAO,KACPy0F,SAAS,EACT2zC,UAAU,GAEZ3rF,QAAS,CACP56C,KAAM,WACN7B,MAAO,KACPy0F,SAAS,EACT2zC,UAAU,GAEZhxF,MAAO,CACLv1C,KAAM,WACN7B,MAAO,CAAC60C,GACNgiB,WACA6f,QACAx9B,UACA8zF,cACAh0F,aAEA,MAAM,gBACJwN,GACEkwB,EAAMxoD,QAKR,IAAI++G,GAJND,EAAcA,GAAet2D,EAAMw2D,iBACnCh0F,EAAUA,GAAWw9B,EAAMl/C,MAAM0hB,QAE7BF,KAGFg0F,EAAc,IAAKA,EACjB51F,MAAO,IAAuC,QAAhC61F,EAAeD,SAA0C,IAAjBC,OAA0B,EAASA,EAAa71F,MACpG4B,YAKN,IAAIm0F,EAAoB3mF,EAAgB4mF,SAASv4F,GAWjD,OATKs4F,GAAsBH,IACzBxmF,EAAgB9iB,IAAI,CAClBkjB,WAAY/R,EACZjR,KAAM2hB,GAAK1Q,EAAKqE,GAChB2N,YAAY,IAEdsmF,GAAoB,GAGlBA,EACK3mF,EAAgBgB,UAAU,CAC/BZ,WAAY/R,EACZwR,SAAUziB,GAAQ8yC,EAAM0zD,cAAciD,gBAAgBx2E,EAAUjzB,GAChEmjB,WAAY2vB,EAAMx3C,GAClB8nB,UAAW6P,IAIRtR,GAAK1Q,EAAKqE,EAAS8zF,IAE5Bv4C,SAAS,GAEXyuC,eAAgB,GAChB3hC,SAAS,EACTF,UAAU,EACVisC,QAAS,CACPzrI,KAAM,SACNuI,IAAK,EACL/E,IAAK,EACLrF,MAAO,GAETgkH,QAAS,CACPniH,KAAM,WACN7B,MAAO,KACPy0F,SAAS,EACT2zC,UAAU,GAEZmF,QAAS,CACP1rI,KAAM,WACN7B,MAAO,KACPy0F,SAAS,EACT2zC,UAAU,GAEZoF,YAAa,CACX3rI,KAAM,WACN7B,MAAO,KACPy0F,SAAS,EACT2zC,UAAU,GAEZqF,OAAQ,CACN5rI,KAAM,WACN7B,MAAO,KACPy0F,SAAS,EACT2zC,UAAU,GAEZsF,UAAW,CACT7rI,KAAM,WACN7B,MAAO,KACPy0F,SAAS,EACT2zC,UAAU,GAEZ3hD,iBAAkBpzB,GAAkBC,QACpC+B,iBAAkB,CAChBxzD,KAAM,QACN7B,MAAO,CAAC,EAAG,EAAG,GACdy0F,SAAS,GAEX5+B,YAAa,CACXh0D,KAAM,QACN7B,MAAO,KACPy0F,SAAS,EACT2zC,UAAU,GAEZ1mC,eAAe,EACfisC,eAAgB,MAChBC,YAAa,OACbtuH,WAAY,GACZ+iH,YAAa,KACb1jI,WAAY,GACZu6C,QAAS,CACPr3C,KAAM,QACN7B,MAAO,GACPooI,UAAU,EACV3zC,SAAS,GAEXo5C,iBAAkB,CAChBhsI,KAAM,WACN7B,MAAO,EACLqgG,gBACI,CAAC,EAAiB,KAAbA,GACX5L,SAAS,GAEXq5C,wBAAyB,EACzBC,eAAe,EACfC,eAAgB,CACdnsI,KAAM,WACN7B,MAAO,CAAC,EAAG,EAAG,IAAK,OAGR,MAAM,WAAc,GACjC,WACE,MAAMukE,EAAYxhE,KAAKmb,YAAY+vH,WAAalrI,KAAKmb,YAAYhY,KACjE,MAAO,GAAG0E,OAAO25D,EAAW,WAAW35D,OAAO7H,KAAKy0B,MAAM0H,GAAI,OAG/D,WAAW/hC,EAAOoe,GAChB,IAAI2yH,EAAqBC,EAOnBC,EAAeC,GALjB9yH,IACFpe,EAAMoe,QAAU,GAAG3Q,OAAO2Q,EAAS,MAAM3Q,OAAOzN,EAAMoe,UAGa,QAA9D2yH,GAAuBC,EAAcprI,KAAKy0B,OAAOilB,eAA6C,IAAxByxF,OAAiC,EAASA,EAAoB3wI,KAAK4wI,EAAahxI,MAGxH,QAAlCixI,EAAgBrrI,KAAKmrB,eAAuC,IAAlBkgH,GAAwF,QAAnDC,EAAwBD,EAAc3xF,eAA+C,IAA1B4xF,GAA4CA,EAAsB9wI,KAAK6wI,EAAejxI,EAAO4F,OAI5O,SAASurI,GACPvrI,KAAKwrI,eAAe,CAClBC,cAAc,IAEhBzxI,OAAO4wB,OAAO5qB,KAAKoc,MAAOmvH,GAC1BvrI,KAAKgoF,iBAGP,eAAeT,GAAS,GAClBvnF,KAAKqnI,gBACPrnI,KAAKqnI,cAAcj3B,YAAc7oB,GAIrC,iBACEvnF,KAAKmrB,QAAQo7D,aAAagF,eAAehtF,OAAOyB,OAChDA,KAAKqnI,cAAct/C,aAAc,EAGnC,eAAep8C,EAAO,CACpB27C,kBAAkB,IAElB,OAAOtnF,KAAK0rI,gBAAgB//F,GAG9B,cACE,OAAO3rC,KAAKqnI,cAAct/C,aAAe/nF,KAAKyoF,wBAA0BzoF,KAAK2rI,kBAAkB3rI,KAAK4rI,oBAGtG,uBACE,OAAO5rI,KAAKqnI,cAAcwE,mBAAmBC,OAG/C,eACE,OAAO9rI,KAAKqnI,gBAAkBrnI,KAAKqnI,cAAcY,qBAGnD,oBACE,OAAOjoI,KAAKy0B,MAAMkqE,cAGpB,aACE,OAAO3+F,KAAKy0B,MAAM6pE,UAAYt+F,KAAKy0B,MAAM+pE,QAG3C,YACE,OAAOx+F,KAAKoc,QAAUpc,KAAKoc,MAAM2vH,SAAW/rI,KAAKoc,MAAMgzG,MAAQ,CAACpvH,KAAKoc,MAAMgzG,OAAS,KAGtF,sBACE,OAAOpvH,KAAKqnI,eAAiBrnI,KAAKqnI,cAAc+B,iBAGlD,kBACE,OAAOppI,KAAKqnI,eAAiBrnI,KAAKqnI,cAAc1zD,MAGlD,iBACE,OAAO3zE,KAAKy0B,MAAMw1G,YAGpB,QAAQ7+E,GACN,MAAM,SACJ/kC,GACErmB,KAAKmrB,QACHgkC,EAAgB01E,GAAiBz5E,EAAK,CAC1C/kC,WACAysC,YAAa9yD,KAAKy0B,MAAMq+B,YACxBR,iBAAkBtyD,KAAKy0B,MAAM69B,iBAC7BoxB,iBAAkB1jF,KAAKy0B,MAAMivD,oBAExBt+E,EAAGC,EAAGC,GAAKknD,GAAc2C,EAAe9oC,EAASomC,uBACxD,OAAsB,IAAfrB,EAAI5qD,OAAe,CAAC4E,EAAGC,GAAK,CAACD,EAAGC,EAAGC,GAG5C,UAAUmqD,GACR,MAAM,SACJppC,GACErmB,KAAKmrB,QACT,OAAO9E,EAAS4nC,UAAUwB,GAG5B,gBAAgBrE,GACd,OAAO2D,GAAgB3D,EAAK,CAC1B/kC,SAAUrmB,KAAKmrB,QAAQ9E,SACvBysC,YAAa9yD,KAAKy0B,MAAMq+B,YACxBR,iBAAkBtyD,KAAKy0B,MAAM69B,iBAC7BoxB,iBAAkB1jF,KAAKy0B,MAAMivD,mBAIjC,oBACE,MAAM,iBACJA,GACE1jF,KAAKy0B,MACT,OAAOivD,IAAqBpzB,GAAkBC,SAAWmzB,IAAqBpzB,GAAkBE,QAAUkzB,IAAqBpzB,GAAkBK,UAGnJ,QAAQ7mB,EAAMkiG,GACZ,QAAIhsI,KAAKy0B,MAAMwsF,SACNjhH,KAAKy0B,MAAMwsF,QAAQn3E,EAAMkiG,GAMpC,QAAQliG,EAAMkiG,GACZ,QAAIhsI,KAAKy0B,MAAM+1G,SACNxqI,KAAKy0B,MAAM+1G,QAAQ1gG,EAAMkiG,GAMpC,mBACE,MAAO,CAAC,EAAG,EAAG,GAGhB,mBAAmBlkI,EAAGtM,EAAS,IAI7B,OAHAA,EAAO,GAAKsM,EAAI,EAAI,IACpBtM,EAAO,GAAKsM,EAAI,GAAK,EAAI,IACzBtM,EAAO,GAAKsM,EAAI,GAAK,GAAK,EAAI,IACvBtM,EAGT,mBAAmB6tC,GACjB,GAAOA,aAAiB2K,YACxB,MAAOi4F,EAAIC,EAAIC,GAAM9iG,EACflnC,EAAQ8pI,EAAU,IAALC,EAAgB,MAALC,EAAa,EAC3C,OAAOhqI,EAGT,kBACE,MAAM,IAAI4P,MAAM,SAASlK,OAAO7H,KAAM,qCAGxC,WAAWosI,GACT,IAAK,MAAMrwI,KAAaiE,KAAKy0B,MAAM74B,WACjCwwI,EAAU9H,GAAa8H,EAASrwI,EAAUswI,WAAW7xI,KAAKwF,KAAMjE,IAGlE,OAAOqwI,EAGT,mBAAkB,SAChBhxC,EAAQ,MACR3mE,EAAK,QACLtJ,EAAO,YACPmhH,IAEA,OAAOA,EAAYC,mBAGrB,aAAY,SACVnxC,EAAQ,MACR3mE,EAAK,QACLtJ,EAAO,YACPmhH,IAEA,MAAMlD,EAAmBppI,KAAKwsI,sBAE9B,GAAIF,EAAYxJ,aAAesG,EAAkB,CAC/C,MAAM,YACJtG,GACEwJ,EAEJ,GAAIjsI,MAAM6P,QAAQ4yH,GAChB,IAAK,MAAM1X,KAAa0X,EACtBsG,EAAiBp1D,cAAco3C,QAGjCge,EAAiBp1D,gBAIrB,MAAMy4D,EAAsBrxC,EAAS2vC,wBAA0B,GAAK3vC,EAASkD,SACvEouC,EAAoBj4G,EAAMs2G,wBAA0B,GAAKt2G,EAAM6pE,SAErE,GAAImuC,IAAwBC,GAAqBtD,EAAkB,CACjE,MAAM,cACJuD,EAAa,sBACbC,GACExD,EAAiB3a,WACfoe,EAAyBF,GAAiBC,EAE5CC,IACEH,GAAqBG,EAAuB3mB,WAC9C2mB,EAAuB3mB,UAAW,EAClCkjB,EAAiB0D,WAAWD,EAAuB1wG,KAGhD0wG,EAAuB5vI,OAAUyvI,IACpCG,EAAuB3mB,UAAW,EAClC2mB,EAAuB5vI,MAAQ,CAAC,EAAG,EAAG,MAM9C,gBACE,IAAK,MAAMmyH,KAASpvH,KAAK+sI,YACvB3d,EAAMlqF,SAGR,MAAMkkG,EAAmBppI,KAAKwsI,sBAE1BpD,GACFA,EAAiBhiD,WAGnBpnF,KAAKmrB,QAAQs4B,gBAAgBU,YAAY,CACvCH,WAAYhkD,KAAKm8B,KAEnBn8B,KAAKqnI,cAAcwE,mBAAmBp+D,QACtCztE,KAAKqnI,cAAcjgD,WAGrB,KAAKz7C,GACH,IAAK,MAAMyjF,KAASpvH,KAAK+sI,YACvB3d,EAAM4M,KAAKrwF,GAIf,gBAAe,KACb7B,EAAI,KACJ7gB,IAEA,MAAM,MACJ9mB,GACE2nC,EAQJ,OANI3nC,GAAS,GACP9B,MAAM6P,QAAQlQ,KAAKy0B,MAAMoM,QAC3BiJ,EAAKjH,OAAS7iC,KAAKy0B,MAAMoM,KAAK1+B,IAI3B2nC,EAGT,iBAAiBzjB,GACf,MAAMyjH,EAAc9pI,KAAKqnI,cAAchhH,SACvCrmB,KAAKqnI,cAAchhH,SAAWA,EAEzByjH,GAAgBD,GAAkB,CACrCC,cACAzjH,eAEArmB,KAAKwrI,eAAe,CAClBwB,iBAAiB,IAGfhtI,KAAKgpF,YACHhpF,KAAK+nF,eACP/nF,KAAKurF,iBAGPvrF,KAAKspF,WAKX,oBAAoBnmF,EAAO,MAAOygI,EAAa,IAC7C,MAAMwF,EAAmBppI,KAAKwsI,sBAEzBpD,IAIQ,QAATjmI,EACFimI,EAAiBp1D,gBAEjBo1D,EAAiB0D,WAAW3pI,IAIhC,iBAAiB69H,GACf,IAAK,MAAM5R,KAASpvH,KAAK+sI,YACvB/sI,KAAKitI,oBAAoB7d,EAAO4R,GAIpC,kBAAkBvsG,GAChB,MAAM20G,EAAmBppI,KAAKwsI,sBAE9B,IAAKpD,EACH,OAGF,MAAMniB,EAAejnH,KAAKktI,gBAAgBz4G,GACpCqzF,EAAe9nH,KAAKmtI,gBAAgB14G,GAC1C20G,EAAiBtgH,OAAO,CACtB+X,KAAMpM,EAAMoM,KACZomF,eACAa,eACArzF,QACA6qG,YAAa7qG,EAAM6qG,YACnBzV,QAASp1F,EAAMoM,KAAK4tF,WACpBtjG,QAASnrB,KACTotI,yBAAyB,IAE3B,MAAMpM,EAAoBoI,EAAiBiE,qBAAqB,CAC9DniB,mBAAmB,IAErBlrH,KAAKstI,iBAAiBtM,GAGxB,6BACE,MAAMoI,EAAmBppI,KAAKwsI,sBAE1BpD,GACFA,EAAiB5+C,mBAIrB,2BACE,MAAM,mBACJqhD,GACE7rI,KAAKqnI,cAET,GAAIwE,EAAmBC,OAAQ,CAC7B,MAAMr8C,EAAoBo8C,EAAmB/iH,SACvC2L,EAAQz6B,OAAOqK,OAAOrE,KAAKy0B,OAEjC,IAAK,MAAMt4B,KAAOszF,EAChBz1F,OAAOgD,eAAey3B,EAAOt4B,EAAK,CAChCc,MAAOwyF,EAAkBtzF,KAI7B,OAAOs4B,EAGT,OAAOz0B,KAAKy0B,MAGd,+BAA+Bi1F,GAAW,aACxCzC,IAEA,GAAIyC,EAAUxD,SACZ,OAGF,MAAMqnB,EAAYlrI,KAAK6lC,MAAM6hG,GAAkBvpI,OAAS,GAGxD,GAFAR,KAAKqnI,cAAciC,uBAAwB,EAEvCiE,EAAYtmB,EAAc,CACxBA,EAAe2iB,IACjB,EAAI99G,KAAK,yFAAT,GAGFi+G,GAAoB,GAAkBljF,SAASkjF,GAAmB9iB,EAAc,CAC9EnmH,KAAM,EACNqP,MAAM,EACN80C,SAAU5iD,KAAKC,IAAI2kH,EAAc2iB,MAEnC,MAAM4D,EAAenrI,KAAK6lC,MAAM6hG,GAAkBvpI,OAAS,GACrDitI,EAAe,GAErB,IAAK,IAAI3lI,EAAIylI,EAAWzlI,EAAI0lI,EAAc1lI,IACxC9H,KAAK0tI,mBAAmB5lI,EAAG2lI,GAC3B1D,GAAsB,EAAJjiI,EAAQ,GAAK2lI,EAAa,GAC5C1D,GAAsB,EAAJjiI,EAAQ,GAAK2lI,EAAa,GAC5C1D,GAAsB,EAAJjiI,EAAQ,GAAK2lI,EAAa,GAIhD/jB,EAAUzsH,MAAQ8sI,GAAkB/iF,SAAS,EAAkB,EAAfigE,GAGlD,oBAAoBmI,EAAO4R,GACzB,MAAMoI,EAAmBppI,KAAKwsI,sBACxBrL,EAAoB/R,EAAM1kF,SAASy2F,mBAAqB,GACxDtb,EAAmBujB,EAAiBtd,oBAAoBkV,EAAmBG,GACjF/R,EAAMmH,cAAc1Q,GAGtB,oBAAoB8nB,GAClB3tI,KAAK4tI,qBAAqBD,GAG5B,qBAAqBA,GACnB,MAAM,cACJhB,EAAa,sBACbC,GACE5sI,KAAKwsI,sBAAsB/d,WACzBof,EAASlB,GAAiBC,EAC1BzzH,EAAQ00H,EAAOviB,gBAAgBqiB,GAC/Bv0H,EAAMy0H,EAAOviB,gBAAgBqiB,EAAc,GACjDE,EAAOhtI,OAAOimH,QAAQ,CACpBjmF,KAAM,IAAImT,WAAW56B,EAAMD,GAC3BlY,OAAQkY,IAIZ,uBACE,MAAM,cACJwzH,EAAa,sBACbC,GACE5sI,KAAKwsI,sBAAsB/d,WACzBof,EAASlB,GAAiBC,EAE5B5sI,KAAKqnI,cAAciC,uBAAyBuE,EAAO5wI,MAAM4D,SAAWkpI,GAAkBlpI,SACxFgtI,EAAO5wI,MAAQ8sI,GAAkB/iF,SAAS,EAAG6mF,EAAO5wI,MAAMuD,SAG5DqtI,EAAOtiB,gBAAgB,CACrBxE,YAAa,IAIjB,gBAAgBtyF,GAGd,OAFAA,EAAQA,GAASz0B,KAAKy0B,WAEK/0B,IAAvB+0B,EAAMwyF,aACDxyF,EAAMwyF,aAGXjnH,KAAKoc,YAAqC1c,IAA5BM,KAAKoc,MAAM6qG,aACpBjnH,KAAKoc,MAAM6qG,aAGb,GAAMxyF,EAAMoM,MAGrB,gBAAgBpM,GAGd,OAFAA,EAAQA,GAASz0B,KAAKy0B,WAEK/0B,IAAvB+0B,EAAMqzF,aACDrzF,EAAMqzF,aAGX9nH,KAAKoc,OAASpc,KAAKoc,MAAM0rG,aACpB9nH,KAAKoc,MAAM0rG,aAGb,KAGT,cACE,GAAM0hB,GAAkBxpI,MAExBA,KAAK8tI,aAEL9tI,KAAK+tI,gBAAgB/tI,KAAKmrB,SAE1B,IAAK,MAAMpvB,KAAaiE,KAAKy0B,MAAM74B,WACjCG,EAAUgyI,gBAAgBvzI,KAAKwF,KAAMA,KAAKmrB,QAASpvB,GAGrDiE,KAAKwrI,eAAe,CAClB1I,aAAa,EACbC,cAAc,EACdiK,iBAAiB,EACjB/J,mBAAmB,IAGrBjjI,KAAKguI,eAGP,UACE,MAAMC,EAAmBjuI,KAAK+nF,cAC9B,GAAM0hD,GAAczpI,KAAMiuI,GAEtBA,GACFjuI,KAAKguI,eAIT,eACE,MAAMl+C,EAAe9vF,KAAKy0B,MACpBgvF,EAAkBzjH,KAAKmrB,QAAQ9E,SAE/BopE,EAAoBzvF,KAAKkuI,2BAE/BluI,KAAKqnI,cAAc53C,kBAAoBA,EACvCzvF,KAAKmrB,QAAQ9E,SAAWrmB,KAAKqnI,cAAchhH,UAAYo9F,EACvDzjH,KAAKy0B,MAAQg7D,EAEb,IACE,MAAM0+C,EAAenuI,KAAK4rI,mBAEpBwC,EAAYpuI,KAAK+sI,YAEvB,GAAI/sI,KAAKmrB,QAAQjwB,GACf8E,KAAKquI,YAAYF,QAEjB,IACEnuI,KAAKquI,YAAYF,GACjB,MAAO/zI,IAGX,IAAK,MAAM2B,KAAaiE,KAAKy0B,MAAM74B,WACjCG,EAAUsyI,YAAY7zI,KAAKwF,KAAMmuI,EAAcpyI,GAGjD,MAAMuyI,EAAetuI,KAAK+sI,YAAY,KAAOqB,EAAU,GAEvDpuI,KAAKuuI,eAAeJ,EAAcG,GAE9BtuI,KAAKgpF,YACPhpF,KAAKwuI,cAAcL,IAEnBnuI,KAAKgoF,iBAELhoF,KAAKyuI,kBAAkBzuI,KAAKy0B,OAExBz0B,KAAKoc,MAAMgzG,OACbpvH,KAAKoc,MAAMgzG,MAAMsf,iBAAiB1uI,KAAKktI,oBAG3C,QACAltI,KAAKmrB,QAAQ9E,SAAWo9F,EACxBzjH,KAAKy0B,MAAQq7D,EACb9vF,KAAK2uI,mBACL3uI,KAAKqnI,cAAct/C,aAAc,EACjC/nF,KAAKqnI,cAAcuH,iBAIvB,YACE,GAAMlF,GAAgB1pI,MACtBA,KAAK6uI,cAAc7uI,KAAKmrB,SAExB,IAAK,MAAMpvB,KAAaiE,KAAKy0B,MAAM74B,WACjCG,EAAU8yI,cAAcr0I,KAAKwF,KAAMjE,GAIvC,WAAU,iBACRghG,EAAmB,KAAI,SACvB1oC,EAAW,GAAE,WACb93C,EAAa,KAEbvc,KAAK8uI,6BAEL,MAAMh/C,EAAe9vF,KAAKy0B,MAC1Bz0B,KAAKy0B,MAAQz0B,KAAKqnI,cAAc53C,mBAAqBK,EACrD,MAAM,QACJy6C,GACEvqI,KAAKy0B,MACT4/B,EAASk2E,QAAUloI,KAAK+mD,IAAImhF,EAAS,EAAI,KAEzC,IACMxtC,GACF/8F,KAAK+uI,oBAAoBhyC,GAG3B,MAAM,iBACJ+tC,GACE9qI,KAAKy0B,MACHu6G,EAAUlE,GAAoBA,EAAiBz2E,IAAa,CAAC,EAAG,GACtE,gBAAcr0D,KAAKmrB,QAAQjwB,GAAI,CAC7BgsB,cAAe8nH,IAEjB,gBAAehvI,KAAKmrB,QAAQjwB,GAAIqhB,EAAY,KAC1C,MAAMovB,EAAO,CACXoxD,mBACA1oC,WACA93C,aACA4O,QAASnrB,KAAKmrB,SAGhB,IAAK,MAAMpvB,KAAaiE,KAAKy0B,MAAM74B,WACjCG,EAAUigI,KAAKxhI,KAAKwF,KAAM2rC,EAAM5vC,GAGlCiE,KAAKg8H,KAAKrwF,KAEZ,QACA3rC,KAAKy0B,MAAQq7D,GAIjB,iBACE,OAAO9vF,KAAKqnI,cAAciF,YAG5B,eAAe2C,GACb,MAAM,YACJ3C,GACEtsI,KAAKqnI,cAET,IAAK,MAAMlrI,KAAO8yI,EAChB,GAAIA,EAAM9yI,GAAM,CACd,IAAI+yI,GAAc,EAElB,OAAQ/yI,GACN,IAAK,cACCkE,MAAM6P,QAAQo8H,EAAYnwI,MAC5BmwI,EAAYnwI,GAAOkE,MAAM6P,QAAQ++H,EAAM9yI,IAAQmwI,EAAYnwI,GAAK0L,OAAOonI,EAAM9yI,IAAQ8yI,EAAM9yI,GAC3F+yI,GAAc,GAGlB,QACO5C,EAAYnwI,KACfmwI,EAAYnwI,GAAO8yI,EAAM9yI,GACzB+yI,GAAc,GAKhBA,GACF,GAAM3F,GAAmBvpI,KAAM7D,EAAK8yI,GAK1C,MAAM1C,EAAqBD,EAAYxJ,aAAewJ,EAAYtJ,uBAAyBsJ,EAAYvJ,cAAgBuJ,EAAYrJ,kBACnIqJ,EAAYC,mBAAqBA,EACjCD,EAAY6C,iBAAmB5C,GAAsB0C,EAAMjC,iBAAmBiC,EAAMxD,aAGtF,mBACEzrI,KAAKqnI,cAAciF,YAAc,CAC/BxJ,aAAa,EACbC,cAAc,EACdC,uBAAuB,EACvBgK,iBAAiB,EACjBvB,cAAc,EACdxI,mBAAmB,EACnBsJ,oBAAoB,EACpB4C,kBAAkB,GAItB,UAAUrqE,EAAUs2B,GAClB,MAAMkxC,EAAchK,GAAUx9D,EAAUs2B,GAExC,GAAIkxC,EAAYtJ,sBACd,IAAK,MAAM7mI,KAAOmwI,EAAYtJ,sBACxBsJ,EAAYtJ,sBAAsB7mI,IACpC6D,KAAKovI,oBAAoBjzI,GAK/B,GAAImwI,EAAYnJ,mBACd,IAAK,MAAMhnI,KAAOmwI,EAAYnJ,mBAC5BnjI,KAAKqnI,cAAcwE,mBAAmBlrG,IAAIxkC,EAAKi/F,EAASj/F,GAAM2oE,EAAS3oE,GAAM2oE,EAASw6D,YAAYnjI,IAItG,OAAO6D,KAAKwrI,eAAec,GAG7B,gBACE1jD,GAAc5oF,KAAKy0B,OAGrB,oBAAoBsoE,GAClB,IAAK,MAAMqyB,KAASpvH,KAAK+sI,YACvB3d,EAAMuM,qBAAqB5+B,GAI/B,oBAAoBjzD,GACd9pC,KAAKy0B,MAAMu2G,eACbhrI,KAAKqvI,qBAAqBvlG,GAI9B,qBAAqBA,GACnB,MAAMwlG,EAA0B,CAC9BC,qBAAsBzlG,EAAK28D,OAAS38D,EAAKT,MAAQ,OAE7C,eACJ4hG,GACEjrI,KAAKy0B,MAELqV,EAAK28D,QAAoC,oBAAnBwkC,IACxBqE,EAAwBE,sBAAwBvE,EAAenhG,IAGjE9pC,KAAK+uI,oBAAoBO,GACzBtvI,KAAKgoF,iBAGP,gBAAe,MACbvzD,EAAK,SACL2mE,GACCn4C,GACD,MAAM,cACJ+nF,EAAa,uBACbD,EAAsB,eACtBE,GACEx2G,EAEJ,GAAIwuB,GAAem4C,EAAS4vC,gBAAkBA,GAAiB5vC,EAAS2vC,yBAA2BA,GAA0B3vC,EAAS6vC,iBAAmBA,EAAgB,CACvK,MAAM1uH,EAAa,GAEdyuH,IACHzuH,EAAWgzH,qBAAuB,MAGhClvI,MAAM6P,QAAQ+6H,KAChB1uH,EAAWizH,sBAAwBvE,GAGjCzwH,OAAO09G,UAAU6S,KACnBxuH,EAAWgzH,qBAAuBxE,GAA0B,EAAI/qI,KAAK0tI,mBAAmB3C,GAA0B,MAGpH/qI,KAAK+uI,oBAAoBxyH,IAI7B,mBACE,MAAO,CACLkY,MAAOz0B,KAAKy0B,MACZ2mE,SAAUp7F,KAAKqnI,cAAcoI,cAC7BtkH,QAASnrB,KAAKmrB,QACdmhH,YAAatsI,KAAKqnI,cAAciF,aAIpC,gBAAgB3gG,GACd,IAAK3rC,KAAKqnI,cACR,OAAO,EAGT,IAAI9/C,GAAS,EACbA,EAASA,GAAUvnF,KAAKqnI,cAAcj3B,aAAepwG,KAAKm8B,GAC1Dn8B,KAAKqnI,cAAcj3B,YAAcpwG,KAAKqnI,cAAcj3B,cAAgBzkE,EAAK27C,iBACzE,MAAM8hD,EAAmBppI,KAAKwsI,sBACxBkD,EAA8BtG,GAAoBA,EAAiB3hD,eAAe97C,GAExF,OADA47C,EAASA,GAAUmoD,EACZnoD,EAGT,uBACE,OAAO,IAAI,GAAiBvnF,KAAKmrB,QAAQjwB,GAAI,CAC3CihC,GAAIn8B,KAAKy0B,MAAM0H,GACfsS,MAAOzuC,KAAKmrB,QAAQsjB,MACpBm4C,SAAU5mF,KAAKmrB,QAAQy7D,WAI3B,aACE,IAAQ5mF,KAAKqnI,gBAAkBrnI,KAAKoc,OACpC,GAAO3B,SAASza,KAAKy0B,MAAMivD,mBAE3B,MAAM0lD,EAAmBppI,KAAK2vI,uBAE1BvG,GACFA,EAAiBwG,aAAa,CAC5BhD,sBAAuB,CACrB9tI,KAAM,KACNgC,KAAM,EACNkpH,SAAS,EACTlhG,OAAQ9oB,KAAK6vI,kCAKnB7vI,KAAKqnI,cAAgB,IAAI,GAAW,CAClC+B,mBACAz1D,MAAO3zE,OAETA,KAAK2uI,mBACL3uI,KAAKoc,MAAQ,GACbpiB,OAAOgD,eAAegD,KAAKoc,MAAO,mBAAoB,CACpD6E,IAAK,KACH,EAAI2vC,WAAW,+BAAgC,+BACxCw4E,KAGXppI,KAAKqnI,cAAc1zD,MAAQ3zE,KAC3BA,KAAKqnI,cAAcwE,mBAAqB,IAAI,GAAyB7rI,KAAKmrB,QAAQy7D,UAClF5mF,KAAKqnI,cAAcM,mBAAqB3nI,KAAK8vI,oBAAoBzzI,KAAK2D,MACtEA,KAAKqnI,cAAc0I,cAAc/vI,KAAKy0B,OAGxC,eAAe4zD,GACb,GAAMshD,GAAe3pI,KAAMA,OAASqoF,GACpC,MAAM,MACJjsE,EAAK,cACLirH,GACEh/C,EAEAroF,OAASqoF,IAIbroF,KAAKqnI,cAAgBA,EACrBrnI,KAAKqnI,cAAc1zD,MAAQ3zE,KAC3BA,KAAKoc,MAAQA,EACbpc,KAAKqnI,cAAc0I,cAAc/vI,KAAKy0B,OACtCz0B,KAAKsiI,UAAUtiI,KAAKy0B,MAAOz0B,KAAKqnI,cAAcoI,gBAGhD,sBACEzvI,KAAKsiI,UAAUtiI,KAAKy0B,MAAOz0B,KAAKqnI,cAAcoI,eAC9CzvI,KAAKurF,kBAIT,GAAM2/C,UAAY,QAClB,GAAM7mB,aAAe,GC7+BrB,MAAM,GAAK,s0BACI,QACblhH,KAAM,YACNixD,aAAc,CAAC3G,IACfyG,GAAE,ICLW,s0BCCf,MAAM,GAAyB,CAC7BiuC,aAAc,IAGhB,SAAS6tC,IAAa,MACpB3mG,EAAQ,CAAC,EAAG,EAAG,GAAE,UACjBsyD,EAAY,GACV,IACF,OAAOtyD,EAAMrvB,IAAIyrH,GAAaA,EAAY9pC,EAAY,KAGxD,SAASs0C,IAAuB,aAC9BxuC,EAAY,YACZE,EAAc,GAAE,kBAChBD,EAAoB,KAEpB,MAAMwuC,EAAsB,GAmB5B,OAhBEA,EAAoB,gCADlBzuC,EACoDuuC,GAAavuC,GAEb,CAAC,EAAG,EAAG,GAG/DE,EAAYzlG,QAAQ,CAAComG,EAAYngG,KAC/B+tI,EAAoB,wBAAwB/tI,YAAkB6tI,GAAa1tC,GAC3E4tC,EAAoB,wBAAwB/tI,eAAqBmgG,EAAW3zC,SAC5EuhF,EAAoB,wBAAwB/tI,kBAAwBmgG,EAAW6tC,aAAe,CAAC,EAAG,EAAG,KAEvGD,EAAoBE,0BAA4BzuC,EAAYnhG,OAC5DkhG,EAAkBxlG,QAAQ,CAACkmG,EAAkBjgG,KAC3C+tI,EAAoB,8BAA8B/tI,YAAkB6tI,GAAa5tC,GACjF8tC,EAAoB,8BAA8B/tI,gBAAsBigG,EAAiBluE,YAE3Fg8G,EAAoBG,gCAAkC3uC,EAAkBlhG,OACjE0vI,EAGT,SAAS,GAAYvkG,EAAO,IAC1B,GAAI,iBAAkBA,EAAM,CAC1B,MAAM,aACJ81D,EAAY,YACZE,EAAW,kBACXD,GACE/1D,EAAKw2D,cAAgB,GACnBmuC,EAAY7uC,GAAgBE,GAAeA,EAAYnhG,OAAS,GAAKkhG,GAAqBA,EAAkBlhG,OAAS,EAE3H,OAAK8vI,EAMEt2I,OAAO4wB,OAAO,GAAIqlH,GAAuB,CAC9CxuC,eACAE,cACAD,sBACE,CACF6uC,mBAAmB,IAVZ,CACLA,mBAAmB,GAazB,GAAI,WAAY5kG,EAAM,CACpB,MAAMw2D,EAAe,CACnBR,YAAa,GACbD,kBAAmB,IAGrB,IAAK,MAAMK,KAASp2D,EAAK6kG,QAAU,GACjC,OAAQzuC,EAAMjjG,MACZ,IAAK,UACHqjG,EAAaV,aAAeM,EAC5B,MAEF,IAAK,cACHI,EAAaT,kBAAkBz+F,KAAK8+F,GACpC,MAEF,IAAK,QACHI,EAAaR,YAAY1+F,KAAK8+F,GAC9B,MAEF,SAIJ,OAAO,GAAY,CACjBI,iBAIJ,MAAO,GAGF,MAAMquC,GAAS,CACpBrtI,KAAM,SACN+wD,GAAI,GACJC,GAAI,GACJG,YAAW,GACXE,QAAS,CACPi8E,WAAY,ICrGD,2hGCEf,MAAM,GAAyB,GAE/B,SAASC,GAAoBC,GAC3B,MAAM,QACJC,EAAU,IAAI,QACdC,EAAU,GAAG,UACbC,EAAY,GAAE,cACdC,EAAgB,CAAC,GAAI,GAAI,KACvBJ,EACJ,MAAO,CACLK,kBAAmBJ,EACnBK,kBAAmBJ,EACnBK,oBAAqBJ,EACrBK,wBAAyBJ,EAAc/2H,IAAI5U,GAAKA,EAAI,MAIxD,SAAS,GAAYumC,EAAO,IAC1B,KAAM,aAAcA,GAClB,MAAO,GAGT,MAAM,SACJglG,GACEhlG,EAEJ,OAAKglG,EAMED,GAAoBC,GALlB,CACLJ,mBAAmB,GAOlB,MAAMa,GAAkB,CAC7BjuI,KAAM,mBACNixD,aAAc,CAACo8E,IACft8E,GAAI,GACJM,QAAS,CACP68E,gBAAiB,GAEnB/8E,YAAW,IC5CPg9E,GAA0B,IAAIt9F,WAAW,CAAC,EAAG,IAAK,IAAK,MACvDu9F,GAAyB,CAC7BhC,qBAAsB,KACtBC,sBAAuB8B,GACvB1yC,eAAe,EACf6E,kBAAkB,GAGpB,SAAS,GAAY93D,EAAO4lG,IAC1B,MAAMl9E,EAAW,GAEjB,QAAkC30D,IAA9BisC,EAAK4jG,qBACP,GAAK5jG,EAAK4jG,qBAEH,CACL,MAAMiC,EAAgB7lG,EAAK4jG,qBAAqBl1I,MAAM,EAAG,GACzDg6D,EAASo9E,4BAA8B,EACvCp9E,EAASq9E,uBAAyBF,OAJlCn9E,EAASo9E,4BAA8B,EAQ3C,GAAI9lG,EAAK6jG,sBAAuB,CAC9B,MAAMnmG,EAAQhpC,MAAMosC,KAAKd,EAAK6jG,sBAAuBpqI,GAAKA,EAAI,KAEzDoV,OAAOC,SAAS4uB,EAAM,MACzBA,EAAM,GAAK,GAGbgrB,EAASs9E,wBAA0BtoG,EAQrC,YAL2B3pC,IAAvBisC,EAAKizD,gBACPvqC,EAASu9E,gBAAkB5yI,QAAQ2sC,EAAKizD,eACxCvqC,EAASw9E,mBAAqB7yI,QAAQ2sC,EAAK83D,mBAGtCpvC,EAGT,MAAM,GAAK,+rCAgDL,GAAK,qhCAsCEy9E,GAAU,CACrB3uI,KAAM,UACN+wD,GAAE,GACFC,GAAE,GACFG,YAAW,IChIE,QACbG,OAAQ,CACN,yBAA0B,8IAC1B,yBAA0B,CACxBoB,MAAO,GACPF,UAAW,8OAGZm8E,ICRE,MAAMC,GAAY,CACvBC,OAAQ,EACRC,MAAO,EACPC,UAAW,EACXC,WAAY,EACZC,UAAW,EACXC,eAAgB,EAChBC,aAAc,GAED,MAAM,GACnB,uBACE,OAAOP,GAGT,YAAYt9G,EAAQ,IAClB,MAAM,GACJ0H,EAAKhd,GAAI,YAAW,SACpBw8D,EAAWo2D,GAAUK,UAAS,WAC9B3jB,EAAa,GAAE,QACf2L,EAAU,KAAI,YACdl8C,EAAc,MACZzpD,EACJz0B,KAAKm8B,GAAKA,EACVn8B,KAAK27E,SAAsB,EAAXA,EAChB37E,KAAKyuH,WAAa,GAClBzuH,KAAK0qC,SAAW,GAEhB1qC,KAAKuyI,eAAe9jB,EAAY2L,GAEhCp6H,KAAKk+E,YAAcA,GAAel+E,KAAKwyI,sBAAsBxyI,KAAKyuH,WAAYzuH,KAAKo6H,SAGrF,WACE,OAAOp6H,KAAK27E,SAGd,iBACE,OAAO37E,KAAKk+E,YAGd,gBACE,OAAOl+E,KAAKo6H,QAAU,CACpBA,QAASp6H,KAAKo6H,WACXp6H,KAAKyuH,YACNzuH,KAAKyuH,WAGX,OAAO2I,GACL,MAAO,YAAYp3H,KAAKm8B,gBAAgBi7F,IAG1C,eAAe3I,EAAY2L,GACrBA,IACFp6H,KAAKo6H,QAAUzgH,YAAYC,OAAOwgH,GAAW,CAC3Cn9H,MAAOm9H,EACPt5H,KAAM,GACJs5H,GAGN,IAAK,MAAMhD,KAAiB3I,EAAY,CACtC,IAAI/E,EAAY+E,EAAW2I,GAC3B1N,EAAY/vG,YAAYC,OAAO8vG,GAAa,CAC1CzsH,MAAOysH,GACLA,EACJ,GAAO/vG,YAAYC,OAAO8vG,EAAUzsH,OAAW+C,KAAKyyI,OAAOrb,GAAf,6DAErB,aAAlBA,GAAkD,cAAlBA,GAAmC1N,EAAU5oH,OAChF4oH,EAAU5oH,KAAO,GAGG,YAAlBs2H,GACF,IAAQp3H,KAAKo6H,SACbp6H,KAAKo6H,QAAU1Q,GAEf1pH,KAAKyuH,WAAW2I,GAAiB1N,EASrC,OALI1pH,KAAKo6H,cAAsC16H,IAA3BM,KAAKo6H,QAAQj8C,YAC/Bn+E,KAAKo6H,QAAUpgI,OAAO4wB,OAAO,GAAI5qB,KAAKo6H,gBAC/Bp6H,KAAKo6H,QAAQj8C,WAGfn+E,KAGT,sBAAsByuH,EAAY2L,GAChC,GAAIA,EACF,OAAOA,EAAQn9H,MAAMuD,OAGvB,IAAI09E,EAAc/wE,IAElB,IAAK,MAAMiqH,KAAiB3I,EAAY,CACtC,MAAM/E,EAAY+E,EAAW2I,IACvB,MACJn6H,EAAK,KACL6D,EAAI,SACJolH,GACEwD,GAECxD,GAAYjpH,GAAS6D,GAAQ,IAChCo9E,EAAc77E,KAAKgF,IAAI62E,EAAajhF,EAAMuD,OAASM,IAKvD,OADA,GAAO0Z,OAAOC,SAASyjE,IAChBA,G,UC3GJ,MAAMw0D,GAAU,CACrBC,UAAW,EACXC,mBAAoB,GAEf,SAASC,GAA8BC,EAAQ5+G,EAAW/b,EAAU,IACzE,MAAM46H,EAAmBC,GAA2BF,EAAQ36H,GAE5D,OAAI46H,IAAqB7+G,IACvB++G,GAAeH,EAAQ36H,IAChB,GAKJ,SAAS66H,GAA2BF,EAAQ36H,EAAU,IAC3D,OAAO9V,KAAK6wI,KAAKC,GAAqBL,EAAQ36H,IAEzC,SAASg7H,GAAqBL,EAAQ36H,EAAU,IACrD,MAAM,MACJgB,EAAQ,EAAC,IACTC,EAAM05H,EAAOtyI,QACX2X,EACEi7H,EAAMj7H,EAAQrX,MAAQ,EAC5B,IAAIuyI,EAAO,EAEX,IAAK,IAAIvrI,EAAIqR,EAAO2L,EAAI1L,EAAMg6H,EAAKtrI,EAAIsR,EAAKtR,GAAKsrI,EAC/CC,IAASP,EAAOhrI,GAAKgrI,EAAOhuH,KAAOguH,EAAOhrI,EAAI,GAAKgrI,EAAOhuH,EAAI,IAC9DA,EAAIhd,EAGN,OAAOurI,EAAO,EAuBhB,SAASJ,GAAeH,EAAQ36H,GAC9B,MAAM,MACJgB,EAAQ,EAAC,IACTC,EAAM05H,EAAOtyI,OAAM,KACnBM,EAAO,GACLqX,EACEm7H,GAAal6H,EAAMD,GAASrY,EAC5ByyI,EAAWlxI,KAAK6lC,MAAMorG,EAAY,GAExC,IAAK,IAAIxrI,EAAI,EAAGA,EAAIyrI,IAAYzrI,EAAG,CACjC,MAAM0C,EAAK2O,EAAQrR,EAAIhH,EACjB2J,EAAK0O,GAASm6H,EAAY,EAAIxrI,GAAKhH,EAEzC,IAAK,IAAIgkB,EAAI,EAAGA,EAAIhkB,IAAQgkB,EAAG,CAC7B,MAAM0uH,EAAMV,EAAOtoI,EAAKsa,GACxBguH,EAAOtoI,EAAKsa,GAAKguH,EAAOroI,EAAKqa,GAC7BguH,EAAOroI,EAAKqa,GAAK0uH,ICnER,MAAM,WAAuB,GAC1C,YAAY/+G,EAAQ,IAClB,MAAM,GACJ0H,EAAKhd,GAAI,oBACPsV,GACE,QACJ2lG,EAAO,WACP3L,GACEglB,GAAgBh/G,GACpBxkB,MAAM,IAAKwkB,EACT0H,KACAi+F,UACA3L,gBAMN,SAASglB,GAAgBh/G,GACvB,MAAM,OACJszE,EAAM,OACN/9E,EAAS,EAAC,QACV0pH,EAAU,IACRj/G,EACJ,IAAI,SACFk/G,GACEl/G,EAEAk/G,IACF,EAAIpsI,OAAOosI,EAASnzI,QAAUkzI,GAC9BC,EAAWA,EAASC,QAAQhpI,GAAK,CAACA,EAAE,GAAIA,EAAE,KAC1CioI,GAA8Bc,EAAUjB,GAAQE,oBAGlD,MAAMiB,EAAa7pH,EAAS,EACtB8pH,EAAkBJ,EAAU,EAC5BznB,EAAc4nB,EAA+B,EAAlBC,EAAsB,EAAIJ,EACrDK,EAAsB,EAAV1xI,KAAKwP,GAAS6hI,EAC1BtZ,EAAU,IAAI72D,YAAYswE,EAAuB,EAAVH,EAAc,EAAI,GACzDlzC,EAAY,IAAIj8F,aAA2B,EAAd0nH,GAC7B+nB,EAAU,IAAIzvI,aAA2B,EAAd0nH,GACjC,IAAInkH,EAAI,EAER,GAAI+rI,EAAY,CACd,IAAK,IAAI/uH,EAAI,EAAGA,EAAIgvH,EAAiBhvH,IAAK,CACxC,MAAMrgB,EAAIqgB,EAAIivH,EACRpoB,EAAc7mG,EAAI4uH,EAClB/sI,EAAMtE,KAAKsE,IAAIlC,GACfiC,EAAMrE,KAAKqE,IAAIjC,GAErB,IAAK,IAAIwvI,EAAI,EAAGA,EAAI,EAAGA,IACrBzzC,EAAU14F,EAAI,GAAK6rI,EAAWA,EAAuB,EAAdhoB,GAAmBjlH,EAAMqhG,EAChEvH,EAAU14F,EAAI,GAAK6rI,EAAWA,EAAuB,EAAdhoB,EAAkB,GAAKhlH,EAAMohG,EACpEvH,EAAU14F,EAAI,IAAM,GAAQmsI,GAAKjqH,EACjCgqH,EAAQlsI,EAAI,GAAK6rI,EAAWA,EAAuB,EAAdhoB,GAAmBjlH,EACxDstI,EAAQlsI,EAAI,GAAK6rI,EAAWA,EAAuB,EAAdhoB,EAAkB,GAAKhlH,EAC5DmB,GAAK,EAIT04F,EAAU14F,EAAI,GAAK04F,EAAU14F,EAAI,GACjC04F,EAAU14F,EAAI,GAAK04F,EAAU14F,EAAI,GACjC04F,EAAU14F,EAAI,GAAK04F,EAAU14F,EAAI,GACjCA,GAAK,EAGP,IAAK,IAAIgd,EAAI+uH,EAAa,EAAI,EAAG/uH,EAAIgvH,EAAiBhvH,IAAK,CACzD,MAAMla,EAAIvI,KAAK6lC,MAAMpjB,EAAI,GAAKziB,KAAK6wI,KAAK,GAAMpuH,EAAI,GAC5CrgB,EAAImG,EAAImpI,EACRpoB,GAAe/gH,EAAI8oI,GAAWA,EAC9B/sI,EAAMtE,KAAKsE,IAAIlC,GACfiC,EAAMrE,KAAKqE,IAAIjC,GACrB+7F,EAAU14F,EAAI,GAAK6rI,EAAWA,EAAuB,EAAdhoB,GAAmBjlH,EAAMqhG,EAChEvH,EAAU14F,EAAI,GAAK6rI,EAAWA,EAAuB,EAAdhoB,EAAkB,GAAKhlH,EAAMohG,EACpEvH,EAAU14F,EAAI,GAAKkiB,EAAS,EAC5BgqH,EAAQlsI,EAAI,GAAK,EACjBA,GAAK,EAGP,GAAI+rI,EAAY,CACd,IAAI1xI,EAAQ,EAEZ,IAAK,IAAI2iB,EAAI,EAAGA,EAAI4uH,EAAS5uH,IAC3Bs1G,EAAQj4H,KAAe,EAAJ2iB,EAAQ,EAC3Bs1G,EAAQj4H,KAAe,EAAJ2iB,EAAQ,EAC3Bs1G,EAAQj4H,KAAe,EAAJ2iB,EAAQ,EAC3Bs1G,EAAQj4H,KAAe,EAAJ2iB,EAAQ,EAC3Bs1G,EAAQj4H,KAAe,EAAJ2iB,EAAQ,EAC3Bs1G,EAAQj4H,KAAe,EAAJ2iB,EAAQ,EAI/B,MAAO,CACLs1G,UACA3L,WAAY,CACVmL,SAAU,CACR94H,KAAM,EACN7D,MAAOujG,GAETq5B,OAAQ,CACN/4H,KAAM,EACN7D,MAAO+2I,KCxGA,miFCAA,4MCKf,MAAME,GAAgB,CAAC,EAAG,EAAG,EAAG,KAC1B,GAAe,CACnBC,eAAgB,CACdr1I,KAAM,SACNuI,IAAK,EACLpK,MAAO,IAET02I,SAAU,KACV5rC,OAAQ,CACNjpG,KAAM,SACNuI,IAAK,EACLpK,MAAO,KAET6J,MAAO,CACLhI,KAAM,SACN7B,MAAO,GAETgE,OAAQ,CACNnC,KAAM,QACN7B,MAAO,CAAC,EAAG,IAEbm3I,SAAU,CACRt1I,KAAM,SACNuI,IAAK,EACL/E,IAAK,EACLrF,MAAO,GAETo3I,eAAgB,CACdv1I,KAAM,SACNuI,IAAK,EACLpK,MAAO,GAETq3I,YAAa,SACbC,eAAgB,SAChBC,eAAgB,EAChBC,mBAAoB,EACpBC,mBAAoBl6H,OAAO+1D,iBAC3BokE,UAAU,EACVC,WAAW,EACXC,QAAQ,EACRC,SAAS,EACThoD,YAAa,CACXhuF,KAAM,WACN7B,MAAOmI,GAAKA,EAAEupD,UAEhBomF,aAAc,CACZj2I,KAAM,WACN7B,MAAOi3I,IAETc,aAAc,CACZl2I,KAAM,WACN7B,MAAOi3I,IAETe,aAAc,CACZn2I,KAAM,WACN7B,MAAO,GAETi4I,aAAc,CACZp2I,KAAM,WACN7B,MAAO,KAET0zI,UAAU,EACVvnG,SAAU,CACRu8F,cAAe,CAAC,eAAgB,kBAGrB,MAAM,WAAoB,GACvC,aACE,OAAO11H,MAAMo8H,WAAW,CACtBn4E,GAAA,GACAC,GAAA,GACA4B,QAAS,CAACo/E,GAAW/D,GAAiB,MAI1C,kBACE,MAAMhI,EAAmBppI,KAAKwsI,sBAC9BpD,EAAiBwG,aAAa,CAC5BwF,kBAAmB,CACjBt0I,KAAM,EACNhC,KAAM,KACNgnH,KAAM9lH,KAAKq1I,oBACX3lD,YAAY,EACZtqB,SAAU,eAEZkwE,mBAAoB,CAClBx0I,KAAM,EACN4uF,YAAY,EACZtqB,SAAU,gBAEZmwE,mBAAoB,CAClBz0I,KAAMd,KAAKy0B,MAAMo2G,YAAYrqI,OAC7B1B,KAAM,KACNiC,YAAY,EACZ2uF,YAAY,EACZtqB,SAAU,eACVtC,aAAcoxE,IAEhBsB,mBAAoB,CAClB10I,KAAMd,KAAKy0B,MAAMo2G,YAAYrqI,OAC7B1B,KAAM,KACNiC,YAAY,EACZ2uF,YAAY,EACZtqB,SAAU,eACVtC,aAAcoxE,IAEhBuB,qBAAsB,CACpB30I,KAAM,EACNskE,SAAU,eACVsqB,YAAY,KAKlB,aAAY,MACVj7D,EAAK,SACL2mE,EAAQ,YACRkxC,IAEAr8H,MAAMo+H,YAAY,CAChB55G,QACA2mE,WACAkxC,gBAEF,MAAMoJ,EAAmBpJ,EAAYrJ,kBAErC,GAAIyS,EAAkB,CACpB,IAAIC,EAEJ,MAAM,GACJz6I,GACE8E,KAAKmrB,QACkC,QAA1CwqH,EAAoB31I,KAAKoc,MAAMgzG,aAAyC,IAAtBumB,GAAwCA,EAAkBzwG,SAC7GllC,KAAKoc,MAAMgzG,MAAQpvH,KAAK41I,UAAU16I,GAClC8E,KAAKwsI,sBAAsBx4D,iBAGzB0hE,GAAoBjhH,EAAM0/G,iBAAmB/4C,EAAS+4C,gBAAkB1/G,EAAMk/G,WAAav4C,EAASu4C,WAAal/G,EAAMkgH,UAAYlgH,EAAMqgH,YAAc15C,EAASu5C,UAAYv5C,EAAS05C,WACvL90I,KAAK61I,gBAAgBphH,GAIzB,YAAY0/G,EAAgBR,EAAUmC,GACpC,MAAM3b,EAAW,IAAI,GAAe,CAClCpyB,OAAQ,EACR/9E,OAAQ8rH,EAAe,EAAI,EAC3BnC,WACAD,QAASS,IAEX,IAAI4B,EAAqB,EAEzB,GAAIpC,EACF,IAAK,IAAI7rI,EAAI,EAAGA,EAAIqsI,EAAgBrsI,IAAK,CACvC,MAAMtB,EAAImtI,EAAS7rI,GACbs+C,EAAI/jD,KAAK2E,KAAKR,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAC3CuvI,GAAsB3vF,EAAI+tF,OAG5B4B,EAAqB,EAMvB,OAHA/1I,KAAKg2I,SAAS,CACZC,aAAc5zI,KAAKqE,IAAIrE,KAAKwP,GAAKsiI,GAAkB4B,IAE9C5b,EAGT,UAAUj/H,GACR,OAAO,IAAI,GAAMA,EAAI,IAAK8E,KAAKqsI,aAC7BlwG,GAAIn8B,KAAKy0B,MAAM0H,GACfgpC,aAAa,IAIjB,iBAAgB,eACdgvE,EAAc,SACdR,EAAQ,SACRgB,EAAQ,QACRG,IAEA,MAAM3a,EAAWn6H,KAAKk2I,YAAY/B,EAAgBR,EAAUgB,GAAYG,GACxE90I,KAAKg2I,SAAS,CACZG,gBAAiBhc,EAAS1L,WAAWmL,SAAS38H,MAAMuD,OAAS,EAC7D41I,qBAAsBjc,EAASC,QAAQn9H,MAAMuD,SAE/CR,KAAKoc,MAAMgzG,MAAMt0E,SAAS,CACxBq/E,aAIJ,MAAK,SACH9lE,IAEA,MAAM,eACJkgF,EAAc,eACdC,EAAc,mBACdC,EAAkB,mBAClBC,EAAkB,YAClBJ,EAAW,eACXD,EAAc,SACdM,EAAQ,OACRE,EAAM,QACNC,EAAO,UACPF,EAAS,OACT3zI,EAAM,SACNmzI,EAAQ,OACRrsC,EAAM,MACNjhG,GACE9G,KAAKy0B,OACH,MACJ26F,EAAK,gBACL+mB,EAAe,qBACfC,EAAoB,aACpBH,GACEj2I,KAAKoc,MACTgzG,EAAMpxC,YAAY3pB,GAAU2pB,YAAY,CACtC+pB,SACAjhG,MAAOA,EAAQ,IAAMzE,KAAKwP,GAC1B5Q,SACA0zI,WACAP,WACAC,iBACA4B,eACA3B,YAAarjF,GAAKqjF,GAClB+B,WAAYplF,GAAKsjF,GACjB+B,WAAY9B,EACZ+B,eAAgB9B,EAChB+B,eAAgB9B,IAGdC,GAAYC,IACdxlB,EAAMt0E,SAAS,CACbqjC,WAAW,IAEbixC,EAAMoO,eAAe4Y,GAAsBK,YAAY,GAAGz4D,YAAY,CACpE04D,UAAU,IACT1a,QAGD6Y,IACFzlB,EAAMt0E,SAAS,CACbqjC,WAAW,IAEbixC,EAAMoO,eAAe2Y,GAAiBM,YAAY,GAAGz4D,YAAY,CAC/D04D,UAAU,IACT1a,SAGA2Y,GAAYG,IACf1lB,EAAMt0E,SAAS,CACbqjC,WAAW,IAEbixC,EAAMoO,eAAiC,EAAlB2Y,EAAsB,GAAGM,YAAY,GAAGz4D,YAAY,CACvE04D,UAAU,IACT1a,SAKT,GAAYkP,UAAY,cACxB,GAAY7mB,aAAe,GCzQpB,MAAMsyB,GAAoB,CAAC,CAAC,IAAK,IAAK,KAAM,CAAC,IAAK,IAAK,KAAM,CAAC,IAAK,IAAK,IAAK,CAAC,IAAK,IAAK,IAAK,CAAC,IAAK,GAAI,IAAK,CAAC,IAAK,EAAG,KCA5H,IAAIC,GAAUv0I,KAAKwP,GAAK,EACpBglI,GAAS,CAAC,EAAGD,GAAS,EAAIA,GAAS,EAAIA,GAAS,EAAIA,GAAS,EAAIA,IAErE,SAASE,GAAO1wF,GACd,OAAOA,EAAE,GAGX,SAAS2wF,GAAO3wF,GACd,OAAOA,EAAE,GAGI,kBACb,IAMI3/C,EACA0yB,EACAC,EARAzrB,EAAK,EACLE,EAAK,EACLD,EAAK,EACLE,EAAK,EACL1I,EAAI0xI,GACJzxI,EAAI0xI,GAKR,SAASC,EAAOlE,GACd,IAA8BhrI,EAA1BmvI,EAAW,GAAIC,EAAO,GAAO32I,EAAIuyI,EAAOtyI,OAE5C,IAAKsH,EAAI,EAAGA,EAAIvH,IAAKuH,EACnB,IAAIk5D,MAAMm2E,GAAM/xI,EAAE5K,KAAK,KAAM48I,EAAQtE,EAAOhrI,GAAIA,EAAGgrI,MAC5C9xE,MAAMq2E,GAAMhyI,EAAE7K,KAAK,KAAM48I,EAAOtvI,EAAGgrI,IAD1C,CAGA,IAAIsE,EACAD,EACAE,EACAC,EAAKj1I,KAAKiX,MAAM+9H,GAAUj+G,GAC1Bm+G,EAAKl1I,KAAKiX,MAAM69H,EAAKA,EAAKh+G,GAAW,EAALm+G,GAAU,GAC1CE,EAAMH,EAAKC,EAEf,GAAoB,EAAhBj1I,KAAKqM,IAAI8oI,GAAW,EAAG,CACzB,IAAIC,EAAMN,EAAKI,EACXG,EAAMH,GAAMJ,EAAKI,GAAM,EAAI,GAAK,EAChCI,EAAML,GAAMD,EAAKC,GAAM,EAAI,GAC3BM,EAAMT,EAAKO,EACXG,EAAMR,EAAKM,EACXF,EAAMA,EAAMD,EAAMA,EAAMI,EAAMA,EAAMC,EAAMA,IAAKN,EAAKG,GAAY,EAALJ,EAAS,GAAK,GAAK,EAAGA,EAAKK,GAG5F,IAAIx7G,EAAKo7G,EAAK,IAAMD,EAAIQ,EAAMb,EAAS96G,GACnC27G,EAAKA,EAAI70I,KAAKm0I,IAEhBF,EAAKj0I,KAAK60I,EAAMb,EAAS96G,GAAM,CAACi7G,IAChCU,EAAI1yI,GAAKmyI,GAAW,EAALD,GAAU,GAAKn+G,EAC9B2+G,EAAIzyI,EAAIiyI,EAAKl+G,GAIjB,OAAO89G,EAGT,SAASa,EAAQhwC,GACf,IAAIp6F,EAAK,EAAGE,EAAK,EACjB,OAAOgpI,GAAO78H,KAAI,SAASlT,GACzB,IAAI8G,EAAKvL,KAAKsE,IAAIG,GAASihG,EACvBj6F,GAAMzL,KAAKqE,IAAII,GAASihG,EACxB5uE,EAAKvrB,EAAKD,EACVyrB,EAAKtrB,EAAKD,EAEd,OADAF,EAAKC,EAAIC,EAAKC,EACP,CAACqrB,EAAIC,MA6ChB,OAzCA49G,EAAOe,QAAU,SAAShwC,GACxB,MAAO,IAAMgwC,EAAkB,MAAVhwC,EAAiBthG,GAAKshG,GAAQ1mG,KAAK,KAAO,KAGjE21I,EAAOgB,QAAU,WAIf,IAHA,IAAIA,EAAU,GACVlzH,EAAIziB,KAAKiX,MAAMzL,EAAKurB,GACpBtxB,EAAIzF,KAAKiX,MAAM3L,EAAKwrB,GACf9zB,EAAIyf,EAAIsU,EAAI/zB,EAAIyI,EAAKrH,EAAGpB,GAAK+zB,IAAMtU,EAC1C,IAAK,IAAI1f,EAAI0C,EAAIqxB,GAAU,EAAJrU,GAASqU,EAAK,EAAG/zB,EAAIwI,EAAKurB,EAAK,EAAG/zB,GAAK+zB,EAC5D6+G,EAAQ/0I,KAAK,CAACmC,EAAGC,IAGrB,OAAO2yI,GAGThB,EAAOiB,KAAO,WACZ,IAAIC,EAAWH,EAAQtxI,GAAGpM,MAAM,EAAG,GAAGgH,KAAK,KAC3C,OAAO21I,EAAOgB,UAAUh+H,KAAI,SAASxT,GAAK,MAAO,IAAMA,EAAI,IAAM0xI,KAAa72I,KAAK,KAGrF21I,EAAO5xI,EAAI,SAASsnF,GAClB,OAAOxqF,UAAU1B,QAAU4E,EAAIsnF,EAAGsqD,GAAU5xI,GAG9C4xI,EAAO3xI,EAAI,SAASqnF,GAClB,OAAOxqF,UAAU1B,QAAU6E,EAAIqnF,EAAGsqD,GAAU3xI,GAG9C2xI,EAAOjvC,OAAS,SAASrb,GACvB,OAAOxqF,UAAU1B,QAAUiG,GAAKimF,EAAGvzD,EAAS,EAAJ1yB,EAAQpE,KAAKsE,IAAIiwI,IAAUx9G,EAAS,IAAJ3yB,EAASuwI,GAAUvwI,GAG7FuwI,EAAOl2I,KAAO,SAAS4rF,GACrB,OAAOxqF,UAAU1B,QAAUmN,EAAKE,EAAK,EAAGD,GAAM8+E,EAAE,GAAI5+E,GAAM4+E,EAAE,GAAIsqD,GAAU,CAACppI,EAAKD,EAAIG,EAAKD,IAG3FmpI,EAAOjqD,OAAS,SAASL,GACvB,OAAOxqF,UAAU1B,QAAUmN,GAAM++E,EAAE,GAAG,GAAI7+E,GAAM6+E,EAAE,GAAG,GAAI9+E,GAAM8+E,EAAE,GAAG,GAAI5+E,GAAM4+E,EAAE,GAAG,GAAIsqD,GAAU,CAAC,CAACrpI,EAAIE,GAAK,CAACD,EAAIE,KAG5GkpI,EAAOjvC,OAAO,IC5GhB,SAASowC,GAAc1jH,EAAO2jH,GACnC,MAAM,KACJv3G,EAAI,OACJknE,GACEtzE,GACE,SACJpO,EAAQ,WACRooG,GACE2pB,EACEpqF,EAAentB,EAAKrgC,OAAS63I,GAAgBx3G,EAAMu3G,GAAqB,KACxEE,EAAeC,GAAkBxwC,EAAQ1hF,EAAU2nC,GACnDwqF,EAAe,IACf,SACJ7wB,EAAQ,WACRC,GACEJ,GAAe3mF,GACb2/D,EAAYiuB,EAAWjuB,UAAUvjG,OACjC,KACJ6D,GACE2tH,EAAWjuB,UAAUkkB,cAEzB,IAAK,MAAM7hF,KAAU8kF,EAAU,CAC7BC,EAAWzlH,QACX,MAAMs2I,EAAW7wB,EAAWzlH,MAAQrB,EAC9B6tD,EAAW,CAAC6xC,EAAUi4C,GAAWj4C,EAAUi4C,EAAW,IACtDC,EAAgBl+H,OAAOC,SAASk0C,EAAS,KAAOn0C,OAAOC,SAASk0C,EAAS,IAE3E+pF,EACFF,EAAav1I,KAAK,CAChB01I,YAAatyH,EAAS6rC,YAAYvD,GAClC3iC,OAAQ6W,EACR1gC,MAAOylH,EAAWzlH,QAGpB,EAAI2pB,KAAK,iCAAT,GAIJ,MAAM8sH,EAAY5B,KAASjvC,OAAOuwC,GAAclzI,EAAEghD,GAAKA,EAAEuyF,YAAY,IAAItzI,EAAE+gD,GAAKA,EAAEuyF,YAAY,IACxFE,EAAcD,EAAUJ,GAC9B,MAAO,CACLM,SAAUD,EAAY7+H,IAAI,CAAC++H,EAAK52I,KAAU,CACxCwsD,SAAUtoC,EAAS8rC,cAAc,CAAC4mF,EAAI3zI,EAAG2zI,EAAI1zI,IAC7CytI,OAAQiG,EACR52I,WAEFm2I,gBAGG,SAASD,GAAgBx3G,EAAMu3G,GACpC,MAAM,WACJ3pB,GACE2pB,EACE53C,EAAYiuB,EAAWjuB,UAAUvjG,OACjC,KACJ6D,GACE2tH,EAAWjuB,UAAUkkB,cACzB,IAII58G,EAJAkxI,EAAO7rI,IACP8rI,EAAO9rI,IACP+rI,GAAQ/rI,IACRgsI,GAAQhsI,IAGZ,IAAKrF,EAAI,EAAGA,EAAIhH,EAAO+/B,EAAKrgC,OAAQsH,GAAKhH,EAAM,CAC7C,MAAMsE,EAAIo7F,EAAU14F,GACdzC,EAAIm7F,EAAU14F,EAAI,GAClB4wI,EAAgBl+H,OAAOC,SAASrV,IAAMoV,OAAOC,SAASpV,GAExDqzI,IACFM,EAAO32I,KAAKgF,IAAIjC,EAAG4zI,GACnBE,EAAO72I,KAAKC,IAAI8C,EAAG8zI,GACnBD,EAAO52I,KAAKgF,IAAIhC,EAAG4zI,GACnBE,EAAO92I,KAAKC,IAAI+C,EAAG8zI,IAIvB,MAAO,CAACH,EAAMC,EAAMC,EAAMC,GAAM7gF,MAAM99C,OAAOC,UAAY,EAAEu+H,EAAOE,GAAQ,GAAID,EAAOE,GAAQ,GAAK,KAE7F,SAASZ,GAAkBxwC,EAAQ1hF,EAAU5Y,GAClD,MAAM,cACJ+8C,GACEnkC,EAAS4jC,kBAAkBx8C,GAC/B,OAAOs6F,EAASv9C,EAAc,GCnFzB,SAASp4C,GAASgnI,EAAQhxB,EAAOixB,GACtC,MAAMlnI,EAAQknI,EAMd,OAJAlnI,EAAMinI,OAAS,IAAMA,EAErBjnI,EAAMi2G,MAAQ,IAAMA,EAEbj2G,EAEF,SAASmnI,GAAiBF,EAAQhxB,GACvC,MAAMixB,EAAgBp8I,GAASs8I,GAAcH,EAAQhxB,EAAOnrH,GAE5D,OAAOmV,GAASgnI,EAAQhxB,EAAOixB,GAE1B,SAASG,GAAeJ,EAAQhxB,GACrC,MAAMixB,EAAgBp8I,GAASw8I,GAAYL,EAAQhxB,EAAOnrH,GAE1D,OAAOmV,GAASgnI,EAAQhxB,EAAOixB,GAE1B,SAASK,GAAiBN,EAAQhxB,GACvC,MAAMuxB,EAAeP,EAAOprH,KAAK4rH,IACjC,IAAI9xI,EAAI,EACR,MAAMvH,EAAI8B,KAAKC,IAAI,EAAG8lH,EAAM5nH,QACtBq5I,EAAa,IAAIx5I,MAAME,EAAI,GAEjC,QAASuH,EAAIvH,EACXs5I,EAAW/xI,EAAI,GAAK62B,GAAUg7G,EAAc7xI,EAAIvH,GAGlD,MAAM84I,EAAgBp8I,GAAS68I,GAAgBD,EAAYzxB,EAAOnrH,GAIlE,OAFAo8I,EAAcQ,WAAa,IAAMA,EAE1BznI,GAASgnI,EAAQhxB,EAAOixB,GAGjC,SAASO,GAAUn1I,EAAGC,GACpB,OAAOD,EAAIC,EAGb,SAASi6B,GAAUy6G,EAAQW,GACzB,MAAMC,EAAeZ,EAAO54I,OAE5B,GAAIu5I,GAAY,GAAKC,EAAe,EAClC,OAAOZ,EAAO,GAGhB,GAAIW,GAAY,EACd,OAAOX,EAAOY,EAAe,GAG/B,MAAMC,GAAkBD,EAAe,GAAKD,EACtCG,EAAW73I,KAAK6lC,MAAM+xG,GACtBz0B,EAAM4zB,EAAOc,GACb30B,EAAO6zB,EAAOc,EAAW,GAC/B,OAAO10B,GAAOD,EAAOC,IAAQy0B,EAAiBC,GAGhD,SAASC,GAAY11I,EAAGW,GACtB,IAAIg1I,EAAK,EACLC,EAAK51I,EAAEjE,OAEX,MAAO45I,EAAKC,EAAI,CACd,MAAMC,EAAMF,EAAKC,IAAO,EAEpBT,GAAUn1I,EAAE61I,GAAMl1I,GAAK,EACzBi1I,EAAKC,EAELF,EAAKE,EAAM,EAIf,OAAOF,EAGT,SAASN,GAAgBD,EAAYzxB,EAAOnrH,GAC1C,OAAOmrH,EAAM+xB,GAAYN,EAAY58I,IAGvC,SAASs9I,GAAanB,EAAQoB,EAAWpyB,EAAOnrH,GAC9C,MAAMd,EAAM,GAAG0L,OAAO5K,GACtB,IAAImpD,EAAIo0F,EAAUv5H,IAAI9kB,GAOtB,YALUuD,IAAN0mD,IACFA,EAAIgzF,EAAOn2I,KAAKhG,GAChBu9I,EAAU16H,IAAI3jB,EAAKiqD,IAGdgiE,GAAOhiE,EAAI,GAAKgiE,EAAM5nH,QAGxB,SAASi6I,GAAgBrB,EAAQhxB,GACtC,MAAMoyB,EAAY,IAAIj2G,IAChBm2G,EAAe,GAErB,IAAK,MAAMt0F,KAAKgzF,EAAQ,CACtB,MAAMj9I,EAAM,GAAG0L,OAAOu+C,GAEjBo0F,EAAU92G,IAAIvnC,IACjBq+I,EAAU16H,IAAI3jB,EAAKu+I,EAAaz3I,KAAKmjD,IAIzC,MAAMizF,EAAgBp8I,GAASs9I,GAAaG,EAAcF,EAAWpyB,EAAOnrH,GAE5E,OAAOmV,GAASgnI,EAAQhxB,EAAOixB,GAE1B,SAASE,GAAcH,EAAQhxB,EAAOnrH,GAC3C,MAAM09I,EAAcvB,EAAO,GAAKA,EAAO,GAEvC,GAAIuB,GAAe,EAEjB,OADA,EAAI7uH,KAAK,oDAAT,GACOs8F,EAAM,GAGf,MAAMwyB,EAAOD,EAAcvyB,EAAM5nH,OAC3Bq6I,EAAMx4I,KAAK6lC,OAAOjrC,EAAQm8I,EAAO,IAAMwB,GACvCE,EAAWz4I,KAAKC,IAAID,KAAKgF,IAAIwzI,EAAKzyB,EAAM5nH,OAAS,GAAI,GAC3D,OAAO4nH,EAAM0yB,GAER,SAASrB,GAAYL,EAAQhxB,EAAOnrH,GACzC,OAAQA,EAAQm8I,EAAO,KAAOA,EAAO,GAAKA,EAAO,KAAOhxB,EAAM,GAAKA,EAAM,IAAMA,EAAM,GAGvF,SAAS2yB,GAAmB30F,GAC1B,YAAa1mD,IAAN0mD,GAAyB,OAANA,EAGrB,SAAS40F,GAAOj/H,GACrB,MAAMkS,EAAU,GAMhB,OALAlS,EAAO7f,QAAQ0O,KACRqjB,EAAQolB,SAASzoC,IAAMmwI,GAAmBnwI,IAC7CqjB,EAAQhrB,KAAK2H,KAGVqjB,EAGT,SAASgtH,GAAgBp6G,EAAMi2F,GAC7B,MAAM/6G,EAAkC,oBAAlB+6G,EAA+Bj2F,EAAK7mB,IAAI88G,GAAiBj2F,EAC/E,OAAO9kB,EAAOsc,OAAO0iH,IAOhB,SAASG,GAAkBr6G,EAAMi2F,GACtC,OAAOmkB,GAAgBp6G,EAAMi2F,GAExB,SAASqkB,GAAiBt6G,EAAMi2F,GACrC,OAAOkkB,GAAOC,GAAgBp6G,EAAMi2F,IAkB/B,SAAS58G,GAAMjd,EAAOoK,EAAK/E,GAChC,OAAOD,KAAKC,IAAI+E,EAAKhF,KAAKgF,IAAI/E,EAAKrF,IAE9B,SAASm+I,GAA4BC,GAC1C,OAAQA,GACN,IAAK,WACH,OAAO/B,GAET,IAAK,SACH,OAAOE,GAET,IAAK,WACH,OAAOE,GAET,IAAK,UACH,OAAOe,GAET,QACE,OAAOnB,IC5Lb,MAAMgC,GAAkBxI,GAAUA,EAAOtyI,OAGnC+6I,GAAmB,cAEnBC,GAAmB1D,GAAOA,EAAIhF,OAE9B2I,GAAkB3D,GAAOA,EAAI31I,MAE7B,GAAY,CAACsC,EAAGC,IAAMD,EAAIC,GAAK,EAAID,EAAIC,EAAI,EAAID,GAAKC,EAAI,EAAIigB,IAE5D,GAAe,CACnB2D,SAAUgzH,GACVI,UAAWF,GACXG,SAAUF,GACVG,WAAY,MAEC,MAAM,GACnB,YAAY1E,EAAO,GAAIziH,EAAQ,IAC7Bz0B,KAAK67I,eAAiB77I,KAAK87I,kBAAkB5E,EAAMziH,GAEnDz0B,KAAK+7I,sBAEL/7I,KAAKg8I,OAASh8I,KAAKi8I,YAGrB,kBAAkB/E,EAAMziH,GACtB,MAAM,SACJnM,EAAWgzH,GAAe,UAC1BI,EAAYF,GAAgB,SAC5BG,EAAWF,GAAe,WAC1BG,GACEnnH,EACEynH,EAAkC,oBAAfN,EACnBO,EAAWjF,EAAK12I,OAChBq7I,EAAiB,GACvB,IAAI15I,EAAQ,EAEZ,IAAK,IAAIi6I,EAAW,EAAGA,EAAWD,EAAUC,IAAY,CACtD,MAAMtE,EAAMZ,EAAKkF,GACXtJ,EAAS4I,EAAU5D,GACnBhwI,EAAI6zI,EAAS7D,GACbuE,EAAiBH,EAAYpJ,EAAOz6G,OAAOujH,GAAc9I,EAC/DgF,EAAIuE,eAAiBH,EAAYG,EAAiB,KAClD,MAAMp/I,EAAQo/I,EAAe77I,OAAS8nB,EAAS+zH,GAAkB,KAEnD,OAAVp/I,QAA4ByC,IAAVzC,IACpB4+I,EAAe15I,GAAS,CACtB2F,EAAG0S,OAAOC,SAAS3S,GAAKA,EAAIs0I,EAC5Bn/I,QACAq/I,OAAQD,EAAe77I,QAEzB2B,KAIJ,OAAO05I,EAGT,mBAAmBU,GACjB,MAAMjxI,EAAMtL,KAAKw8I,WAAWh8I,OAE5B,GAAI8K,EAAM,EACR,MAAO,CAAC,EAAG,GAGb,MAAOmxI,EAAOC,GAASH,EAAgBviI,IAAIzZ,GAAK2Z,GAAM3Z,EAAG,EAAG,MACtDo8I,EAAWt6I,KAAKojD,KAAKg3F,EAAQ,KAAOnxI,EAAM,IAC1CsxI,EAAWv6I,KAAK6lC,MAAMw0G,EAAQ,KAAOpxI,EAAM,IACjD,MAAO,CAACqxI,EAAUC,GAGpB,YACE,MAAMZ,EAAS,GAEf,IAAK,MAAMlE,KAAO93I,KAAK67I,eACrBG,EAAOlE,EAAIhwI,GAAKgwI,EAGlB,OAAOkE,EAGT,sBACE,IAAI/2F,EAAW,EACX43F,EAAW,EACXC,EAAWvB,GACXr9C,EAAa,EAEjB,IAAK,MAAM94F,KAAKpF,KAAK67I,eACnB52F,EAAWA,EAAW7/C,EAAEk3I,OAASr3F,EAAW7/C,EAAEk3I,OAC9CO,EAAWA,EAAWz3I,EAAEnI,MAAQ4/I,EAAWz3I,EAAEnI,MAC7C6/I,EAAWA,EAAW13I,EAAEnI,MAAQ6/I,EAAW13I,EAAEnI,MAC7CihG,GAAc94F,EAAEk3I,OAGlBt8I,KAAKilD,SAAWA,EAChBjlD,KAAK68I,SAAWA,EAChB78I,KAAK88I,SAAWA,EAChB98I,KAAKk+F,WAAaA,EAGpB,cAAcq+C,GAKZ,GAJKv8I,KAAKw8I,aACRx8I,KAAKw8I,WAAax8I,KAAK67I,eAAe7tH,KAAK,CAACvpB,EAAGC,IAAM,GAAUD,EAAExH,MAAOyH,EAAEzH,UAGvE+C,KAAKw8I,WAAWh8I,OACnB,MAAO,GAGT,IAAIm8I,EAAW,EACXC,EAAW58I,KAAKw8I,WAAWh8I,OAAS,EAExC,GAAIH,MAAM6P,QAAQqsI,GAAkB,CAClC,MAAMQ,EAAW/8I,KAAKg9I,mBAAmBT,GAEzCI,EAAWI,EAAS,GACpBH,EAAWG,EAAS,GAGtB,MAAO,CAAC/8I,KAAKw8I,WAAWG,GAAU1/I,MAAO+C,KAAKw8I,WAAWI,GAAU3/I,OAGrE,sBAAsBkV,GAAQsqI,EAAQ,EAAGC,EAAQ,KAAO,IAKtD,GAJK18I,KAAKw8I,aACRx8I,KAAKw8I,WAAax8I,KAAK67I,eAAe7tH,KAAK,CAACvpB,EAAGC,IAAM,GAAUD,EAAExH,MAAOyH,EAAEzH,UAGvE+C,KAAKw8I,WAAWh8I,OACnB,MAAO,GAGT,MAAMy8I,EAAYj9I,KAAKg9I,mBAAmB,CAACP,EAAOC,IAElD,OAAO18I,KAAKk9I,gBAAgB/qI,EAAO8qI,GAGrC,gBAAgB5B,GAAYsB,EAAUC,IACpC,MAAM1F,EAAOl3I,KAAKw8I,WAElB,OAAQnB,GACN,IAAK,WACL,IAAK,SACH,MAAO,CAACnE,EAAKyF,GAAU1/I,MAAOi6I,EAAK0F,GAAU3/I,OAE/C,IAAK,WACH,OAAOi+I,GAAkBhE,EAAK78I,MAAMsiJ,EAAUC,EAAW,GAAIx2F,GAAKA,EAAEnpD,OAEtE,IAAK,UACH,OAAOk+I,GAAiBjE,EAAM9wF,GAAKA,EAAEnpD,OAEvC,QACE,MAAO,CAACi6I,EAAKyF,GAAU1/I,MAAOi6I,EAAK0F,GAAU3/I,SCxJ9C,MAAMkgJ,GAAwB,CACnCC,IAAK,EACLC,KAAM,EACNC,IAAK,EACLC,IAAK,GAGP,SAASC,GAAWC,EAAM3b,GACxB,OAAO2b,EAAO3b,EAGhB,SAAS4b,GAAWD,EAAM3b,GACxB,OAAOA,EAAM2b,EAAO3b,EAAM2b,EAG5B,SAASE,GAAWF,EAAM3b,GACxB,OAAOA,EAAM2b,EAAO3b,EAAM2b,EAGrB,SAASG,GAAQC,EAAKz4E,GAC3B,GAAI5qD,OAAOC,SAAS2qD,GAClB,OAAOy4E,EAAIr9I,OAAS4kE,EAAW,KAGjC,MAAM04E,EAAWD,EAAI7jI,IAAIorD,GAAU/sC,OAAO7d,OAAOC,UACjD,OAAOqjI,EAASt9I,OAASs9I,EAAShgG,OAAO0/F,GAAY,GAAKM,EAASt9I,OAAS,KAEvE,SAASu9I,GAAOF,EAAKz4E,GAC1B,GAAI5qD,OAAOC,SAAS2qD,GAClB,OAAOy4E,EAAIr9I,OAASq9I,EAAIr9I,OAAS4kE,EAAW,KAG9C,MAAM04E,EAAWD,EAAI7jI,IAAIorD,GAAU/sC,OAAO7d,OAAOC,UACjD,OAAOqjI,EAASt9I,OAASs9I,EAAShgG,OAAO0/F,GAAY,GAAK,KAErD,SAASQ,GAAOH,EAAKz4E,GAC1B,GAAI5qD,OAAOC,SAAS2qD,GAClB,OAAOy4E,EAAIr9I,OAAS4kE,EAAW,KAGjC,MAAM04E,EAAWD,EAAI7jI,IAAIorD,GAAU/sC,OAAO7d,OAAOC,UACjD,OAAOqjI,EAASt9I,OAASs9I,EAAShgG,OAAO4/F,IAAavwI,KAAY,KAE7D,SAAS8wI,GAAOJ,EAAKz4E,GAC1B,GAAI5qD,OAAOC,SAAS2qD,GAClB,OAAOy4E,EAAIr9I,OAAS4kE,EAAW,KAGjC,MAAM04E,EAAWD,EAAI7jI,IAAIorD,GAAU/sC,OAAO7d,OAAOC,UACjD,OAAOqjI,EAASt9I,OAASs9I,EAAShgG,OAAO6/F,GAAYxwI,KAAY,KAE5D,SAAS+wI,GAAaC,EAAa/4E,EAAUj6C,GAClD,MAAMizH,EAAKjB,GAAsBgB,IAAgBhB,GAAsBC,IAGvE,OAFAh4E,EAAWi5E,GAAaj5E,EAAUj6C,GAE1BizH,GACN,KAAKjB,GAAsBG,IACzB,OAAOO,GAAOI,GAAOJ,EAAKz4E,GAE5B,KAAK+3E,GAAsBC,IACzB,OAAOS,GAAOE,GAAOF,EAAKz4E,GAE5B,KAAK+3E,GAAsBE,KACzB,OAAOQ,GAAOD,GAAQC,EAAKz4E,GAE7B,KAAK+3E,GAAsBI,IACzB,OAAOM,GAAOG,GAAOH,EAAKz4E,GAE5B,QACE,OAAO,MAIb,SAASi5E,GAAaj5E,EAAUj6C,EAAU,IACxC,OAAI3Q,OAAOC,SAAS2qD,GACXA,EAGFk5E,IACLnzH,EAAQhpB,MAAQm8I,EAAGn8I,MACZijE,EAASk5E,EAAGtyH,OAAQb,IAIxB,SAASozH,GAAiBj2H,EAAU6C,EAAU,IACnD,OAAO0yH,IACL1yH,EAAQivG,QAAUyjB,EAAI7jI,IAAIskI,GAAMA,EAAGn8I,OAC5BmmB,EAASu1H,EAAI7jI,IAAIskI,GAAMA,EAAGtyH,QAASb,ICnF9C,SAASqzH,MAET,MAAMC,GAAiB,CAAC,UAAW,YAAa,gBAC1CC,GAAoB,CAAC,CACzBviJ,IAAK,YACLipE,SAAU,eACVu5E,YAAa,aACbC,QAAS,CACPtd,SAAU,CACRrkI,MAAO,CACLoxB,KAAM,gBACNwwH,cAAe,iBAEjBC,OAAQ,CACNzwH,KAAM,iBACNwwH,cAAe,kBAEjBV,YAAa,CACX9vH,KAAM,oBAERutH,WAAY,CACVvtH,KAAM,cACNwwH,cAAe,iBAIrBE,UAAW,CACTzd,SAAU,CACR0d,gBAAiB,CACf3wH,KAAM,mBAER4wH,gBAAiB,CACf5wH,KAAM,mBAERgtH,UAAW,CACThtH,KAAM,oBAIZ6wH,aAAc,CACZ5d,SAAU,CACR8X,OAAQ,CACN/qH,KAAM,eAER+5F,MAAO,CACL/5F,KAAM,eAGV8wH,MAAO,CACL1qH,MAAO,qBAGX2qH,UAAW,CAAC,EAAG,EAAG,EAAG,IACpB,CACDjjJ,IAAK,YACLipE,SAAU,eACVu5E,YAAa,iBACbC,QAAS,CACPtd,SAAU,CACRrkI,MAAO,CACLoxB,KAAM,oBACNwwH,cAAe,qBAEjBC,OAAQ,CACNzwH,KAAM,qBACNwwH,cAAe,sBAEjBV,YAAa,CACX9vH,KAAM,wBAERutH,WAAY,CACVvtH,KAAM,cACNwwH,cAAe,iBAIrBE,UAAW,CACTzd,SAAU,CACR0d,gBAAiB,CACf3wH,KAAM,4BAER4wH,gBAAiB,CACf5wH,KAAM,4BAERgtH,UAAW,CACThtH,KAAM,wBAIZ6wH,aAAc,CACZ5d,SAAU,CACR8X,OAAQ,CACN/qH,KAAM,mBAER+5F,MAAO,CACL/5F,KAAM,mBAGV8wH,MAAO,CACL1qH,MAAO,yBAGX2qH,WAAY,IAGRC,GAAqB5qH,GAASA,EAAM6qH,SAE3B,MAAM,GACnB,YAAY3zG,GACV3rC,KAAKoc,MAAQ,CACXmjI,UAAW,GACXhgD,WAAY,IAEdv/F,KAAKssI,YAAc,GACnBtsI,KAAKw/I,kBAAoB,GACzBx/I,KAAKy/I,aAAe9zG,EAAK+zG,aAAeL,GACxCr/I,KAAK2/I,eAAiBh0G,EAAKi0G,cAE3B5/I,KAAK6/I,cAAcl0G,EAAK4zD,YAAcm/C,IAGxC,2BACE,OAAOA,GAGT,YAAY/yG,EAAMysG,GAChB,MAAM,SACJh9C,EAAQ,MACR3mE,EAAK,YACL63G,GACE3gG,EACJ3rC,KAAK8/I,oBAAoB1kD,EAAU3mE,EAAO63G,GAC1C,MAAMyT,EAAkB//I,KAAKggJ,qBAAqB5kD,EAAU3mE,EAAO63G,GACnE,IAAI2T,GAAmB,EAEvB,GAAI3T,EAAYxJ,aAAeid,EAC7B//I,KAAKkgJ,kBAAkBzrH,EAAO2jH,GAC9B6H,GAAmB,MACd,CACL,MAAME,EAAmBngJ,KAAKogJ,oBAAoBhlD,EAAU3mE,EAAO63G,IAAgB,GACnF6T,EAAiBjkJ,QAAQtC,GAAkB,oBAANA,GAAoBA,KACzDqmJ,GAAmB,EAMrB,OAHAjgJ,KAAKg2I,SAAS,CACZiK,qBAEKjgJ,KAAKoc,MAGd,SAASmvH,GACPvrI,KAAKoc,MAAQ,IAAKpc,KAAKoc,SAClBmvH,GAIP,kBAAkBpvI,EAAKovI,GACrBvrI,KAAKg2I,SAAS,CACZz2C,WAAY,IAAKv/F,KAAKoc,MAAMmjF,WAC1B,CAACpjG,GAAM,IAAK6D,KAAKoc,MAAMmjF,WAAWpjG,MAC7BovI,MAMX,gBAAgBtjI,EAAS,IACvB,OAAIA,EAAO6wI,SACF,CACLj4G,KAAM54B,EAAO6wI,YACV7wI,GAEIA,EAAOs3I,UACT,CACL1+G,KAAM54B,EAAOs3I,aACVt3I,GAIAA,EAGT,kBAAkBwsB,EAAO2jH,GACvB,MAAMiI,EAAargJ,KAAK2/I,eAAelrH,GAEjCxsB,EAASo4I,EAAW5rH,EAAO2jH,GACjCp4I,KAAKg2I,SAAS,CACZuJ,UAAWv/I,KAAKsgJ,gBAAgBr4I,KAElCjI,KAAKssI,YAAc,CACjBiT,WAAW,GAEbv/I,KAAKugJ,cAAc9rH,GAGrB,oBAAoB2mE,EAAU3mE,EAAO63G,GACnC,IAAK,MAAMnwI,KAAO6D,KAAKw/I,kBAAmB,CACxC,MAAM,MACJviJ,EAAK,OACL6hJ,EAAM,YACNX,GACEn+I,KAAKw/I,kBAAkBrjJ,GAAKyiJ,QAAQtd,SACxC,IAAIh5G,EAAWmM,EAAMx3B,EAAMoxB,MAC3B,MAAMmyH,EAAkBxgJ,KAAKygJ,wBAAwBzgJ,KAAKw/I,kBAAkBrjJ,GAAKyiJ,QAASxjD,EAAU3mE,EAAO63G,GAEvGkU,IAEAl4H,EADEA,EACSi2H,GAAiBj2H,EAAU,CACpCuY,KAAMpM,EAAMoM,OAGHq9G,GAAazpH,EAAM0pH,EAAY9vH,MAAOoG,EAAMqqH,EAAOzwH,MAAO,CACnEwS,KAAMpM,EAAMoM,QAKdvY,GACFtoB,KAAK0gJ,kBAAkBvkJ,EAAK,CAC1BmsB,cAMR,qBAAqB8yE,EAAU3mE,EAAO63G,GACpC,OAAOtsI,KAAKy/I,aAAarkD,KAAcp7F,KAAKy/I,aAAahrH,IAAUz0B,KAAK2/I,eAAevkD,KAAcp7F,KAAK2/I,eAAelrH,IAAU63G,EAAYtJ,wBAA0BsJ,EAAYtJ,sBAAsBvrG,KAAO60G,EAAYtJ,sBAAsBl2C,aAGtP,aAAayS,GACXv/F,KAAK6/I,cAActgD,GAGrB,cAAcA,EAAa,IACzBA,EAAWrjG,QAAQykJ,IACjB,MAAM,IACJxkJ,GACEwkJ,EACJ3gJ,KAAKw/I,kBAAkBrjJ,GAAO6D,KAAK4gJ,qBAAqBD,GACxD3gJ,KAAKoc,MAAMmjF,WAAWpjG,GAAO,CAC3BmsB,SAAU,KACV8wH,OAAQ,KACRoD,WAAY,KACZqE,UAAWrC,MAKjB,sBAAqB,IACnBriJ,EAAG,SACHipE,EAAQ,YACRu5E,EAAW,QACXC,EAAO,UACPG,EAAS,aACTG,EAAY,UACZE,IAEA,MAAO,CACLjjJ,MACAipE,WACAu5E,cACAC,QAAS,CACPkC,QAAS9gJ,KAAK+gJ,0BACXnC,GAELG,UAAW,CACT+B,QAAS9gJ,KAAKghJ,2BACXjC,GAELG,aAAc,CACZ4B,QAAS9gJ,KAAKihJ,qBACX/B,GAELgC,kBAAmBlhJ,KAAKmhJ,8BAA8BhlJ,EAAKijJ,IAI/D,wBAAwBgC,EAAehmD,EAAU3mE,EAAO63G,GACtD,OAAOtyI,OAAO+hB,OAAOqlI,EAAc9f,UAAUv/E,KAAKrhB,GAC5CA,EAAKm+G,cACAvS,EAAYxJ,aAAewJ,EAAYtJ,wBAA0BsJ,EAAYtJ,sBAAsBvrG,KAAO60G,EAAYtJ,sBAAsBtiG,EAAKm+G,gBAGnJzjD,EAAS16D,EAAKrS,QAAUoG,EAAMiM,EAAKrS,OAI9C,oBAAoB+sE,EAAU3mE,EAAO63G,GACnC,MAAMjM,EAAW,GAEjB,IAAK,MAAMlkI,KAAO6D,KAAKw/I,kBAAmB,CACxC,MAAM6B,EAAa5C,GAAe9wH,KAAKitH,GAAQ56I,KAAKygJ,wBAAwBzgJ,KAAKw/I,kBAAkBrjJ,GAAKy+I,GAAOx/C,EAAU3mE,EAAO63G,IAE5H+U,GACFhhB,EAASp9H,KAAKjD,KAAKw/I,kBAAkBrjJ,GAAKklJ,GAAYP,QAAQzkJ,KAAK2D,KAAMy0B,EAAOz0B,KAAKw/I,kBAAkBrjJ,KAI3G,OAAOkkI,EAAS7/H,OAAS6/H,EAAW,KAGtC,kBAAkB5rG,GAChB,MAAM6sH,EAAkB7sH,EAAM0rG,gBAAkB,GAE1CA,EAAiB,GAEvB,IAAK,MAAMhkI,KAAO6D,KAAKw/I,kBAAmB,CACxC,MAAM,SACJp6E,GACEplE,KAAKw/I,kBAAkBrjJ,GAC3BgkI,EAAe/6D,GAAY,GAC3Bq5E,GAAeviJ,QAAQ0+I,IACrB5gJ,OAAO+hB,OAAO/b,KAAKw/I,kBAAkBrjJ,GAAKy+I,GAAMtZ,UAAUplI,QAAQ,EAChEmyB,OACAwwH,oBAEA,GAAIA,EAAe,CACjB,MAAM0C,EAAWD,EAAgBzC,GAET,kBAAb0C,GAA0BlhJ,MAAM6P,QAAQqxI,QAE3B7hJ,IAAb6hJ,IACTphB,EAAe/6D,GAAU/2C,GAAQkzH,GAFjCvnJ,OAAO4wB,OAAOu1G,EAAe/6D,GAAWm8E,QAK1CphB,EAAe/6D,GAAU/2C,GAAQoG,EAAMpG,OAM/C,OAAO8xG,EAGT,cAAc1rG,GACZ,IAAK,MAAMt4B,KAAO6D,KAAKw/I,kBACrBx/I,KAAK+gJ,uBAAuBtsH,EAAOz0B,KAAKw/I,kBAAkBrjJ,IAI9D,uBAAuBs4B,EAAO+sH,GAC5B,MAAM,IACJrlJ,GACEqlJ,GACE,SACJl5H,GACEtoB,KAAKoc,MAAMmjF,WAAWpjG,GACpBqgJ,EAAa,IAAI,GAAUx8I,KAAKoc,MAAMmjI,UAAU1+G,MAAQ,GAAI,CAChEvY,WACAszH,WAAYnnH,EAAMgtH,cAEpBzhJ,KAAK0gJ,kBAAkBvkJ,EAAK,CAC1BqgJ,eAEFx8I,KAAKghJ,wBAAwBvsH,EAAO+sH,GAGtC,wBAAwB/sH,EAAO+sH,GAC7B,MAAM,UACJzC,EAAS,IACT5iJ,GACEqlJ,GAEFlgB,UAAU,gBACR0d,EAAe,gBACfC,EAAe,UACf5D,IAEA0D,EACE2C,EAAc1hJ,KAAKoc,MAAMmjF,WAAWpjG,GAAKqgJ,WAAWmF,sBAAsBltH,EAAM4mH,EAAUhtH,MAAO,CAACoG,EAAMuqH,EAAgB3wH,MAAOoG,EAAMwqH,EAAgB5wH,QAC3JruB,KAAK0gJ,kBAAkBvkJ,EAAK,CAC1BulJ,gBAEF1hJ,KAAKihJ,kBAAkBxsH,EAAO+sH,GAGhC,kBAAkB/sH,EAAO+sH,GACvB,MAAM,IACJrlJ,EAAG,aACH+iJ,EAAY,UACZH,GACEyC,GACE,OACJpI,EAAM,MACNhxB,GACE82B,EAAa5d,UACX,UACJ+Z,GACE0D,EAAUzd,UACR,MACJ6d,GACED,EACE0C,EAAiBntH,EAAM2zF,EAAM/5F,MAC7BwzH,EAAkBptH,EAAM2kH,EAAO/qH,OAASruB,KAAKoc,MAAMmjF,WAAWpjG,GAAKulJ,YACnEI,EAAmB1G,GAA4BC,GAAa5mH,EAAM4mH,EAAUhtH,OAC5EwyH,EAAYiB,EAAiBD,EAAiBD,GAE/B,kBAAVzC,GAAoD,oBAAvB1qH,EAAM0qH,EAAM1qH,QAClDA,EAAM0qH,EAAM1qH,OAAOosH,EAAUzH,UAG/Bp5I,KAAK0gJ,kBAAkBvkJ,EAAK,CAC1B0kJ,cAIJ,8BAA8B1kJ,EAAKijJ,GACjC,OAAO2C,IACL,MAAM,WACJvF,EAAU,UACVqE,GACE7gJ,KAAKoc,MAAMmjF,WAAWpjG,GACpB27I,EAAM0E,EAAWR,OAAO+F,EAAK5/I,OAEnC,GAAI21I,GAAsB,IAAfA,EAAIwE,OACb,OAAO8C,EAGT,MAAM4C,EAAKlK,GAAOA,EAAI76I,MAChBm8I,EAASyH,EAAUzH,SACnB6I,EAAkBD,GAAM5I,EAAO,IAAM4I,GAAM5I,EAAOA,EAAO54I,OAAS,GACxE,OAAOyhJ,EAAkBpB,EAAUmB,GAAM5C,GAI7C,qBAAqB3qH,GACnB,MAAM6wC,EAAY,GAElB,IAAK,MAAMnpE,KAAO6D,KAAKw/I,kBAAmB,CACxC,MAAM,SACJp6E,GACEplE,KAAKw/I,kBAAkBrjJ,GAC3BmpE,EAAUF,GAAYplE,KAAKmhJ,8BAA8B1sH,EAAOt4B,GAGlE,OAAOmpE,EAGT,gBAAe,KACbx7B,IAEA,MAAMo4G,EAAWp4G,EAAK28D,QAAU38D,EAAK3nC,OAAS,EAC9C,IAAI0gC,EAAS,KAEb,GAAIq/G,EAAU,CACZ,MAAMH,EAAO/hJ,KAAKoc,MAAMmjI,UAAU1+G,KAAKiJ,EAAK3nC,OACtCggJ,EAAU,GAEhB,IAAK,MAAMhmJ,KAAO6D,KAAKw/I,kBAAmB,CACxC,MAAM,YACJb,GACE3+I,KAAKw/I,kBAAkBrjJ,IACrB,WACJqgJ,GACEx8I,KAAKoc,MAAMmjF,WAAWpjG,GACpBc,EAAQu/I,EAAWR,OAAO+F,EAAK5/I,QAAUq6I,EAAWR,OAAO+F,EAAK5/I,OAAOlF,MAC7EklJ,EAAQxD,GAAe1hJ,EAGzB4lC,EAAS7oC,OAAO4wB,OAAOu3H,EAASJ,EAAM,CACpCjP,OAAQiP,EAAK1F,gBAAkB0F,EAAKjP,SAMxC,OAFAhpG,EAAK28D,OAASznG,QAAQ6jC,GACtBiH,EAAKjH,OAASA,EACPiH,EAGT,YAAYs4G,GACV,OAAKpiJ,KAAKw/I,kBAAkBh0H,eAAe42H,GAIpCpiJ,KAAKw/I,kBAAkB4C,GAAclB,kBAHnC1C,ICxdb,MAAM,GAAsB,8BACb,MAAM,WAAuB,GAC1C,kBACE,OAAO,EAGT,eACE,OAAOvuI,MAAM4yC,UAAY7iD,KAAKipF,eAAe3wB,MAAMqb,GAASA,EAAM9wB,UAGpE,eACE,OAAO7iD,KAAKqnI,eAAiBrnI,KAAKqnI,cAAcgC,WAAa,GAG/D,mBAEA,SAASkC,GACPt7H,MAAM+lI,SAASzK,GACfvrI,KAAKurF,iBAGP,gBAAe,KACbzhD,IAEA,MAAM,OACJjH,GACEiH,EACEu4G,EAAgBx/G,GAAUA,EAAOy/G,UAAYz/G,EAAOy/G,SAAS/0H,QAAUsV,EAAOy/G,SAAS/0H,OAAO4O,KAAOn8B,KAAKm8B,GAEhH,OAAKkmH,GAILv4G,EAAKjH,OAASA,EAAOy/G,SAASz/G,OAC9BiH,EAAK3nC,MAAQ0gC,EAAOy/G,SAASngJ,MACtB2nC,GALEA,EAQX,eACE,OAAO,KAGT,eAAe3e,GACb,OAAO,EAGT,qBAAqBgR,EAAI0E,GACvB,OAAOA,GAAQA,EAAKrgC,OAGtB,iBAAiB27B,EAAIomH,GACnB,MACEC,eAAgBC,GACdziJ,KAAKy0B,MACT,OAAOguH,GAAmBA,EAAgBtmH,IAAOsmH,EAAgBtmH,GAAIr9B,MAAQyjJ,EAG/E,eAAe76I,EAAKg7I,EAAcC,GAMhC,OALAj7I,EAAI46I,SAAW,CACb/0H,OAAQvtB,KACR6iC,OAAQ6/G,EACRvgJ,MAAOwgJ,GAEFj7I,EAGT,oBAAoB09D,GAClB,GAAwB,oBAAbA,EAAyB,CAClC,MAAMwiD,EAAa,CACjB/mF,KAAM7gC,KAAKy0B,MAAMoM,KACjBrlC,OAAQ,IAEV,MAAO,CAAC4J,EAAG0C,IACL1C,GAAKA,EAAEk9I,UACT16B,EAAWzlH,MAAQiD,EAAEk9I,SAASngJ,MACvBijE,EAAShgE,EAAEk9I,SAASz/G,OAAQ+kF,IAG9BxiD,EAAShgE,EAAG0C,GAIvB,OAAOs9D,EAGT,iBAAiBw9E,EAAgB,IAC/B,MAAM,QACJrY,EAAO,SACPjsC,EAAQ,QACRE,EAAO,WACPjiF,EAAU,iBACVuuH,EAAgB,uBAChBC,EAAsB,cACtBC,EAAa,eACbC,EAAc,iBACdvnD,EAAgB,iBAChBpxB,EAAgB,cAChBqsC,EAAa,eACbisC,EAAc,YACd93E,EAAW,WACXl3D,EAAU,MACVy4C,EACAmuG,eAAgBC,GACdziJ,KAAKy0B,MACHqwC,EAAW,CACfylE,UACAjsC,WACAE,UACAjiF,aACAuuH,mBACAC,yBACAC,gBACAC,iBACAvnD,mBACApxB,mBACAqsC,gBACAisC,iBACA93E,cACAl3D,aACAy4C,SAEIwuG,EAA0BJ,GAAmBA,EAAgBG,EAAczmH,IAC3E2mH,EAA6BD,GAA2BA,EAAwB1iB,eAChF4iB,EAAaH,EAAczmH,IAAM,WAEvC,GAAI0mH,EAAyB,CAC3B,MAAMhvF,EAAY7zD,KAAKmb,YAAY+oH,WAC7B8e,EAAoBJ,EAAc9jJ,KAAO8jJ,EAAc9jJ,KAAKolI,WAAa,GAE/E,IAAK,MAAM/nI,KAAO0mJ,EAAyB,CACzC,MAAMnvF,EAAWsvF,EAAkB7mJ,IAAQ03D,EAAU13D,GAEjDu3D,GAA8B,aAAlBA,EAAS50D,OACvB+jJ,EAAwB1mJ,GAAO6D,KAAKijJ,oBAAoBJ,EAAwB1mJ,MAKtFnC,OAAO4wB,OAAOk6C,EAAU89E,EAAeC,GACvC/9E,EAAS3oC,GAAK,GAAGt0B,OAAO7H,KAAKy0B,MAAM0H,GAAI,KAAKt0B,OAAOk7I,GACnDj+E,EAASq7D,eAAiB,CACxB1oG,IAAKz3B,KAAKy0B,MAAM0rG,eAAe1oG,OAC5BmrH,EAAcziB,kBACd2iB,GAGL,IAAK,MAAM/mJ,KAAaH,EAAY,CAClC,MAAMsnJ,EAAmBnnJ,EAAUonJ,iBAAiB3oJ,KAAKwF,KAAMjE,GAE3DmnJ,GACFlpJ,OAAO4wB,OAAOk6C,EAAUo+E,EAAkB,CACxC/iB,eAAgBnmI,OAAO4wB,OAAOk6C,EAASq7D,eAAgB+iB,EAAiB/iB,kBAK9E,OAAOr7D,EAGT,qBAAqBh7B,GACnB,IAAK,MAAM6pC,KAAS3zE,KAAKipF,eACvBtV,EAAM0zB,oBAAoBv9D,GAI9B,uBACE,OAAO,KAGT,gBACE,IAAI,UACFu/F,GACErpI,KAAKqnI,cACT,MAAM+b,GAAgB/Z,GAAarpI,KAAK+nF,cAEpCq7D,IACF/Z,EAAYrpI,KAAK4hH,eACjBynB,EAAY/7F,GAAQ+7F,EAAWrqI,SAC/BgB,KAAKqnI,cAAcgC,UAAYA,GAGjC,GAAM,GAAqBrpI,KAAMojJ,EAAc/Z,GAE/C,IAAK,MAAM11D,KAAS01D,EAClB11D,EAAMpmD,OAASvtB,MC3Ld,SAASqjJ,GAAY5uH,EAAO6uH,GACjC,MAAMC,EAAgB,GAEtB,IAAK,MAAMpnJ,KAAOs4B,EACX6uH,EAAWjwG,SAASl3C,KACvBonJ,EAAcpnJ,GAAOs4B,EAAMt4B,IAI/B,OAAOonJ,EDuLT,GAAerY,UAAY,iBE7LZ,MAAM,WAAyB,GAC5C,gBAAgB3rC,GACdtvF,MAAM89H,kBACN/tI,KAAKg2I,SAAS,CACZvT,YAAa4gB,GAAYrjJ,KAAKmb,YAAY+oH,WAAY3kC,EAAW1+D,KAAKpM,OACtE8qE,eAIJ,YAAY5zD,GACV17B,MAAMo+H,YAAY1iG,GAClB,MAAM,YACJ2gG,GACE3gG,EAEJ,GAAI2gG,EAAYrJ,kBAAmB,CACjC,MAAMmJ,EAAUpsI,KAAKqsI,WAAW,IAE5BD,GAAWA,EAAQ53E,UACrB43E,EAAQ53E,QAAQgvF,oBAAsB,GAGxCxjJ,KAAKyjJ,cAAcrX,GAGrBpsI,KAAKyuI,kBAAkB9iG,EAAKlX,OAG9B,iBAAiBusG,GACfhhI,KAAKg2I,SAAS,CACZhV,sBAIJ,gBACE,OAAOhhI,KAAKwsI,sBAAsB1gB,sBAGpC,oBACE,MAAM,SACJzlG,EAAQ,cACRsgE,EAAa,GACbzrF,GACE8E,KAAKmrB,QACHmwG,EAAiBthI,OAAO4wB,OAAO5wB,OAAOqK,OAAOrE,KAAKy0B,OAAQ,CAC9DpO,WACAsgE,gBACAiY,cAAe,EACf5gC,iBAAkBb,GAAiBjiE,KAErC,OAAOogI,EAGT,cAAc8Q,IAEd,mBAAmBsX,EAAYr5E,EAAS,IACtC,MAAM,MACJ51C,EAAK,SACL2mE,EAAQ,YACRkxC,GACEoX,GACE,WACJC,GAAa,EAAK,UAClBhD,GACEt2E,GACE,YACJo4D,GACEziI,KAAKoc,OAEPqY,MAAOmvH,EAAS,UAChBt+E,EAAY,IACVq7E,GACE,sBACJ3d,GACEsJ,EAEJ,GAAIA,EAAYxJ,YACd,OAAO,EAGT,GAAIE,EAAuB,CACzB,GAAIA,EAAsBvrG,IACxB,OAAO,EAGT,IAAK,MAAM2tC,KAAYE,EACrB,GAAI09D,EAAsB59D,GACxB,OAAO,EAKb,GAAIu+E,EACF,QAAIrX,EAAYrJ,mBAITT,GAAa,CAClBpnC,WACAt2B,SAAUrwC,EACVguG,cACA5uE,UAAW7zD,KAAKmb,YAAY+oH,aAIhC,IAAK,MAAM/gI,KAAQygJ,EACjB,GAAInvH,EAAMtxB,KAAUi4F,EAASj4F,GAC3B,OAAO,EAIX,OAAO,EAGT,mBAAmBA,GACjB,MAAM,kBACJ69H,GACEhhI,KAAKoc,MAET,OAAKjZ,EAIE69H,QAAiDthI,IAA5BshI,EAAkB79H,IAHpC,GAAc69H,GAM1B,uBACE,OAAO,IAAI,GAAiBhhI,KAAKmrB,QAAQjwB,GAAI,CAC3CihC,GAAIn8B,KAAKy0B,MAAM0H,GACfsS,MAAOzuC,KAAKmrB,QAAQsjB,SAM1B,SAAS,GAAc12B,GACrB,IAAIspD,GAAU,EAEd,IAAK,MAAMllE,KAAO4b,EAAK,CACrBspD,GAAU,EACV,MAGF,OAAOA,EC3IT,SAAS,MD8IT,GAAiB6pE,UAAY,mBC5I7B,MAAM,GAAe,CACnB2Y,YAAa,KACbC,WAAYnN,GACZoN,cAAe,CACbjlJ,KAAM,WACN7B,MAAO,MAET+mJ,eAAgB,CACdllJ,KAAM,WACN7B,MAAO,GAETgnJ,iBAAkB,MAClBjF,gBAAiB,CACflgJ,KAAM,SACN7B,MAAO,EACPoK,IAAK,EACL/E,IAAK,KAEP28I,gBAAiB,CACfngJ,KAAM,SACN7B,MAAO,IACPoK,IAAK,EACL/E,IAAK,KAEP4hJ,eAAgB,WAChBC,iBAAkB,GAClBC,gBAAiB,KACjBC,eAAgB,CAAC,EAAG,KACpBC,kBAAmB,CACjBxlJ,KAAM,WACN7B,MAAO,MAETsnJ,mBAAoB,CAClBzlJ,KAAM,WACN7B,MAAO,GAETunJ,qBAAsB,MACtBC,yBAA0B,CACxB3lJ,KAAM,SACN7B,MAAO,EACPoK,IAAK,EACL/E,IAAK,KAEPoiJ,yBAA0B,CACxB5lJ,KAAM,SACN7B,MAAO,IACPoK,IAAK,EACL/E,IAAK,KAEP+xI,eAAgB,CACdv1I,KAAM,SACNuI,IAAK,EACLpK,MAAO,GAET0nJ,mBAAoB,SACpBC,qBAAsB,GACtB78C,OAAQ,CACNjpG,KAAM,SACN7B,MAAO,IACPoK,IAAK,GAEP+sI,SAAU,CACRt1I,KAAM,SACNuI,IAAK,EACL/E,IAAK,EACLrF,MAAO,GAET03I,UAAU,EACVkQ,kBAAmB1M,GACnBrrD,YAAa,CACXhuF,KAAM,WACN7B,MAAOmI,GAAKA,EAAEupD,UAEhBgiF,UAAU,EACV8Q,YAAa,CACX3iJ,KAAM,WACN7B,MAAO,KACPooI,UAAU,IAGC,MAAM,WAAqB,GACxC,kBACE,MAAMyf,EAAgB,IAAI,GAAc,CACtClF,cAAenrH,GAASA,EAAMowH,kBAC9BnF,YAAajrH,GAASA,EAAMszE,SAE9B/nG,KAAKoc,MAAQ,CACX0oI,gBACAC,gBAAiBD,EAAc1oI,MAC/Bu3H,SAAU,MAEZ,MAAMvK,EAAmBppI,KAAKwsI,sBAC9BpD,EAAiBzoG,IAAI,CACnB6/D,UAAW,CACT1/F,KAAM,EACNskE,SAAU,iBAKhB,YAAYz5B,GAGV,GAFA17B,MAAMo+H,YAAY1iG,GAEdA,EAAK2gG,YAAYC,mBAAoB,CACvC,MAAMwY,EAAkB/kJ,KAAKoc,MAAM0oI,cAAczW,YAAY1iG,EAAM,CACjEtlB,SAAUrmB,KAAKmrB,QAAQ9E,SACvBooG,WAAYzuH,KAAKihI,kBAGnB,GAAIjhI,KAAKoc,MAAM2oI,gBAAgBxF,YAAcwF,EAAgBxF,UAAW,CACtE,MAAM,gBACJyF,GACED,EAAgBxF,WAAa,GACjCv/I,KAAKg2I,SAAS,CACZrC,SAAUqR,GAAmBhlJ,KAAKilJ,2BAA2BD,KAIjEhlJ,KAAKg2I,SAAS,CACZ+O,qBAKN,2BAA2BC,GACzB,MAAM,SACJ3+H,GACErmB,KAAKmrB,QAET,GAAI9qB,MAAM6P,QAAQ80I,IAA+C,IAA3BA,EAAgBxkJ,OAAc,CAClE,MAAM0kJ,EAAUF,EAAgB,GAC1BG,EAAUH,EAAgB,GAC1BI,EAAW,EAAEF,EAAQ,GAAKC,EAAQ,IAAM,GAAID,EAAQ,GAAKC,EAAQ,IAAM,GACvEE,EAAeh/H,EAAS6rC,YAAYkzF,IACpC,cACJ36F,GACEpkC,EAAS4jC,kBAAkBm7F,GACzBzR,EAAWqR,EAAgBhrI,IAAIsrI,IACnC,MAAMC,EAASl/H,EAAS6rC,YAAYozF,GACpC,MAAO,EAAEC,EAAO,GAAKF,EAAa,IAAM56F,EAAc,IAAK86F,EAAO,GAAKF,EAAa,IAAM56F,EAAc,MAE1G,OAAOkpF,EAIT,OADA,EAAIv5I,MAAM,iEAAV,GACO,KAGT,gBAAe,KACb0vC,IAEA,OAAO9pC,KAAKoc,MAAM0oI,cAAcv9C,eAAe,CAC7Cz9D,SAIJ,oBAAoBi4G,GAClB,OAAO/hJ,KAAKoc,MAAM0oI,cAAcpgC,YAAY,YAArC1kH,CAAkD+hJ,GAG3D,wBAAwBA,GACtB,OAAO/hJ,KAAKoc,MAAM0oI,cAAcpgC,YAAY,YAArC1kH,CAAkD+hJ,GAG3D,6BACE,OAAO/hJ,KAAKoc,MAAM0oI,cAAcvjB,kBAAkBvhI,KAAKy0B,OAGzD,eACE,MAAM,eACJ4/G,EAAc,SACdM,EAAQ,SACRP,EAAQ,SACRzD,EAAQ,YACRrR,GACEt/H,KAAKy0B,OACH,gBACJswH,EAAe,SACfpR,GACE3zI,KAAKoc,MACHopI,EAAgBxlJ,KAAKylJ,iBAAiB,eAAgB,IAEtDtlB,EAAiBngI,KAAK0lJ,6BAEtBvrB,EAAWwZ,EAAW,CAC1BA,WACA5rC,OAAQ,GACN,CACFA,OAAQg9C,EAAgBxF,UAAUjH,cAAgB,EAClDhE,YAAa,SACbxtI,MAAO,IAET,OAAO,IAAI0+I,EAAc,IAAKrrB,EAC5Bga,eAAgB,EAChBE,iBACAM,WACAP,WACAzD,WACAoE,aAAc/0I,KAAK2lJ,oBAAoBtpJ,KAAK2D,MAC5Ck1I,aAAcl1I,KAAK4lJ,wBAAwBvpJ,KAAK2D,MAChDs/H,YAAaA,GAAe,CAC1ByV,aAAczV,EAAYykB,eAAiBzkB,EAAY0kB,eACvD9O,aAAc5V,EAAYglB,mBAAqBhlB,EAAYilB,qBAE5DvkJ,KAAKmjJ,iBAAiB,CACvBhnH,GAAI,eACJgkG,mBACE,CACFt/F,KAAMkkH,EAAgBxF,UAAU1+G,QAKtC,GAAaqqG,UAAY,eACzB,GAAa7mB,aAAe,GC/N5B,IAAI,GAAO,CAACpnH,MAAO,QAEnB,SAAS4oJ,KACP,IAAK,IAAyC56I,EAArCnD,EAAI,EAAGvH,EAAI2B,UAAU1B,OAAQksF,EAAI,GAAO5kF,EAAIvH,IAAKuH,EAAG,CAC3D,KAAMmD,EAAI/I,UAAU4F,GAAK,KAAQmD,KAAKyhF,GAAM,QAAQt9D,KAAKnkB,GAAI,MAAM,IAAI8G,MAAM,iBAAmB9G,GAChGyhF,EAAEzhF,GAAK,GAET,OAAO,IAAI66I,GAASp5D,GAGtB,SAASo5D,GAASp5D,GAChB1sF,KAAK0sF,EAAIA,EAGX,SAASq5D,GAAeC,EAAW/4H,GACjC,OAAO+4H,EAAU3sI,OAAOwL,MAAM,SAAS7K,KAAI,SAAS/O,GAClD,IAAI9H,EAAO,GAAI2E,EAAImD,EAAEpN,QAAQ,KAE7B,GADIiK,GAAK,IAAG3E,EAAO8H,EAAE5Q,MAAMyN,EAAI,GAAImD,EAAIA,EAAE5Q,MAAM,EAAGyN,IAC9CmD,IAAMgiB,EAAMzB,eAAevgB,GAAI,MAAM,IAAI8G,MAAM,iBAAmB9G,GACtE,MAAO,CAACnM,KAAMmM,EAAG9H,KAAMA,MA6C3B,SAAS8d,GAAIniB,EAAMqE,GACjB,IAAK,IAA4B6H,EAAxBlD,EAAI,EAAGvH,EAAIzB,EAAK0B,OAAWsH,EAAIvH,IAAKuH,EAC3C,IAAKkD,EAAIlM,EAAKgJ,IAAI3E,OAASA,EACzB,OAAO6H,EAAE/N,MAKf,SAAS,GAAI6B,EAAMqE,EAAMutB,GACvB,IAAK,IAAI5oB,EAAI,EAAGvH,EAAIzB,EAAK0B,OAAQsH,EAAIvH,IAAKuH,EACxC,GAAIhJ,EAAKgJ,GAAG3E,OAASA,EAAM,CACzBrE,EAAKgJ,GAAK,GAAMhJ,EAAOA,EAAKzE,MAAM,EAAGyN,GAAGD,OAAO/I,EAAKzE,MAAMyN,EAAI,IAC9D,MAIJ,OADgB,MAAZ4oB,GAAkB5xB,EAAKmE,KAAK,CAACE,KAAMA,EAAMlG,MAAOyzB,IAC7C5xB,EAzDTgnJ,GAAS1kJ,UAAYykJ,GAASzkJ,UAAY,CACxC+Z,YAAa2qI,GACbrkH,GAAI,SAASwkH,EAAUv1H,GACrB,IAEIzlB,EAFAyhF,EAAI1sF,KAAK0sF,EACTw5D,EAAIH,GAAeE,EAAW,GAAIv5D,GAElC5kF,GAAK,EACLvH,EAAI2lJ,EAAE1lJ,OAGV,KAAI0B,UAAU1B,OAAS,GAAvB,CAOA,GAAgB,MAAZkwB,GAAwC,oBAAbA,EAAyB,MAAM,IAAI3e,MAAM,qBAAuB2e,GAC/F,QAAS5oB,EAAIvH,EACX,GAAI0K,GAAKg7I,EAAWC,EAAEp+I,IAAIhJ,KAAM4tF,EAAEzhF,GAAK,GAAIyhF,EAAEzhF,GAAIg7I,EAAS9iJ,KAAMutB,QAC3D,GAAgB,MAAZA,EAAkB,IAAKzlB,KAAKyhF,EAAGA,EAAEzhF,GAAK,GAAIyhF,EAAEzhF,GAAIg7I,EAAS9iJ,KAAM,MAG1E,OAAOnD,KAZL,QAAS8H,EAAIvH,EAAG,IAAK0K,GAAKg7I,EAAWC,EAAEp+I,IAAIhJ,QAAUmM,EAAIgW,GAAIyrE,EAAEzhF,GAAIg7I,EAAS9iJ,OAAQ,OAAO8H,GAc/FkF,KAAM,WACJ,IAAIA,EAAO,GAAIu8E,EAAI1sF,KAAK0sF,EACxB,IAAK,IAAIzhF,KAAKyhF,EAAGv8E,EAAKlF,GAAKyhF,EAAEzhF,GAAG5Q,QAChC,OAAO,IAAIyrJ,GAAS31I,IAEtB3V,KAAM,SAASsE,EAAMqnJ,GACnB,IAAK5lJ,EAAI2B,UAAU1B,OAAS,GAAK,EAAG,IAAK,IAAgCD,EAAG0K,EAA/BnO,EAAO,IAAIuD,MAAME,GAAIuH,EAAI,EAASA,EAAIvH,IAAKuH,EAAGhL,EAAKgL,GAAK5F,UAAU4F,EAAI,GACnH,IAAK9H,KAAK0sF,EAAElhE,eAAe1sB,GAAO,MAAM,IAAIiT,MAAM,iBAAmBjT,GACrE,IAAKmM,EAAIjL,KAAK0sF,EAAE5tF,GAAOgJ,EAAI,EAAGvH,EAAI0K,EAAEzK,OAAQsH,EAAIvH,IAAKuH,EAAGmD,EAAEnD,GAAG7K,MAAM4C,MAAMsmJ,EAAMrpJ,IAEjF+C,MAAO,SAASf,EAAMqnJ,EAAMrpJ,GAC1B,IAAKkD,KAAK0sF,EAAElhE,eAAe1sB,GAAO,MAAM,IAAIiT,MAAM,iBAAmBjT,GACrE,IAAK,IAAImM,EAAIjL,KAAK0sF,EAAE5tF,GAAOgJ,EAAI,EAAGvH,EAAI0K,EAAEzK,OAAQsH,EAAIvH,IAAKuH,EAAGmD,EAAEnD,GAAG7K,MAAM4C,MAAMsmJ,EAAMrpJ,KAuBxE,UCnFf,SAASspJ,MAEM,mBACb,OAAmB,MAAZC,EAAmBD,GAAO,WAC/B,OAAOpmJ,KAAKsmJ,cAAcD,KCDf,eACS,oBAAXE,IAAuBA,EAAS,GAASA,IAEpD,IAAK,IAAIC,EAASxmJ,KAAKymJ,QAASthJ,EAAIqhJ,EAAOhmJ,OAAQkmJ,EAAY,IAAIrmJ,MAAM8E,GAAI2f,EAAI,EAAGA,EAAI3f,IAAK2f,EAC3F,IAAK,IAAiFwI,EAAMq5H,EAAnF56G,EAAQy6G,EAAO1hI,GAAIvkB,EAAIwrC,EAAMvrC,OAAQomJ,EAAWF,EAAU5hI,GAAK,IAAIzkB,MAAME,GAAmBuH,EAAI,EAAGA,EAAIvH,IAAKuH,GAC9GwlB,EAAOye,EAAMjkC,MAAQ6+I,EAAUJ,EAAO/rJ,KAAK8yB,EAAMA,EAAKu5H,SAAU/+I,EAAGikC,MAClE,aAAcze,IAAMq5H,EAAQE,SAAWv5H,EAAKu5H,UAChDD,EAAS9+I,GAAK6+I,GAKpB,OAAO,IAAIG,GAAUJ,EAAW1mJ,KAAK+mJ,WCTxB,SAAS,GAAM3hJ,GAC5B,OAAY,MAALA,EAAY,GAAK/E,MAAM6P,QAAQ9K,GAAKA,EAAI/E,MAAMosC,KAAKrnC,GCP5D,SAAS,KACP,MAAO,GAGM,mBACb,OAAmB,MAAZihJ,EAAmB,GAAQ,WAChC,OAAOrmJ,KAAKgnJ,iBAAiBX,KCFjC,SAASY,GAASV,GAChB,OAAO,WACL,OAAO,GAAMA,EAAO1mJ,MAAMG,KAAMkC,aAIrB,mBACqBqkJ,EAAZ,oBAAXA,EAAgCU,GAASV,GACtCW,GAAYX,GAE1B,IAAK,IAAIC,EAASxmJ,KAAKymJ,QAASthJ,EAAIqhJ,EAAOhmJ,OAAQkmJ,EAAY,GAAIS,EAAU,GAAIriI,EAAI,EAAGA,EAAI3f,IAAK2f,EAC/F,IAAK,IAAyCwI,EAArCye,EAAQy6G,EAAO1hI,GAAIvkB,EAAIwrC,EAAMvrC,OAAcsH,EAAI,EAAGA,EAAIvH,IAAKuH,GAC9DwlB,EAAOye,EAAMjkC,MACf4+I,EAAUzjJ,KAAKsjJ,EAAO/rJ,KAAK8yB,EAAMA,EAAKu5H,SAAU/+I,EAAGikC,IACnDo7G,EAAQlkJ,KAAKqqB,IAKnB,OAAO,IAAIw5H,GAAUJ,EAAWS,ICvBnB,eACb,OAAO,WACL,OAAOnnJ,KAAKvB,QAAQ4nJ,KAIjB,SAASe,GAAaf,GAC3B,OAAO,SAAS/4H,GACd,OAAOA,EAAK7uB,QAAQ4nJ,ICNxB,IAAI14H,GAAOttB,MAAMe,UAAUusB,KAE3B,SAAS05H,GAAU9lG,GACjB,OAAO,WACL,OAAO5zB,GAAKnzB,KAAKwF,KAAKmiE,SAAU5gB,IAIpC,SAAS+lG,KACP,OAAOtnJ,KAAKunJ,kBAGC,mBACb,OAAOvnJ,KAAKumJ,OAAgB,MAAThlG,EAAgB+lG,GAC7BD,GAA2B,oBAAV9lG,EAAuBA,EAAQ6lG,GAAa7lG,MCdjE,GAASlhD,MAAMe,UAAUi3B,OAE7B,SAAS,KACP,OAAOh4B,MAAMosC,KAAKzsC,KAAKmiE,UAGzB,SAASqlF,GAAejmG,GACtB,OAAO,WACL,OAAO,GAAO/mD,KAAKwF,KAAKmiE,SAAU5gB,IAIvB,mBACb,OAAOvhD,KAAKynJ,UAAmB,MAATlmG,EAAgB,GAChCimG,GAAgC,oBAAVjmG,EAAuBA,EAAQ6lG,GAAa7lG,MCb3D,eACQ,oBAAVA,IAAsBA,EAAQmmG,GAAQnmG,IAEjD,IAAK,IAAIilG,EAASxmJ,KAAKymJ,QAASthJ,EAAIqhJ,EAAOhmJ,OAAQkmJ,EAAY,IAAIrmJ,MAAM8E,GAAI2f,EAAI,EAAGA,EAAI3f,IAAK2f,EAC3F,IAAK,IAAuEwI,EAAnEye,EAAQy6G,EAAO1hI,GAAIvkB,EAAIwrC,EAAMvrC,OAAQomJ,EAAWF,EAAU5hI,GAAK,GAAUhd,EAAI,EAAGA,EAAIvH,IAAKuH,GAC3FwlB,EAAOye,EAAMjkC,KAAOy5C,EAAM/mD,KAAK8yB,EAAMA,EAAKu5H,SAAU/+I,EAAGikC,IAC1D66G,EAAS3jJ,KAAKqqB,GAKpB,OAAO,IAAIw5H,GAAUJ,EAAW1mJ,KAAK+mJ,WCdxB,eACb,OAAO,IAAI1mJ,MAAMyoB,EAAOtoB,SCEX,cACb,OAAO,IAAIsmJ,GAAU9mJ,KAAK2nJ,QAAU3nJ,KAAKymJ,QAAQzsI,IAAI4tI,IAAS5nJ,KAAK+mJ,WAG9D,SAASc,GAAUt6H,EAAQm7F,GAChC1oH,KAAK6uB,cAAgBtB,EAAOsB,cAC5B7uB,KAAK8nJ,aAAev6H,EAAOu6H,aAC3B9nJ,KAAK+nJ,MAAQ,KACb/nJ,KAAKgoJ,QAAUz6H,EACfvtB,KAAK6mJ,SAAWn+B,EAGlBm/B,GAAUzmJ,UAAY,CACpB+Z,YAAa0sI,GACb99C,YAAa,SAASz9E,GAAS,OAAOtsB,KAAKgoJ,QAAQ7nF,aAAa7zC,EAAOtsB,KAAK+nJ,QAC5E5nF,aAAc,SAAS7zC,EAAO21G,GAAQ,OAAOjiI,KAAKgoJ,QAAQ7nF,aAAa7zC,EAAO21G,IAC9EqkB,cAAe,SAASD,GAAY,OAAOrmJ,KAAKgoJ,QAAQ1B,cAAcD,IACtEW,iBAAkB,SAASX,GAAY,OAAOrmJ,KAAKgoJ,QAAQhB,iBAAiBX,KCpB/D,mBACb,OAAO,WACL,OAAOjhJ,ICEX,SAAS6iJ,GAAU16H,EAAQwe,EAAOyyF,EAAO11G,EAAQvR,EAAMspB,GASrD,IARA,IACIvT,EADAxlB,EAAI,EAEJogJ,EAAcn8G,EAAMvrC,OACpB2nJ,EAAatnH,EAAKrgC,OAKfsH,EAAIqgJ,IAAcrgJ,GACnBwlB,EAAOye,EAAMjkC,KACfwlB,EAAKu5H,SAAWhmH,EAAK/4B,GACrBghB,EAAOhhB,GAAKwlB,GAEZkxG,EAAM12H,GAAK,IAAI+/I,GAAUt6H,EAAQsT,EAAK/4B,IAK1C,KAAOA,EAAIogJ,IAAepgJ,GACpBwlB,EAAOye,EAAMjkC,MACfyP,EAAKzP,GAAKwlB,GAKhB,SAAS86H,GAAQ76H,EAAQwe,EAAOyyF,EAAO11G,EAAQvR,EAAMspB,EAAM1kC,GACzD,IAAI2L,EACAwlB,EAKA+6H,EAJAC,EAAiB,IAAI/jH,IACrB2jH,EAAcn8G,EAAMvrC,OACpB2nJ,EAAatnH,EAAKrgC,OAClB+nJ,EAAY,IAAIloJ,MAAM6nJ,GAK1B,IAAKpgJ,EAAI,EAAGA,EAAIogJ,IAAepgJ,GACzBwlB,EAAOye,EAAMjkC,MACfygJ,EAAUzgJ,GAAKugJ,EAAWlsJ,EAAI3B,KAAK8yB,EAAMA,EAAKu5H,SAAU/+I,EAAGikC,GAAS,GAChEu8G,EAAe5kH,IAAI2kH,GACrB9wI,EAAKzP,GAAKwlB,EAEVg7H,EAAexoI,IAAIuoI,EAAU/6H,IAQnC,IAAKxlB,EAAI,EAAGA,EAAIqgJ,IAAcrgJ,EAC5BugJ,EAAWlsJ,EAAI3B,KAAK+yB,EAAQsT,EAAK/4B,GAAIA,EAAG+4B,GAAQ,IAC5CvT,EAAOg7H,EAAernI,IAAIonI,KAC5Bv/H,EAAOhhB,GAAKwlB,EACZA,EAAKu5H,SAAWhmH,EAAK/4B,GACrBwgJ,EAAepjH,OAAOmjH,IAEtB7pB,EAAM12H,GAAK,IAAI+/I,GAAUt6H,EAAQsT,EAAK/4B,IAK1C,IAAKA,EAAI,EAAGA,EAAIogJ,IAAepgJ,GACxBwlB,EAAOye,EAAMjkC,KAAQwgJ,EAAernI,IAAIsnI,EAAUzgJ,MAAQwlB,IAC7D/V,EAAKzP,GAAKwlB,GAKhB,SAASo7F,GAAMp7F,GACb,OAAOA,EAAKu5H,SAGC,qBACb,IAAK3kJ,UAAU1B,OAAQ,OAAOH,MAAMosC,KAAKzsC,KAAM0oH,IAE/C,IAAIrsH,EAAOF,EAAMisJ,GAAUH,GACvBd,EAAUnnJ,KAAK+mJ,SACfP,EAASxmJ,KAAKymJ,QAEG,oBAAVxpJ,IAAsBA,EAAQ,GAASA,IAElD,IAAK,IAAIkI,EAAIqhJ,EAAOhmJ,OAAQsoB,EAAS,IAAIzoB,MAAM8E,GAAIq5H,EAAQ,IAAIn+H,MAAM8E,GAAIoS,EAAO,IAAIlX,MAAM8E,GAAI2f,EAAI,EAAGA,EAAI3f,IAAK2f,EAAG,CAC/G,IAAIyI,EAAS45H,EAAQriI,GACjBinB,EAAQy6G,EAAO1hI,GACfojI,EAAcn8G,EAAMvrC,OACpBqgC,EAAO2nH,GAAUvrJ,EAAMzC,KAAK+yB,EAAQA,GAAUA,EAAOs5H,SAAU/hI,EAAGqiI,IAClEgB,EAAatnH,EAAKrgC,OAClBioJ,EAAajqB,EAAM15G,GAAK,IAAIzkB,MAAM8nJ,GAClCO,EAAc5/H,EAAOhE,GAAK,IAAIzkB,MAAM8nJ,GACpCQ,EAAYpxI,EAAKuN,GAAK,IAAIzkB,MAAM6nJ,GAEpC7rJ,EAAKkxB,EAAQwe,EAAO08G,EAAYC,EAAaC,EAAW9nH,EAAM1kC,GAK9D,IAAK,IAAoBysJ,EAAU3mB,EAA1B4mB,EAAK,EAAG5c,EAAK,EAAmB4c,EAAKV,IAAcU,EAC1D,GAAID,EAAWH,EAAWI,GAAK,CACzBA,GAAM5c,IAAIA,EAAK4c,EAAK,GACxB,QAAS5mB,EAAOymB,EAAYzc,OAAUA,EAAKkc,GAC3CS,EAASb,MAAQ9lB,GAAQ,MAQ/B,OAHAn5G,EAAS,IAAIg+H,GAAUh+H,EAAQq+H,GAC/Br+H,EAAO6+H,OAASnpB,EAChB11G,EAAOggI,MAAQvxI,EACRuR,GAST,SAAS0/H,GAAU3nH,GACjB,MAAuB,kBAATA,GAAqB,WAAYA,EAC3CA,EACAxgC,MAAMosC,KAAK5L,GC3HF,kBACb,OAAO,IAAIimH,GAAU9mJ,KAAK8oJ,OAAS9oJ,KAAKymJ,QAAQzsI,IAAI4tI,IAAS5nJ,KAAK+mJ,WCJrD,mBACb,IAAIvoB,EAAQx+H,KAAKw+H,QAAS11G,EAAS9oB,KAAMuX,EAAOvX,KAAKuX,OAYrD,MAXuB,oBAAZwxI,GACTvqB,EAAQuqB,EAAQvqB,GACZA,IAAOA,EAAQA,EAAMwqB,cAEzBxqB,EAAQA,EAAMyqB,OAAOF,EAAU,IAEjB,MAAZG,IACFpgI,EAASogI,EAASpgI,GACdA,IAAQA,EAASA,EAAOkgI,cAEhB,MAAVG,EAAgB5xI,EAAKiqB,SAAe2nH,EAAO5xI,GACxCinH,GAAS11G,EAAS01G,EAAMpyG,MAAMtD,GAAQ+sC,QAAU/sC,GCX1C,eAGb,IAFA,IAAIkgI,EAAY79H,EAAQ69H,UAAY79H,EAAQ69H,YAAc79H,EAEjDi+H,EAAUppJ,KAAKymJ,QAAS4C,EAAUL,EAAUvC,QAAS6C,EAAKF,EAAQ5oJ,OAAQ+oJ,EAAKF,EAAQ7oJ,OAAQ2E,EAAI9C,KAAKgF,IAAIiiJ,EAAIC,GAAKC,EAAS,IAAInpJ,MAAMipJ,GAAKxkI,EAAI,EAAGA,EAAI3f,IAAK2f,EACpK,IAAK,IAAmGwI,EAA/Fm8H,EAASL,EAAQtkI,GAAI4kI,EAASL,EAAQvkI,GAAIvkB,EAAIkpJ,EAAOjpJ,OAAQ4rB,EAAQo9H,EAAO1kI,GAAK,IAAIzkB,MAAME,GAAUuH,EAAI,EAAGA,EAAIvH,IAAKuH,GACxHwlB,EAAOm8H,EAAO3hJ,IAAM4hJ,EAAO5hJ,MAC7BskB,EAAMtkB,GAAKwlB,GAKjB,KAAOxI,EAAIwkI,IAAMxkI,EACf0kI,EAAO1kI,GAAKskI,EAAQtkI,GAGtB,OAAO,IAAIgiI,GAAU0C,EAAQxpJ,KAAK+mJ,WCjBrB,cAEb,IAAK,IAAIP,EAASxmJ,KAAKymJ,QAAS3hI,GAAK,EAAG3f,EAAIqhJ,EAAOhmJ,SAAUskB,EAAI3f,GAC/D,IAAK,IAA8DmoB,EAA1Dye,EAAQy6G,EAAO1hI,GAAIhd,EAAIikC,EAAMvrC,OAAS,EAAGyhI,EAAOl2F,EAAMjkC,KAAYA,GAAK,IAC1EwlB,EAAOye,EAAMjkC,MACXm6H,GAA6C,EAArC30G,EAAKq8H,wBAAwB1nB,IAAWA,EAAKz0G,WAAW2yC,aAAa7yC,EAAM20G,GACvFA,EAAO30G,GAKb,OAAOttB,MCTM,eAGb,SAAS4pJ,EAAYnlJ,EAAGC,GACtB,OAAOD,GAAKC,EAAIgtF,EAAQjtF,EAAEoiJ,SAAUniJ,EAAEmiJ,WAAapiJ,GAAKC,EAHrDgtF,IAASA,EAAU,IAMxB,IAAK,IAAI80D,EAASxmJ,KAAKymJ,QAASthJ,EAAIqhJ,EAAOhmJ,OAAQqpJ,EAAa,IAAIxpJ,MAAM8E,GAAI2f,EAAI,EAAGA,EAAI3f,IAAK2f,EAAG,CAC/F,IAAK,IAAmFwI,EAA/Eye,EAAQy6G,EAAO1hI,GAAIvkB,EAAIwrC,EAAMvrC,OAAQspJ,EAAYD,EAAW/kI,GAAK,IAAIzkB,MAAME,GAAUuH,EAAI,EAAGA,EAAIvH,IAAKuH,GACxGwlB,EAAOye,EAAMjkC,MACfgiJ,EAAUhiJ,GAAKwlB,GAGnBw8H,EAAU97H,KAAK47H,GAGjB,OAAO,IAAI9C,GAAU+C,EAAY7pJ,KAAK+mJ,UAAUlxF,SAGlD,SAAS,GAAUpxD,EAAGC,GACpB,OAAOD,EAAIC,GAAK,EAAID,EAAIC,EAAI,EAAID,GAAKC,EAAI,EAAIigB,ICtBhC,kBACb,IAAI+L,EAAWxuB,UAAU,GAGzB,OAFAA,UAAU,GAAKlC,KACf0wB,EAAS7wB,MAAM,KAAMqC,WACdlC,MCJM,cACb,OAAOK,MAAMosC,KAAKzsC,OCDL,cAEb,IAAK,IAAIwmJ,EAASxmJ,KAAKymJ,QAAS3hI,EAAI,EAAG3f,EAAIqhJ,EAAOhmJ,OAAQskB,EAAI3f,IAAK2f,EACjE,IAAK,IAAIinB,EAAQy6G,EAAO1hI,GAAIhd,EAAI,EAAGvH,EAAIwrC,EAAMvrC,OAAQsH,EAAIvH,IAAKuH,EAAG,CAC/D,IAAIwlB,EAAOye,EAAMjkC,GACjB,GAAIwlB,EAAM,OAAOA,EAIrB,OAAO,MCTM,cACb,IAAIxsB,EAAO,EACX,IAAK,MAAMwsB,KAAQttB,OAAQc,EAC3B,OAAOA,GCHM,cACb,OAAQd,KAAKstB,QCDA,eAEb,IAAK,IAAIk5H,EAASxmJ,KAAKymJ,QAAS3hI,EAAI,EAAG3f,EAAIqhJ,EAAOhmJ,OAAQskB,EAAI3f,IAAK2f,EACjE,IAAK,IAAgDwI,EAA5Cye,EAAQy6G,EAAO1hI,GAAIhd,EAAI,EAAGvH,EAAIwrC,EAAMvrC,OAAcsH,EAAIvH,IAAKuH,GAC9DwlB,EAAOye,EAAMjkC,KAAI4oB,EAASl2B,KAAK8yB,EAAMA,EAAKu5H,SAAU/+I,EAAGikC,GAI/D,OAAO/rC,MCRE+pJ,GAAQ,+BAEJ,IACbC,IAAK,6BACLD,MAAOA,GACPE,MAAO,+BACPC,IAAK,uCACLC,MAAO,iCCLM,eACb,IAAI/7H,EAASjrB,GAAQ,GAAI2E,EAAIsmB,EAAOvwB,QAAQ,KAE5C,OADIiK,GAAK,GAAqC,WAA/BsmB,EAASjrB,EAAK9I,MAAM,EAAGyN,MAAiB3E,EAAOA,EAAK9I,MAAMyN,EAAI,IACtEsiJ,GAAW5+H,eAAe4C,GAAU,CAAC7K,MAAO6mI,GAAWh8H,GAASi8H,MAAOlnJ,GAAQA,GCHxF,SAASmnJ,GAAWnnJ,GAClB,OAAO,WACLnD,KAAKuqJ,gBAAgBpnJ,IAIzB,SAASqnJ,GAAaC,GACpB,OAAO,WACLzqJ,KAAK0qJ,kBAAkBD,EAASlnI,MAAOknI,EAASJ,QAIpD,SAASM,GAAaxnJ,EAAMlG,GAC1B,OAAO,WACL+C,KAAK4qJ,aAAaznJ,EAAMlG,IAI5B,SAAS4tJ,GAAeJ,EAAUxtJ,GAChC,OAAO,WACL+C,KAAK8qJ,eAAeL,EAASlnI,MAAOknI,EAASJ,MAAOptJ,IAIxD,SAAS8tJ,GAAa5nJ,EAAMlG,GAC1B,OAAO,WACL,IAAI2N,EAAI3N,EAAM4C,MAAMG,KAAMkC,WACjB,MAAL0I,EAAW5K,KAAKuqJ,gBAAgBpnJ,GAC/BnD,KAAK4qJ,aAAaznJ,EAAMyH,IAIjC,SAASogJ,GAAeP,EAAUxtJ,GAChC,OAAO,WACL,IAAI2N,EAAI3N,EAAM4C,MAAMG,KAAMkC,WACjB,MAAL0I,EAAW5K,KAAK0qJ,kBAAkBD,EAASlnI,MAAOknI,EAASJ,OAC1DrqJ,KAAK8qJ,eAAeL,EAASlnI,MAAOknI,EAASJ,MAAOz/I,IAI9C,qBACb,IAAI6/I,EAAWQ,GAAU9nJ,GAEzB,GAAIjB,UAAU1B,OAAS,EAAG,CACxB,IAAI8sB,EAAOttB,KAAKstB,OAChB,OAAOm9H,EAASJ,MACV/8H,EAAK49H,eAAeT,EAASlnI,MAAOknI,EAASJ,OAC7C/8H,EAAK69H,aAAaV,GAG1B,OAAOzqJ,KAAKurB,MAAe,MAATtuB,EACXwtJ,EAASJ,MAAQG,GAAeF,GAAgC,oBAAVrtJ,EACtDwtJ,EAASJ,MAAQW,GAAiBD,GAClCN,EAASJ,MAAQQ,GAAiBF,IAAgBF,EAAUxtJ,KCvDtD,eACb,OAAQqwB,EAAKuB,eAAiBvB,EAAKuB,cAAcC,aACzCxB,EAAKjvB,UAAYivB,GAClBA,EAAKwB,aCDd,SAASs8H,GAAYjoJ,GACnB,OAAO,WACLnD,KAAK25B,MAAM0xH,eAAeloJ,IAI9B,SAASmoJ,GAAcnoJ,EAAMlG,EAAOouC,GAClC,OAAO,WACLrrC,KAAK25B,MAAM4xH,YAAYpoJ,EAAMlG,EAAOouC,IAIxC,SAASmgH,GAAcroJ,EAAMlG,EAAOouC,GAClC,OAAO,WACL,IAAIzgC,EAAI3N,EAAM4C,MAAMG,KAAMkC,WACjB,MAAL0I,EAAW5K,KAAK25B,MAAM0xH,eAAeloJ,GACpCnD,KAAK25B,MAAM4xH,YAAYpoJ,EAAMyH,EAAGygC,IAI1B,uBACb,OAAOnpC,UAAU1B,OAAS,EACpBR,KAAKurB,MAAe,MAATtuB,EACLmuJ,GAA+B,oBAAVnuJ,EACrBuuJ,GACAF,IAAenoJ,EAAMlG,EAAmB,MAAZouC,EAAmB,GAAKA,IAC1DogH,GAAWzrJ,KAAKstB,OAAQnqB,IAGzB,SAASsoJ,GAAWn+H,EAAMnqB,GAC/B,OAAOmqB,EAAKqM,MAAM+xH,iBAAiBvoJ,IAC5B,GAAYmqB,GAAMq+H,iBAAiBr+H,EAAM,MAAMo+H,iBAAiBvoJ,GCjCzE,SAASyoJ,GAAezoJ,GACtB,OAAO,kBACEnD,KAAKmD,IAIhB,SAAS0oJ,GAAiB1oJ,EAAMlG,GAC9B,OAAO,WACL+C,KAAKmD,GAAQlG,GAIjB,SAAS6uJ,GAAiB3oJ,EAAMlG,GAC9B,OAAO,WACL,IAAI2N,EAAI3N,EAAM4C,MAAMG,KAAMkC,WACjB,MAAL0I,SAAkB5K,KAAKmD,GACtBnD,KAAKmD,GAAQyH,GAIP,qBACb,OAAO1I,UAAU1B,OAAS,EACpBR,KAAKurB,MAAe,MAATtuB,EACP2uJ,GAAkC,oBAAV3uJ,EACxB6uJ,GACAD,IAAkB1oJ,EAAMlG,IAC5B+C,KAAKstB,OAAOnqB,IC1BpB,SAAS4oJ,GAAWvkJ,GAClB,OAAOA,EAAO6R,OAAOwL,MAAM,SAG7B,SAASmnI,GAAU1+H,GACjB,OAAOA,EAAK0+H,WAAa,IAAIC,GAAU3+H,GAGzC,SAAS2+H,GAAU3+H,GACjBttB,KAAKksJ,MAAQ5+H,EACbttB,KAAKmsJ,OAASJ,GAAWz+H,EAAK69H,aAAa,UAAY,IAuBzD,SAASiB,GAAW9+H,EAAMjL,GACxB,IAAIrf,EAAOgpJ,GAAU1+H,GAAOxlB,GAAK,EAAGvH,EAAI8hB,EAAM7hB,OAC9C,QAASsH,EAAIvH,EAAGyC,EAAK29B,IAAIte,EAAMva,IAGjC,SAASukJ,GAAc/+H,EAAMjL,GAC3B,IAAIrf,EAAOgpJ,GAAU1+H,GAAOxlB,GAAK,EAAGvH,EAAI8hB,EAAM7hB,OAC9C,QAASsH,EAAIvH,EAAGyC,EAAKw+B,OAAOnf,EAAMva,IAGpC,SAASwkJ,GAAYjqI,GACnB,OAAO,WACL+pI,GAAWpsJ,KAAMqiB,IAIrB,SAASkqI,GAAalqI,GACpB,OAAO,WACLgqI,GAAcrsJ,KAAMqiB,IAIxB,SAASmqI,GAAgBnqI,EAAOplB,GAC9B,OAAO,YACJA,EAAM4C,MAAMG,KAAMkC,WAAakqJ,GAAaC,IAAersJ,KAAMqiB,IA5CtE4pI,GAAU7qJ,UAAY,CACpBu/B,IAAK,SAASx9B,GACZ,IAAI2E,EAAI9H,KAAKmsJ,OAAOtuJ,QAAQsF,GACxB2E,EAAI,IACN9H,KAAKmsJ,OAAOlpJ,KAAKE,GACjBnD,KAAKksJ,MAAMtB,aAAa,QAAS5qJ,KAAKmsJ,OAAO9qJ,KAAK,QAGtDmgC,OAAQ,SAASr+B,GACf,IAAI2E,EAAI9H,KAAKmsJ,OAAOtuJ,QAAQsF,GACxB2E,GAAK,IACP9H,KAAKmsJ,OAAOvoJ,OAAOkE,EAAG,GACtB9H,KAAKksJ,MAAMtB,aAAa,QAAS5qJ,KAAKmsJ,OAAO9qJ,KAAK,QAGtDgpI,SAAU,SAASlnI,GACjB,OAAOnD,KAAKmsJ,OAAOtuJ,QAAQsF,IAAS,IAgCzB,qBACb,IAAIkf,EAAQ0pI,GAAW5oJ,EAAO,IAE9B,GAAIjB,UAAU1B,OAAS,EAAG,CACxB,IAAIwC,EAAOgpJ,GAAUhsJ,KAAKstB,QAASxlB,GAAK,EAAGvH,EAAI8hB,EAAM7hB,OACrD,QAASsH,EAAIvH,EAAG,IAAKyC,EAAKqnI,SAAShoH,EAAMva,IAAK,OAAO,EACrD,OAAO,EAGT,OAAO9H,KAAKurB,MAAuB,oBAAVtuB,EACnBuvJ,GAAkBvvJ,EAClBqvJ,GACAC,IAAclqI,EAAOplB,KCzE7B,SAASwvJ,KACPzsJ,KAAK0sJ,YAAc,GAGrB,SAASC,GAAa1vJ,GACpB,OAAO,WACL+C,KAAK0sJ,YAAczvJ,GAIvB,SAAS2vJ,GAAa3vJ,GACpB,OAAO,WACL,IAAI2N,EAAI3N,EAAM4C,MAAMG,KAAMkC,WAC1BlC,KAAK0sJ,YAAmB,MAAL9hJ,EAAY,GAAKA,GAIzB,mBACb,OAAO1I,UAAU1B,OACXR,KAAKurB,KAAc,MAATtuB,EACNwvJ,IAA+B,oBAAVxvJ,EACrB2vJ,GACAD,IAAc1vJ,IAClB+C,KAAKstB,OAAOo/H,aCvBpB,SAASG,KACP7sJ,KAAKmqG,UAAY,GAGnB,SAAS2iD,GAAa7vJ,GACpB,OAAO,WACL+C,KAAKmqG,UAAYltG,GAIrB,SAAS8vJ,GAAa9vJ,GACpB,OAAO,WACL,IAAI2N,EAAI3N,EAAM4C,MAAMG,KAAMkC,WAC1BlC,KAAKmqG,UAAiB,MAALv/F,EAAY,GAAKA,GAIvB,mBACb,OAAO1I,UAAU1B,OACXR,KAAKurB,KAAc,MAATtuB,EACN4vJ,IAA+B,oBAAV5vJ,EACrB8vJ,GACAD,IAAc7vJ,IAClB+C,KAAKstB,OAAO68E,WCvBpB,SAAS6iD,KACHhtJ,KAAKitJ,aAAajtJ,KAAKwtB,WAAWu8E,YAAY/pG,MAGrC,kBACb,OAAOA,KAAKurB,KAAKyhI,KCLnB,SAAS,KACHhtJ,KAAKktJ,iBAAiBltJ,KAAKwtB,WAAW2yC,aAAangE,KAAMA,KAAKwtB,WAAW4yC,YAGhE,kBACb,OAAOpgE,KAAKurB,KAAK,KCFnB,SAAS4hI,GAAehqJ,GACtB,OAAO,WACL,IAAI9E,EAAW2B,KAAK6uB,cAChB4mB,EAAMz1C,KAAK8nJ,aACf,OAAOryG,IAAQs0G,IAAS1rJ,EAAS+uJ,gBAAgBtF,eAAiBiC,GAC5D1rJ,EAAS0sB,cAAc5nB,GACvB9E,EAASgvJ,gBAAgB53G,EAAKtyC,IAIxC,SAASmqJ,GAAa7C,GACpB,OAAO,WACL,OAAOzqJ,KAAK6uB,cAAcw+H,gBAAgB5C,EAASlnI,MAAOknI,EAASJ,QAIxD,mBACb,IAAII,EAAWQ,GAAU9nJ,GACzB,OAAQsnJ,EAASJ,MACXiD,GACAH,IAAgB1C,ICrBT,eACb,IAAIpmJ,EAAyB,oBAATlB,EAAsBA,EAAOoqJ,GAAQpqJ,GACzD,OAAOnD,KAAKumJ,QAAO,WACjB,OAAOvmJ,KAAK+pG,YAAY1lG,EAAOxE,MAAMG,KAAMkC,gBCF/C,SAASsrJ,KACP,OAAO,KAGM,qBACb,IAAInpJ,EAAyB,oBAATlB,EAAsBA,EAAOoqJ,GAAQpqJ,GACrDojJ,EAAmB,MAAVkH,EAAiBD,GAAiC,oBAAXC,EAAwBA,EAAS,GAASA,GAC9F,OAAOztJ,KAAKumJ,QAAO,WACjB,OAAOvmJ,KAAKmgE,aAAa97D,EAAOxE,MAAMG,KAAMkC,WAAYqkJ,EAAO1mJ,MAAMG,KAAMkC,YAAc,UCX7F,SAAS,KACP,IAAIqrB,EAASvtB,KAAKwtB,WACdD,GAAQA,EAAOsyF,YAAY7/G,MAGlB,kBACb,OAAOA,KAAKurB,KAAK,KCNnB,SAASmiI,KACP,IAAI3zI,EAAQ/Z,KAAK2tJ,WAAU,GAAQpgI,EAASvtB,KAAKwtB,WACjD,OAAOD,EAASA,EAAO4yC,aAAapmD,EAAO/Z,KAAKitJ,aAAelzI,EAGjE,SAAS6zI,KACP,IAAI7zI,EAAQ/Z,KAAK2tJ,WAAU,GAAOpgI,EAASvtB,KAAKwtB,WAChD,OAAOD,EAASA,EAAO4yC,aAAapmD,EAAO/Z,KAAKitJ,aAAelzI,EAGlD,mBACb,OAAO/Z,KAAKumJ,OAAOsH,EAAOD,GAAsBF,KCXnC,eACb,OAAOxrJ,UAAU1B,OACXR,KAAKmuB,SAAS,WAAYlxB,GAC1B+C,KAAKstB,OAAOu5H,UCHpB,SAASiH,GAAgBC,GACvB,OAAO,SAAS9vH,GACd8vH,EAASvzJ,KAAKwF,KAAMi+B,EAAOj+B,KAAK6mJ,WAIpC,SAAS,GAAeb,GACtB,OAAOA,EAAU3sI,OAAOwL,MAAM,SAAS7K,KAAI,SAAS/O,GAClD,IAAI9H,EAAO,GAAI2E,EAAImD,EAAEpN,QAAQ,KAE7B,OADIiK,GAAK,IAAG3E,EAAO8H,EAAE5Q,MAAMyN,EAAI,GAAImD,EAAIA,EAAE5Q,MAAM,EAAGyN,IAC3C,CAAChJ,KAAMmM,EAAG9H,KAAMA,MAI3B,SAAS6qJ,GAAS/H,GAChB,OAAO,WACL,IAAIxkH,EAAKzhC,KAAKiuJ,KACd,GAAKxsH,EAAL,CACA,IAAK,IAAkCysH,EAA9BppI,EAAI,EAAGhd,GAAK,EAAG3C,EAAIs8B,EAAGjhC,OAAWskB,EAAI3f,IAAK2f,EAC7CopI,EAAIzsH,EAAG3c,GAAMmhI,EAASnnJ,MAAQovJ,EAAEpvJ,OAASmnJ,EAASnnJ,MAASovJ,EAAE/qJ,OAAS8iJ,EAAS9iJ,KAGjFs+B,IAAK35B,GAAKomJ,EAFVluJ,KAAKoY,oBAAoB81I,EAAEpvJ,KAAMovJ,EAAEH,SAAUG,EAAE/1I,WAK7CrQ,EAAG25B,EAAGjhC,OAASsH,SACT9H,KAAKiuJ,OAIrB,SAASE,GAAMlI,EAAUhpJ,EAAOkb,GAC9B,OAAO,WACL,IAAoB+1I,EAAhBzsH,EAAKzhC,KAAKiuJ,KAASF,EAAWD,GAAgB7wJ,GAClD,GAAIwkC,EAAI,IAAK,IAAI3c,EAAI,EAAG3f,EAAIs8B,EAAGjhC,OAAQskB,EAAI3f,IAAK2f,EAC9C,IAAKopI,EAAIzsH,EAAG3c,IAAIhmB,OAASmnJ,EAASnnJ,MAAQovJ,EAAE/qJ,OAAS8iJ,EAAS9iJ,KAI5D,OAHAnD,KAAKoY,oBAAoB81I,EAAEpvJ,KAAMovJ,EAAEH,SAAUG,EAAE/1I,SAC/CnY,KAAK2C,iBAAiBurJ,EAAEpvJ,KAAMovJ,EAAEH,SAAWA,EAAUG,EAAE/1I,QAAUA,QACjE+1I,EAAEjxJ,MAAQA,GAId+C,KAAK2C,iBAAiBsjJ,EAASnnJ,KAAMivJ,EAAU51I,GAC/C+1I,EAAI,CAACpvJ,KAAMmnJ,EAASnnJ,KAAMqE,KAAM8iJ,EAAS9iJ,KAAMlG,MAAOA,EAAO8wJ,SAAUA,EAAU51I,QAASA,GACrFspB,EACAA,EAAGx+B,KAAKirJ,GADJluJ,KAAKiuJ,KAAO,CAACC,IAKX,uBACb,IAA+CpmJ,EAAyBmD,EAApE+6I,EAAY,GAAeC,EAAW,IAAQ1lJ,EAAIylJ,EAAUxlJ,OAEhE,KAAI0B,UAAU1B,OAAS,GAAvB,CAaA,IADAihC,EAAKxkC,EAAQkxJ,GAAQH,GAChBlmJ,EAAI,EAAGA,EAAIvH,IAAKuH,EAAG9H,KAAKurB,KAAKkW,EAAGukH,EAAUl+I,GAAI7K,EAAOkb,IAC1D,OAAOnY,KAbL,IAAIyhC,EAAKzhC,KAAKstB,OAAO2gI,KACrB,GAAIxsH,EAAI,IAAK,IAA0BysH,EAAtBppI,EAAI,EAAG3f,EAAIs8B,EAAGjhC,OAAWskB,EAAI3f,IAAK2f,EACjD,IAAKhd,EAAI,EAAGomJ,EAAIzsH,EAAG3c,GAAIhd,EAAIvH,IAAKuH,EAC9B,IAAKmD,EAAI+6I,EAAUl+I,IAAIhJ,OAASovJ,EAAEpvJ,MAAQmM,EAAE9H,OAAS+qJ,EAAE/qJ,KACrD,OAAO+qJ,EAAEjxJ,OCtDnB,SAASikC,GAAc5T,EAAMxuB,EAAMurE,GACjC,IAAItwE,EAAS,GAAYuzB,GACrB2Q,EAAQlkC,EAAOq0J,YAEE,oBAAVnwH,EACTA,EAAQ,IAAIA,EAAMn/B,EAAMurE,IAExBpsC,EAAQlkC,EAAOsE,SAAS0iC,YAAY,SAChCspC,GAAQpsC,EAAM+C,UAAUliC,EAAMurE,EAAOgkF,QAAShkF,EAAOikF,YAAarwH,EAAMswH,OAASlkF,EAAOkkF,QACvFtwH,EAAM+C,UAAUliC,GAAM,GAAO,IAGpCwuB,EAAK4T,cAAcjD,GAGrB,SAASuwH,GAAiB1vJ,EAAMurE,GAC9B,OAAO,WACL,OAAOnpC,GAAclhC,KAAMlB,EAAMurE,IAIrC,SAASokF,GAAiB3vJ,EAAMurE,GAC9B,OAAO,WACL,OAAOnpC,GAAclhC,KAAMlB,EAAMurE,EAAOxqE,MAAMG,KAAMkC,aAIzC,qBACb,OAAOlC,KAAKurB,MAAwB,oBAAX8+C,EACnBokF,GACAD,IAAkB1vJ,EAAMurE,KChCjB,eACb,IAAK,IAAIm8E,EAASxmJ,KAAKymJ,QAAS3hI,EAAI,EAAG3f,EAAIqhJ,EAAOhmJ,OAAQskB,EAAI3f,IAAK2f,EACjE,IAAK,IAAgDwI,EAA5Cye,EAAQy6G,EAAO1hI,GAAIhd,EAAI,EAAGvH,EAAIwrC,EAAMvrC,OAAcsH,EAAIvH,IAAKuH,GAC9DwlB,EAAOye,EAAMjkC,YAAUwlB,ICgCtB,GAAO,CAAC,MAEZ,SAASw5H,GAAUN,EAAQW,GAChCnnJ,KAAKymJ,QAAUD,EACfxmJ,KAAK+mJ,SAAWI,EAGlB,SAAS,KACP,OAAO,IAAIL,GAAU,CAAC,CAACzoJ,SAAS+uJ,kBAAmB,IAGrD,SAAS,KACP,OAAOptJ,KAGT8mJ,GAAU1lJ,UAAY,GAAUA,UAAY,CAC1C+Z,YAAa2rI,GACbP,OAAQmI,GACRjH,UAAW,GACXkH,YAAa,GACbC,eAAgB,GAChBv2H,OAAQw2H,GACRhuH,KAAMiuH,GACNtwB,MAAOuwB,GACPx3I,KAAMy3I,GACN3tJ,KAAM,GACN+qB,MAAO6iI,GACPjG,UAAW,GACXnzF,MAAO,GACP7nC,KAAM,GACNxzB,KAAM,GACN00J,MAAO,GACP5hI,KAAM6hI,GACNruJ,KAAMsuJ,GACNC,MAAOC,GACP/jI,KAAM,GACNgkI,KAAM,GACN51H,MAAO,GACPxL,SAAU,GACVqhI,QAAS,GACT//G,KAAMggH,GACNrlD,KAAM,GACN4iD,MAAO0C,GACPjT,MAAOkT,GACP1G,OAAQ,GACR2G,OAAQ,GACRpuH,OAAQquH,GACR91I,MAAO+1I,GACPpnC,MAAOqnC,GACPtuH,GAAIuuH,GACJnK,SAAUoK,GACV,CAACh1I,OAAOC,UAAW,IAGN,UCzFA,uBACbC,EAAY/Z,UAAY8uJ,EAAQ9uJ,UAAYA,EAC5CA,EAAU+Z,YAAcA,GAGnB,SAAS+Q,GAAOqB,EAAQm/F,GAC7B,IAAItrH,EAAYpH,OAAOqK,OAAOkpB,EAAOnsB,WACrC,IAAK,IAAIjF,KAAOuwH,EAAYtrH,EAAUjF,GAAOuwH,EAAWvwH,GACxD,OAAOiF,ECNF,SAAS+uJ,MAET,IAAIC,GAAS,GACTC,GAAW,EAAID,GAEtBE,GAAM,sBACNC,GAAM,gDACNC,GAAM,iDACNC,GAAQ,qBACRC,GAAe,IAAI73I,OAAO,UAAY,CAACy3I,GAAKA,GAAKA,IAAO,QACxDK,GAAe,IAAI93I,OAAO,UAAY,CAAC23I,GAAKA,GAAKA,IAAO,QACxDI,GAAgB,IAAI/3I,OAAO,WAAa,CAACy3I,GAAKA,GAAKA,GAAKC,IAAO,QAC/DM,GAAgB,IAAIh4I,OAAO,WAAa,CAAC23I,GAAKA,GAAKA,GAAKD,IAAO,QAC/DO,GAAe,IAAIj4I,OAAO,UAAY,CAAC03I,GAAKC,GAAKA,IAAO,QACxDO,GAAgB,IAAIl4I,OAAO,WAAa,CAAC03I,GAAKC,GAAKA,GAAKD,IAAO,QAE/DS,GAAQ,CACVC,UAAW,SACXC,aAAc,SACdC,KAAM,MACNC,WAAY,QACZC,MAAO,SACPC,MAAO,SACPC,OAAQ,SACRC,MAAO,EACPC,eAAgB,SAChBC,KAAM,IACNC,WAAY,QACZC,MAAO,SACPC,UAAW,SACXC,UAAW,QACXC,WAAY,QACZC,UAAW,SACXC,MAAO,SACPC,eAAgB,QAChBC,SAAU,SACVC,QAAS,SACTC,KAAM,MACNC,SAAU,IACVC,SAAU,MACVC,cAAe,SACfC,SAAU,SACVC,UAAW,MACXC,SAAU,SACVC,UAAW,SACXC,YAAa,QACbC,eAAgB,QAChBC,WAAY,SACZC,WAAY,SACZC,QAAS,QACTC,WAAY,SACZC,aAAc,QACdC,cAAe,QACfC,cAAe,QACfC,cAAe,QACfC,cAAe,MACfC,WAAY,QACZC,SAAU,SACVC,YAAa,MACbC,QAAS,QACTC,QAAS,QACTC,WAAY,QACZC,UAAW,SACXC,YAAa,SACbC,YAAa,QACbC,QAAS,SACTC,UAAW,SACXC,WAAY,SACZC,KAAM,SACNC,UAAW,SACXC,KAAM,QACNC,MAAO,MACPC,YAAa,SACbC,KAAM,QACNC,SAAU,SACVC,QAAS,SACTC,UAAW,SACXC,OAAQ,QACRC,MAAO,SACPC,MAAO,SACPC,SAAU,SACVC,cAAe,SACfC,UAAW,QACXC,aAAc,SACdC,UAAW,SACXC,WAAY,SACZC,UAAW,SACXC,qBAAsB,SACtBC,UAAW,SACXC,WAAY,QACZC,UAAW,SACXC,UAAW,SACXC,YAAa,SACbC,cAAe,QACfC,aAAc,QACdC,eAAgB,QAChBC,eAAgB,QAChBC,eAAgB,SAChBC,YAAa,SACbC,KAAM,MACNC,UAAW,QACXC,MAAO,SACPC,QAAS,SACTC,OAAQ,QACRC,iBAAkB,QAClBC,WAAY,IACZC,aAAc,SACdC,aAAc,QACdC,eAAgB,QAChBC,gBAAiB,QACjBC,kBAAmB,MACnBC,gBAAiB,QACjBC,gBAAiB,SACjBC,aAAc,QACdC,UAAW,SACXC,UAAW,SACXC,SAAU,SACVC,YAAa,SACbC,KAAM,IACNC,QAAS,SACTC,MAAO,QACPC,UAAW,QACXC,OAAQ,SACRC,UAAW,SACXC,OAAQ,SACRC,cAAe,SACfC,UAAW,SACXC,cAAe,SACfC,cAAe,SACfC,WAAY,SACZC,UAAW,SACXC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,WAAY,SACZC,OAAQ,QACRC,cAAe,QACfC,IAAK,SACLC,UAAW,SACXC,UAAW,QACXC,YAAa,QACbC,OAAQ,SACRC,WAAY,SACZC,SAAU,QACVC,SAAU,SACVC,OAAQ,SACRC,OAAQ,SACRC,QAAS,QACTC,UAAW,QACXC,UAAW,QACXC,UAAW,QACXC,KAAM,SACNC,YAAa,MACbC,UAAW,QACXvsJ,IAAK,SACLwsJ,KAAM,MACNC,QAAS,SACTC,OAAQ,SACRC,UAAW,QACXC,OAAQ,SACRC,MAAO,SACPC,MAAO,SACPC,WAAY,SACZC,OAAQ,SACRC,YAAa,UAiBf,SAASC,KACP,OAAOp6J,KAAKq6J,MAAMC,YAGpB,SAASC,KACP,OAAOC,GAAWx6J,MAAMy6J,YAG1B,SAASC,KACP,OAAO16J,KAAKq6J,MAAMM,YAGL,SAAS,GAAMzkJ,GAC5B,IAAI/Q,EAAGu7E,EAEP,OADAxqE,GAAUA,EAAS,IAAImD,OAAOpB,eACtB9S,EAAIsrJ,GAAM9xJ,KAAKuX,KAAYwqE,EAAIv7E,EAAE,GAAG3E,OAAQ2E,EAAIrF,SAASqF,EAAE,GAAI,IAAW,IAANu7E,EAAUk6E,GAAKz1J,GAC/E,IAANu7E,EAAU,IAAIm6E,GAAK11J,GAAK,EAAI,GAAQA,GAAK,EAAI,IAAQA,GAAK,EAAI,GAAY,IAAJA,GAAiB,GAAJA,IAAY,EAAU,GAAJA,EAAU,GACzG,IAANu7E,EAAUo6E,GAAK31J,GAAK,GAAK,IAAMA,GAAK,GAAK,IAAMA,GAAK,EAAI,KAAW,IAAJA,GAAY,KACrE,IAANu7E,EAAUo6E,GAAM31J,GAAK,GAAK,GAAQA,GAAK,EAAI,IAAQA,GAAK,EAAI,GAAQA,GAAK,EAAI,IAAQA,GAAK,EAAI,GAAY,IAAJA,IAAkB,GAAJA,IAAY,EAAU,GAAJA,GAAY,KAClJ,OACCA,EAAIurJ,GAAa/xJ,KAAKuX,IAAW,IAAI2kJ,GAAI11J,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAI,IAC3DA,EAAIwrJ,GAAahyJ,KAAKuX,IAAW,IAAI2kJ,GAAW,IAAP11J,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAK,IAC/FA,EAAIyrJ,GAAcjyJ,KAAKuX,IAAW4kJ,GAAK31J,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,KAC3DA,EAAI0rJ,GAAclyJ,KAAKuX,IAAW4kJ,GAAY,IAAP31J,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAY,IAAPA,EAAE,GAAW,IAAKA,EAAE,KAC/FA,EAAI2rJ,GAAanyJ,KAAKuX,IAAW6kJ,GAAK51J,EAAE,GAAIA,EAAE,GAAK,IAAKA,EAAE,GAAK,IAAK,IACpEA,EAAI4rJ,GAAcpyJ,KAAKuX,IAAW6kJ,GAAK51J,EAAE,GAAIA,EAAE,GAAK,IAAKA,EAAE,GAAK,IAAKA,EAAE,IACxE6rJ,GAAMxlI,eAAetV,GAAU0kJ,GAAK5J,GAAM96I,IAC/B,gBAAXA,EAA2B,IAAI2kJ,GAAIl2I,IAAKA,IAAKA,IAAK,GAClD,KAGR,SAASi2I,GAAKr6J,GACZ,OAAO,IAAIs6J,GAAIt6J,GAAK,GAAK,IAAMA,GAAK,EAAI,IAAU,IAAJA,EAAU,GAG1D,SAASu6J,GAAKr0J,EAAGuiB,EAAGtkB,EAAGD,GAErB,OADIA,GAAK,IAAGgC,EAAIuiB,EAAItkB,EAAIigB,KACjB,IAAIk2I,GAAIp0J,EAAGuiB,EAAGtkB,EAAGD,GAGnB,SAASu2J,GAAW9M,GAEzB,OADMA,aAAaiC,KAAQjC,EAAI,GAAMA,IAChCA,GACLA,EAAIA,EAAEmM,MACC,IAAIQ,GAAI3M,EAAEznJ,EAAGynJ,EAAEllI,EAAGklI,EAAExpJ,EAAGwpJ,EAAE3jB,UAFjB,IAAIswB,GAKd,SAAS,GAAIp0J,EAAGuiB,EAAGtkB,EAAG6lI,GAC3B,OAA4B,IAArBroI,UAAU1B,OAAew6J,GAAWv0J,GAAK,IAAIo0J,GAAIp0J,EAAGuiB,EAAGtkB,EAAc,MAAX6lI,EAAkB,EAAIA,GAGlF,SAASswB,GAAIp0J,EAAGuiB,EAAGtkB,EAAG6lI,GAC3BvqI,KAAKyG,GAAKA,EACVzG,KAAKgpB,GAAKA,EACVhpB,KAAK0E,GAAKA,EACV1E,KAAKuqI,SAAWA,EA2BlB,SAAS0wB,KACP,MAAO,IAAMliB,GAAI/4I,KAAKyG,GAAKsyI,GAAI/4I,KAAKgpB,GAAK+vH,GAAI/4I,KAAK0E,GAGpD,SAASw2J,KACP,IAAIz2J,EAAIzE,KAAKuqI,QACb,OADsB9lI,EAAIu8D,MAAMv8D,GAAK,EAAIpC,KAAKC,IAAI,EAAGD,KAAKgF,IAAI,EAAG5C,KACnD,IAANA,EAAU,OAAS,SACrBpC,KAAKC,IAAI,EAAGD,KAAKgF,IAAI,IAAKhF,KAAKiX,MAAMtZ,KAAKyG,IAAM,IAAM,KACtDpE,KAAKC,IAAI,EAAGD,KAAKgF,IAAI,IAAKhF,KAAKiX,MAAMtZ,KAAKgpB,IAAM,IAAM,KACtD3mB,KAAKC,IAAI,EAAGD,KAAKgF,IAAI,IAAKhF,KAAKiX,MAAMtZ,KAAK0E,IAAM,KACzC,IAAND,EAAU,IAAM,KAAOA,EAAI,KAGpC,SAASs0I,GAAI97I,GAEX,OADAA,EAAQoF,KAAKC,IAAI,EAAGD,KAAKgF,IAAI,IAAKhF,KAAKiX,MAAMrc,IAAU,KAC/CA,EAAQ,GAAK,IAAM,IAAMA,EAAMpD,SAAS,IAGlD,SAASkhK,GAAKI,EAAGpwJ,EAAG21E,EAAGj8E,GAIrB,OAHIA,GAAK,EAAG02J,EAAIpwJ,EAAI21E,EAAI/7D,IACf+7D,GAAK,GAAKA,GAAK,EAAGy6E,EAAIpwJ,EAAI4Z,IAC1B5Z,GAAK,IAAGowJ,EAAIx2I,KACd,IAAIy2I,GAAID,EAAGpwJ,EAAG21E,EAAGj8E,GAGnB,SAAS+1J,GAAWtM,GACzB,GAAIA,aAAakN,GAAK,OAAO,IAAIA,GAAIlN,EAAEiN,EAAGjN,EAAEnjJ,EAAGmjJ,EAAExtE,EAAGwtE,EAAE3jB,SAEtD,GADM2jB,aAAaiC,KAAQjC,EAAI,GAAMA,KAChCA,EAAG,OAAO,IAAIkN,GACnB,GAAIlN,aAAakN,GAAK,OAAOlN,EAC7BA,EAAIA,EAAEmM,MACN,IAAI5zJ,EAAIynJ,EAAEznJ,EAAI,IACVuiB,EAAIklI,EAAEllI,EAAI,IACVtkB,EAAIwpJ,EAAExpJ,EAAI,IACV2C,EAAMhF,KAAKgF,IAAIZ,EAAGuiB,EAAGtkB,GACrBpC,EAAMD,KAAKC,IAAImE,EAAGuiB,EAAGtkB,GACrBy2J,EAAIx2I,IACJ5Z,EAAIzI,EAAM+E,EACVq5E,GAAKp+E,EAAM+E,GAAO,EAUtB,OATI0D,GACaowJ,EAAX10J,IAAMnE,GAAU0mB,EAAItkB,GAAKqG,EAAc,GAATie,EAAItkB,GAC7BskB,IAAM1mB,GAAUoC,EAAI+B,GAAKsE,EAAI,GAC5BtE,EAAIuiB,GAAKje,EAAI,EACvBA,GAAK21E,EAAI,GAAMp+E,EAAM+E,EAAM,EAAI/E,EAAM+E,EACrC8zJ,GAAK,IAELpwJ,EAAI21E,EAAI,GAAKA,EAAI,EAAI,EAAIy6E,EAEpB,IAAIC,GAAID,EAAGpwJ,EAAG21E,EAAGwtE,EAAE3jB,SAGrB,SAAS8wB,GAAIF,EAAGpwJ,EAAG21E,EAAG6pD,GAC3B,OAA4B,IAArBroI,UAAU1B,OAAeg6J,GAAWW,GAAK,IAAIC,GAAID,EAAGpwJ,EAAG21E,EAAc,MAAX6pD,EAAkB,EAAIA,GAGzF,SAAS6wB,GAAID,EAAGpwJ,EAAG21E,EAAG6pD,GACpBvqI,KAAKm7J,GAAKA,EACVn7J,KAAK+K,GAAKA,EACV/K,KAAK0gF,GAAKA,EACV1gF,KAAKuqI,SAAWA,EAyClB,SAAS+wB,GAAQH,EAAG5R,EAAIgS,GACtB,OAGY,KAHJJ,EAAI,GAAK5R,GAAMgS,EAAKhS,GAAM4R,EAAI,GAChCA,EAAI,IAAMI,EACVJ,EAAI,IAAM5R,GAAMgS,EAAKhS,IAAO,IAAM4R,GAAK,GACvC5R,GCjXD,SAASiS,GAAMC,EAAIC,EAAIzmC,EAAIC,EAAIymC,GACpC,IAAIC,EAAKH,EAAKA,EAAII,EAAKD,EAAKH,EAC5B,QAAS,EAAI,EAAIA,EAAK,EAAIG,EAAKC,GAAMH,GAC9B,EAAI,EAAIE,EAAK,EAAIC,GAAM5mC,GACvB,EAAI,EAAIwmC,EAAK,EAAIG,EAAK,EAAIC,GAAM3mC,EACjC2mC,EAAKF,GAAM,EDoKnB9+F,GAAOszF,GAAO,GAAO,CACnBhgJ,KAAM,SAASm0B,GACb,OAAOtqC,OAAO4wB,OAAO,IAAI5qB,KAAKmb,YAAanb,KAAMskC,IAEnDw3H,YAAa,WACX,OAAO97J,KAAKq6J,MAAMyB,eAEpB/iB,IAAKqhB,GACLE,UAAWF,GACXK,UAAWF,GACXI,UAAWD,GACX7gK,SAAU6gK,KA6DZ79F,GAAOg+F,GAAK,GAAK3uI,GAAOikI,GAAO,CAC7BE,SAAU,SAASpc,GAEjB,OADAA,EAAS,MAALA,EAAYoc,GAAWhuJ,KAAK+mD,IAAIinG,GAAUpc,GACvC,IAAI4mB,GAAI76J,KAAKyG,EAAIwtI,EAAGj0I,KAAKgpB,EAAIirH,EAAGj0I,KAAK0E,EAAIuvI,EAAGj0I,KAAKuqI,UAE1D6lB,OAAQ,SAASnc,GAEf,OADAA,EAAS,MAALA,EAAYmc,GAAS/tJ,KAAK+mD,IAAIgnG,GAAQnc,GACnC,IAAI4mB,GAAI76J,KAAKyG,EAAIwtI,EAAGj0I,KAAKgpB,EAAIirH,EAAGj0I,KAAK0E,EAAIuvI,EAAGj0I,KAAKuqI,UAE1D8vB,IAAK,WACH,OAAOr6J,MAET87J,YAAa,WACX,OAAS,IAAO97J,KAAKyG,GAAKzG,KAAKyG,EAAI,QAC1B,IAAOzG,KAAKgpB,GAAKhpB,KAAKgpB,EAAI,QAC1B,IAAOhpB,KAAK0E,GAAK1E,KAAK0E,EAAI,OAC3B,GAAK1E,KAAKuqI,SAAWvqI,KAAKuqI,SAAW,GAE/CwO,IAAKkiB,GACLX,UAAWW,GACXN,UAAWO,GACXrhK,SAAUqhK,MAiEZr+F,GAAOu+F,GAAKC,GAAKnvI,GAAOikI,GAAO,CAC7BE,SAAU,SAASpc,GAEjB,OADAA,EAAS,MAALA,EAAYoc,GAAWhuJ,KAAK+mD,IAAIinG,GAAUpc,GACvC,IAAImnB,GAAIp7J,KAAKm7J,EAAGn7J,KAAK+K,EAAG/K,KAAK0gF,EAAIuzD,EAAGj0I,KAAKuqI,UAElD6lB,OAAQ,SAASnc,GAEf,OADAA,EAAS,MAALA,EAAYmc,GAAS/tJ,KAAK+mD,IAAIgnG,GAAQnc,GACnC,IAAImnB,GAAIp7J,KAAKm7J,EAAGn7J,KAAK+K,EAAG/K,KAAK0gF,EAAIuzD,EAAGj0I,KAAKuqI,UAElD8vB,IAAK,WACH,IAAIc,EAAIn7J,KAAKm7J,EAAI,IAAqB,KAAdn7J,KAAKm7J,EAAI,GAC7BpwJ,EAAIi2D,MAAMm6F,IAAMn6F,MAAMhhE,KAAK+K,GAAK,EAAI/K,KAAK+K,EACzC21E,EAAI1gF,KAAK0gF,EACT66E,EAAK76E,GAAKA,EAAI,GAAMA,EAAI,EAAIA,GAAK31E,EACjCw+I,EAAK,EAAI7oE,EAAI66E,EACjB,OAAO,IAAIV,GACTS,GAAQH,GAAK,IAAMA,EAAI,IAAMA,EAAI,IAAK5R,EAAIgS,GAC1CD,GAAQH,EAAG5R,EAAIgS,GACfD,GAAQH,EAAI,IAAMA,EAAI,IAAMA,EAAI,IAAK5R,EAAIgS,GACzCv7J,KAAKuqI,UAGTuxB,YAAa,WACX,OAAQ,GAAK97J,KAAK+K,GAAK/K,KAAK+K,GAAK,GAAKi2D,MAAMhhE,KAAK+K,KACzC,GAAK/K,KAAK0gF,GAAK1gF,KAAK0gF,GAAK,GACzB,GAAK1gF,KAAKuqI,SAAWvqI,KAAKuqI,SAAW,GAE/CkwB,UAAW,WACT,IAAIh2J,EAAIzE,KAAKuqI,QACb,OADsB9lI,EAAIu8D,MAAMv8D,GAAK,EAAIpC,KAAKC,IAAI,EAAGD,KAAKgF,IAAI,EAAG5C,KACnD,IAANA,EAAU,OAAS,UACpBzE,KAAKm7J,GAAK,GAAK,KACA,KAAfn7J,KAAK+K,GAAK,GAAW,MACN,KAAf/K,KAAK0gF,GAAK,GAAW,KACf,IAANj8E,EAAU,IAAM,KAAOA,EAAI,SChWvB,mBACb,IAAIlE,EAAIwb,EAAOvb,OAAS,EACxB,OAAO,SAASyK,GACd,IAAInD,EAAImD,GAAK,EAAKA,EAAI,EAAKA,GAAK,GAAKA,EAAI,EAAG1K,EAAI,GAAK8B,KAAK6lC,MAAMj9B,EAAI1K,GAChE00H,EAAKl5G,EAAOjU,GACZotH,EAAKn5G,EAAOjU,EAAI,GAChB4zJ,EAAK5zJ,EAAI,EAAIiU,EAAOjU,EAAI,GAAK,EAAImtH,EAAKC,EACtCymC,EAAK7zJ,EAAIvH,EAAI,EAAIwb,EAAOjU,EAAI,GAAK,EAAIotH,EAAKD,EAC9C,OAAOumC,IAAOvwJ,EAAInD,EAAIvH,GAAKA,EAAGm7J,EAAIzmC,EAAIC,EAAIymC,KCd/B,eACb,IAAIp7J,EAAIwb,EAAOvb,OACf,OAAO,SAASyK,GACd,IAAInD,EAAIzF,KAAK6lC,QAAQj9B,GAAK,GAAK,IAAMA,EAAIA,GAAK1K,GAC1Cm7J,EAAK3/I,GAAQjU,EAAIvH,EAAI,GAAKA,GAC1B00H,EAAKl5G,EAAOjU,EAAIvH,GAChB20H,EAAKn5G,GAAQjU,EAAI,GAAKvH,GACtBo7J,EAAK5/I,GAAQjU,EAAI,GAAKvH,GAC1B,OAAOi7J,IAAOvwJ,EAAInD,EAAIvH,GAAKA,EAAGm7J,EAAIzmC,EAAIC,EAAIymC,KCV/B,GAAAv2J,GAAA,IAAAA,ECEf,SAAS22J,GAAOt3J,EAAG2hD,GACjB,OAAO,SAASn7C,GACd,OAAOxG,EAAIwG,EAAIm7C,GAInB,SAAS41G,GAAYv3J,EAAGC,EAAGW,GACzB,OAAOZ,EAAIpC,KAAK+mD,IAAI3kD,EAAGY,GAAIX,EAAIrC,KAAK+mD,IAAI1kD,EAAGW,GAAKZ,EAAGY,EAAI,EAAIA,EAAG,SAAS4F,GACrE,OAAO5I,KAAK+mD,IAAI3kD,EAAIwG,EAAIvG,EAAGW,IASxB,SAAS42J,GAAM52J,GACpB,OAAoB,KAAZA,GAAKA,GAAW62J,GAAU,SAASz3J,EAAGC,GAC5C,OAAOA,EAAID,EAAIu3J,GAAYv3J,EAAGC,EAAGW,GAAK,GAAS27D,MAAMv8D,GAAKC,EAAID,IAInD,SAASy3J,GAAQz3J,EAAGC,GACjC,IAAI0hD,EAAI1hD,EAAID,EACZ,OAAO2hD,EAAI21G,GAAOt3J,EAAG2hD,GAAK,GAAS4a,MAAMv8D,GAAKC,EAAID,GCtBrC,qBACb,IAAI4kC,EAAQ4yH,GAAM52J,GAElB,SAASg1J,EAAIlhJ,EAAOC,GAClB,IAAI3S,EAAI4iC,GAAOlwB,EAAQ,GAASA,IAAQ1S,GAAI2S,EAAM,GAASA,IAAM3S,GAC7DuiB,EAAIqgB,EAAMlwB,EAAM6P,EAAG5P,EAAI4P,GACvBtkB,EAAI2kC,EAAMlwB,EAAMzU,EAAG0U,EAAI1U,GACvB6lI,EAAU2xB,GAAQ/iJ,EAAMoxH,QAASnxH,EAAImxH,SACzC,OAAO,SAASt/H,GAKd,OAJAkO,EAAM1S,EAAIA,EAAEwE,GACZkO,EAAM6P,EAAIA,EAAE/d,GACZkO,EAAMzU,EAAIA,EAAEuG,GACZkO,EAAMoxH,QAAUA,EAAQt/H,GACjBkO,EAAQ,IAMnB,OAFAkhJ,EAAI4B,MAAQE,EAEL9B,EAnBM,CAoBZ,GAEH,SAAS+B,GAAUC,GACjB,OAAO,SAASxuB,GACd,IAII/lI,EAAGuhC,EAJH9oC,EAAIstI,EAAOrtI,OACXiG,EAAI,IAAIpG,MAAME,GACdyoB,EAAI,IAAI3oB,MAAME,GACdmE,EAAI,IAAIrE,MAAME,GAElB,IAAKuH,EAAI,EAAGA,EAAIvH,IAAKuH,EACnBuhC,EAAQ,GAASwkG,EAAO/lI,IACxBrB,EAAEqB,GAAKuhC,EAAM5iC,GAAK,EAClBuiB,EAAElhB,GAAKuhC,EAAMrgB,GAAK,EAClBtkB,EAAEoD,GAAKuhC,EAAM3kC,GAAK,EAMpB,OAJA+B,EAAI41J,EAAO51J,GACXuiB,EAAIqzI,EAAOrzI,GACXtkB,EAAI23J,EAAO33J,GACX2kC,EAAMkhG,QAAU,EACT,SAASt/H,GAId,OAHAo+B,EAAM5iC,EAAIA,EAAEwE,GACZo+B,EAAMrgB,EAAIA,EAAE/d,GACZo+B,EAAM3kC,EAAIA,EAAEuG,GACLo+B,EAAQ,KAKC+yH,GAAU,IACJA,GAAUE,ICtDvB,ICAA,iBACb,OAAO73J,GAAKA,EAAGC,GAAKA,EAAG,SAASuG,GAC9B,OAAOxG,GAAK,EAAIwG,GAAKvG,EAAIuG,ICAzBsxJ,GAAM,8CACNC,GAAM,IAAI3jJ,OAAO0jJ,GAAIvwI,OAAQ,KAEjC,SAAS,GAAKtnB,GACZ,OAAO,WACL,OAAOA,GAIX,SAAS+3J,GAAI/3J,GACX,OAAO,SAASuG,GACd,OAAOvG,EAAEuG,GAAK,IAIH,ICbXyxJ,GACAC,GDYW,iBACb,IACIC,EACAC,EACAC,EAHAC,EAAKR,GAAIS,UAAYR,GAAIQ,UAAY,EAIrCl1J,GAAK,EACLiD,EAAI,GACJrF,EAAI,GAGRjB,GAAQ,GAAIC,GAAQ,GAGpB,OAAQk4J,EAAKL,GAAI59J,KAAK8F,MACdo4J,EAAKL,GAAI79J,KAAK+F,KACfo4J,EAAKD,EAAG16J,OAAS46J,IACpBD,EAAKp4J,EAAErK,MAAM0iK,EAAID,GACb/xJ,EAAEjD,GAAIiD,EAAEjD,IAAMg1J,EACb/xJ,IAAIjD,GAAKg1J,IAEXF,EAAKA,EAAG,OAASC,EAAKA,EAAG,IACxB9xJ,EAAEjD,GAAIiD,EAAEjD,IAAM+0J,EACb9xJ,IAAIjD,GAAK+0J,GAEd9xJ,IAAIjD,GAAK,KACTpC,EAAEzC,KAAK,CAAC6E,EAAGA,EAAG1C,EAAG,GAAOw3J,EAAIC,MAE9BE,EAAKP,GAAIQ,UAYX,OARID,EAAKr4J,EAAElE,SACTs8J,EAAKp4J,EAAErK,MAAM0iK,GACThyJ,EAAEjD,GAAIiD,EAAEjD,IAAMg1J,EACb/xJ,IAAIjD,GAAKg1J,GAKT/xJ,EAAEvK,OAAS,EAAKkF,EAAE,GACnB+2J,GAAI/2J,EAAE,GAAGN,GACT,GAAKV,IACJA,EAAIgB,EAAElF,OAAQ,SAASyK,GACtB,IAAK,IAAWijJ,EAAPpmJ,EAAI,EAAMA,EAAIpD,IAAKoD,EAAGiD,GAAGmjJ,EAAIxoJ,EAAEoC,IAAIA,GAAKomJ,EAAE9oJ,EAAE6F,GACrD,OAAOF,EAAE1J,KAAK,OC7DpB,GAAQ,EACR6pB,GAAU,EACVmU,GAAW,EACX49H,GAAY,IAGZC,GAAY,EACZC,GAAW,EACXC,GAAY,EACZC,GAA+B,kBAAhB1iK,aAA4BA,YAAYC,IAAMD,YAAcK,KAC3EsiK,GAA6B,kBAAXvjK,QAAuBA,OAAOw1G,sBAAwBx1G,OAAOw1G,sBAAsBlzG,KAAKtC,QAAU,SAASH,GAAK6c,WAAW7c,EAAG,KAE7I,SAASgB,KACd,OAAOuiK,KAAaG,GAASC,IAAWJ,GAAWE,GAAMziK,MAAQwiK,IAGnE,SAASG,KACPJ,GAAW,EAGN,SAASK,KACdx9J,KAAKy9J,MACLz9J,KAAKkuC,MACLluC,KAAK+nJ,MAAQ,KA0BR,SAASvyD,GAAM9kE,EAAUiU,EAAO5F,GACrC,IAAI9zB,EAAI,IAAIuyJ,GAEZ,OADAvyJ,EAAEyyJ,QAAQhtI,EAAUiU,EAAO5F,GACpB9zB,EAGF,SAAS0yJ,KACd/iK,OACE,GACF,IAAkBgxB,EAAd3gB,EAAIyxJ,GACR,MAAOzxJ,GACA2gB,EAAIuxI,GAAWlyJ,EAAEijC,QAAU,GAAGjjC,EAAEwyJ,MAAMjjK,UAAKkF,EAAWksB,GAC3D3gB,EAAIA,EAAE88I,QAEN,GAGJ,SAAS6V,KACPT,IAAYD,GAAYG,GAAMziK,OAASwiK,GACvC,GAAQlyI,GAAU,EAClB,IACEyyI,KACA,QACA,GAAQ,EACRE,KACAV,GAAW,GAIf,SAASW,KACP,IAAIljK,EAAMyiK,GAAMziK,MAAO+pC,EAAQ/pC,EAAMsiK,GACjCv4H,EAAQs4H,KAAWG,IAAaz4H,EAAOu4H,GAAYtiK,GAGzD,SAASijK,KACP,IAAIE,EAAmBnC,EAAfH,EAAKiB,GAAc39H,EAAO5xB,IAClC,MAAOsuJ,EACDA,EAAGgC,OACD1+H,EAAO08H,EAAGvtH,QAAOnP,EAAO08H,EAAGvtH,OAC/B6vH,EAAKtC,EAAIA,EAAKA,EAAG1T,QAEjB6T,EAAKH,EAAG1T,MAAO0T,EAAG1T,MAAQ,KAC1B0T,EAAKsC,EAAKA,EAAGhW,MAAQ6T,EAAKc,GAAWd,GAGzCe,GAAWoB,EACXC,GAAMj/H,GAGR,SAASi/H,GAAMj/H,GACb,IAAI,GAAJ,CACI7T,KAASA,GAAUiU,aAAajU,KACpC,IAAIyZ,EAAQ5F,EAAOo+H,GACfx4H,EAAQ,IACN5F,EAAO5xB,MAAU+d,GAAUzU,WAAWmnJ,GAAM7+H,EAAOs+H,GAAMziK,MAAQwiK,KACjE/9H,KAAUA,GAAW4+H,cAAc5+H,OAElCA,KAAU69H,GAAYG,GAAMziK,MAAOykC,GAAW6+H,YAAYJ,GAAMb,KACrE,GAAQ,EAAGK,GAASM,MAjFxBJ,GAAMp8J,UAAYo0F,GAAMp0F,UAAY,CAClC+Z,YAAaqiJ,GACbE,QAAS,SAAShtI,EAAUiU,EAAO5F,GACjC,GAAwB,oBAAbrO,EAAyB,MAAM,IAAInO,UAAU,8BACxDwc,GAAgB,MAARA,EAAenkC,MAASmkC,IAAkB,MAAT4F,EAAgB,GAAKA,GACzD3kC,KAAK+nJ,OAAS4U,KAAa38J,OAC1B28J,GAAUA,GAAS5U,MAAQ/nJ,KAC1B08J,GAAW18J,KAChB28J,GAAW38J,MAEbA,KAAKy9J,MAAQ/sI,EACb1wB,KAAKkuC,MAAQnP,EACbi/H,MAEF78H,KAAM,WACAnhC,KAAKy9J,QACPz9J,KAAKy9J,MAAQ,KACbz9J,KAAKkuC,MAAQ/gC,IACb6wJ,QC1CS,uBACb,IAAI/yJ,EAAI,IAAIuyJ,GAMZ,OALA74H,EAAiB,MAATA,EAAgB,GAAKA,EAC7B15B,EAAEyyJ,QAAQS,IACRlzJ,EAAEk2B,OACFzQ,EAASytI,EAAUx5H,IAClBA,EAAO5F,GACH9zB,GCNLmzJ,GAAU,GAAS,QAAS,MAAO,SAAU,aAC7CC,GAAa,GAENC,GAAU,EACVC,GAAY,EACZC,GAAW,EACXC,GAAU,EACVC,GAAU,EACVC,GAAS,EACTC,GAAQ,EAEJ,yBACb,IAAIC,EAAYvxI,EAAKwxI,aACrB,GAAKD,GACA,GAAI1iI,KAAM0iI,EAAW,YADVvxI,EAAKwxI,aAAe,GAEpC,GAAOxxI,EAAM6O,EAAI,CACfh5B,KAAMA,EACNhB,MAAOA,EACP4pC,MAAOA,EACPtK,GAAI28H,GACJW,MAAOV,GACPt/H,KAAMigI,EAAOjgI,KACb4F,MAAOq6H,EAAOr6H,MACdC,SAAUo6H,EAAOp6H,SACjBq6H,KAAMD,EAAOC,KACbzpE,MAAO,KACPp5E,MAAOkiJ,MAIJ,SAAS,GAAKhxI,EAAM6O,GACzB,IAAI+iI,EAAW,GAAI5xI,EAAM6O,GACzB,GAAI+iI,EAAS9iJ,MAAQkiJ,GAAS,MAAM,IAAIvsJ,MAAM,+BAC9C,OAAOmtJ,EAGF,SAAS,GAAI5xI,EAAM6O,GACxB,IAAI+iI,EAAW,GAAI5xI,EAAM6O,GACzB,GAAI+iI,EAAS9iJ,MAAQqiJ,GAAS,MAAM,IAAI1sJ,MAAM,6BAC9C,OAAOmtJ,EAGF,SAAS,GAAI5xI,EAAM6O,GACxB,IAAI+iI,EAAW5xI,EAAKwxI,aACpB,IAAKI,KAAcA,EAAWA,EAAS/iI,IAAM,MAAM,IAAIpqB,MAAM,wBAC7D,OAAOmtJ,EAGT,SAAS,GAAO5xI,EAAM6O,EAAI/9B,GACxB,IACI2gK,EADAF,EAAYvxI,EAAKwxI,aAQrB,SAASI,EAASf,GAChB//J,EAAKge,MAAQmiJ,GACbngK,EAAKo3F,MAAMkoE,QAAQvkJ,EAAO/a,EAAKumC,MAAOvmC,EAAK2gC,MAGvC3gC,EAAKumC,OAASw5H,GAAShlJ,EAAMglJ,EAAU//J,EAAKumC,OAGlD,SAASxrB,EAAMglJ,GACb,IAAIr2J,EAAGgd,EAAGvkB,EAAG2tJ,EAGb,GAAI9vJ,EAAKge,QAAUmiJ,GAAW,OAAOp9H,IAErC,IAAKr5B,KAAK+2J,EAER,GADA3Q,EAAI2Q,EAAU/2J,GACVomJ,EAAE/qJ,OAAS/E,EAAK+E,KAApB,CAKA,GAAI+qJ,EAAE9xI,QAAUqiJ,GAAS,OAAO,GAAQtlJ,GAGpC+0I,EAAE9xI,QAAUsiJ,IACdxQ,EAAE9xI,MAAQwiJ,GACV1Q,EAAE14D,MAAMr0D,OACR+sH,EAAEzsH,GAAGjnC,KAAK,YAAa8yB,EAAMA,EAAKu5H,SAAUqH,EAAE/rJ,MAAO+rJ,EAAEniH,cAChD8yH,EAAU/2J,KAITA,EAAIq0B,IACZ+xH,EAAE9xI,MAAQwiJ,GACV1Q,EAAE14D,MAAMr0D,OACR+sH,EAAEzsH,GAAGjnC,KAAK,SAAU8yB,EAAMA,EAAKu5H,SAAUqH,EAAE/rJ,MAAO+rJ,EAAEniH,cAC7C8yH,EAAU/2J,IAoBrB,GAZA,IAAQ,WACF1J,EAAKge,QAAUqiJ,KACjBrgK,EAAKge,MAAQsiJ,GACbtgK,EAAKo3F,MAAMkoE,QAAQzqD,EAAM70G,EAAKumC,MAAOvmC,EAAK2gC,MAC1Ck0E,EAAKkrD,OAMT//J,EAAKge,MAAQoiJ,GACbpgK,EAAKqjC,GAAGjnC,KAAK,QAAS8yB,EAAMA,EAAKu5H,SAAUzoJ,EAAK+D,MAAO/D,EAAK2tC,OACxD3tC,EAAKge,QAAUoiJ,GAAnB,CAKA,IAJApgK,EAAKge,MAAQqiJ,GAGbM,EAAQ,IAAI1+J,MAAME,EAAInC,EAAK2gK,MAAMv+J,QAC5BsH,EAAI,EAAGgd,GAAK,EAAGhd,EAAIvH,IAAKuH,GACvBomJ,EAAI9vJ,EAAK2gK,MAAMj3J,GAAG7K,MAAMzC,KAAK8yB,EAAMA,EAAKu5H,SAAUzoJ,EAAK+D,MAAO/D,EAAK2tC,UACrEgzH,IAAQj6I,GAAKopI,GAGjB6Q,EAAMv+J,OAASskB,EAAI,GAGrB,SAASmuF,EAAKkrD,GACZ,IAAIlzJ,EAAIkzJ,EAAU//J,EAAKwmC,SAAWxmC,EAAK6gK,KAAKzkK,KAAK,KAAM2jK,EAAU//J,EAAKwmC,WAAaxmC,EAAKo3F,MAAMkoE,QAAQv8H,GAAO/iC,EAAKge,MAAQuiJ,GAAQ,GAC9H72J,GAAK,EACLvH,EAAIw+J,EAAMv+J,OAEd,QAASsH,EAAIvH,EACXw+J,EAAMj3J,GAAGtN,KAAK8yB,EAAMriB,GAIlB7M,EAAKge,QAAUuiJ,KACjBvgK,EAAKqjC,GAAGjnC,KAAK,MAAO8yB,EAAMA,EAAKu5H,SAAUzoJ,EAAK+D,MAAO/D,EAAK2tC,OAC1D5K,KAIJ,SAASA,IAIP,IAAK,IAAIr5B,KAHT1J,EAAKge,MAAQwiJ,GACbxgK,EAAKo3F,MAAMr0D,cACJ09H,EAAU1iI,GACH0iI,EAAW,cAClBvxI,EAAKwxI,aA7FdD,EAAU1iI,GAAM/9B,EAChBA,EAAKo3F,MAAQA,GAAM0pE,EAAU,EAAG9gK,EAAK2gC,MCxDxB,ICAXogI,GDAW,iBACb,IACID,EACApzB,EAEAhkI,EAJA+2J,EAAYvxI,EAAKwxI,aAGjBzP,GAAQ,EAGZ,GAAKwP,EAAL,CAIA,IAAK/2J,KAFL3E,EAAe,MAARA,EAAe,KAAOA,EAAO,GAE1B07J,GACHK,EAAWL,EAAU/2J,IAAI3E,OAASA,GACvC2oI,EAASozB,EAAS9iJ,MAAQoiJ,IAAYU,EAAS9iJ,MAAQuiJ,GACvDO,EAAS9iJ,MAAQwiJ,GACjBM,EAAS1pE,MAAMr0D,OACf+9H,EAASz9H,GAAGjnC,KAAKsxI,EAAS,YAAc,SAAUx+G,EAAMA,EAAKu5H,SAAUqY,EAAS/8J,MAAO+8J,EAASnzH,cACzF8yH,EAAU/2J,IAL8BunJ,GAAQ,EAQrDA,UAAc/hI,EAAKwxI,eEpBV,eACb,OAAO9+J,KAAKurB,MAAK,WACf6zI,GAAUp/J,KAAMmD,OCJhBk8J,GAAU,IAAMh9J,KAAKwP,GAEd,GAAW,CACpBytJ,WAAY,EACZC,WAAY,EACZ10J,OAAQ,EACR20J,MAAO,EACP5xG,OAAQ,EACRC,OAAQ,GAGK,sBAAAj0D,GACb,IAAIg0D,EAAQC,EAAQ2xG,EAKpB,OAJI5xG,EAASvrD,KAAK2E,KAAKvC,EAAIA,EAAIC,EAAIA,MAAID,GAAKmpD,EAAQlpD,GAAKkpD,IACrD4xG,EAAQ/6J,EAAIuG,EAAItG,EAAI0hD,KAAGp7C,GAAKvG,EAAI+6J,EAAOp5G,GAAK1hD,EAAI86J,IAChD3xG,EAASxrD,KAAK2E,KAAKgE,EAAIA,EAAIo7C,EAAIA,MAAIp7C,GAAK6iD,EAAQzH,GAAKyH,EAAQ2xG,GAAS3xG,GACtEppD,EAAI2hD,EAAI1hD,EAAIsG,IAAGvG,GAAKA,EAAGC,GAAKA,EAAG86J,GAASA,EAAO5xG,GAAUA,GACtD,CACL0xG,WAAY1zI,EACZ2zI,WAAY3lK,EACZiR,OAAQxI,KAAKqyB,MAAMhwB,EAAGD,GAAK46J,GAC3BG,MAAOn9J,KAAKunD,KAAK41G,GAASH,GAC1BzxG,OAAQA,EACRC,OAAQA,IFlBL,SAAS4xG,GAASxiK,GACvB,MAAMkI,EAAI,IAA0B,oBAAdu6J,UAA2BA,UAAYC,iBAAiB1iK,EAAQ,IACtF,OAAOkI,EAAEy6J,WAAa,GAAWC,GAAU16J,EAAEV,EAAGU,EAAET,EAAGS,EAAE6F,EAAG7F,EAAEihD,EAAGjhD,EAAEymB,EAAGzmB,EAAEvL,GAGjE,SAASkmK,GAAS7iK,GACvB,OAAa,MAATA,EAAsB,IACrBkiK,KAASA,GAAU9gK,SAASgvJ,gBAAgB,6BAA8B,MAC/E8R,GAAQvU,aAAa,YAAa3tJ,IAC5BA,EAAQkiK,GAAQ36E,UAAUu7E,QAAQC,gBACxC/iK,EAAQA,EAAMiqD,OACP24G,GAAU5iK,EAAMwH,EAAGxH,EAAMyH,EAAGzH,EAAM+N,EAAG/N,EAAMmpD,EAAGnpD,EAAM2uB,EAAG3uB,EAAMrD,IAFL,IGXjE,SAASqmK,GAAqB14H,EAAO24H,EAASC,EAASC,GAErD,SAASvhC,EAAI9zH,GACX,OAAOA,EAAEvK,OAASuK,EAAE8zH,MAAQ,IAAM,GAGpC,SAASl0H,EAAU01J,EAAIC,EAAIC,EAAIC,EAAIz1J,EAAGrF,GACpC,GAAI26J,IAAOE,GAAMD,IAAOE,EAAI,CAC1B,IAAI14J,EAAIiD,EAAE9H,KAAK,aAAc,KAAMi9J,EAAS,KAAMC,GAClDz6J,EAAEzC,KAAK,CAAC6E,EAAGA,EAAI,EAAG1C,EAAG,GAAOi7J,EAAIE,IAAM,CAACz4J,EAAGA,EAAI,EAAG1C,EAAG,GAAOk7J,EAAIE,UACtDD,GAAMC,IACfz1J,EAAE9H,KAAK,aAAes9J,EAAKL,EAAUM,EAAKL,GAI9C,SAASt1J,EAAOpG,EAAGC,EAAGqG,EAAGrF,GACnBjB,IAAMC,GACJD,EAAIC,EAAI,IAAKA,GAAK,IAAcA,EAAID,EAAI,MAAKA,GAAK,KACtDiB,EAAEzC,KAAK,CAAC6E,EAAGiD,EAAE9H,KAAK47H,EAAI9zH,GAAK,UAAW,KAAMq1J,GAAY,EAAGh7J,EAAG,GAAOX,EAAGC,MAC/DA,GACTqG,EAAE9H,KAAK47H,EAAI9zH,GAAK,UAAYrG,EAAI07J,GAIpC,SAASZ,EAAM/6J,EAAGC,EAAGqG,EAAGrF,GAClBjB,IAAMC,EACRgB,EAAEzC,KAAK,CAAC6E,EAAGiD,EAAE9H,KAAK47H,EAAI9zH,GAAK,SAAU,KAAMq1J,GAAY,EAAGh7J,EAAG,GAAOX,EAAGC,KAC9DA,GACTqG,EAAE9H,KAAK47H,EAAI9zH,GAAK,SAAWrG,EAAI07J,GAInC,SAASjuJ,EAAMkuJ,EAAIC,EAAIC,EAAIC,EAAIz1J,EAAGrF,GAChC,GAAI26J,IAAOE,GAAMD,IAAOE,EAAI,CAC1B,IAAI14J,EAAIiD,EAAE9H,KAAK47H,EAAI9zH,GAAK,SAAU,KAAM,IAAK,KAAM,KACnDrF,EAAEzC,KAAK,CAAC6E,EAAGA,EAAI,EAAG1C,EAAG,GAAOi7J,EAAIE,IAAM,CAACz4J,EAAGA,EAAI,EAAG1C,EAAG,GAAOk7J,EAAIE,UAC/C,IAAPD,GAAmB,IAAPC,GACrBz1J,EAAE9H,KAAK47H,EAAI9zH,GAAK,SAAWw1J,EAAK,IAAMC,EAAK,KAI/C,OAAO,SAAS/7J,EAAGC,GACjB,IAAIqG,EAAI,GACJrF,EAAI,GAOR,OANAjB,EAAI8iC,EAAM9iC,GAAIC,EAAI6iC,EAAM7iC,GACxBiG,EAAUlG,EAAE66J,WAAY76J,EAAE86J,WAAY76J,EAAE46J,WAAY56J,EAAE66J,WAAYx0J,EAAGrF,GACrEmF,EAAOpG,EAAEoG,OAAQnG,EAAEmG,OAAQE,EAAGrF,GAC9B85J,EAAM/6J,EAAE+6J,MAAO96J,EAAE86J,MAAOz0J,EAAGrF,GAC3ByM,EAAM1N,EAAEmpD,OAAQnpD,EAAEopD,OAAQnpD,EAAEkpD,OAAQlpD,EAAEmpD,OAAQ9iD,EAAGrF,GACjDjB,EAAIC,EAAI,KACD,SAASuG,GACd,IAA0BijJ,EAAtBpmJ,GAAK,EAAGvH,EAAImF,EAAElF,OAClB,QAASsH,EAAIvH,EAAGwK,GAAGmjJ,EAAIxoJ,EAAEoC,IAAIA,GAAKomJ,EAAE9oJ,EAAE6F,GACtC,OAAOF,EAAE1J,KAAK,MAKb,IAAIo/J,GAA0BR,GAAqBR,GAAU,OAAQ,MAAO,QACxEiB,GAA0BT,GAAqBH,GAAU,KAAM,IAAK,KC5D/E,SAASa,GAAYxkI,EAAIh5B,GACvB,IAAIy9J,EAAQC,EACZ,OAAO,WACL,IAAI3B,EAAW,GAAIl/J,KAAMm8B,GACrB4iI,EAAQG,EAASH,MAKrB,GAAIA,IAAU6B,EAAQ,CACpBC,EAASD,EAAS7B,EAClB,IAAK,IAAIj3J,EAAI,EAAGvH,EAAIsgK,EAAOrgK,OAAQsH,EAAIvH,IAAKuH,EAC1C,GAAI+4J,EAAO/4J,GAAG3E,OAASA,EAAM,CAC3B09J,EAASA,EAAOxmK,QAChBwmK,EAAOj9J,OAAOkE,EAAG,GACjB,OAKNo3J,EAASH,MAAQ8B,GAIrB,SAASC,GAAc3kI,EAAIh5B,EAAMlG,GAC/B,IAAI2jK,EAAQC,EACZ,GAAqB,oBAAV5jK,EAAsB,MAAM,IAAI8U,MAC3C,OAAO,WACL,IAAImtJ,EAAW,GAAIl/J,KAAMm8B,GACrB4iI,EAAQG,EAASH,MAKrB,GAAIA,IAAU6B,EAAQ,CACpBC,GAAUD,EAAS7B,GAAO1kK,QAC1B,IAAK,IAAI4Q,EAAI,CAAC9H,KAAMA,EAAMlG,MAAOA,GAAQ6K,EAAI,EAAGvH,EAAIsgK,EAAOrgK,OAAQsH,EAAIvH,IAAKuH,EAC1E,GAAI+4J,EAAO/4J,GAAG3E,OAASA,EAAM,CAC3B09J,EAAO/4J,GAAKmD,EACZ,MAGAnD,IAAMvH,GAAGsgK,EAAO59J,KAAKgI,GAG3Bi0J,EAASH,MAAQ8B,GAIN,qBACb,IAAI1kI,EAAKn8B,KAAK+gK,IAId,GAFA59J,GAAQ,GAEJjB,UAAU1B,OAAS,EAAG,CAExB,IADA,IACkCyK,EAD9B8zJ,EAAQ,GAAI/+J,KAAKstB,OAAQ6O,GAAI4iI,MACxBj3J,EAAI,EAAGvH,EAAIw+J,EAAMv+J,OAAWsH,EAAIvH,IAAKuH,EAC5C,IAAKmD,EAAI8zJ,EAAMj3J,IAAI3E,OAASA,EAC1B,OAAO8H,EAAEhO,MAGb,OAAO,KAGT,OAAO+C,KAAKurB,MAAe,MAATtuB,EAAgB0jK,GAAcG,IAAe3kI,EAAIh5B,EAAMlG,KAGpE,SAAS+jK,GAAWtxE,EAAYvsF,EAAMlG,GAC3C,IAAIk/B,EAAKuzD,EAAWqxE,IAOpB,OALArxE,EAAWnkE,MAAK,WACd,IAAI2zI,EAAW,GAAIl/J,KAAMm8B,IACxB+iI,EAASjiK,QAAUiiK,EAASjiK,MAAQ,KAAKkG,GAAQlG,EAAM4C,MAAMG,KAAMkC,cAG/D,SAASorB,GACd,OAAO,GAAIA,EAAM6O,GAAIl/B,MAAMkG,IC3EhB,qBACb,IAAI6H,EACJ,OAAqB,kBAANtG,EAAiB,GAC1BA,aAAa,GAAQ,IACpBsG,EAAI,GAAMtG,KAAOA,EAAIsG,EAAG,IACzB,IAAmBvG,EAAGC,ICH9B,SAAS,GAAWvB,GAClB,OAAO,WACLnD,KAAKuqJ,gBAAgBpnJ,IAIzB,SAAS,GAAasnJ,GACpB,OAAO,WACLzqJ,KAAK0qJ,kBAAkBD,EAASlnI,MAAOknI,EAASJ,QAIpD,SAAS,GAAalnJ,EAAM89J,EAAa75C,GACvC,IAAI85C,EAEAC,EADAC,EAAUh6C,EAAS,GAEvB,OAAO,WACL,IAAIi6C,EAAUrhK,KAAKmrJ,aAAahoJ,GAChC,OAAOk+J,IAAYD,EAAU,KACvBC,IAAYH,EAAWC,EACvBA,EAAeF,EAAYC,EAAWG,EAASj6C,IAIzD,SAAS,GAAeqjC,EAAUwW,EAAa75C,GAC7C,IAAI85C,EAEAC,EADAC,EAAUh6C,EAAS,GAEvB,OAAO,WACL,IAAIi6C,EAAUrhK,KAAKkrJ,eAAeT,EAASlnI,MAAOknI,EAASJ,OAC3D,OAAOgX,IAAYD,EAAU,KACvBC,IAAYH,EAAWC,EACvBA,EAAeF,EAAYC,EAAWG,EAASj6C,IAIzD,SAAS,GAAajkH,EAAM89J,EAAahkK,GACvC,IAAIikK,EACAI,EACAH,EACJ,OAAO,WACL,IAAIE,EAA+BD,EAAtBh6C,EAASnqH,EAAM+C,MAC5B,GAAc,MAAVonH,EAGJ,OAFAi6C,EAAUrhK,KAAKmrJ,aAAahoJ,GAC5Bi+J,EAAUh6C,EAAS,GACZi6C,IAAYD,EAAU,KACvBC,IAAYH,GAAYE,IAAYE,EAAWH,GAC9CG,EAAWF,EAASD,EAAeF,EAAYC,EAAWG,EAASj6C,IAL1CpnH,KAAKuqJ,gBAAgBpnJ,IASzD,SAAS,GAAesnJ,EAAUwW,EAAahkK,GAC7C,IAAIikK,EACAI,EACAH,EACJ,OAAO,WACL,IAAIE,EAA+BD,EAAtBh6C,EAASnqH,EAAM+C,MAC5B,GAAc,MAAVonH,EAGJ,OAFAi6C,EAAUrhK,KAAKkrJ,eAAeT,EAASlnI,MAAOknI,EAASJ,OACvD+W,EAAUh6C,EAAS,GACZi6C,IAAYD,EAAU,KACvBC,IAAYH,GAAYE,IAAYE,EAAWH,GAC9CG,EAAWF,EAASD,EAAeF,EAAYC,EAAWG,EAASj6C,IAL1CpnH,KAAK0qJ,kBAAkBD,EAASlnI,MAAOknI,EAASJ,QASrE,qBACb,IAAII,EAAWQ,GAAU9nJ,GAAO2E,EAAiB,cAAb2iJ,EAA2B,GAAuB,GACtF,OAAOzqJ,KAAKuhK,UAAUp+J,EAAuB,oBAAVlG,GAC5BwtJ,EAASJ,MAAQ,GAAiB,IAAcI,EAAU3iJ,EAAGk5J,GAAWhhK,KAAM,QAAUmD,EAAMlG,IACtF,MAATA,GAAiBwtJ,EAASJ,MAAQ,GAAe,IAAYI,IAC5DA,EAASJ,MAAQ,GAAiB,IAAcI,EAAU3iJ,EAAG7K,KC1EtE,SAASukK,GAAgBr+J,EAAM2E,GAC7B,OAAO,SAASmD,GACdjL,KAAK4qJ,aAAaznJ,EAAM2E,EAAEtN,KAAKwF,KAAMiL,KAIzC,SAASw2J,GAAkBhX,EAAU3iJ,GACnC,OAAO,SAASmD,GACdjL,KAAK8qJ,eAAeL,EAASlnI,MAAOknI,EAASJ,MAAOviJ,EAAEtN,KAAKwF,KAAMiL,KAIrE,SAASy2J,GAAYjX,EAAUxtJ,GAC7B,IAAI8gK,EAAIlV,EACR,SAASkW,IACP,IAAIj3J,EAAI7K,EAAM4C,MAAMG,KAAMkC,WAE1B,OADI4F,IAAM+gJ,IAAIkV,GAAMlV,EAAK/gJ,IAAM25J,GAAkBhX,EAAU3iJ,IACpDi2J,EAGT,OADAgB,EAAMt9B,OAASxkI,EACR8hK,EAGT,SAASwC,GAAUp+J,EAAMlG,GACvB,IAAI8gK,EAAIlV,EACR,SAASkW,IACP,IAAIj3J,EAAI7K,EAAM4C,MAAMG,KAAMkC,WAE1B,OADI4F,IAAM+gJ,IAAIkV,GAAMlV,EAAK/gJ,IAAM05J,GAAgBr+J,EAAM2E,IAC9Ci2J,EAGT,OADAgB,EAAMt9B,OAASxkI,EACR8hK,EAGM,qBACb,IAAI5iK,EAAM,QAAUgH,EACpB,GAAIjB,UAAU1B,OAAS,EAAG,OAAQrE,EAAM6D,KAAK++J,MAAM5iK,KAASA,EAAIslI,OAChE,GAAa,MAATxkI,EAAe,OAAO+C,KAAK++J,MAAM5iK,EAAK,MAC1C,GAAqB,oBAAVc,EAAsB,MAAM,IAAI8U,MAC3C,IAAI04I,EAAWQ,GAAU9nJ,GACzB,OAAOnD,KAAK++J,MAAM5iK,GAAMsuJ,EAASJ,MAAQqX,GAAcH,IAAW9W,EAAUxtJ,KCxC9E,SAAS0kK,GAAcxlI,EAAIl/B,GACzB,OAAO,WACL,GAAK+C,KAAMm8B,GAAIwI,OAAS1nC,EAAM4C,MAAMG,KAAMkC,YAI9C,SAAS0/J,GAAczlI,EAAIl/B,GACzB,OAAOA,GAASA,EAAO,WACrB,GAAK+C,KAAMm8B,GAAIwI,MAAQ1nC,GAIZ,mBACb,IAAIk/B,EAAKn8B,KAAK+gK,IAEd,OAAO7+J,UAAU1B,OACXR,KAAKurB,MAAuB,oBAAVtuB,EACd0kK,GACAC,IAAezlI,EAAIl/B,IACvB,GAAI+C,KAAKstB,OAAQ6O,GAAIwI,OCnB7B,SAASk9H,GAAiB1lI,EAAIl/B,GAC5B,OAAO,WACL,GAAI+C,KAAMm8B,GAAIyI,UAAY3nC,EAAM4C,MAAMG,KAAMkC,YAIhD,SAAS4/J,GAAiB3lI,EAAIl/B,GAC5B,OAAOA,GAASA,EAAO,WACrB,GAAI+C,KAAMm8B,GAAIyI,SAAW3nC,GAId,mBACb,IAAIk/B,EAAKn8B,KAAK+gK,IAEd,OAAO7+J,UAAU1B,OACXR,KAAKurB,MAAuB,oBAAVtuB,EACd4kK,GACAC,IAAkB3lI,EAAIl/B,IAC1B,GAAI+C,KAAKstB,OAAQ6O,GAAIyI,UCnB7B,SAASm9H,GAAa5lI,EAAIl/B,GACxB,GAAqB,oBAAVA,EAAsB,MAAM,IAAI8U,MAC3C,OAAO,WACL,GAAI/R,KAAMm8B,GAAI8iI,KAAOhiK,GAIV,mBACb,IAAIk/B,EAAKn8B,KAAK+gK,IAEd,OAAO7+J,UAAU1B,OACXR,KAAKurB,KAAKw2I,GAAa5lI,EAAIl/B,IAC3B,GAAI+C,KAAKstB,OAAQ6O,GAAI8iI,MCZ7B,SAAS+C,GAAY7lI,EAAIl/B,GACvB,OAAO,WACL,IAAI2N,EAAI3N,EAAM4C,MAAMG,KAAMkC,WAC1B,GAAiB,oBAAN0I,EAAkB,MAAM,IAAImH,MACvC,GAAI/R,KAAMm8B,GAAI8iI,KAAOr0J,GAIV,mBACb,GAAqB,oBAAV3N,EAAsB,MAAM,IAAI8U,MAC3C,OAAO/R,KAAKurB,KAAKy2I,GAAYhiK,KAAK+gK,IAAK9jK,KCT1B,eACQ,oBAAVskD,IAAsBA,EAAQmmG,GAAQnmG,IAEjD,IAAK,IAAIilG,EAASxmJ,KAAKymJ,QAASthJ,EAAIqhJ,EAAOhmJ,OAAQkmJ,EAAY,IAAIrmJ,MAAM8E,GAAI2f,EAAI,EAAGA,EAAI3f,IAAK2f,EAC3F,IAAK,IAAuEwI,EAAnEye,EAAQy6G,EAAO1hI,GAAIvkB,EAAIwrC,EAAMvrC,OAAQomJ,EAAWF,EAAU5hI,GAAK,GAAUhd,EAAI,EAAGA,EAAIvH,IAAKuH,GAC3FwlB,EAAOye,EAAMjkC,KAAOy5C,EAAM/mD,KAAK8yB,EAAMA,EAAKu5H,SAAU/+I,EAAGikC,IAC1D66G,EAAS3jJ,KAAKqqB,GAKpB,OAAO,IAAI,GAAWo5H,EAAW1mJ,KAAK+mJ,SAAU/mJ,KAAKiiK,MAAOjiK,KAAK+gK,MCZpD,eACb,GAAIrxE,EAAWqxE,MAAQ/gK,KAAK+gK,IAAK,MAAM,IAAIhvJ,MAE3C,IAAK,IAAIq3I,EAAUppJ,KAAKymJ,QAAS4C,EAAU35D,EAAW+2D,QAAS6C,EAAKF,EAAQ5oJ,OAAQ+oJ,EAAKF,EAAQ7oJ,OAAQ2E,EAAI9C,KAAKgF,IAAIiiJ,EAAIC,GAAKC,EAAS,IAAInpJ,MAAMipJ,GAAKxkI,EAAI,EAAGA,EAAI3f,IAAK2f,EACrK,IAAK,IAAmGwI,EAA/Fm8H,EAASL,EAAQtkI,GAAI4kI,EAASL,EAAQvkI,GAAIvkB,EAAIkpJ,EAAOjpJ,OAAQ4rB,EAAQo9H,EAAO1kI,GAAK,IAAIzkB,MAAME,GAAUuH,EAAI,EAAGA,EAAIvH,IAAKuH,GACxHwlB,EAAOm8H,EAAO3hJ,IAAM4hJ,EAAO5hJ,MAC7BskB,EAAMtkB,GAAKwlB,GAKjB,KAAOxI,EAAIwkI,IAAMxkI,EACf0kI,EAAO1kI,GAAKskI,EAAQtkI,GAGtB,OAAO,IAAI,GAAW0kI,EAAQxpJ,KAAK+mJ,SAAU/mJ,KAAKiiK,MAAOjiK,KAAK+gK,MCfhE,SAAS,GAAM59J,GACb,OAAQA,EAAO,IAAIkW,OAAOwL,MAAM,SAASyzC,OAAM,SAASrtD,GACtD,IAAInD,EAAImD,EAAEpN,QAAQ,KAElB,OADIiK,GAAK,IAAGmD,EAAIA,EAAE5Q,MAAM,EAAGyN,KACnBmD,GAAW,UAANA,KAIjB,SAASi3J,GAAW/lI,EAAIh5B,EAAM4qJ,GAC5B,IAAIoU,EAAKC,EAAKC,EAAM,GAAMl/J,GAAQ,GAAO,GACzC,OAAO,WACL,IAAI+7J,EAAWmD,EAAIriK,KAAMm8B,GACrBsF,EAAKy9H,EAASz9H,GAKdA,IAAO0gI,IAAMC,GAAOD,EAAM1gI,GAAItxB,QAAQsxB,GAAGt+B,EAAM4qJ,GAEnDmR,EAASz9H,GAAK2gI,GAIH,qBACb,IAAIjmI,EAAKn8B,KAAK+gK,IAEd,OAAO7+J,UAAU1B,OAAS,EACpB,GAAIR,KAAKstB,OAAQ6O,GAAIsF,GAAGA,GAAGt+B,GAC3BnD,KAAKurB,KAAK22I,GAAW/lI,EAAIh5B,EAAM4qJ,KC9BvC,SAASuU,GAAenmI,GACtB,OAAO,WACL,IAAI5O,EAASvtB,KAAKwtB,WAClB,IAAK,IAAI1lB,KAAK9H,KAAK8+J,aAAc,IAAKh3J,IAAMq0B,EAAI,OAC5C5O,GAAQA,EAAOsyF,YAAY7/G,OAIpB,kBACb,OAAOA,KAAKyhC,GAAG,aAAc6gI,GAAetiK,KAAK+gK,OCLpC,eACb,IAAI59J,EAAOnD,KAAKiiK,MACZ9lI,EAAKn8B,KAAK+gK,IAEQ,oBAAXxa,IAAuBA,EAAS,GAASA,IAEpD,IAAK,IAAIC,EAASxmJ,KAAKymJ,QAASthJ,EAAIqhJ,EAAOhmJ,OAAQkmJ,EAAY,IAAIrmJ,MAAM8E,GAAI2f,EAAI,EAAGA,EAAI3f,IAAK2f,EAC3F,IAAK,IAAiFwI,EAAMq5H,EAAnF56G,EAAQy6G,EAAO1hI,GAAIvkB,EAAIwrC,EAAMvrC,OAAQomJ,EAAWF,EAAU5hI,GAAK,IAAIzkB,MAAME,GAAmBuH,EAAI,EAAGA,EAAIvH,IAAKuH,GAC9GwlB,EAAOye,EAAMjkC,MAAQ6+I,EAAUJ,EAAO/rJ,KAAK8yB,EAAMA,EAAKu5H,SAAU/+I,EAAGikC,MAClE,aAAcze,IAAMq5H,EAAQE,SAAWv5H,EAAKu5H,UAChDD,EAAS9+I,GAAK6+I,EACd,GAASC,EAAS9+I,GAAI3E,EAAMg5B,EAAIr0B,EAAG8+I,EAAU,GAAIt5H,EAAM6O,KAK7D,OAAO,IAAI,GAAWuqH,EAAW1mJ,KAAK+mJ,SAAU5jJ,EAAMg5B,IChBzC,eACb,IAAIh5B,EAAOnD,KAAKiiK,MACZ9lI,EAAKn8B,KAAK+gK,IAEQ,oBAAXxa,IAAuBA,EAASW,GAAYX,IAEvD,IAAK,IAAIC,EAASxmJ,KAAKymJ,QAASthJ,EAAIqhJ,EAAOhmJ,OAAQkmJ,EAAY,GAAIS,EAAU,GAAIriI,EAAI,EAAGA,EAAI3f,IAAK2f,EAC/F,IAAK,IAAyCwI,EAArCye,EAAQy6G,EAAO1hI,GAAIvkB,EAAIwrC,EAAMvrC,OAAcsH,EAAI,EAAGA,EAAIvH,IAAKuH,EAClE,GAAIwlB,EAAOye,EAAMjkC,GAAI,CACnB,IAAK,IAA2DwkB,EAAvD61C,EAAWokF,EAAO/rJ,KAAK8yB,EAAMA,EAAKu5H,SAAU/+I,EAAGikC,GAAe1f,EAAU,GAAIiB,EAAM6O,GAAK83G,EAAI,EAAGvzD,EAAIve,EAAS3hE,OAAQyzI,EAAIvzD,IAAKuzD,GAC/H3nH,EAAQ61C,EAAS8xE,KACnB,GAAS3nH,EAAOnpB,EAAMg5B,EAAI83G,EAAG9xE,EAAU91C,GAG3Cq6H,EAAUzjJ,KAAKk/D,GACfglF,EAAQlkJ,KAAKqqB,GAKnB,OAAO,IAAI,GAAWo5H,EAAWS,EAAShkJ,EAAMg5B,ICtB9C,GAAY,GAAU/6B,UAAU+Z,YAErB,cACb,OAAO,IAAI,GAAUnb,KAAKymJ,QAASzmJ,KAAK+mJ,WCC1C,SAASwb,GAAUp/J,EAAM89J,GACvB,IAAIC,EACAI,EACAH,EACJ,OAAO,WACL,IAAIE,EAAU,GAAMrhK,KAAMmD,GACtBi+J,GAAWphK,KAAK25B,MAAM0xH,eAAeloJ,GAAO,GAAMnD,KAAMmD,IAC5D,OAAOk+J,IAAYD,EAAU,KACvBC,IAAYH,GAAYE,IAAYE,EAAWH,EAC/CA,EAAeF,EAAYC,EAAWG,EAASC,EAAWF,IAIpE,SAAS,GAAYj+J,GACnB,OAAO,WACLnD,KAAK25B,MAAM0xH,eAAeloJ,IAI9B,SAAS,GAAcA,EAAM89J,EAAa75C,GACxC,IAAI85C,EAEAC,EADAC,EAAUh6C,EAAS,GAEvB,OAAO,WACL,IAAIi6C,EAAU,GAAMrhK,KAAMmD,GAC1B,OAAOk+J,IAAYD,EAAU,KACvBC,IAAYH,EAAWC,EACvBA,EAAeF,EAAYC,EAAWG,EAASj6C,IAIzD,SAAS,GAAcjkH,EAAM89J,EAAahkK,GACxC,IAAIikK,EACAI,EACAH,EACJ,OAAO,WACL,IAAIE,EAAU,GAAMrhK,KAAMmD,GACtBikH,EAASnqH,EAAM+C,MACfohK,EAAUh6C,EAAS,GAEvB,OADc,MAAVA,IAAoCpnH,KAAK25B,MAAM0xH,eAAeloJ,GAA9Ci+J,EAAUh6C,EAA2C,GAAMpnH,KAAMmD,IAC9Ek+J,IAAYD,EAAU,KACvBC,IAAYH,GAAYE,IAAYE,EAAWH,GAC9CG,EAAWF,EAASD,EAAeF,EAAYC,EAAWG,EAASj6C,KAI9E,SAASo7C,GAAiBrmI,EAAIh5B,GAC5B,IAAIg/J,EAAKC,EAAKK,EAAwDjhI,EAA7CrlC,EAAM,SAAWgH,EAAM86B,EAAQ,OAAS9hC,EACjE,OAAO,WACL,IAAI+iK,EAAW,GAAIl/J,KAAMm8B,GACrBsF,EAAKy9H,EAASz9H,GACdssH,EAAkC,MAAvBmR,EAASjiK,MAAMd,GAAeqlC,IAAWA,EAAS,GAAYr+B,SAASzD,EAKlF+hC,IAAO0gI,GAAOM,IAAc1U,IAAWqU,GAAOD,EAAM1gI,GAAItxB,QAAQsxB,GAAGxD,EAAOwkI,EAAY1U,GAE1FmR,EAASz9H,GAAK2gI,GAIH,uBACb,IAAIt6J,EAAqB,eAAhB3E,GAAQ,IAAsB,GAAuB,GAC9D,OAAgB,MAATlG,EAAgB+C,KAClB0iK,WAAWv/J,EAAMo/J,GAAUp/J,EAAM2E,IACjC25B,GAAG,aAAet+B,EAAM,GAAYA,IACpB,oBAAVlG,EAAuB+C,KAC7B0iK,WAAWv/J,EAAM,GAAcA,EAAM2E,EAAGk5J,GAAWhhK,KAAM,SAAWmD,EAAMlG,KAC1EsuB,KAAKi3I,GAAiBxiK,KAAK+gK,IAAK59J,IACjCnD,KACC0iK,WAAWv/J,EAAM,GAAcA,EAAM2E,EAAG7K,GAAQouC,GAChD5J,GAAG,aAAet+B,EAAM,OC9E/B,SAASw/J,GAAiBx/J,EAAM2E,EAAGujC,GACjC,OAAO,SAASpgC,GACdjL,KAAK25B,MAAM4xH,YAAYpoJ,EAAM2E,EAAEtN,KAAKwF,KAAMiL,GAAIogC,IAIlD,SAASq3H,GAAWv/J,EAAMlG,EAAOouC,GAC/B,IAAIpgC,EAAG49I,EACP,SAASkW,IACP,IAAIj3J,EAAI7K,EAAM4C,MAAMG,KAAMkC,WAE1B,OADI4F,IAAM+gJ,IAAI59I,GAAK49I,EAAK/gJ,IAAM66J,GAAiBx/J,EAAM2E,EAAGujC,IACjDpgC,EAGT,OADA8zJ,EAAMt9B,OAASxkI,EACR8hK,EAGM,uBACb,IAAI5iK,EAAM,UAAYgH,GAAQ,IAC9B,GAAIjB,UAAU1B,OAAS,EAAG,OAAQrE,EAAM6D,KAAK++J,MAAM5iK,KAASA,EAAIslI,OAChE,GAAa,MAATxkI,EAAe,OAAO+C,KAAK++J,MAAM5iK,EAAK,MAC1C,GAAqB,oBAAVc,EAAsB,MAAM,IAAI8U,MAC3C,OAAO/R,KAAK++J,MAAM5iK,EAAKumK,GAAWv/J,EAAMlG,EAAmB,MAAZouC,EAAmB,GAAKA,KCpBzE,SAAS,GAAapuC,GACpB,OAAO,WACL+C,KAAK0sJ,YAAczvJ,GAIvB,SAAS,GAAaA,GACpB,OAAO,WACL,IAAImqH,EAASnqH,EAAM+C,MACnBA,KAAK0sJ,YAAwB,MAAVtlC,EAAiB,GAAKA,GAI9B,mBACb,OAAOpnH,KAAK++J,MAAM,OAAyB,oBAAV9hK,EAC3B,GAAa+jK,GAAWhhK,KAAM,OAAQ/C,IACtC,GAAsB,MAATA,EAAgB,GAAKA,EAAQ,MClBlD,SAAS2lK,GAAgB96J,GACvB,OAAO,SAASmD,GACdjL,KAAK0sJ,YAAc5kJ,EAAEtN,KAAKwF,KAAMiL,IAIpC,SAAS43J,GAAU5lK,GACjB,IAAI8gK,EAAIlV,EACR,SAASkW,IACP,IAAIj3J,EAAI7K,EAAM4C,MAAMG,KAAMkC,WAE1B,OADI4F,IAAM+gJ,IAAIkV,GAAMlV,EAAK/gJ,IAAM86J,GAAgB96J,IACxCi2J,EAGT,OADAgB,EAAMt9B,OAASxkI,EACR8hK,EAGM,mBACb,IAAI5iK,EAAM,OACV,GAAI+F,UAAU1B,OAAS,EAAG,OAAQrE,EAAM6D,KAAK++J,MAAM5iK,KAASA,EAAIslI,OAChE,GAAa,MAATxkI,EAAe,OAAO+C,KAAK++J,MAAM5iK,EAAK,MAC1C,GAAqB,oBAAVc,EAAsB,MAAM,IAAI8U,MAC3C,OAAO/R,KAAK++J,MAAM5iK,EAAK0mK,GAAU5lK,KCnBpB,cAKb,IAJA,IAAIkG,EAAOnD,KAAKiiK,MACZa,EAAM9iK,KAAK+gK,IACXgC,EAAMC,KAEDxc,EAASxmJ,KAAKymJ,QAASthJ,EAAIqhJ,EAAOhmJ,OAAQskB,EAAI,EAAGA,EAAI3f,IAAK2f,EACjE,IAAK,IAAyCwI,EAArCye,EAAQy6G,EAAO1hI,GAAIvkB,EAAIwrC,EAAMvrC,OAAcsH,EAAI,EAAGA,EAAIvH,IAAKuH,EAClE,GAAIwlB,EAAOye,EAAMjkC,GAAI,CACnB,IAAIukB,EAAU,GAAIiB,EAAMw1I,GACxB,GAASx1I,EAAMnqB,EAAM4/J,EAAKj7J,EAAGikC,EAAO,CAClChN,KAAM1S,EAAQ0S,KAAO1S,EAAQsY,MAAQtY,EAAQuY,SAC7CD,MAAO,EACPC,SAAUvY,EAAQuY,SAClBq6H,KAAM5yI,EAAQ4yI,OAMtB,OAAO,IAAI,GAAWzY,EAAQxmJ,KAAK+mJ,SAAU5jJ,EAAM4/J,ICpBtC,cACb,IAAIZ,EAAKC,EAAKjc,EAAOnmJ,KAAMm8B,EAAKgqH,EAAK4a,IAAKjgK,EAAOqlJ,EAAKrlJ,OACtD,OAAO,IAAI0yC,SAAQ,SAASl8B,EAASsjC,GACnC,IAAI5K,EAAS,CAAC/yC,MAAO29C,GACjBxhC,EAAM,CAACnc,MAAO,WAA4B,MAAT6D,GAAYwW,MAEjD6uI,EAAK56H,MAAK,WACR,IAAI2zI,EAAW,GAAIl/J,KAAMm8B,GACrBsF,EAAKy9H,EAASz9H,GAKdA,IAAO0gI,IACTC,GAAOD,EAAM1gI,GAAItxB,OACjBiyJ,EAAI11E,EAAE18C,OAAO/sC,KAAK+sC,GAClBoyH,EAAI11E,EAAE0yE,UAAUn8J,KAAK+sC,GACrBoyH,EAAI11E,EAAEtzE,IAAInW,KAAKmW,IAGjB8lJ,EAASz9H,GAAK2gI,KAIH,IAATthK,GAAYwW,QCJhB,GAAK,EAEF,SAAS,GAAWkvI,EAAQW,EAAShkJ,EAAMg5B,GAChDn8B,KAAKymJ,QAAUD,EACfxmJ,KAAK+mJ,SAAWI,EAChBnnJ,KAAKiiK,MAAQ9+J,EACbnD,KAAK+gK,IAAM5kI,EAGE,SAAS,GAAWh5B,GACjC,OAAO,KAAYusF,WAAWvsF,GAGzB,SAAS6/J,KACd,QAAS,GAGX,IAAIC,GAAsB,GAAU7hK,UC/B7B,SAAS8hK,GAAWj4J,GACzB,QAASA,GAAK,IAAM,EAAIA,EAAIA,EAAIA,GAAKA,GAAK,GAAKA,EAAIA,EAAI,GAAK,EDgC9D,GAAW7J,UAAY,GAAWA,UAAY,CAC5C+Z,YAAa,GACborI,OAAQ4c,GACR1b,UAAW2b,GACXzU,YAAasU,GAAoBtU,YACjCC,eAAgBqU,GAAoBrU,eACpCv2H,OAAQgrI,GACRj3I,MAAOk3I,GACPta,UAAWua,GACX7zE,WAAY8zE,GACZhpK,KAAMyoK,GAAoBzoK,KAC1B00J,MAAO+T,GAAoB/T,MAC3B5hI,KAAM21I,GAAoB31I,KAC1BxsB,KAAMmiK,GAAoBniK,KAC1BuuJ,MAAO4T,GAAoB5T,MAC3B9jI,KAAM03I,GAAoB13I,KAC1BkW,GAAIgiI,GACJlU,KAAMmU,GACNnC,UAAWoC,GACXhqI,MAAOiqI,GACPlB,WAAYmB,GACZp0H,KAAMq0H,GACNjB,UAAWkB,GACXviI,OAAQwiI,GACRjF,MAAOkF,GACPt/H,MAAOu/H,GACPt/H,SAAUu/H,GACVlF,KAAM,GACN+C,YAAaoC,GACbhrJ,IAAKirJ,GACL,CAACppJ,OAAOC,UAAW+nJ,GAAoBhoJ,OAAOC,WElEhD,IAAIopJ,GAAgB,CAClBvlI,KAAM,KACN4F,MAAO,EACPC,SAAU,IACVq6H,KAAM,IAGR,SAAS,GAAQ3xI,EAAM6O,GACrB,IAAI6iI,EACJ,QAASA,EAAS1xI,EAAKwxI,iBAAmBE,EAASA,EAAO7iI,IACxD,KAAM7O,EAAOA,EAAKE,YAChB,MAAM,IAAIzb,MAAM,cAAcoqB,eAGlC,OAAO6iI,EAGM,mBACb,IAAI7iI,EACA6iI,EAEA77J,aAAgB,IAClBg5B,EAAKh5B,EAAK49J,IAAK59J,EAAOA,EAAK8+J,QAE3B9lI,EAAK6mI,MAAUhE,EAASsF,IAAevlI,KAAOnkC,KAAOuI,EAAe,MAARA,EAAe,KAAOA,EAAO,IAG3F,IAAK,IAAIqjJ,EAASxmJ,KAAKymJ,QAASthJ,EAAIqhJ,EAAOhmJ,OAAQskB,EAAI,EAAGA,EAAI3f,IAAK2f,EACjE,IAAK,IAAyCwI,EAArCye,EAAQy6G,EAAO1hI,GAAIvkB,EAAIwrC,EAAMvrC,OAAcsH,EAAI,EAAGA,EAAIvH,IAAKuH,GAC9DwlB,EAAOye,EAAMjkC,KACf,GAASwlB,EAAMnqB,EAAMg5B,EAAIr0B,EAAGikC,EAAOizH,GAAU,GAAQ1xI,EAAM6O,IAKjE,OAAO,IAAI,GAAWqqH,EAAQxmJ,KAAK+mJ,SAAU5jJ,EAAMg5B,ICpCrD,GAAU/6B,UAAUg+J,UAAYmF,GAChC,GAAUnjK,UAAUsuF,WAAa80E,GCSjC,MAAM,IAAC91J,GAAKpM,IAAG,OAAK,IAAID,KAExB,SAASoiK,GAAQ74I,GACf,MAAO,EAAEA,EAAE,IAAKA,EAAE,IAGpB,SAAS84I,GAAQ94I,GACf,MAAO,CAAC64I,GAAQ74I,EAAE,IAAK64I,GAAQ74I,EAAE,KAKxB,CAAC,IAAK,KAAK5R,IAAI,IAOf,CAAC,IAAK,KAAKA,IAAI,IAOf,CAAC,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,KAAM,MAAMA,IAAI,IA8D5D,SAAS,GAAK/O,GACZ,MAAO,CAACnM,KAAMmM,GCvGhB,IAAI05J,GAAM,GACNC,GAAM,GACNC,GAAQ,GACRC,GAAU,GACVC,GAAS,GAEb,SAASC,GAAgB55H,GACvB,OAAO,IAAI65H,SAAS,IAAK,WAAa75H,EAAQpxB,KAAI,SAAS7W,EAAM2E,GAC/D,OAAOs/B,KAAK/jB,UAAUlgB,GAAQ,OAAS2E,EAAI,aAC1CzG,KAAK,KAAO,KAGjB,SAAS6jK,GAAgB95H,EAASxxC,GAChC,IAAIipC,EAASmiI,GAAgB55H,GAC7B,OAAO,SAAS1jC,EAAKI,GACnB,OAAOlO,EAAEipC,EAAOn7B,GAAMI,EAAGsjC,IAK7B,SAAS+5H,GAAaC,GACpB,IAAIC,EAAYrrK,OAAOqK,OAAO,MAC1B+mC,EAAU,GAUd,OARAg6H,EAAKlpK,SAAQ,SAASwL,GACpB,IAAK,IAAI0wE,KAAU1wE,EACX0wE,KAAUitF,GACdj6H,EAAQnoC,KAAKoiK,EAAUjtF,GAAUA,MAKhChtC,EAGT,SAASk6H,GAAIroK,EAAO6sB,GAClB,IAAI/e,EAAI9N,EAAQ,GAAIuD,EAASuK,EAAEvK,OAC/B,OAAOA,EAASspB,EAAQ,IAAIzpB,MAAMypB,EAAQtpB,EAAS,GAAGa,KAAK,GAAK0J,EAAIA,EAGtE,SAASw6J,GAAWC,GAClB,OAAOA,EAAO,EAAI,IAAMF,IAAKE,EAAM,GAC/BA,EAAO,KAAO,IAAMF,GAAIE,EAAM,GAC9BF,GAAIE,EAAM,GAGhB,SAASC,GAAWC,GAClB,IAAIC,EAAQD,EAAKE,cACbC,EAAUH,EAAKI,gBACfC,EAAUL,EAAKM,gBACfC,EAAeP,EAAKQ,qBACxB,OAAOllG,MAAM0kG,GAAQ,eACfH,GAAWG,EAAKS,iBAAkB,GAAK,IAAMb,GAAII,EAAKU,cAAgB,EAAG,GAAK,IAAMd,GAAII,EAAKW,aAAc,IAC1GJ,EAAe,IAAMX,GAAIK,EAAO,GAAK,IAAML,GAAIO,EAAS,GAAK,IAAMP,GAAIS,EAAS,GAAK,IAAMT,GAAIW,EAAc,GAAK,IACnHF,EAAU,IAAMT,GAAIK,EAAO,GAAK,IAAML,GAAIO,EAAS,GAAK,IAAMP,GAAIS,EAAS,GAAK,IAChFF,GAAWF,EAAQ,IAAML,GAAIK,EAAO,GAAK,IAAML,GAAIO,EAAS,GAAK,IACjE,IAGO,mBACb,IAAIS,EAAW,IAAIztJ,OAAO,KAAQ0tJ,EAAY,SAC1CC,EAAYD,EAAU7hJ,WAAW,GAErC,SAAS6iB,EAAMkI,EAAM71C,GACnB,IAAI6sK,EAASr7H,EAASg6H,EAAOsB,EAAUj3H,GAAM,SAAS/nC,EAAKI,GACzD,GAAI2+J,EAAS,OAAOA,EAAQ/+J,EAAKI,EAAI,GACrCsjC,EAAU1jC,EAAK++J,EAAU7sK,EAAIsrK,GAAgBx9J,EAAK9N,GAAKorK,GAAgBt9J,MAGzE,OADA09J,EAAKh6H,QAAUA,GAAW,GACnBg6H,EAGT,SAASsB,EAAUj3H,EAAM71C,GACvB,IAIIqR,EAJAm6J,EAAO,GACPuB,EAAIl3H,EAAKjvC,OACTomK,EAAI,EACJrmK,EAAI,EAEJsmK,EAAMF,GAAK,EACXG,GAAM,EAMV,SAASC,IACP,GAAIF,EAAK,OAAOjC,GAChB,GAAIkC,EAAK,OAAOA,GAAM,EAAOnC,GAG7B,IAAI78J,EAAUkD,EAAP8Z,EAAI8hJ,EACX,GAAIn3H,EAAK/qB,WAAWI,KAAO+/I,GAAO,CAChC,MAAO+B,IAAMD,GAAKl3H,EAAK/qB,WAAWkiJ,KAAO/B,IAASp1H,EAAK/qB,aAAakiJ,KAAO/B,IAI3E,OAHK/8J,EAAI8+J,IAAMD,EAAGE,GAAM,GACd77J,EAAIykC,EAAK/qB,WAAWkiJ,QAAU9B,GAASgC,GAAM,EAC9C97J,IAAM+5J,KAAU+B,GAAM,EAAUr3H,EAAK/qB,WAAWkiJ,KAAO9B,MAAW8B,GACpEn3H,EAAKp1C,MAAMyqB,EAAI,EAAGhd,EAAI,GAAGoR,QAAQ,MAAO,KAIjD,MAAO0tJ,EAAID,EAAG,CACZ,IAAK37J,EAAIykC,EAAK/qB,WAAW5c,EAAI8+J,QAAU9B,GAASgC,GAAM,OACjD,GAAI97J,IAAM+5J,GAAU+B,GAAM,EAAUr3H,EAAK/qB,WAAWkiJ,KAAO9B,MAAW8B,OACtE,GAAI57J,IAAMw7J,EAAW,SAC1B,OAAO/2H,EAAKp1C,MAAMyqB,EAAGhd,GAIvB,OAAO++J,GAAM,EAAMp3H,EAAKp1C,MAAMyqB,EAAG6hJ,GA1B/Bl3H,EAAK/qB,WAAWiiJ,EAAI,KAAO7B,MAAW6B,EACtCl3H,EAAK/qB,WAAWiiJ,EAAI,KAAO5B,MAAU4B,EA4BzC,OAAQ17J,EAAI87J,OAAanC,GAAK,CAC5B,IAAIl9J,EAAM,GACV,MAAOuD,IAAM05J,IAAO15J,IAAM25J,GAAKl9J,EAAIzE,KAAKgI,GAAIA,EAAI87J,IAC5CntK,GAA4B,OAAtB8N,EAAM9N,EAAE8N,EAAKnH,OACvB6kK,EAAKniK,KAAKyE,GAGZ,OAAO09J,EAGT,SAAS4B,EAAc5B,EAAMh6H,GAC3B,OAAOg6H,EAAKprJ,KAAI,SAAStS,GACvB,OAAO0jC,EAAQpxB,KAAI,SAASo+D,GAC1B,OAAO5+D,EAAY9R,EAAI0wE,OACtB/2E,KAAKklK,MAIZ,SAASrwJ,EAAOkvJ,EAAMh6H,GAEpB,OADe,MAAXA,IAAiBA,EAAU+5H,GAAaC,IACrC,CAACh6H,EAAQpxB,IAAIR,GAAanY,KAAKklK,IAAY1+J,OAAOm/J,EAAc5B,EAAMh6H,IAAU/pC,KAAK,MAG9F,SAAS4lK,EAAW7B,EAAMh6H,GAExB,OADe,MAAXA,IAAiBA,EAAU+5H,GAAaC,IACrC4B,EAAc5B,EAAMh6H,GAAS/pC,KAAK,MAG3C,SAAS6lK,EAAW9B,GAClB,OAAOA,EAAKprJ,IAAImtJ,GAAW9lK,KAAK,MAGlC,SAAS8lK,EAAUz/J,GACjB,OAAOA,EAAIsS,IAAIR,GAAanY,KAAKklK,GAGnC,SAAS/sJ,EAAYvc,GACnB,OAAgB,MAATA,EAAgB,GACjBA,aAAiBjC,KAAOyqK,GAAWxoK,GACnCqpK,EAASl3I,KAAKnyB,GAAS,IAAM,IAAOA,EAAMic,QAAQ,KAAM,MAAU,IAClEjc,EAGR,MAAO,CACLsqC,MAAOA,EACPm/H,UAAWA,EACXxwJ,OAAQA,EACR+wJ,WAAYA,EACZC,WAAYA,EACZC,UAAWA,EACX3tJ,YAAaA,IC/Jb4tJ,GAAMC,GAAI,KAEHC,GAAWF,GAAI7/H,MCFtBggI,IDGsBH,GAAIV,UACPU,GAAIlxJ,OACAkxJ,GAAIH,WACJG,GAAIF,WACLE,GAAID,UACFC,GAAI5tJ,YCRtB6tJ,GAAI,OAEHG,GAAWD,GAAIhgI,MACAggI,GAAIb,UACPa,GAAIrxJ,OACAqxJ,GAAIN,WACJM,GAAIL,WACLK,GAAIJ,UACFI,GAAI/tJ,YCVhC,SAASiuJ,GAAa30H,GACpB,IAAKA,EAASE,GAAI,MAAM,IAAIjhC,MAAM+gC,EAASI,OAAS,IAAMJ,EAASM,YACnE,OAAON,EAASrD,OAGH,qBACb,OAAO4E,MAAM7iB,EAAOV,GAAMgc,KAAK26H,KCHjC,SAASC,GAASngI,GAChB,OAAO,SAAS/V,EAAOV,EAAMppB,GAE3B,OADyB,IAArBxF,UAAU1B,QAAgC,oBAATswB,IAAqBppB,EAAMopB,EAAMA,OAAOpxB,GACtE,GAAK8xB,EAAOV,GAAMgc,MAAK,SAASgG,GACrC,OAAOvL,EAAMuL,EAAUprC,OAatB,IAAI,GAAMggK,GAASJ,ICpBtBK,IDqBaD,GAASF,ICrBX,OAEf,SAASI,GAAKxiK,GACZ,QAASA,EAAI/C,KAAKwnD,IAAIzkD,IAAM,EAAIA,GAAK,EAGvC,SAASyiK,GAAKziK,GACZ,QAASA,EAAI/C,KAAKwnD,IAAIzkD,IAAM,EAAIA,GAAK,EAGvC,SAAS0iK,GAAK1iK,GACZ,QAASA,EAAI/C,KAAKwnD,IAAI,EAAIzkD,IAAM,IAAMA,EAAI,IAG7B,kBAIb,SAAS+jD,EAAK4+G,EAAIxzI,GAChB,IAKIzsB,EACAkgK,EANAC,EAAMF,EAAG,GAAIG,EAAMH,EAAG,GAAII,EAAKJ,EAAG,GAClCK,EAAM7zI,EAAG,GAAI8zI,EAAM9zI,EAAG,GAAI+zI,EAAK/zI,EAAG,GAClC4E,EAAKivI,EAAMH,EACX7uI,EAAKivI,EAAMH,EACXriE,EAAK1sE,EAAKA,EAAKC,EAAKA,EAKxB,GAAIysE,EAAK8hE,GACPK,EAAI3lK,KAAK/C,IAAIgpK,EAAKH,GAAMI,EACxBzgK,EAAI,SAASmD,GACX,MAAO,CACLg9J,EAAMh9J,EAAIkuB,EACV+uI,EAAMj9J,EAAImuB,EACV+uI,EAAK9lK,KAAKwnD,IAAI0+G,EAAMt9J,EAAI+8J,SAMzB,CACH,IAAIQ,EAAKnmK,KAAK2E,KAAK6+F,GACft7F,GAAM+9J,EAAKA,EAAKH,EAAKA,EAAKM,EAAO5iE,IAAO,EAAIsiE,EAAKO,EAAOF,GACxDh+J,GAAM89J,EAAKA,EAAKH,EAAKA,EAAKM,EAAO5iE,IAAO,EAAIyiE,EAAKI,EAAOF,GACxDG,EAAKtmK,KAAK/C,IAAI+C,KAAK2E,KAAKuD,EAAKA,EAAK,GAAKA,GACvCq+J,EAAKvmK,KAAK/C,IAAI+C,KAAK2E,KAAKwD,EAAKA,EAAK,GAAKA,GAC3Cw9J,GAAKY,EAAKD,GAAMJ,EAChBzgK,EAAI,SAASmD,GACX,IAAIF,EAAIE,EAAI+8J,EACRa,EAASjB,GAAKe,GACdG,EAAIX,GAAMO,EAAOF,IAAOK,EAASf,GAAKS,EAAMx9J,EAAI49J,GAAMd,GAAKc,IAC/D,MAAO,CACLV,EAAMa,EAAI3vI,EACV+uI,EAAMY,EAAI1vI,EACV+uI,EAAKU,EAASjB,GAAKW,EAAMx9J,EAAI49J,KAOnC,OAFA7gK,EAAE88B,SAAe,IAAJojI,EAAWO,EAAMlmK,KAAK0mK,MAE5BjhK,EAQT,OALAqhD,EAAKo/G,IAAM,SAAS77E,GAClB,IAAIs8E,EAAK3mK,KAAKC,IAAI,MAAOoqF,GAAIu8E,EAAKD,EAAKA,EAAIE,EAAKD,EAAKA,EACrD,OAAOE,EAAQH,EAAIC,EAAIC,IAGlB//G,GAvDM,CAwDZ9mD,KAAK0mK,MAAO,EAAG,GCtEX,SAAS,GAAU90B,EAAG7uI,EAAGC,GAC9BrF,KAAKi0I,EAAIA,EACTj0I,KAAKoF,EAAIA,EACTpF,KAAKqF,EAAIA,EAGX,GAAUjE,UAAY,CACpB+Z,YAAa,GACbhJ,MAAO,SAAS8hI,GACd,OAAa,IAANA,EAAUj0I,KAAO,IAAI,GAAUA,KAAKi0I,EAAIA,EAAGj0I,KAAKoF,EAAGpF,KAAKqF,IAEjEsF,UAAW,SAASvF,EAAGC,GACrB,OAAa,IAAND,EAAgB,IAANC,EAAUrF,KAAO,IAAI,GAAUA,KAAKi0I,EAAGj0I,KAAKoF,EAAIpF,KAAKi0I,EAAI7uI,EAAGpF,KAAKqF,EAAIrF,KAAKi0I,EAAI5uI,IAEjGxF,MAAO,SAASu3I,GACd,MAAO,CAACA,EAAM,GAAKp3I,KAAKi0I,EAAIj0I,KAAKoF,EAAGgyI,EAAM,GAAKp3I,KAAKi0I,EAAIj0I,KAAKqF,IAE/D+jK,OAAQ,SAAShkK,GACf,OAAOA,EAAIpF,KAAKi0I,EAAIj0I,KAAKoF,GAE3BikK,OAAQ,SAAShkK,GACf,OAAOA,EAAIrF,KAAKi0I,EAAIj0I,KAAKqF,GAE3BwD,OAAQ,SAASoM,GACf,MAAO,EAAEA,EAAS,GAAKjV,KAAKoF,GAAKpF,KAAKi0I,GAAIh/H,EAAS,GAAKjV,KAAKqF,GAAKrF,KAAKi0I,IAEzEq1B,QAAS,SAASlkK,GAChB,OAAQA,EAAIpF,KAAKoF,GAAKpF,KAAKi0I,GAE7Bs1B,QAAS,SAASlkK,GAChB,OAAQA,EAAIrF,KAAKqF,GAAKrF,KAAKi0I,GAE7Bu1B,SAAU,SAASpkK,GACjB,OAAOA,EAAE+K,OAAOipI,OAAOh0I,EAAEgjH,QAAQpuG,IAAIha,KAAKspK,QAAStpK,MAAMga,IAAI5U,EAAEyD,OAAQzD,KAEzEqkK,SAAU,SAASpkK,GACjB,OAAOA,EAAE8K,OAAOipI,OAAO/zI,EAAE+iH,QAAQpuG,IAAIha,KAAKupK,QAASvpK,MAAMga,IAAI3U,EAAEwD,OAAQxD,KAEzExL,SAAU,WACR,MAAO,aAAemG,KAAKoF,EAAI,IAAMpF,KAAKqF,EAAI,WAAarF,KAAKi0I,EAAI,MAIjE,IAAI,GAAW,IAAI,GAAU,EAAG,EAAG,GAI3B,SAAS,GAAU3mH,GAChC,OAAQA,EAAKo8I,OAAQ,KAAMp8I,EAAOA,EAAKE,YAAa,OAAO,GAC3D,OAAOF,EAAKo8I,OAJd,GAAUtoK,UAAY,GAAUA,UCOjB,IrWsCA,IACby/B,KADa,WAEX,MAAO,CACL8oI,YACE,+FACF3vJ,IAAK,KACLgqB,QAAS,OACT4lI,iBAAkB,KAClBC,kBAAmB,OAGvBC,MAAO,CACL9lI,QADK,WAEHhkC,KAAK+pK,uBAGTC,QAAS,CACPC,QADO,WAEL,IAASN,YAAc3pK,KAAK2pK,YAE5B3pK,KAAKga,IAAM,IAAI,IAASuqB,IAAI,CAC1B68E,UAAWphH,KAAKkqK,MAAM,YACtBvwI,MAAO,gDACPlsB,OAAQ,EAAE,UAAW,WACrB07C,KAAM,EACNsC,MAAO,KACP0+G,WAAW,IAGbnqK,KAAKoqK,aACLpqK,KAAKga,IAAI67E,WAAW5wE,WAEtB8kJ,mBAhBO,WAiBgB,QAAjB/pK,KAAKgkC,SACPhkC,KAAKga,IAAIqwJ,kBAAkB,gBAAiB,aAAc,WAC1DrqK,KAAKga,IAAIqwJ,kBAAkB,iBAAkB,aAAc,UAE3DrqK,KAAKga,IAAIqwJ,kBAAkB,gBAAiB,aAAc,QAC1DrqK,KAAKga,IAAIqwJ,kBAAkB,iBAAkB,aAAc,aAG/DD,WAzBO,WAyBM,WAEPE,EAAU,CAAC,SAAU,WAAY,mBACjCC,EAAc,CAChB,CAAC,EAAG,IAAK,KACT,CAAC,GAAI,IAAK,KACV,CAAC,IAAK,IAAK,KACX,CAAC,IAAK,IAAK,KACX,CAAC,IAAK,IAAK,IACX,CAAC,IAAK,GAAI,KAERC,EAAiB,CACnBC,eAAgB,EACb,QAAU,UAAW,KAAO,SAAU,UAAW,KAEpDC,aAAc,GACdC,aAAc,GACdC,cAAe,GACfC,eAAgB,CAAC,GAAK,EAAK,GAAK,GAChCC,eAAgB,GAIlB9qK,KAAKga,IAAIynB,GAAG,cAAc,WACxB,EAAKmoI,iBAAmB,IAAI,GAAY,CACtC9qK,KAAM,GACNq9B,GAAI,gBACJ0E,KAAM,GAAO,2BACbknE,OAAQ,IACRqsC,SAAU,EACV6K,gBAAiB,IACjB6E,WAAYymB,EACZlmB,eAAgB,CAAC,EAAG,KACpBhQ,eAAgB,IAChBM,UAAU,EACV7nD,YAAa,SAAC1mC,GAAD,MAAO,CAAC5rC,OAAO4rC,EAAEmD,KAAM/uC,OAAO4rC,EAAEoD,OAC7CuhH,cAAeP,EACfjgC,QAAS,IAGX,EAAKs/B,kBAAoB,IAAI,GAAY,CACvC/qK,KAAM,GACNq9B,GAAI,iBACJ0E,KAAM,GAAO,4BACbknE,OAAQ,IACRqsC,SAAU,EACV6K,gBAAiB,IACjB6E,WAAYymB,EACZlmB,eAAgB,CAAC,EAAG,KACpBhQ,eAAgB,IAChBM,UAAU,EACV7nD,YAAa,SAAC1mC,GAAD,MAAO,CAAC5rC,OAAO4rC,EAAEmD,KAAM/uC,OAAO4rC,EAAEoD,OAC7CuhH,cAAeP,EACfjgC,QAAS,IAIX,EAAKvwH,IAAIspG,SAAS,EAAKsmD,iBAAkB,kBACzC,EAAK5vJ,IAAIspG,SAAS,EAAKumD,kBAAmB,kBAC1C,EAAKE,wBAIPO,EAAQpuK,SAAQ,SAACC,GACfkC,SAAS6hE,eAAe/jE,GAAK6uK,SAAW,SAACC,GACvC,IAAIhuK,EAAQud,OAAOywJ,EAAIzvK,OAAOyB,OAC9BoB,SAAS6hE,eAAe/jE,EAAM,UAAUguG,UAAYltG,EAChD,EAAK2sK,kBACP,EAAKA,iBAAiB9uH,SAAtB,KACG3+C,EAAMc,IAGP,EAAK4sK,mBACP,EAAKA,kBAAkB/uH,SAAvB,KACG3+C,EAAMc,UAOnBiuK,QA1Ha,WA2HXlrK,KAAKiqK,Y,oCsW9MT,MAAMkB,GAA2B,KAAgB,GAAQ,CAAC,CAAC,SAASvrE,GAAQ,CAAC,YAAY,qBAE1E,iB,mCCTf,YAEA,IAAI7iG,EAAyB,EAAQ,QAErC/C,OAAOgD,eAAezC,EAAS,aAAc,CAC3C0C,OAAO,IAET1C,EAAQ4C,QAAU0B,EAElB,IAAIge,EAAW9f,EAAuB,EAAQ,SAE9C,SAAS8B,EAAWpB,GAClB,GAAsB,qBAAX1D,QAAoE,YAA1C,EAAI8iB,EAAS1f,SAASpD,OAAOc,UAAiD,aAAxBd,OAAOc,QAAQiE,KACxG,OAAO,EAGT,GAAuB,qBAAZjE,GAAuE,YAA5C,EAAIgiB,EAAS1f,SAAStC,EAAQkE,WAA0BC,QAAQnE,EAAQkE,SAASE,UACrH,OAAO,EAGT,IAAIC,EAAwG,YAAlE,qBAAdvB,UAA4B,aAAc,EAAIkf,EAAS1f,SAASQ,aAA2D,kBAAxBA,UAAUC,WAA0BD,UAAUC,UACzKA,EAAYH,GAAiByB,EAEjC,SAAItB,GAAaA,EAAUC,QAAQ,aAAe,M,wDCvB7C,SAASujE,EAAcv+B,GAC5B,IAAK,MAAM1mC,KAAO0mC,EAChB,OAAO,EAGT,OAAO,EAEF,SAASuoI,EAAehmK,EAAGC,GAChC,GAAID,IAAMC,EACR,OAAO,EAGT,MAAMgmK,EAAWhrK,MAAM6P,QAAQ9K,IAAMuU,YAAYC,OAAOxU,GAClDkmK,EAAWjrK,MAAM6P,QAAQ7K,IAAMsU,YAAYC,OAAOvU,GAExD,GAAIgmK,GAAYC,GAAYlmK,EAAE5E,SAAW6E,EAAE7E,OAAQ,CACjD,IAAK,IAAIsH,EAAI,EAAGA,EAAI1C,EAAE5E,SAAUsH,EAC9B,GAAI1C,EAAE0C,KAAOzC,EAAEyC,GACb,OAAO,EAIX,OAAO,EAGT,OAAO,EAzBT,qE,sBCAA,YA4BA,SAASyjK,EAAeC,EAAOC,GAG7B,IADA,IAAI/9J,EAAK,EACA5F,EAAI0jK,EAAMhrK,OAAS,EAAGsH,GAAK,EAAGA,IAAK,CAC1C,IAAIqsB,EAAOq3I,EAAM1jK,GACJ,MAATqsB,EACFq3I,EAAM5nK,OAAOkE,EAAG,GACE,OAATqsB,GACTq3I,EAAM5nK,OAAOkE,EAAG,GAChB4F,KACSA,IACT89J,EAAM5nK,OAAOkE,EAAG,GAChB4F,KAKJ,GAAI+9J,EACF,KAAO/9J,IAAMA,EACX89J,EAAM9+H,QAAQ,MAIlB,OAAO8+H,EAmJT,SAASE,EAASx0J,GACI,kBAATA,IAAmBA,GAAc,IAE5C,IAGIpP,EAHAqR,EAAQ,EACRC,GAAO,EACPuyJ,GAAe,EAGnB,IAAK7jK,EAAIoP,EAAK1W,OAAS,EAAGsH,GAAK,IAAKA,EAClC,GAA2B,KAAvBoP,EAAKwN,WAAW5c,IAGhB,IAAK6jK,EAAc,CACjBxyJ,EAAQrR,EAAI,EACZ,YAEgB,IAATsR,IAGXuyJ,GAAe,EACfvyJ,EAAMtR,EAAI,GAId,OAAa,IAATsR,EAAmB,GAChBlC,EAAK7c,MAAM8e,EAAOC,GA8D3B,SAASif,EAAQuzI,EAAIhyK,GACjB,GAAIgyK,EAAGvzI,OAAQ,OAAOuzI,EAAGvzI,OAAOz+B,GAEhC,IADA,IAAImqD,EAAM,GACDj8C,EAAI,EAAGA,EAAI8jK,EAAGprK,OAAQsH,IACvBlO,EAAEgyK,EAAG9jK,GAAIA,EAAG8jK,IAAK7nH,EAAI9gD,KAAK2oK,EAAG9jK,IAErC,OAAOi8C,EA3OXxpD,EAAQ+c,QAAU,WAIhB,IAHA,IAAIu0J,EAAe,GACfC,GAAmB,EAEdhkK,EAAI5F,UAAU1B,OAAS,EAAGsH,IAAM,IAAMgkK,EAAkBhkK,IAAK,CACpE,IAAIoP,EAAQpP,GAAK,EAAK5F,UAAU4F,GAAKjN,EAAQsc,MAG7C,GAAoB,kBAATD,EACT,MAAM,IAAIqL,UAAU,6CACVrL,IAIZ20J,EAAe30J,EAAO,IAAM20J,EAC5BC,EAAsC,MAAnB50J,EAAK60J,OAAO,IAWjC,OAJAF,EAAeN,EAAelzI,EAAOwzI,EAAahnJ,MAAM,MAAM,SAASre,GACrE,QAASA,MACNslK,GAAkBzqK,KAAK,MAEnByqK,EAAmB,IAAM,IAAMD,GAAiB,KAK3DtxK,EAAQ4/F,UAAY,SAASjjF,GAC3B,IAAI80J,EAAazxK,EAAQyxK,WAAW90J,GAChC+0J,EAAqC,MAArBC,EAAOh1J,GAAO,GAclC,OAXAA,EAAOq0J,EAAelzI,EAAOnhB,EAAK2N,MAAM,MAAM,SAASre,GACrD,QAASA,MACNwlK,GAAY3qK,KAAK,KAEjB6V,GAAS80J,IACZ90J,EAAO,KAELA,GAAQ+0J,IACV/0J,GAAQ,MAGF80J,EAAa,IAAM,IAAM90J,GAInC3c,EAAQyxK,WAAa,SAAS90J,GAC5B,MAA0B,MAAnBA,EAAK60J,OAAO,IAIrBxxK,EAAQ8G,KAAO,WACb,IAAI8qK,EAAQ9rK,MAAMe,UAAU/G,MAAMG,KAAK0H,UAAW,GAClD,OAAO3H,EAAQ4/F,UAAU9hE,EAAO8zI,GAAO,SAAS3lK,EAAGrE,GACjD,GAAiB,kBAANqE,EACT,MAAM,IAAI+b,UAAU,0CAEtB,OAAO/b,KACNnF,KAAK,OAMV9G,EAAQsyF,SAAW,SAASpgD,EAAM2/H,GAIhC,SAAS/yJ,EAAKgzJ,GAEZ,IADA,IAAIlzJ,EAAQ,EACLA,EAAQkzJ,EAAI7rK,OAAQ2Y,IACzB,GAAmB,KAAfkzJ,EAAIlzJ,GAAe,MAIzB,IADA,IAAIC,EAAMizJ,EAAI7rK,OAAS,EAChB4Y,GAAO,EAAGA,IACf,GAAiB,KAAbizJ,EAAIjzJ,GAAa,MAGvB,OAAID,EAAQC,EAAY,GACjBizJ,EAAIhyK,MAAM8e,EAAOC,EAAMD,EAAQ,GAfxCszB,EAAOlyC,EAAQ+c,QAAQm1B,GAAMy/H,OAAO,GACpCE,EAAK7xK,EAAQ+c,QAAQ80J,GAAIF,OAAO,GAsBhC,IALA,IAAII,EAAYjzJ,EAAKozB,EAAK5nB,MAAM,MAC5B0nJ,EAAUlzJ,EAAK+yJ,EAAGvnJ,MAAM,MAExBrkB,EAAS6B,KAAKgF,IAAIilK,EAAU9rK,OAAQ+rK,EAAQ/rK,QAC5CgsK,EAAkBhsK,EACbsH,EAAI,EAAGA,EAAItH,EAAQsH,IAC1B,GAAIwkK,EAAUxkK,KAAOykK,EAAQzkK,GAAI,CAC/B0kK,EAAkB1kK,EAClB,MAIJ,IAAI2kK,EAAc,GAClB,IAAS3kK,EAAI0kK,EAAiB1kK,EAAIwkK,EAAU9rK,OAAQsH,IAClD2kK,EAAYxpK,KAAK,MAKnB,OAFAwpK,EAAcA,EAAY5kK,OAAO0kK,EAAQlyK,MAAMmyK,IAExCC,EAAYprK,KAAK,MAG1B9G,EAAQmyK,IAAM,IACdnyK,EAAQgsK,UAAY,IAEpBhsK,EAAQoyK,QAAU,SAAUz1J,GAE1B,GADoB,kBAATA,IAAmBA,GAAc,IACxB,IAAhBA,EAAK1W,OAAc,MAAO,IAK9B,IAJA,IAAIikB,EAAOvN,EAAKwN,WAAW,GACvBkoJ,EAAmB,KAATnoJ,EACVrL,GAAO,EACPuyJ,GAAe,EACV7jK,EAAIoP,EAAK1W,OAAS,EAAGsH,GAAK,IAAKA,EAEtC,GADA2c,EAAOvN,EAAKwN,WAAW5c,GACV,KAAT2c,GACA,IAAKknJ,EAAc,CACjBvyJ,EAAMtR,EACN,YAIJ6jK,GAAe,EAInB,OAAa,IAATvyJ,EAAmBwzJ,EAAU,IAAM,IACnCA,GAAmB,IAARxzJ,EAGN,IAEFlC,EAAK7c,MAAM,EAAG+e,IAiCvB7e,EAAQmxK,SAAW,SAAUx0J,EAAMta,GACjC,IAAIhD,EAAI8xK,EAASx0J,GAIjB,OAHIta,GAAOhD,EAAEsyK,QAAQ,EAAItvK,EAAI4D,UAAY5D,IACvChD,EAAIA,EAAEsyK,OAAO,EAAGtyK,EAAE4G,OAAS5D,EAAI4D,SAE1B5G,GAGTW,EAAQsyK,QAAU,SAAU31J,GACN,kBAATA,IAAmBA,GAAc,IAQ5C,IAPA,IAAI41J,GAAY,EACZC,EAAY,EACZ3zJ,GAAO,EACPuyJ,GAAe,EAGfqB,EAAc,EACTllK,EAAIoP,EAAK1W,OAAS,EAAGsH,GAAK,IAAKA,EAAG,CACzC,IAAI2c,EAAOvN,EAAKwN,WAAW5c,GAC3B,GAAa,KAAT2c,GASS,IAATrL,IAGFuyJ,GAAe,EACfvyJ,EAAMtR,EAAI,GAEC,KAAT2c,GAEkB,IAAdqoJ,EACFA,EAAWhlK,EACY,IAAhBklK,IACPA,EAAc,IACK,IAAdF,IAGTE,GAAe,QArBb,IAAKrB,EAAc,CACjBoB,EAAYjlK,EAAI,EAChB,OAuBR,OAAkB,IAAdglK,IAA4B,IAAT1zJ,GAEH,IAAhB4zJ,GAEgB,IAAhBA,GAAqBF,IAAa1zJ,EAAM,GAAK0zJ,IAAaC,EAAY,EACjE,GAEF71J,EAAK7c,MAAMyyK,EAAU1zJ,IAa9B,IAAI8yJ,EAA6B,MAApB,KAAKA,QAAQ,GACpB,SAAUx+I,EAAKvU,EAAO7N,GAAO,OAAOoiB,EAAIw+I,OAAO/yJ,EAAO7N,IACtD,SAAUoiB,EAAKvU,EAAO7N,GAEpB,OADI6N,EAAQ,IAAGA,EAAQuU,EAAIltB,OAAS2Y,GAC7BuU,EAAIw+I,OAAO/yJ,EAAO7N,M,wDCxSjC,IAAIqS,EAAI,EAAQ,QACZG,EAAc,EAAQ,QACtBniB,EAAS,EAAQ,QACjBggB,EAAS,EAAQ,QACjBP,EAAa,EAAQ,QACrBC,EAAW,EAAQ,QACnBre,EAAiB,EAAQ,QAAuCpD,EAChEqzK,EAA4B,EAAQ,QAEpCC,EAAevxK,EAAOsf,OAE1B,GAAI6C,GAAe1C,EAAW8xJ,OAAoB,gBAAiBA,EAAa9rK,iBAE/C1B,IAA/BwtK,IAAe1rJ,aACd,CACD,IAAI2rJ,EAA8B,GAE9BC,EAAgB,WAClB,IAAI5rJ,EAActf,UAAU1B,OAAS,QAAsBd,IAAjBwC,UAAU,QAAmBxC,EAAYnB,OAAO2D,UAAU,IAChG+F,EAASjI,gBAAgBotK,EACzB,IAAIF,EAAa1rJ,QAED9hB,IAAhB8hB,EAA4B0rJ,IAAiBA,EAAa1rJ,GAE9D,MADoB,KAAhBA,IAAoB2rJ,EAA4BllK,IAAU,GACvDA,GAETglK,EAA0BG,EAAeF,GACzC,IAAIG,EAAkBD,EAAchsK,UAAY8rK,EAAa9rK,UAC7DisK,EAAgBlyJ,YAAciyJ,EAE9B,IAAIE,EAAiBD,EAAgBxzK,SACjC0zK,EAA+C,gBAAhChvK,OAAO2uK,EAAa,SACnCM,EAAS,wBACbxwK,EAAeqwK,EAAiB,cAAe,CAC7C7qJ,cAAc,EACdvB,IAAK,WACH,IAAIQ,EAASpG,EAASrb,MAAQA,KAAKqW,UAAYrW,KAC3CwH,EAAS8lK,EAAe9yK,KAAKinB,GACjC,GAAI9F,EAAOwxJ,EAA6B1rJ,GAAS,MAAO,GACxD,IAAIoiB,EAAO0pI,EAAe/lK,EAAOnN,MAAM,GAAI,GAAKmN,EAAO0R,QAAQs0J,EAAQ,MACvE,MAAgB,KAAT3pI,OAAcnkC,EAAYmkC,KAIrClmB,EAAE,CAAEhiB,QAAQ,EAAM+mB,QAAQ,GAAQ,CAChCzH,OAAQmyJ,M,kCChDZ,uEAASK,EAAmBC,GAC1B,SAASC,IACP,IAAIpsG,EAAWqsG,QAAQC,UAAUH,EAAKrtK,MAAMosC,KAAKvqC,YAEjD,OADAlI,OAAOshB,eAAeimD,EAAUvnE,OAAO2vC,eAAe3pC,OAC/CuhE,EAkBT,OAfAosG,EAAkBvsK,UAAYpH,OAAOqK,OAAOqpK,EAAItsK,UAAW,CACzD+Z,YAAa,CACXle,MAAOywK,EACP/rJ,YAAY,EACZuiB,UAAU,EACV1hB,cAAc,KAIdxoB,OAAOshB,eACTthB,OAAOshB,eAAeqyJ,EAAmBD,GAEzCC,EAAkBG,UAAYJ,EAGzBC,EAKM,MAAMI,UAAkBN,EAAmBptK,QACxD,eAEE,OADA,gBAAO,GACA,EAGT,QACE,OAAO,IAAIL,KAAKmb,aAAchL,KAAKnQ,MAGrC,KAAKguK,GACH,OAAO3tK,MAAM6P,QAAQ89J,GAAiBhuK,KAAKmQ,KAAK69J,GAAiBhuK,KAAKiuK,WAAWD,GAGnF,UAAUh+J,EAAO/O,EAAS,GACxB,IAAK,IAAI6G,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC9H,KAAK8H,GAAKkI,EAAMlI,EAAI7G,GAGtB,OAAOjB,KAAKoQ,QAGd,GAAG49J,GACD,OAAIA,IAAkBhuK,KACbA,KAGF,eAAQguK,GAAiBhuK,KAAK8tB,QAAQkgJ,GAAiBhuK,KAAKme,SAAS6vJ,GAG9E,SAASxyK,GACP,OAAOA,EAASwE,KAAKosK,GAAG5wK,GAAUwE,KAGpC,QAAQgQ,EAAQ,GAAI/O,EAAS,GAC3B,IAAK,IAAI6G,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnCkI,EAAM/O,EAAS6G,GAAK9H,KAAK8H,GAG3B,OAAOkI,EAGT,iBACE,OAAO,IAAIzL,aAAavE,MAG1B,WACE,OAAOA,KAAKkuK,aAAa,QAG3B,aAAaviI,GACX,IAAInkC,EAAS,GAEb,IAAK,IAAIM,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnCN,IAAWM,EAAI,EAAI,KAAO,IAAM,eAAY9H,KAAK8H,GAAI6jC,GAGvD,MAAO,GAAG9jC,OAAO8jC,EAAKhxB,WAAa3a,KAAKmb,YAAYhY,KAAO,GAAI,KAAK0E,OAAOL,EAAQ,KAGrF,OAAOwI,GACL,IAAKA,GAAShQ,KAAKQ,SAAWwP,EAAMxP,OAClC,OAAO,EAGT,IAAK,IAAIsH,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC,IAAK,eAAO9H,KAAK8H,GAAIkI,EAAMlI,IACzB,OAAO,EAIX,OAAO,EAGT,YAAYkI,GACV,IAAKA,GAAShQ,KAAKQ,SAAWwP,EAAMxP,OAClC,OAAO,EAGT,IAAK,IAAIsH,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC,GAAI9H,KAAK8H,KAAOkI,EAAMlI,GACpB,OAAO,EAIX,OAAO,EAGT,SACE,IAAK,IAAIA,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC9H,KAAK8H,IAAM9H,KAAK8H,GAGlB,OAAO9H,KAAKoQ,QAGd,KAAK3L,EAAGC,EAAGuG,QACCvL,IAANuL,IACFA,EAAIvG,EACJA,EAAID,EACJA,EAAIzE,MAGN,IAAK,IAAI8H,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EAAG,CACtC,MAAMsS,EAAK3V,EAAEqD,GACb9H,KAAK8H,GAAKsS,EAAKnP,GAAKvG,EAAEoD,GAAKsS,GAG7B,OAAOpa,KAAKoQ,QAGd,IAAIyC,GACF,IAAK,IAAI/K,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC9H,KAAK8H,GAAKzF,KAAKgF,IAAIwL,EAAO/K,GAAI9H,KAAK8H,IAGrC,OAAO9H,KAAKoQ,QAGd,IAAIyC,GACF,IAAK,IAAI/K,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC9H,KAAK8H,GAAKzF,KAAKC,IAAIuQ,EAAO/K,GAAI9H,KAAK8H,IAGrC,OAAO9H,KAAKoQ,QAGd,MAAM+9J,EAAWC,GACf,IAAK,IAAItmK,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC9H,KAAK8H,GAAKzF,KAAKgF,IAAIhF,KAAKC,IAAItC,KAAK8H,GAAIqmK,EAAUrmK,IAAKsmK,EAAUtmK,IAGhE,OAAO9H,KAAKoQ,QAGd,OAAOqyB,GACL,IAAK,MAAM5vB,KAAU4vB,EACnB,IAAK,IAAI36B,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC9H,KAAK8H,IAAM+K,EAAO/K,GAItB,OAAO9H,KAAKoQ,QAGd,YAAYqyB,GACV,IAAK,MAAM5vB,KAAU4vB,EACnB,IAAK,IAAI36B,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC9H,KAAK8H,IAAM+K,EAAO/K,GAItB,OAAO9H,KAAKoQ,QAGd,MAAM+B,GACJ,GAAI9R,MAAM6P,QAAQiC,GAChB,OAAOnS,KAAKsK,SAAS6H,GAGvB,IAAK,IAAIrK,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC9H,KAAK8H,IAAMqK,EAGb,OAAOnS,KAAKoQ,QAGd,IAAI3L,GACF,OAAOzE,KAAK0iC,SAASj+B,GAGvB,UAAUA,GACR,IAAK,IAAIqD,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC9H,KAAK8H,GAAKrD,EAGZ,OAAOzE,KAAKoQ,QAGd,UAAU3L,GACR,IAAK,IAAIqD,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC9H,KAAK8H,IAAMrD,EAGb,OAAOzE,KAAKoQ,QAGd,UAAU3L,GACR,OAAOzE,KAAKquK,WAAW5pK,GAGzB,eAAe6pK,GACb,IAAK,IAAIxmK,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC9H,KAAK8H,IAAMwmK,EAGb,OAAOtuK,KAAKoQ,QAGd,aAAa3L,GACX,OAAOzE,KAAKmS,MAAM,EAAI1N,GAGxB,YAAY4C,EAAK/E,GACf,IAAK,IAAIwF,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnC9H,KAAK8H,GAAKzF,KAAKgF,IAAIhF,KAAKC,IAAItC,KAAK8H,GAAIT,GAAM/E,GAG7C,OAAOtC,KAAKoQ,QAGd,iBAAiBk+J,GACf,OAAOtuK,KAAKmS,MAAMm8J,GAGpB,eACE,OAAOtuK,KAGT,QACE,GAAI,OAAO0a,QAAU1a,KAAKy1D,WACxB,MAAM,IAAI1jD,MAAM,YAAYlK,OAAO7H,KAAKmb,YAAYhY,KAAM,yCAG5D,OAAOnD,KAGT,WACE,IAAImsH,EAAQnsH,KAAKQ,SAAWR,KAAK+H,SAEjC,IAAK,IAAID,EAAI,EAAGA,EAAI9H,KAAK+H,WAAYD,EACnCqkH,EAAQA,GAAS3xG,OAAOC,SAASza,KAAK8H,IAGxC,OAAOqkH,K,qBCrQX,IAAI/sG,EAAkB,EAAQ,QAE9B7kB,EAAQX,EAAIwlB,G,mCCFZ,8DACe,SAAS9gB,IACtB,MAAMosB,EAA4B,kBAAZ7vB,GAA4C,qBAApB0D,OAAO1D,KAAoCA,EAAQ2D,QACjG,OAAQksB,GAAU,oB,yDCHpB,sKAKA,SAAS6jJ,EAAsBrzK,EAAI27E,GACjC,MAAM23F,EAAqBtzK,EAAG27E,GAAcx6E,KAAKnB,GAEjDA,EAAG27E,GAAgB,YAAgBxM,GACjC,MAAMvoE,EAAQuoE,EAAO,GAErB,OAAMvoE,KAAS5G,EAAGkhB,MAAMD,OAIjBjhB,EAAGkhB,MAAM4I,OAAS9pB,EAAGkhB,MAAMD,MAAMra,GAH/B0sK,KAAsBnkG,IAMjCrwE,OAAOgD,eAAe9B,EAAG27E,GAAe,OAAQ,CAC9C55E,MAAU45E,EAAH,cACPr0D,cAAc,IAIlB,SAASisJ,EAAiBvzK,EAAI27E,EAAc36D,GAC1C,MAAMwyJ,EAAqBxzK,EAAG27E,GAAcx6E,KAAKnB,GAEjDA,EAAG27E,GAAgB,YAAgBxM,GACjC,MAAM,aACJskG,EAAY,SACZznD,GACEhrG,EAAOhhB,EAAGkhB,MAAMwyJ,gBAAiBvkG,GAMrC,OAJIskG,GACFD,KAAsBrkG,GAGjB68C,GAGTltH,OAAOgD,eAAe9B,EAAG27E,GAAe,OAAQ,CAC9C55E,MAAU45E,EAAH,YACPr0D,cAAc,IAIlB,SAASqsJ,EAAkB3zK,GACzB,MAAM4zK,EAAqB5zK,EAAGwjF,WAAWriF,KAAKnB,GAE9CA,EAAGwjF,WAAa,SAAwBhpE,GAClCxa,EAAGkhB,MAAMpG,UAAYN,IACvBo5J,EAAmBp5J,GACnBxa,EAAGkhB,MAAMpG,QAAUN,IAKzB,MAAMq5J,EACJ,YAAY7zK,GAAI,UACd8jE,GAAY,EAAK,IACjB1/D,EAAM,UACJ,IACFU,KAAK9E,GAAKA,EACV8E,KAAKgW,QAAU,KACfhW,KAAKgvK,WAAa,GAClBhvK,KAAKglB,QAAS,EACdhlB,KAAKmc,MAAQ6iD,EAAY,eAAc9jE,GAAMlB,OAAO4wB,OAAO,GAAI,QAC/D5qB,KAAKV,IAAMA,EACXU,KAAK4uK,aAAe5uK,KAAK4uK,aAAavyK,KAAK2D,MAC3ChG,OAAO2wC,KAAK3qC,MAGd,KAAK+b,EAAS,IACZ/b,KAAKgvK,WAAW/rK,KAAK,IAGvB,MACE,eAAOjD,KAAKgvK,WAAWxuK,OAAS,GAChC,MAAMyuK,EAAYjvK,KAAKgvK,WAAWhvK,KAAKgvK,WAAWxuK,OAAS,GAC3D,eAAcR,KAAK9E,GAAI+zK,GACvBjvK,KAAKgvK,WAAWnwC,MAGlB,aAAa9iH,GACX,IACImrG,EADAynD,GAAe,EAEnB,MAAMM,EAAYjvK,KAAKgvK,WAAWxuK,OAAS,GAAKR,KAAKgvK,WAAWhvK,KAAKgvK,WAAWxuK,OAAS,GAEzF,IAAK,MAAMrE,KAAO4f,EAAQ,CACxB,oBAAerc,IAARvD,GACP,MAAMc,EAAQ8e,EAAO5f,GACf+E,EAASlB,KAAKmc,MAAMhgB,GAErB,eAAec,EAAOiE,KACzBytK,GAAe,EACfznD,EAAWhmH,EAEP+tK,KAAe9yK,KAAO8yK,KACxBA,EAAU9yK,GAAO+E,GAGnBlB,KAAKmc,MAAMhgB,GAAOc,GAItB,MAAO,CACL0xK,eACAznD,aAMC,SAASgoD,EAAkBh0K,EAAIid,EAAU,IAC9C,MAAM,OACJ6M,GAAS,EAAI,UACbg6C,GACE7mD,EAGJ,GAFA,oBAAqBzY,IAAds/D,IAEF9jE,EAAGkhB,MAAO,CACb,MAAM1gB,EAA4B,qBAAXC,EAAyBA,EAAS5B,QACnD,gBACJkB,GACES,EAEAT,GACFA,EAAgBC,GAGlBA,EAAGkhB,MAAQ,IAAI2yJ,EAAQ7zK,EAAI,CACzB8jE,cAEF6vG,EAAkB3zK,GAElB,IAAK,MAAMiB,KAAO,OAAmB,CACnC,MAAM+f,EAAS,OAAkB/f,GACjCsyK,EAAiBvzK,EAAIiB,EAAK+f,GAG5BqyJ,EAAsBrzK,EAAI,gBAC1BqzK,EAAsBrzK,EAAI,aAI5B,OADAA,EAAGkhB,MAAM4I,OAASA,EACX9pB,EAEF,SAASi0K,EAAiBj0K,GAC1BA,EAAGkhB,OACN8yJ,EAAkBh0K,EAAI,CACpB8jE,WAAW,IAIf9jE,EAAGkhB,MAAMnZ,OAEJ,SAASmsK,EAAgBl0K,GAC9B,eAAOA,EAAGkhB,OACVlhB,EAAGkhB,MAAMyiH,S,yDC9JX,sDAAM1gI,EAAU,CACdC,KAAsB,qBAATA,MAAwBA,KACrCrE,OAA0B,qBAAXA,QAA0BA,OACzC4B,OAA0B,qBAAXA,GAA0BA,EACzC0C,SAA8B,qBAAbA,UAA4BA,UASlCnB,GAPCiB,EAAQC,MAAQD,EAAQpE,QAAUoE,EAAQxC,OACxCwC,EAAQpE,QAAUoE,EAAQC,MAAQD,EAAQxC,OAC1CwC,EAAQxC,QAAUwC,EAAQC,MAAQD,EAAQpE,OACxCoE,EAAQE,SAEkB,kBAAZxD,GAA4C,qBAApB0D,OAAO1D,IAAmCA,EAAQ2D,QAEhE,qBAAXzE,QAAwD,qBAAvBA,OAAOyD,aACjEiB,EAA6B,qBAAZ5D,GAA2BA,EAAQ6D,SAAW,YAAYC,KAAK9D,EAAQ6D,SACnED,GAAWG,WAAWH,EAAQ,M,kECfzD,sHACO,SAAS4wK,EAAezkK,EAAGpK,GAChC,GAAIoK,EAAEpK,SAAWA,EACf,OAAO,EAGT,IAAK,IAAIsH,EAAI,EAAGA,EAAI8C,EAAEpK,SAAUsH,EAC9B,IAAK0S,OAAOC,SAAS7P,EAAE9C,IACrB,OAAO,EAIX,OAAO,EAEF,SAASwnK,EAAYryK,GAC1B,IAAKud,OAAOC,SAASxd,GACnB,MAAM,IAAI8U,MAAM,kBAAkBlK,OAAO5K,IAG3C,OAAOA,EAEF,SAASsyK,EAAY3kK,EAAGpK,EAAQgvK,EAAa,IAClD,GAAI,OAAO90J,QAAU20J,EAAezkK,EAAGpK,GACrC,MAAM,IAAIuR,MAAM,YAAYlK,OAAO2nK,EAAY,yCAGjD,OAAO5kK,EAET,MAAMoP,EAAM,GACL,SAAS42C,EAAWllC,EAAQhtB,GAC5Bsb,EAAI0R,KACP1R,EAAI0R,IAAU,EACdrsB,QAAQysB,KAAK,GAAGjkB,OAAO6jB,EAAQ,iCAAiC7jB,OAAOnJ,EAAS","file":"js/hexagons.d512d86c.js","sourcesContent":["/* eslint-disable es/no-object-getownpropertynames -- safe */\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar $getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\n\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return $getOwnPropertyNames(it);\n  } catch (error) {\n    return windowNames.slice();\n  }\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]'\n    ? getWindowNames(it)\n    : $getOwnPropertyNames(toIndexedObject(it));\n};\n","export default function getHiResTimestamp() {\n  let timestamp;\n\n  if (typeof window !== 'undefined' && window.performance) {\n    timestamp = window.performance.now();\n  } else if (typeof process !== 'undefined' && process.hrtime) {\n    const timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import { polyfillVertexArrayObject } from './polyfill-vertex-array-object';\nimport { assert } from '../utils/assert';\nimport { WEBGL2_CONTEXT_POLYFILLS, WEBGL2_CONTEXT_OVERRIDES } from './polyfill-table';\nexport function polyfillContext(gl) {\n  gl.luma = gl.luma || {};\n  const {\n    luma\n  } = gl;\n\n  if (!luma.polyfilled) {\n    polyfillVertexArrayObject(gl);\n    initializeExtensions(gl);\n    installPolyfills(gl, WEBGL2_CONTEXT_POLYFILLS);\n    installOverrides(gl, {\n      target: luma,\n      target2: gl\n    });\n    luma.polyfilled = true;\n  }\n\n  return gl;\n}\nconst global_ = typeof global !== 'undefined' ? global : window;\nglobal_.polyfillContext = polyfillContext;\n\nfunction initializeExtensions(gl) {\n  gl.luma.extensions = {};\n  const EXTENSIONS = gl.getSupportedExtensions() || [];\n\n  for (const extension of EXTENSIONS) {\n    gl.luma[extension] = gl.getExtension(extension);\n  }\n}\n\nfunction installOverrides(gl, {\n  target,\n  target2\n}) {\n  Object.keys(WEBGL2_CONTEXT_OVERRIDES).forEach(key => {\n    if (typeof WEBGL2_CONTEXT_OVERRIDES[key] === 'function') {\n      const originalFunc = gl[key] ? gl[key].bind(gl) : () => {};\n      const polyfill = WEBGL2_CONTEXT_OVERRIDES[key].bind(null, gl, originalFunc);\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  });\n}\n\nfunction installPolyfills(gl, polyfills) {\n  for (const extension of Object.getOwnPropertyNames(polyfills)) {\n    if (extension !== 'overrides') {\n      polyfillExtension(gl, {\n        extension,\n        target: gl.luma,\n        target2: gl\n      });\n    }\n  }\n}\n\nfunction polyfillExtension(gl, {\n  extension,\n  target,\n  target2\n}) {\n  const defaults = WEBGL2_CONTEXT_POLYFILLS[extension];\n  assert(defaults);\n  const {\n    meta = {}\n  } = defaults;\n  const {\n    suffix = ''\n  } = meta;\n  const ext = gl.getExtension(extension);\n\n  for (const key of Object.keys(defaults)) {\n    const extKey = `${key}${suffix}`;\n    let polyfill = null;\n\n    if (key === 'meta') {} else if (typeof gl[key] === 'function') {} else if (ext && typeof ext[extKey] === 'function') {\n      polyfill = (...args) => ext[extKey](...args);\n    } else if (typeof defaults[key] === 'function') {\n      polyfill = defaults[key].bind(target);\n    }\n\n    if (polyfill) {\n      target[key] = polyfill;\n      target2[key] = polyfill;\n    }\n  }\n}\n//# sourceMappingURL=polyfill-context.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isMobile = isMobile;\nexports.default = getBrowser;\n\nvar _globals = require(\"./globals\");\n\nvar _isBrowser = _interopRequireDefault(require(\"./is-browser\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction isMobile() {\n  return typeof _globals.window.orientation !== 'undefined';\n}\n\nfunction getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !(0, _isBrowser.default)()) {\n    return 'Node';\n  }\n\n  if ((0, _isElectron.default)(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  var navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  var userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  var isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  var isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (_globals.window.chrome) {\n    return 'Chrome';\n  }\n\n  if (_globals.window.safari) {\n    return 'Safari';\n  }\n\n  if (_globals.window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}\n//# sourceMappingURL=get-browser.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","export default function isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && typeof process.versions === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  const realUserAgent = typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  const userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=is-electron.js.map","import { global } from 'probe.gl/env';\nconst glErrorShadow = {};\n\nfunction error(msg) {\n  if (global.console && global.console.error) {\n    global.console.error(msg);\n  }\n}\n\nfunction log(msg) {\n  if (global.console && global.console.log) {\n    global.console.log(msg);\n  }\n}\n\nfunction synthesizeGLError(err, opt_msg) {\n  glErrorShadow[err] = true;\n\n  if (opt_msg !== undefined) {\n    error(opt_msg);\n  }\n}\n\nfunction wrapGLError(gl) {\n  const f = gl.getError;\n\n  gl.getError = function getError() {\n    let err;\n\n    do {\n      err = f.apply(gl);\n\n      if (err !== 0) {\n        glErrorShadow[err] = true;\n      }\n    } while (err !== 0);\n\n    for (err in glErrorShadow) {\n      if (glErrorShadow[err]) {\n        delete glErrorShadow[err];\n        return parseInt(err, 10);\n      }\n    }\n\n    return 0;\n  };\n}\n\nconst WebGLVertexArrayObjectOES = function WebGLVertexArrayObjectOES(ext) {\n  const gl = ext.gl;\n  this.ext = ext;\n  this.isAlive = true;\n  this.hasBeenBound = false;\n  this.elementArrayBuffer = null;\n  this.attribs = new Array(ext.maxVertexAttribs);\n\n  for (let n = 0; n < this.attribs.length; n++) {\n    const attrib = new WebGLVertexArrayObjectOES.VertexAttrib(gl);\n    this.attribs[n] = attrib;\n  }\n\n  this.maxAttrib = 0;\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib = function VertexAttrib(gl) {\n  this.enabled = false;\n  this.buffer = null;\n  this.size = 4;\n  this.type = 5126;\n  this.normalized = false;\n  this.stride = 16;\n  this.offset = 0;\n  this.cached = '';\n  this.recache();\n};\n\nWebGLVertexArrayObjectOES.VertexAttrib.prototype.recache = function recache() {\n  this.cached = [this.size, this.type, this.normalized, this.stride, this.offset].join(':');\n};\n\nconst OESVertexArrayObject = function OESVertexArrayObject(gl) {\n  const self = this;\n  this.gl = gl;\n  wrapGLError(gl);\n  const original = this.original = {\n    getParameter: gl.getParameter,\n    enableVertexAttribArray: gl.enableVertexAttribArray,\n    disableVertexAttribArray: gl.disableVertexAttribArray,\n    bindBuffer: gl.bindBuffer,\n    getVertexAttrib: gl.getVertexAttrib,\n    vertexAttribPointer: gl.vertexAttribPointer\n  };\n\n  gl.getParameter = function getParameter(pname) {\n    if (pname === self.VERTEX_ARRAY_BINDING_OES) {\n      if (self.currentVertexArrayObject === self.defaultVertexArrayObject) {\n        return null;\n      }\n\n      return self.currentVertexArrayObject;\n    }\n\n    return original.getParameter.apply(this, arguments);\n  };\n\n  gl.enableVertexAttribArray = function enableVertexAttribArray(index) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    const attrib = vao.attribs[index];\n    attrib.enabled = true;\n    return original.enableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.disableVertexAttribArray = function disableVertexAttribArray(index) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, index);\n    const attrib = vao.attribs[index];\n    attrib.enabled = false;\n    return original.disableVertexAttribArray.apply(this, arguments);\n  };\n\n  gl.bindBuffer = function bindBuffer(target, buffer) {\n    switch (target) {\n      case 34962:\n        self.currentArrayBuffer = buffer;\n        break;\n\n      case 34963:\n        self.currentVertexArrayObject.elementArrayBuffer = buffer;\n        break;\n\n      default:\n    }\n\n    return original.bindBuffer.apply(this, arguments);\n  };\n\n  gl.getVertexAttrib = function getVertexAttrib(index, pname) {\n    const vao = self.currentVertexArrayObject;\n    const attrib = vao.attribs[index];\n\n    switch (pname) {\n      case 34975:\n        return attrib.buffer;\n\n      case 34338:\n        return attrib.enabled;\n\n      case 34339:\n        return attrib.size;\n\n      case 34340:\n        return attrib.stride;\n\n      case 34341:\n        return attrib.type;\n\n      case 34922:\n        return attrib.normalized;\n\n      default:\n        return original.getVertexAttrib.apply(this, arguments);\n    }\n  };\n\n  gl.vertexAttribPointer = function vertexAttribPointer(indx, size, type, normalized, stride, offset) {\n    const vao = self.currentVertexArrayObject;\n    vao.maxAttrib = Math.max(vao.maxAttrib, indx);\n    const attrib = vao.attribs[indx];\n    attrib.buffer = self.currentArrayBuffer;\n    attrib.size = size;\n    attrib.type = type;\n    attrib.normalized = normalized;\n    attrib.stride = stride;\n    attrib.offset = offset;\n    attrib.recache();\n    return original.vertexAttribPointer.apply(this, arguments);\n  };\n\n  if (gl.instrumentExtension) {\n    gl.instrumentExtension(this, 'OES_vertex_array_object');\n  }\n\n  if (gl.canvas) {\n    gl.canvas.addEventListener('webglcontextrestored', () => {\n      log('OESVertexArrayObject emulation library context restored');\n      self.reset_();\n    }, true);\n  }\n\n  this.reset_();\n};\n\nOESVertexArrayObject.prototype.VERTEX_ARRAY_BINDING_OES = 0x85b5;\n\nOESVertexArrayObject.prototype.reset_ = function reset_() {\n  const contextWasLost = this.vertexArrayObjects !== undefined;\n\n  if (contextWasLost) {\n    for (let ii = 0; ii < this.vertexArrayObjects.length; ++ii) {\n      this.vertexArrayObjects.isAlive = false;\n    }\n  }\n\n  const gl = this.gl;\n  this.maxVertexAttribs = gl.getParameter(34921);\n  this.defaultVertexArrayObject = new WebGLVertexArrayObjectOES(this);\n  this.currentVertexArrayObject = null;\n  this.currentArrayBuffer = null;\n  this.vertexArrayObjects = [this.defaultVertexArrayObject];\n  this.bindVertexArrayOES(null);\n};\n\nOESVertexArrayObject.prototype.createVertexArrayOES = function createVertexArrayOES() {\n  const arrayObject = new WebGLVertexArrayObjectOES(this);\n  this.vertexArrayObjects.push(arrayObject);\n  return arrayObject;\n};\n\nOESVertexArrayObject.prototype.deleteVertexArrayOES = function deleteVertexArrayOES(arrayObject) {\n  arrayObject.isAlive = false;\n  this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(arrayObject), 1);\n\n  if (this.currentVertexArrayObject === arrayObject) {\n    this.bindVertexArrayOES(null);\n  }\n};\n\nOESVertexArrayObject.prototype.isVertexArrayOES = function isVertexArrayOES(arrayObject) {\n  if (arrayObject && arrayObject instanceof WebGLVertexArrayObjectOES) {\n    if (arrayObject.hasBeenBound && arrayObject.ext === this) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nOESVertexArrayObject.prototype.bindVertexArrayOES = function bindVertexArrayOES(arrayObject) {\n  const gl = this.gl;\n\n  if (arrayObject && !arrayObject.isAlive) {\n    synthesizeGLError(1282, 'bindVertexArrayOES: attempt to bind deleted arrayObject');\n    return;\n  }\n\n  const original = this.original;\n  const oldVAO = this.currentVertexArrayObject;\n  this.currentVertexArrayObject = arrayObject || this.defaultVertexArrayObject;\n  this.currentVertexArrayObject.hasBeenBound = true;\n  const newVAO = this.currentVertexArrayObject;\n\n  if (oldVAO === newVAO) {\n    return;\n  }\n\n  if (!oldVAO || newVAO.elementArrayBuffer !== oldVAO.elementArrayBuffer) {\n    original.bindBuffer.call(gl, 34963, newVAO.elementArrayBuffer);\n  }\n\n  let currentBinding = this.currentArrayBuffer;\n  const maxAttrib = Math.max(oldVAO ? oldVAO.maxAttrib : 0, newVAO.maxAttrib);\n\n  for (let n = 0; n <= maxAttrib; n++) {\n    const attrib = newVAO.attribs[n];\n    const oldAttrib = oldVAO ? oldVAO.attribs[n] : null;\n\n    if (!oldVAO || attrib.enabled !== oldAttrib.enabled) {\n      if (attrib.enabled) {\n        original.enableVertexAttribArray.call(gl, n);\n      } else {\n        original.disableVertexAttribArray.call(gl, n);\n      }\n    }\n\n    if (attrib.enabled) {\n      let bufferChanged = false;\n\n      if (!oldVAO || attrib.buffer !== oldAttrib.buffer) {\n        if (currentBinding !== attrib.buffer) {\n          original.bindBuffer.call(gl, 34962, attrib.buffer);\n          currentBinding = attrib.buffer;\n        }\n\n        bufferChanged = true;\n      }\n\n      if (bufferChanged || attrib.cached !== oldAttrib.cached) {\n        original.vertexAttribPointer.call(gl, n, attrib.size, attrib.type, attrib.normalized, attrib.stride, attrib.offset);\n      }\n    }\n  }\n\n  if (this.currentArrayBuffer !== currentBinding) {\n    original.bindBuffer.call(gl, 34962, this.currentArrayBuffer);\n  }\n};\n\nexport function polyfillVertexArrayObject(gl) {\n  if (typeof gl.createVertexArray === 'function') {\n    return;\n  }\n\n  const original_getSupportedExtensions = gl.getSupportedExtensions;\n\n  gl.getSupportedExtensions = function getSupportedExtensions() {\n    const list = original_getSupportedExtensions.call(this) || [];\n\n    if (list.indexOf('OES_vertex_array_object') < 0) {\n      list.push('OES_vertex_array_object');\n    }\n\n    return list;\n  };\n\n  const original_getExtension = gl.getExtension;\n\n  gl.getExtension = function getExtension(name) {\n    const ext = original_getExtension.call(this, name);\n\n    if (ext) {\n      return ext;\n    }\n\n    if (name !== 'OES_vertex_array_object') {\n      return null;\n    }\n\n    if (!gl.__OESVertexArrayObject) {\n      this.__OESVertexArrayObject = new OESVertexArrayObject(this);\n    }\n\n    return this.__OESVertexArrayObject;\n  };\n}\n//# sourceMappingURL=polyfill-vertex-array-object.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: typeof process === 'object' && process\n};\nconst self_ = globals.self || globals.window || globals.global;\nconst window_ = globals.window || globals.self || globals.global;\nconst global_ = globals.global || globals.self || globals.window;\nconst document_ = globals.document || {};\nconst process_ = globals.process || {};\nconst console_ = console;\nexport { self_ as self, window_ as window, global_ as global, document_ as document, process_ as process, console_ as console };\n//# sourceMappingURL=globals.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport { config } from '../../lib/common';\nimport assert from '../../lib/assert';\nexport default class Matrix extends MathArray {\n  get ELEMENTS() {\n    assert(false);\n    return 0;\n  }\n\n  get RANK() {\n    assert(false);\n    return 0;\n  }\n\n  toString() {\n    let string = '[';\n\n    if (config.printRowMajor) {\n      string += 'row-major:';\n\n      for (let row = 0; row < this.RANK; ++row) {\n        for (let col = 0; col < this.RANK; ++col) {\n          string += \" \".concat(this[col * this.RANK + row]);\n        }\n      }\n    } else {\n      string += 'column-major:';\n\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        string += \" \".concat(this[i]);\n      }\n    }\n\n    string += ']';\n    return string;\n  }\n\n  getElementIndex(row, col) {\n    return col * this.RANK + row;\n  }\n\n  getElement(row, col) {\n    return this[col * this.RANK + row];\n  }\n\n  setElement(row, col, value) {\n    this[col * this.RANK + row] = checkNumber(value);\n    return this;\n  }\n\n  getColumn(columnIndex, result = new Array(this.RANK).fill(-0)) {\n    const firstIndex = columnIndex * this.RANK;\n\n    for (let i = 0; i < this.RANK; ++i) {\n      result[i] = this[firstIndex + i];\n    }\n\n    return result;\n  }\n\n  setColumn(columnIndex, columnVector) {\n    const firstIndex = columnIndex * this.RANK;\n\n    for (let i = 0; i < this.RANK; ++i) {\n      this[firstIndex + i] = columnVector[i];\n    }\n\n    return this;\n  }\n\n}\n//# sourceMappingURL=matrix.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import { checkVector, deprecated } from '../lib/validators';\nimport Matrix from './base/matrix';\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport * as vec4 from 'gl-matrix/vec4';\nconst IDENTITY = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\nconst ZERO = Object.freeze([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\nconst INDICES = Object.freeze({\n  COL0ROW0: 0,\n  COL0ROW1: 1,\n  COL0ROW2: 2,\n  COL0ROW3: 3,\n  COL1ROW0: 4,\n  COL1ROW1: 5,\n  COL1ROW2: 6,\n  COL1ROW3: 7,\n  COL2ROW0: 8,\n  COL2ROW1: 9,\n  COL2ROW2: 10,\n  COL2ROW3: 11,\n  COL3ROW0: 12,\n  COL3ROW1: 13,\n  COL3ROW2: 14,\n  COL3ROW3: 15\n});\nconst constants = {};\nexport default class Matrix4 extends Matrix {\n  static get IDENTITY() {\n    constants.IDENTITY = constants.IDENTITY || Object.freeze(new Matrix4(IDENTITY));\n    return constants.IDENTITY;\n  }\n\n  static get ZERO() {\n    constants.ZERO = constants.ZERO || Object.freeze(new Matrix4(ZERO));\n    return constants.ZERO;\n  }\n\n  get INDICES() {\n    return INDICES;\n  }\n\n  get ELEMENTS() {\n    return 16;\n  }\n\n  get RANK() {\n    return 4;\n  }\n\n  constructor(array) {\n    super(-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0);\n\n    if (arguments.length === 1 && Array.isArray(array)) {\n      this.copy(array);\n    } else {\n      this.identity();\n    }\n  }\n\n  copy(array) {\n    this[0] = array[0];\n    this[1] = array[1];\n    this[2] = array[2];\n    this[3] = array[3];\n    this[4] = array[4];\n    this[5] = array[5];\n    this[6] = array[6];\n    this[7] = array[7];\n    this[8] = array[8];\n    this[9] = array[9];\n    this[10] = array[10];\n    this[11] = array[11];\n    this[12] = array[12];\n    this[13] = array[13];\n    this[14] = array[14];\n    this[15] = array[15];\n    return this.check();\n  }\n\n  set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m30;\n    this[4] = m01;\n    this[5] = m11;\n    this[6] = m21;\n    this[7] = m31;\n    this[8] = m02;\n    this[9] = m12;\n    this[10] = m22;\n    this[11] = m32;\n    this[12] = m03;\n    this[13] = m13;\n    this[14] = m23;\n    this[15] = m33;\n    return this.check();\n  }\n\n  setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    this[0] = m00;\n    this[1] = m10;\n    this[2] = m20;\n    this[3] = m30;\n    this[4] = m01;\n    this[5] = m11;\n    this[6] = m21;\n    this[7] = m31;\n    this[8] = m02;\n    this[9] = m12;\n    this[10] = m22;\n    this[11] = m32;\n    this[12] = m03;\n    this[13] = m13;\n    this[14] = m23;\n    this[15] = m33;\n    return this.check();\n  }\n\n  toRowMajor(result) {\n    result[0] = this[0];\n    result[1] = this[4];\n    result[2] = this[8];\n    result[3] = this[12];\n    result[4] = this[1];\n    result[5] = this[5];\n    result[6] = this[9];\n    result[7] = this[13];\n    result[8] = this[2];\n    result[9] = this[6];\n    result[10] = this[10];\n    result[11] = this[14];\n    result[12] = this[3];\n    result[13] = this[7];\n    result[14] = this[11];\n    result[15] = this[15];\n    return result;\n  }\n\n  identity() {\n    return this.copy(IDENTITY);\n  }\n\n  fromQuaternion(q) {\n    mat4.fromQuat(this, q);\n    return this.check();\n  }\n\n  frustum({\n    left,\n    right,\n    bottom,\n    top,\n    near,\n    far\n  }) {\n    if (far === Infinity) {\n      Matrix4._computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n    } else {\n      mat4.frustum(this, left, right, bottom, top, near, far);\n    }\n\n    return this.check();\n  }\n\n  static _computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n    const column0Row0 = 2.0 * near / (right - left);\n    const column1Row1 = 2.0 * near / (top - bottom);\n    const column2Row0 = (right + left) / (right - left);\n    const column2Row1 = (top + bottom) / (top - bottom);\n    const column2Row2 = -1.0;\n    const column2Row3 = -1.0;\n    const column3Row2 = -2.0 * near;\n    result[0] = column0Row0;\n    result[1] = 0.0;\n    result[2] = 0.0;\n    result[3] = 0.0;\n    result[4] = 0.0;\n    result[5] = column1Row1;\n    result[6] = 0.0;\n    result[7] = 0.0;\n    result[8] = column2Row0;\n    result[9] = column2Row1;\n    result[10] = column2Row2;\n    result[11] = column2Row3;\n    result[12] = 0.0;\n    result[13] = 0.0;\n    result[14] = column3Row2;\n    result[15] = 0.0;\n    return result;\n  }\n\n  lookAt(eye, center, up) {\n    if (arguments.length === 1) {\n      ({\n        eye,\n        center,\n        up\n      } = eye);\n    }\n\n    center = center || [0, 0, 0];\n    up = up || [0, 1, 0];\n    mat4.lookAt(this, eye, center, up);\n    return this.check();\n  }\n\n  ortho({\n    left,\n    right,\n    bottom,\n    top,\n    near = 0.1,\n    far = 500\n  }) {\n    mat4.ortho(this, left, right, bottom, top, near, far);\n    return this.check();\n  }\n\n  orthographic({\n    fovy = 45 * Math.PI / 180,\n    aspect = 1,\n    focalDistance = 1,\n    near = 0.1,\n    far = 500\n  }) {\n    if (fovy > Math.PI * 2) {\n      throw Error('radians');\n    }\n\n    const halfY = fovy / 2;\n    const top = focalDistance * Math.tan(halfY);\n    const right = top * aspect;\n    return new Matrix4().ortho({\n      left: -right,\n      right,\n      bottom: -top,\n      top,\n      near,\n      far\n    });\n  }\n\n  perspective({\n    fovy = undefined,\n    fov = 45 * Math.PI / 180,\n    aspect = 1,\n    near = 0.1,\n    far = 500\n  } = {}) {\n    fovy = fovy || fov;\n\n    if (fovy > Math.PI * 2) {\n      throw Error('radians');\n    }\n\n    mat4.perspective(this, fovy, aspect, near, far);\n    return this.check();\n  }\n\n  determinant() {\n    return mat4.determinant(this);\n  }\n\n  getScale(result = [-0, -0, -0]) {\n    result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n    result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n    result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n    return result;\n  }\n\n  getTranslation(result = [-0, -0, -0]) {\n    result[0] = this[12];\n    result[1] = this[13];\n    result[2] = this[14];\n    return result;\n  }\n\n  getRotation(result = [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0], scaleResult = null) {\n    const scale = this.getScale(scaleResult || [-0, -0, -0]);\n    const inverseScale0 = 1 / scale[0];\n    const inverseScale1 = 1 / scale[1];\n    const inverseScale2 = 1 / scale[2];\n    result[0] = this[0] * inverseScale0;\n    result[1] = this[1] * inverseScale1;\n    result[2] = this[2] * inverseScale2;\n    result[3] = 0;\n    result[4] = this[4] * inverseScale0;\n    result[5] = this[5] * inverseScale1;\n    result[6] = this[6] * inverseScale2;\n    result[7] = 0;\n    result[8] = this[8] * inverseScale0;\n    result[9] = this[9] * inverseScale1;\n    result[10] = this[10] * inverseScale2;\n    result[11] = 0;\n    result[12] = 0;\n    result[13] = 0;\n    result[14] = 0;\n    result[15] = 1;\n    return result;\n  }\n\n  getRotationMatrix3(result = [-0, -0, -0, -0, -0, -0, -0, -0, -0], scaleResult = null) {\n    const scale = this.getScale(scaleResult || [-0, -0, -0]);\n    const inverseScale0 = 1 / scale[0];\n    const inverseScale1 = 1 / scale[1];\n    const inverseScale2 = 1 / scale[2];\n    result[0] = this[0] * inverseScale0;\n    result[1] = this[1] * inverseScale1;\n    result[2] = this[2] * inverseScale2;\n    result[3] = this[4] * inverseScale0;\n    result[4] = this[5] * inverseScale1;\n    result[5] = this[6] * inverseScale2;\n    result[6] = this[8] * inverseScale0;\n    result[7] = this[9] * inverseScale1;\n    result[8] = this[10] * inverseScale2;\n    return result;\n  }\n\n  transpose() {\n    mat4.transpose(this, this);\n    return this.check();\n  }\n\n  invert() {\n    mat4.invert(this, this);\n    return this.check();\n  }\n\n  multiplyLeft(a) {\n    mat4.multiply(this, a, this);\n    return this.check();\n  }\n\n  multiplyRight(a) {\n    mat4.multiply(this, this, a);\n    return this.check();\n  }\n\n  rotateX(radians) {\n    mat4.rotateX(this, this, radians);\n    return this.check();\n  }\n\n  rotateY(radians) {\n    mat4.rotateY(this, this, radians);\n    return this.check();\n  }\n\n  rotateZ(radians) {\n    mat4.rotateZ(this, this, radians);\n    return this.check();\n  }\n\n  rotateXYZ([rx, ry, rz]) {\n    return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n  }\n\n  rotateAxis(radians, axis) {\n    mat4.rotate(this, this, radians, axis);\n    return this.check();\n  }\n\n  scale(factor) {\n    if (Array.isArray(factor)) {\n      mat4.scale(this, this, factor);\n    } else {\n      mat4.scale(this, this, [factor, factor, factor]);\n    }\n\n    return this.check();\n  }\n\n  translate(vec) {\n    mat4.translate(this, this, vec);\n    return this.check();\n  }\n\n  transform(vector, result) {\n    if (vector.length === 4) {\n      result = vec4.transformMat4(result || [-0, -0, -0, -0], vector, this);\n      checkVector(result, 4);\n      return result;\n    }\n\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformAsPoint(vector, result) {\n    const {\n      length\n    } = vector;\n\n    switch (length) {\n      case 2:\n        result = vec2.transformMat4(result || [-0, -0], vector, this);\n        break;\n\n      case 3:\n        result = vec3.transformMat4(result || [-0, -0, -0], vector, this);\n        break;\n\n      default:\n        throw new Error('Illegal vector');\n    }\n\n    checkVector(result, vector.length);\n    return result;\n  }\n\n  transformAsVector(vector, result) {\n    switch (vector.length) {\n      case 2:\n        result = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n        break;\n\n      case 3:\n        result = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n        break;\n\n      default:\n        throw new Error('Illegal vector');\n    }\n\n    checkVector(result, vector.length);\n    return result;\n  }\n\n  makeRotationX(radians) {\n    return this.identity().rotateX(radians);\n  }\n\n  makeTranslation(x, y, z) {\n    return this.identity().translate([x, y, z]);\n  }\n\n  transformPoint(vector, result) {\n    deprecated('Matrix4.transformPoint', '3.0');\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformVector(vector, result) {\n    deprecated('Matrix4.transformVector', '3.0');\n    return this.transformAsPoint(vector, result);\n  }\n\n  transformDirection(vector, result) {\n    deprecated('Matrix4.transformDirection', '3.0');\n    return this.transformAsVector(vector, result);\n  }\n\n}\n//# sourceMappingURL=matrix4.js.map","import { isWebGL2 } from '../utils/webgl-checks';\nconst OES_element_index = 'OES_element_index';\nconst WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nconst EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nconst EXT_disjoint_timer_query_webgl2 = 'EXT_disjoint_timer_query_webgl2';\nconst EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nconst WEBGL_debug_renderer_info = 'WEBGL_debug_renderer_info';\nconst GL_FRAGMENT_SHADER_DERIVATIVE_HINT = 0x8b8b;\nconst GL_DONT_CARE = 0x1100;\nconst GL_GPU_DISJOINT_EXT = 0x8fbb;\nconst GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84ff;\nconst GL_UNMASKED_VENDOR_WEBGL = 0x9245;\nconst GL_UNMASKED_RENDERER_WEBGL = 0x9246;\n\nconst getWebGL2ValueOrZero = gl => !isWebGL2(gl) ? 0 : undefined;\n\nconst WEBGL_PARAMETERS = {\n  [3074]: gl => !isWebGL2(gl) ? 36064 : undefined,\n  [GL_FRAGMENT_SHADER_DERIVATIVE_HINT]: gl => !isWebGL2(gl) ? GL_DONT_CARE : undefined,\n  [35977]: getWebGL2ValueOrZero,\n  [32937]: getWebGL2ValueOrZero,\n  [GL_GPU_DISJOINT_EXT]: (gl, getParameter) => {\n    const ext = isWebGL2(gl) ? gl.getExtension(EXT_disjoint_timer_query_webgl2) : gl.getExtension(EXT_disjoint_timer_query);\n    return ext && ext.GPU_DISJOINT_EXT ? getParameter(ext.GPU_DISJOINT_EXT) : 0;\n  },\n  [GL_UNMASKED_VENDOR_WEBGL]: (gl, getParameter) => {\n    const ext = gl.getExtension(WEBGL_debug_renderer_info);\n    return getParameter(ext && ext.UNMASKED_VENDOR_WEBGL || 7936);\n  },\n  [GL_UNMASKED_RENDERER_WEBGL]: (gl, getParameter) => {\n    const ext = gl.getExtension(WEBGL_debug_renderer_info);\n    return getParameter(ext && ext.UNMASKED_RENDERER_WEBGL || 7937);\n  },\n  [GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT]: (gl, getParameter) => {\n    const ext = gl.luma.extensions[EXT_texture_filter_anisotropic];\n    return ext ? getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1.0;\n  },\n  [32883]: getWebGL2ValueOrZero,\n  [35071]: getWebGL2ValueOrZero,\n  [37447]: getWebGL2ValueOrZero,\n  [36063]: (gl, getParameter) => {\n    if (!isWebGL2(gl)) {\n      const ext = gl.getExtension(WEBGL_draw_buffers);\n      return ext ? getParameter(ext.MAX_COLOR_ATTACHMENTS_WEBGL) : 0;\n    }\n\n    return undefined;\n  },\n  [35379]: getWebGL2ValueOrZero,\n  [35374]: getWebGL2ValueOrZero,\n  [35377]: getWebGL2ValueOrZero,\n  [34852]: gl => {\n    if (!isWebGL2(gl)) {\n      const ext = gl.getExtension(WEBGL_draw_buffers);\n      return ext ? ext.MAX_DRAW_BUFFERS_WEBGL : 0;\n    }\n\n    return undefined;\n  },\n  [36203]: gl => gl.getExtension(OES_element_index) ? 2147483647 : 65535,\n  [33001]: gl => gl.getExtension(OES_element_index) ? 16777216 : 65535,\n  [33000]: gl => 16777216,\n  [37157]: getWebGL2ValueOrZero,\n  [35373]: getWebGL2ValueOrZero,\n  [35657]: getWebGL2ValueOrZero,\n  [36183]: getWebGL2ValueOrZero,\n  [37137]: getWebGL2ValueOrZero,\n  [34045]: getWebGL2ValueOrZero,\n  [35978]: getWebGL2ValueOrZero,\n  [35979]: getWebGL2ValueOrZero,\n  [35968]: getWebGL2ValueOrZero,\n  [35376]: getWebGL2ValueOrZero,\n  [35375]: getWebGL2ValueOrZero,\n  [35659]: getWebGL2ValueOrZero,\n  [37154]: getWebGL2ValueOrZero,\n  [35371]: getWebGL2ValueOrZero,\n  [35658]: getWebGL2ValueOrZero,\n  [35076]: getWebGL2ValueOrZero,\n  [35077]: getWebGL2ValueOrZero,\n  [35380]: getWebGL2ValueOrZero\n};\nexport function getParameterPolyfill(gl, originalGetParameter, pname) {\n  const limit = WEBGL_PARAMETERS[pname];\n  const value = typeof limit === 'function' ? limit(gl, originalGetParameter, pname) : limit;\n  const result = value !== undefined ? value : originalGetParameter(pname);\n  return result;\n}\n//# sourceMappingURL=get-parameter-polyfill.js.map","import { assert } from '../utils/assert';\nimport { isWebGL2 } from '../utils/webgl-checks';\nimport { getParameterPolyfill } from './get-parameter-polyfill';\nconst OES_vertex_array_object = 'OES_vertex_array_object';\nconst ANGLE_instanced_arrays = 'ANGLE_instanced_arrays';\nconst WEBGL_draw_buffers = 'WEBGL_draw_buffers';\nconst EXT_disjoint_timer_query = 'EXT_disjoint_timer_query';\nconst EXT_texture_filter_anisotropic = 'EXT_texture_filter_anisotropic';\nconst ERR_VAO_NOT_SUPPORTED = 'VertexArray requires WebGL2 or OES_vertex_array_object extension';\n\nfunction getExtensionData(gl, extension) {\n  return {\n    webgl2: isWebGL2(gl),\n    ext: gl.getExtension(extension)\n  };\n}\n\nexport const WEBGL2_CONTEXT_POLYFILLS = {\n  [OES_vertex_array_object]: {\n    meta: {\n      suffix: 'OES'\n    },\n    createVertexArray: () => {\n      assert(false, ERR_VAO_NOT_SUPPORTED);\n    },\n    deleteVertexArray: () => {},\n    bindVertexArray: () => {},\n    isVertexArray: () => false\n  },\n  [ANGLE_instanced_arrays]: {\n    meta: {\n      suffix: 'ANGLE'\n    },\n\n    vertexAttribDivisor(location, divisor) {\n      assert(divisor === 0, 'WebGL instanced rendering not supported');\n    },\n\n    drawElementsInstanced: () => {},\n    drawArraysInstanced: () => {}\n  },\n  [WEBGL_draw_buffers]: {\n    meta: {\n      suffix: 'WEBGL'\n    },\n    drawBuffers: () => {\n      assert(false);\n    }\n  },\n  [EXT_disjoint_timer_query]: {\n    meta: {\n      suffix: 'EXT'\n    },\n    createQuery: () => {\n      assert(false);\n    },\n    deleteQuery: () => {\n      assert(false);\n    },\n    beginQuery: () => {\n      assert(false);\n    },\n    endQuery: () => {},\n\n    getQuery(handle, pname) {\n      return this.getQueryObject(handle, pname);\n    },\n\n    getQueryParameter(handle, pname) {\n      return this.getQueryObject(handle, pname);\n    },\n\n    getQueryObject: () => {}\n  }\n};\nexport const WEBGL2_CONTEXT_OVERRIDES = {\n  readBuffer: (gl, originalFunc, attachment) => {\n    if (isWebGL2(gl)) {\n      originalFunc(attachment);\n    } else {}\n  },\n  getVertexAttrib: (gl, originalFunc, location, pname) => {\n    const {\n      webgl2,\n      ext\n    } = getExtensionData(gl, ANGLE_instanced_arrays);\n    let result;\n\n    switch (pname) {\n      case 35069:\n        result = !webgl2 ? false : undefined;\n        break;\n\n      case 35070:\n        result = !webgl2 && !ext ? 0 : undefined;\n        break;\n\n      default:\n    }\n\n    return result !== undefined ? result : originalFunc(location, pname);\n  },\n  getProgramParameter: (gl, originalFunc, program, pname) => {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 35967:\n          return 35981;\n\n        case 35971:\n          return 0;\n\n        case 35382:\n          return 0;\n\n        default:\n      }\n    }\n\n    return originalFunc(program, pname);\n  },\n  getInternalformatParameter: (gl, originalFunc, target, format, pname) => {\n    if (!isWebGL2(gl)) {\n      switch (pname) {\n        case 32937:\n          return new Int32Array([0]);\n\n        default:\n      }\n    }\n\n    return gl.getInternalformatParameter(target, format, pname);\n  },\n\n  getTexParameter(gl, originalFunc, target, pname) {\n    switch (pname) {\n      case 34046:\n        const {\n          extensions\n        } = gl.luma;\n        const ext = extensions[EXT_texture_filter_anisotropic];\n        pname = ext && ext.TEXTURE_MAX_ANISOTROPY_EXT || 34046;\n        break;\n\n      default:\n    }\n\n    return originalFunc(target, pname);\n  },\n\n  getParameter: getParameterPolyfill,\n\n  hint(gl, originalFunc, pname, value) {\n    return originalFunc(pname, value);\n  }\n\n};\n//# sourceMappingURL=polyfill-table.js.map","var valueOf = 1.0.valueOf;\n\n// `thisNumberValue` abstract operation\n// https://tc39.es/ecma262/#sec-thisnumbervalue\nmodule.exports = function (value) {\n  return valueOf.call(value);\n};\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","exports.nextTick = function nextTick(fn) {\n    var args = Array.prototype.slice.call(arguments);\n    args.shift();\n    setTimeout(function () {\n        fn.apply(null, args);\n    }, 0);\n};\n\nexports.platform = exports.arch = \nexports.execPath = exports.title = 'browser';\nexports.pid = 1;\nexports.browser = true;\nexports.env = {};\nexports.argv = [];\n\nexports.binding = function (name) {\n\tthrow new Error('No such module. (Possibly not yet loaded)')\n};\n\n(function () {\n    var cwd = '/';\n    var path;\n    exports.cwd = function () { return cwd };\n    exports.chdir = function (dir) {\n        if (!path) path = require('path');\n        cwd = path.resolve(dir, cwd);\n    };\n})();\n\nexports.exit = exports.kill = \nexports.umask = exports.dlopen = \nexports.uptime = exports.memoryUsage = \nexports.uvCounters = function() {};\nexports.features = {};\n","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","export const userAgent = typeof navigator !== 'undefined' && navigator.userAgent ? navigator.userAgent.toLowerCase() : '';\nconst window_ = typeof window !== 'undefined' ? window : global;\nconst global_ = typeof global !== 'undefined' ? global : window;\nconst document_ = typeof document !== 'undefined' ? document : {};\nexport { window_ as window, global_ as global, document_ as document };\nlet passiveSupported = false;\n\ntry {\n  const options = {\n    get passive() {\n      passiveSupported = true;\n      return true;\n    }\n\n  };\n  window_.addEventListener('test', options, options);\n  window_.removeEventListener('test', options, options);\n} catch (err) {}\n\nexport { passiveSupported };\n//# sourceMappingURL=globals.js.map","import { config } from './lib/common';\nexport { default as Vector2 } from './classes/vector2';\nexport { default as Vector3 } from './classes/vector3';\nexport { default as Vector4 } from './classes/vector4';\nexport { default as Matrix3 } from './classes/matrix3';\nexport { default as Matrix4 } from './classes/matrix4';\nexport { default as Quaternion } from './classes/quaternion';\nexport { config, configure, formatValue, isArray, clone, equals, exactEquals, toRadians, toDegrees, radians, degrees, sin, cos, tan, asin, acos, atan, clamp, lerp, withEpsilon } from './lib/common';\nexport { checkNumber } from './lib/validators';\nexport { default as _MathUtils } from './lib/math-utils';\nexport { default as SphericalCoordinates } from './classes/spherical-coordinates';\nexport { default as Pose } from './classes/pose';\nexport { default as Euler } from './classes/euler';\nexport { default as assert } from './lib/assert';\nconst globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global\n};\nconst global_ = globals.global || globals.self || globals.window;\nglobal_.mathgl = {\n  config\n};\nexport { default as _SphericalCoordinates } from './classes/spherical-coordinates';\nexport { default as _Pose } from './classes/pose';\nexport { default as _Euler } from './classes/euler';\n//# sourceMappingURL=index.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = toString(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","import assert from './assert';\nconst RADIANS_TO_DEGREES = 1 / Math.PI * 180;\nconst DEGREES_TO_RADIANS = 1 / 180 * Math.PI;\nconst config = {};\nconfig.EPSILON = 1e-12;\nconfig.debug = false;\nconfig.precision = 4;\nconfig.printTypes = false;\nconfig.printDegrees = false;\nconfig.printRowMajor = true;\nexport { config };\nexport function configure(options = {}) {\n  for (const key in options) {\n    assert(key in config);\n    config[key] = options[key];\n  }\n\n  return config;\n}\n\nfunction round(value) {\n  return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n\nexport function formatValue(value, {\n  precision = config.precision || 4\n} = {}) {\n  value = round(value);\n  return \"\".concat(parseFloat(value.toPrecision(precision)));\n}\nexport function isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value) && !(value instanceof DataView);\n}\n\nfunction duplicateArray(array) {\n  return array.clone ? array.clone() : new Array(array.length);\n}\n\nexport function clone(array) {\n  return array.clone ? array.clone() : new Array(...array);\n}\n\nfunction map(value, func, result) {\n  if (isArray(value)) {\n    result = result || duplicateArray(value);\n\n    for (let i = 0; i < result.length && i < value.length; ++i) {\n      result[i] = func(value[i], i, result);\n    }\n\n    return result;\n  }\n\n  return func(value);\n}\n\nexport function toRadians(degrees) {\n  return radians(degrees);\n}\nexport function toDegrees(radians) {\n  return degrees(radians);\n}\nexport function radians(degrees, result) {\n  return map(degrees, degrees => degrees * DEGREES_TO_RADIANS, result);\n}\nexport function degrees(radians, result) {\n  return map(radians, radians => radians * RADIANS_TO_DEGREES, result);\n}\nexport function sin(radians) {\n  return map(radians, angle => Math.sin(angle));\n}\nexport function cos(radians) {\n  return map(radians, angle => Math.cos(angle));\n}\nexport function tan(radians) {\n  return map(radians, angle => Math.tan(angle));\n}\nexport function asin(radians) {\n  return map(radians, angle => Math.asin(angle));\n}\nexport function acos(radians) {\n  return map(radians, angle => Math.acos(angle));\n}\nexport function atan(radians) {\n  return map(radians, angle => Math.atan(angle));\n}\nexport function clamp(value, min, max) {\n  return map(value, value => Math.max(min, Math.min(max, value)));\n}\nexport function lerp(a, b, t) {\n  if (isArray(a)) {\n    return a.map((ai, i) => lerp(ai, b[i], t));\n  }\n\n  return t * b + (1 - t) * a;\n}\nexport function equals(a, b, epsilon) {\n  const oldEpsilon = config.EPSILON;\n\n  if (epsilon) {\n    config.EPSILON = epsilon;\n  }\n\n  try {\n    if (a === b) {\n      return true;\n    }\n\n    if (isArray(a) && isArray(b)) {\n      if (a.length !== b.length) {\n        return false;\n      }\n\n      for (let i = 0; i < a.length; ++i) {\n        if (!equals(a[i], b[i])) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    if (a && a.equals) {\n      return a.equals(b);\n    }\n\n    if (b && b.equals) {\n      return b.equals(a);\n    }\n\n    if (Number.isFinite(a) && Number.isFinite(b)) {\n      return Math.abs(a - b) <= config.EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n    }\n\n    return false;\n  } finally {\n    config.EPSILON = oldEpsilon;\n  }\n}\nexport function exactEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a && typeof a === 'object' && b && typeof b === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false;\n    }\n\n    if (a.exactEquals) {\n      return a.exactEquals(b);\n    }\n  }\n\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (let i = 0; i < a.length; ++i) {\n      if (!exactEquals(a[i], b[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\nexport function withEpsilon(EPSILON, func) {\n  const oldPrecision = config.EPSILON;\n  config.EPSILON = EPSILON;\n  let value;\n\n  try {\n    value = func();\n  } finally {\n    config.EPSILON = oldPrecision;\n  }\n\n  return value;\n}\n//# sourceMappingURL=common.js.map","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./4-Hexagons.vue?vue&type=style&index=0&id=09cbada8&lang=scss&scoped=true\"","var path = require('../internals/path');\nvar hasOwn = require('../internals/has-own-property');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineProperty = require('../internals/object-define-property').f;\n\nmodule.exports = function (NAME) {\n  var Symbol = path.Symbol || (path.Symbol = {});\n  if (!hasOwn(Symbol, NAME)) defineProperty(Symbol, NAME, {\n    value: wrappedWellKnownSymbolModule.f(NAME)\n  });\n};\n","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global;\nconst window_ = globals.window || globals.self || globals.global;\nconst global_ = globals.global || globals.self || globals.window;\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import { GL_PARAMETER_DEFAULTS, GL_PARAMETER_SETTERS, GL_COMPOSITE_PARAMETER_SETTERS, GL_PARAMETER_GETTERS } from './webgl-parameter-tables';\nimport { pushContextState, popContextState } from './track-context-state';\nimport { assert } from '../utils/assert';\nimport { isWebGL } from '../utils/webgl-checks';\nimport { isObjectEmpty } from '../utils/utils';\nexport function setParameters(gl, values) {\n  assert(isWebGL(gl), 'setParameters requires a WebGL context');\n\n  if (isObjectEmpty(values)) {\n    return;\n  }\n\n  const compositeSetters = {};\n\n  for (const key in values) {\n    const glConstant = Number(key);\n    const setter = GL_PARAMETER_SETTERS[key];\n\n    if (setter) {\n      if (typeof setter === 'string') {\n        compositeSetters[setter] = true;\n      } else {\n        setter(gl, values[key], glConstant);\n      }\n    }\n  }\n\n  const cache = gl.state && gl.state.cache;\n\n  if (cache) {\n    for (const key in compositeSetters) {\n      const compositeSetter = GL_COMPOSITE_PARAMETER_SETTERS[key];\n      compositeSetter(gl, values, cache);\n    }\n  }\n}\nexport function getParameters(gl, parameters) {\n  parameters = parameters || GL_PARAMETER_DEFAULTS;\n\n  if (typeof parameters === 'number') {\n    const key = parameters;\n    const getter = GL_PARAMETER_GETTERS[key];\n    return getter ? getter(gl, key) : gl.getParameter(key);\n  }\n\n  const parameterKeys = Array.isArray(parameters) ? parameters : Object.keys(parameters);\n  const state = {};\n\n  for (const key of parameterKeys) {\n    const getter = GL_PARAMETER_GETTERS[key];\n    state[key] = getter ? getter(gl, Number(key)) : gl.getParameter(Number(key));\n  }\n\n  return state;\n}\nexport function resetParameters(gl) {\n  setParameters(gl, GL_PARAMETER_DEFAULTS);\n}\nexport function withParameters(gl, parameters, func) {\n  if (isObjectEmpty(parameters)) {\n    return func(gl);\n  }\n\n  const {\n    nocatch = true\n  } = parameters;\n  pushContextState(gl);\n  setParameters(gl, parameters);\n  let value;\n\n  if (nocatch) {\n    value = func(gl);\n    popContextState(gl);\n  } else {\n    try {\n      value = func(gl);\n    } finally {\n      popContextState(gl);\n    }\n  }\n\n  return value;\n}\n//# sourceMappingURL=unified-parameter-api.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.console = exports.process = exports.document = exports.global = exports.window = exports.self = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document,\n  process: (typeof process === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(process)) === 'object' && process\n};\nvar self_ = globals.self || globals.window || globals.global;\nexports.self = self_;\nvar window_ = globals.window || globals.self || globals.global;\nexports.window = window_;\nvar global_ = globals.global || globals.self || globals.window;\nexports.global = global_;\nvar document_ = globals.document || {};\nexports.document = document_;\nvar process_ = globals.process || {};\nexports.process = process_;\nvar console_ = console;\nexports.console = console_;\n//# sourceMappingURL=globals.js.map","import { assert } from './assert';\nconst ERR_CONTEXT = 'Invalid WebGLRenderingContext';\nexport const ERR_WEBGL = ERR_CONTEXT;\nexport const ERR_WEBGL2 = 'Requires WebGL2';\nexport function isWebGL(gl) {\n  if (typeof WebGLRenderingContext !== 'undefined' && gl instanceof WebGLRenderingContext) {\n    return true;\n  }\n\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && Number.isFinite(gl._version));\n}\nexport function isWebGL2(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && gl._version === 2);\n}\nexport function getWebGL2Context(gl) {\n  return isWebGL2(gl) ? gl : null;\n}\nexport function assertWebGLContext(gl) {\n  assert(isWebGL(gl), ERR_CONTEXT);\n  return gl;\n}\nexport function assertWebGL2Context(gl) {\n  assert(isWebGL2(gl), ERR_WEBGL2);\n  return gl;\n}\n//# sourceMappingURL=webgl-checks.js.map","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar IS_PURE = require('../internals/is-pure');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar fails = require('../internals/fails');\nvar hasOwn = require('../internals/has-own-property');\nvar isArray = require('../internals/is-array');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar anObject = require('../internals/an-object');\nvar toObject = require('../internals/to-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar $toString = require('../internals/to-string');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar nativeObjectCreate = require('../internals/object-create');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternal = require('../internals/object-get-own-property-names-external');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar redefine = require('../internals/redefine');\nvar shared = require('../internals/shared');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar uid = require('../internals/uid');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineWellKnownSymbol = require('../internals/define-well-known-symbol');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar InternalStateModule = require('../internals/internal-state');\nvar $forEach = require('../internals/array-iteration').forEach;\n\nvar HIDDEN = sharedKey('hidden');\nvar SYMBOL = 'Symbol';\nvar PROTOTYPE = 'prototype';\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(SYMBOL);\nvar ObjectPrototype = Object[PROTOTYPE];\nvar $Symbol = global.Symbol;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;\nvar nativePropertyIsEnumerable = propertyIsEnumerableModule.f;\nvar AllSymbols = shared('symbols');\nvar ObjectPrototypeSymbols = shared('op-symbols');\nvar StringToSymbolRegistry = shared('string-to-symbol-registry');\nvar SymbolToStringRegistry = shared('symbol-to-string-registry');\nvar WellKnownSymbolsStore = shared('wks');\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDescriptor = DESCRIPTORS && fails(function () {\n  return nativeObjectCreate(nativeDefineProperty({}, 'a', {\n    get: function () { return nativeDefineProperty(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (O, P, Attributes) {\n  var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);\n  if (ObjectPrototypeDescriptor) delete ObjectPrototype[P];\n  nativeDefineProperty(O, P, Attributes);\n  if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {\n    nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);\n  }\n} : nativeDefineProperty;\n\nvar wrap = function (tag, description) {\n  var symbol = AllSymbols[tag] = nativeObjectCreate($Symbol[PROTOTYPE]);\n  setInternalState(symbol, {\n    type: SYMBOL,\n    tag: tag,\n    description: description\n  });\n  if (!DESCRIPTORS) symbol.description = description;\n  return symbol;\n};\n\nvar $defineProperty = function defineProperty(O, P, Attributes) {\n  if (O === ObjectPrototype) $defineProperty(ObjectPrototypeSymbols, P, Attributes);\n  anObject(O);\n  var key = toPropertyKey(P);\n  anObject(Attributes);\n  if (hasOwn(AllSymbols, key)) {\n    if (!Attributes.enumerable) {\n      if (!hasOwn(O, HIDDEN)) nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, {}));\n      O[HIDDEN][key] = true;\n    } else {\n      if (hasOwn(O, HIDDEN) && O[HIDDEN][key]) O[HIDDEN][key] = false;\n      Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });\n    } return setSymbolDescriptor(O, key, Attributes);\n  } return nativeDefineProperty(O, key, Attributes);\n};\n\nvar $defineProperties = function defineProperties(O, Properties) {\n  anObject(O);\n  var properties = toIndexedObject(Properties);\n  var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));\n  $forEach(keys, function (key) {\n    if (!DESCRIPTORS || $propertyIsEnumerable.call(properties, key)) $defineProperty(O, key, properties[key]);\n  });\n  return O;\n};\n\nvar $create = function create(O, Properties) {\n  return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);\n};\n\nvar $propertyIsEnumerable = function propertyIsEnumerable(V) {\n  var P = toPropertyKey(V);\n  var enumerable = nativePropertyIsEnumerable.call(this, P);\n  if (this === ObjectPrototype && hasOwn(AllSymbols, P) && !hasOwn(ObjectPrototypeSymbols, P)) return false;\n  return enumerable || !hasOwn(this, P) || !hasOwn(AllSymbols, P) || hasOwn(this, HIDDEN) && this[HIDDEN][P]\n    ? enumerable : true;\n};\n\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {\n  var it = toIndexedObject(O);\n  var key = toPropertyKey(P);\n  if (it === ObjectPrototype && hasOwn(AllSymbols, key) && !hasOwn(ObjectPrototypeSymbols, key)) return;\n  var descriptor = nativeGetOwnPropertyDescriptor(it, key);\n  if (descriptor && hasOwn(AllSymbols, key) && !(hasOwn(it, HIDDEN) && it[HIDDEN][key])) {\n    descriptor.enumerable = true;\n  }\n  return descriptor;\n};\n\nvar $getOwnPropertyNames = function getOwnPropertyNames(O) {\n  var names = nativeGetOwnPropertyNames(toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (!hasOwn(AllSymbols, key) && !hasOwn(hiddenKeys, key)) result.push(key);\n  });\n  return result;\n};\n\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(O) {\n  var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;\n  var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (hasOwn(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || hasOwn(ObjectPrototype, key))) {\n      result.push(AllSymbols[key]);\n    }\n  });\n  return result;\n};\n\n// `Symbol` constructor\n// https://tc39.es/ecma262/#sec-symbol-constructor\nif (!NATIVE_SYMBOL) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor');\n    var description = !arguments.length || arguments[0] === undefined ? undefined : $toString(arguments[0]);\n    var tag = uid(description);\n    var setter = function (value) {\n      if (this === ObjectPrototype) setter.call(ObjectPrototypeSymbols, value);\n      if (hasOwn(this, HIDDEN) && hasOwn(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDescriptor(this, tag, createPropertyDescriptor(1, value));\n    };\n    if (DESCRIPTORS && USE_SETTER) setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });\n    return wrap(tag, description);\n  };\n\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return getInternalState(this).tag;\n  });\n\n  redefine($Symbol, 'withoutSetter', function (description) {\n    return wrap(uid(description), description);\n  });\n\n  propertyIsEnumerableModule.f = $propertyIsEnumerable;\n  definePropertyModule.f = $defineProperty;\n  getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;\n  getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;\n  getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;\n\n  wrappedWellKnownSymbolModule.f = function (name) {\n    return wrap(wellKnownSymbol(name), name);\n  };\n\n  if (DESCRIPTORS) {\n    // https://github.com/tc39/proposal-Symbol-description\n    nativeDefineProperty($Symbol[PROTOTYPE], 'description', {\n      configurable: true,\n      get: function description() {\n        return getInternalState(this).description;\n      }\n    });\n    if (!IS_PURE) {\n      redefine(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });\n    }\n  }\n}\n\n$({ global: true, wrap: true, forced: !NATIVE_SYMBOL, sham: !NATIVE_SYMBOL }, {\n  Symbol: $Symbol\n});\n\n$forEach(objectKeys(WellKnownSymbolsStore), function (name) {\n  defineWellKnownSymbol(name);\n});\n\n$({ target: SYMBOL, stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Symbol.for` method\n  // https://tc39.es/ecma262/#sec-symbol.for\n  'for': function (key) {\n    var string = $toString(key);\n    if (hasOwn(StringToSymbolRegistry, string)) return StringToSymbolRegistry[string];\n    var symbol = $Symbol(string);\n    StringToSymbolRegistry[string] = symbol;\n    SymbolToStringRegistry[symbol] = string;\n    return symbol;\n  },\n  // `Symbol.keyFor` method\n  // https://tc39.es/ecma262/#sec-symbol.keyfor\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol');\n    if (hasOwn(SymbolToStringRegistry, sym)) return SymbolToStringRegistry[sym];\n  },\n  useSetter: function () { USE_SETTER = true; },\n  useSimple: function () { USE_SETTER = false; }\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL, sham: !DESCRIPTORS }, {\n  // `Object.create` method\n  // https://tc39.es/ecma262/#sec-object.create\n  create: $create,\n  // `Object.defineProperty` method\n  // https://tc39.es/ecma262/#sec-object.defineproperty\n  defineProperty: $defineProperty,\n  // `Object.defineProperties` method\n  // https://tc39.es/ecma262/#sec-object.defineproperties\n  defineProperties: $defineProperties,\n  // `Object.getOwnPropertyDescriptor` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Object.getOwnPropertyNames` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertynames\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // `Object.getOwnPropertySymbols` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertysymbols\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\n$({ target: 'Object', stat: true, forced: fails(function () { getOwnPropertySymbolsModule.f(1); }) }, {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return getOwnPropertySymbolsModule.f(toObject(it));\n  }\n});\n\n// `JSON.stringify` method behavior with symbols\n// https://tc39.es/ecma262/#sec-json.stringify\nif ($stringify) {\n  var FORCED_JSON_STRINGIFY = !NATIVE_SYMBOL || fails(function () {\n    var symbol = $Symbol();\n    // MS Edge converts symbol values to JSON as {}\n    return $stringify([symbol]) != '[null]'\n      // WebKit converts symbol values to JSON as null\n      || $stringify({ a: symbol }) != '{}'\n      // V8 throws on boxed symbols\n      || $stringify(Object(symbol)) != '{}';\n  });\n\n  $({ target: 'JSON', stat: true, forced: FORCED_JSON_STRINGIFY }, {\n    // eslint-disable-next-line no-unused-vars -- required for `.length`\n    stringify: function stringify(it, replacer, space) {\n      var args = [it];\n      var index = 1;\n      var $replacer;\n      while (arguments.length > index) args.push(arguments[index++]);\n      $replacer = replacer;\n      if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n      if (!isArray(replacer)) replacer = function (key, value) {\n        if (isCallable($replacer)) value = $replacer.call(this, key, value);\n        if (!isSymbol(value)) return value;\n      };\n      args[1] = replacer;\n      return $stringify.apply(null, args);\n    }\n  });\n}\n\n// `Symbol.prototype[@@toPrimitive]` method\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive\nif (!$Symbol[PROTOTYPE][TO_PRIMITIVE]) {\n  var valueOf = $Symbol[PROTOTYPE].valueOf;\n  redefine($Symbol[PROTOTYPE], TO_PRIMITIVE, function () {\n    return valueOf.apply(this, arguments);\n  });\n}\n// `Symbol.prototype[@@toStringTag]` property\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@tostringtag\nsetToStringTag($Symbol, SYMBOL);\n\nhiddenKeys[HIDDEN] = true;\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar hasOwn = require('../internals/has-own-property');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar isSymbol = require('../internals/is-symbol');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar thisNumberValue = require('../internals/this-number-value');\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// `ToNumeric` abstract operation\n// https://tc39.es/ecma262/#sec-tonumeric\nvar toNumeric = function (value) {\n  var primValue = toPrimitive(value, 'number');\n  return typeof primValue === 'bigint' ? primValue : toNumber(primValue);\n};\n\n// `ToNumber` abstract operation\n// https://tc39.es/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, 'number');\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (isSymbol(it)) throw TypeError('Cannot convert a Symbol value to a number');\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.es/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var n = arguments.length < 1 ? 0 : NativeNumber(toNumeric(value));\n    var dummy = this;\n    // check on 1..constructor(foo) case\n    return dummy instanceof NumberWrapper && fails(function () { thisNumberValue(dummy); })\n      ? inheritIfRequired(Object(n), dummy, NumberWrapper) : n;\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (hasOwn(NativeNumber, key = keys[j]) && !hasOwn(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","import { isWebGL2 } from '../utils/webgl-checks';\nexport const GL_PARAMETER_DEFAULTS = {\n  [3042]: false,\n  [32773]: new Float32Array([0, 0, 0, 0]),\n  [32777]: 32774,\n  [34877]: 32774,\n  [32969]: 1,\n  [32968]: 0,\n  [32971]: 1,\n  [32970]: 0,\n  [3106]: new Float32Array([0, 0, 0, 0]),\n  [3107]: [true, true, true, true],\n  [2884]: false,\n  [2885]: 1029,\n  [2929]: false,\n  [2931]: 1,\n  [2932]: 513,\n  [2928]: new Float32Array([0, 1]),\n  [2930]: true,\n  [3024]: true,\n  [36006]: null,\n  [2886]: 2305,\n  [33170]: 4352,\n  [2849]: 1,\n  [32823]: false,\n  [32824]: 0,\n  [10752]: 0,\n  [32938]: 1.0,\n  [32939]: false,\n  [3089]: false,\n  [3088]: new Int32Array([0, 0, 1024, 1024]),\n  [2960]: false,\n  [2961]: 0,\n  [2968]: 0xffffffff,\n  [36005]: 0xffffffff,\n  [2962]: 519,\n  [2967]: 0,\n  [2963]: 0xffffffff,\n  [34816]: 519,\n  [36003]: 0,\n  [36004]: 0xffffffff,\n  [2964]: 7680,\n  [2965]: 7680,\n  [2966]: 7680,\n  [34817]: 7680,\n  [34818]: 7680,\n  [34819]: 7680,\n  [2978]: [0, 0, 1024, 1024],\n  [3333]: 4,\n  [3317]: 4,\n  [37440]: false,\n  [37441]: false,\n  [37443]: 37444,\n  [35723]: 4352,\n  [36010]: null,\n  [35977]: false,\n  [3330]: 0,\n  [3332]: 0,\n  [3331]: 0,\n  [3314]: 0,\n  [32878]: 0,\n  [3316]: 0,\n  [3315]: 0,\n  [32877]: 0\n};\n\nconst enable = (gl, value, key) => value ? gl.enable(key) : gl.disable(key);\n\nconst hint = (gl, value, key) => gl.hint(key, value);\n\nconst pixelStorei = (gl, value, key) => gl.pixelStorei(key, value);\n\nconst drawFramebuffer = (gl, value) => {\n  const target = isWebGL2(gl) ? 36009 : 36160;\n  return gl.bindFramebuffer(target, value);\n};\n\nconst readFramebuffer = (gl, value) => {\n  return gl.bindFramebuffer(36008, value);\n};\n\nfunction isArray(array) {\n  return Array.isArray(array) || ArrayBuffer.isView(array);\n}\n\nexport const GL_PARAMETER_SETTERS = {\n  [3042]: enable,\n  [32773]: (gl, value) => gl.blendColor(...value),\n  [32777]: 'blendEquation',\n  [34877]: 'blendEquation',\n  [32969]: 'blendFunc',\n  [32968]: 'blendFunc',\n  [32971]: 'blendFunc',\n  [32970]: 'blendFunc',\n  [3106]: (gl, value) => gl.clearColor(...value),\n  [3107]: (gl, value) => gl.colorMask(...value),\n  [2884]: enable,\n  [2885]: (gl, value) => gl.cullFace(value),\n  [2929]: enable,\n  [2931]: (gl, value) => gl.clearDepth(value),\n  [2932]: (gl, value) => gl.depthFunc(value),\n  [2928]: (gl, value) => gl.depthRange(...value),\n  [2930]: (gl, value) => gl.depthMask(value),\n  [3024]: enable,\n  [35723]: hint,\n  [36006]: drawFramebuffer,\n  [2886]: (gl, value) => gl.frontFace(value),\n  [33170]: hint,\n  [2849]: (gl, value) => gl.lineWidth(value),\n  [32823]: enable,\n  [32824]: 'polygonOffset',\n  [10752]: 'polygonOffset',\n  [35977]: enable,\n  [32938]: 'sampleCoverage',\n  [32939]: 'sampleCoverage',\n  [3089]: enable,\n  [3088]: (gl, value) => gl.scissor(...value),\n  [2960]: enable,\n  [2961]: (gl, value) => gl.clearStencil(value),\n  [2968]: (gl, value) => gl.stencilMaskSeparate(1028, value),\n  [36005]: (gl, value) => gl.stencilMaskSeparate(1029, value),\n  [2962]: 'stencilFuncFront',\n  [2967]: 'stencilFuncFront',\n  [2963]: 'stencilFuncFront',\n  [34816]: 'stencilFuncBack',\n  [36003]: 'stencilFuncBack',\n  [36004]: 'stencilFuncBack',\n  [2964]: 'stencilOpFront',\n  [2965]: 'stencilOpFront',\n  [2966]: 'stencilOpFront',\n  [34817]: 'stencilOpBack',\n  [34818]: 'stencilOpBack',\n  [34819]: 'stencilOpBack',\n  [2978]: (gl, value) => gl.viewport(...value),\n  [3333]: pixelStorei,\n  [3317]: pixelStorei,\n  [37440]: pixelStorei,\n  [37441]: pixelStorei,\n  [37443]: pixelStorei,\n  [3330]: pixelStorei,\n  [3332]: pixelStorei,\n  [3331]: pixelStorei,\n  [36010]: readFramebuffer,\n  [3314]: pixelStorei,\n  [32878]: pixelStorei,\n  [3316]: pixelStorei,\n  [3315]: pixelStorei,\n  [32877]: pixelStorei,\n  framebuffer: (gl, framebuffer) => {\n    const handle = framebuffer && 'handle' in framebuffer ? framebuffer.handle : framebuffer;\n    return gl.bindFramebuffer(36160, handle);\n  },\n  blend: (gl, value) => value ? gl.enable(3042) : gl.disable(3042),\n  blendColor: (gl, value) => gl.blendColor(...value),\n  blendEquation: (gl, args) => {\n    args = isArray(args) ? args : [args, args];\n    gl.blendEquationSeparate(...args);\n  },\n  blendFunc: (gl, args) => {\n    args = isArray(args) && args.length === 2 ? [...args, ...args] : args;\n    gl.blendFuncSeparate(...args);\n  },\n  clearColor: (gl, value) => gl.clearColor(...value),\n  clearDepth: (gl, value) => gl.clearDepth(value),\n  clearStencil: (gl, value) => gl.clearStencil(value),\n  colorMask: (gl, value) => gl.colorMask(...value),\n  cull: (gl, value) => value ? gl.enable(2884) : gl.disable(2884),\n  cullFace: (gl, value) => gl.cullFace(value),\n  depthTest: (gl, value) => value ? gl.enable(2929) : gl.disable(2929),\n  depthFunc: (gl, value) => gl.depthFunc(value),\n  depthMask: (gl, value) => gl.depthMask(value),\n  depthRange: (gl, value) => gl.depthRange(...value),\n  dither: (gl, value) => value ? gl.enable(3024) : gl.disable(3024),\n  derivativeHint: (gl, value) => {\n    gl.hint(35723, value);\n  },\n  frontFace: (gl, value) => gl.frontFace(value),\n  mipmapHint: (gl, value) => gl.hint(33170, value),\n  lineWidth: (gl, value) => gl.lineWidth(value),\n  polygonOffsetFill: (gl, value) => value ? gl.enable(32823) : gl.disable(32823),\n  polygonOffset: (gl, value) => gl.polygonOffset(...value),\n  sampleCoverage: (gl, value) => gl.sampleCoverage(...value),\n  scissorTest: (gl, value) => value ? gl.enable(3089) : gl.disable(3089),\n  scissor: (gl, value) => gl.scissor(...value),\n  stencilTest: (gl, value) => value ? gl.enable(2960) : gl.disable(2960),\n  stencilMask: (gl, value) => {\n    value = isArray(value) ? value : [value, value];\n    const [mask, backMask] = value;\n    gl.stencilMaskSeparate(1028, mask);\n    gl.stencilMaskSeparate(1029, backMask);\n  },\n  stencilFunc: (gl, args) => {\n    args = isArray(args) && args.length === 3 ? [...args, ...args] : args;\n    const [func, ref, mask, backFunc, backRef, backMask] = args;\n    gl.stencilFuncSeparate(1028, func, ref, mask);\n    gl.stencilFuncSeparate(1029, backFunc, backRef, backMask);\n  },\n  stencilOp: (gl, args) => {\n    args = isArray(args) && args.length === 3 ? [...args, ...args] : args;\n    const [sfail, dpfail, dppass, backSfail, backDpfail, backDppass] = args;\n    gl.stencilOpSeparate(1028, sfail, dpfail, dppass);\n    gl.stencilOpSeparate(1029, backSfail, backDpfail, backDppass);\n  },\n  viewport: (gl, value) => gl.viewport(...value)\n};\n\nfunction getValue(glEnum, values, cache) {\n  return values[glEnum] !== undefined ? values[glEnum] : cache[glEnum];\n}\n\nexport const GL_COMPOSITE_PARAMETER_SETTERS = {\n  blendEquation: (gl, values, cache) => gl.blendEquationSeparate(getValue(32777, values, cache), getValue(34877, values, cache)),\n  blendFunc: (gl, values, cache) => gl.blendFuncSeparate(getValue(32969, values, cache), getValue(32968, values, cache), getValue(32971, values, cache), getValue(32970, values, cache)),\n  polygonOffset: (gl, values, cache) => gl.polygonOffset(getValue(32824, values, cache), getValue(10752, values, cache)),\n  sampleCoverage: (gl, values, cache) => gl.sampleCoverage(getValue(32938, values, cache), getValue(32939, values, cache)),\n  stencilFuncFront: (gl, values, cache) => gl.stencilFuncSeparate(1028, getValue(2962, values, cache), getValue(2967, values, cache), getValue(2963, values, cache)),\n  stencilFuncBack: (gl, values, cache) => gl.stencilFuncSeparate(1029, getValue(34816, values, cache), getValue(36003, values, cache), getValue(36004, values, cache)),\n  stencilOpFront: (gl, values, cache) => gl.stencilOpSeparate(1028, getValue(2964, values, cache), getValue(2965, values, cache), getValue(2966, values, cache)),\n  stencilOpBack: (gl, values, cache) => gl.stencilOpSeparate(1029, getValue(34817, values, cache), getValue(34818, values, cache), getValue(34819, values, cache))\n};\nexport const GL_HOOKED_SETTERS = {\n  enable: (update, capability) => update({\n    [capability]: true\n  }),\n  disable: (update, capability) => update({\n    [capability]: false\n  }),\n  pixelStorei: (update, pname, value) => update({\n    [pname]: value\n  }),\n  hint: (update, pname, hint) => update({\n    [pname]: hint\n  }),\n  bindFramebuffer: (update, target, framebuffer) => {\n    switch (target) {\n      case 36160:\n        return update({\n          [36006]: framebuffer,\n          [36010]: framebuffer\n        });\n\n      case 36009:\n        return update({\n          [36006]: framebuffer\n        });\n\n      case 36008:\n        return update({\n          [36010]: framebuffer\n        });\n\n      default:\n        return null;\n    }\n  },\n  blendColor: (update, r, g, b, a) => update({\n    [32773]: new Float32Array([r, g, b, a])\n  }),\n  blendEquation: (update, mode) => update({\n    [32777]: mode,\n    [34877]: mode\n  }),\n  blendEquationSeparate: (update, modeRGB, modeAlpha) => update({\n    [32777]: modeRGB,\n    [34877]: modeAlpha\n  }),\n  blendFunc: (update, src, dst) => update({\n    [32969]: src,\n    [32968]: dst,\n    [32971]: src,\n    [32970]: dst\n  }),\n  blendFuncSeparate: (update, srcRGB, dstRGB, srcAlpha, dstAlpha) => update({\n    [32969]: srcRGB,\n    [32968]: dstRGB,\n    [32971]: srcAlpha,\n    [32970]: dstAlpha\n  }),\n  clearColor: (update, r, g, b, a) => update({\n    [3106]: new Float32Array([r, g, b, a])\n  }),\n  clearDepth: (update, depth) => update({\n    [2931]: depth\n  }),\n  clearStencil: (update, s) => update({\n    [2961]: s\n  }),\n  colorMask: (update, r, g, b, a) => update({\n    [3107]: [r, g, b, a]\n  }),\n  cullFace: (update, mode) => update({\n    [2885]: mode\n  }),\n  depthFunc: (update, func) => update({\n    [2932]: func\n  }),\n  depthRange: (update, zNear, zFar) => update({\n    [2928]: new Float32Array([zNear, zFar])\n  }),\n  depthMask: (update, mask) => update({\n    [2930]: mask\n  }),\n  frontFace: (update, face) => update({\n    [2886]: face\n  }),\n  lineWidth: (update, width) => update({\n    [2849]: width\n  }),\n  polygonOffset: (update, factor, units) => update({\n    [32824]: factor,\n    [10752]: units\n  }),\n  sampleCoverage: (update, value, invert) => update({\n    [32938]: value,\n    [32939]: invert\n  }),\n  scissor: (update, x, y, width, height) => update({\n    [3088]: new Int32Array([x, y, width, height])\n  }),\n  stencilMask: (update, mask) => update({\n    [2968]: mask,\n    [36005]: mask\n  }),\n  stencilMaskSeparate: (update, face, mask) => update({\n    [face === 1028 ? 2968 : 36005]: mask\n  }),\n  stencilFunc: (update, func, ref, mask) => update({\n    [2962]: func,\n    [2967]: ref,\n    [2963]: mask,\n    [34816]: func,\n    [36003]: ref,\n    [36004]: mask\n  }),\n  stencilFuncSeparate: (update, face, func, ref, mask) => update({\n    [face === 1028 ? 2962 : 34816]: func,\n    [face === 1028 ? 2967 : 36003]: ref,\n    [face === 1028 ? 2963 : 36004]: mask\n  }),\n  stencilOp: (update, fail, zfail, zpass) => update({\n    [2964]: fail,\n    [2965]: zfail,\n    [2966]: zpass,\n    [34817]: fail,\n    [34818]: zfail,\n    [34819]: zpass\n  }),\n  stencilOpSeparate: (update, face, fail, zfail, zpass) => update({\n    [face === 1028 ? 2964 : 34817]: fail,\n    [face === 1028 ? 2965 : 34818]: zfail,\n    [face === 1028 ? 2966 : 34819]: zpass\n  }),\n  viewport: (update, x, y, width, height) => update({\n    [2978]: [x, y, width, height]\n  })\n};\n\nconst isEnabled = (gl, key) => gl.isEnabled(key);\n\nexport const GL_PARAMETER_GETTERS = {\n  [3042]: isEnabled,\n  [2884]: isEnabled,\n  [2929]: isEnabled,\n  [3024]: isEnabled,\n  [32823]: isEnabled,\n  [32926]: isEnabled,\n  [32928]: isEnabled,\n  [3089]: isEnabled,\n  [2960]: isEnabled,\n  [35977]: isEnabled\n};\n//# sourceMappingURL=webgl-parameter-tables.js.map","export function vec2_transformMat4AsVector(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const w = m[3] * x + m[7] * y || 1.0;\n  out[0] = (m[0] * x + m[4] * y) / w;\n  out[1] = (m[1] * x + m[5] * y) / w;\n  return out;\n}\nexport function vec3_transformMat4AsVector(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const z = a[2];\n  const w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n  return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  return out;\n}\nexport function vec4_transformMat2(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n  const x = a[0];\n  const y = a[1];\n  const z = a[2];\n  out[0] = m[0] * x + m[3] * y + m[6] * z;\n  out[1] = m[1] * x + m[4] * y + m[7] * z;\n  out[2] = m[2] * x + m[5] * y + m[8] * z;\n  out[3] = a[3];\n  return out;\n}\n//# sourceMappingURL=gl-matrix-extras.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion \".concat(message));\n  }\n}\n//# sourceMappingURL=assert.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isBrowser;\nexports.isBrowserMainThread = isBrowserMainThread;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction isBrowser() {\n  var isNode = (typeof process === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(process)) === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || (0, _isElectron.default)();\n}\n\nfunction isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}\n//# sourceMappingURL=is-browser.js.map","// This file enables: import 'probe.gl/bench'.\n// Note: Must be published using package.json \"files\" field\nmodule.exports = require('./dist/es5/env');\n","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n","import MathArray from './math-array';\nimport { checkNumber } from '../../lib/validators';\nimport assert from '../../lib/assert';\nexport default class Vector extends MathArray {\n  get ELEMENTS() {\n    assert(false);\n    return 0;\n  }\n\n  copy(vector) {\n    assert(false);\n    return this;\n  }\n\n  get x() {\n    return this[0];\n  }\n\n  set x(value) {\n    this[0] = checkNumber(value);\n  }\n\n  get y() {\n    return this[1];\n  }\n\n  set y(value) {\n    this[1] = checkNumber(value);\n  }\n\n  len() {\n    return Math.sqrt(this.lengthSquared());\n  }\n\n  magnitude() {\n    return this.len();\n  }\n\n  lengthSquared() {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      length += this[i] * this[i];\n    }\n\n    return length;\n  }\n\n  magnitudeSquared() {\n    return this.lengthSquared();\n  }\n\n  distance(mathArray) {\n    return Math.sqrt(this.distanceSquared(mathArray));\n  }\n\n  distanceSquared(mathArray) {\n    let length = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const dist = this[i] - mathArray[i];\n      length += dist * dist;\n    }\n\n    return checkNumber(length);\n  }\n\n  dot(mathArray) {\n    let product = 0;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      product += this[i] * mathArray[i];\n    }\n\n    return checkNumber(product);\n  }\n\n  normalize() {\n    const length = this.magnitude();\n\n    if (length !== 0) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= length;\n      }\n    }\n\n    return this.check();\n  }\n\n  multiply(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] *= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  divide(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] /= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  lengthSq() {\n    return this.lengthSquared();\n  }\n\n  distanceTo(vector) {\n    return this.distance(vector);\n  }\n\n  distanceToSquared(vector) {\n    return this.distanceSquared(vector);\n  }\n\n  getComponent(i) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    return checkNumber(this[i]);\n  }\n\n  setComponent(i, value) {\n    assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n    this[i] = value;\n    return this.check();\n  }\n\n  addVectors(a, b) {\n    return this.copy(a).add(b);\n  }\n\n  subVectors(a, b) {\n    return this.copy(a).subtract(b);\n  }\n\n  multiplyVectors(a, b) {\n    return this.copy(a).multiply(b);\n  }\n\n  addScaledVector(a, b) {\n    return this.add(new this.constructor(a).multiplyScalar(b));\n  }\n\n}\n//# sourceMappingURL=vector.js.map","import Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from '../lib/gl-matrix-extras';\nconst ORIGIN = [0, 0, 0];\nconst constants = {};\nexport default class Vector3 extends Vector {\n  static get ZERO() {\n    return constants.ZERO = constants.ZERO || Object.freeze(new Vector3(0, 0, 0, 0));\n  }\n\n  constructor(x = 0, y = 0, z = 0) {\n    super(-0, -0, -0);\n\n    if (arguments.length === 1 && isArray(x)) {\n      this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n        checkNumber(z);\n      }\n\n      this[0] = x;\n      this[1] = y;\n      this[2] = z;\n    }\n  }\n\n  set(x, y, z) {\n    this[0] = x;\n    this[1] = y;\n    this[2] = z;\n    return this.check();\n  }\n\n  copy(array) {\n    this[0] = array[0];\n    this[1] = array[1];\n    this[2] = array[2];\n    return this.check();\n  }\n\n  fromObject(object) {\n    if (config.debug) {\n      checkNumber(object.x);\n      checkNumber(object.y);\n      checkNumber(object.z);\n    }\n\n    this[0] = object.x;\n    this[1] = object.y;\n    this[2] = object.z;\n    return this.check();\n  }\n\n  toObject(object) {\n    object.x = this[0];\n    object.y = this[1];\n    object.z = this[2];\n    return object;\n  }\n\n  get ELEMENTS() {\n    return 3;\n  }\n\n  get z() {\n    return this[2];\n  }\n\n  set z(value) {\n    this[2] = checkNumber(value);\n  }\n\n  angle(vector) {\n    return vec3.angle(this, vector);\n  }\n\n  cross(vector) {\n    vec3.cross(this, this, vector);\n    return this.check();\n  }\n\n  rotateX({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateX(this, this, origin, radians);\n    return this.check();\n  }\n\n  rotateY({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateY(this, this, origin, radians);\n    return this.check();\n  }\n\n  rotateZ({\n    radians,\n    origin = ORIGIN\n  }) {\n    vec3.rotateZ(this, this, origin, radians);\n    return this.check();\n  }\n\n  transform(matrix4) {\n    return this.transformAsPoint(matrix4);\n  }\n\n  transformAsPoint(matrix4) {\n    vec3.transformMat4(this, this, matrix4);\n    return this.check();\n  }\n\n  transformAsVector(matrix4) {\n    vec3_transformMat4AsVector(this, this, matrix4);\n    return this.check();\n  }\n\n  transformByMatrix3(matrix3) {\n    vec3.transformMat3(this, this, matrix3);\n    return this.check();\n  }\n\n  transformByMatrix2(matrix2) {\n    vec3_transformMat2(this, this, matrix2);\n    return this.check();\n  }\n\n  transformByQuaternion(quaternion) {\n    vec3.transformQuat(this, this, quaternion);\n    return this.check();\n  }\n\n}\n//# sourceMappingURL=vector3.js.map","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"self\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.self;\n  }\n});\nObject.defineProperty(exports, \"window\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.window;\n  }\n});\nObject.defineProperty(exports, \"global\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.global;\n  }\n});\nObject.defineProperty(exports, \"document\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.document;\n  }\n});\nObject.defineProperty(exports, \"process\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.process;\n  }\n});\nObject.defineProperty(exports, \"console\", {\n  enumerable: true,\n  get: function get() {\n    return _globals.console;\n  }\n});\nObject.defineProperty(exports, \"isBrowser\", {\n  enumerable: true,\n  get: function get() {\n    return _isBrowser.default;\n  }\n});\nObject.defineProperty(exports, \"isBrowserMainThread\", {\n  enumerable: true,\n  get: function get() {\n    return _isBrowser.isBrowserMainThread;\n  }\n});\nObject.defineProperty(exports, \"getBrowser\", {\n  enumerable: true,\n  get: function get() {\n    return _getBrowser.default;\n  }\n});\nObject.defineProperty(exports, \"isMobile\", {\n  enumerable: true,\n  get: function get() {\n    return _getBrowser.isMobile;\n  }\n});\nObject.defineProperty(exports, \"isElectron\", {\n  enumerable: true,\n  get: function get() {\n    return _isElectron.default;\n  }\n});\n\nvar _globals = require(\"./globals\");\n\nvar _isBrowser = _interopRequireWildcard(require(\"./is-browser\"));\n\nvar _getBrowser = _interopRequireWildcard(require(\"./get-browser\"));\n\nvar _isElectron = _interopRequireDefault(require(\"./is-electron\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n//# sourceMappingURL=index.js.map","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.iterator` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.iterator\ndefineWellKnownSymbol('iterator');\n","<template>\n  <div class=\"position-relative h-100 w-100\">\n    <div class=\"map-header position-absolute text-light\">\n      <h2 class=\"h3 m-0\"><span>Day 04 - </span>Hexagons</h2>\n    </div>\n    <dl class=\"map-source position-absolute d-flex\">\n      <dt class=\"me-1\">Source:</dt>\n      <dd class=\"text-break\">\n        <a href=\"https://scottishsquirrels.org.uk/\" target=\"_blank\"\n          >https://scottishsquirrels.org.uk/</a\n        >\n      </dd>\n    </dl>\n    <div id=\"control-panel\">\n      <h2 class=\"h5\">Squirrel Sightings</h2>\n      <div class=\"mb-1\">\n        <div class=\"form-check form-check-inline\">\n          <input\n            class=\"form-check-input\"\n            type=\"radio\"\n            id=\"grey\"\n            name=\"species\"\n            value=\"Grey\"\n            v-model=\"species\"\n          />\n          <label class=\"form-check-label\" for=\"grey\">Grey</label>\n        </div>\n        <div class=\"form-check form-check-inline\">\n          <input\n            class=\"form-check-input\"\n            type=\"radio\"\n            id=\"red\"\n            name=\"species\"\n            value=\"Red\"\n            v-model=\"species\"\n          />\n          <label class=\"form-check-label\" for=\"red\">Red</label>\n        </div>\n      </div>\n      <div class=\"mb-1\">\n        <label class=\"form-label\">Radius</label>\n        <input\n          id=\"radius\"\n          type=\"range\"\n          class=\"form-range\"\n          min=\"500\"\n          max=\"10000\"\n          step=\"500\"\n          value=\"1000\"\n        />\n        <span id=\"radius-value\"></span>\n      </div>\n      <div class=\"mb-1\">\n        <label class=\"form-label\">Coverage</label>\n        <input\n          id=\"coverage\"\n          class=\"form-range\"\n          type=\"range\"\n          min=\"0\"\n          max=\"1\"\n          step=\"0.1\"\n          value=\"1\"\n        />\n        <span id=\"coverage-value\"></span>\n      </div>\n      <div>\n        <label class=\"form-label\">Upper Percentile</label>\n        <input\n          id=\"upperPercentile\"\n          class=\"form-range\"\n          type=\"range\"\n          min=\"90\"\n          max=\"100\"\n          step=\"1\"\n          value=\"100\"\n        />\n        <span id=\"upperPercentile-value\"></span>\n      </div>\n    </div>\n    <div ref=\"map-root\" class=\"basemap\"></div>\n  </div>\n</template>\n\n<script>\nimport mapboxgl from \"mapbox-gl\";\nimport \"mapbox-gl/src/css/mapbox-gl.css\";\nimport { MapboxLayer } from \"@deck.gl/mapbox\";\nimport { HexagonLayer } from \"@deck.gl/aggregation-layers\";\nimport * as d3 from \"d3\";\n\nexport default {\n  data() {\n    return {\n      accessToken:\n        \"pk.eyJ1Ijoia21hcnNoYWxsIiwiYSI6ImNrdXdudGlpODI2ejkydXF2bXcyM3poaWQifQ.hyBCr6uwWlDGMGyVmuKCIw\",\n      map: null,\n      species: \"Grey\",\n      redSquirrelLayer: null,\n      greySquirrelLayer: null,\n    };\n  },\n  watch: {\n    species() {\n      this.setLayerVisibility();\n    },\n  },\n  methods: {\n    initMap() {\n      mapboxgl.accessToken = this.accessToken;\n\n      this.map = new mapboxgl.Map({\n        container: this.$refs[\"map-root\"],\n        style: \"mapbox://styles/mapbox/dark-v10?optimize=true\",\n        center: [-3.0902637, 56.530744],\n        zoom: 6,\n        pitch: 40.5,\n        antialias: true,\n      });\n\n      this.loadLayers();\n      this.map.scrollZoom.disable();\n    },\n    setLayerVisibility() {\n      if (this.species === \"Red\") {\n        this.map.setLayoutProperty(\"red-squirrels\", \"visibility\", \"visible\");\n        this.map.setLayoutProperty(\"grey-squirrels\", \"visibility\", \"none\");\n      } else {\n        this.map.setLayoutProperty(\"red-squirrels\", \"visibility\", \"none\");\n        this.map.setLayoutProperty(\"grey-squirrels\", \"visibility\", \"visible\");\n      }\n    },\n    loadLayers() {\n      //Create the deck.gl hexagon layer and style for the data\n      var OPTIONS = [\"radius\", \"coverage\", \"upperPercentile\"];\n      var COLOR_RANGE = [\n        [1, 152, 189],\n        [73, 227, 206],\n        [216, 254, 181],\n        [254, 237, 177],\n        [254, 173, 84],\n        [209, 55, 78],\n      ];\n      var LIGHT_SETTINGS = {\n        lightsPosition: [\n          -0.144528, 49.739968, 8000, -3.807751, 54.104682, 8000,\n        ],\n        ambientRatio: 0.4,\n        diffuseRatio: 0.6,\n        specularRatio: 0.2,\n        lightsStrength: [0.8, 0.0, 0.8, 0.0],\n        numberOfLights: 2,\n      };\n\n      //Add the deck.gl Custom Layer to the map once the Mapbox map loads\n      this.map.on(\"style.load\", () => {\n        this.redSquirrelLayer = new MapboxLayer({\n          type: HexagonLayer,\n          id: \"red-squirrels\",\n          data: d3.csv(\"/data/red_squirrels.csv\"),\n          radius: 1000,\n          coverage: 1,\n          upperPercentile: 100,\n          colorRange: COLOR_RANGE,\n          elevationRange: [0, 1000],\n          elevationScale: 250,\n          extruded: true,\n          getPosition: (d) => [Number(d.lng), Number(d.lat)],\n          lightSettings: LIGHT_SETTINGS,\n          opacity: 1,\n        });\n\n        this.greySquirrelLayer = new MapboxLayer({\n          type: HexagonLayer,\n          id: \"grey-squirrels\",\n          data: d3.csv(\"/data/grey_squirrels.csv\"),\n          radius: 1000,\n          coverage: 1,\n          upperPercentile: 100,\n          colorRange: COLOR_RANGE,\n          elevationRange: [0, 1000],\n          elevationScale: 250,\n          extruded: true,\n          getPosition: (d) => [Number(d.lng), Number(d.lat)],\n          lightSettings: LIGHT_SETTINGS,\n          opacity: 1,\n        });\n\n        // Add the deck.gl hex layer below labels in the Mapbox map\n        this.map.addLayer(this.redSquirrelLayer, \"waterway-label\");\n        this.map.addLayer(this.greySquirrelLayer, \"waterway-label\");\n        this.setLayerVisibility();\n      });\n\n      // Add sliders to change the layer's settings based on user input\n      OPTIONS.forEach((key) => {\n        document.getElementById(key).onchange = (evt) => {\n          var value = Number(evt.target.value);\n          document.getElementById(key + \"-value\").innerHTML = value;\n          if (this.redSquirrelLayer) {\n            this.redSquirrelLayer.setProps({\n              [key]: value,\n            });\n          }\n          if (this.greySquirrelLayer) {\n            this.greySquirrelLayer.setProps({\n              [key]: value,\n            });\n          }\n        };\n      });\n    },\n  },\n  mounted() {\n    this.initMap();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.map-source {\n  padding: 0 0.5rem;\n  background: rgba(255, 255, 255, 0.5);\n  z-index: 2;\n  bottom: 10px;\n  right: 0;\n\n  dt,\n  dd,\n  a {\n    font-size: 0.8rem;\n    color: rgba(0, 0, 0, 0.75);\n    text-decoration: none;\n    margin: 0;\n  }\n}\n#control-panel {\n  position: absolute;\n  background: #fff;\n  color: #191919;\n  top: 0;\n  right: 0;\n  width: 200px;\n  padding: 20px;\n  font-size: 12px;\n  line-height: 1.5;\n  z-index: 1;\n}\n\n.map-header {\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 2;\n  padding: 1rem;\n}\n\n.basemap {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n:deep .mapboxgl-popup-content {\n  color: #191919;\n  z-index: 3;\n  font-size: 1rem;\n  font-family: inherit;\n}\n</style>\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","let channelHandles = 1;\nlet animationHandles = 1;\nexport class Timeline {\n  constructor() {\n    this.time = 0;\n    this.channels = new Map();\n    this.animations = new Map();\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  addChannel(props) {\n    const {\n      delay = 0,\n      duration = Number.POSITIVE_INFINITY,\n      rate = 1,\n      repeat = 1\n    } = props;\n    const handle = channelHandles++;\n    const channel = {\n      time: 0,\n      delay,\n      duration,\n      rate,\n      repeat\n    };\n\n    this._setChannelTime(channel, this.time);\n\n    this.channels.set(handle, channel);\n    return handle;\n  }\n\n  removeChannel(handle) {\n    this.channels.delete(handle);\n\n    for (const [animationHandle, animation] of this.animations) {\n      if (animation.channel === handle) {\n        this.detachAnimation(animationHandle);\n      }\n    }\n  }\n\n  isFinished(handle) {\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return false;\n    }\n\n    return this.time >= channel.delay + channel.duration * channel.repeat;\n  }\n\n  getTime(handle) {\n    if (handle === undefined) {\n      return this.time;\n    }\n\n    const channel = this.channels.get(handle);\n\n    if (channel === undefined) {\n      return -1;\n    }\n\n    return channel.time;\n  }\n\n  setTime(time) {\n    this.time = Math.max(0, time);\n    const channels = this.channels.values();\n\n    for (const channel of channels) {\n      this._setChannelTime(channel, this.time);\n    }\n\n    const animations = this.animations.values();\n\n    for (const animationData of animations) {\n      const {\n        animation,\n        channel\n      } = animationData;\n      animation.setTime(this.getTime(channel));\n    }\n  }\n\n  play() {\n    this.playing = true;\n  }\n\n  pause() {\n    this.playing = false;\n    this.lastEngineTime = -1;\n  }\n\n  reset() {\n    this.setTime(0);\n  }\n\n  attachAnimation(animation, channelHandle) {\n    const animationHandle = animationHandles++;\n    this.animations.set(animationHandle, {\n      animation,\n      channel: channelHandle\n    });\n    animation.setTime(this.getTime(channelHandle));\n    return animationHandle;\n  }\n\n  detachAnimation(handle) {\n    this.animations.delete(handle);\n  }\n\n  update(engineTime) {\n    if (this.playing) {\n      if (this.lastEngineTime === -1) {\n        this.lastEngineTime = engineTime;\n      }\n\n      this.setTime(this.time + (engineTime - this.lastEngineTime));\n      this.lastEngineTime = engineTime;\n    }\n  }\n\n  _setChannelTime(channel, time) {\n    const offsetTime = time - channel.delay;\n    const totalDuration = channel.duration * channel.repeat;\n\n    if (offsetTime >= totalDuration) {\n      channel.time = channel.duration * channel.rate;\n    } else {\n      channel.time = Math.max(0, offsetTime) % channel.duration;\n      channel.time *= channel.rate;\n    }\n  }\n\n}\n//# sourceMappingURL=timeline.js.map","export const LIFECYCLE = {\n  NO_STATE: 'Awaiting state',\n  MATCHED: 'Matched. State transferred from previous layer',\n  INITIALIZED: 'Initialized',\n  AWAITING_GC: 'Discarded. Awaiting garbage collection',\n  AWAITING_FINALIZATION: 'No longer matched. Awaiting garbage collection',\n  FINALIZED: 'Finalized! Awaiting garbage collection'\n};\nexport const PROP_SYMBOLS = {\n  COMPONENT: Symbol.for('component'),\n  ASYNC_DEFAULTS: Symbol.for('asyncPropDefaults'),\n  ASYNC_ORIGINAL: Symbol.for('asyncPropOriginal'),\n  ASYNC_RESOLVED: Symbol.for('asyncPropResolved')\n};\n//# sourceMappingURL=constants.js.map","import checkIfBrowser from '../env/is-browser';\nexport { self, window, global, document, process, console } from '../env/globals';\nexport const VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'untranspiled source';\nexport const isBrowser = checkIfBrowser();\n//# sourceMappingURL=globals.js.map","function getStorage(type) {\n  try {\n    const storage = window[type];\n    const x = '__storage_test__';\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return storage;\n  } catch (e) {\n    return null;\n  }\n}\n\nexport default class LocalStorage {\n  constructor(id, defaultSettings, type = 'sessionStorage') {\n    this.storage = getStorage(type);\n    this.id = id;\n    this.config = {};\n    Object.assign(this.config, defaultSettings);\n\n    this._loadConfiguration();\n  }\n\n  getConfiguration() {\n    return this.config;\n  }\n\n  setConfiguration(configuration) {\n    this.config = {};\n    return this.updateConfiguration(configuration);\n  }\n\n  updateConfiguration(configuration) {\n    Object.assign(this.config, configuration);\n\n    if (this.storage) {\n      const serialized = JSON.stringify(this.config);\n      this.storage.setItem(this.id, serialized);\n    }\n\n    return this;\n  }\n\n  _loadConfiguration() {\n    let configuration = {};\n\n    if (this.storage) {\n      const serializedConfiguration = this.storage.getItem(this.id);\n      configuration = serializedConfiguration ? JSON.parse(serializedConfiguration) : {};\n    }\n\n    Object.assign(this.config, configuration);\n    return this;\n  }\n\n}\n//# sourceMappingURL=local-storage.js.map","export function formatTime(ms) {\n  let formatted;\n\n  if (ms < 10) {\n    formatted = \"\".concat(ms.toFixed(2), \"ms\");\n  } else if (ms < 100) {\n    formatted = \"\".concat(ms.toFixed(1), \"ms\");\n  } else if (ms < 1000) {\n    formatted = \"\".concat(ms.toFixed(0), \"ms\");\n  } else {\n    formatted = \"\".concat((ms / 1000).toFixed(2), \"s\");\n  }\n\n  return formatted;\n}\nexport function leftPad(string, length = 8) {\n  const padLength = Math.max(length - string.length, 0);\n  return \"\".concat(' '.repeat(padLength)).concat(string);\n}\nexport function rightPad(string, length = 8) {\n  const padLength = Math.max(length - string.length, 0);\n  return \"\".concat(string).concat(' '.repeat(padLength));\n}\nexport function formatValue(v, opts = {}) {\n  const EPSILON = 1e-16;\n  const {\n    isInteger = false\n  } = opts;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n\nfunction formatArrayValue(v, opts) {\n  const {\n    maxElts = 16,\n    size = 1\n  } = opts;\n  let string = '[';\n\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += \",\".concat(i % size === 0 ? ' ' : '');\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  const terminator = v.length > maxElts ? '...' : ']';\n  return \"\".concat(string).concat(terminator);\n}\n\nexport function formatImage(image, message, scale, maxWidth = 600) {\n  const imageUrl = image.src.replace(/\\(/g, '%28').replace(/\\)/g, '%29');\n\n  if (image.width > maxWidth) {\n    scale = Math.min(scale, maxWidth / image.width);\n  }\n\n  const width = image.width * scale;\n  const height = image.height * scale;\n  const style = ['font-size:1px;', \"padding:\".concat(Math.floor(height / 2), \"px \").concat(Math.floor(width / 2), \"px;\"), \"line-height:\".concat(height, \"px;\"), \"background:url(\".concat(imageUrl, \");\"), \"background-size:\".concat(width, \"px \").concat(height, \"px;\"), 'color:transparent;'].join('');\n  return [\"\".concat(message, \" %c+\"), style];\n}\n//# sourceMappingURL=formatters.js.map","import { isBrowser } from './globals';\nexport const COLOR = {\n  BLACK: 30,\n  RED: 31,\n  GREEN: 32,\n  YELLOW: 33,\n  BLUE: 34,\n  MAGENTA: 35,\n  CYAN: 36,\n  WHITE: 37,\n  BRIGHT_BLACK: 90,\n  BRIGHT_RED: 91,\n  BRIGHT_GREEN: 92,\n  BRIGHT_YELLOW: 93,\n  BRIGHT_BLUE: 94,\n  BRIGHT_MAGENTA: 95,\n  BRIGHT_CYAN: 96,\n  BRIGHT_WHITE: 97\n};\n\nfunction getColor(color) {\n  return typeof color === 'string' ? COLOR[color.toUpperCase()] || COLOR.WHITE : color;\n}\n\nexport function addColor(string, color, background) {\n  if (!isBrowser && typeof string === 'string') {\n    if (color) {\n      color = getColor(color);\n      string = \"\\x1B[\".concat(color, \"m\").concat(string, \"\\x1B[39m\");\n    }\n\n    if (background) {\n      color = getColor(background);\n      string = \"\\x1B[\".concat(background + 10, \"m\").concat(string, \"\\x1B[49m\");\n    }\n  }\n\n  return string;\n}\n//# sourceMappingURL=color.js.map","export function autobind(obj, predefined = ['constructor']) {\n  const proto = Object.getPrototypeOf(obj);\n  const propNames = Object.getOwnPropertyNames(proto);\n\n  for (const key of propNames) {\n    if (typeof obj[key] === 'function') {\n      if (!predefined.find(name => key === name)) {\n        obj[key] = obj[key].bind(obj);\n      }\n    }\n  }\n}\n//# sourceMappingURL=autobind.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { window, process, isBrowser } from './globals';\nexport default function getHiResTimestamp() {\n  let timestamp;\n\n  if (isBrowser && window.performance) {\n    timestamp = window.performance.now();\n  } else if (process.hrtime) {\n    const timeParts = process.hrtime();\n    timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n  } else {\n    timestamp = Date.now();\n  }\n\n  return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import { VERSION, isBrowser } from '../utils/globals';\nimport LocalStorage from '../utils/local-storage';\nimport { formatImage, formatTime, leftPad } from '../utils/formatters';\nimport { addColor } from '../utils/color';\nimport { autobind } from '../utils/autobind';\nimport assert from '../utils/assert';\nimport getHiResTimestamp from '../utils/hi-res-timestamp';\nconst originalConsole = {\n  debug: isBrowser ? console.debug || console.log : console.log,\n  log: console.log,\n  info: console.info,\n  warn: console.warn,\n  error: console.error\n};\nconst DEFAULT_SETTINGS = {\n  enabled: true,\n  level: 0\n};\n\nfunction noop() {}\n\nconst cache = {};\nconst ONCE = {\n  once: true\n};\n\nfunction getTableHeader(table) {\n  for (const key in table) {\n    for (const title in table[key]) {\n      return title || 'untitled';\n    }\n  }\n\n  return 'empty';\n}\n\nexport default class Log {\n  constructor({\n    id\n  } = {\n    id: ''\n  }) {\n    this.id = id;\n    this.VERSION = VERSION;\n    this._startTs = getHiResTimestamp();\n    this._deltaTs = getHiResTimestamp();\n    this.LOG_THROTTLE_TIMEOUT = 0;\n    this._storage = new LocalStorage(\"__probe-\".concat(this.id, \"__\"), DEFAULT_SETTINGS);\n    this.userData = {};\n    this.timeStamp(\"\".concat(this.id, \" started\"));\n    autobind(this);\n    Object.seal(this);\n  }\n\n  set level(newLevel) {\n    this.setLevel(newLevel);\n  }\n\n  get level() {\n    return this.getLevel();\n  }\n\n  isEnabled() {\n    return this._storage.config.enabled;\n  }\n\n  getLevel() {\n    return this._storage.config.level;\n  }\n\n  getTotal() {\n    return Number((getHiResTimestamp() - this._startTs).toPrecision(10));\n  }\n\n  getDelta() {\n    return Number((getHiResTimestamp() - this._deltaTs).toPrecision(10));\n  }\n\n  set priority(newPriority) {\n    this.level = newPriority;\n  }\n\n  get priority() {\n    return this.level;\n  }\n\n  getPriority() {\n    return this.level;\n  }\n\n  enable(enabled = true) {\n    this._storage.updateConfiguration({\n      enabled\n    });\n\n    return this;\n  }\n\n  setLevel(level) {\n    this._storage.updateConfiguration({\n      level\n    });\n\n    return this;\n  }\n\n  assert(condition, message) {\n    assert(condition, message);\n  }\n\n  warn(message) {\n    return this._getLogFunction(0, message, originalConsole.warn, arguments, ONCE);\n  }\n\n  error(message) {\n    return this._getLogFunction(0, message, originalConsole.error, arguments);\n  }\n\n  deprecated(oldUsage, newUsage) {\n    return this.warn(\"`\".concat(oldUsage, \"` is deprecated and will be removed in a later version. Use `\").concat(newUsage, \"` instead\"));\n  }\n\n  removed(oldUsage, newUsage) {\n    return this.error(\"`\".concat(oldUsage, \"` has been removed. Use `\").concat(newUsage, \"` instead\"));\n  }\n\n  probe(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.log, arguments, {\n      time: true,\n      once: true\n    });\n  }\n\n  log(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.debug, arguments);\n  }\n\n  info(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.info, arguments);\n  }\n\n  once(logLevel, message) {\n    return this._getLogFunction(logLevel, message, originalConsole.debug || originalConsole.info, arguments, ONCE);\n  }\n\n  table(logLevel, table, columns) {\n    if (table) {\n      return this._getLogFunction(logLevel, table, console.table || noop, columns && [columns], {\n        tag: getTableHeader(table)\n      });\n    }\n\n    return noop;\n  }\n\n  image({\n    logLevel,\n    priority,\n    image,\n    message = '',\n    scale = 1\n  }) {\n    if (!this._shouldLog(logLevel || priority)) {\n      return noop;\n    }\n\n    return isBrowser ? logImageInBrowser({\n      image,\n      message,\n      scale\n    }) : logImageInNode({\n      image,\n      message,\n      scale\n    });\n  }\n\n  settings() {\n    if (console.table) {\n      console.table(this._storage.config);\n    } else {\n      console.log(this._storage.config);\n    }\n  }\n\n  get(setting) {\n    return this._storage.config[setting];\n  }\n\n  set(setting, value) {\n    this._storage.updateConfiguration({\n      [setting]: value\n    });\n  }\n\n  time(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.time ? console.time : console.info);\n  }\n\n  timeEnd(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.timeEnd ? console.timeEnd : console.info);\n  }\n\n  timeStamp(logLevel, message) {\n    return this._getLogFunction(logLevel, message, console.timeStamp || noop);\n  }\n\n  group(logLevel, message, opts = {\n    collapsed: false\n  }) {\n    opts = normalizeArguments({\n      logLevel,\n      message,\n      opts\n    });\n    const {\n      collapsed\n    } = opts;\n    opts.method = (collapsed ? console.groupCollapsed : console.group) || console.info;\n    return this._getLogFunction(opts);\n  }\n\n  groupCollapsed(logLevel, message, opts = {}) {\n    return this.group(logLevel, message, Object.assign({}, opts, {\n      collapsed: true\n    }));\n  }\n\n  groupEnd(logLevel) {\n    return this._getLogFunction(logLevel, '', console.groupEnd || noop);\n  }\n\n  withGroup(logLevel, message, func) {\n    this.group(logLevel, message)();\n\n    try {\n      func();\n    } finally {\n      this.groupEnd(logLevel)();\n    }\n  }\n\n  trace() {\n    if (console.trace) {\n      console.trace();\n    }\n  }\n\n  _shouldLog(logLevel) {\n    return this.isEnabled() && this.getLevel() >= normalizeLogLevel(logLevel);\n  }\n\n  _getLogFunction(logLevel, message, method, args = [], opts) {\n    if (this._shouldLog(logLevel)) {\n      opts = normalizeArguments({\n        logLevel,\n        message,\n        args,\n        opts\n      });\n      method = method || opts.method;\n      assert(method);\n      opts.total = this.getTotal();\n      opts.delta = this.getDelta();\n      this._deltaTs = getHiResTimestamp();\n      const tag = opts.tag || opts.message;\n\n      if (opts.once) {\n        if (!cache[tag]) {\n          cache[tag] = getHiResTimestamp();\n        } else {\n          return noop;\n        }\n      }\n\n      message = decorateMessage(this.id, opts.message, opts);\n      return method.bind(console, message, ...opts.args);\n    }\n\n    return noop;\n  }\n\n}\nLog.VERSION = VERSION;\n\nfunction normalizeLogLevel(logLevel) {\n  if (!logLevel) {\n    return 0;\n  }\n\n  let resolvedLevel;\n\n  switch (typeof logLevel) {\n    case 'number':\n      resolvedLevel = logLevel;\n      break;\n\n    case 'object':\n      resolvedLevel = logLevel.logLevel || logLevel.priority || 0;\n      break;\n\n    default:\n      return 0;\n  }\n\n  assert(Number.isFinite(resolvedLevel) && resolvedLevel >= 0);\n  return resolvedLevel;\n}\n\nexport function normalizeArguments(opts) {\n  const {\n    logLevel,\n    message\n  } = opts;\n  opts.logLevel = normalizeLogLevel(logLevel);\n  const args = opts.args ? Array.from(opts.args) : [];\n\n  while (args.length && args.shift() !== message) {}\n\n  opts.args = args;\n\n  switch (typeof logLevel) {\n    case 'string':\n    case 'function':\n      if (message !== undefined) {\n        args.unshift(message);\n      }\n\n      opts.message = logLevel;\n      break;\n\n    case 'object':\n      Object.assign(opts, logLevel);\n      break;\n\n    default:\n  }\n\n  if (typeof opts.message === 'function') {\n    opts.message = opts.message();\n  }\n\n  const messageType = typeof opts.message;\n  assert(messageType === 'string' || messageType === 'object');\n  return Object.assign(opts, opts.opts);\n}\n\nfunction decorateMessage(id, message, opts) {\n  if (typeof message === 'string') {\n    const time = opts.time ? leftPad(formatTime(opts.total)) : '';\n    message = opts.time ? \"\".concat(id, \": \").concat(time, \"  \").concat(message) : \"\".concat(id, \": \").concat(message);\n    message = addColor(message, opts.color, opts.background);\n  }\n\n  return message;\n}\n\nfunction logImageInNode({\n  image,\n  message = '',\n  scale = 1\n}) {\n  let asciify = null;\n\n  try {\n    asciify = module.require('asciify-image');\n  } catch (error) {}\n\n  if (asciify) {\n    return () => asciify(image, {\n      fit: 'box',\n      width: \"\".concat(Math.round(80 * scale), \"%\")\n    }).then(data => console.log(data));\n  }\n\n  return noop;\n}\n\nfunction logImageInBrowser({\n  image,\n  message = '',\n  scale = 1\n}) {\n  if (typeof image === 'string') {\n    const img = new Image();\n\n    img.onload = () => {\n      const args = formatImage(img, message, scale);\n      console.log(...args);\n    };\n\n    img.src = image;\n    return noop;\n  }\n\n  const element = image.nodeName || '';\n\n  if (element.toLowerCase() === 'img') {\n    console.log(...formatImage(image, message, scale));\n    return noop;\n  }\n\n  if (element.toLowerCase() === 'canvas') {\n    const img = new Image();\n\n    img.onload = () => console.log(...formatImage(img, message, scale));\n\n    img.src = image.toDataURL();\n    return noop;\n  }\n\n  return noop;\n}\n//# sourceMappingURL=log.js.map","import { Log } from 'probe.gl';\nexport default new Log({\n  id: 'deck'\n});\n//# sourceMappingURL=log.js.map","import deckLog from '../utils/log';\nimport { getLoggers } from './loggers';\nlet loggers = {};\n\nif (process.env.NODE_ENV !== 'production') {\n  loggers = getLoggers(deckLog);\n}\n\nexport function register(handlers) {\n  loggers = handlers;\n}\nexport default function debug(eventType) {\n  if (deckLog.level > 0 && loggers[eventType]) {\n    loggers[eventType].call(...arguments);\n  }\n}\n//# sourceMappingURL=index.js.map","export function flatten(array, filter = () => true) {\n  if (!Array.isArray(array)) {\n    return filter(array) ? [array] : [];\n  }\n\n  return flattenArray(array, filter, []);\n}\n\nfunction flattenArray(array, filter, result) {\n  let index = -1;\n\n  while (++index < array.length) {\n    const value = array[index];\n\n    if (Array.isArray(value)) {\n      flattenArray(value, filter, result);\n    } else if (filter(value)) {\n      result.push(value);\n    }\n  }\n\n  return result;\n}\n\nexport function fillArray({\n  target,\n  source,\n  start = 0,\n  count = 1\n}) {\n  const length = source.length;\n  const total = count * length;\n  let copied = 0;\n\n  for (let i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=flatten.js.map","import getHiResTimestamp from '../utils/hi-res-timestamp';\nexport default class Stat {\n  constructor(name, type) {\n    this.name = name;\n    this.type = type;\n    this.sampleSize = 1;\n    this.reset();\n  }\n\n  setSampleSize(samples) {\n    this.sampleSize = samples;\n    return this;\n  }\n\n  incrementCount() {\n    this.addCount(1);\n    return this;\n  }\n\n  decrementCount() {\n    this.subtractCount(1);\n    return this;\n  }\n\n  addCount(value) {\n    this._count += value;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  subtractCount(value) {\n    this._count -= value;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  addTime(time) {\n    this._time += time;\n    this.lastTiming = time;\n    this._samples++;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  timeStart() {\n    this._startTime = getHiResTimestamp();\n    this._timerPending = true;\n    return this;\n  }\n\n  timeEnd() {\n    if (!this._timerPending) {\n      return this;\n    }\n\n    this.addTime(getHiResTimestamp() - this._startTime);\n    this._timerPending = false;\n\n    this._checkSampling();\n\n    return this;\n  }\n\n  getSampleAverageCount() {\n    return this.sampleSize > 0 ? this.lastSampleCount / this.sampleSize : 0;\n  }\n\n  getSampleAverageTime() {\n    return this.sampleSize > 0 ? this.lastSampleTime / this.sampleSize : 0;\n  }\n\n  getSampleHz() {\n    return this.lastSampleTime > 0 ? this.sampleSize / (this.lastSampleTime / 1000) : 0;\n  }\n\n  getAverageCount() {\n    return this.samples > 0 ? this.count / this.samples : 0;\n  }\n\n  getAverageTime() {\n    return this.samples > 0 ? this.time / this.samples : 0;\n  }\n\n  getHz() {\n    return this.time > 0 ? this.samples / (this.time / 1000) : 0;\n  }\n\n  reset() {\n    this.time = 0;\n    this.count = 0;\n    this.samples = 0;\n    this.lastTiming = 0;\n    this.lastSampleTime = 0;\n    this.lastSampleCount = 0;\n    this._count = 0;\n    this._time = 0;\n    this._samples = 0;\n    this._startTime = 0;\n    this._timerPending = false;\n    return this;\n  }\n\n  _checkSampling() {\n    if (this._samples === this.sampleSize) {\n      this.lastSampleTime = this._time;\n      this.lastSampleCount = this._count;\n      this.count += this._count;\n      this.time += this._time;\n      this.samples += this._samples;\n      this._time = 0;\n      this._count = 0;\n      this._samples = 0;\n    }\n  }\n\n}\n//# sourceMappingURL=stat.js.map","import Stat from './stat';\nexport default class Stats {\n  constructor({\n    id,\n    stats\n  }) {\n    this.id = id;\n    this.stats = {};\n\n    this._initializeStats(stats);\n\n    Object.seal(this);\n  }\n\n  get(name, type = 'count') {\n    return this._getOrCreate({\n      name,\n      type\n    });\n  }\n\n  get size() {\n    return Object.keys(this.stats).length;\n  }\n\n  reset() {\n    for (const key in this.stats) {\n      this.stats[key].reset();\n    }\n\n    return this;\n  }\n\n  forEach(fn) {\n    for (const key in this.stats) {\n      fn(this.stats[key]);\n    }\n  }\n\n  getTable() {\n    const table = {};\n    this.forEach(stat => {\n      table[stat.name] = {\n        time: stat.time || 0,\n        count: stat.count || 0,\n        average: stat.getAverageTime() || 0,\n        hz: stat.getHz() || 0\n      };\n    });\n    return table;\n  }\n\n  _initializeStats(stats = []) {\n    stats.forEach(stat => this._getOrCreate(stat));\n  }\n\n  _getOrCreate(stat) {\n    if (!stat || !stat.name) {\n      return null;\n    }\n\n    const {\n      name,\n      type\n    } = stat;\n\n    if (!this.stats[name]) {\n      if (stat instanceof Stat) {\n        this.stats[name] = stat;\n      } else {\n        this.stats[name] = new Stat(name, type);\n      }\n    }\n\n    return this.stats[name];\n  }\n\n}\n//# sourceMappingURL=stats.js.map","const isBoolean = x => typeof x === 'boolean';\n\nconst isFunction = x => typeof x === 'function';\n\nexport const isObject = x => x !== null && typeof x === 'object';\nexport const isPureObject = x => isObject(x) && x.constructor === {}.constructor;\nexport const isPromise = x => isObject(x) && isFunction(x.then);\nexport const isIterable = x => x && typeof x[Symbol.iterator] === 'function';\nexport const isAsyncIterable = x => x && typeof x[Symbol.asyncIterator] === 'function';\nexport const isIterator = x => x && isFunction(x.next);\nexport const isResponse = x => typeof Response !== 'undefined' && x instanceof Response || x && x.arrayBuffer && x.text && x.json;\nexport const isFile = x => typeof File !== 'undefined' && x instanceof File;\nexport const isBlob = x => typeof Blob !== 'undefined' && x instanceof Blob;\nexport const isWritableDOMStream = x => isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\nexport const isReadableDOMStream = x => typeof ReadableStream !== 'undefined' && x instanceof ReadableStream || isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.getReader);\nexport const isBuffer = x => x && typeof x === 'object' && x.isBuffer;\nexport const isWritableNodeStream = x => isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\nexport const isReadableNodeStream = x => isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\nexport const isReadableStream = x => isReadableDOMStream(x) || isReadableNodeStream(x);\nexport const isWritableStream = x => isWritableDOMStream(x) || isWritableNodeStream(x);\n//# sourceMappingURL=is-type.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loader assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n  var _loader;\n\n  if (!loader) {\n    return false;\n  }\n\n  if (Array.isArray(loader)) {\n    loader = loader[0];\n  }\n\n  const hasExtensions = Array.isArray((_loader = loader) === null || _loader === void 0 ? void 0 : _loader.extensions);\n  return hasExtensions;\n}\nexport function normalizeLoader(loader) {\n  var _loader2, _loader3;\n\n  assert(loader, 'null loader');\n  assert(isLoaderObject(loader), 'invalid loader');\n  let options;\n\n  if (Array.isArray(loader)) {\n    options = loader[1];\n    loader = loader[0];\n    loader = { ...loader,\n      options: { ...loader.options,\n        ...options\n      }\n    };\n  }\n\n  if ((_loader2 = loader) !== null && _loader2 !== void 0 && _loader2.parseTextSync || (_loader3 = loader) !== null && _loader3 !== void 0 && _loader3.parseText) {\n    loader.text = true;\n  }\n\n  if (!loader.text) {\n    loader.binary = true;\n  }\n\n  return loader;\n}\n//# sourceMappingURL=normalize-loader.js.map","let pathPrefix = '';\nconst fileAliases = {};\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function getPathPrefix() {\n  return pathPrefix;\n}\nexport function addAliases(aliases) {\n  Object.assign(fileAliases, aliases);\n}\nexport function resolvePath(filename) {\n  for (const alias in fileAliases) {\n    if (filename.startsWith(alias)) {\n      const replacement = fileAliases[alias];\n      filename = filename.replace(alias, replacement);\n    }\n  }\n\n  if (!filename.startsWith('http://') && !filename.startsWith('https://')) {\n    filename = `${pathPrefix}${filename}`;\n  }\n\n  return filename;\n}\n//# sourceMappingURL=file-aliases.js.map","const DATA_URL_PATTERN = /^data:([-\\w.]+\\/[-\\w.+]+)(;|,)/;\nconst MIME_TYPE_PATTERN = /^([-\\w.]+\\/[-\\w.+]+)/;\nexport function parseMIMEType(mimeString) {\n  const matches = MIME_TYPE_PATTERN.exec(mimeString);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return mimeString;\n}\nexport function parseMIMETypeFromURL(url) {\n  const matches = DATA_URL_PATTERN.exec(url);\n\n  if (matches) {\n    return matches[1];\n  }\n\n  return '';\n}\n//# sourceMappingURL=mime-type-utils.js.map","import { isResponse, isBlob } from '../../javascript-utils/is-type';\nimport { parseMIMEType, parseMIMETypeFromURL } from './mime-type-utils';\nconst QUERY_STRING_PATTERN = /\\?.*/;\nexport function getResourceUrlAndType(resource) {\n  if (isResponse(resource)) {\n    const url = stripQueryString(resource.url || '');\n    const contentTypeHeader = resource.headers.get('content-type') || '';\n    return {\n      url,\n      type: parseMIMEType(contentTypeHeader) || parseMIMETypeFromURL(url)\n    };\n  }\n\n  if (isBlob(resource)) {\n    return {\n      url: stripQueryString(resource.name || ''),\n      type: resource.type || ''\n    };\n  }\n\n  if (typeof resource === 'string') {\n    return {\n      url: stripQueryString(resource),\n      type: parseMIMETypeFromURL(resource)\n    };\n  }\n\n  return {\n    url: '',\n    type: ''\n  };\n}\nexport function getResourceContentLength(resource) {\n  if (isResponse(resource)) {\n    return resource.headers['content-length'] || -1;\n  }\n\n  if (isBlob(resource)) {\n    return resource.size;\n  }\n\n  if (typeof resource === 'string') {\n    return resource.length;\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    return resource.byteLength;\n  }\n\n  if (ArrayBuffer.isView(resource)) {\n    return resource.byteLength;\n  }\n\n  return -1;\n}\n\nfunction stripQueryString(url) {\n  return url.replace(QUERY_STRING_PATTERN, '');\n}\n//# sourceMappingURL=resource-utils.js.map","import { isResponse } from '../../javascript-utils/is-type';\nimport { getResourceContentLength, getResourceUrlAndType } from './resource-utils';\nexport async function makeResponse(resource) {\n  if (isResponse(resource)) {\n    return resource;\n  }\n\n  const headers = {};\n  const contentLength = getResourceContentLength(resource);\n\n  if (contentLength >= 0) {\n    headers['content-length'] = String(contentLength);\n  }\n\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(resource);\n\n  if (type) {\n    headers['content-type'] = type;\n  }\n\n  const initialDataUrl = await getInitialDataUrl(resource);\n\n  if (initialDataUrl) {\n    headers['x-first-bytes'] = initialDataUrl;\n  }\n\n  if (typeof resource === 'string') {\n    resource = new TextEncoder().encode(resource);\n  }\n\n  const response = new Response(resource, {\n    headers\n  });\n  Object.defineProperty(response, 'url', {\n    value: url\n  });\n  return response;\n}\nexport async function checkResponse(response) {\n  if (!response.ok) {\n    const message = await getResponseError(response);\n    throw new Error(message);\n  }\n}\nexport function checkResponseSync(response) {\n  if (!response.ok) {\n    let message = `${response.status} ${response.statusText}`;\n    message = message.length > 60 ? `${message.slice(60)}...` : message;\n    throw new Error(message);\n  }\n}\n\nasync function getResponseError(response) {\n  let message = `Failed to fetch resource ${response.url} (${response.status}): `;\n\n  try {\n    const contentType = response.headers.get('Content-Type');\n    let text = response.statusText;\n\n    if (contentType.includes('application/json')) {\n      text += ` ${await response.text()}`;\n    }\n\n    message += text;\n    message = message.length > 60 ? `${message.slice(60)}...` : message;\n  } catch (error) {}\n\n  return message;\n}\n\nasync function getInitialDataUrl(resource) {\n  const INITIAL_DATA_LENGTH = 5;\n\n  if (typeof resource === 'string') {\n    return `data:,${resource.slice(0, INITIAL_DATA_LENGTH)}`;\n  }\n\n  if (resource instanceof Blob) {\n    const blobSlice = resource.slice(0, 5);\n    return await new Promise(resolve => {\n      const reader = new FileReader();\n\n      reader.onload = event => {\n        var _event$target;\n\n        return resolve(event === null || event === void 0 ? void 0 : (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.result);\n      };\n\n      reader.readAsDataURL(blobSlice);\n    });\n  }\n\n  if (resource instanceof ArrayBuffer) {\n    const slice = resource.slice(0, INITIAL_DATA_LENGTH);\n    const base64 = arrayBufferToBase64(slice);\n    return `data:base64,${base64}`;\n  }\n\n  return null;\n}\n\nfunction arrayBufferToBase64(buffer) {\n  let binary = '';\n  const bytes = new Uint8Array(buffer);\n\n  for (let i = 0; i < bytes.byteLength; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n\n  return btoa(binary);\n}\n//# sourceMappingURL=response-utils.js.map","import { resolvePath } from '@loaders.gl/loader-utils';\nimport { makeResponse } from '../utils/response-utils';\nexport async function fetchFile(url, options) {\n  if (typeof url === 'string') {\n    url = resolvePath(url);\n    let fetchOptions = options;\n\n    if (options !== null && options !== void 0 && options.fetch && typeof (options === null || options === void 0 ? void 0 : options.fetch) !== 'function') {\n      fetchOptions = options.fetch;\n    }\n\n    return await fetch(url, fetchOptions);\n  }\n\n  return await makeResponse(url);\n}\n//# sourceMappingURL=fetch-file.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Log } from 'probe.gl';\nexport const probeLog = new Log({\n  id: 'loaders.gl'\n});\nexport class NullLog {\n  log() {\n    return () => {};\n  }\n\n  info() {\n    return () => {};\n  }\n\n  warn() {\n    return () => {};\n  }\n\n  error() {\n    return () => {};\n  }\n\n}\nexport class ConsoleLog {\n  constructor() {\n    _defineProperty(this, \"console\", void 0);\n\n    this.console = console;\n  }\n\n  log(...args) {\n    return this.console.log.bind(this.console, ...args);\n  }\n\n  info(...args) {\n    return this.console.info.bind(this.console, ...args);\n  }\n\n  warn(...args) {\n    return this.console.warn.bind(this.console, ...args);\n  }\n\n  error(...args) {\n    return this.console.error.bind(this.console, ...args);\n  }\n\n}\n//# sourceMappingURL=loggers.js.map","import { ConsoleLog } from './loggers';\nexport const DEFAULT_LOADER_OPTIONS = {\n  fetch: null,\n  mimeType: undefined,\n  nothrow: false,\n  log: new ConsoleLog(),\n  CDN: 'https://unpkg.com/@loaders.gl',\n  worker: true,\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  reuseWorkers: true,\n  _workerType: '',\n  limit: 0,\n  _limitMB: 0,\n  batchSize: 'auto',\n  batchDebounceMs: 0,\n  metadata: false,\n  transforms: []\n};\nexport const REMOVED_LOADER_OPTIONS = {\n  throws: 'nothrow',\n  dataType: '(no longer used)',\n  uri: 'baseUri',\n  method: 'fetch.method',\n  headers: 'fetch.headers',\n  body: 'fetch.body',\n  mode: 'fetch.mode',\n  credentials: 'fetch.credentials',\n  cache: 'fetch.cache',\n  redirect: 'fetch.redirect',\n  referrer: 'fetch.referrer',\n  referrerPolicy: 'fetch.referrerPolicy',\n  integrity: 'fetch.integrity',\n  keepalive: 'fetch.keepalive',\n  signal: 'fetch.signal'\n};\n//# sourceMappingURL=option-defaults.js.map","import { global } from '@loaders.gl/loader-utils';\nimport { isPureObject, isObject } from '../../javascript-utils/is-type';\nimport { fetchFile } from '../fetch/fetch-file';\nimport { probeLog, NullLog } from './loggers';\nimport { DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS } from './option-defaults';\nexport function getGlobalLoaderState() {\n  global.loaders = global.loaders || {};\n  const {\n    loaders\n  } = global;\n  loaders._state = loaders._state || {};\n  return loaders._state;\n}\n\nconst getGlobalLoaderOptions = () => {\n  const state = getGlobalLoaderState();\n  state.globalOptions = state.globalOptions || { ...DEFAULT_LOADER_OPTIONS\n  };\n  return state.globalOptions;\n};\n\nexport function setGlobalOptions(options) {\n  const state = getGlobalLoaderState();\n  const globalOptions = getGlobalLoaderOptions();\n  state.globalOptions = normalizeOptionsInternal(globalOptions, options);\n}\nexport function normalizeOptions(options, loader, loaders, url) {\n  loaders = loaders || [];\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n  validateOptions(options, loaders);\n  return normalizeOptionsInternal(loader, options, url);\n}\nexport function getFetchFunction(options, context) {\n  const globalOptions = getGlobalLoaderOptions();\n  const fetchOptions = options || globalOptions;\n\n  if (typeof fetchOptions.fetch === 'function') {\n    return fetchOptions.fetch;\n  }\n\n  if (isObject(fetchOptions.fetch)) {\n    return url => fetchFile(url, fetchOptions);\n  }\n\n  if (context !== null && context !== void 0 && context.fetch) {\n    return context === null || context === void 0 ? void 0 : context.fetch;\n  }\n\n  return fetchFile;\n}\n\nfunction validateOptions(options, loaders) {\n  validateOptionsObject(options, null, DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS, loaders);\n\n  for (const loader of loaders) {\n    const idOptions = options && options[loader.id] || {};\n    const loaderOptions = loader.options && loader.options[loader.id] || {};\n    const deprecatedOptions = loader.deprecatedOptions && loader.deprecatedOptions[loader.id] || {};\n    validateOptionsObject(idOptions, loader.id, loaderOptions, deprecatedOptions, loaders);\n  }\n}\n\nfunction validateOptionsObject(options, id, defaultOptions, deprecatedOptions, loaders) {\n  const loaderName = id || 'Top level';\n  const prefix = id ? `${id}.` : '';\n\n  for (const key in options) {\n    const isSubOptions = !id && isObject(options[key]);\n    const isBaseUriOption = key === 'baseUri' && !id;\n    const isWorkerUrlOption = key === 'workerUrl' && id;\n\n    if (!(key in defaultOptions) && !isBaseUriOption && !isWorkerUrlOption) {\n      if (key in deprecatedOptions) {\n        probeLog.warn(`${loaderName} loader option \\'${prefix}${key}\\' no longer supported, use \\'${deprecatedOptions[key]}\\'`)();\n      } else if (!isSubOptions) {\n        const suggestion = findSimilarOption(key, loaders);\n        probeLog.warn(`${loaderName} loader option \\'${prefix}${key}\\' not recognized. ${suggestion}`)();\n      }\n    }\n  }\n}\n\nfunction findSimilarOption(optionKey, loaders) {\n  const lowerCaseOptionKey = optionKey.toLowerCase();\n  let bestSuggestion = '';\n\n  for (const loader of loaders) {\n    for (const key in loader.options) {\n      if (optionKey === key) {\n        return `Did you mean \\'${loader.id}.${key}\\'?`;\n      }\n\n      const lowerCaseKey = key.toLowerCase();\n      const isPartialMatch = lowerCaseOptionKey.startsWith(lowerCaseKey) || lowerCaseKey.startsWith(lowerCaseOptionKey);\n\n      if (isPartialMatch) {\n        bestSuggestion = bestSuggestion || `Did you mean \\'${loader.id}.${key}\\'?`;\n      }\n    }\n  }\n\n  return bestSuggestion;\n}\n\nfunction normalizeOptionsInternal(loader, options, url) {\n  const loaderDefaultOptions = loader.options || {};\n  const mergedOptions = { ...loaderDefaultOptions\n  };\n  addUrlOptions(mergedOptions, url);\n\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, getGlobalLoaderOptions());\n  mergeNestedFields(mergedOptions, options);\n  return mergedOptions;\n}\n\nfunction mergeNestedFields(mergedOptions, options) {\n  for (const key in options) {\n    if (key in options) {\n      const value = options[key];\n\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = { ...mergedOptions[key],\n          ...options[key]\n        };\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n  }\n}\n\nfunction addUrlOptions(options, url) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}\n//# sourceMappingURL=option-utils.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'loaders.gl assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const DEFAULT_VERSION = 'beta';\nexport const VERSION = typeof \"3.0.12\" !== 'undefined' ? \"3.0.12\" : DEFAULT_VERSION;\n\nif (typeof \"3.0.12\" === 'undefined') {\n  console.error('loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN.');\n}\n//# sourceMappingURL=version.js.map","import { assert } from '../env-utils/assert';\nimport { VERSION } from '../env-utils/version';\nexport function validateWorkerVersion(worker, coreVersion = VERSION) {\n  assert(worker, 'no worker provided');\n  const workerVersion = worker.version;\n\n  if (!coreVersion || !workerVersion) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction parseVersion(version) {\n  const parts = version.split('.').map(Number);\n  return {\n    major: parts[0],\n    minor: parts[1]\n  };\n}\n//# sourceMappingURL=validate-worker-version.js.map","import { assert } from '../env-utils/assert';\nconst workerURLCache = new Map();\nexport function getLoadableWorkerURL(props) {\n  assert(props.source && !props.url || !props.source && props.url);\n  let workerURL = workerURLCache.get(props.source || props.url);\n\n  if (!workerURL) {\n    if (props.url) {\n      workerURL = getLoadableWorkerURLFromURL(props.url);\n      workerURLCache.set(props.url, workerURL);\n    }\n\n    if (props.source) {\n      workerURL = getLoadableWorkerURLFromSource(props.source);\n      workerURLCache.set(props.source, workerURL);\n    }\n  }\n\n  assert(workerURL);\n  return workerURL;\n}\n\nfunction getLoadableWorkerURLFromURL(url) {\n  if (!url.startsWith('http')) {\n    return url;\n  }\n\n  const workerSource = buildScriptSource(url);\n  return getLoadableWorkerURLFromSource(workerSource);\n}\n\nfunction getLoadableWorkerURLFromSource(workerSource) {\n  const blob = new Blob([workerSource], {\n    type: 'application/javascript'\n  });\n  return URL.createObjectURL(blob);\n}\n\nfunction buildScriptSource(workerUrl) {\n  return `\\\ntry {\n  importScripts('${workerUrl}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`;\n}\n//# sourceMappingURL=get-loadable-worker-url.js.map","export function getTransferList(object, recursive = true, transfers) {\n  const transfersSet = transfers || new Set();\n\n  if (!object) {} else if (isTransferable(object)) {\n    transfersSet.add(object);\n  } else if (isTransferable(object.buffer)) {\n    transfersSet.add(object.buffer);\n  } else if (ArrayBuffer.isView(object)) {} else if (recursive && typeof object === 'object') {\n    for (const key in object) {\n      getTransferList(object[key], recursive, transfersSet);\n    }\n  }\n\n  return transfers === undefined ? Array.from(transfersSet) : [];\n}\n\nfunction isTransferable(object) {\n  if (!object) {\n    return false;\n  }\n\n  if (object instanceof ArrayBuffer) {\n    return true;\n  }\n\n  if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n    return true;\n  }\n\n  if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n    return true;\n  }\n\n  if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=get-transfer-list.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { assert } from '../env-utils/assert';\nimport { getLoadableWorkerURL } from '../worker-utils/get-loadable-worker-url';\nimport { getTransferList } from '../worker-utils/get-transfer-list';\n\nconst NOOP = () => {};\n\nexport default class WorkerThread {\n  static isSupported() {\n    return typeof Worker !== 'undefined';\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"source\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"terminated\", false);\n\n    _defineProperty(this, \"worker\", void 0);\n\n    _defineProperty(this, \"onMessage\", void 0);\n\n    _defineProperty(this, \"onError\", void 0);\n\n    _defineProperty(this, \"_loadableURL\", '');\n\n    const {\n      name,\n      source,\n      url\n    } = props;\n    assert(source || url);\n    this.name = name;\n    this.source = source;\n    this.url = url;\n    this.onMessage = NOOP;\n\n    this.onError = error => console.log(error);\n\n    this.worker = this._createBrowserWorker();\n  }\n\n  destroy() {\n    this.onMessage = NOOP;\n    this.onError = NOOP;\n    this.worker.terminate();\n    this.terminated = true;\n  }\n\n  get isRunning() {\n    return Boolean(this.onMessage);\n  }\n\n  postMessage(data, transferList) {\n    transferList = transferList || getTransferList(data);\n    this.worker.postMessage(data, transferList);\n  }\n\n  _getErrorFromErrorEvent(event) {\n    let message = 'Failed to load ';\n    message += `worker ${this.name}. `;\n\n    if (event.message) {\n      message += `${event.message} in `;\n    }\n\n    if (event.lineno) {\n      message += `:${event.lineno}:${event.colno}`;\n    }\n\n    return new Error(message);\n  }\n\n  _createBrowserWorker() {\n    this._loadableURL = getLoadableWorkerURL({\n      source: this.source,\n      url: this.url\n    });\n    const worker = new Worker(this._loadableURL, {\n      name: this.name\n    });\n\n    worker.onmessage = event => {\n      if (!event.data) {\n        this.onError(new Error('No data received'));\n      } else {\n        this.onMessage(event.data);\n      }\n    };\n\n    worker.onerror = error => {\n      this.onError(this._getErrorFromErrorEvent(error));\n      this.terminated = true;\n    };\n\n    worker.onmessageerror = event => console.error(event);\n\n    return worker;\n  }\n\n}\n//# sourceMappingURL=worker-thread.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { assert } from '../env-utils/assert';\nexport default class WorkerJob {\n  constructor(jobName, workerThread) {\n    _defineProperty(this, \"name\", void 0);\n\n    _defineProperty(this, \"workerThread\", void 0);\n\n    _defineProperty(this, \"isRunning\", void 0);\n\n    _defineProperty(this, \"result\", void 0);\n\n    _defineProperty(this, \"_resolve\", void 0);\n\n    _defineProperty(this, \"_reject\", void 0);\n\n    this.name = jobName;\n    this.workerThread = workerThread;\n    this.isRunning = true;\n\n    this._resolve = () => {};\n\n    this._reject = () => {};\n\n    this.result = new Promise((resolve, reject) => {\n      this._resolve = resolve;\n      this._reject = reject;\n    });\n  }\n\n  postMessage(type, payload) {\n    this.workerThread.postMessage({\n      source: 'loaders.gl',\n      type,\n      payload\n    });\n  }\n\n  done(value) {\n    assert(this.isRunning);\n    this.isRunning = false;\n\n    this._resolve(value);\n  }\n\n  error(error) {\n    assert(this.isRunning);\n    this.isRunning = false;\n\n    this._reject(error);\n  }\n\n}\n//# sourceMappingURL=worker-job.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { isMobile } from '../env-utils/globals';\nimport WorkerThread from './worker-thread';\nimport WorkerJob from './worker-job';\nexport default class WorkerPool {\n  constructor(props) {\n    _defineProperty(this, \"name\", 'unnamed');\n\n    _defineProperty(this, \"source\", void 0);\n\n    _defineProperty(this, \"url\", void 0);\n\n    _defineProperty(this, \"maxConcurrency\", 1);\n\n    _defineProperty(this, \"maxMobileConcurrency\", 1);\n\n    _defineProperty(this, \"onDebug\", () => {});\n\n    _defineProperty(this, \"reuseWorkers\", true);\n\n    _defineProperty(this, \"props\", {});\n\n    _defineProperty(this, \"jobQueue\", []);\n\n    _defineProperty(this, \"idleQueue\", []);\n\n    _defineProperty(this, \"count\", 0);\n\n    _defineProperty(this, \"isDestroyed\", false);\n\n    this.source = props.source;\n    this.url = props.url;\n    this.setProps(props);\n  }\n\n  destroy() {\n    this.idleQueue.forEach(worker => worker.destroy());\n    this.isDestroyed = true;\n  }\n\n  setProps(props) {\n    this.props = { ...this.props,\n      ...props\n    };\n\n    if (props.name !== undefined) {\n      this.name = props.name;\n    }\n\n    if (props.maxConcurrency !== undefined) {\n      this.maxConcurrency = props.maxConcurrency;\n    }\n\n    if (props.maxMobileConcurrency !== undefined) {\n      this.maxMobileConcurrency = props.maxMobileConcurrency;\n    }\n\n    if (props.reuseWorkers !== undefined) {\n      this.reuseWorkers = props.reuseWorkers;\n    }\n\n    if (props.onDebug !== undefined) {\n      this.onDebug = props.onDebug;\n    }\n  }\n\n  async startJob(name, onMessage = (job, type, data) => job.done(data), onError = (job, error) => job.error(error)) {\n    const startPromise = new Promise(onStart => {\n      this.jobQueue.push({\n        name,\n        onMessage,\n        onError,\n        onStart\n      });\n      return this;\n    });\n\n    this._startQueuedJob();\n\n    return await startPromise;\n  }\n\n  async _startQueuedJob() {\n    if (!this.jobQueue.length) {\n      return;\n    }\n\n    const workerThread = this._getAvailableWorker();\n\n    if (!workerThread) {\n      return;\n    }\n\n    const queuedJob = this.jobQueue.shift();\n\n    if (queuedJob) {\n      this.onDebug({\n        message: 'Starting job',\n        name: queuedJob.name,\n        workerThread,\n        backlog: this.jobQueue.length\n      });\n      const job = new WorkerJob(queuedJob.name, workerThread);\n\n      workerThread.onMessage = data => queuedJob.onMessage(job, data.type, data.payload);\n\n      workerThread.onError = error => queuedJob.onError(job, error);\n\n      queuedJob.onStart(job);\n\n      try {\n        await job.result;\n      } finally {\n        this.returnWorkerToQueue(workerThread);\n      }\n    }\n  }\n\n  returnWorkerToQueue(worker) {\n    const shouldDestroyWorker = this.isDestroyed || !this.reuseWorkers || this.count > this._getMaxConcurrency();\n\n    if (shouldDestroyWorker) {\n      worker.destroy();\n      this.count--;\n    } else {\n      this.idleQueue.push(worker);\n    }\n\n    if (!this.isDestroyed) {\n      this._startQueuedJob();\n    }\n  }\n\n  _getAvailableWorker() {\n    if (this.idleQueue.length > 0) {\n      return this.idleQueue.shift() || null;\n    }\n\n    if (this.count < this._getMaxConcurrency()) {\n      this.count++;\n      const name = `${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;\n      return new WorkerThread({\n        name,\n        source: this.source,\n        url: this.url\n      });\n    }\n\n    return null;\n  }\n\n  _getMaxConcurrency() {\n    return isMobile ? this.maxMobileConcurrency : this.maxConcurrency;\n  }\n\n}\n//# sourceMappingURL=worker-pool.js.map","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport WorkerPool from './worker-pool';\nimport WorkerThread from './worker-thread';\nconst DEFAULT_PROPS = {\n  maxConcurrency: 3,\n  maxMobileConcurrency: 1,\n  onDebug: () => {},\n  reuseWorkers: true\n};\nexport default class WorkerFarm {\n  static isSupported() {\n    return WorkerThread.isSupported();\n  }\n\n  static getWorkerFarm(props = {}) {\n    WorkerFarm._workerFarm = WorkerFarm._workerFarm || new WorkerFarm({});\n\n    WorkerFarm._workerFarm.setProps(props);\n\n    return WorkerFarm._workerFarm;\n  }\n\n  constructor(props) {\n    _defineProperty(this, \"props\", void 0);\n\n    _defineProperty(this, \"workerPools\", new Map());\n\n    this.props = { ...DEFAULT_PROPS\n    };\n    this.setProps(props);\n    this.workerPools = new Map();\n  }\n\n  destroy() {\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.destroy();\n    }\n  }\n\n  setProps(props) {\n    this.props = { ...this.props,\n      ...props\n    };\n\n    for (const workerPool of this.workerPools.values()) {\n      workerPool.setProps(this._getWorkerPoolProps());\n    }\n  }\n\n  getWorkerPool(options) {\n    const {\n      name,\n      source,\n      url\n    } = options;\n    let workerPool = this.workerPools.get(name);\n\n    if (!workerPool) {\n      workerPool = new WorkerPool({\n        name,\n        source,\n        url\n      });\n      workerPool.setProps(this._getWorkerPoolProps());\n      this.workerPools.set(name, workerPool);\n    }\n\n    return workerPool;\n  }\n\n  _getWorkerPoolProps() {\n    return {\n      maxConcurrency: this.props.maxConcurrency,\n      maxMobileConcurrency: this.props.maxMobileConcurrency,\n      reuseWorkers: this.props.reuseWorkers,\n      onDebug: this.props.onDebug\n    };\n  }\n\n}\n\n_defineProperty(WorkerFarm, \"_workerFarm\", void 0);\n//# sourceMappingURL=worker-farm.js.map","import { assert } from '../env-utils/assert';\nimport { VERSION as __VERSION__ } from '../env-utils/version';\nconst NPM_TAG = 'latest';\nconst VERSION = typeof \"3.0.12\" !== 'undefined' ? \"3.0.12\" : NPM_TAG;\nexport function getWorkerName(worker) {\n  const warning = worker.version !== VERSION ? ` (worker-utils@${VERSION})` : '';\n  return `${worker.name}@${worker.version}${warning}`;\n}\nexport function getWorkerURL(worker, options = {}) {\n  const workerOptions = options[worker.id] || {};\n  const workerFile = `${worker.id}-worker.js`;\n  let url = workerOptions.workerUrl;\n\n  if (options._workerType === 'test') {\n    url = `modules/${worker.module}/dist/${workerFile}`;\n  }\n\n  if (!url) {\n    let version = worker.version;\n\n    if (version === 'latest') {\n      version = NPM_TAG;\n    }\n\n    const versionTag = version ? `@${version}` : '';\n    url = `https://unpkg.com/@loaders.gl/${worker.module}${versionTag}/dist/${workerFile}`;\n  }\n\n  assert(url);\n  return url;\n}\n//# sourceMappingURL=get-worker-url.js.map","import { WorkerFarm, getWorkerURL } from '@loaders.gl/worker-utils';\nexport function canParseWithWorker(loader, options) {\n  if (!WorkerFarm.isSupported()) {\n    return false;\n  }\n\n  return loader.worker && (options === null || options === void 0 ? void 0 : options.worker);\n}\nexport async function parseWithWorker(loader, data, options, context, parseOnMainThread) {\n  const name = loader.id;\n  const url = getWorkerURL(loader, options);\n  const workerFarm = WorkerFarm.getWorkerFarm(options);\n  const workerPool = workerFarm.getWorkerPool({\n    name,\n    url\n  });\n  options = JSON.parse(JSON.stringify(options));\n  const job = await workerPool.startJob('process-on-worker', onMessage.bind(null, parseOnMainThread));\n  job.postMessage('process', {\n    input: data,\n    options\n  });\n  const result = await job.result;\n  return await result.result;\n}\n\nasync function onMessage(parseOnMainThread, job, type, payload) {\n  switch (type) {\n    case 'done':\n      job.done(payload);\n      break;\n\n    case 'error':\n      job.error(payload.error);\n      break;\n\n    case 'process':\n      const {\n        id,\n        input,\n        options\n      } = payload;\n\n      try {\n        const result = await parseOnMainThread(input, options);\n        job.postMessage('done', {\n          id,\n          result\n        });\n      } catch (error) {\n        const message = error instanceof Error ? error.message : 'unknown error';\n        job.postMessage('error', {\n          id,\n          error: message\n        });\n      }\n\n      break;\n\n    default:\n      console.warn(`parse-with-worker unknown message ${type}`);\n  }\n}\n//# sourceMappingURL=parse-with-worker.js.map","import * as node from '../node/buffer';\nexport function isBuffer(value) {\n  return value && typeof value === 'object' && value.isBuffer;\n}\nexport function toBuffer(data) {\n  return node.toBuffer ? node.toBuffer(data) : data;\n}\nexport function bufferToArrayBuffer(data) {\n  if (node.toArrayBuffer) {\n    return node.toArrayBuffer(data);\n  }\n\n  return data;\n}\n//# sourceMappingURL=buffer-utils.js.map","import * as node from './buffer-utils';\nexport function toArrayBuffer(data) {\n  if (node.isBuffer(data)) {\n    data = node.bufferToArrayBuffer(data);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    if (data.byteOffset === 0 && data.byteLength === data.buffer.byteLength) {\n      return data.buffer;\n    }\n\n    return data.buffer.slice(data.byteOffset, data.byteOffset + data.byteLength);\n  }\n\n  if (typeof data === 'string') {\n    const text = data;\n    const uint8Array = new TextEncoder().encode(text);\n    return uint8Array.buffer;\n  }\n\n  if (data && typeof data === 'object' && data._toArrayBuffer) {\n    return data._toArrayBuffer();\n  }\n\n  throw new Error('toArrayBuffer');\n}\nexport function compareArrayBuffers(arrayBuffer1, arrayBuffer2, byteLength) {\n  byteLength = byteLength || arrayBuffer1.byteLength;\n\n  if (arrayBuffer1.byteLength < byteLength || arrayBuffer2.byteLength < byteLength) {\n    return false;\n  }\n\n  const array1 = new Uint8Array(arrayBuffer1);\n  const array2 = new Uint8Array(arrayBuffer2);\n\n  for (let i = 0; i < array1.length; ++i) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function concatenateArrayBuffers(...sources) {\n  const sourceArrays = sources.map(source2 => source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2);\n  const byteLength = sourceArrays.reduce((length, typedArray) => length + typedArray.byteLength, 0);\n  const result = new Uint8Array(byteLength);\n  let offset = 0;\n\n  for (const sourceArray of sourceArrays) {\n    result.set(sourceArray, offset);\n    offset += sourceArray.byteLength;\n  }\n\n  return result.buffer;\n}\nexport function concatenateTypedArrays(...typedArrays) {\n  const arrays = typedArrays;\n  const TypedArrayConstructor = arrays && arrays.length > 1 && arrays[0].constructor || null;\n\n  if (!TypedArrayConstructor) {\n    throw new Error('\"concatenateTypedArrays\" - incorrect quantity of arguments or arguments have incompatible data types');\n  }\n\n  const sumLength = arrays.reduce((acc, value) => acc + value.length, 0);\n  const result = new TypedArrayConstructor(sumLength);\n  let offset = 0;\n\n  for (const array of arrays) {\n    result.set(array, offset);\n    offset += array.length;\n  }\n\n  return result;\n}\nexport function sliceArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  const subArray = byteLength !== undefined ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength) : new Uint8Array(arrayBuffer).subarray(byteOffset);\n  const arrayCopy = new Uint8Array(subArray);\n  return arrayCopy.buffer;\n}\n//# sourceMappingURL=array-buffer-utils.js.map","import { concatenateArrayBuffers } from '../binary-utils/array-buffer-utils';\nexport async function forEach(iterator, visitor) {\n  while (true) {\n    const {\n      done,\n      value\n    } = await iterator.next();\n\n    if (done) {\n      iterator.return();\n      return;\n    }\n\n    const cancel = visitor(value);\n\n    if (cancel) {\n      return;\n    }\n  }\n}\nexport async function concatenateArrayBuffersAsync(asyncIterator) {\n  const arrayBuffers = [];\n\n  for await (const chunk of asyncIterator) {\n    arrayBuffers.push(chunk);\n  }\n\n  return concatenateArrayBuffers(...arrayBuffers);\n}\nexport async function concatenateStringsAsync(asyncIterator) {\n  const strings = [];\n\n  for await (const chunk of asyncIterator) {\n    strings.push(chunk);\n  }\n\n  return strings.join('');\n}\n//# sourceMappingURL=async-iteration.js.map","const DEFAULT_CHUNK_SIZE = 256 * 1024;\nexport function* makeStringIterator(string, options) {\n  const chunkSize = (options === null || options === void 0 ? void 0 : options.chunkSize) || DEFAULT_CHUNK_SIZE;\n  let offset = 0;\n  const textEncoder = new TextEncoder();\n\n  while (offset < string.length) {\n    const chunkLength = Math.min(string.length - offset, chunkSize);\n    const chunk = string.slice(offset, offset + chunkLength);\n    offset += chunkLength;\n    yield textEncoder.encode(chunk);\n  }\n}\n//# sourceMappingURL=make-string-iterator.js.map","const DEFAULT_CHUNK_SIZE = 256 * 1024;\nexport function* makeArrayBufferIterator(arrayBuffer, options = {}) {\n  const {\n    chunkSize = DEFAULT_CHUNK_SIZE\n  } = options;\n  let byteOffset = 0;\n\n  while (byteOffset < arrayBuffer.byteLength) {\n    const chunkByteLength = Math.min(arrayBuffer.byteLength - byteOffset, chunkSize);\n    const chunk = new ArrayBuffer(chunkByteLength);\n    const sourceArray = new Uint8Array(arrayBuffer, byteOffset, chunkByteLength);\n    const chunkArray = new Uint8Array(chunk);\n    chunkArray.set(sourceArray);\n    byteOffset += chunkByteLength;\n    yield chunk;\n  }\n}\n//# sourceMappingURL=make-array-buffer-iterator.js.map","const DEFAULT_CHUNK_SIZE = 1024 * 1024;\nexport async function* makeBlobIterator(blob, options) {\n  const chunkSize = (options === null || options === void 0 ? void 0 : options.chunkSize) || DEFAULT_CHUNK_SIZE;\n  let offset = 0;\n\n  while (offset < blob.size) {\n    const end = offset + chunkSize;\n    const chunk = await blob.slice(offset, end).arrayBuffer();\n    offset = end;\n    yield chunk;\n  }\n}\n//# sourceMappingURL=make-blob-iterator.js.map","import { isBrowser, toArrayBuffer } from '@loaders.gl/loader-utils';\nexport function makeStreamIterator(stream, options) {\n  return isBrowser ? makeBrowserStreamIterator(stream, options) : makeNodeStreamIterator(stream, options);\n}\n\nasync function* makeBrowserStreamIterator(stream, options) {\n  const reader = stream.getReader();\n  let nextBatchPromise;\n\n  try {\n    while (true) {\n      const currentBatchPromise = nextBatchPromise || reader.read();\n\n      if (options !== null && options !== void 0 && options._streamReadAhead) {\n        nextBatchPromise = reader.read();\n      }\n\n      const {\n        done,\n        value\n      } = await currentBatchPromise;\n\n      if (done) {\n        return;\n      }\n\n      yield toArrayBuffer(value);\n    }\n  } catch (error) {\n    reader.releaseLock();\n  }\n}\n\nasync function* makeNodeStreamIterator(stream, options) {\n  for await (const chunk of stream) {\n    yield toArrayBuffer(chunk);\n  }\n}\n//# sourceMappingURL=make-stream-iterator.js.map","import { makeStringIterator } from './make-string-iterator';\nimport { makeArrayBufferIterator } from './make-array-buffer-iterator';\nimport { makeBlobIterator } from './make-blob-iterator';\nimport { makeStreamIterator } from './make-stream-iterator';\nimport { isBlob, isReadableStream, isResponse } from '../../javascript-utils/is-type';\nexport function makeIterator(data, options) {\n  if (typeof data === 'string') {\n    return makeStringIterator(data, options);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return makeArrayBufferIterator(data, options);\n  }\n\n  if (isBlob(data)) {\n    return makeBlobIterator(data, options);\n  }\n\n  if (isReadableStream(data)) {\n    return makeStreamIterator(data, options);\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    return makeStreamIterator(response.body, options);\n  }\n\n  throw new Error('makeIterator');\n}\n//# sourceMappingURL=make-iterator.js.map","import { concatenateArrayBuffersAsync } from '@loaders.gl/loader-utils';\nimport { isResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isBlob, isBuffer } from '../../javascript-utils/is-type';\nimport { makeIterator } from '../../iterators/make-iterator/make-iterator';\nimport { checkResponse, makeResponse } from '../utils/response-utils';\nconst ERR_DATA = 'Cannot convert supplied data type';\nexport function getArrayBufferOrStringFromDataSync(data, loader, options) {\n  if (loader.text && typeof data === 'string') {\n    return data;\n  }\n\n  if (isBuffer(data)) {\n    data = data.buffer;\n  }\n\n  if (data instanceof ArrayBuffer) {\n    const arrayBuffer = data;\n\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(arrayBuffer);\n    }\n\n    return arrayBuffer;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    if (loader.text && !loader.binary) {\n      const textDecoder = new TextDecoder('utf8');\n      return textDecoder.decode(data);\n    }\n\n    let arrayBuffer = data.buffer;\n    const byteLength = data.byteLength || data.length;\n\n    if (data.byteOffset !== 0 || byteLength !== arrayBuffer.byteLength) {\n      arrayBuffer = arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n    }\n\n    return arrayBuffer;\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport async function getArrayBufferOrStringFromData(data, loader, options) {\n  const isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n\n  if (typeof data === 'string' || isArrayBuffer) {\n    return getArrayBufferOrStringFromDataSync(data, loader, options);\n  }\n\n  if (isBlob(data)) {\n    data = await makeResponse(data);\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    await checkResponse(response);\n    return loader.binary ? await response.arrayBuffer() : await response.text();\n  }\n\n  if (isReadableStream(data)) {\n    data = makeIterator(data, options);\n  }\n\n  if (isIterable(data) || isAsyncIterable(data)) {\n    return concatenateArrayBuffersAsync(data);\n  }\n\n  throw new Error(ERR_DATA);\n}\nexport async function getAsyncIterableFromData(data, options) {\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isResponse(data)) {\n    const response = data;\n    await checkResponse(response);\n    const body = await response.body;\n    return makeIterator(body, options);\n  }\n\n  if (isBlob(data) || isReadableStream(data)) {\n    return makeIterator(data, options);\n  }\n\n  if (isAsyncIterable(data)) {\n    return data[Symbol.asyncIterator]();\n  }\n\n  return getIterableFromData(data);\n}\nexport async function getReadableStream(data) {\n  if (isReadableStream(data)) {\n    return data;\n  }\n\n  if (isResponse(data)) {\n    return data.body;\n  }\n\n  const response = await makeResponse(data);\n  return response.body;\n}\n\nfunction getIterableFromData(data) {\n  if (ArrayBuffer.isView(data)) {\n    return function* oneChunk() {\n      yield data.buffer;\n    }();\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return function* oneChunk() {\n      yield data;\n    }();\n  }\n\n  if (isIterator(data)) {\n    return data;\n  }\n\n  if (isIterable(data)) {\n    return data[Symbol.iterator]();\n  }\n\n  throw new Error(ERR_DATA);\n}\n//# sourceMappingURL=get-data.js.map","import { getFetchFunction } from './option-utils';\nexport function getLoaderContext(context, options, previousContext = null) {\n  if (previousContext) {\n    return previousContext;\n  }\n\n  const resolvedContext = {\n    fetch: getFetchFunction(options, context),\n    ...context\n  };\n\n  if (!Array.isArray(resolvedContext.loaders)) {\n    resolvedContext.loaders = null;\n  }\n\n  return resolvedContext;\n}\nexport function getLoadersFromContext(loaders, context) {\n  if (!context && loaders && !Array.isArray(loaders)) {\n    return loaders;\n  }\n\n  let candidateLoaders;\n\n  if (loaders) {\n    candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n  }\n\n  if (context && context.loaders) {\n    const contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n    candidateLoaders = candidateLoaders ? [...candidateLoaders, ...contextLoaders] : contextLoaders;\n  }\n\n  return candidateLoaders && candidateLoaders.length ? candidateLoaders : null;\n}\n//# sourceMappingURL=loader-context.js.map","import { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getGlobalLoaderState } from '../loader-utils/option-utils';\n\nconst getGlobalLoaderRegistry = () => {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = state.loaderRegistry || [];\n  return state.loaderRegistry;\n};\n\nexport function registerLoaders(loaders) {\n  const loaderRegistry = getGlobalLoaderRegistry();\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n\n  for (const loader of loaders) {\n    const normalizedLoader = normalizeLoader(loader);\n\n    if (!loaderRegistry.find(registeredLoader => normalizedLoader === registeredLoader)) {\n      loaderRegistry.unshift(normalizedLoader);\n    }\n  }\n}\nexport function getRegisteredLoaders() {\n  return getGlobalLoaderRegistry();\n}\nexport function _unregisterLoaders() {\n  const state = getGlobalLoaderState();\n  state.loaderRegistry = [];\n}\n//# sourceMappingURL=register-loaders.js.map","import { compareArrayBuffers } from '@loaders.gl/loader-utils';\nimport { normalizeLoader } from '../loader-utils/normalize-loader';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { getRegisteredLoaders } from './register-loaders';\nimport { isBlob } from '../../javascript-utils/is-type';\nconst EXT_PATTERN = /\\.([^.]+)$/;\nexport async function selectLoader(data, loaders = [], options, context) {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  let loader = selectLoaderSync(data, loaders, { ...options,\n    nothrow: true\n  }, context);\n\n  if (loader) {\n    return loader;\n  }\n\n  if (isBlob(data)) {\n    data = await data.slice(0, 10).arrayBuffer();\n    loader = selectLoaderSync(data, loaders, options, context);\n  }\n\n  if (!loader && !(options !== null && options !== void 0 && options.nothrow)) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\nexport function selectLoaderSync(data, loaders = [], options, context) {\n  if (!validHTTPResponse(data)) {\n    return null;\n  }\n\n  if (loaders && !Array.isArray(loaders)) {\n    return normalizeLoader(loaders);\n  }\n\n  let candidateLoaders = [];\n\n  if (loaders) {\n    candidateLoaders = candidateLoaders.concat(loaders);\n  }\n\n  if (!(options !== null && options !== void 0 && options.ignoreRegisteredLoaders)) {\n    candidateLoaders.push(...getRegisteredLoaders());\n  }\n\n  normalizeLoaders(candidateLoaders);\n  const loader = selectLoaderInternal(data, candidateLoaders, options, context);\n\n  if (!loader && !(options !== null && options !== void 0 && options.nothrow)) {\n    throw new Error(getNoValidLoaderMessage(data));\n  }\n\n  return loader;\n}\n\nfunction selectLoaderInternal(data, loaders, options, context) {\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(data);\n  const testUrl = url || (context === null || context === void 0 ? void 0 : context.url);\n  let loader = null;\n\n  if (options !== null && options !== void 0 && options.mimeType) {\n    loader = findLoaderByMIMEType(loaders, options === null || options === void 0 ? void 0 : options.mimeType);\n  }\n\n  loader = loader || findLoaderByUrl(loaders, testUrl);\n  loader = loader || findLoaderByMIMEType(loaders, type);\n  loader = loader || findLoaderByInitialBytes(loaders, data);\n  loader = loader || findLoaderByMIMEType(loaders, options === null || options === void 0 ? void 0 : options.fallbackMimeType);\n  return loader;\n}\n\nfunction validHTTPResponse(data) {\n  if (data instanceof Response) {\n    if (data.status === 204) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getNoValidLoaderMessage(data) {\n  const {\n    url,\n    type\n  } = getResourceUrlAndType(data);\n  let message = 'No valid loader found';\n\n  if (data) {\n    message += ` data: \"${getFirstCharacters(data)}\", contentType: \"${type}\"`;\n  }\n\n  if (url) {\n    message += ` url: ${url}`;\n  }\n\n  return message;\n}\n\nfunction normalizeLoaders(loaders) {\n  for (const loader of loaders) {\n    normalizeLoader(loader);\n  }\n}\n\nfunction findLoaderByUrl(loaders, url) {\n  const match = url && EXT_PATTERN.exec(url);\n  const extension = match && match[1];\n  return extension ? findLoaderByExtension(loaders, extension) : null;\n}\n\nfunction findLoaderByExtension(loaders, extension) {\n  extension = extension.toLowerCase();\n\n  for (const loader of loaders) {\n    for (const loaderExtension of loader.extensions) {\n      if (loaderExtension.toLowerCase() === extension) {\n        return loader;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByMIMEType(loaders, mimeType) {\n  for (const loader of loaders) {\n    if (loader.mimeTypes && loader.mimeTypes.includes(mimeType)) {\n      return loader;\n    }\n\n    if (mimeType === `application/x.${loader.id}`) {\n      return loader;\n    }\n  }\n\n  return null;\n}\n\nfunction findLoaderByInitialBytes(loaders, data) {\n  if (!data) {\n    return null;\n  }\n\n  for (const loader of loaders) {\n    if (typeof data === 'string') {\n      if (testDataAgainstText(data, loader)) {\n        return loader;\n      }\n    } else if (ArrayBuffer.isView(data)) {\n      if (testDataAgainstBinary(data.buffer, data.byteOffset, loader)) {\n        return loader;\n      }\n    } else if (data instanceof ArrayBuffer) {\n      const byteOffset = 0;\n\n      if (testDataAgainstBinary(data, byteOffset, loader)) {\n        return loader;\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction testDataAgainstText(data, loader) {\n  if (loader.testText) {\n    return loader.testText(data);\n  }\n\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(test => data.startsWith(test));\n}\n\nfunction testDataAgainstBinary(data, byteOffset, loader) {\n  const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n  return tests.some(test => testBinary(data, byteOffset, loader, test));\n}\n\nfunction testBinary(data, byteOffset, loader, test) {\n  if (test instanceof ArrayBuffer) {\n    return compareArrayBuffers(test, data, test.byteLength);\n  }\n\n  switch (typeof test) {\n    case 'function':\n      return test(data, loader);\n\n    case 'string':\n      const magic = getMagicString(data, byteOffset, test.length);\n      return test === magic;\n\n    default:\n      return false;\n  }\n}\n\nfunction getFirstCharacters(data, length = 5) {\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    const byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\n\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength < byteOffset + length) {\n    return '';\n  }\n\n  const dataView = new DataView(arrayBuffer);\n  let magic = '';\n\n  for (let i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}\n//# sourceMappingURL=select-loader.js.map","import { assert, validateWorkerVersion } from '@loaders.gl/worker-utils';\nimport { parseWithWorker, canParseWithWorker } from '@loaders.gl/loader-utils';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { normalizeOptions } from '../loader-utils/option-utils';\nimport { getArrayBufferOrStringFromData } from '../loader-utils/get-data';\nimport { getLoaderContext, getLoadersFromContext } from '../loader-utils/loader-context';\nimport { getResourceUrlAndType } from '../utils/resource-utils';\nimport { selectLoader } from './select-loader';\nexport async function parse(data, loaders, options, context) {\n  assert(!context || typeof context === 'object');\n\n  if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined;\n    options = loaders;\n    loaders = undefined;\n  }\n\n  data = await data;\n  options = options || {};\n  const {\n    url\n  } = getResourceUrlAndType(data);\n  const typedLoaders = loaders;\n  const candidateLoaders = getLoadersFromContext(typedLoaders, context);\n  const loader = await selectLoader(data, candidateLoaders, options);\n\n  if (!loader) {\n    return null;\n  }\n\n  options = normalizeOptions(options, loader, candidateLoaders, url);\n  context = getLoaderContext({\n    url,\n    parse,\n    loaders: candidateLoaders\n  }, options, context);\n  return await parseWithLoader(loader, data, options, context);\n}\n\nasync function parseWithLoader(loader, data, options, context) {\n  validateWorkerVersion(loader);\n  data = await getArrayBufferOrStringFromData(data, loader, options);\n\n  if (loader.parseTextSync && typeof data === 'string') {\n    options.dataType = 'text';\n    return loader.parseTextSync(data, options, context, loader);\n  }\n\n  if (canParseWithWorker(loader, options)) {\n    return await parseWithWorker(loader, data, options, context, parse);\n  }\n\n  if (loader.parseText && typeof data === 'string') {\n    return await loader.parseText(data, options, context, loader);\n  }\n\n  if (loader.parse) {\n    return await loader.parse(data, options, context, loader);\n  }\n\n  assert(!loader.parseSync);\n  throw new Error(`${loader.id} loader - no parser found and worker is disabled`);\n}\n//# sourceMappingURL=parse.js.map","import { isBlob } from '../../javascript-utils/is-type';\nimport { isLoaderObject } from '../loader-utils/normalize-loader';\nimport { getFetchFunction } from '../loader-utils/option-utils';\nimport { parse } from './parse';\nexport async function load(url, loaders, options, context) {\n  if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {\n    context = undefined;\n    options = loaders;\n    loaders = undefined;\n  }\n\n  const fetch = getFetchFunction(options);\n  let data = url;\n\n  if (typeof url === 'string') {\n    data = await fetch(url);\n  }\n\n  if (isBlob(url)) {\n    data = await fetch(url);\n  }\n\n  return await parse(data, loaders, options);\n}\n//# sourceMappingURL=load.js.map","import { load } from '@loaders.gl/core';\nexport default class Resource {\n  constructor(id, data, context) {\n    this.id = id;\n    this.context = context;\n    this._loadCount = 0;\n    this._subscribers = new Set();\n    this.setData(data);\n  }\n\n  subscribe(consumer) {\n    this._subscribers.add(consumer);\n  }\n\n  unsubscribe(consumer) {\n    this._subscribers.delete(consumer);\n  }\n\n  inUse() {\n    return this._subscribers.size > 0;\n  }\n\n  delete() {}\n\n  getData() {\n    return this.isLoaded ? this._error ? Promise.reject(this._error) : this._content : this._loader.then(() => this.getData());\n  }\n\n  setData(data, forceUpdate) {\n    if (data === this._data && !forceUpdate) {\n      return;\n    }\n\n    this._data = data;\n    const loadCount = ++this._loadCount;\n    let loader = data;\n\n    if (typeof data === 'string') {\n      loader = load(data);\n    }\n\n    if (loader instanceof Promise) {\n      this.isLoaded = false;\n      this._loader = loader.then(result => {\n        if (this._loadCount === loadCount) {\n          this.isLoaded = true;\n          this._error = null;\n          this._content = result;\n        }\n      }).catch(error => {\n        if (this._loadCount === loadCount) {\n          this.isLoaded = true;\n          this._error = error || true;\n        }\n      });\n    } else {\n      this.isLoaded = true;\n      this._error = null;\n      this._content = data;\n    }\n\n    for (const subscriber of this._subscribers) {\n      subscriber.onChange(this.getData());\n    }\n  }\n\n}\n//# sourceMappingURL=resource.js.map","import Resource from './resource';\nexport default class ResourceManager {\n  constructor({\n    gl,\n    protocol\n  }) {\n    this.protocol = protocol || 'resource://';\n    this._context = {\n      gl,\n      resourceManager: this\n    };\n    this._resources = {};\n    this._consumers = {};\n    this._pruneRequest = null;\n  }\n\n  contains(resourceId) {\n    if (resourceId.startsWith(this.protocol)) {\n      return true;\n    }\n\n    return resourceId in this._resources;\n  }\n\n  add({\n    resourceId,\n    data,\n    forceUpdate = false,\n    persistent = true\n  }) {\n    let res = this._resources[resourceId];\n\n    if (res) {\n      res.setData(data, forceUpdate);\n    } else {\n      res = new Resource(resourceId, data, this._context);\n      this._resources[resourceId] = res;\n    }\n\n    res.persistent = persistent;\n  }\n\n  remove(resourceId) {\n    const res = this._resources[resourceId];\n\n    if (res) {\n      res.delete();\n      delete this._resources[resourceId];\n    }\n  }\n\n  unsubscribe({\n    consumerId\n  }) {\n    const consumer = this._consumers[consumerId];\n\n    if (consumer) {\n      for (const requestId in consumer) {\n        const request = consumer[requestId];\n\n        if (request.resource) {\n          request.resource.unsubscribe(request);\n        }\n      }\n\n      delete this._consumers[consumerId];\n      this.prune();\n    }\n  }\n\n  subscribe({\n    resourceId,\n    onChange,\n    consumerId,\n    requestId = 'default'\n  }) {\n    const {\n      _resources: resources,\n      protocol\n    } = this;\n\n    if (resourceId.startsWith(protocol)) {\n      resourceId = resourceId.replace(protocol, '');\n\n      if (!resources[resourceId]) {\n        this.add({\n          resourceId,\n          data: null,\n          persistent: false\n        });\n      }\n    }\n\n    const res = resources[resourceId];\n\n    this._track(consumerId, requestId, res, onChange);\n\n    if (res) {\n      return res.getData();\n    }\n\n    return undefined;\n  }\n\n  prune() {\n    if (!this._pruneRequest) {\n      this._pruneRequest = setTimeout(() => this._prune(), 0);\n    }\n  }\n\n  finalize() {\n    for (const key in this._resources) {\n      this._resources[key].delete();\n    }\n  }\n\n  _track(consumerId, requestId, resource, onChange) {\n    const consumers = this._consumers;\n    const consumer = consumers[consumerId] = consumers[consumerId] || {};\n    const request = consumer[requestId] || {};\n\n    if (request.resource) {\n      request.resource.unsubscribe(request);\n      request.resource = null;\n      this.prune();\n    }\n\n    if (resource) {\n      consumer[requestId] = request;\n      request.onChange = onChange;\n      request.resource = resource;\n      resource.subscribe(request);\n    }\n  }\n\n  _prune() {\n    this._pruneRequest = null;\n\n    for (const key of Object.keys(this._resources)) {\n      const res = this._resources[key];\n\n      if (!res.persistent && !res.inUse()) {\n        res.delete();\n        delete this._resources[key];\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=resource-manager.js.map","export class TypedArrayManager {\n  constructor(props) {\n    this._pool = [];\n    this.props = {\n      overAlloc: 2,\n      poolSize: 100\n    };\n    this.setProps(props);\n  }\n\n  setProps(props) {\n    Object.assign(this.props, props);\n  }\n\n  allocate(typedArray, count, {\n    size = 1,\n    type,\n    padding = 0,\n    copy = false,\n    initialize = false,\n    maxCount\n  }) {\n    const Type = type || typedArray && typedArray.constructor || Float32Array;\n    const newSize = count * size + padding;\n\n    if (ArrayBuffer.isView(typedArray)) {\n      if (newSize <= typedArray.length) {\n        return typedArray;\n      }\n\n      if (newSize * typedArray.BYTES_PER_ELEMENT <= typedArray.buffer.byteLength) {\n        return new Type(typedArray.buffer, 0, newSize);\n      }\n    }\n\n    let maxSize;\n\n    if (maxCount) {\n      maxSize = maxCount * size + padding;\n    }\n\n    const newArray = this._allocate(Type, newSize, initialize, maxSize);\n\n    if (typedArray && copy) {\n      newArray.set(typedArray);\n    } else if (!initialize) {\n      newArray.fill(0, 0, 4);\n    }\n\n    this._release(typedArray);\n\n    return newArray;\n  }\n\n  release(typedArray) {\n    this._release(typedArray);\n  }\n\n  _allocate(Type, size, initialize, maxSize) {\n    let sizeToAllocate = Math.max(Math.ceil(size * this.props.overAlloc), 1);\n\n    if (sizeToAllocate > maxSize) {\n      sizeToAllocate = maxSize;\n    }\n\n    const pool = this._pool;\n    const byteLength = Type.BYTES_PER_ELEMENT * sizeToAllocate;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n\n    if (i >= 0) {\n      const array = new Type(pool.splice(i, 1)[0], 0, sizeToAllocate);\n\n      if (initialize) {\n        array.fill(0);\n      }\n\n      return array;\n    }\n\n    return new Type(sizeToAllocate);\n  }\n\n  _release(typedArray) {\n    if (!ArrayBuffer.isView(typedArray)) {\n      return;\n    }\n\n    const pool = this._pool;\n    const {\n      buffer\n    } = typedArray;\n    const {\n      byteLength\n    } = buffer;\n    const i = pool.findIndex(b => b.byteLength >= byteLength);\n\n    if (i < 0) {\n      pool.push(buffer);\n    } else if (i > 0 || pool.length < this.props.poolSize) {\n      pool.splice(i, 0, buffer);\n    }\n\n    if (pool.length > this.props.poolSize) {\n      pool.shift();\n    }\n  }\n\n}\nexport default new TypedArrayManager();\n//# sourceMappingURL=typed-array-manager.js.map","import typedArrayManager from './typed-array-manager';\nimport { Vector3 } from 'math.gl';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function mod(value, divisor) {\n  const modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function getCameraPosition(viewMatrixInverse) {\n  return [viewMatrixInverse[12], viewMatrixInverse[13], viewMatrixInverse[14]];\n}\nexport function getFrustumPlanes(viewProjectionMatrix) {\n  const planes = {};\n  planes.left = getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[0], viewProjectionMatrix[7] + viewProjectionMatrix[4], viewProjectionMatrix[11] + viewProjectionMatrix[8], viewProjectionMatrix[15] + viewProjectionMatrix[12]);\n  planes.right = getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[0], viewProjectionMatrix[7] - viewProjectionMatrix[4], viewProjectionMatrix[11] - viewProjectionMatrix[8], viewProjectionMatrix[15] - viewProjectionMatrix[12]);\n  planes.bottom = getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[1], viewProjectionMatrix[7] + viewProjectionMatrix[5], viewProjectionMatrix[11] + viewProjectionMatrix[9], viewProjectionMatrix[15] + viewProjectionMatrix[13]);\n  planes.top = getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[1], viewProjectionMatrix[7] - viewProjectionMatrix[5], viewProjectionMatrix[11] - viewProjectionMatrix[9], viewProjectionMatrix[15] - viewProjectionMatrix[13]);\n  planes.near = getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[2], viewProjectionMatrix[7] + viewProjectionMatrix[6], viewProjectionMatrix[11] + viewProjectionMatrix[10], viewProjectionMatrix[15] + viewProjectionMatrix[14]);\n  planes.far = getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[2], viewProjectionMatrix[7] - viewProjectionMatrix[6], viewProjectionMatrix[11] - viewProjectionMatrix[10], viewProjectionMatrix[15] - viewProjectionMatrix[14]);\n  return planes;\n}\nconst scratchVector = new Vector3();\n\nfunction getFrustumPlane(a, b, c, d) {\n  scratchVector.set(a, b, c);\n  const L = scratchVector.len();\n  return {\n    distance: d / L,\n    normal: new Vector3(-a / L, -b / L, -c / L)\n  };\n}\n\nexport function fp64LowPart(x) {\n  return x - Math.fround(x);\n}\nlet scratchArray;\nexport function toDoublePrecisionArray(typedArray, {\n  size = 1,\n  startIndex = 0,\n  endIndex\n}) {\n  if (!Number.isFinite(endIndex)) {\n    endIndex = typedArray.length;\n  }\n\n  const count = (endIndex - startIndex) / size;\n  scratchArray = typedArrayManager.allocate(scratchArray, count, {\n    type: Float32Array,\n    size: size * 2\n  });\n  let sourceIndex = startIndex;\n  let targetIndex = 0;\n\n  while (sourceIndex < endIndex) {\n    for (let j = 0; j < size; j++) {\n      const value = typedArray[sourceIndex++];\n      scratchArray[targetIndex + j] = value;\n      scratchArray[targetIndex + j + size] = fp64LowPart(value);\n    }\n\n    targetIndex += size * 2;\n  }\n\n  return scratchArray.subarray(0, count * size * 2);\n}\n//# sourceMappingURL=math-utils.js.map","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as vec4 from 'gl-matrix/vec4';\nexport function createMat4() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function transformVector(matrix, vector) {\n  const result = vec4.transformMat4([], vector, matrix);\n  vec4.scale(result, result, 1 / result[3]);\n  return result;\n}\nexport function mod(value, divisor) {\n  const modulus = value % divisor;\n  return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function lerp(start, end, step) {\n  return step * end + (1 - step) * start;\n}\n\nfunction ieLog2(x) {\n  return Math.log(x) * Math.LOG2E;\n}\n\nexport const log2 = Math.log2 || ieLog2;\n//# sourceMappingURL=math-utils.js.map","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\n\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the source vector\r\n * @returns {vec2} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to floor\r\n * @returns {vec2} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec2} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to round\r\n * @returns {vec2} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {ReadonlyVec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to negate\r\n * @returns {vec2} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to invert\r\n * @returns {vec2} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the first operand\r\n * @param {ReadonlyVec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {ReadonlyVec2} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {ReadonlyVec2} a The vec2 point to rotate\r\n * @param {ReadonlyVec2} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec2} out\r\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {ReadonlyVec2} a The first operand\r\n * @param {ReadonlyVec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec2 to zero\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @returns {vec2} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec2} a The first vector.\r\n * @param {ReadonlyVec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || '@math.gl/web-mercator: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { createMat4, transformVector, log2 } from './math-utils';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nimport assert from './assert';\nconst PI = Math.PI;\nconst PI_4 = PI / 4;\nconst DEGREES_TO_RADIANS = PI / 180;\nconst RADIANS_TO_DEGREES = 180 / PI;\nconst TILE_SIZE = 512;\nconst EARTH_CIRCUMFERENCE = 40.03e6;\nexport const DEFAULT_ALTITUDE = 1.5;\nexport function zoomToScale(zoom) {\n  return Math.pow(2, zoom);\n}\nexport function scaleToZoom(scale) {\n  return log2(scale);\n}\nexport function lngLatToWorld([lng, lat]) {\n  assert(Number.isFinite(lng));\n  assert(Number.isFinite(lat) && lat >= -90 && lat <= 90, 'invalid latitude');\n  const lambda2 = lng * DEGREES_TO_RADIANS;\n  const phi2 = lat * DEGREES_TO_RADIANS;\n  const x = TILE_SIZE * (lambda2 + PI) / (2 * PI);\n  const y = TILE_SIZE * (PI + Math.log(Math.tan(PI_4 + phi2 * 0.5))) / (2 * PI);\n  return [x, y];\n}\nexport function worldToLngLat([x, y]) {\n  const lambda2 = x / TILE_SIZE * (2 * PI) - PI;\n  const phi2 = 2 * (Math.atan(Math.exp(y / TILE_SIZE * (2 * PI) - PI)) - PI_4);\n  return [lambda2 * RADIANS_TO_DEGREES, phi2 * RADIANS_TO_DEGREES];\n}\nexport function getMeterZoom({\n  latitude\n}) {\n  assert(Number.isFinite(latitude));\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return scaleToZoom(EARTH_CIRCUMFERENCE * latCosine) - 9;\n}\nexport function getDistanceScales({\n  latitude,\n  longitude,\n  highPrecision = false\n}) {\n  assert(Number.isFinite(latitude) && Number.isFinite(longitude));\n  const result = {};\n  const worldSize = TILE_SIZE;\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  const unitsPerDegreeX = worldSize / 360;\n  const unitsPerDegreeY = unitsPerDegreeX / latCosine;\n  const altUnitsPerMeter = worldSize / EARTH_CIRCUMFERENCE / latCosine;\n  result.unitsPerMeter = [altUnitsPerMeter, altUnitsPerMeter, altUnitsPerMeter];\n  result.metersPerUnit = [1 / altUnitsPerMeter, 1 / altUnitsPerMeter, 1 / altUnitsPerMeter];\n  result.unitsPerDegree = [unitsPerDegreeX, unitsPerDegreeY, altUnitsPerMeter];\n  result.degreesPerUnit = [1 / unitsPerDegreeX, 1 / unitsPerDegreeY, 1 / altUnitsPerMeter];\n\n  if (highPrecision) {\n    const latCosine2 = DEGREES_TO_RADIANS * Math.tan(latitude * DEGREES_TO_RADIANS) / latCosine;\n    const unitsPerDegreeY2 = unitsPerDegreeX * latCosine2 / 2;\n    const altUnitsPerDegree2 = worldSize / EARTH_CIRCUMFERENCE * latCosine2;\n    const altUnitsPerMeter2 = altUnitsPerDegree2 / unitsPerDegreeY * altUnitsPerMeter;\n    result.unitsPerDegree2 = [0, unitsPerDegreeY2, altUnitsPerDegree2];\n    result.unitsPerMeter2 = [altUnitsPerMeter2, 0, altUnitsPerMeter2];\n  }\n\n  return result;\n}\nexport function addMetersToLngLat(lngLatZ, xyz) {\n  const [longitude, latitude, z0] = lngLatZ;\n  const [x, y, z] = xyz;\n  const {\n    unitsPerMeter,\n    unitsPerMeter2\n  } = getDistanceScales({\n    longitude,\n    latitude,\n    highPrecision: true\n  });\n  const worldspace = lngLatToWorld(lngLatZ);\n  worldspace[0] += x * (unitsPerMeter[0] + unitsPerMeter2[0] * y);\n  worldspace[1] += y * (unitsPerMeter[1] + unitsPerMeter2[1] * y);\n  const newLngLat = worldToLngLat(worldspace);\n  const newZ = (z0 || 0) + (z || 0);\n  return Number.isFinite(z0) || Number.isFinite(z) ? [newLngLat[0], newLngLat[1], newZ] : newLngLat;\n}\nexport function getViewMatrix({\n  height,\n  pitch,\n  bearing,\n  altitude,\n  scale,\n  center = null\n}) {\n  const vm = createMat4();\n  mat4.translate(vm, vm, [0, 0, -altitude]);\n  mat4.rotateX(vm, vm, -pitch * DEGREES_TO_RADIANS);\n  mat4.rotateZ(vm, vm, bearing * DEGREES_TO_RADIANS);\n  scale /= height;\n  mat4.scale(vm, vm, [scale, scale, scale]);\n\n  if (center) {\n    mat4.translate(vm, vm, vec3.negate([], center));\n  }\n\n  return vm;\n}\nexport function getProjectionParameters({\n  width,\n  height,\n  fovy = altitudeToFovy(DEFAULT_ALTITUDE),\n  altitude,\n  pitch = 0,\n  nearZMultiplier = 1,\n  farZMultiplier = 1\n}) {\n  if (altitude !== undefined) {\n    fovy = altitudeToFovy(altitude);\n  }\n\n  const halfFov = 0.5 * fovy * DEGREES_TO_RADIANS;\n  const focalDistance = fovyToAltitude(fovy);\n  const pitchRadians = pitch * DEGREES_TO_RADIANS;\n  const topHalfSurfaceDistance = Math.sin(halfFov) * focalDistance / Math.sin(Math.min(Math.max(Math.PI / 2 - pitchRadians - halfFov, 0.01), Math.PI - 0.01));\n  const farZ = Math.sin(pitchRadians) * topHalfSurfaceDistance + focalDistance;\n  return {\n    fov: 2 * halfFov,\n    aspect: width / height,\n    focalDistance,\n    near: nearZMultiplier,\n    far: farZ * farZMultiplier\n  };\n}\nexport function getProjectionMatrix({\n  width,\n  height,\n  pitch,\n  altitude,\n  fovy,\n  nearZMultiplier,\n  farZMultiplier\n}) {\n  const {\n    fov,\n    aspect,\n    near,\n    far\n  } = getProjectionParameters({\n    width,\n    height,\n    altitude,\n    fovy,\n    pitch,\n    nearZMultiplier,\n    farZMultiplier\n  });\n  const projectionMatrix = mat4.perspective([], fov, aspect, near, far);\n  return projectionMatrix;\n}\nexport function altitudeToFovy(altitude) {\n  return 2 * Math.atan(0.5 / altitude) * RADIANS_TO_DEGREES;\n}\nexport function fovyToAltitude(fovy) {\n  return 0.5 / Math.tan(0.5 * fovy * DEGREES_TO_RADIANS);\n}\nexport function worldToPixels(xyz, pixelProjectionMatrix) {\n  const [x, y, z = 0] = xyz;\n  assert(Number.isFinite(x) && Number.isFinite(y) && Number.isFinite(z));\n  return transformVector(pixelProjectionMatrix, [x, y, z, 1]);\n}\nexport function pixelsToWorld(xyz, pixelUnprojectionMatrix, targetZ = 0) {\n  const [x, y, z] = xyz;\n  assert(Number.isFinite(x) && Number.isFinite(y), 'invalid pixel coordinate');\n\n  if (Number.isFinite(z)) {\n    const coord = transformVector(pixelUnprojectionMatrix, [x, y, z, 1]);\n    return coord;\n  }\n\n  const coord0 = transformVector(pixelUnprojectionMatrix, [x, y, 0, 1]);\n  const coord1 = transformVector(pixelUnprojectionMatrix, [x, y, 1, 1]);\n  const z0 = coord0[2];\n  const z1 = coord1[2];\n  const t = z0 === z1 ? 0 : ((targetZ || 0) - z0) / (z1 - z0);\n  return vec2.lerp([], coord0, coord1, t);\n}\n//# sourceMappingURL=web-mercator-utils.js.map","import WebMercatorViewport from './web-mercator-viewport';\nimport assert from './assert';\nimport { log2 } from './math-utils';\nexport default function fitBounds({\n  width,\n  height,\n  bounds,\n  minExtent = 0,\n  maxZoom = 24,\n  padding = 0,\n  offset = [0, 0]\n}) {\n  const [[west, south], [east, north]] = bounds;\n\n  if (Number.isFinite(padding)) {\n    const p = padding;\n    padding = {\n      top: p,\n      bottom: p,\n      left: p,\n      right: p\n    };\n  } else {\n    assert(Number.isFinite(padding.top) && Number.isFinite(padding.bottom) && Number.isFinite(padding.left) && Number.isFinite(padding.right));\n  }\n\n  const viewport = new WebMercatorViewport({\n    width,\n    height,\n    longitude: 0,\n    latitude: 0,\n    zoom: 0\n  });\n  const nw = viewport.project([west, north]);\n  const se = viewport.project([east, south]);\n  const size = [Math.max(Math.abs(se[0] - nw[0]), minExtent), Math.max(Math.abs(se[1] - nw[1]), minExtent)];\n  const targetSize = [width - padding.left - padding.right - Math.abs(offset[0]) * 2, height - padding.top - padding.bottom - Math.abs(offset[1]) * 2];\n  assert(targetSize[0] > 0 && targetSize[1] > 0);\n  const scaleX = targetSize[0] / size[0];\n  const scaleY = targetSize[1] / size[1];\n  const offsetX = (padding.right - padding.left) / 2 / scaleX;\n  const offsetY = (padding.bottom - padding.top) / 2 / scaleY;\n  const center = [(se[0] + nw[0]) / 2 + offsetX, (se[1] + nw[1]) / 2 + offsetY];\n  const centerLngLat = viewport.unproject(center);\n  const zoom = Math.min(maxZoom, viewport.zoom + log2(Math.abs(Math.min(scaleX, scaleY))));\n  assert(Number.isFinite(zoom));\n  return {\n    longitude: centerLngLat[0],\n    latitude: centerLngLat[1],\n    zoom\n  };\n}\n//# sourceMappingURL=fit-bounds.js.map","import { worldToLngLat } from './web-mercator-utils';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { transformVector } from './math-utils';\nconst DEGREES_TO_RADIANS = Math.PI / 180;\nexport default function getBounds(viewport, z = 0) {\n  const {\n    width,\n    height,\n    unproject\n  } = viewport;\n  const unprojectOps = {\n    targetZ: z\n  };\n  const bottomLeft = unproject([0, height], unprojectOps);\n  const bottomRight = unproject([width, height], unprojectOps);\n  let topLeft;\n  let topRight;\n  const halfFov = viewport.fovy ? 0.5 * viewport.fovy * DEGREES_TO_RADIANS : Math.atan(0.5 / viewport.altitude);\n  const angleToGround = (90 - viewport.pitch) * DEGREES_TO_RADIANS;\n\n  if (halfFov > angleToGround - 0.01) {\n    topLeft = unprojectOnFarPlane(viewport, 0, z);\n    topRight = unprojectOnFarPlane(viewport, width, z);\n  } else {\n    topLeft = unproject([0, 0], unprojectOps);\n    topRight = unproject([width, 0], unprojectOps);\n  }\n\n  return [bottomLeft, bottomRight, topRight, topLeft];\n}\n\nfunction unprojectOnFarPlane(viewport, x, targetZ) {\n  const {\n    pixelUnprojectionMatrix\n  } = viewport;\n  const coord0 = transformVector(pixelUnprojectionMatrix, [x, 0, 1, 1]);\n  const coord1 = transformVector(pixelUnprojectionMatrix, [x, viewport.height, 1, 1]);\n  const z = targetZ * viewport.distanceScales.unitsPerMeter[2];\n  const t = (z - coord0[2]) / (coord1[2] - coord0[2]);\n  const coord = vec2.lerp([], coord0, coord1, t);\n  const result = worldToLngLat(coord);\n  result[2] = targetZ;\n  return result;\n}\n//# sourceMappingURL=get-bounds.js.map","import { createMat4 } from './math-utils';\nimport { zoomToScale, pixelsToWorld, lngLatToWorld, worldToLngLat, worldToPixels, altitudeToFovy, fovyToAltitude, DEFAULT_ALTITUDE, getProjectionMatrix, getDistanceScales, getViewMatrix } from './web-mercator-utils';\nimport fitBounds from './fit-bounds';\nimport getBounds from './get-bounds';\nimport * as mat4 from 'gl-matrix/mat4';\nimport * as vec2 from 'gl-matrix/vec2';\nimport * as vec3 from 'gl-matrix/vec3';\nexport default class WebMercatorViewport {\n  constructor({\n    width,\n    height,\n    latitude = 0,\n    longitude = 0,\n    zoom = 0,\n    pitch = 0,\n    bearing = 0,\n    altitude = null,\n    fovy = null,\n    position = null,\n    nearZMultiplier = 0.02,\n    farZMultiplier = 1.01\n  } = {\n    width: 1,\n    height: 1\n  }) {\n    width = width || 1;\n    height = height || 1;\n\n    if (fovy === null && altitude === null) {\n      altitude = DEFAULT_ALTITUDE;\n      fovy = altitudeToFovy(altitude);\n    } else if (fovy === null) {\n      fovy = altitudeToFovy(altitude);\n    } else if (altitude === null) {\n      altitude = fovyToAltitude(fovy);\n    }\n\n    const scale = zoomToScale(zoom);\n    altitude = Math.max(0.75, altitude);\n    const distanceScales = getDistanceScales({\n      longitude,\n      latitude\n    });\n    const center = lngLatToWorld([longitude, latitude]);\n    center[2] = 0;\n\n    if (position) {\n      vec3.add(center, center, vec3.mul([], position, distanceScales.unitsPerMeter));\n    }\n\n    this.projectionMatrix = getProjectionMatrix({\n      width,\n      height,\n      pitch,\n      fovy,\n      nearZMultiplier,\n      farZMultiplier\n    });\n    this.viewMatrix = getViewMatrix({\n      height,\n      scale,\n      center,\n      pitch,\n      bearing,\n      altitude\n    });\n    this.width = width;\n    this.height = height;\n    this.scale = scale;\n    this.latitude = latitude;\n    this.longitude = longitude;\n    this.zoom = zoom;\n    this.pitch = pitch;\n    this.bearing = bearing;\n    this.altitude = altitude;\n    this.fovy = fovy;\n    this.center = center;\n    this.meterOffset = position || [0, 0, 0];\n    this.distanceScales = distanceScales;\n\n    this._initMatrices();\n\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    Object.freeze(this);\n  }\n\n  _initMatrices() {\n    const {\n      width,\n      height,\n      projectionMatrix,\n      viewMatrix\n    } = this;\n    const vpm = createMat4();\n    mat4.multiply(vpm, vpm, projectionMatrix);\n    mat4.multiply(vpm, vpm, viewMatrix);\n    this.viewProjectionMatrix = vpm;\n    const m = createMat4();\n    mat4.scale(m, m, [width / 2, -height / 2, 1]);\n    mat4.translate(m, m, [1, -1, 0]);\n    mat4.multiply(m, m, vpm);\n    const mInverse = mat4.invert(createMat4(), m);\n\n    if (!mInverse) {\n      throw new Error('Pixel project matrix not invertible');\n    }\n\n    this.pixelProjectionMatrix = m;\n    this.pixelUnprojectionMatrix = mInverse;\n  }\n\n  equals(viewport) {\n    if (!(viewport instanceof WebMercatorViewport)) {\n      return false;\n    }\n\n    return viewport.width === this.width && viewport.height === this.height && mat4.equals(viewport.projectionMatrix, this.projectionMatrix) && mat4.equals(viewport.viewMatrix, this.viewMatrix);\n  }\n\n  project(xyz, {\n    topLeft = true\n  } = {}) {\n    const worldPosition = this.projectPosition(xyz);\n    const coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n    const [x, y] = coord;\n    const y2 = topLeft ? y : this.height - y;\n    return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n  }\n\n  unproject(xyz, {\n    topLeft = true,\n    targetZ = undefined\n  } = {}) {\n    const [x, y, z] = xyz;\n    const y2 = topLeft ? y : this.height - y;\n    const targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n    const coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n    const [X, Y, Z] = this.unprojectPosition(coord);\n\n    if (Number.isFinite(z)) {\n      return [X, Y, Z];\n    }\n\n    return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n  }\n\n  projectPosition(xyz) {\n    const [X, Y] = lngLatToWorld(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n    return [X, Y, Z];\n  }\n\n  unprojectPosition(xyz) {\n    const [X, Y] = worldToLngLat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n    return [X, Y, Z];\n  }\n\n  projectFlat(lngLat) {\n    return lngLatToWorld(lngLat);\n  }\n\n  unprojectFlat(xy) {\n    return worldToLngLat(xy);\n  }\n\n  getMapCenterByLngLatPosition({\n    lngLat,\n    pos\n  }) {\n    const fromLocation = pixelsToWorld(pos, this.pixelUnprojectionMatrix);\n    const toLocation = lngLatToWorld(lngLat);\n    const translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n    const newCenter = vec2.add([], this.center, translate);\n    return worldToLngLat(newCenter);\n  }\n\n  getLocationAtPoint({\n    lngLat,\n    pos\n  }) {\n    return this.getMapCenterByLngLatPosition({\n      lngLat,\n      pos\n    });\n  }\n\n  fitBounds(bounds, options = {}) {\n    const {\n      width,\n      height\n    } = this;\n    const {\n      longitude,\n      latitude,\n      zoom\n    } = fitBounds(Object.assign({\n      width,\n      height,\n      bounds\n    }, options));\n    return new WebMercatorViewport({\n      width,\n      height,\n      longitude,\n      latitude,\n      zoom\n    });\n  }\n\n  getBounds(options) {\n    const corners = this.getBoundingRegion(options);\n    const west = Math.min(...corners.map(p => p[0]));\n    const east = Math.max(...corners.map(p => p[0]));\n    const south = Math.min(...corners.map(p => p[1]));\n    const north = Math.max(...corners.map(p => p[1]));\n    return [[west, south], [east, north]];\n  }\n\n  getBoundingRegion(options = {}) {\n    return getBounds(this, options.z || 0);\n  }\n\n}\n//# sourceMappingURL=web-mercator-viewport.js.map","import { worldToLngLat } from './web-mercator-utils';\nimport { mod, log2 } from './math-utils';\nconst TILE_SIZE = 512;\nexport default function normalizeViewportProps({\n  width,\n  height,\n  longitude,\n  latitude,\n  zoom,\n  pitch = 0,\n  bearing = 0\n}) {\n  if (longitude < -180 || longitude > 180) {\n    longitude = mod(longitude + 180, 360) - 180;\n  }\n\n  if (bearing < -180 || bearing > 180) {\n    bearing = mod(bearing + 180, 360) - 180;\n  }\n\n  const minZoom = log2(height / TILE_SIZE);\n\n  if (zoom <= minZoom) {\n    zoom = minZoom;\n    latitude = 0;\n  } else {\n    const halfHeightPixels = height / 2 / Math.pow(2, zoom);\n    const minLatitude = worldToLngLat([0, halfHeightPixels])[1];\n\n    if (latitude < minLatitude) {\n      latitude = minLatitude;\n    } else {\n      const maxLatitude = worldToLngLat([0, TILE_SIZE - halfHeightPixels])[1];\n\n      if (latitude > maxLatitude) {\n        latitude = maxLatitude;\n      }\n    }\n  }\n\n  return {\n    width,\n    height,\n    longitude,\n    latitude,\n    zoom,\n    pitch,\n    bearing\n  };\n}\n//# sourceMappingURL=normalize-viewport-props.js.map","import log from '../utils/log';\nexport const COORDINATE_SYSTEM = {\n  DEFAULT: -1,\n  LNGLAT: 1,\n  METER_OFFSETS: 2,\n  LNGLAT_OFFSETS: 3,\n  CARTESIAN: 0\n};\nObject.defineProperty(COORDINATE_SYSTEM, 'IDENTITY', {\n  get: () => log.deprecated('COORDINATE_SYSTEM.IDENTITY', 'COORDINATE_SYSTEM.CARTESIAN')() || 0\n});\nexport const PROJECTION_MODE = {\n  WEB_MERCATOR: 1,\n  GLOBE: 2,\n  WEB_MERCATOR_AUTO_OFFSET: 4,\n  IDENTITY: 0\n};\nexport const UNIT = {\n  common: 0,\n  meters: 1,\n  pixels: 2\n};\nexport const EVENTS = {\n  click: {\n    handler: 'onClick'\n  },\n  panstart: {\n    handler: 'onDragStart'\n  },\n  panmove: {\n    handler: 'onDrag'\n  },\n  panend: {\n    handler: 'onDragEnd'\n  }\n};\n//# sourceMappingURL=constants.js.map","import log from '../utils/log';\nimport { createMat4, getCameraPosition, getFrustumPlanes } from '../utils/math-utils';\nimport { Matrix4, Vector3, equals } from 'math.gl';\nimport * as mat4 from 'gl-matrix/mat4';\nimport { getDistanceScales, getMeterZoom, lngLatToWorld, worldToLngLat, worldToPixels, pixelsToWorld } from '@math.gl/web-mercator';\nimport { PROJECTION_MODE } from '../lib/constants';\nconst DEGREES_TO_RADIANS = Math.PI / 180;\nconst IDENTITY = createMat4();\nconst ZERO_VECTOR = [0, 0, 0];\nconst DEFAULT_ZOOM = 0;\nconst DEFAULT_DISTANCE_SCALES = {\n  unitsPerMeter: [1, 1, 1],\n  metersPerUnit: [1, 1, 1]\n};\nexport default class Viewport {\n  constructor(opts = {}) {\n    const {\n      id = null,\n      x = 0,\n      y = 0,\n      width = 1,\n      height = 1\n    } = opts;\n    this.id = id || this.constructor.displayName || 'viewport';\n    this.x = x;\n    this.y = y;\n    this.width = width || 1;\n    this.height = height || 1;\n    this._frustumPlanes = {};\n\n    this._initViewMatrix(opts);\n\n    this._initProjectionMatrix(opts);\n\n    this._initPixelMatrices();\n\n    this.equals = this.equals.bind(this);\n    this.project = this.project.bind(this);\n    this.unproject = this.unproject.bind(this);\n    this.projectPosition = this.projectPosition.bind(this);\n    this.unprojectPosition = this.unprojectPosition.bind(this);\n    this.projectFlat = this.projectFlat.bind(this);\n    this.unprojectFlat = this.unprojectFlat.bind(this);\n  }\n\n  get metersPerPixel() {\n    return this.distanceScales.metersPerUnit[2] / this.scale;\n  }\n\n  get projectionMode() {\n    if (this.isGeospatial) {\n      return this.zoom < 12 ? PROJECTION_MODE.WEB_MERCATOR : PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET;\n    }\n\n    return PROJECTION_MODE.IDENTITY;\n  }\n\n  equals(viewport) {\n    if (!(viewport instanceof Viewport)) {\n      return false;\n    }\n\n    if (this === viewport) {\n      return true;\n    }\n\n    return viewport.width === this.width && viewport.height === this.height && viewport.scale === this.scale && equals(viewport.projectionMatrix, this.projectionMatrix) && equals(viewport.viewMatrix, this.viewMatrix);\n  }\n\n  project(xyz, {\n    topLeft = true\n  } = {}) {\n    const worldPosition = this.projectPosition(xyz);\n    const coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n    const [x, y] = coord;\n    const y2 = topLeft ? y : this.height - y;\n    return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n  }\n\n  unproject(xyz, {\n    topLeft = true,\n    targetZ\n  } = {}) {\n    const [x, y, z] = xyz;\n    const y2 = topLeft ? y : this.height - y;\n    const targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n    const coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n    const [X, Y, Z] = this.unprojectPosition(coord);\n\n    if (Number.isFinite(z)) {\n      return [X, Y, Z];\n    }\n\n    return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n  }\n\n  projectPosition(xyz) {\n    const [X, Y] = this.projectFlat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n    return [X, Y, Z];\n  }\n\n  unprojectPosition(xyz) {\n    const [X, Y] = this.unprojectFlat(xyz);\n    const Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n    return [X, Y, Z];\n  }\n\n  projectFlat(xyz) {\n    if (this.isGeospatial) {\n      return lngLatToWorld(xyz);\n    }\n\n    return xyz;\n  }\n\n  unprojectFlat(xyz) {\n    if (this.isGeospatial) {\n      return worldToLngLat(xyz);\n    }\n\n    return xyz;\n  }\n\n  getBounds(options = {}) {\n    const unprojectOption = {\n      targetZ: options.z || 0\n    };\n    const topLeft = this.unproject([0, 0], unprojectOption);\n    const topRight = this.unproject([this.width, 0], unprojectOption);\n    const bottomLeft = this.unproject([0, this.height], unprojectOption);\n    const bottomRight = this.unproject([this.width, this.height], unprojectOption);\n    return [Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]), Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]), Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1])];\n  }\n\n  getDistanceScales(coordinateOrigin = null) {\n    if (coordinateOrigin) {\n      return getDistanceScales({\n        longitude: coordinateOrigin[0],\n        latitude: coordinateOrigin[1],\n        highPrecision: true\n      });\n    }\n\n    return this.distanceScales;\n  }\n\n  containsPixel({\n    x,\n    y,\n    width = 1,\n    height = 1\n  }) {\n    return x < this.x + this.width && this.x < x + width && y < this.y + this.height && this.y < y + height;\n  }\n\n  getFrustumPlanes() {\n    if (this._frustumPlanes.near) {\n      return this._frustumPlanes;\n    }\n\n    Object.assign(this._frustumPlanes, getFrustumPlanes(this.viewProjectionMatrix));\n    return this._frustumPlanes;\n  }\n\n  panByPosition(coords, pixel) {\n    return null;\n  }\n\n  getCameraPosition() {\n    return this.cameraPosition;\n  }\n\n  getCameraDirection() {\n    return this.cameraDirection;\n  }\n\n  getCameraUp() {\n    return this.cameraUp;\n  }\n\n  _createProjectionMatrix({\n    orthographic,\n    fovyRadians,\n    aspect,\n    focalDistance,\n    near,\n    far\n  }) {\n    return orthographic ? new Matrix4().orthographic({\n      fovy: fovyRadians,\n      aspect,\n      focalDistance,\n      near,\n      far\n    }) : new Matrix4().perspective({\n      fovy: fovyRadians,\n      aspect,\n      near,\n      far\n    });\n  }\n\n  _initViewMatrix(opts) {\n    const {\n      viewMatrix = IDENTITY,\n      longitude = null,\n      latitude = null,\n      zoom = null,\n      position = null,\n      modelMatrix = null,\n      focalDistance = 1,\n      distanceScales = null\n    } = opts;\n    this.isGeospatial = Number.isFinite(latitude) && Number.isFinite(longitude);\n    this.zoom = zoom;\n\n    if (!Number.isFinite(this.zoom)) {\n      this.zoom = this.isGeospatial ? getMeterZoom({\n        latitude\n      }) + Math.log2(focalDistance) : DEFAULT_ZOOM;\n    }\n\n    const scale = Math.pow(2, this.zoom);\n    this.scale = scale;\n    this.distanceScales = this.isGeospatial ? getDistanceScales({\n      latitude,\n      longitude\n    }) : distanceScales || DEFAULT_DISTANCE_SCALES;\n    this.focalDistance = focalDistance;\n    this.distanceScales.metersPerUnit = new Vector3(this.distanceScales.metersPerUnit);\n    this.distanceScales.unitsPerMeter = new Vector3(this.distanceScales.unitsPerMeter);\n    this.position = ZERO_VECTOR;\n    this.meterOffset = ZERO_VECTOR;\n\n    if (position) {\n      this.position = position;\n      this.modelMatrix = modelMatrix;\n      this.meterOffset = modelMatrix ? modelMatrix.transformVector(position) : position;\n    }\n\n    if (this.isGeospatial) {\n      this.longitude = longitude;\n      this.latitude = latitude;\n      this.center = this._getCenterInWorld({\n        longitude,\n        latitude\n      });\n    } else {\n      this.center = position ? this.projectPosition(position) : [0, 0, 0];\n    }\n\n    this.viewMatrixUncentered = viewMatrix;\n    this.viewMatrix = new Matrix4().multiplyRight(this.viewMatrixUncentered).translate(new Vector3(this.center || ZERO_VECTOR).negate());\n  }\n\n  _getCenterInWorld({\n    longitude,\n    latitude\n  }) {\n    const {\n      meterOffset,\n      distanceScales\n    } = this;\n    const center = new Vector3(this.projectPosition([longitude, latitude, 0]));\n\n    if (meterOffset) {\n      const commonPosition = new Vector3(meterOffset).scale(distanceScales.unitsPerMeter);\n      center.add(commonPosition);\n    }\n\n    return center;\n  }\n\n  _initProjectionMatrix(opts) {\n    const {\n      projectionMatrix = null,\n      orthographic = false,\n      fovyRadians,\n      fovy = 75,\n      near = 0.1,\n      far = 1000,\n      focalDistance = 1\n    } = opts;\n    this.projectionMatrix = projectionMatrix || this._createProjectionMatrix({\n      orthographic,\n      fovyRadians: fovyRadians || fovy * DEGREES_TO_RADIANS,\n      aspect: this.width / this.height,\n      focalDistance,\n      near,\n      far\n    });\n  }\n\n  _initPixelMatrices() {\n    const vpm = createMat4();\n    mat4.multiply(vpm, vpm, this.projectionMatrix);\n    mat4.multiply(vpm, vpm, this.viewMatrix);\n    this.viewProjectionMatrix = vpm;\n    this.viewMatrixInverse = mat4.invert([], this.viewMatrix) || this.viewMatrix;\n    this.cameraPosition = getCameraPosition(this.viewMatrixInverse);\n    const viewportMatrix = createMat4();\n    const pixelProjectionMatrix = createMat4();\n    mat4.scale(viewportMatrix, viewportMatrix, [this.width / 2, -this.height / 2, 1]);\n    mat4.translate(viewportMatrix, viewportMatrix, [1, -1, 0]);\n    mat4.multiply(pixelProjectionMatrix, viewportMatrix, this.viewProjectionMatrix);\n    this.pixelProjectionMatrix = pixelProjectionMatrix;\n    this.viewportMatrix = viewportMatrix;\n    this.pixelUnprojectionMatrix = mat4.invert(createMat4(), this.pixelProjectionMatrix);\n\n    if (!this.pixelUnprojectionMatrix) {\n      log.warn('Pixel project matrix not invertible')();\n    }\n  }\n\n}\nViewport.displayName = 'Viewport';\n//# sourceMappingURL=viewport.js.map","export const VERTEX_SHADER = 'vs';\nexport const FRAGMENT_SHADER = 'fs';\n//# sourceMappingURL=constants.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'shadertools: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","const TYPE_DEFINITIONS = {\n  number: {\n    validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n\n  },\n  array: {\n    validate(value, propType) {\n      return Array.isArray(value) || ArrayBuffer.isView(value);\n    }\n\n  }\n};\nexport function parsePropTypes(propDefs) {\n  const propTypes = {};\n\n  for (const propName in propDefs) {\n    const propDef = propDefs[propName];\n    const propType = parsePropType(propDef);\n    propTypes[propName] = propType;\n  }\n\n  return propTypes;\n}\n\nfunction parsePropType(propDef) {\n  let type = getTypeOf(propDef);\n\n  if (type === 'object') {\n    if (!propDef) {\n      return {\n        type: 'object',\n        value: null\n      };\n    }\n\n    if ('type' in propDef) {\n      return Object.assign({}, propDef, TYPE_DEFINITIONS[propDef.type]);\n    }\n\n    if (!('value' in propDef)) {\n      return {\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    type = getTypeOf(propDef.value);\n    return Object.assign({\n      type\n    }, propDef, TYPE_DEFINITIONS[type]);\n  }\n\n  return Object.assign({\n    type,\n    value: propDef\n  }, TYPE_DEFINITIONS[type]);\n}\n\nfunction getTypeOf(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return 'array';\n  }\n\n  return typeof value;\n}\n//# sourceMappingURL=prop-types.js.map","import { assert } from '../utils';\nimport { parsePropTypes } from './filters/prop-types';\nconst VERTEX_SHADER = 'vs';\nconst FRAGMENT_SHADER = 'fs';\nexport default class ShaderModule {\n  constructor({\n    name,\n    vs,\n    fs,\n    dependencies = [],\n    uniforms,\n    getUniforms,\n    deprecations = [],\n    defines = {},\n    inject = {},\n    vertexShader,\n    fragmentShader\n  }) {\n    assert(typeof name === 'string');\n    this.name = name;\n    this.vs = vs || vertexShader;\n    this.fs = fs || fragmentShader;\n    this.getModuleUniforms = getUniforms;\n    this.dependencies = dependencies;\n    this.deprecations = this._parseDeprecationDefinitions(deprecations);\n    this.defines = defines;\n    this.injections = normalizeInjections(inject);\n\n    if (uniforms) {\n      this.uniforms = parsePropTypes(uniforms);\n    }\n  }\n\n  getModuleSource(type) {\n    let moduleSource;\n\n    switch (type) {\n      case VERTEX_SHADER:\n        moduleSource = this.vs || '';\n        break;\n\n      case FRAGMENT_SHADER:\n        moduleSource = this.fs || '';\n        break;\n\n      default:\n        assert(false);\n    }\n\n    return `\\\n#define MODULE_${this.name.toUpperCase().replace(/[^0-9a-z]/gi, '_')}\n${moduleSource}\\\n// END MODULE_${this.name}\n\n`;\n  }\n\n  getUniforms(opts, uniforms) {\n    if (this.getModuleUniforms) {\n      return this.getModuleUniforms(opts, uniforms);\n    }\n\n    if (this.uniforms) {\n      return this._defaultGetUniforms(opts);\n    }\n\n    return {};\n  }\n\n  getDefines() {\n    return this.defines;\n  }\n\n  checkDeprecations(shaderSource, log) {\n    this.deprecations.forEach(def => {\n      if (def.regex.test(shaderSource)) {\n        if (def.deprecated) {\n          log.deprecated(def.old, def.new)();\n        } else {\n          log.removed(def.old, def.new)();\n        }\n      }\n    });\n  }\n\n  _parseDeprecationDefinitions(deprecations) {\n    deprecations.forEach(def => {\n      switch (def.type) {\n        case 'function':\n          def.regex = new RegExp(`\\\\b${def.old}\\\\(`);\n          break;\n\n        default:\n          def.regex = new RegExp(`${def.type} ${def.old};`);\n      }\n    });\n    return deprecations;\n  }\n\n  _defaultGetUniforms(opts = {}) {\n    const uniforms = {};\n    const propTypes = this.uniforms;\n\n    for (const key in propTypes) {\n      const propDef = propTypes[key];\n\n      if (key in opts && !propDef.private) {\n        if (propDef.validate) {\n          assert(propDef.validate(opts[key], propDef), `${this.name}: invalid ${key}`);\n        }\n\n        uniforms[key] = opts[key];\n      } else {\n        uniforms[key] = propDef.value;\n      }\n    }\n\n    return uniforms;\n  }\n\n}\nexport function normalizeShaderModule(module) {\n  if (!module.normalized) {\n    module.normalized = true;\n\n    if (module.uniforms && !module.getUniforms) {\n      const shaderModule = new ShaderModule(module);\n      module.getUniforms = shaderModule.getUniforms.bind(shaderModule);\n    }\n  }\n\n  return module;\n}\n\nfunction normalizeInjections(injections) {\n  const result = {\n    vs: {},\n    fs: {}\n  };\n\n  for (const hook in injections) {\n    let injection = injections[hook];\n    const stage = hook.slice(0, 2);\n\n    if (typeof injection === 'string') {\n      injection = {\n        order: 0,\n        injection\n      };\n    }\n\n    result[stage][hook] = injection;\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader-module.js.map","import ShaderModule from './shader-module';\nimport { assert } from '../utils';\nexport function resolveModules(modules) {\n  return getShaderDependencies(instantiateModules(modules));\n}\n\nfunction getShaderDependencies(modules) {\n  const moduleMap = {};\n  const moduleDepth = {};\n  getDependencyGraph({\n    modules,\n    level: 0,\n    moduleMap,\n    moduleDepth\n  });\n  return Object.keys(moduleDepth).sort((a, b) => moduleDepth[b] - moduleDepth[a]).map(name => moduleMap[name]);\n}\n\nfunction getDependencyGraph({\n  modules,\n  level,\n  moduleMap,\n  moduleDepth\n}) {\n  if (level >= 5) {\n    throw new Error('Possible loop in shader dependency graph');\n  }\n\n  for (const module of modules) {\n    moduleMap[module.name] = module;\n\n    if (moduleDepth[module.name] === undefined || moduleDepth[module.name] < level) {\n      moduleDepth[module.name] = level;\n    }\n  }\n\n  for (const module of modules) {\n    if (module.dependencies) {\n      getDependencyGraph({\n        modules: module.dependencies,\n        level: level + 1,\n        moduleMap,\n        moduleDepth\n      });\n    }\n  }\n}\n\nfunction instantiateModules(modules, seen) {\n  return modules.map(module => {\n    if (module instanceof ShaderModule) {\n      return module;\n    }\n\n    assert(typeof module !== 'string', `Shader module use by name is deprecated. Import shader module '${module}' and use it directly.`);\n    assert(module.name, 'shader module has no name');\n    module = new ShaderModule(module);\n    module.dependencies = instantiateModules(module.dependencies);\n    return module;\n  });\n}\n\nexport const TEST_EXPORTS = {\n  getShaderDependencies,\n  getDependencyGraph\n};\n//# sourceMappingURL=resolve-modules.js.map","export default function isOldIE(opts = {}) {\n  const navigator = typeof window !== 'undefined' ? window.navigator || {} : {};\n  const userAgent = opts.userAgent || navigator.userAgent || '';\n  const isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  const isTrident = userAgent.indexOf('Trident/') !== -1;\n  return isMSIE || isTrident;\n}\n//# sourceMappingURL=is-old-ie.js.map","import isOldIE from './is-old-ie';\nimport assert from './assert';\nconst GL_VENDOR = 0x1f00;\nconst GL_RENDERER = 0x1f01;\nconst GL_VERSION = 0x1f02;\nconst GL_SHADING_LANGUAGE_VERSION = 0x8b8c;\nconst WEBGL_FEATURES = {\n  GLSL_FRAG_DATA: ['WEBGL_draw_buffers', true],\n  GLSL_FRAG_DEPTH: ['EXT_frag_depth', true],\n  GLSL_DERIVATIVES: ['OES_standard_derivatives', true],\n  GLSL_TEXTURE_LOD: ['EXT_shader_texture_lod', true]\n};\nconst FEATURES = {};\nObject.keys(WEBGL_FEATURES).forEach(key => {\n  FEATURES[key] = key;\n});\nexport { FEATURES };\n\nfunction isWebGL2(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return true;\n  }\n\n  return Boolean(gl && gl._version === 2);\n}\n\nexport function getContextInfo(gl) {\n  const info = gl.getExtension('WEBGL_debug_renderer_info');\n  const vendor = gl.getParameter(info && info.UNMASKED_VENDOR_WEBGL || GL_VENDOR);\n  const renderer = gl.getParameter(info && info.UNMASKED_RENDERER_WEBGL || GL_RENDERER);\n  const gpuVendor = identifyGPUVendor(vendor, renderer);\n  const gpuInfo = {\n    gpuVendor,\n    vendor,\n    renderer,\n    version: gl.getParameter(GL_VERSION),\n    shadingLanguageVersion: gl.getParameter(GL_SHADING_LANGUAGE_VERSION)\n  };\n  return gpuInfo;\n}\n\nfunction identifyGPUVendor(vendor, renderer) {\n  if (vendor.match(/NVIDIA/i) || renderer.match(/NVIDIA/i)) {\n    return 'NVIDIA';\n  }\n\n  if (vendor.match(/INTEL/i) || renderer.match(/INTEL/i)) {\n    return 'INTEL';\n  }\n\n  if (vendor.match(/AMD/i) || renderer.match(/AMD/i) || vendor.match(/ATI/i) || renderer.match(/ATI/i)) {\n    return 'AMD';\n  }\n\n  return 'UNKNOWN GPU';\n}\n\nconst compiledGlslExtensions = {};\nexport function canCompileGLGSExtension(gl, cap, opts = {}) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n\n  if (!isOldIE(opts)) {\n    return true;\n  }\n\n  if (cap in compiledGlslExtensions) {\n    return compiledGlslExtensions[cap];\n  }\n\n  const extensionName = feature[0];\n  const behavior = opts.behavior || 'enable';\n  const source = `#extension GL_${extensionName} : ${behavior}\\nvoid main(void) {}`;\n  const shader = gl.createShader(35633);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  const canCompile = gl.getShaderParameter(shader, 35713);\n  gl.deleteShader(shader);\n  compiledGlslExtensions[cap] = canCompile;\n  return canCompile;\n}\n\nfunction getFeature(gl, cap) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  const extensionName = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n  const value = typeof extensionName === 'string' ? Boolean(gl.getExtension(extensionName)) : extensionName;\n  assert(value === false || value === true);\n  return value;\n}\n\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(feature => getFeature(gl, feature));\n}\n//# sourceMappingURL=webgl-info.js.map","import { getContextInfo, hasFeatures, canCompileGLGSExtension, FEATURES } from '../utils/webgl-info';\nexport function getPlatformShaderDefines(gl) {\n  const debugInfo = getContextInfo(gl);\n\n  switch (debugInfo.gpuVendor.toLowerCase()) {\n    case 'nvidia':\n      return `\\\n#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n`;\n\n    case 'intel':\n      return `\\\n#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n`;\n\n    case 'amd':\n      return `\\\n#define AMD_GPU\n`;\n\n    default:\n      return `\\\n#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n`;\n  }\n}\nexport function getVersionDefines(gl, glslVersion, isFragment) {\n  let versionDefines = `\\\n#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n`;\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DEPTH)) {\n    versionDefines += `\\\n\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n`;\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_DERIVATIVES) && canCompileGLGSExtension(gl, FEATURES.GLSL_DERIVATIVES)) {\n    versionDefines += `\\\n\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n`;\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_FRAG_DATA) && canCompileGLGSExtension(gl, FEATURES.GLSL_FRAG_DATA, {\n    behavior: 'require'\n  })) {\n    versionDefines += `\\\n\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n`;\n  }\n\n  if (hasFeatures(gl, FEATURES.GLSL_TEXTURE_LOD)) {\n    versionDefines += `\\\n// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n`;\n  }\n\n  return versionDefines;\n}\n//# sourceMappingURL=platform-defines.js.map","export const MODULE_INJECTORS_VS = `\\\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n`;\nexport const MODULE_INJECTORS_FS = `\\\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n`;\n//# sourceMappingURL=module-injectors.js.map","import { MODULE_INJECTORS_VS, MODULE_INJECTORS_FS } from '../modules/module-injectors';\nimport { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { assert } from '../utils';\nconst MODULE_INJECTORS = {\n  [VERTEX_SHADER]: MODULE_INJECTORS_VS,\n  [FRAGMENT_SHADER]: MODULE_INJECTORS_FS\n};\nexport const DECLARATION_INJECT_MARKER = '__LUMA_INJECT_DECLARATIONS__';\nconst REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nconst REGEX_END_OF_MAIN = /}\\n?[^{}]*$/;\nconst fragments = [];\nexport default function injectShader(source, type, inject, injectStandardStubs = false) {\n  const isVertex = type === VERTEX_SHADER;\n\n  for (const key in inject) {\n    const fragmentData = inject[key];\n    fragmentData.sort((a, b) => a.order - b.order);\n    fragments.length = fragmentData.length;\n\n    for (let i = 0, len = fragmentData.length; i < len; ++i) {\n      fragments[i] = fragmentData[i].injection;\n    }\n\n    const fragmentString = `${fragments.join('\\n')}\\n`;\n\n    switch (key) {\n      case 'vs:#decl':\n        if (isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-start':\n        if (isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, match => match + fragmentString);\n        }\n\n        break;\n\n      case 'vs:#main-end':\n        if (isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, match => fragmentString + match);\n        }\n\n        break;\n\n      case 'fs:#decl':\n        if (!isVertex) {\n          source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-start':\n        if (!isVertex) {\n          source = source.replace(REGEX_START_OF_MAIN, match => match + fragmentString);\n        }\n\n        break;\n\n      case 'fs:#main-end':\n        if (!isVertex) {\n          source = source.replace(REGEX_END_OF_MAIN, match => fragmentString + match);\n        }\n\n        break;\n\n      default:\n        source = source.replace(key, match => match + fragmentString);\n    }\n  }\n\n  source = source.replace(DECLARATION_INJECT_MARKER, '');\n\n  if (injectStandardStubs) {\n    source = source.replace(/\\}\\s*$/, match => match + MODULE_INJECTORS[type]);\n  }\n\n  return source;\n}\nexport function combineInjects(injects) {\n  const result = {};\n  assert(Array.isArray(injects) && injects.length > 1);\n  injects.forEach(inject => {\n    for (const key in inject) {\n      result[key] = result[key] ? `${result[key]}\\n${inject[key]}` : inject[key];\n    }\n  });\n  return result;\n}\n//# sourceMappingURL=inject-shader.js.map","function testVariable(qualifier) {\n  return new RegExp(`\\\\b${qualifier}[ \\\\t]+(\\\\w+[ \\\\t]+\\\\w+(\\\\[\\\\w+\\\\])?;)`, 'g');\n}\n\nconst ES300_REPLACEMENTS = [[/^(#version[ \\t]+(100|300[ \\t]+es))?[ \\t]*\\n/, '#version 300 es\\n'], [/\\btexture(2D|2DProj|Cube)Lod(EXT)?\\(/g, 'textureLod('], [/\\btexture(2D|2DProj|Cube)(EXT)?\\(/g, 'texture(']];\nconst ES300_VERTEX_REPLACEMENTS = [...ES300_REPLACEMENTS, [testVariable('attribute'), 'in $1'], [testVariable('varying'), 'out $1']];\nconst ES300_FRAGMENT_REPLACEMENTS = [...ES300_REPLACEMENTS, [testVariable('varying'), 'in $1']];\nconst ES100_REPLACEMENTS = [[/^#version[ \\t]+300[ \\t]+es/, '#version 100'], [/\\btexture(2D|2DProj|Cube)Lod\\(/g, 'texture$1LodEXT('], [/\\btexture\\(/g, 'texture2D('], [/\\btextureLod\\(/g, 'texture2DLodEXT(']];\nconst ES100_VERTEX_REPLACEMENTS = [...ES100_REPLACEMENTS, [testVariable('in'), 'attribute $1'], [testVariable('out'), 'varying $1']];\nconst ES100_FRAGMENT_REPLACEMENTS = [...ES100_REPLACEMENTS, [testVariable('in'), 'varying $1']];\nconst ES100_FRAGMENT_OUTPUT_NAME = 'gl_FragColor';\nconst ES300_FRAGMENT_OUTPUT_REGEX = /\\bout[ \\t]+vec4[ \\t]+(\\w+)[ \\t]*;\\n?/;\nconst REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/;\nexport default function transpileShader(source, targetGLSLVersion, isVertex) {\n  switch (targetGLSLVersion) {\n    case 300:\n      return isVertex ? convertShader(source, ES300_VERTEX_REPLACEMENTS) : convertFragmentShaderTo300(source);\n\n    case 100:\n      return isVertex ? convertShader(source, ES100_VERTEX_REPLACEMENTS) : convertFragmentShaderTo100(source);\n\n    default:\n      throw new Error(`unknown GLSL version ${targetGLSLVersion}`);\n  }\n}\n\nfunction convertShader(source, replacements) {\n  for (const [pattern, replacement] of replacements) {\n    source = source.replace(pattern, replacement);\n  }\n\n  return source;\n}\n\nfunction convertFragmentShaderTo300(source) {\n  source = convertShader(source, ES300_FRAGMENT_REPLACEMENTS);\n  const outputMatch = source.match(ES300_FRAGMENT_OUTPUT_REGEX);\n\n  if (outputMatch) {\n    const outputName = outputMatch[1];\n    source = source.replace(new RegExp(`\\\\b${ES100_FRAGMENT_OUTPUT_NAME}\\\\b`, 'g'), outputName);\n  } else {\n    const outputName = 'fragmentColor';\n    source = source.replace(REGEX_START_OF_MAIN, match => `out vec4 ${outputName};\\n${match}`).replace(new RegExp(`\\\\b${ES100_FRAGMENT_OUTPUT_NAME}\\\\b`, 'g'), outputName);\n  }\n\n  return source;\n}\n\nfunction convertFragmentShaderTo100(source) {\n  source = convertShader(source, ES100_FRAGMENT_REPLACEMENTS);\n  const outputMatch = source.match(ES300_FRAGMENT_OUTPUT_REGEX);\n\n  if (outputMatch) {\n    const outputName = outputMatch[1];\n    source = source.replace(ES300_FRAGMENT_OUTPUT_REGEX, '').replace(new RegExp(`\\\\b${outputName}\\\\b`, 'g'), ES100_FRAGMENT_OUTPUT_NAME);\n  }\n\n  return source;\n}\n//# sourceMappingURL=transpile-shader.js.map","import { VERTEX_SHADER, FRAGMENT_SHADER } from './constants';\nimport { resolveModules } from './resolve-modules';\nimport { getPlatformShaderDefines, getVersionDefines } from './platform-defines';\nimport injectShader, { DECLARATION_INJECT_MARKER } from './inject-shader';\nimport transpileShader from './transpile-shader';\nimport { assert } from '../utils';\nconst INJECT_SHADER_DECLARATIONS = `\\n\\n${DECLARATION_INJECT_MARKER}\\n\\n`;\nconst SHADER_TYPE = {\n  [VERTEX_SHADER]: 'vertex',\n  [FRAGMENT_SHADER]: 'fragment'\n};\nconst FRAGMENT_SHADER_PROLOGUE = `\\\nprecision highp float;\n\n`;\nexport function assembleShaders(gl, opts) {\n  const {\n    vs,\n    fs\n  } = opts;\n  const modules = resolveModules(opts.modules || []);\n  return {\n    gl,\n    vs: assembleShader(gl, Object.assign({}, opts, {\n      source: vs,\n      type: VERTEX_SHADER,\n      modules\n    })),\n    fs: assembleShader(gl, Object.assign({}, opts, {\n      source: fs,\n      type: FRAGMENT_SHADER,\n      modules\n    })),\n    getUniforms: assembleGetUniforms(modules)\n  };\n}\n\nfunction assembleShader(gl, {\n  id,\n  source,\n  type,\n  modules,\n  defines = {},\n  hookFunctions = [],\n  inject = {},\n  transpileToGLSL100 = false,\n  prologue = true,\n  log\n}) {\n  assert(typeof source === 'string', 'shader source must be a string');\n  const isVertex = type === VERTEX_SHADER;\n  const sourceLines = source.split('\\n');\n  let glslVersion = 100;\n  let versionLine = '';\n  let coreSource = source;\n\n  if (sourceLines[0].indexOf('#version ') === 0) {\n    glslVersion = 300;\n    versionLine = sourceLines[0];\n    coreSource = sourceLines.slice(1).join('\\n');\n  } else {\n    versionLine = `#version ${glslVersion}`;\n  }\n\n  const allDefines = {};\n  modules.forEach(module => {\n    Object.assign(allDefines, module.getDefines());\n  });\n  Object.assign(allDefines, defines);\n  let assembledSource = prologue ? `\\\n${versionLine}\n${getShaderName({\n    id,\n    source,\n    type\n  })}\n${getShaderType({\n    type\n  })}\n${getPlatformShaderDefines(gl)}\n${getVersionDefines(gl, glslVersion, !isVertex)}\n${getApplicationDefines(allDefines)}\n${isVertex ? '' : FRAGMENT_SHADER_PROLOGUE}\n` : `${versionLine}\n`;\n  const hookFunctionMap = normalizeHookFunctions(hookFunctions);\n  const hookInjections = {};\n  const declInjections = {};\n  const mainInjections = {};\n\n  for (const key in inject) {\n    const injection = typeof inject[key] === 'string' ? {\n      injection: inject[key],\n      order: 0\n    } : inject[key];\n    const match = key.match(/^(v|f)s:(#)?([\\w-]+)$/);\n\n    if (match) {\n      const hash = match[2];\n      const name = match[3];\n\n      if (hash) {\n        if (name === 'decl') {\n          declInjections[key] = [injection];\n        } else {\n          mainInjections[key] = [injection];\n        }\n      } else {\n        hookInjections[key] = [injection];\n      }\n    } else {\n      mainInjections[key] = [injection];\n    }\n  }\n\n  for (const module of modules) {\n    if (log) {\n      module.checkDeprecations(coreSource, log);\n    }\n\n    const moduleSource = module.getModuleSource(type, glslVersion);\n    assembledSource += moduleSource;\n    const injections = module.injections[type];\n\n    for (const key in injections) {\n      const match = key.match(/^(v|f)s:#([\\w-]+)$/);\n\n      if (match) {\n        const name = match[2];\n        const injectionType = name === 'decl' ? declInjections : mainInjections;\n        injectionType[key] = injectionType[key] || [];\n        injectionType[key].push(injections[key]);\n      } else {\n        hookInjections[key] = hookInjections[key] || [];\n        hookInjections[key].push(injections[key]);\n      }\n    }\n  }\n\n  assembledSource += INJECT_SHADER_DECLARATIONS;\n  assembledSource = injectShader(assembledSource, type, declInjections);\n  assembledSource += getHookFunctions(hookFunctionMap[type], hookInjections);\n  assembledSource += coreSource;\n  assembledSource = injectShader(assembledSource, type, mainInjections);\n  assembledSource = transpileShader(assembledSource, transpileToGLSL100 ? 100 : glslVersion, isVertex);\n  return assembledSource;\n}\n\nfunction assembleGetUniforms(modules) {\n  return function getUniforms(opts) {\n    const uniforms = {};\n\n    for (const module of modules) {\n      const moduleUniforms = module.getUniforms(opts, uniforms);\n      Object.assign(uniforms, moduleUniforms);\n    }\n\n    return uniforms;\n  };\n}\n\nfunction getShaderType({\n  type\n}) {\n  return `\n#define SHADER_TYPE_${SHADER_TYPE[type].toUpperCase()}\n`;\n}\n\nfunction getShaderName({\n  id,\n  source,\n  type\n}) {\n  const injectShaderName = id && typeof id === 'string' && source.indexOf('SHADER_NAME') === -1;\n  return injectShaderName ? `\n#define SHADER_NAME ${id}_${SHADER_TYPE[type]}\n\n` : '';\n}\n\nfunction getApplicationDefines(defines = {}) {\n  let count = 0;\n  let sourceText = '';\n\n  for (const define in defines) {\n    if (count === 0) {\n      sourceText += '\\n// APPLICATION DEFINES\\n';\n    }\n\n    count++;\n    const value = defines[define];\n\n    if (value || Number.isFinite(value)) {\n      sourceText += `#define ${define.toUpperCase()} ${defines[define]}\\n`;\n    }\n  }\n\n  if (count === 0) {\n    sourceText += '\\n';\n  }\n\n  return sourceText;\n}\n\nfunction getHookFunctions(hookFunctions, hookInjections) {\n  let result = '';\n\n  for (const hookName in hookFunctions) {\n    const hookFunction = hookFunctions[hookName];\n    result += `void ${hookFunction.signature} {\\n`;\n\n    if (hookFunction.header) {\n      result += `  ${hookFunction.header}`;\n    }\n\n    if (hookInjections[hookName]) {\n      const injections = hookInjections[hookName];\n      injections.sort((a, b) => a.order - b.order);\n\n      for (const injection of injections) {\n        result += `  ${injection.injection}\\n`;\n      }\n    }\n\n    if (hookFunction.footer) {\n      result += `  ${hookFunction.footer}`;\n    }\n\n    result += '}\\n';\n  }\n\n  return result;\n}\n\nfunction normalizeHookFunctions(hookFunctions) {\n  const result = {\n    vs: {},\n    fs: {}\n  };\n  hookFunctions.forEach(hook => {\n    let opts;\n\n    if (typeof hook !== 'string') {\n      opts = hook;\n      hook = opts.hook;\n    } else {\n      opts = {};\n    }\n\n    hook = hook.trim();\n    const [stage, signature] = hook.split(':');\n    const name = hook.replace(/\\(.+/, '');\n    result[stage][name] = Object.assign(opts, {\n      signature\n    });\n  });\n  return result;\n}\n//# sourceMappingURL=assemble-shaders.js.map","import { Log } from 'probe.gl';\nexport const log = new Log({\n  id: 'luma.gl'\n});\n//# sourceMappingURL=log.js.map","export function cssToDeviceRatio(gl) {\n  const {\n    luma\n  } = gl;\n\n  if (gl.canvas && luma) {\n    const {\n      clientWidth\n    } = luma.canvasSizeInfo;\n    return clientWidth ? gl.drawingBufferWidth / clientWidth : 1;\n  }\n\n  return 1;\n}\nexport function cssToDevicePixels(gl, cssPixel, yInvert = true) {\n  const ratio = cssToDeviceRatio(gl);\n  const width = gl.drawingBufferWidth;\n  const height = gl.drawingBufferHeight;\n  return scalePixels(cssPixel, ratio, width, height, yInvert);\n}\nexport function getDevicePixelRatio(useDevicePixels) {\n  const windowRatio = typeof window === 'undefined' ? 1 : window.devicePixelRatio || 1;\n\n  if (Number.isFinite(useDevicePixels)) {\n    return useDevicePixels <= 0 ? 1 : useDevicePixels;\n  }\n\n  return useDevicePixels ? windowRatio : 1;\n}\n\nfunction scalePixels(pixel, ratio, width, height, yInvert) {\n  const x = scaleX(pixel[0], ratio, width);\n  let y = scaleY(pixel[1], ratio, height, yInvert);\n  let t = scaleX(pixel[0] + 1, ratio, width);\n  const xHigh = t === width - 1 ? t : t - 1;\n  t = scaleY(pixel[1] + 1, ratio, height, yInvert);\n  let yHigh;\n\n  if (yInvert) {\n    t = t === 0 ? t : t + 1;\n    yHigh = y;\n    y = t;\n  } else {\n    yHigh = t === height - 1 ? t : t - 1;\n  }\n\n  return {\n    x,\n    y,\n    width: Math.max(xHigh - x + 1, 1),\n    height: Math.max(yHigh - y + 1, 1)\n  };\n}\n\nfunction scaleX(x, ratio, width) {\n  const r = Math.min(Math.round(x * ratio), width - 1);\n  return r;\n}\n\nfunction scaleY(y, ratio, height, yInvert) {\n  return yInvert ? Math.max(0, height - 1 - Math.round(y * ratio)) : Math.min(Math.round(y * ratio), height - 1);\n}\n//# sourceMappingURL=device-pixels.js.map","import { global, isBrowser as getIsBrowser } from 'probe.gl/env';\nimport { trackContextState } from '../state-tracker/track-context-state';\nimport { log } from '../utils/log';\nimport { assert } from '../utils/assert';\nimport { getDevicePixelRatio } from '../utils/device-pixels';\nimport { isWebGL2 } from '../utils/webgl-checks';\nconst isBrowser = getIsBrowser();\nconst isPage = isBrowser && typeof document !== 'undefined';\nconst CONTEXT_DEFAULTS = {\n  webgl2: true,\n  webgl1: true,\n  throwOnError: true,\n  manageState: true,\n  canvas: null,\n  debug: false,\n  width: 800,\n  height: 600\n};\nexport function createGLContext(options = {}) {\n  assert(isBrowser, \"createGLContext only available in the browser.\\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils\");\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  const {\n    width,\n    height\n  } = options;\n\n  function onError(message) {\n    if (options.throwOnError) {\n      throw new Error(message);\n    }\n\n    console.error(message);\n    return null;\n  }\n\n  options.onError = onError;\n  let gl;\n  const {\n    canvas\n  } = options;\n  const targetCanvas = getCanvas({\n    canvas,\n    width,\n    height,\n    onError\n  });\n  gl = createBrowserContext(targetCanvas, options);\n\n  if (!gl) {\n    return null;\n  }\n\n  gl = instrumentGLContext(gl, options);\n  logInfo(gl);\n  return gl;\n}\nexport function instrumentGLContext(gl, options = {}) {\n  if (!gl || gl._instrumented) {\n    return gl;\n  }\n\n  gl._version = gl._version || getVersion(gl);\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  options = Object.assign({}, CONTEXT_DEFAULTS, options);\n  const {\n    manageState,\n    debug\n  } = options;\n\n  if (manageState) {\n    trackContextState(gl, {\n      copyState: false,\n      log: (...args) => log.log(1, ...args)()\n    });\n  }\n\n  if (isBrowser && debug) {\n    if (!global.makeDebugContext) {\n      log.warn('WebGL debug mode not activated. import \"@luma.gl/debug\" to enable.')();\n    } else {\n      gl = global.makeDebugContext(gl, options);\n      log.level = Math.max(log.level, 1);\n    }\n  }\n\n  gl._instrumented = true;\n  return gl;\n}\nexport function getContextDebugInfo(gl) {\n  const vendorMasked = gl.getParameter(7936);\n  const rendererMasked = gl.getParameter(7937);\n  const ext = gl.getExtension('WEBGL_debug_renderer_info');\n  const vendorUnmasked = ext && gl.getParameter(ext.UNMASKED_VENDOR_WEBGL || 7936);\n  const rendererUnmasked = ext && gl.getParameter(ext.UNMASKED_RENDERER_WEBGL || 7937);\n  return {\n    vendor: vendorUnmasked || vendorMasked,\n    renderer: rendererUnmasked || rendererMasked,\n    vendorMasked,\n    rendererMasked,\n    version: gl.getParameter(7938),\n    shadingLanguageVersion: gl.getParameter(35724)\n  };\n}\nexport function resizeGLContext(gl, options = {}) {\n  if (gl.canvas) {\n    const devicePixelRatio = getDevicePixelRatio(options.useDevicePixels);\n    setDevicePixelRatio(gl, devicePixelRatio, options);\n    return;\n  }\n\n  const ext = gl.getExtension('STACKGL_resize_drawingbuffer');\n\n  if (ext && `width` in options && `height` in options) {\n    ext.resize(options.width, options.height);\n  }\n}\n\nfunction createBrowserContext(canvas, options) {\n  const {\n    onError\n  } = options;\n  let errorMessage = null;\n\n  const onCreateError = error => errorMessage = error.statusMessage || errorMessage;\n\n  canvas.addEventListener('webglcontextcreationerror', onCreateError, false);\n  const {\n    webgl1 = true,\n    webgl2 = true\n  } = options;\n  let gl = null;\n\n  if (webgl2) {\n    gl = gl || canvas.getContext('webgl2', options);\n    gl = gl || canvas.getContext('experimental-webgl2', options);\n  }\n\n  if (webgl1) {\n    gl = gl || canvas.getContext('webgl', options);\n    gl = gl || canvas.getContext('experimental-webgl', options);\n  }\n\n  canvas.removeEventListener('webglcontextcreationerror', onCreateError, false);\n\n  if (!gl) {\n    return onError(`Failed to create ${webgl2 && !webgl1 ? 'WebGL2' : 'WebGL'} context: ${errorMessage || 'Unknown error'}`);\n  }\n\n  if (options.onContextLost) {\n    canvas.addEventListener('webglcontextlost', options.onContextLost, false);\n  }\n\n  if (options.onContextRestored) {\n    canvas.addEventListener('webglcontextrestored', options.onContextRestored, false);\n  }\n\n  return gl;\n}\n\nfunction getCanvas({\n  canvas,\n  width = 800,\n  height = 600,\n  onError\n}) {\n  let targetCanvas;\n\n  if (typeof canvas === 'string') {\n    const isPageLoaded = isPage && document.readyState === 'complete';\n\n    if (!isPageLoaded) {\n      onError(`createGLContext called on canvas '${canvas}' before page was loaded`);\n    }\n\n    targetCanvas = document.getElementById(canvas);\n  } else if (canvas) {\n    targetCanvas = canvas;\n  } else {\n    targetCanvas = document.createElement('canvas');\n    targetCanvas.id = 'lumagl-canvas';\n    targetCanvas.style.width = Number.isFinite(width) ? `${width}px` : '100%';\n    targetCanvas.style.height = Number.isFinite(height) ? `${height}px` : '100%';\n    document.body.insertBefore(targetCanvas, document.body.firstChild);\n  }\n\n  return targetCanvas;\n}\n\nfunction logInfo(gl) {\n  const webGL = isWebGL2(gl) ? 'WebGL2' : 'WebGL1';\n  const info = getContextDebugInfo(gl);\n  const driver = info ? `(${info.vendor},${info.renderer})` : '';\n  const debug = gl.debug ? ' debug' : '';\n  log.info(1, `${webGL}${debug} context ${driver}`)();\n}\n\nfunction getVersion(gl) {\n  if (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) {\n    return 2;\n  }\n\n  return 1;\n}\n\nfunction setDevicePixelRatio(gl, devicePixelRatio, options) {\n  let clientWidth = 'width' in options ? options.width : gl.canvas.clientWidth;\n  let clientHeight = 'height' in options ? options.height : gl.canvas.clientHeight;\n\n  if (!clientWidth || !clientHeight) {\n    log.log(1, 'Canvas clientWidth/clientHeight is 0')();\n    devicePixelRatio = 1;\n    clientWidth = gl.canvas.width || 1;\n    clientHeight = gl.canvas.height || 1;\n  }\n\n  gl.luma = gl.luma || {};\n  gl.luma.canvasSizeInfo = gl.luma.canvasSizeInfo || {};\n  const cachedSize = gl.luma.canvasSizeInfo;\n\n  if (cachedSize.clientWidth !== clientWidth || cachedSize.clientHeight !== clientHeight || cachedSize.devicePixelRatio !== devicePixelRatio) {\n    let clampedPixelRatio = devicePixelRatio;\n    const canvasWidth = Math.floor(clientWidth * clampedPixelRatio);\n    const canvasHeight = Math.floor(clientHeight * clampedPixelRatio);\n    gl.canvas.width = canvasWidth;\n    gl.canvas.height = canvasHeight;\n\n    if (gl.drawingBufferWidth !== canvasWidth || gl.drawingBufferHeight !== canvasHeight) {\n      log.warn(`Device pixel ratio clamped`)();\n      clampedPixelRatio = Math.min(gl.drawingBufferWidth / clientWidth, gl.drawingBufferHeight / clientHeight);\n      gl.canvas.width = Math.floor(clientWidth * clampedPixelRatio);\n      gl.canvas.height = Math.floor(clientHeight * clampedPixelRatio);\n    }\n\n    Object.assign(gl.luma.canvasSizeInfo, {\n      clientWidth,\n      clientHeight,\n      devicePixelRatio\n    });\n  }\n}\n//# sourceMappingURL=context.js.map","import { log } from '@luma.gl/gltools';\nimport { Stats } from 'probe.gl';\nimport { isBrowser, global } from 'probe.gl/env';\nconst VERSION = typeof \"8.5.10\" !== 'undefined' ? \"8.5.10\" : 'untranspiled source';\nconst STARTUP_MESSAGE = 'set luma.log.level=1 (or higher) to trace rendering';\n\nclass StatsManager {\n  constructor() {\n    this.stats = new Map();\n  }\n\n  get(name) {\n    if (!this.stats.has(name)) {\n      this.stats.set(name, new Stats({\n        id: name\n      }));\n    }\n\n    return this.stats.get(name);\n  }\n\n}\n\nconst lumaStats = new StatsManager();\n\nif (global.luma && global.luma.VERSION !== VERSION) {\n  throw new Error(`luma.gl - multiple VERSIONs detected: ${global.luma.VERSION} vs ${VERSION}`);\n}\n\nif (!global.luma) {\n  if (isBrowser()) {\n    log.log(1, `luma.gl ${VERSION} - ${STARTUP_MESSAGE}`)();\n  }\n\n  global.luma = global.luma || {\n    VERSION,\n    version: VERSION,\n    log,\n    stats: lumaStats,\n    globals: {\n      modules: {},\n      nodeIO: {}\n    }\n  };\n}\n\nexport { lumaStats };\nexport default global.luma;\n//# sourceMappingURL=init.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'luma.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import { assert } from '../utils/assert';\nexport function getKeyValue(gl, name) {\n  if (typeof name !== 'string') {\n    return name;\n  }\n\n  const number = Number(name);\n\n  if (!isNaN(number)) {\n    return number;\n  }\n\n  name = name.replace(/^.*\\./, '');\n  const value = gl[name];\n  assert(value !== undefined, `Accessing undefined constant GL.${name}`);\n  return value;\n}\nexport function getKey(gl, value) {\n  value = Number(value);\n\n  for (const key in gl) {\n    if (gl[key] === value) {\n      return `GL.${key}`;\n    }\n  }\n\n  return String(value);\n}\nexport function getKeyType(gl, value) {\n  assert(value !== undefined, 'undefined key');\n  value = Number(value);\n\n  for (const key in gl) {\n    if (gl[key] === value) {\n      return `GL.${key}`;\n    }\n  }\n\n  return String(value);\n}\n//# sourceMappingURL=constants-to-keys.js.map","import { assert } from './assert';\nconst uidCounters = {};\nexport function uid(id = 'id') {\n  uidCounters[id] = uidCounters[id] || 1;\n  const count = uidCounters[id]++;\n  return `${id}-${count}`;\n}\nexport function isPowerOfTwo(n) {\n  assert(typeof n === 'number', 'Input must be a number');\n  return n && (n & n - 1) === 0;\n}\nexport function isObjectEmpty(obj) {\n  let isEmpty = true;\n\n  for (const key in obj) {\n    isEmpty = false;\n    break;\n  }\n\n  return isEmpty;\n}\n//# sourceMappingURL=utils.js.map","import { log } from '@luma.gl/gltools';\nexport function stubRemovedMethods(instance, className, version, methodNames) {\n  const upgradeMessage = `See luma.gl ${version} Upgrade Guide at \\\nhttps://luma.gl/docs/upgrade-guide`;\n  const prototype = Object.getPrototypeOf(instance);\n  methodNames.forEach(methodName => {\n    if (prototype.methodName) {\n      return;\n    }\n\n    prototype[methodName] = () => {\n      log.removed(`Calling removed method ${className}.${methodName}: `, upgradeMessage)();\n      throw new Error(methodName);\n    };\n  });\n}\n//# sourceMappingURL=stub-methods.js.map","import { isWebGL2, assertWebGLContext } from '@luma.gl/gltools';\nimport { lumaStats } from '../init';\nimport { getKey, getKeyValue } from '../webgl-utils/constants-to-keys';\nimport { assert } from '../utils/assert';\nimport { uid } from '../utils/utils';\nimport { stubRemovedMethods } from '../utils/stub-methods';\nconst ERR_RESOURCE_METHOD_UNDEFINED = 'Resource subclass must define virtual methods';\nexport default class Resource {\n  constructor(gl, opts = {}) {\n    assertWebGLContext(gl);\n    const {\n      id,\n      userData = {}\n    } = opts;\n    this.gl = gl;\n    this.gl2 = gl;\n    this.id = id || uid(this.constructor.name);\n    this.userData = userData;\n    this._bound = false;\n    this._handle = opts.handle;\n\n    if (this._handle === undefined) {\n      this._handle = this._createHandle();\n    }\n\n    this.byteLength = 0;\n\n    this._addStats();\n  }\n\n  toString() {\n    return `${this.constructor.name}(${this.id})`;\n  }\n\n  get handle() {\n    return this._handle;\n  }\n\n  delete({\n    deleteChildren = false\n  } = {}) {\n    const children = this._handle && this._deleteHandle(this._handle);\n\n    if (this._handle) {\n      this._removeStats();\n    }\n\n    this._handle = null;\n\n    if (children && deleteChildren) {\n      children.filter(Boolean).forEach(child => child.delete());\n    }\n\n    return this;\n  }\n\n  bind(funcOrHandle = this.handle) {\n    if (typeof funcOrHandle !== 'function') {\n      this._bindHandle(funcOrHandle);\n\n      return this;\n    }\n\n    let value;\n\n    if (!this._bound) {\n      this._bindHandle(this.handle);\n\n      this._bound = true;\n      value = funcOrHandle();\n      this._bound = false;\n\n      this._bindHandle(null);\n    } else {\n      value = funcOrHandle();\n    }\n\n    return value;\n  }\n\n  unbind() {\n    this.bind(null);\n  }\n\n  getParameter(pname, opts = {}) {\n    pname = getKeyValue(this.gl, pname);\n    assert(pname);\n    const parameters = this.constructor.PARAMETERS || {};\n    const parameter = parameters[pname];\n\n    if (parameter) {\n      const isWebgl2 = isWebGL2(this.gl);\n      const parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (!parameterAvailable) {\n        const webgl1Default = parameter.webgl1;\n        const webgl2Default = 'webgl2' in parameter ? parameter.webgl2 : parameter.webgl1;\n        const defaultValue = isWebgl2 ? webgl2Default : webgl1Default;\n        return defaultValue;\n      }\n    }\n\n    return this._getParameter(pname, opts);\n  }\n\n  getParameters(options = {}) {\n    const {\n      parameters,\n      keys\n    } = options;\n    const PARAMETERS = this.constructor.PARAMETERS || {};\n    const isWebgl2 = isWebGL2(this.gl);\n    const values = {};\n    const parameterKeys = parameters || Object.keys(PARAMETERS);\n\n    for (const pname of parameterKeys) {\n      const parameter = PARAMETERS[pname];\n      const parameterAvailable = parameter && (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (parameterAvailable) {\n        const key = keys ? getKey(this.gl, pname) : pname;\n        values[key] = this.getParameter(pname, options);\n\n        if (keys && parameter.type === 'GLenum') {\n          values[key] = getKey(this.gl, values[key]);\n        }\n      }\n    }\n\n    return values;\n  }\n\n  setParameter(pname, value) {\n    pname = getKeyValue(this.gl, pname);\n    assert(pname);\n    const parameters = this.constructor.PARAMETERS || {};\n    const parameter = parameters[pname];\n\n    if (parameter) {\n      const isWebgl2 = isWebGL2(this.gl);\n      const parameterAvailable = (!('webgl2' in parameter) || isWebgl2) && (!('extension' in parameter) || this.gl.getExtension(parameter.extension));\n\n      if (!parameterAvailable) {\n        throw new Error('Parameter not available on this platform');\n      }\n\n      if (parameter.type === 'GLenum') {\n        value = getKeyValue(value);\n      }\n    }\n\n    this._setParameter(pname, value);\n\n    return this;\n  }\n\n  setParameters(parameters) {\n    for (const pname in parameters) {\n      this.setParameter(pname, parameters[pname]);\n    }\n\n    return this;\n  }\n\n  stubRemovedMethods(className, version, methodNames) {\n    return stubRemovedMethods(this, className, version, methodNames);\n  }\n\n  initialize(opts) {}\n\n  _createHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _deleteHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _bindHandle(handle) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _getOptsFromHandle() {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _getParameter(pname, opts) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _setParameter(pname, value) {\n    throw new Error(ERR_RESOURCE_METHOD_UNDEFINED);\n  }\n\n  _context() {\n    this.gl.luma = this.gl.luma || {};\n    return this.gl.luma;\n  }\n\n  _addStats() {\n    const name = this.constructor.name;\n    const stats = lumaStats.get('Resource Counts');\n    stats.get('Resources Created').incrementCount();\n    stats.get(`${name}s Created`).incrementCount();\n    stats.get(`${name}s Active`).incrementCount();\n  }\n\n  _removeStats() {\n    const name = this.constructor.name;\n    const stats = lumaStats.get('Resource Counts');\n    stats.get(`${name}s Active`).decrementCount();\n  }\n\n  _trackAllocatedMemory(bytes, name = this.constructor.name) {\n    const stats = lumaStats.get('Memory Usage');\n    stats.get('GPU Memory').addCount(bytes);\n    stats.get(`${name} Memory`).addCount(bytes);\n    this.byteLength = bytes;\n  }\n\n  _trackDeallocatedMemory(name = this.constructor.name) {\n    const stats = lumaStats.get('Memory Usage');\n    stats.get('GPU Memory').subtractCount(this.byteLength);\n    stats.get(`${name} Memory`).subtractCount(this.byteLength);\n    this.byteLength = 0;\n  }\n\n}\n//# sourceMappingURL=resource.js.map","const ERR_TYPE_DEDUCTION = 'Failed to deduce GL constant from typed array';\nexport function getGLTypeFromTypedArray(arrayOrType) {\n  const type = ArrayBuffer.isView(arrayOrType) ? arrayOrType.constructor : arrayOrType;\n\n  switch (type) {\n    case Float32Array:\n      return 5126;\n\n    case Uint16Array:\n      return 5123;\n\n    case Uint32Array:\n      return 5125;\n\n    case Uint8Array:\n      return 5121;\n\n    case Uint8ClampedArray:\n      return 5121;\n\n    case Int8Array:\n      return 5120;\n\n    case Int16Array:\n      return 5122;\n\n    case Int32Array:\n      return 5124;\n\n    default:\n      throw new Error(ERR_TYPE_DEDUCTION);\n  }\n}\nexport function getTypedArrayFromGLType(glType, {\n  clamped = true\n} = {}) {\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return clamped ? Uint8ClampedArray : Uint8Array;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Failed to deduce typed array type from GL constant');\n  }\n}\nexport function flipRows({\n  data,\n  width,\n  height,\n  bytesPerPixel = 4,\n  temp\n}) {\n  const bytesPerRow = width * bytesPerPixel;\n  temp = temp || new Uint8Array(bytesPerRow);\n\n  for (let y = 0; y < height / 2; ++y) {\n    const topOffset = y * bytesPerRow;\n    const bottomOffset = (height - y - 1) * bytesPerRow;\n    temp.set(data.subarray(topOffset, topOffset + bytesPerRow));\n    data.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow);\n    data.set(temp, bottomOffset);\n  }\n}\nexport function scalePixels({\n  data,\n  width,\n  height\n}) {\n  const newWidth = Math.round(width / 2);\n  const newHeight = Math.round(height / 2);\n  const newData = new Uint8Array(newWidth * newHeight * 4);\n\n  for (let y = 0; y < newHeight; y++) {\n    for (let x = 0; x < newWidth; x++) {\n      for (let c = 0; c < 4; c++) {\n        newData[(y * newWidth + x) * 4 + c] = data[(y * 2 * width + x * 2) * 4 + c];\n      }\n    }\n  }\n\n  return {\n    data: newData,\n    width: newWidth,\n    height: newHeight\n  };\n}\n//# sourceMappingURL=typed-array-utils.js.map","import { log } from '@luma.gl/gltools';\nexport function checkProps(className, props, propChecks) {\n  const {\n    removedProps = {},\n    deprecatedProps = {},\n    replacedProps = {}\n  } = propChecks;\n\n  for (const propName in removedProps) {\n    if (propName in props) {\n      const replacementProp = removedProps[propName];\n      const replacement = replacementProp ? `${className}.${removedProps[propName]}` : 'N/A';\n      log.removed(`${className}.${propName}`, replacement)();\n    }\n  }\n\n  for (const propName in deprecatedProps) {\n    if (propName in props) {\n      const replacementProp = deprecatedProps[propName];\n      log.deprecated(`${className}.${propName}`, `${className}.${replacementProp}`)();\n    }\n  }\n\n  let newProps = null;\n\n  for (const propName in replacedProps) {\n    if (propName in props) {\n      const replacementProp = replacedProps[propName];\n      log.deprecated(`${className}.${propName}`, `${className}.${replacementProp}`)();\n      newProps = newProps || Object.assign({}, props);\n      newProps[replacementProp] = props[propName];\n      delete newProps[propName];\n    }\n  }\n\n  return newProps || props;\n}\n//# sourceMappingURL=check-props.js.map","import { getTypedArrayFromGLType } from '../webgl-utils/typed-array-utils';\nimport { assert } from '../utils/assert';\nimport { checkProps } from '../utils/check-props';\nconst DEFAULT_ACCESSOR_VALUES = {\n  offset: 0,\n  stride: 0,\n  type: 5126,\n  size: 1,\n  divisor: 0,\n  normalized: false,\n  integer: false\n};\nconst PROP_CHECKS = {\n  deprecatedProps: {\n    instanced: 'divisor',\n    isInstanced: 'divisor'\n  }\n};\nexport default class Accessor {\n  static getBytesPerElement(accessor) {\n    const ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n    return ArrayType.BYTES_PER_ELEMENT;\n  }\n\n  static getBytesPerVertex(accessor) {\n    assert(accessor.size);\n    const ArrayType = getTypedArrayFromGLType(accessor.type || 5126);\n    return ArrayType.BYTES_PER_ELEMENT * accessor.size;\n  }\n\n  static resolve(...accessors) {\n    return new Accessor(...[DEFAULT_ACCESSOR_VALUES, ...accessors]);\n  }\n\n  constructor(...accessors) {\n    accessors.forEach(accessor => this._assign(accessor));\n    Object.freeze(this);\n  }\n\n  toString() {\n    return JSON.stringify(this);\n  }\n\n  get BYTES_PER_ELEMENT() {\n    return Accessor.getBytesPerElement(this);\n  }\n\n  get BYTES_PER_VERTEX() {\n    return Accessor.getBytesPerVertex(this);\n  }\n\n  _assign(props = {}) {\n    props = checkProps('Accessor', props, PROP_CHECKS);\n\n    if (props.type !== undefined) {\n      this.type = props.type;\n\n      if (props.type === 5124 || props.type === 5125) {\n        this.integer = true;\n      }\n    }\n\n    if (props.size !== undefined) {\n      this.size = props.size;\n    }\n\n    if (props.offset !== undefined) {\n      this.offset = props.offset;\n    }\n\n    if (props.stride !== undefined) {\n      this.stride = props.stride;\n    }\n\n    if (props.normalized !== undefined) {\n      this.normalized = props.normalized;\n    }\n\n    if (props.integer !== undefined) {\n      this.integer = props.integer;\n    }\n\n    if (props.divisor !== undefined) {\n      this.divisor = props.divisor;\n    }\n\n    if (props.buffer !== undefined) {\n      this.buffer = props.buffer;\n    }\n\n    if (props.index !== undefined) {\n      if (typeof props.index === 'boolean') {\n        this.index = props.index ? 1 : 0;\n      } else {\n        this.index = props.index;\n      }\n    }\n\n    if (props.instanced !== undefined) {\n      this.divisor = props.instanced ? 1 : 0;\n    }\n\n    if (props.isInstanced !== undefined) {\n      this.divisor = props.isInstanced ? 1 : 0;\n    }\n\n    return this;\n  }\n\n}\nexport { DEFAULT_ACCESSOR_VALUES };\n//# sourceMappingURL=accessor.js.map","import Resource from './resource';\nimport Accessor from './accessor';\nimport { getGLTypeFromTypedArray, getTypedArrayFromGLType } from '../webgl-utils/typed-array-utils';\nimport { assertWebGL2Context, log } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nimport { checkProps } from '../utils/check-props';\nconst DEBUG_DATA_LENGTH = 10;\nconst DEPRECATED_PROPS = {\n  offset: 'accessor.offset',\n  stride: 'accessor.stride',\n  type: 'accessor.type',\n  size: 'accessor.size',\n  divisor: 'accessor.divisor',\n  normalized: 'accessor.normalized',\n  integer: 'accessor.integer',\n  instanced: 'accessor.divisor',\n  isInstanced: 'accessor.divisor'\n};\nconst PROP_CHECKS_INITIALIZE = {\n  removedProps: {},\n  replacedProps: {\n    bytes: 'byteLength'\n  },\n  deprecatedProps: DEPRECATED_PROPS\n};\nconst PROP_CHECKS_SET_PROPS = {\n  removedProps: DEPRECATED_PROPS\n};\nexport default class Buffer extends Resource {\n  constructor(gl, props = {}) {\n    super(gl, props);\n    this.stubRemovedMethods('Buffer', 'v6.0', ['layout', 'setLayout', 'getIndexedParameter']);\n    this.target = props.target || (this.gl.webgl2 ? 36662 : 34962);\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  getElementCount(accessor = this.accessor) {\n    return Math.round(this.byteLength / Accessor.getBytesPerElement(accessor));\n  }\n\n  getVertexCount(accessor = this.accessor) {\n    return Math.round(this.byteLength / Accessor.getBytesPerVertex(accessor));\n  }\n\n  initialize(props = {}) {\n    if (ArrayBuffer.isView(props)) {\n      props = {\n        data: props\n      };\n    }\n\n    if (Number.isFinite(props)) {\n      props = {\n        byteLength: props\n      };\n    }\n\n    props = checkProps('Buffer', props, PROP_CHECKS_INITIALIZE);\n    this.usage = props.usage || 35044;\n    this.debugData = null;\n    this.setAccessor(Object.assign({}, props, props.accessor));\n\n    if (props.data) {\n      this._setData(props.data, props.offset, props.byteLength);\n    } else {\n      this._setByteLength(props.byteLength || 0);\n    }\n\n    return this;\n  }\n\n  setProps(props) {\n    props = checkProps('Buffer', props, PROP_CHECKS_SET_PROPS);\n\n    if ('accessor' in props) {\n      this.setAccessor(props.accessor);\n    }\n\n    return this;\n  }\n\n  setAccessor(accessor) {\n    accessor = Object.assign({}, accessor);\n    delete accessor.buffer;\n    this.accessor = new Accessor(accessor);\n    return this;\n  }\n\n  reallocate(byteLength) {\n    if (byteLength > this.byteLength) {\n      this._setByteLength(byteLength);\n\n      return true;\n    }\n\n    this.bytesUsed = byteLength;\n    return false;\n  }\n\n  setData(props) {\n    return this.initialize(props);\n  }\n\n  subData(props) {\n    if (ArrayBuffer.isView(props)) {\n      props = {\n        data: props\n      };\n    }\n\n    const {\n      data,\n      offset = 0,\n      srcOffset = 0\n    } = props;\n    const byteLength = props.byteLength || props.length;\n    assert(data);\n    const target = this.gl.webgl2 ? 36663 : this.target;\n    this.gl.bindBuffer(target, this.handle);\n\n    if (srcOffset !== 0 || byteLength !== undefined) {\n      assertWebGL2Context(this.gl);\n      this.gl.bufferSubData(this.target, offset, data, srcOffset, byteLength);\n    } else {\n      this.gl.bufferSubData(target, offset, data);\n    }\n\n    this.gl.bindBuffer(target, null);\n    this.debugData = null;\n\n    this._inferType(data);\n\n    return this;\n  }\n\n  copyData({\n    sourceBuffer,\n    readOffset = 0,\n    writeOffset = 0,\n    size\n  }) {\n    const {\n      gl\n    } = this;\n    assertWebGL2Context(gl);\n    gl.bindBuffer(36662, sourceBuffer.handle);\n    gl.bindBuffer(36663, this.handle);\n    gl.copyBufferSubData(36662, 36663, readOffset, writeOffset, size);\n    gl.bindBuffer(36662, null);\n    gl.bindBuffer(36663, null);\n    this.debugData = null;\n    return this;\n  }\n\n  getData({\n    dstData = null,\n    srcByteOffset = 0,\n    dstOffset = 0,\n    length = 0\n  } = {}) {\n    assertWebGL2Context(this.gl);\n    const ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n      clamped: false\n    });\n\n    const sourceAvailableElementCount = this._getAvailableElementCount(srcByteOffset);\n\n    const dstElementOffset = dstOffset;\n    let dstAvailableElementCount;\n    let dstElementCount;\n\n    if (dstData) {\n      dstElementCount = dstData.length;\n      dstAvailableElementCount = dstElementCount - dstElementOffset;\n    } else {\n      dstAvailableElementCount = Math.min(sourceAvailableElementCount, length || sourceAvailableElementCount);\n      dstElementCount = dstElementOffset + dstAvailableElementCount;\n    }\n\n    const copyElementCount = Math.min(sourceAvailableElementCount, dstAvailableElementCount);\n    length = length || copyElementCount;\n    assert(length <= copyElementCount);\n    dstData = dstData || new ArrayType(dstElementCount);\n    this.gl.bindBuffer(36662, this.handle);\n    this.gl.getBufferSubData(36662, srcByteOffset, dstData, dstOffset, length);\n    this.gl.bindBuffer(36662, null);\n    return dstData;\n  }\n\n  bind({\n    target = this.target,\n    index = this.accessor && this.accessor.index,\n    offset = 0,\n    size\n  } = {}) {\n    if (target === 35345 || target === 35982) {\n      if (size !== undefined) {\n        this.gl.bindBufferRange(target, index, this.handle, offset, size);\n      } else {\n        assert(offset === 0);\n        this.gl.bindBufferBase(target, index, this.handle);\n      }\n    } else {\n      this.gl.bindBuffer(target, this.handle);\n    }\n\n    return this;\n  }\n\n  unbind({\n    target = this.target,\n    index = this.accessor && this.accessor.index\n  } = {}) {\n    const isIndexedBuffer = target === 35345 || target === 35982;\n\n    if (isIndexedBuffer) {\n      this.gl.bindBufferBase(target, index, null);\n    } else {\n      this.gl.bindBuffer(target, null);\n    }\n\n    return this;\n  }\n\n  getDebugData() {\n    if (!this.debugData) {\n      this.debugData = this.getData({\n        length: Math.min(DEBUG_DATA_LENGTH, this.byteLength)\n      });\n      return {\n        data: this.debugData,\n        changed: true\n      };\n    }\n\n    return {\n      data: this.debugData,\n      changed: false\n    };\n  }\n\n  invalidateDebugData() {\n    this.debugData = null;\n  }\n\n  _setData(data, offset = 0, byteLength = data.byteLength + offset) {\n    assert(ArrayBuffer.isView(data));\n\n    this._trackDeallocatedMemory();\n\n    const target = this._getTarget();\n\n    this.gl.bindBuffer(target, this.handle);\n    this.gl.bufferData(target, byteLength, this.usage);\n    this.gl.bufferSubData(target, offset, data);\n    this.gl.bindBuffer(target, null);\n    this.debugData = data.slice(0, DEBUG_DATA_LENGTH);\n    this.bytesUsed = byteLength;\n\n    this._trackAllocatedMemory(byteLength);\n\n    const type = getGLTypeFromTypedArray(data);\n    assert(type);\n    this.setAccessor(new Accessor(this.accessor, {\n      type\n    }));\n    return this;\n  }\n\n  _setByteLength(byteLength, usage = this.usage) {\n    assert(byteLength >= 0);\n\n    this._trackDeallocatedMemory();\n\n    let data = byteLength;\n\n    if (byteLength === 0) {\n      data = new Float32Array(0);\n    }\n\n    const target = this._getTarget();\n\n    this.gl.bindBuffer(target, this.handle);\n    this.gl.bufferData(target, data, usage);\n    this.gl.bindBuffer(target, null);\n    this.usage = usage;\n    this.debugData = null;\n    this.bytesUsed = byteLength;\n\n    this._trackAllocatedMemory(byteLength);\n\n    return this;\n  }\n\n  _getTarget() {\n    return this.gl.webgl2 ? 36663 : this.target;\n  }\n\n  _getAvailableElementCount(srcByteOffset) {\n    const ArrayType = getTypedArrayFromGLType(this.accessor.type || 5126, {\n      clamped: false\n    });\n    const sourceElementOffset = srcByteOffset / ArrayType.BYTES_PER_ELEMENT;\n    return this.getElementCount() - sourceElementOffset;\n  }\n\n  _inferType(data) {\n    if (!this.accessor.type) {\n      this.setAccessor(new Accessor(this.accessor, {\n        type: getGLTypeFromTypedArray(data)\n      }));\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createBuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteBuffer(this.handle);\n\n    this._trackDeallocatedMemory();\n  }\n\n  _getParameter(pname) {\n    this.gl.bindBuffer(this.target, this.handle);\n    const value = this.gl.getBufferParameter(this.target, pname);\n    this.gl.bindBuffer(this.target, null);\n    return value;\n  }\n\n  get type() {\n    log.deprecated('Buffer.type', 'Buffer.accessor.type')();\n    return this.accessor.type;\n  }\n\n  get bytes() {\n    log.deprecated('Buffer.bytes', 'Buffer.byteLength')();\n    return this.byteLength;\n  }\n\n  setByteLength(byteLength) {\n    log.deprecated('setByteLength', 'reallocate')();\n    return this.reallocate(byteLength);\n  }\n\n  updateAccessor(opts) {\n    log.deprecated('updateAccessor(...)', 'setAccessor(new Accessor(buffer.accessor, ...)')();\n    this.accessor = new Accessor(this.accessor, opts);\n    return this;\n  }\n\n}\n//# sourceMappingURL=buffer.js.map","import { isWebGL2 } from '@luma.gl/gltools';\nexport const TEXTURE_FORMATS = {\n  [6407]: {\n    dataFormat: 6407,\n    types: [5121, 33635]\n  },\n  [6408]: {\n    dataFormat: 6408,\n    types: [5121, 32819, 32820]\n  },\n  [6406]: {\n    dataFormat: 6406,\n    types: [5121]\n  },\n  [6409]: {\n    dataFormat: 6409,\n    types: [5121]\n  },\n  [6410]: {\n    dataFormat: 6410,\n    types: [5121]\n  },\n  [33326]: {\n    dataFormat: 6403,\n    types: [5126],\n    gl2: true\n  },\n  [33328]: {\n    dataFormat: 33319,\n    types: [5126],\n    gl2: true\n  },\n  [34837]: {\n    dataFormat: 6407,\n    types: [5126],\n    gl2: true\n  },\n  [34836]: {\n    dataFormat: 6408,\n    types: [5126],\n    gl2: true\n  }\n};\nexport const DATA_FORMAT_CHANNELS = {\n  [6403]: 1,\n  [36244]: 1,\n  [33319]: 2,\n  [33320]: 2,\n  [6407]: 3,\n  [36248]: 3,\n  [6408]: 4,\n  [36249]: 4,\n  [6402]: 1,\n  [34041]: 1,\n  [6406]: 1,\n  [6409]: 1,\n  [6410]: 2\n};\nexport const TYPE_SIZES = {\n  [5126]: 4,\n  [5125]: 4,\n  [5124]: 4,\n  [5123]: 2,\n  [5122]: 2,\n  [5131]: 2,\n  [5120]: 1,\n  [5121]: 1\n};\nexport function isFormatSupported(gl, format) {\n  const info = TEXTURE_FORMATS[format];\n\n  if (!info) {\n    return false;\n  }\n\n  if (info.gl1 === undefined && info.gl2 === undefined) {\n    return true;\n  }\n\n  const value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n  return typeof value === 'string' ? gl.getExtension(value) : value;\n}\nexport function isLinearFilteringSupported(gl, format) {\n  const info = TEXTURE_FORMATS[format];\n\n  switch (info && info.types[0]) {\n    case 5126:\n      return gl.getExtension('OES_texture_float_linear');\n\n    case 5131:\n      return gl.getExtension('OES_texture_half_float_linear');\n\n    default:\n      return true;\n  }\n}\n//# sourceMappingURL=texture-formats.js.map","import { isWebGL2, assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { global } from 'probe.gl/env';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { TEXTURE_FORMATS, DATA_FORMAT_CHANNELS, TYPE_SIZES, isFormatSupported, isLinearFilteringSupported } from './texture-formats';\nimport { assert } from '../utils/assert';\nimport { uid, isPowerOfTwo } from '../utils/utils';\nconst NPOT_MIN_FILTERS = [9729, 9728];\n\nconst WebGLBuffer = global.WebGLBuffer || function WebGLBuffer() {};\n\nexport default class Texture extends Resource {\n  static isSupported(gl, opts = {}) {\n    const {\n      format,\n      linearFiltering\n    } = opts;\n    let supported = true;\n\n    if (format) {\n      supported = supported && isFormatSupported(gl, format);\n      supported = supported && (!linearFiltering || isLinearFilteringSupported(gl, format));\n    }\n\n    return supported;\n  }\n\n  constructor(gl, props) {\n    const {\n      id = uid('texture'),\n      handle,\n      target\n    } = props;\n    super(gl, {\n      id,\n      handle\n    });\n    this.target = target;\n    this.textureUnit = undefined;\n    this.loaded = false;\n    this.width = undefined;\n    this.height = undefined;\n    this.depth = undefined;\n    this.format = undefined;\n    this.type = undefined;\n    this.dataFormat = undefined;\n    this.border = undefined;\n    this.textureUnit = undefined;\n    this.mipmaps = undefined;\n  }\n\n  toString() {\n    return `Texture(${this.id},${this.width}x${this.height})`;\n  }\n\n  initialize(props = {}) {\n    let data = props.data;\n\n    if (data instanceof Promise) {\n      data.then(resolvedImageData => this.initialize(Object.assign({}, props, {\n        pixels: resolvedImageData,\n        data: resolvedImageData\n      })));\n      return this;\n    }\n\n    const isVideo = typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement;\n\n    if (isVideo && data.readyState < HTMLVideoElement.HAVE_METADATA) {\n      this._video = null;\n      data.addEventListener('loadeddata', () => this.initialize(props));\n      return this;\n    }\n\n    const {\n      pixels = null,\n      format = 6408,\n      border = 0,\n      recreate = false,\n      parameters = {},\n      pixelStore = {},\n      textureUnit = undefined\n    } = props;\n\n    if (!data) {\n      data = pixels;\n    }\n\n    let {\n      width,\n      height,\n      dataFormat,\n      type,\n      compressed = false,\n      mipmaps = true\n    } = props;\n    const {\n      depth = 0\n    } = props;\n    ({\n      width,\n      height,\n      compressed,\n      dataFormat,\n      type\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    this.width = width;\n    this.height = height;\n    this.depth = depth;\n    this.format = format;\n    this.type = type;\n    this.dataFormat = dataFormat;\n    this.border = border;\n    this.textureUnit = textureUnit;\n\n    if (Number.isFinite(this.textureUnit)) {\n      this.gl.activeTexture(33984 + this.textureUnit);\n      this.gl.bindTexture(this.target, this.handle);\n    }\n\n    if (mipmaps && this._isNPOT()) {\n      log.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)();\n      mipmaps = false;\n\n      this._updateForNPOT(parameters);\n    }\n\n    this.mipmaps = mipmaps;\n    this.setImageData({\n      data,\n      width,\n      height,\n      depth,\n      format,\n      type,\n      dataFormat,\n      border,\n      mipmaps,\n      parameters: pixelStore,\n      compressed\n    });\n\n    if (mipmaps) {\n      this.generateMipmap();\n    }\n\n    this.setParameters(parameters);\n\n    if (recreate) {\n      this.data = data;\n    }\n\n    if (isVideo) {\n      this._video = {\n        video: data,\n        parameters,\n        lastTime: data.readyState >= HTMLVideoElement.HAVE_CURRENT_DATA ? data.currentTime : -1\n      };\n    }\n\n    return this;\n  }\n\n  update() {\n    if (this._video) {\n      const {\n        video,\n        parameters,\n        lastTime\n      } = this._video;\n\n      if (lastTime === video.currentTime || video.readyState < HTMLVideoElement.HAVE_CURRENT_DATA) {\n        return;\n      }\n\n      this.setSubImageData({\n        data: video,\n        parameters\n      });\n\n      if (this.mipmaps) {\n        this.generateMipmap();\n      }\n\n      this._video.lastTime = video.currentTime;\n    }\n  }\n\n  resize({\n    height,\n    width,\n    mipmaps = false\n  }) {\n    if (width !== this.width || height !== this.height) {\n      return this.initialize({\n        width,\n        height,\n        format: this.format,\n        type: this.type,\n        dataFormat: this.dataFormat,\n        border: this.border,\n        mipmaps\n      });\n    }\n\n    return this;\n  }\n\n  generateMipmap(params = {}) {\n    if (this._isNPOT()) {\n      log.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)();\n      return this;\n    }\n\n    this.mipmaps = true;\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, params, () => {\n      this.gl.generateMipmap(this.target);\n    });\n    this.gl.bindTexture(this.target, null);\n    return this;\n  }\n\n  setImageData(options) {\n    this._trackDeallocatedMemory('Texture');\n\n    const {\n      target = this.target,\n      pixels = null,\n      level = 0,\n      format = this.format,\n      border = this.border,\n      offset = 0,\n      parameters = {}\n    } = options;\n    let {\n      data = null,\n      type = this.type,\n      width = this.width,\n      height = this.height,\n      dataFormat = this.dataFormat,\n      compressed = false\n    } = options;\n\n    if (!data) {\n      data = pixels;\n    }\n\n    ({\n      type,\n      dataFormat,\n      compressed,\n      width,\n      height\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    const {\n      gl\n    } = this;\n    gl.bindTexture(this.target, this.handle);\n    let dataType = null;\n    ({\n      data,\n      dataType\n    } = this._getDataType({\n      data,\n      compressed\n    }));\n    let gl2;\n    withParameters(this.gl, parameters, () => {\n      switch (dataType) {\n        case 'null':\n          gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n          break;\n\n        case 'typed-array':\n          gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data, offset);\n          break;\n\n        case 'buffer':\n          gl2 = assertWebGL2Context(gl);\n          gl2.bindBuffer(35052, data.handle || data);\n          gl2.texImage2D(target, level, format, width, height, border, dataFormat, type, offset);\n          gl2.bindBuffer(35052, null);\n          break;\n\n        case 'browser-object':\n          if (isWebGL2(gl)) {\n            gl.texImage2D(target, level, format, width, height, border, dataFormat, type, data);\n          } else {\n            gl.texImage2D(target, level, format, dataFormat, type, data);\n          }\n\n          break;\n\n        case 'compressed':\n          for (const [levelIndex, levelData] of data.entries()) {\n            gl.compressedTexImage2D(target, levelIndex, levelData.format, levelData.width, levelData.height, border, levelData.data);\n          }\n\n          break;\n\n        default:\n          assert(false, 'Unknown image data type');\n      }\n    });\n\n    if (data && data.byteLength) {\n      this._trackAllocatedMemory(data.byteLength, 'Texture');\n    } else {\n      const channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n      const channelSize = TYPE_SIZES[this.type] || 1;\n\n      this._trackAllocatedMemory(this.width * this.height * channels * channelSize, 'Texture');\n    }\n\n    this.loaded = true;\n    return this;\n  }\n\n  setSubImageData({\n    target = this.target,\n    pixels = null,\n    data = null,\n    x = 0,\n    y = 0,\n    width = this.width,\n    height = this.height,\n    level = 0,\n    format = this.format,\n    type = this.type,\n    dataFormat = this.dataFormat,\n    compressed = false,\n    offset = 0,\n    border = this.border,\n    parameters = {}\n  }) {\n    ({\n      type,\n      dataFormat,\n      compressed,\n      width,\n      height\n    } = this._deduceParameters({\n      format,\n      type,\n      dataFormat,\n      compressed,\n      data,\n      width,\n      height\n    }));\n    assert(this.depth === 0, 'texSubImage not supported for 3D textures');\n\n    if (!data) {\n      data = pixels;\n    }\n\n    if (data && data.data) {\n      const ndarray = data;\n      data = ndarray.data;\n      width = ndarray.shape[0];\n      height = ndarray.shape[1];\n    }\n\n    if (data instanceof Buffer) {\n      data = data.handle;\n    }\n\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, parameters, () => {\n      if (compressed) {\n        this.gl.compressedTexSubImage2D(target, level, x, y, width, height, format, data);\n      } else if (data === null) {\n        this.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, null);\n      } else if (ArrayBuffer.isView(data)) {\n        this.gl.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data, offset);\n      } else if (data instanceof WebGLBuffer) {\n        const gl2 = assertWebGL2Context(this.gl);\n        gl2.bindBuffer(35052, data);\n        gl2.texSubImage2D(target, level, x, y, width, height, dataFormat, type, offset);\n        gl2.bindBuffer(35052, null);\n      } else if (isWebGL2(this.gl)) {\n        const gl2 = assertWebGL2Context(this.gl);\n        gl2.texSubImage2D(target, level, x, y, width, height, dataFormat, type, data);\n      } else {\n        this.gl.texSubImage2D(target, level, x, y, dataFormat, type, data);\n      }\n    });\n    this.gl.bindTexture(this.target, null);\n  }\n\n  copyFramebuffer(opts = {}) {\n    log.error('Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n    return null;\n  }\n\n  getActiveUnit() {\n    return this.gl.getParameter(34016) - 33984;\n  }\n\n  bind(textureUnit = this.textureUnit) {\n    const {\n      gl\n    } = this;\n\n    if (textureUnit !== undefined) {\n      this.textureUnit = textureUnit;\n      gl.activeTexture(33984 + textureUnit);\n    }\n\n    gl.bindTexture(this.target, this.handle);\n    return textureUnit;\n  }\n\n  unbind(textureUnit = this.textureUnit) {\n    const {\n      gl\n    } = this;\n\n    if (textureUnit !== undefined) {\n      this.textureUnit = textureUnit;\n      gl.activeTexture(33984 + textureUnit);\n    }\n\n    gl.bindTexture(this.target, null);\n    return textureUnit;\n  }\n\n  _getDataType({\n    data,\n    compressed = false\n  }) {\n    if (compressed) {\n      return {\n        data,\n        dataType: 'compressed'\n      };\n    }\n\n    if (data === null) {\n      return {\n        data,\n        dataType: 'null'\n      };\n    }\n\n    if (ArrayBuffer.isView(data)) {\n      return {\n        data,\n        dataType: 'typed-array'\n      };\n    }\n\n    if (data instanceof Buffer) {\n      return {\n        data: data.handle,\n        dataType: 'buffer'\n      };\n    }\n\n    if (data instanceof WebGLBuffer) {\n      return {\n        data,\n        dataType: 'buffer'\n      };\n    }\n\n    return {\n      data,\n      dataType: 'browser-object'\n    };\n  }\n\n  _deduceParameters(opts) {\n    const {\n      format,\n      data\n    } = opts;\n    let {\n      width,\n      height,\n      dataFormat,\n      type,\n      compressed\n    } = opts;\n    const textureFormat = TEXTURE_FORMATS[format];\n    dataFormat = dataFormat || textureFormat && textureFormat.dataFormat;\n    type = type || textureFormat && textureFormat.types[0];\n    compressed = compressed || textureFormat && textureFormat.compressed;\n    ({\n      width,\n      height\n    } = this._deduceImageSize(data, width, height));\n    return {\n      dataFormat,\n      type,\n      compressed,\n      width,\n      height,\n      format,\n      data\n    };\n  }\n\n  _deduceImageSize(data, width, height) {\n    let size;\n\n    if (typeof ImageData !== 'undefined' && data instanceof ImageData) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof HTMLImageElement !== 'undefined' && data instanceof HTMLImageElement) {\n      size = {\n        width: data.naturalWidth,\n        height: data.naturalHeight\n      };\n    } else if (typeof HTMLCanvasElement !== 'undefined' && data instanceof HTMLCanvasElement) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof ImageBitmap !== 'undefined' && data instanceof ImageBitmap) {\n      size = {\n        width: data.width,\n        height: data.height\n      };\n    } else if (typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement) {\n      size = {\n        width: data.videoWidth,\n        height: data.videoHeight\n      };\n    } else if (!data) {\n      size = {\n        width: width >= 0 ? width : 1,\n        height: height >= 0 ? height : 1\n      };\n    } else {\n      size = {\n        width,\n        height\n      };\n    }\n\n    assert(size, 'Could not deduced texture size');\n    assert(width === undefined || size.width === width, 'Deduced texture width does not match supplied width');\n    assert(height === undefined || size.height === height, 'Deduced texture height does not match supplied height');\n    return size;\n  }\n\n  _createHandle() {\n    return this.gl.createTexture();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteTexture(this.handle);\n\n    this._trackDeallocatedMemory('Texture');\n  }\n\n  _getParameter(pname) {\n    switch (pname) {\n      case 4096:\n        return this.width;\n\n      case 4097:\n        return this.height;\n\n      default:\n        this.gl.bindTexture(this.target, this.handle);\n        const value = this.gl.getTexParameter(this.target, pname);\n        this.gl.bindTexture(this.target, null);\n        return value;\n    }\n  }\n\n  _setParameter(pname, param) {\n    this.gl.bindTexture(this.target, this.handle);\n    param = this._getNPOTParam(pname, param);\n\n    switch (pname) {\n      case 33082:\n      case 33083:\n        this.gl.texParameterf(this.handle, pname, param);\n        break;\n\n      case 4096:\n      case 4097:\n        assert(false);\n        break;\n\n      default:\n        this.gl.texParameteri(this.target, pname, param);\n        break;\n    }\n\n    this.gl.bindTexture(this.target, null);\n    return this;\n  }\n\n  _isNPOT() {\n    if (isWebGL2(this.gl)) {\n      return false;\n    }\n\n    if (!this.width || !this.height) {\n      return false;\n    }\n\n    return !isPowerOfTwo(this.width) || !isPowerOfTwo(this.height);\n  }\n\n  _updateForNPOT(parameters) {\n    if (parameters[this.gl.TEXTURE_MIN_FILTER] === undefined) {\n      parameters[this.gl.TEXTURE_MIN_FILTER] = this.gl.LINEAR;\n    }\n\n    if (parameters[this.gl.TEXTURE_WRAP_S] === undefined) {\n      parameters[this.gl.TEXTURE_WRAP_S] = this.gl.CLAMP_TO_EDGE;\n    }\n\n    if (parameters[this.gl.TEXTURE_WRAP_T] === undefined) {\n      parameters[this.gl.TEXTURE_WRAP_T] = this.gl.CLAMP_TO_EDGE;\n    }\n  }\n\n  _getNPOTParam(pname, param) {\n    if (this._isNPOT()) {\n      switch (pname) {\n        case 10241:\n          if (NPOT_MIN_FILTERS.indexOf(param) === -1) {\n            param = 9729;\n          }\n\n          break;\n\n        case 10242:\n        case 10243:\n          if (param !== 33071) {\n            param = 33071;\n          }\n\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    return param;\n  }\n\n}\n//# sourceMappingURL=texture.js.map","import { assert } from '../utils/assert';\nlet pathPrefix = '';\nexport function setPathPrefix(prefix) {\n  pathPrefix = prefix;\n}\nexport function loadFile(url, options = {}) {\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  const dataType = options.dataType || 'text';\n  return fetch(url, options).then(res => res[dataType]());\n}\nexport function loadImage(url, opts) {\n  assert(typeof url === 'string');\n  url = pathPrefix + url;\n  return new Promise((resolve, reject) => {\n    try {\n      const image = new Image();\n\n      image.onload = () => resolve(image);\n\n      image.onerror = () => reject(new Error(`Could not load image ${url}.`));\n\n      image.crossOrigin = opts && opts.crossOrigin || 'anonymous';\n      image.src = url;\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n//# sourceMappingURL=load-file.js.map","import { assertWebGLContext } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { loadImage } from '../utils/load-file';\nexport default class Texture2D extends Texture {\n  static isSupported(gl, opts) {\n    return Texture.isSupported(gl, opts);\n  }\n\n  constructor(gl, props = {}) {\n    assertWebGLContext(gl);\n\n    if (props instanceof Promise || typeof props === 'string') {\n      props = {\n        data: props\n      };\n    }\n\n    if (typeof props.data === 'string') {\n      props = Object.assign({}, props, {\n        data: loadImage(props.data)\n      });\n    }\n\n    super(gl, Object.assign({}, props, {\n      target: 3553\n    }));\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n}\n//# sourceMappingURL=texture-2d.js.map","const EXT_FLOAT_WEBGL2 = 'EXT_color_buffer_float';\nexport default {\n  [33189]: {\n    bpp: 2\n  },\n  [33190]: {\n    gl2: true,\n    bpp: 3\n  },\n  [36012]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36168]: {\n    bpp: 1\n  },\n  [34041]: {\n    bpp: 4\n  },\n  [35056]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36013]: {\n    gl2: true,\n    bpp: 5\n  },\n  [32854]: {\n    bpp: 2\n  },\n  [36194]: {\n    bpp: 2\n  },\n  [32855]: {\n    bpp: 2\n  },\n  [33321]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33330]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33329]: {\n    gl2: true,\n    bpp: 1\n  },\n  [33332]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33331]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33334]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33333]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33323]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33336]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33335]: {\n    gl2: true,\n    bpp: 2\n  },\n  [33338]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33337]: {\n    gl2: true,\n    bpp: 4\n  },\n  [33340]: {\n    gl2: true,\n    bpp: 8\n  },\n  [33339]: {\n    gl2: true,\n    bpp: 8\n  },\n  [32849]: {\n    gl2: true,\n    bpp: 3\n  },\n  [32856]: {\n    gl2: true,\n    bpp: 4\n  },\n  [32857]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36220]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36238]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36975]: {\n    gl2: true,\n    bpp: 4\n  },\n  [36214]: {\n    gl2: true,\n    bpp: 8\n  },\n  [36232]: {\n    gl2: true,\n    bpp: 8\n  },\n  [36226]: {\n    gl2: true,\n    bpp: 16\n  },\n  [36208]: {\n    gl2: true,\n    bpp: 16\n  },\n  [33325]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 2\n  },\n  [33327]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  },\n  [34842]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 8\n  },\n  [33326]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  },\n  [33328]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 8\n  },\n  [34836]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 16\n  },\n  [35898]: {\n    gl2: EXT_FLOAT_WEBGL2,\n    bpp: 4\n  }\n};\n//# sourceMappingURL=renderbuffer-formats.js.map","import Resource from './resource';\nimport RENDERBUFFER_FORMATS from './renderbuffer-formats';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\n\nfunction isFormatSupported(gl, format, formats) {\n  const info = formats[format];\n\n  if (!info) {\n    return false;\n  }\n\n  const value = isWebGL2(gl) ? info.gl2 || info.gl1 : info.gl1;\n\n  if (typeof value === 'string') {\n    return gl.getExtension(value);\n  }\n\n  return value;\n}\n\nexport default class Renderbuffer extends Resource {\n  static isSupported(gl, {\n    format\n  } = {\n    format: null\n  }) {\n    return !format || isFormatSupported(gl, format, RENDERBUFFER_FORMATS);\n  }\n\n  static getSamplesForFormat(gl, {\n    format\n  }) {\n    return gl.getInternalformatParameter(36161, format, 32937);\n  }\n\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  initialize({\n    format,\n    width = 1,\n    height = 1,\n    samples = 0\n  }) {\n    assert(format, 'Needs format');\n\n    this._trackDeallocatedMemory();\n\n    this.gl.bindRenderbuffer(36161, this.handle);\n\n    if (samples !== 0 && isWebGL2(this.gl)) {\n      this.gl.renderbufferStorageMultisample(36161, samples, format, width, height);\n    } else {\n      this.gl.renderbufferStorage(36161, format, width, height);\n    }\n\n    this.format = format;\n    this.width = width;\n    this.height = height;\n    this.samples = samples;\n\n    this._trackAllocatedMemory(this.width * this.height * (this.samples || 1) * RENDERBUFFER_FORMATS[this.format].bpp);\n\n    return this;\n  }\n\n  resize({\n    width,\n    height\n  }) {\n    if (width !== this.width || height !== this.height) {\n      return this.initialize({\n        width,\n        height,\n        format: this.format,\n        samples: this.samples\n      });\n    }\n\n    return this;\n  }\n\n  _createHandle() {\n    return this.gl.createRenderbuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteRenderbuffer(this.handle);\n\n    this._trackDeallocatedMemory();\n  }\n\n  _bindHandle(handle) {\n    this.gl.bindRenderbuffer(36161, handle);\n  }\n\n  _syncHandle(handle) {\n    this.format = this.getParameter(36164);\n    this.width = this.getParameter(36162);\n    this.height = this.getParameter(36163);\n    this.samples = this.getParameter(36011);\n  }\n\n  _getParameter(pname) {\n    this.gl.bindRenderbuffer(36161, this.handle);\n    const value = this.gl.getRenderbufferParameter(36161, pname);\n    return value;\n  }\n\n}\n//# sourceMappingURL=renderbuffer.js.map","import { assertWebGL2Context, withParameters } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nconst GL_DEPTH_BUFFER_BIT = 0x00000100;\nconst GL_STENCIL_BUFFER_BIT = 0x00000400;\nconst GL_COLOR_BUFFER_BIT = 0x00004000;\nconst GL_COLOR = 0x1800;\nconst GL_DEPTH = 0x1801;\nconst GL_STENCIL = 0x1802;\nconst GL_DEPTH_STENCIL = 0x84f9;\nconst ERR_ARGUMENTS = 'clear: bad arguments';\nexport function clear(gl, {\n  framebuffer = null,\n  color = null,\n  depth = null,\n  stencil = null\n} = {}) {\n  const parameters = {};\n\n  if (framebuffer) {\n    parameters.framebuffer = framebuffer;\n  }\n\n  let clearFlags = 0;\n\n  if (color) {\n    clearFlags |= GL_COLOR_BUFFER_BIT;\n\n    if (color !== true) {\n      parameters.clearColor = color;\n    }\n  }\n\n  if (depth) {\n    clearFlags |= GL_DEPTH_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearDepth = depth;\n    }\n  }\n\n  if (stencil) {\n    clearFlags |= GL_STENCIL_BUFFER_BIT;\n\n    if (depth !== true) {\n      parameters.clearStencil = depth;\n    }\n  }\n\n  assert(clearFlags !== 0, ERR_ARGUMENTS);\n  withParameters(gl, parameters, () => {\n    gl.clear(clearFlags);\n  });\n}\nexport function clearBuffer(gl, {\n  framebuffer = null,\n  buffer = GL_COLOR,\n  drawBuffer = 0,\n  value = [0, 0, 0, 0]\n} = {}) {\n  assertWebGL2Context(gl);\n  withParameters(gl, {\n    framebuffer\n  }, () => {\n    switch (buffer) {\n      case GL_COLOR:\n        switch (value.constructor) {\n          case Int32Array:\n            gl.clearBufferiv(buffer, drawBuffer, value);\n            break;\n\n          case Uint32Array:\n            gl.clearBufferuiv(buffer, drawBuffer, value);\n            break;\n\n          case Float32Array:\n          default:\n            gl.clearBufferfv(buffer, drawBuffer, value);\n        }\n\n        break;\n\n      case GL_DEPTH:\n        gl.clearBufferfv(GL_DEPTH, 0, [value]);\n        break;\n\n      case GL_STENCIL:\n        gl.clearBufferiv(GL_STENCIL, 0, [value]);\n        break;\n\n      case GL_DEPTH_STENCIL:\n        const [depth, stencil] = value;\n        gl.clearBufferfi(GL_DEPTH_STENCIL, 0, depth, stencil);\n        break;\n\n      default:\n        assert(false, ERR_ARGUMENTS);\n    }\n  });\n}\n//# sourceMappingURL=clear.js.map","import { assert } from '../utils/assert';\nexport function glFormatToComponents(format) {\n  switch (format) {\n    case 6406:\n    case 33326:\n    case 6403:\n      return 1;\n\n    case 33328:\n    case 33319:\n      return 2;\n\n    case 6407:\n    case 34837:\n      return 3;\n\n    case 6408:\n    case 34836:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function glTypeToBytes(type) {\n  switch (type) {\n    case 5121:\n      return 1;\n\n    case 33635:\n    case 32819:\n    case 32820:\n      return 2;\n\n    case 5126:\n      return 4;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\n//# sourceMappingURL=format-utils.js.map","import { log, assertWebGLContext } from '@luma.gl/gltools';\nimport Texture from './texture';\nconst FACES = [34069, 34070, 34071, 34072, 34073, 34074];\nexport default class TextureCube extends Texture {\n  constructor(gl, props = {}) {\n    assertWebGLContext(gl);\n    super(gl, Object.assign({}, props, {\n      target: 34067\n    }));\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  initialize(props = {}) {\n    const {\n      mipmaps = true,\n      parameters = {}\n    } = props;\n    this.opts = props;\n    this.setCubeMapImageData(props).then(() => {\n      this.loaded = true;\n\n      if (mipmaps) {\n        this.generateMipmap(props);\n      }\n\n      this.setParameters(parameters);\n    });\n    return this;\n  }\n\n  subImage({\n    face,\n    data,\n    x = 0,\n    y = 0,\n    mipmapLevel = 0\n  }) {\n    return this._subImage({\n      target: face,\n      data,\n      x,\n      y,\n      mipmapLevel\n    });\n  }\n\n  async setCubeMapImageData({\n    width,\n    height,\n    pixels,\n    data,\n    border = 0,\n    format = 6408,\n    type = 5121\n  }) {\n    const {\n      gl\n    } = this;\n    const imageDataMap = pixels || data;\n    const resolvedFaces = await Promise.all(FACES.map(face => {\n      const facePixels = imageDataMap[face];\n      return Promise.all(Array.isArray(facePixels) ? facePixels : [facePixels]);\n    }));\n    this.bind();\n    FACES.forEach((face, index) => {\n      if (resolvedFaces[index].length > 1 && this.opts.mipmaps !== false) {\n        log.warn(`${this.id} has mipmap and multiple LODs.`)();\n      }\n\n      resolvedFaces[index].forEach((image, lodLevel) => {\n        if (width && height) {\n          gl.texImage2D(face, lodLevel, format, width, height, border, format, type, image);\n        } else {\n          gl.texImage2D(face, lodLevel, format, format, type, image);\n        }\n      });\n    });\n    this.unbind();\n  }\n\n  setImageDataForFace(options) {\n    const {\n      face,\n      width,\n      height,\n      pixels,\n      data,\n      border = 0,\n      format = 6408,\n      type = 5121\n    } = options;\n    const {\n      gl\n    } = this;\n    const imageData = pixels || data;\n    this.bind();\n\n    if (imageData instanceof Promise) {\n      imageData.then(resolvedImageData => this.setImageDataForFace(Object.assign({}, options, {\n        face,\n        data: resolvedImageData,\n        pixels: resolvedImageData\n      })));\n    } else if (this.width || this.height) {\n      gl.texImage2D(face, 0, format, width, height, border, format, type, imageData);\n    } else {\n      gl.texImage2D(face, 0, format, format, type, imageData);\n    }\n\n    return this;\n  }\n\n}\nTextureCube.FACES = FACES;\n//# sourceMappingURL=texture-cube.js.map","import { isWebGL2, assertWebGL2Context, withParameters } from '@luma.gl/gltools';\nimport Texture from './texture';\nimport { DATA_FORMAT_CHANNELS, TYPE_SIZES } from './texture-formats';\nimport Buffer from './buffer';\nexport default class Texture3D extends Texture {\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl, props = {}) {\n    assertWebGL2Context(gl);\n    props = Object.assign({\n      depth: 1\n    }, props, {\n      target: 32879,\n      unpackFlipY: false\n    });\n    super(gl, props);\n    this.initialize(props);\n    Object.seal(this);\n  }\n\n  setImageData({\n    level = 0,\n    dataFormat = 6408,\n    width,\n    height,\n    depth = 1,\n    border = 0,\n    format,\n    type = 5121,\n    offset = 0,\n    data,\n    parameters = {}\n  }) {\n    this._trackDeallocatedMemory('Texture');\n\n    this.gl.bindTexture(this.target, this.handle);\n    withParameters(this.gl, parameters, () => {\n      if (ArrayBuffer.isView(data)) {\n        this.gl.texImage3D(this.target, level, dataFormat, width, height, depth, border, format, type, data);\n      }\n\n      if (data instanceof Buffer) {\n        this.gl.bindBuffer(35052, data.handle);\n        this.gl.texImage3D(this.target, level, dataFormat, width, height, depth, border, format, type, offset);\n      }\n    });\n\n    if (data && data.byteLength) {\n      this._trackAllocatedMemory(data.byteLength, 'Texture');\n    } else {\n      const channels = DATA_FORMAT_CHANNELS[this.dataFormat] || 4;\n      const channelSize = TYPE_SIZES[this.type] || 1;\n\n      this._trackAllocatedMemory(this.width * this.height * this.depth * channels * channelSize, 'Texture');\n    }\n\n    this.loaded = true;\n    return this;\n  }\n\n}\n//# sourceMappingURL=texture-3d.js.map","import Texture2D from '../classes/texture-2d';\nimport TextureCube from '../classes/texture-cube';\nimport Texture3D from '../classes/texture-3d';\nimport Framebuffer from '../classes/framebuffer';\nimport { assert } from '../utils/assert';\nexport function cloneTextureFrom(refTexture, overrides) {\n  assert(refTexture instanceof Texture2D || refTexture instanceof TextureCube || refTexture instanceof Texture3D);\n  const TextureType = refTexture.constructor;\n  const {\n    gl,\n    width,\n    height,\n    format,\n    type,\n    dataFormat,\n    border,\n    mipmaps\n  } = refTexture;\n  const textureOptions = Object.assign({\n    width,\n    height,\n    format,\n    type,\n    dataFormat,\n    border,\n    mipmaps\n  }, overrides);\n  return new TextureType(gl, textureOptions);\n}\nexport function toFramebuffer(texture, opts) {\n  const {\n    gl,\n    width,\n    height,\n    id\n  } = texture;\n  const framebuffer = new Framebuffer(gl, Object.assign({}, opts, {\n    id: `framebuffer-for-${id}`,\n    width,\n    height,\n    attachments: {\n      [36064]: texture\n    }\n  }));\n  return framebuffer;\n}\n//# sourceMappingURL=texture-utils.js.map","import Buffer from './buffer';\nimport Framebuffer from './framebuffer';\nimport Texture from './texture';\nimport { assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { flipRows, scalePixels } from '../webgl-utils/typed-array-utils';\nimport { getTypedArrayFromGLType, getGLTypeFromTypedArray } from '../webgl-utils/typed-array-utils';\nimport { glFormatToComponents, glTypeToBytes } from '../webgl-utils/format-utils';\nimport { toFramebuffer } from '../webgl-utils/texture-utils';\nimport { assert } from '../utils/assert';\nexport function readPixelsToArray(source, options = {}) {\n  const {\n    sourceX = 0,\n    sourceY = 0,\n    sourceFormat = 6408\n  } = options;\n  let {\n    sourceAttachment = 36064,\n    target = null,\n    sourceWidth,\n    sourceHeight,\n    sourceType\n  } = options;\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  const {\n    gl,\n    handle,\n    attachments\n  } = framebuffer;\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n\n  if (sourceAttachment === 36064 && handle === null) {\n    sourceAttachment = 1028;\n  }\n\n  assert(attachments[sourceAttachment]);\n  sourceType = sourceType || attachments[sourceAttachment].type;\n  target = getPixelArray(target, sourceType, sourceFormat, sourceWidth, sourceHeight);\n  sourceType = sourceType || getGLTypeFromTypedArray(target);\n  const prevHandle = gl.bindFramebuffer(36160, handle);\n  gl.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, target);\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return target;\n}\nexport function readPixelsToBuffer(source, {\n  sourceX = 0,\n  sourceY = 0,\n  sourceFormat = 6408,\n  target = null,\n  targetByteOffset = 0,\n  sourceWidth,\n  sourceHeight,\n  sourceType\n}) {\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  sourceWidth = sourceWidth || framebuffer.width;\n  sourceHeight = sourceHeight || framebuffer.height;\n  const gl2 = assertWebGL2Context(framebuffer.gl);\n  sourceType = sourceType || (target ? target.type : 5121);\n\n  if (!target) {\n    const components = glFormatToComponents(sourceFormat);\n    const byteCount = glTypeToBytes(sourceType);\n    const byteLength = targetByteOffset + sourceWidth * sourceHeight * components * byteCount;\n    target = new Buffer(gl2, {\n      byteLength,\n      accessor: {\n        type: sourceType,\n        size: components\n      }\n    });\n  }\n\n  target.bind({\n    target: 35051\n  });\n  withParameters(gl2, {\n    framebuffer\n  }, () => {\n    gl2.readPixels(sourceX, sourceY, sourceWidth, sourceHeight, sourceFormat, sourceType, targetByteOffset);\n  });\n  target.unbind({\n    target: 35051\n  });\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return target;\n}\nexport function copyToDataUrl(source, {\n  sourceAttachment = 36064,\n  targetMaxHeight = Number.MAX_SAFE_INTEGER\n} = {}) {\n  let data = readPixelsToArray(source, {\n    sourceAttachment\n  });\n  let {\n    width,\n    height\n  } = source;\n\n  while (height > targetMaxHeight) {\n    ({\n      data,\n      width,\n      height\n    } = scalePixels({\n      data,\n      width,\n      height\n    }));\n  }\n\n  flipRows({\n    data,\n    width,\n    height\n  });\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const context = canvas.getContext('2d');\n  const imageData = context.createImageData(width, height);\n  imageData.data.set(data);\n  context.putImageData(imageData, 0, 0);\n  return canvas.toDataURL();\n}\nexport function copyToImage(source, {\n  sourceAttachment = 36064,\n  targetImage = null\n} = {}) {\n  const dataUrl = copyToDataUrl(source, {\n    sourceAttachment\n  });\n  targetImage = targetImage || new Image();\n  targetImage.src = dataUrl;\n  return targetImage;\n}\nexport function copyToTexture(source, target, options = {}) {\n  const {\n    sourceX = 0,\n    sourceY = 0,\n    targetMipmaplevel = 0,\n    targetInternalFormat = 6408\n  } = options;\n  let {\n    targetX,\n    targetY,\n    targetZ,\n    width,\n    height\n  } = options;\n  const {\n    framebuffer,\n    deleteFramebuffer\n  } = getFramebuffer(source);\n  assert(framebuffer);\n  const {\n    gl,\n    handle\n  } = framebuffer;\n  const isSubCopy = typeof targetX !== 'undefined' || typeof targetY !== 'undefined' || typeof targetZ !== 'undefined';\n  targetX = targetX || 0;\n  targetY = targetY || 0;\n  targetZ = targetZ || 0;\n  const prevHandle = gl.bindFramebuffer(36160, handle);\n  assert(target);\n  let texture = null;\n\n  if (target instanceof Texture) {\n    texture = target;\n    width = Number.isFinite(width) ? width : texture.width;\n    height = Number.isFinite(height) ? height : texture.height;\n    texture.bind(0);\n    target = texture.target;\n  }\n\n  if (!isSubCopy) {\n    gl.copyTexImage2D(target, targetMipmaplevel, targetInternalFormat, sourceX, sourceY, width, height, 0);\n  } else {\n    switch (target) {\n      case 3553:\n      case 34067:\n        gl.copyTexSubImage2D(target, targetMipmaplevel, targetX, targetY, sourceX, sourceY, width, height);\n        break;\n\n      case 35866:\n      case 32879:\n        const gl2 = assertWebGL2Context(gl);\n        gl2.copyTexSubImage3D(target, targetMipmaplevel, targetX, targetY, targetZ, sourceX, sourceY, width, height);\n        break;\n\n      default:\n    }\n  }\n\n  if (texture) {\n    texture.unbind();\n  }\n\n  gl.bindFramebuffer(36160, prevHandle || null);\n\n  if (deleteFramebuffer) {\n    framebuffer.delete();\n  }\n\n  return texture;\n}\nexport function blit(source, target, options = {}) {\n  const {\n    sourceX0 = 0,\n    sourceY0 = 0,\n    targetX0 = 0,\n    targetY0 = 0,\n    color = true,\n    depth = false,\n    stencil = false,\n    filter = 9728\n  } = options;\n  let {\n    sourceX1,\n    sourceY1,\n    targetX1,\n    targetY1,\n    sourceAttachment = 36064,\n    mask = 0\n  } = options;\n  const {\n    framebuffer: srcFramebuffer,\n    deleteFramebuffer: deleteSrcFramebuffer\n  } = getFramebuffer(source);\n  const {\n    framebuffer: dstFramebuffer,\n    deleteFramebuffer: deleteDstFramebuffer\n  } = getFramebuffer(target);\n  assert(srcFramebuffer);\n  assert(dstFramebuffer);\n  const {\n    gl,\n    handle,\n    width,\n    height,\n    readBuffer\n  } = dstFramebuffer;\n  const gl2 = assertWebGL2Context(gl);\n\n  if (!srcFramebuffer.handle && sourceAttachment === 36064) {\n    sourceAttachment = 1028;\n  }\n\n  if (color) {\n    mask |= 16384;\n  }\n\n  if (depth) {\n    mask |= 256;\n  }\n\n  if (stencil) {\n    mask |= 1024;\n  }\n\n  if (deleteSrcFramebuffer || deleteDstFramebuffer) {\n    if (mask & (256 | 1024)) {\n      mask = 16384;\n      log.warn('Blitting from or into a Texture object, forcing mask to GL.COLOR_BUFFER_BIT')();\n    }\n  }\n\n  assert(mask);\n  sourceX1 = sourceX1 === undefined ? srcFramebuffer.width : sourceX1;\n  sourceY1 = sourceY1 === undefined ? srcFramebuffer.height : sourceY1;\n  targetX1 = targetX1 === undefined ? width : targetX1;\n  targetY1 = targetY1 === undefined ? height : targetY1;\n  const prevDrawHandle = gl.bindFramebuffer(36009, handle);\n  const prevReadHandle = gl.bindFramebuffer(36008, srcFramebuffer.handle);\n  gl2.readBuffer(sourceAttachment);\n  gl2.blitFramebuffer(sourceX0, sourceY0, sourceX1, sourceY1, targetX0, targetY0, targetX1, targetY1, mask, filter);\n  gl2.readBuffer(readBuffer);\n  gl2.bindFramebuffer(36008, prevReadHandle || null);\n  gl2.bindFramebuffer(36009, prevDrawHandle || null);\n\n  if (deleteSrcFramebuffer) {\n    srcFramebuffer.delete();\n  }\n\n  if (deleteDstFramebuffer) {\n    dstFramebuffer.delete();\n  }\n\n  return dstFramebuffer;\n}\n\nfunction getFramebuffer(source) {\n  if (!(source instanceof Framebuffer)) {\n    return {\n      framebuffer: toFramebuffer(source),\n      deleteFramebuffer: true\n    };\n  }\n\n  return {\n    framebuffer: source,\n    deleteFramebuffer: false\n  };\n}\n\nfunction getPixelArray(pixelArray, type, format, width, height) {\n  if (pixelArray) {\n    return pixelArray;\n  }\n\n  type = type || 5121;\n  const ArrayType = getTypedArrayFromGLType(type, {\n    clamped: false\n  });\n  const components = glFormatToComponents(format);\n  return new ArrayType(width * height * components);\n}\n//# sourceMappingURL=copy-and-blit.js.map","import Framebuffer from '../classes/framebuffer';\nimport Texture2D from '../classes/texture-2d';\nexport const FEATURES = {\n  WEBGL2: 'WEBGL2',\n  VERTEX_ARRAY_OBJECT: 'VERTEX_ARRAY_OBJECT',\n  TIMER_QUERY: 'TIMER_QUERY',\n  INSTANCED_RENDERING: 'INSTANCED_RENDERING',\n  MULTIPLE_RENDER_TARGETS: 'MULTIPLE_RENDER_TARGETS',\n  ELEMENT_INDEX_UINT32: 'ELEMENT_INDEX_UINT32',\n  BLEND_EQUATION_MINMAX: 'BLEND_EQUATION_MINMAX',\n  FLOAT_BLEND: 'FLOAT_BLEND',\n  COLOR_ENCODING_SRGB: 'COLOR_ENCODING_SRGB',\n  TEXTURE_DEPTH: 'TEXTURE_DEPTH',\n  TEXTURE_FLOAT: 'TEXTURE_FLOAT',\n  TEXTURE_HALF_FLOAT: 'TEXTURE_HALF_FLOAT',\n  TEXTURE_FILTER_LINEAR_FLOAT: 'TEXTURE_FILTER_LINEAR_FLOAT',\n  TEXTURE_FILTER_LINEAR_HALF_FLOAT: 'TEXTURE_FILTER_LINEAR_HALF_FLOAT',\n  TEXTURE_FILTER_ANISOTROPIC: 'TEXTURE_FILTER_ANISOTROPIC',\n  COLOR_ATTACHMENT_RGBA32F: 'COLOR_ATTACHMENT_RGBA32F',\n  COLOR_ATTACHMENT_FLOAT: 'COLOR_ATTACHMENT_FLOAT',\n  COLOR_ATTACHMENT_HALF_FLOAT: 'COLOR_ATTACHMENT_HALF_FLOAT',\n  GLSL_FRAG_DATA: 'GLSL_FRAG_DATA',\n  GLSL_FRAG_DEPTH: 'GLSL_FRAG_DEPTH',\n  GLSL_DERIVATIVES: 'GLSL_DERIVATIVES',\n  GLSL_TEXTURE_LOD: 'GLSL_TEXTURE_LOD'\n};\n\nfunction checkFloat32ColorAttachment(gl) {\n  const testTexture = new Texture2D(gl, {\n    format: 6408,\n    type: 5126,\n    dataFormat: 6408\n  });\n  const testFb = new Framebuffer(gl, {\n    id: `test-framebuffer`,\n    check: false,\n    attachments: {\n      [36064]: testTexture\n    }\n  });\n  const status = testFb.getStatus();\n  testTexture.delete();\n  testFb.delete();\n  return status === 36053;\n}\n\nexport default {\n  [FEATURES.WEBGL2]: [false, true],\n  [FEATURES.VERTEX_ARRAY_OBJECT]: ['OES_vertex_array_object', true],\n  [FEATURES.TIMER_QUERY]: ['EXT_disjoint_timer_query', 'EXT_disjoint_timer_query_webgl2'],\n  [FEATURES.INSTANCED_RENDERING]: ['ANGLE_instanced_arrays', true],\n  [FEATURES.MULTIPLE_RENDER_TARGETS]: ['WEBGL_draw_buffers', true],\n  [FEATURES.ELEMENT_INDEX_UINT32]: ['OES_element_index_uint', true],\n  [FEATURES.BLEND_EQUATION_MINMAX]: ['EXT_blend_minmax', true],\n  [FEATURES.FLOAT_BLEND]: ['EXT_float_blend'],\n  [FEATURES.COLOR_ENCODING_SRGB]: ['EXT_sRGB', true],\n  [FEATURES.TEXTURE_DEPTH]: ['WEBGL_depth_texture', true],\n  [FEATURES.TEXTURE_FLOAT]: ['OES_texture_float', true],\n  [FEATURES.TEXTURE_HALF_FLOAT]: ['OES_texture_half_float', true],\n  [FEATURES.TEXTURE_FILTER_LINEAR_FLOAT]: ['OES_texture_float_linear'],\n  [FEATURES.TEXTURE_FILTER_LINEAR_HALF_FLOAT]: ['OES_texture_half_float_linear'],\n  [FEATURES.TEXTURE_FILTER_ANISOTROPIC]: ['EXT_texture_filter_anisotropic'],\n  [FEATURES.COLOR_ATTACHMENT_RGBA32F]: [checkFloat32ColorAttachment, 'EXT_color_buffer_float'],\n  [FEATURES.COLOR_ATTACHMENT_FLOAT]: [false, 'EXT_color_buffer_float'],\n  [FEATURES.COLOR_ATTACHMENT_HALF_FLOAT]: ['EXT_color_buffer_half_float'],\n  [FEATURES.GLSL_FRAG_DATA]: ['WEBGL_draw_buffers', true],\n  [FEATURES.GLSL_FRAG_DEPTH]: ['EXT_frag_depth', true],\n  [FEATURES.GLSL_DERIVATIVES]: ['OES_standard_derivatives', true],\n  [FEATURES.GLSL_TEXTURE_LOD]: ['EXT_shader_texture_lod', true]\n};\n//# sourceMappingURL=webgl-features-table.js.map","import WEBGL_FEATURES from './webgl-features-table';\nimport { isWebGL2, log } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nconst LOG_UNSUPPORTED_FEATURE = 2;\nexport function hasFeature(gl, feature) {\n  return hasFeatures(gl, feature);\n}\nexport function hasFeatures(gl, features) {\n  features = Array.isArray(features) ? features : [features];\n  return features.every(feature => {\n    return isFeatureSupported(gl, feature);\n  });\n}\nexport function getFeatures(gl) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  for (const cap in WEBGL_FEATURES) {\n    if (gl.luma.caps[cap] === undefined) {\n      gl.luma.caps[cap] = isFeatureSupported(gl, cap);\n    }\n  }\n\n  return gl.luma.caps;\n}\n\nfunction isFeatureSupported(gl, cap) {\n  gl.luma = gl.luma || {};\n  gl.luma.caps = gl.luma.caps || {};\n\n  if (gl.luma.caps[cap] === undefined) {\n    gl.luma.caps[cap] = queryFeature(gl, cap);\n  }\n\n  if (!gl.luma.caps[cap]) {\n    log.log(LOG_UNSUPPORTED_FEATURE, `Feature: ${cap} not supported`)();\n  }\n\n  return gl.luma.caps[cap];\n}\n\nfunction queryFeature(gl, cap) {\n  const feature = WEBGL_FEATURES[cap];\n  assert(feature, cap);\n  let isSupported;\n  const featureDefinition = isWebGL2(gl) ? feature[1] || feature[0] : feature[0];\n\n  if (typeof featureDefinition === 'function') {\n    isSupported = featureDefinition(gl);\n  } else if (Array.isArray(featureDefinition)) {\n    isSupported = true;\n\n    for (const extension of featureDefinition) {\n      isSupported = isSupported && Boolean(gl.getExtension(extension));\n    }\n  } else if (typeof featureDefinition === 'string') {\n    isSupported = Boolean(gl.getExtension(featureDefinition));\n  } else if (typeof featureDefinition === 'boolean') {\n    isSupported = featureDefinition;\n  } else {\n    assert(false);\n  }\n\n  return isSupported;\n}\n//# sourceMappingURL=features.js.map","import { getWebGL2Context, assertWebGL2Context, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Texture2D from './texture-2d';\nimport Renderbuffer from './renderbuffer';\nimport { clear, clearBuffer } from './clear';\nimport { copyToDataUrl } from './copy-and-blit.js';\nimport { getFeatures } from '../features';\nimport { getKey } from '../webgl-utils/constants-to-keys';\nimport { assert } from '../utils/assert';\nconst ERR_MULTIPLE_RENDERTARGETS = 'Multiple render targets not supported';\nexport default class Framebuffer extends Resource {\n  static isSupported(gl, options = {}) {\n    const {\n      colorBufferFloat,\n      colorBufferHalfFloat\n    } = options;\n    let supported = true;\n\n    if (colorBufferFloat) {\n      supported = Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('WEBGL_color_buffer_float') || gl.getExtension('OES_texture_float'));\n    }\n\n    if (colorBufferHalfFloat) {\n      supported = supported && Boolean(gl.getExtension('EXT_color_buffer_float') || gl.getExtension('EXT_color_buffer_half_float'));\n    }\n\n    return supported;\n  }\n\n  static getDefaultFramebuffer(gl) {\n    gl.luma = gl.luma || {};\n    gl.luma.defaultFramebuffer = gl.luma.defaultFramebuffer || new Framebuffer(gl, {\n      id: 'default-framebuffer',\n      handle: null,\n      attachments: {}\n    });\n    return gl.luma.defaultFramebuffer;\n  }\n\n  get MAX_COLOR_ATTACHMENTS() {\n    const gl2 = assertWebGL2Context(this.gl);\n    return gl2.getParameter(gl2.MAX_COLOR_ATTACHMENTS);\n  }\n\n  get MAX_DRAW_BUFFERS() {\n    const gl2 = assertWebGL2Context(this.gl);\n    return gl2.getParameter(gl2.MAX_DRAW_BUFFERS);\n  }\n\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    this.width = null;\n    this.height = null;\n    this.attachments = {};\n    this.readBuffer = 36064;\n    this.drawBuffers = [36064];\n    this.ownResources = [];\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  get color() {\n    return this.attachments[36064] || null;\n  }\n\n  get texture() {\n    return this.attachments[36064] || null;\n  }\n\n  get depth() {\n    return this.attachments[36096] || this.attachments[33306] || null;\n  }\n\n  get stencil() {\n    return this.attachments[36128] || this.attachments[33306] || null;\n  }\n\n  initialize({\n    width = 1,\n    height = 1,\n    attachments = null,\n    color = true,\n    depth = true,\n    stencil = false,\n    check = true,\n    readBuffer = undefined,\n    drawBuffers = undefined\n  }) {\n    assert(width >= 0 && height >= 0, 'Width and height need to be integers');\n    this.width = width;\n    this.height = height;\n\n    if (attachments) {\n      for (const attachment in attachments) {\n        const target = attachments[attachment];\n        const object = Array.isArray(target) ? target[0] : target;\n        object.resize({\n          width,\n          height\n        });\n      }\n    } else {\n      attachments = this._createDefaultAttachments(color, depth, stencil, width, height);\n    }\n\n    this.update({\n      clearAttachments: true,\n      attachments,\n      readBuffer,\n      drawBuffers\n    });\n\n    if (attachments && check) {\n      this.checkStatus();\n    }\n  }\n\n  delete() {\n    for (const resource of this.ownResources) {\n      resource.delete();\n    }\n\n    super.delete();\n    return this;\n  }\n\n  update({\n    attachments = {},\n    readBuffer,\n    drawBuffers,\n    clearAttachments = false,\n    resizeAttachments = true\n  }) {\n    this.attach(attachments, {\n      clearAttachments,\n      resizeAttachments\n    });\n    const {\n      gl\n    } = this;\n    const prevHandle = gl.bindFramebuffer(36160, this.handle);\n\n    if (readBuffer) {\n      this._setReadBuffer(readBuffer);\n    }\n\n    if (drawBuffers) {\n      this._setDrawBuffers(drawBuffers);\n    }\n\n    gl.bindFramebuffer(36160, prevHandle || null);\n    return this;\n  }\n\n  resize(options = {}) {\n    let {\n      width,\n      height\n    } = options;\n\n    if (this.handle === null) {\n      assert(width === undefined && height === undefined);\n      this.width = this.gl.drawingBufferWidth;\n      this.height = this.gl.drawingBufferHeight;\n      return this;\n    }\n\n    if (width === undefined) {\n      width = this.gl.drawingBufferWidth;\n    }\n\n    if (height === undefined) {\n      height = this.gl.drawingBufferHeight;\n    }\n\n    if (width !== this.width && height !== this.height) {\n      log.log(2, `Resizing framebuffer ${this.id} to ${width}x${height}`)();\n    }\n\n    for (const attachmentPoint in this.attachments) {\n      this.attachments[attachmentPoint].resize({\n        width,\n        height\n      });\n    }\n\n    this.width = width;\n    this.height = height;\n    return this;\n  }\n\n  attach(attachments, {\n    clearAttachments = false,\n    resizeAttachments = true\n  } = {}) {\n    const newAttachments = {};\n\n    if (clearAttachments) {\n      Object.keys(this.attachments).forEach(key => {\n        newAttachments[key] = null;\n      });\n    }\n\n    Object.assign(newAttachments, attachments);\n    const prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n    for (const key in newAttachments) {\n      assert(key !== undefined, 'Misspelled framebuffer binding point?');\n      const attachment = Number(key);\n      const descriptor = newAttachments[attachment];\n      let object = descriptor;\n\n      if (!object) {\n        this._unattach(attachment);\n      } else if (object instanceof Renderbuffer) {\n        this._attachRenderbuffer({\n          attachment,\n          renderbuffer: object\n        });\n      } else if (Array.isArray(descriptor)) {\n        const [texture, layer = 0, level = 0] = descriptor;\n        object = texture;\n\n        this._attachTexture({\n          attachment,\n          texture,\n          layer,\n          level\n        });\n      } else {\n        this._attachTexture({\n          attachment,\n          texture: object,\n          layer: 0,\n          level: 0\n        });\n      }\n\n      if (resizeAttachments && object) {\n        object.resize({\n          width: this.width,\n          height: this.height\n        });\n      }\n    }\n\n    this.gl.bindFramebuffer(36160, prevHandle || null);\n    Object.assign(this.attachments, attachments);\n    Object.keys(this.attachments).filter(key => !this.attachments[key]).forEach(key => {\n      delete this.attachments[key];\n    });\n  }\n\n  checkStatus() {\n    const {\n      gl\n    } = this;\n    const status = this.getStatus();\n\n    if (status !== 36053) {\n      throw new Error(_getFrameBufferStatus(status));\n    }\n\n    return this;\n  }\n\n  getStatus() {\n    const {\n      gl\n    } = this;\n    const prevHandle = gl.bindFramebuffer(36160, this.handle);\n    const status = gl.checkFramebufferStatus(36160);\n    gl.bindFramebuffer(36160, prevHandle || null);\n    return status;\n  }\n\n  clear(options = {}) {\n    const {\n      color,\n      depth,\n      stencil,\n      drawBuffers = []\n    } = options;\n    const prevHandle = this.gl.bindFramebuffer(36160, this.handle);\n\n    if (color || depth || stencil) {\n      clear(this.gl, {\n        color,\n        depth,\n        stencil\n      });\n    }\n\n    drawBuffers.forEach((value, drawBuffer) => {\n      clearBuffer(this.gl, {\n        drawBuffer,\n        value\n      });\n    });\n    this.gl.bindFramebuffer(36160, prevHandle || null);\n    return this;\n  }\n\n  readPixels(opts = {}) {\n    log.error('Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)')();\n    return null;\n  }\n\n  readPixelsToBuffer(opts = {}) {\n    log.error('Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)')();\n    return null;\n  }\n\n  copyToDataUrl(opts = {}) {\n    log.error('Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)')();\n    return null;\n  }\n\n  copyToImage(opts = {}) {\n    log.error('Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)')();\n    return null;\n  }\n\n  copyToTexture(opts = {}) {\n    log.error('Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})')();\n    return null;\n  }\n\n  blit(opts = {}) {\n    log.error('Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)')();\n    return null;\n  }\n\n  invalidate({\n    attachments = [],\n    x = 0,\n    y = 0,\n    width,\n    height\n  }) {\n    const gl2 = assertWebGL2Context(this.gl);\n    const prevHandle = gl2.bindFramebuffer(36008, this.handle);\n    const invalidateAll = x === 0 && y === 0 && width === undefined && height === undefined;\n\n    if (invalidateAll) {\n      gl2.invalidateFramebuffer(36008, attachments);\n    } else {\n      gl2.invalidateFramebuffer(36008, attachments, x, y, width, height);\n    }\n\n    gl2.bindFramebuffer(36008, prevHandle);\n    return this;\n  }\n\n  getAttachmentParameter(attachment, pname, keys) {\n    let value = this._getAttachmentParameterFallback(pname);\n\n    if (value === null) {\n      this.gl.bindFramebuffer(36160, this.handle);\n      value = this.gl.getFramebufferAttachmentParameter(36160, attachment, pname);\n      this.gl.bindFramebuffer(36160, null);\n    }\n\n    if (keys && value > 1000) {\n      value = getKey(this.gl, value);\n    }\n\n    return value;\n  }\n\n  getAttachmentParameters(attachment = 36064, keys, parameters = this.constructor.ATTACHMENT_PARAMETERS || []) {\n    const values = {};\n\n    for (const pname of parameters) {\n      const key = keys ? getKey(this.gl, pname) : pname;\n      values[key] = this.getAttachmentParameter(attachment, pname, keys);\n    }\n\n    return values;\n  }\n\n  getParameters(keys = true) {\n    const attachments = Object.keys(this.attachments);\n    const parameters = {};\n\n    for (const attachmentName of attachments) {\n      const attachment = Number(attachmentName);\n      const key = keys ? getKey(this.gl, attachment) : attachment;\n      parameters[key] = this.getAttachmentParameters(attachment, keys);\n    }\n\n    return parameters;\n  }\n\n  show() {\n    if (typeof window !== 'undefined') {\n      window.open(copyToDataUrl(this), 'luma-debug-texture');\n    }\n\n    return this;\n  }\n\n  log(logLevel = 0, message = '') {\n    if (logLevel > log.level || typeof window === 'undefined') {\n      return this;\n    }\n\n    message = message || `Framebuffer ${this.id}`;\n    const image = copyToDataUrl(this, {\n      targetMaxHeight: 100\n    });\n    log.image({\n      logLevel,\n      message,\n      image\n    }, message)();\n    return this;\n  }\n\n  bind({\n    target = 36160\n  } = {}) {\n    this.gl.bindFramebuffer(target, this.handle);\n    return this;\n  }\n\n  unbind({\n    target = 36160\n  } = {}) {\n    this.gl.bindFramebuffer(target, null);\n    return this;\n  }\n\n  _createDefaultAttachments(color, depth, stencil, width, height) {\n    let defaultAttachments = null;\n\n    if (color) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[36064] = new Texture2D(this.gl, {\n        id: `${this.id}-color0`,\n        pixels: null,\n        format: 6408,\n        type: 5121,\n        width,\n        height,\n        mipmaps: false,\n        parameters: {\n          [10241]: 9729,\n          [10240]: 9729,\n          [10242]: 33071,\n          [10243]: 33071\n        }\n      });\n      this.ownResources.push(defaultAttachments[36064]);\n    }\n\n    if (depth && stencil) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[33306] = new Renderbuffer(this.gl, {\n        id: `${this.id}-depth-stencil`,\n        format: 35056,\n        width,\n        height: 111\n      });\n      this.ownResources.push(defaultAttachments[33306]);\n    } else if (depth) {\n      defaultAttachments = defaultAttachments || {};\n      defaultAttachments[36096] = new Renderbuffer(this.gl, {\n        id: `${this.id}-depth`,\n        format: 33189,\n        width,\n        height\n      });\n      this.ownResources.push(defaultAttachments[36096]);\n    } else if (stencil) {\n      assert(false);\n    }\n\n    return defaultAttachments;\n  }\n\n  _unattach(attachment) {\n    const oldAttachment = this.attachments[attachment];\n\n    if (!oldAttachment) {\n      return;\n    }\n\n    if (oldAttachment instanceof Renderbuffer) {\n      this.gl.framebufferRenderbuffer(36160, attachment, 36161, null);\n    } else {\n      this.gl.framebufferTexture2D(36160, attachment, 3553, null, 0);\n    }\n\n    delete this.attachments[attachment];\n  }\n\n  _attachRenderbuffer({\n    attachment = 36064,\n    renderbuffer\n  }) {\n    const {\n      gl\n    } = this;\n    gl.framebufferRenderbuffer(36160, attachment, 36161, renderbuffer.handle);\n    this.attachments[attachment] = renderbuffer;\n  }\n\n  _attachTexture({\n    attachment = 36064,\n    texture,\n    layer,\n    level\n  }) {\n    const {\n      gl\n    } = this;\n    gl.bindTexture(texture.target, texture.handle);\n\n    switch (texture.target) {\n      case 35866:\n      case 32879:\n        const gl2 = assertWebGL2Context(gl);\n        gl2.framebufferTextureLayer(36160, attachment, texture.target, level, layer);\n        break;\n\n      case 34067:\n        const face = mapIndexToCubeMapFace(layer);\n        gl.framebufferTexture2D(36160, attachment, face, texture.handle, level);\n        break;\n\n      case 3553:\n        gl.framebufferTexture2D(36160, attachment, 3553, texture.handle, level);\n        break;\n\n      default:\n        assert(false, 'Illegal texture type');\n    }\n\n    gl.bindTexture(texture.target, null);\n    this.attachments[attachment] = texture;\n  }\n\n  _setReadBuffer(readBuffer) {\n    const gl2 = getWebGL2Context(this.gl);\n\n    if (gl2) {\n      gl2.readBuffer(readBuffer);\n    } else {\n      assert(readBuffer === 36064 || readBuffer === 1029, ERR_MULTIPLE_RENDERTARGETS);\n    }\n\n    this.readBuffer = readBuffer;\n  }\n\n  _setDrawBuffers(drawBuffers) {\n    const {\n      gl\n    } = this;\n    const gl2 = assertWebGL2Context(gl);\n\n    if (gl2) {\n      gl2.drawBuffers(drawBuffers);\n    } else {\n      const ext = gl.getExtension('WEBGL_draw_buffers');\n\n      if (ext) {\n        ext.drawBuffersWEBGL(drawBuffers);\n      } else {\n        assert(drawBuffers.length === 1 && (drawBuffers[0] === 36064 || drawBuffers[0] === 1029), ERR_MULTIPLE_RENDERTARGETS);\n      }\n    }\n\n    this.drawBuffers = drawBuffers;\n  }\n\n  _getAttachmentParameterFallback(pname) {\n    const caps = getFeatures(this.gl);\n\n    switch (pname) {\n      case 36052:\n        return !caps.WEBGL2 ? 0 : null;\n\n      case 33298:\n      case 33299:\n      case 33300:\n      case 33301:\n      case 33302:\n      case 33303:\n        return !caps.WEBGL2 ? 8 : null;\n\n      case 33297:\n        return !caps.WEBGL2 ? 5125 : null;\n\n      case 33296:\n        return !caps.WEBGL2 && !caps.EXT_sRGB ? 9729 : null;\n\n      default:\n        return null;\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createFramebuffer();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteFramebuffer(this.handle);\n  }\n\n  _bindHandle(handle) {\n    return this.gl.bindFramebuffer(36160, handle);\n  }\n\n}\n\nfunction mapIndexToCubeMapFace(layer) {\n  return layer < 34069 ? layer + 34069 : layer;\n}\n\nfunction _getFrameBufferStatus(status) {\n  const STATUS = Framebuffer.STATUS || {};\n  return STATUS[status] || `Framebuffer error ${status}`;\n}\n\nexport const FRAMEBUFFER_ATTACHMENT_PARAMETERS = [36049, 36048, 33296, 33298, 33299, 33300, 33301, 33302, 33303];\nFramebuffer.ATTACHMENT_PARAMETERS = FRAMEBUFFER_ATTACHMENT_PARAMETERS;\n//# sourceMappingURL=framebuffer.js.map","import { log } from '@luma.gl/gltools';\nimport Framebuffer from './framebuffer';\nimport Renderbuffer from './renderbuffer';\nimport Texture from './texture';\nimport { assert } from '../utils/assert';\nconst UNIFORM_SETTERS = {\n  [5126]: getArraySetter.bind(null, 'uniform1fv', toFloatArray, 1, setVectorUniform),\n  [35664]: getArraySetter.bind(null, 'uniform2fv', toFloatArray, 2, setVectorUniform),\n  [35665]: getArraySetter.bind(null, 'uniform3fv', toFloatArray, 3, setVectorUniform),\n  [35666]: getArraySetter.bind(null, 'uniform4fv', toFloatArray, 4, setVectorUniform),\n  [5124]: getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform),\n  [35667]: getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform),\n  [35668]: getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform),\n  [35669]: getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform),\n  [35670]: getArraySetter.bind(null, 'uniform1iv', toIntArray, 1, setVectorUniform),\n  [35671]: getArraySetter.bind(null, 'uniform2iv', toIntArray, 2, setVectorUniform),\n  [35672]: getArraySetter.bind(null, 'uniform3iv', toIntArray, 3, setVectorUniform),\n  [35673]: getArraySetter.bind(null, 'uniform4iv', toIntArray, 4, setVectorUniform),\n  [35674]: getArraySetter.bind(null, 'uniformMatrix2fv', toFloatArray, 4, setMatrixUniform),\n  [35675]: getArraySetter.bind(null, 'uniformMatrix3fv', toFloatArray, 9, setMatrixUniform),\n  [35676]: getArraySetter.bind(null, 'uniformMatrix4fv', toFloatArray, 16, setMatrixUniform),\n  [35678]: getSamplerSetter,\n  [35680]: getSamplerSetter,\n  [5125]: getArraySetter.bind(null, 'uniform1uiv', toUIntArray, 1, setVectorUniform),\n  [36294]: getArraySetter.bind(null, 'uniform2uiv', toUIntArray, 2, setVectorUniform),\n  [36295]: getArraySetter.bind(null, 'uniform3uiv', toUIntArray, 3, setVectorUniform),\n  [36296]: getArraySetter.bind(null, 'uniform4uiv', toUIntArray, 4, setVectorUniform),\n  [35685]: getArraySetter.bind(null, 'uniformMatrix2x3fv', toFloatArray, 6, setMatrixUniform),\n  [35686]: getArraySetter.bind(null, 'uniformMatrix2x4fv', toFloatArray, 8, setMatrixUniform),\n  [35687]: getArraySetter.bind(null, 'uniformMatrix3x2fv', toFloatArray, 6, setMatrixUniform),\n  [35688]: getArraySetter.bind(null, 'uniformMatrix3x4fv', toFloatArray, 12, setMatrixUniform),\n  [35689]: getArraySetter.bind(null, 'uniformMatrix4x2fv', toFloatArray, 8, setMatrixUniform),\n  [35690]: getArraySetter.bind(null, 'uniformMatrix4x3fv', toFloatArray, 12, setMatrixUniform),\n  [35678]: getSamplerSetter,\n  [35680]: getSamplerSetter,\n  [35679]: getSamplerSetter,\n  [35682]: getSamplerSetter,\n  [36289]: getSamplerSetter,\n  [36292]: getSamplerSetter,\n  [36293]: getSamplerSetter,\n  [36298]: getSamplerSetter,\n  [36299]: getSamplerSetter,\n  [36300]: getSamplerSetter,\n  [36303]: getSamplerSetter,\n  [36306]: getSamplerSetter,\n  [36307]: getSamplerSetter,\n  [36308]: getSamplerSetter,\n  [36311]: getSamplerSetter\n};\nconst FLOAT_ARRAY = {};\nconst INT_ARRAY = {};\nconst UINT_ARRAY = {};\nconst array1 = [0];\n\nfunction toTypedArray(value, uniformLength, Type, cache) {\n  if (uniformLength === 1 && typeof value === 'boolean') {\n    value = value ? 1 : 0;\n  }\n\n  if (Number.isFinite(value)) {\n    array1[0] = value;\n    value = array1;\n  }\n\n  const length = value.length;\n\n  if (length % uniformLength) {\n    log.warn(`Uniform size should be multiples of ${uniformLength}`, value)();\n  }\n\n  if (value instanceof Type) {\n    return value;\n  }\n\n  let result = cache[length];\n\n  if (!result) {\n    result = new Type(length);\n    cache[length] = result;\n  }\n\n  for (let i = 0; i < length; i++) {\n    result[i] = value[i];\n  }\n\n  return result;\n}\n\nfunction toFloatArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Float32Array, FLOAT_ARRAY);\n}\n\nfunction toIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Int32Array, INT_ARRAY);\n}\n\nfunction toUIntArray(value, uniformLength) {\n  return toTypedArray(value, uniformLength, Uint32Array, UINT_ARRAY);\n}\n\nexport function getUniformSetter(gl, location, info) {\n  const setter = UNIFORM_SETTERS[info.type];\n\n  if (!setter) {\n    throw new Error(`Unknown GLSL uniform type ${info.type}`);\n  }\n\n  return setter().bind(null, gl, location);\n}\nexport function parseUniformName(name) {\n  if (name[name.length - 1] !== ']') {\n    return {\n      name,\n      length: 1,\n      isArray: false\n    };\n  }\n\n  const UNIFORM_NAME_REGEXP = /([^[]*)(\\[[0-9]+\\])?/;\n  const matches = name.match(UNIFORM_NAME_REGEXP);\n\n  if (!matches || matches.length < 2) {\n    throw new Error(`Failed to parse GLSL uniform name ${name}`);\n  }\n\n  return {\n    name: matches[1],\n    length: matches[2] || 1,\n    isArray: Boolean(matches[2])\n  };\n}\nexport function checkUniformValues(uniforms, source, uniformMap) {\n  for (const uniformName in uniforms) {\n    const value = uniforms[uniformName];\n    const shouldCheck = !uniformMap || Boolean(uniformMap[uniformName]);\n\n    if (shouldCheck && !checkUniformValue(value)) {\n      source = source ? `${source} ` : '';\n      console.error(`${source} Bad uniform ${uniformName}`, value);\n      throw new Error(`${source} Bad uniform ${uniformName}`);\n    }\n  }\n\n  return true;\n}\n\nfunction checkUniformValue(value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    return checkUniformArray(value);\n  }\n\n  if (isFinite(value)) {\n    return true;\n  } else if (value === true || value === false) {\n    return true;\n  } else if (value instanceof Texture) {\n    return true;\n  } else if (value instanceof Renderbuffer) {\n    return true;\n  } else if (value instanceof Framebuffer) {\n    return Boolean(value.texture);\n  }\n\n  return false;\n}\n\nexport function copyUniform(uniforms, key, value) {\n  if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n    if (uniforms[key]) {\n      const dest = uniforms[key];\n\n      for (let i = 0, len = value.length; i < len; ++i) {\n        dest[i] = value[i];\n      }\n    } else {\n      uniforms[key] = value.slice();\n    }\n  } else {\n    uniforms[key] = value;\n  }\n}\n\nfunction checkUniformArray(value) {\n  if (value.length === 0) {\n    return false;\n  }\n\n  const checkLength = Math.min(value.length, 16);\n\n  for (let i = 0; i < checkLength; ++i) {\n    if (!Number.isFinite(value[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction getSamplerSetter() {\n  let cache = null;\n  return (gl, location, value) => {\n    const update = cache !== value;\n\n    if (update) {\n      gl.uniform1i(location, value);\n      cache = value;\n    }\n\n    return update;\n  };\n}\n\nfunction getArraySetter(functionName, toArray, size, uniformSetter) {\n  let cache = null;\n  let cacheLength = null;\n  return (gl, location, value) => {\n    const arrayValue = toArray(value, size);\n    const length = arrayValue.length;\n    let update = false;\n\n    if (cache === null) {\n      cache = new Float32Array(length);\n      cacheLength = length;\n      update = true;\n    } else {\n      assert(cacheLength === length, 'Uniform length cannot change.');\n\n      for (let i = 0; i < length; ++i) {\n        if (arrayValue[i] !== cache[i]) {\n          update = true;\n          break;\n        }\n      }\n    }\n\n    if (update) {\n      uniformSetter(gl, functionName, location, arrayValue);\n      cache.set(arrayValue);\n    }\n\n    return update;\n  };\n}\n\nfunction setVectorUniform(gl, functionName, location, value) {\n  gl[functionName](location, value);\n}\n\nfunction setMatrixUniform(gl, functionName, location, value) {\n  gl[functionName](location, false, value);\n}\n//# sourceMappingURL=uniforms.js.map","export default function getShaderName(shader, defaultName = 'unnamed') {\n  const SHADER_NAME_REGEXP = /#define[\\s*]SHADER_NAME[\\s*]([A-Za-z0-9_-]+)[\\s*]/;\n  const match = shader.match(SHADER_NAME_REGEXP);\n  return match ? match[1] : defaultName;\n}\n//# sourceMappingURL=get-shader-name.js.map","const GL_FRAGMENT_SHADER = 0x8b30;\nconst GL_VERTEX_SHADER = 0x8b31;\nexport default function getShaderTypeName(type) {\n  switch (type) {\n    case GL_FRAGMENT_SHADER:\n      return 'fragment';\n\n    case GL_VERTEX_SHADER:\n      return 'vertex';\n\n    default:\n      return 'unknown type';\n  }\n}\n//# sourceMappingURL=get-shader-type-name.js.map","import getShaderName from './get-shader-name';\nimport getShaderTypeName from './get-shader-type-name';\nexport default function formatGLSLCompilerError(errLog, src, shaderType) {\n  const {\n    shaderName,\n    errors,\n    warnings\n  } = parseGLSLCompilerError(errLog, src, shaderType);\n  return `GLSL compilation error in ${shaderName}\\n\\n${errors}\\n${warnings}`;\n}\nexport function parseGLSLCompilerError(errLog, src, shaderType, shaderName) {\n  const errorStrings = errLog.split(/\\r?\\n/);\n  const errors = {};\n  const warnings = {};\n  const name = shaderName || getShaderName(src) || '(unnamed)';\n  const shaderDescription = `${getShaderTypeName(shaderType)} shader ${name}`;\n\n  for (let i = 0; i < errorStrings.length; i++) {\n    const errorString = errorStrings[i];\n\n    if (errorString.length <= 1) {\n      continue;\n    }\n\n    const segments = errorString.split(':');\n    const type = segments[0];\n    const line = parseInt(segments[2], 10);\n\n    if (isNaN(line)) {\n      throw new Error(`GLSL compilation error in ${shaderDescription}: ${errLog}`);\n    }\n\n    if (type !== 'WARNING') {\n      errors[line] = errorString;\n    } else {\n      warnings[line] = errorString;\n    }\n  }\n\n  const lines = addLineNumbers(src);\n  return {\n    shaderName: shaderDescription,\n    errors: formatErrors(errors, lines),\n    warnings: formatErrors(warnings, lines)\n  };\n}\n\nfunction formatErrors(errors, lines) {\n  let message = '';\n\n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i];\n\n    if (!errors[i + 3] && !errors[i + 2] && !errors[i + 1]) {\n      continue;\n    }\n\n    message += `${line}\\n`;\n\n    if (errors[i + 1]) {\n      const error = errors[i + 1];\n      const segments = error.split(':', 3);\n      const type = segments[0];\n      const column = parseInt(segments[1], 10) || 0;\n      const err = error.substring(segments.join(':').length + 1).trim();\n      message += padLeft(`^^^ ${type}: ${err}\\n\\n`, column);\n    }\n  }\n\n  return message;\n}\n\nfunction addLineNumbers(string, start = 1, delim = ': ') {\n  const lines = string.split(/\\r?\\n/);\n  const maxDigits = String(lines.length + start - 1).length;\n  return lines.map((line, i) => {\n    const lineNumber = String(i + start);\n    const digits = lineNumber.length;\n    const prefix = padLeft(lineNumber, maxDigits - digits);\n    return prefix + delim + line;\n  });\n}\n\nfunction padLeft(string, digits) {\n  let result = '';\n\n  for (let i = 0; i < digits; ++i) {\n    result += ' ';\n  }\n\n  return `${result}${string}`;\n}\n//# sourceMappingURL=format-glsl-error.js.map","import { assertWebGLContext, log } from '@luma.gl/gltools';\nimport { parseGLSLCompilerError, getShaderName } from '../glsl-utils';\nimport { assert } from '../utils/assert';\nimport { uid } from '../utils/utils';\nimport Resource from './resource';\nconst ERR_SOURCE = 'Shader: GLSL source code must be a JavaScript string';\nexport class Shader extends Resource {\n  static getTypeName(shaderType) {\n    switch (shaderType) {\n      case 35633:\n        return 'vertex-shader';\n\n      case 35632:\n        return 'fragment-shader';\n\n      default:\n        assert(false);\n        return 'unknown';\n    }\n  }\n\n  constructor(gl, props) {\n    assertWebGLContext(gl);\n    assert(typeof props.source === 'string', ERR_SOURCE);\n    const id = getShaderName(props.source, null) || props.id || uid(`unnamed ${Shader.getTypeName(props.shaderType)}`);\n    super(gl, {\n      id\n    });\n    this.shaderType = props.shaderType;\n    this.source = props.source;\n    this.initialize(props);\n  }\n\n  initialize({\n    source\n  }) {\n    const shaderName = getShaderName(source, null);\n\n    if (shaderName) {\n      this.id = uid(shaderName);\n    }\n\n    this._compile(source);\n  }\n\n  getParameter(pname) {\n    return this.gl.getShaderParameter(this.handle, pname);\n  }\n\n  toString() {\n    return `${Shader.getTypeName(this.shaderType)}:${this.id}`;\n  }\n\n  getName() {\n    return getShaderName(this.source) || 'unnamed-shader';\n  }\n\n  getSource() {\n    return this.gl.getShaderSource(this.handle);\n  }\n\n  getTranslatedSource() {\n    const extension = this.gl.getExtension('WEBGL_debug_shaders');\n    return extension ? extension.getTranslatedShaderSource(this.handle) : 'No translated source available. WEBGL_debug_shaders not implemented';\n  }\n\n  _compile(source = this.source) {\n    if (!source.startsWith('#version ')) {\n      source = `#version 100\\n${source}`;\n    }\n\n    this.source = source;\n    this.gl.shaderSource(this.handle, this.source);\n    this.gl.compileShader(this.handle);\n    const compileStatus = this.getParameter(35713);\n\n    if (!compileStatus) {\n      const infoLog = this.gl.getShaderInfoLog(this.handle);\n      const {\n        shaderName,\n        errors,\n        warnings\n      } = parseGLSLCompilerError(infoLog, this.source, this.shaderType, this.id);\n      log.error(`GLSL compilation errors in ${shaderName}\\n${errors}`)();\n      log.warn(`GLSL compilation warnings in ${shaderName}\\n${warnings}`)();\n      throw new Error(`GLSL compilation errors in ${shaderName}`);\n    }\n  }\n\n  _deleteHandle() {\n    this.gl.deleteShader(this.handle);\n  }\n\n  _getOptsFromHandle() {\n    return {\n      type: this.getParameter(35663),\n      source: this.getSource()\n    };\n  }\n\n}\nexport class VertexShader extends Shader {\n  constructor(gl, props) {\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    super(gl, Object.assign({}, props, {\n      shaderType: 35633\n    }));\n  }\n\n  _createHandle() {\n    return this.gl.createShader(35633);\n  }\n\n}\nexport class FragmentShader extends Shader {\n  constructor(gl, props) {\n    if (typeof props === 'string') {\n      props = {\n        source: props\n      };\n    }\n\n    super(gl, Object.assign({}, props, {\n      shaderType: 35632\n    }));\n  }\n\n  _createHandle() {\n    return this.gl.createShader(35632);\n  }\n\n}\n//# sourceMappingURL=shader.js.map","import { assert } from '../utils/assert';\nconst GL_BYTE = 0x1400;\nconst GL_UNSIGNED_BYTE = 0x1401;\nconst GL_SHORT = 0x1402;\nconst GL_UNSIGNED_SHORT = 0x1403;\nconst GL_POINTS = 0x0;\nconst GL_LINES = 0x1;\nconst GL_LINE_LOOP = 0x2;\nconst GL_LINE_STRIP = 0x3;\nconst GL_TRIANGLES = 0x4;\nconst GL_TRIANGLE_STRIP = 0x5;\nconst GL_TRIANGLE_FAN = 0x6;\nconst GL_FLOAT = 0x1406;\nconst GL_FLOAT_VEC2 = 0x8b50;\nconst GL_FLOAT_VEC3 = 0x8b51;\nconst GL_FLOAT_VEC4 = 0x8b52;\nconst GL_INT = 0x1404;\nconst GL_INT_VEC2 = 0x8b53;\nconst GL_INT_VEC3 = 0x8b54;\nconst GL_INT_VEC4 = 0x8b55;\nconst GL_UNSIGNED_INT = 0x1405;\nconst GL_UNSIGNED_INT_VEC2 = 0x8dc6;\nconst GL_UNSIGNED_INT_VEC3 = 0x8dc7;\nconst GL_UNSIGNED_INT_VEC4 = 0x8dc8;\nconst GL_BOOL = 0x8b56;\nconst GL_BOOL_VEC2 = 0x8b57;\nconst GL_BOOL_VEC3 = 0x8b58;\nconst GL_BOOL_VEC4 = 0x8b59;\nconst GL_FLOAT_MAT2 = 0x8b5a;\nconst GL_FLOAT_MAT3 = 0x8b5b;\nconst GL_FLOAT_MAT4 = 0x8b5c;\nconst GL_FLOAT_MAT2x3 = 0x8b65;\nconst GL_FLOAT_MAT2x4 = 0x8b66;\nconst GL_FLOAT_MAT3x2 = 0x8b67;\nconst GL_FLOAT_MAT3x4 = 0x8b68;\nconst GL_FLOAT_MAT4x2 = 0x8b69;\nconst GL_FLOAT_MAT4x3 = 0x8b6a;\nconst COMPOSITE_GL_TYPES = {\n  [GL_FLOAT]: [GL_FLOAT, 1, 'float'],\n  [GL_FLOAT_VEC2]: [GL_FLOAT, 2, 'vec2'],\n  [GL_FLOAT_VEC3]: [GL_FLOAT, 3, 'vec3'],\n  [GL_FLOAT_VEC4]: [GL_FLOAT, 4, 'vec4'],\n  [GL_INT]: [GL_INT, 1, 'int'],\n  [GL_INT_VEC2]: [GL_INT, 2, 'ivec2'],\n  [GL_INT_VEC3]: [GL_INT, 3, 'ivec3'],\n  [GL_INT_VEC4]: [GL_INT, 4, 'ivec4'],\n  [GL_UNSIGNED_INT]: [GL_UNSIGNED_INT, 1, 'uint'],\n  [GL_UNSIGNED_INT_VEC2]: [GL_UNSIGNED_INT, 2, 'uvec2'],\n  [GL_UNSIGNED_INT_VEC3]: [GL_UNSIGNED_INT, 3, 'uvec3'],\n  [GL_UNSIGNED_INT_VEC4]: [GL_UNSIGNED_INT, 4, 'uvec4'],\n  [GL_BOOL]: [GL_FLOAT, 1, 'bool'],\n  [GL_BOOL_VEC2]: [GL_FLOAT, 2, 'bvec2'],\n  [GL_BOOL_VEC3]: [GL_FLOAT, 3, 'bvec3'],\n  [GL_BOOL_VEC4]: [GL_FLOAT, 4, 'bvec4'],\n  [GL_FLOAT_MAT2]: [GL_FLOAT, 8, 'mat2'],\n  [GL_FLOAT_MAT2x3]: [GL_FLOAT, 8, 'mat2x3'],\n  [GL_FLOAT_MAT2x4]: [GL_FLOAT, 8, 'mat2x4'],\n  [GL_FLOAT_MAT3]: [GL_FLOAT, 12, 'mat3'],\n  [GL_FLOAT_MAT3x2]: [GL_FLOAT, 12, 'mat3x2'],\n  [GL_FLOAT_MAT3x4]: [GL_FLOAT, 12, 'mat3x4'],\n  [GL_FLOAT_MAT4]: [GL_FLOAT, 16, 'mat4'],\n  [GL_FLOAT_MAT4x2]: [GL_FLOAT, 16, 'mat4x2'],\n  [GL_FLOAT_MAT4x3]: [GL_FLOAT, 16, 'mat4x3']\n};\nexport function getPrimitiveDrawMode(drawMode) {\n  switch (drawMode) {\n    case GL_POINTS:\n      return GL_POINTS;\n\n    case GL_LINES:\n      return GL_LINES;\n\n    case GL_LINE_STRIP:\n      return GL_LINES;\n\n    case GL_LINE_LOOP:\n      return GL_LINES;\n\n    case GL_TRIANGLES:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_STRIP:\n      return GL_TRIANGLES;\n\n    case GL_TRIANGLE_FAN:\n      return GL_TRIANGLES;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getPrimitiveCount({\n  drawMode,\n  vertexCount\n}) {\n  switch (drawMode) {\n    case GL_POINTS:\n    case GL_LINE_LOOP:\n      return vertexCount;\n\n    case GL_LINES:\n      return vertexCount / 2;\n\n    case GL_LINE_STRIP:\n      return vertexCount - 1;\n\n    case GL_TRIANGLES:\n      return vertexCount / 3;\n\n    case GL_TRIANGLE_STRIP:\n    case GL_TRIANGLE_FAN:\n      return vertexCount - 2;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function getVertexCount({\n  drawMode,\n  vertexCount\n}) {\n  const primitiveCount = getPrimitiveCount({\n    drawMode,\n    vertexCount\n  });\n\n  switch (getPrimitiveDrawMode(drawMode)) {\n    case GL_POINTS:\n      return primitiveCount;\n\n    case GL_LINES:\n      return primitiveCount * 2;\n\n    case GL_TRIANGLES:\n      return primitiveCount * 3;\n\n    default:\n      assert(false);\n      return 0;\n  }\n}\nexport function decomposeCompositeGLType(compositeGLType) {\n  const typeAndSize = COMPOSITE_GL_TYPES[compositeGLType];\n\n  if (!typeAndSize) {\n    return null;\n  }\n\n  const [type, components] = typeAndSize;\n  return {\n    type,\n    components\n  };\n}\nexport function getCompositeGLType(type, components) {\n  switch (type) {\n    case GL_BYTE:\n    case GL_UNSIGNED_BYTE:\n    case GL_SHORT:\n    case GL_UNSIGNED_SHORT:\n      type = GL_FLOAT;\n      break;\n\n    default:\n  }\n\n  for (const glType in COMPOSITE_GL_TYPES) {\n    const [compType, compComponents, name] = COMPOSITE_GL_TYPES[glType];\n\n    if (compType === type && compComponents === components) {\n      return {\n        glType,\n        name\n      };\n    }\n  }\n\n  return null;\n}\n//# sourceMappingURL=attribute-utils.js.map","import Accessor from './accessor';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { decomposeCompositeGLType } from '../webgl-utils/attribute-utils';\nexport default class ProgramConfiguration {\n  constructor(program) {\n    this.id = program.id;\n    this.attributeInfos = [];\n    this.attributeInfosByName = {};\n    this.attributeInfosByLocation = [];\n    this.varyingInfos = [];\n    this.varyingInfosByName = {};\n    Object.seal(this);\n\n    this._readAttributesFromProgram(program);\n\n    this._readVaryingsFromProgram(program);\n  }\n\n  getAttributeInfo(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return this.attributeInfosByLocation[location];\n    }\n\n    return this.attributeInfosByName[locationOrName] || null;\n  }\n\n  getAttributeLocation(locationOrName) {\n    const attributeInfo = this.getAttributeInfo(locationOrName);\n    return attributeInfo ? attributeInfo.location : -1;\n  }\n\n  getAttributeAccessor(locationOrName) {\n    const attributeInfo = this.getAttributeInfo(locationOrName);\n    return attributeInfo ? attributeInfo.accessor : null;\n  }\n\n  getVaryingInfo(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return this.varyingInfos[location];\n    }\n\n    return this.varyingInfosByName[locationOrName] || null;\n  }\n\n  getVaryingIndex(locationOrName) {\n    const varying = this.getVaryingInfo();\n    return varying ? varying.location : -1;\n  }\n\n  getVaryingAccessor(locationOrName) {\n    const varying = this.getVaryingInfo();\n    return varying ? varying.accessor : null;\n  }\n\n  _readAttributesFromProgram(program) {\n    const {\n      gl\n    } = program;\n    const count = gl.getProgramParameter(program.handle, 35721);\n\n    for (let index = 0; index < count; index++) {\n      const {\n        name,\n        type,\n        size\n      } = gl.getActiveAttrib(program.handle, index);\n      const location = gl.getAttribLocation(program.handle, name);\n\n      if (location >= 0) {\n        this._addAttribute(location, name, type, size);\n      }\n    }\n\n    this.attributeInfos.sort((a, b) => a.location - b.location);\n  }\n\n  _readVaryingsFromProgram(program) {\n    const {\n      gl\n    } = program;\n\n    if (!isWebGL2(gl)) {\n      return;\n    }\n\n    const count = gl.getProgramParameter(program.handle, 35971);\n\n    for (let location = 0; location < count; location++) {\n      const {\n        name,\n        type,\n        size\n      } = gl.getTransformFeedbackVarying(program.handle, location);\n\n      this._addVarying(location, name, type, size);\n    }\n\n    this.varyingInfos.sort((a, b) => a.location - b.location);\n  }\n\n  _addAttribute(location, name, compositeType, size) {\n    const {\n      type,\n      components\n    } = decomposeCompositeGLType(compositeType);\n    const accessor = {\n      type,\n      size: size * components\n    };\n\n    this._inferProperties(location, name, accessor);\n\n    const attributeInfo = {\n      location,\n      name,\n      accessor: new Accessor(accessor)\n    };\n    this.attributeInfos.push(attributeInfo);\n    this.attributeInfosByLocation[location] = attributeInfo;\n    this.attributeInfosByName[attributeInfo.name] = attributeInfo;\n  }\n\n  _inferProperties(location, name, accessor) {\n    if (/instance/i.test(name)) {\n      accessor.divisor = 1;\n    }\n  }\n\n  _addVarying(location, name, compositeType, size) {\n    const {\n      type,\n      components\n    } = decomposeCompositeGLType(compositeType);\n    const accessor = new Accessor({\n      type,\n      size: size * components\n    });\n    const varying = {\n      location,\n      name,\n      accessor\n    };\n    this.varyingInfos.push(varying);\n    this.varyingInfosByName[varying.name] = varying;\n  }\n\n}\n//# sourceMappingURL=program-configuration.js.map","import Resource from './resource';\nimport Texture from './texture';\nimport Framebuffer from './framebuffer';\nimport { parseUniformName, getUniformSetter } from './uniforms';\nimport { VertexShader, FragmentShader } from './shader';\nimport ProgramConfiguration from './program-configuration';\nimport { copyUniform, checkUniformValues } from './uniforms';\nimport { isWebGL2, assertWebGL2Context, withParameters, log } from '@luma.gl/gltools';\nimport { getKey } from '../webgl-utils/constants-to-keys';\nimport { getPrimitiveDrawMode } from '../webgl-utils/attribute-utils';\nimport { assert } from '../utils/assert';\nimport { uid } from '../utils/utils';\nconst LOG_PROGRAM_PERF_PRIORITY = 4;\nconst GL_SEPARATE_ATTRIBS = 0x8c8d;\nconst V6_DEPRECATED_METHODS = ['setVertexArray', 'setAttributes', 'setBuffers', 'unsetBuffers', 'use', 'getUniformCount', 'getUniformInfo', 'getUniformLocation', 'getUniformValue', 'getVarying', 'getFragDataLocation', 'getAttachedShaders', 'getAttributeCount', 'getAttributeLocation', 'getAttributeInfo'];\nexport default class Program extends Resource {\n  constructor(gl, props = {}) {\n    super(gl, props);\n    this.stubRemovedMethods('Program', 'v6.0', V6_DEPRECATED_METHODS);\n    this._isCached = false;\n    this.initialize(props);\n    Object.seal(this);\n\n    this._setId(props.id);\n  }\n\n  initialize(props = {}) {\n    const {\n      hash,\n      vs,\n      fs,\n      varyings,\n      bufferMode = GL_SEPARATE_ATTRIBS\n    } = props;\n    this.hash = hash || '';\n    this.vs = typeof vs === 'string' ? new VertexShader(this.gl, {\n      id: `${props.id}-vs`,\n      source: vs\n    }) : vs;\n    this.fs = typeof fs === 'string' ? new FragmentShader(this.gl, {\n      id: `${props.id}-fs`,\n      source: fs\n    }) : fs;\n    assert(this.vs instanceof VertexShader);\n    assert(this.fs instanceof FragmentShader);\n    this.uniforms = {};\n    this._textureUniforms = {};\n\n    if (varyings && varyings.length > 0) {\n      assertWebGL2Context(this.gl);\n      this.varyings = varyings;\n      this.gl2.transformFeedbackVaryings(this.handle, varyings, bufferMode);\n    }\n\n    this._compileAndLink();\n\n    this._readUniformLocationsFromLinkedProgram();\n\n    this.configuration = new ProgramConfiguration(this);\n    return this.setProps(props);\n  }\n\n  delete(options = {}) {\n    if (this._isCached) {\n      return this;\n    }\n\n    return super.delete(options);\n  }\n\n  setProps(props) {\n    if ('uniforms' in props) {\n      this.setUniforms(props.uniforms);\n    }\n\n    return this;\n  }\n\n  draw({\n    logPriority,\n    drawMode = 4,\n    vertexCount,\n    offset = 0,\n    start,\n    end,\n    isIndexed = false,\n    indexType = 5123,\n    instanceCount = 0,\n    isInstanced = instanceCount > 0,\n    vertexArray = null,\n    transformFeedback,\n    framebuffer,\n    parameters = {},\n    uniforms,\n    samplers\n  }) {\n    if (uniforms || samplers) {\n      log.deprecated('Program.draw({uniforms})', 'Program.setUniforms(uniforms)')();\n      this.setUniforms(uniforms || {});\n    }\n\n    if (log.priority >= logPriority) {\n      const fb = framebuffer ? framebuffer.id : 'default';\n      const message = `mode=${getKey(this.gl, drawMode)} verts=${vertexCount} ` + `instances=${instanceCount} indexType=${getKey(this.gl, indexType)} ` + `isInstanced=${isInstanced} isIndexed=${isIndexed} ` + `Framebuffer=${fb}`;\n      log.log(logPriority, message)();\n    }\n\n    assert(vertexArray);\n    this.gl.useProgram(this.handle);\n\n    if (!this._areTexturesRenderable() || vertexCount === 0 || isInstanced && instanceCount === 0) {\n      return false;\n    }\n\n    vertexArray.bindForDraw(vertexCount, instanceCount, () => {\n      if (framebuffer !== undefined) {\n        parameters = Object.assign({}, parameters, {\n          framebuffer\n        });\n      }\n\n      if (transformFeedback) {\n        const primitiveMode = getPrimitiveDrawMode(drawMode);\n        transformFeedback.begin(primitiveMode);\n      }\n\n      this._bindTextures();\n\n      withParameters(this.gl, parameters, () => {\n        if (isIndexed && isInstanced) {\n          this.gl2.drawElementsInstanced(drawMode, vertexCount, indexType, offset, instanceCount);\n        } else if (isIndexed && isWebGL2(this.gl) && !isNaN(start) && !isNaN(end)) {\n          this.gl2.drawRangeElements(drawMode, start, end, vertexCount, indexType, offset);\n        } else if (isIndexed) {\n          this.gl.drawElements(drawMode, vertexCount, indexType, offset);\n        } else if (isInstanced) {\n          this.gl2.drawArraysInstanced(drawMode, offset, vertexCount, instanceCount);\n        } else {\n          this.gl.drawArrays(drawMode, offset, vertexCount);\n        }\n      });\n\n      if (transformFeedback) {\n        transformFeedback.end();\n      }\n    });\n    return true;\n  }\n\n  setUniforms(uniforms = {}) {\n    if (log.priority >= 2) {\n      checkUniformValues(uniforms, this.id, this._uniformSetters);\n    }\n\n    this.gl.useProgram(this.handle);\n\n    for (const uniformName in uniforms) {\n      const uniform = uniforms[uniformName];\n      const uniformSetter = this._uniformSetters[uniformName];\n\n      if (uniformSetter) {\n        let value = uniform;\n        let textureUpdate = false;\n\n        if (value instanceof Framebuffer) {\n          value = value.texture;\n        }\n\n        if (value instanceof Texture) {\n          textureUpdate = this.uniforms[uniformName] !== uniform;\n\n          if (textureUpdate) {\n            if (uniformSetter.textureIndex === undefined) {\n              uniformSetter.textureIndex = this._textureIndexCounter++;\n            }\n\n            const texture = value;\n            const {\n              textureIndex\n            } = uniformSetter;\n            texture.bind(textureIndex);\n            value = textureIndex;\n            this._textureUniforms[uniformName] = texture;\n          } else {\n            value = uniformSetter.textureIndex;\n          }\n        } else if (this._textureUniforms[uniformName]) {\n          delete this._textureUniforms[uniformName];\n        }\n\n        if (uniformSetter(value) || textureUpdate) {\n          copyUniform(this.uniforms, uniformName, uniform);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  _areTexturesRenderable() {\n    let texturesRenderable = true;\n\n    for (const uniformName in this._textureUniforms) {\n      const texture = this._textureUniforms[uniformName];\n      texture.update();\n      texturesRenderable = texturesRenderable && texture.loaded;\n    }\n\n    return texturesRenderable;\n  }\n\n  _bindTextures() {\n    for (const uniformName in this._textureUniforms) {\n      const textureIndex = this._uniformSetters[uniformName].textureIndex;\n\n      this._textureUniforms[uniformName].bind(textureIndex);\n    }\n  }\n\n  _createHandle() {\n    return this.gl.createProgram();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteProgram(this.handle);\n  }\n\n  _getOptionsFromHandle(handle) {\n    const shaderHandles = this.gl.getAttachedShaders(handle);\n    const opts = {};\n\n    for (const shaderHandle of shaderHandles) {\n      const type = this.gl.getShaderParameter(this.handle, 35663);\n\n      switch (type) {\n        case 35633:\n          opts.vs = new VertexShader({\n            handle: shaderHandle\n          });\n          break;\n\n        case 35632:\n          opts.fs = new FragmentShader({\n            handle: shaderHandle\n          });\n          break;\n\n        default:\n      }\n    }\n\n    return opts;\n  }\n\n  _getParameter(pname) {\n    return this.gl.getProgramParameter(this.handle, pname);\n  }\n\n  _setId(id) {\n    if (!id) {\n      const programName = this._getName();\n\n      this.id = uid(programName);\n    }\n  }\n\n  _getName() {\n    let programName = this.vs.getName() || this.fs.getName();\n    programName = programName.replace(/shader/i, '');\n    programName = programName ? `${programName}-program` : 'program';\n    return programName;\n  }\n\n  _compileAndLink() {\n    const {\n      gl\n    } = this;\n    gl.attachShader(this.handle, this.vs.handle);\n    gl.attachShader(this.handle, this.fs.handle);\n    log.time(LOG_PROGRAM_PERF_PRIORITY, `linkProgram for ${this._getName()}`)();\n    gl.linkProgram(this.handle);\n    log.timeEnd(LOG_PROGRAM_PERF_PRIORITY, `linkProgram for ${this._getName()}`)();\n\n    if (gl.debug || log.level > 0) {\n      const linked = gl.getProgramParameter(this.handle, 35714);\n\n      if (!linked) {\n        throw new Error(`Error linking: ${gl.getProgramInfoLog(this.handle)}`);\n      }\n\n      gl.validateProgram(this.handle);\n      const validated = gl.getProgramParameter(this.handle, 35715);\n\n      if (!validated) {\n        throw new Error(`Error validating: ${gl.getProgramInfoLog(this.handle)}`);\n      }\n    }\n  }\n\n  _readUniformLocationsFromLinkedProgram() {\n    const {\n      gl\n    } = this;\n    this._uniformSetters = {};\n    this._uniformCount = this._getParameter(35718);\n\n    for (let i = 0; i < this._uniformCount; i++) {\n      const info = this.gl.getActiveUniform(this.handle, i);\n      const {\n        name\n      } = parseUniformName(info.name);\n      let location = gl.getUniformLocation(this.handle, name);\n      this._uniformSetters[name] = getUniformSetter(gl, location, info);\n\n      if (info.size > 1) {\n        for (let l = 0; l < info.size; l++) {\n          location = gl.getUniformLocation(this.handle, `${name}[${l}]`);\n          this._uniformSetters[`${name}[${l}]`] = getUniformSetter(gl, location, info);\n        }\n      }\n    }\n\n    this._textureIndexCounter = 0;\n  }\n\n  getActiveUniforms(uniformIndices, pname) {\n    return this.gl2.getActiveUniforms(this.handle, uniformIndices, pname);\n  }\n\n  getUniformBlockIndex(blockName) {\n    return this.gl2.getUniformBlockIndex(this.handle, blockName);\n  }\n\n  getActiveUniformBlockParameter(blockIndex, pname) {\n    return this.gl2.getActiveUniformBlockParameter(this.handle, blockIndex, pname);\n  }\n\n  uniformBlockBinding(blockIndex, blockBinding) {\n    this.gl2.uniformBlockBinding(this.handle, blockIndex, blockBinding);\n  }\n\n}\n//# sourceMappingURL=program.js.map","import { assembleShaders } from '@luma.gl/shadertools';\nimport { Program } from '@luma.gl/webgl';\nexport default class ProgramManager {\n  static getDefaultProgramManager(gl) {\n    gl.luma = gl.luma || {};\n    gl.luma.defaultProgramManager = gl.luma.defaultProgramManager || new ProgramManager(gl);\n    return gl.luma.defaultProgramManager;\n  }\n\n  constructor(gl) {\n    this.gl = gl;\n    this._programCache = {};\n    this._getUniforms = {};\n    this._registeredModules = {};\n    this._hookFunctions = [];\n    this._defaultModules = [];\n    this._hashes = {};\n    this._hashCounter = 0;\n    this.stateHash = 0;\n    this._useCounts = {};\n  }\n\n  addDefaultModule(module) {\n    if (!this._defaultModules.find(m => m.name === module.name)) {\n      this._defaultModules.push(module);\n    }\n\n    this.stateHash++;\n  }\n\n  removeDefaultModule(module) {\n    const moduleName = typeof module === 'string' ? module : module.name;\n    this._defaultModules = this._defaultModules.filter(m => m.name !== moduleName);\n    this.stateHash++;\n  }\n\n  addShaderHook(hook, opts) {\n    if (opts) {\n      hook = Object.assign(opts, {\n        hook\n      });\n    }\n\n    this._hookFunctions.push(hook);\n\n    this.stateHash++;\n  }\n\n  get(props = {}) {\n    const {\n      vs = '',\n      fs = '',\n      defines = {},\n      inject = {},\n      varyings = [],\n      bufferMode = 0x8c8d,\n      transpileToGLSL100 = false\n    } = props;\n\n    const modules = this._getModuleList(props.modules);\n\n    const vsHash = this._getHash(vs);\n\n    const fsHash = this._getHash(fs);\n\n    const moduleHashes = modules.map(m => this._getHash(m.name)).sort();\n    const varyingHashes = varyings.map(v => this._getHash(v));\n    const defineKeys = Object.keys(defines).sort();\n    const injectKeys = Object.keys(inject).sort();\n    const defineHashes = [];\n    const injectHashes = [];\n\n    for (const key of defineKeys) {\n      defineHashes.push(this._getHash(key));\n      defineHashes.push(this._getHash(defines[key]));\n    }\n\n    for (const key of injectKeys) {\n      injectHashes.push(this._getHash(key));\n      injectHashes.push(this._getHash(inject[key]));\n    }\n\n    const hash = `${vsHash}/${fsHash}D${defineHashes.join('/')}M${moduleHashes.join('/')}I${injectHashes.join('/')}V${varyingHashes.join('/')}H${this.stateHash}B${bufferMode}${transpileToGLSL100 ? 'T' : ''}`;\n\n    if (!this._programCache[hash]) {\n      const assembled = assembleShaders(this.gl, {\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        hookFunctions: this._hookFunctions,\n        transpileToGLSL100\n      });\n      this._programCache[hash] = new Program(this.gl, {\n        hash,\n        vs: assembled.vs,\n        fs: assembled.fs,\n        varyings,\n        bufferMode\n      });\n\n      this._getUniforms[hash] = assembled.getUniforms || (x => {});\n\n      this._useCounts[hash] = 0;\n    }\n\n    this._useCounts[hash]++;\n    return this._programCache[hash];\n  }\n\n  getUniforms(program) {\n    return this._getUniforms[program.hash] || null;\n  }\n\n  release(program) {\n    const hash = program.hash;\n    this._useCounts[hash]--;\n\n    if (this._useCounts[hash] === 0) {\n      this._programCache[hash].delete();\n\n      delete this._programCache[hash];\n      delete this._getUniforms[hash];\n      delete this._useCounts[hash];\n    }\n  }\n\n  _getHash(key) {\n    if (this._hashes[key] === undefined) {\n      this._hashes[key] = this._hashCounter++;\n    }\n\n    return this._hashes[key];\n  }\n\n  _getModuleList(appModules = []) {\n    const modules = new Array(this._defaultModules.length + appModules.length);\n    const seen = {};\n    let count = 0;\n\n    for (let i = 0, len = this._defaultModules.length; i < len; ++i) {\n      const module = this._defaultModules[i];\n      const name = module.name;\n      modules[count++] = module;\n      seen[name] = true;\n    }\n\n    for (let i = 0, len = appModules.length; i < len; ++i) {\n      const module = appModules[i];\n      const name = module.name;\n\n      if (!seen[name]) {\n        modules[count++] = module;\n        seen[name] = true;\n      }\n    }\n\n    modules.length = count;\n    return modules;\n  }\n\n}\n//# sourceMappingURL=program-manager.js.map","const fp32shader = `\\\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n`;\nexport const fp32 = {\n  name: 'fp32',\n  vs: fp32shader,\n  fs: null\n};\n//# sourceMappingURL=fp32.js.map","const vs = \"\\nstruct VertexGeometry {\\n  vec4 position;\\n  vec3 worldPosition;\\n  vec3 worldPositionAlt;\\n  vec3 normal;\\n  vec2 uv;\\n  vec3 pickingColor;\\n} geometry = VertexGeometry(\\n  vec4(0.0),\\n  vec3(0.0),\\n  vec3(0.0),\\n  vec3(0.0),\\n  vec2(0.0),\\n  vec3(0.0)\\n);\\n\";\nconst fs = \"\\n#define SMOOTH_EDGE_RADIUS 0.5\\n\\nstruct FragmentGeometry {\\n  vec2 uv;\\n} geometry;\\n\\nfloat smoothedge(float edge, float x) {\\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\\n}\\n\";\nexport default {\n  name: 'geometry',\n  vs,\n  fs\n};\n//# sourceMappingURL=geometry.js.map","import { COORDINATE_SYSTEM, PROJECTION_MODE, UNIT } from '../../lib/constants';\nconst COORDINATE_SYSTEM_GLSL_CONSTANTS = Object.keys(COORDINATE_SYSTEM).map(key => \"const int COORDINATE_SYSTEM_\".concat(key, \" = \").concat(COORDINATE_SYSTEM[key], \";\")).join('');\nconst PROJECTION_MODE_GLSL_CONSTANTS = Object.keys(PROJECTION_MODE).map(key => \"const int PROJECTION_MODE_\".concat(key, \" = \").concat(PROJECTION_MODE[key], \";\")).join('');\nconst UNIT_GLSL_CONSTANTS = Object.keys(UNIT).map(key => \"const int UNIT_\".concat(key.toUpperCase(), \" = \").concat(UNIT[key], \";\")).join('');\nexport default \"\".concat(COORDINATE_SYSTEM_GLSL_CONSTANTS, \"\\n\").concat(PROJECTION_MODE_GLSL_CONSTANTS, \"\\n\").concat(UNIT_GLSL_CONSTANTS, \"\\n\\nuniform int project_uCoordinateSystem;\\nuniform int project_uProjectionMode;\\nuniform float project_uScale;\\nuniform bool project_uWrapLongitude;\\nuniform vec3 project_uCommonUnitsPerMeter;\\nuniform vec3 project_uCommonUnitsPerWorldUnit;\\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\\nuniform vec4 project_uCenter;\\nuniform mat4 project_uModelMatrix;\\nuniform mat4 project_uViewProjectionMatrix;\\nuniform vec2 project_uViewportSize;\\nuniform float project_uDevicePixelRatio;\\nuniform float project_uFocalDistance;\\nuniform vec3 project_uCameraPosition;\\nuniform vec3 project_uCoordinateOrigin;\\nuniform vec3 project_uCommonOrigin;\\nuniform bool project_uPseudoMeters;\\n\\nconst float TILE_SIZE = 512.0;\\nconst float PI = 3.1415926536;\\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\\nconst vec3 ZERO_64_LOW = vec3(0.0);\\nconst float EARTH_RADIUS = 6370972.0;\\nconst float GLOBE_RADIUS = 256.0;\\nfloat project_size() {\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\\n    project_uPseudoMeters == false) {\\n    \\n    if (geometry.position.w == 0.0) {\\n      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);\\n      return 1.0 / cos(radians(y));\\n    }\\n  \\n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\\n    float y2 = y * y;\\n    float y4 = y2 * y2;\\n    float y6 = y4 * y2;\\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\\n  }\\n  return 1.0;\\n}\\nfloat project_size(float meters) {\\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\\n}\\n\\nvec2 project_size(vec2 meters) {\\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\\n}\\n\\nvec3 project_size(vec3 meters) {\\n  return meters * project_uCommonUnitsPerMeter * project_size();\\n}\\n\\nvec4 project_size(vec4 meters) {\\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\\n}\\nvec3 project_normal(vec3 vector) {\\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\\n}\\n\\nvec4 project_offset_(vec4 offset) {\\n  float dy = offset.y;\\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\\n}\\nvec2 project_mercator_(vec2 lnglat) {\\n  float x = lnglat.x;\\n  if (project_uWrapLongitude) {\\n    x = mod(x + 180., 360.0) - 180.;\\n  }\\n  float y = clamp(lnglat.y, -89.9, 89.9);\\n  return vec2(\\n    radians(x) + PI,\\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\\n  ) * WORLD_SCALE;\\n}\\n\\nvec3 project_globe_(vec3 lnglatz) {\\n  float lambda = radians(lnglatz.x);\\n  float phi = radians(lnglatz.y);\\n  float cosPhi = cos(phi);\\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\\n\\n  return vec3(\\n    sin(lambda) * cosPhi,\\n    -cos(lambda) * cosPhi,\\n    sin(phi)\\n  ) * D;\\n}\\nvec4 project_position(vec4 position, vec3 position64Low) {\\n  vec4 position_world = project_uModelMatrix * position;\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_mercator_(position_world.xy),\\n        project_size(position_world.z),\\n        position_world.w\\n      );\\n    }\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\\n      position_world.xyz += project_uCoordinateOrigin;\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      return vec4(\\n        project_globe_(position_world.xyz),\\n        position_world.w\\n      );\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\\n        return vec4(\\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\\n          project_size(position_world.z),\\n          position_world.w\\n        );\\n      }\\n    }\\n  }\\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\\n    position_world.xyz -= project_uCoordinateOrigin;\\n  }\\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\\n}\\n\\nvec4 project_position(vec4 position) {\\n  return project_position(position, ZERO_64_LOW);\\n}\\n\\nvec3 project_position(vec3 position, vec3 position64Low) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\\n  return projected_position.xyz;\\n}\\n\\nvec3 project_position(vec3 position) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\\n  return projected_position.xyz;\\n}\\n\\nvec2 project_position(vec2 position) {\\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\\n  return projected_position.xy;\\n}\\n\\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\\n  return viewProjectionMatrix * position + center;\\n}\\nvec4 project_common_position_to_clipspace(vec4 position) {\\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\\n}\\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\\n  return offset * project_uFocalDistance;\\n}\\n\\nfloat project_size_to_pixel(float meters) {\\n  return project_size(meters) * project_uScale;\\n}\\nfloat project_size_to_pixel(float size, int unit) {\\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\\n  if (unit == UNIT_COMMON) return size * project_uScale;\\n  return size;\\n}\\nfloat project_pixel_size(float pixels) {\\n  return pixels / project_uScale;\\n}\\nvec2 project_pixel_size(vec2 pixels) {\\n  return pixels / project_uScale;\\n}\\nmat3 project_get_orientation_matrix(vec3 up) {\\n  vec3 uz = normalize(up);\\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\\n  vec3 uy = cross(uz, ux);\\n  return mat3(ux, uy, uz);\\n}\\n\\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    transform = project_get_orientation_matrix(commonPosition);\\n    return true;\\n  }\\n  return false;\\n}\\n\");\n//# sourceMappingURL=project.glsl.js.map","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","function isEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (Array.isArray(a)) {\n    const len = a.length;\n\n    if (!b || b.length !== len) {\n      return false;\n    }\n\n    for (let i = 0; i < len; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nexport default function memoize(compute) {\n  let cachedArgs = {};\n  let cachedResult;\n  return args => {\n    for (const key in args) {\n      if (!isEqual(args[key], cachedArgs[key])) {\n        cachedResult = compute(args);\n        cachedArgs = args;\n        break;\n      }\n    }\n\n    return cachedResult;\n  };\n}\n//# sourceMappingURL=memoize.js.map","import * as mat4 from 'gl-matrix/mat4';\nimport * as vec4 from 'gl-matrix/vec4';\nimport { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport memoize from '../../utils/memoize';\nconst ZERO_VECTOR = [0, 0, 0, 0];\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\nconst IDENTITY_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\nconst DEFAULT_PIXELS_PER_UNIT2 = [0, 0, 0];\nconst DEFAULT_COORDINATE_ORIGIN = [0, 0, 0];\nconst getMemoizedViewportUniforms = memoize(calculateViewportUniforms);\nexport function getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin = DEFAULT_COORDINATE_ORIGIN) {\n  let shaderCoordinateOrigin = coordinateOrigin;\n  let geospatialOrigin;\n  let offsetMode = true;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT_OFFSETS || coordinateSystem === COORDINATE_SYSTEM.METER_OFFSETS) {\n    geospatialOrigin = coordinateOrigin;\n  } else {\n    geospatialOrigin = viewport.isGeospatial ? [Math.fround(viewport.longitude), Math.fround(viewport.latitude), 0] : null;\n  }\n\n  switch (viewport.projectionMode) {\n    case PROJECTION_MODE.WEB_MERCATOR:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        geospatialOrigin = [0, 0, 0];\n        offsetMode = false;\n      }\n\n      break;\n\n    case PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:\n      if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT) {\n        shaderCoordinateOrigin = geospatialOrigin;\n      } else if (coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n        shaderCoordinateOrigin = [Math.fround(viewport.center[0]), Math.fround(viewport.center[1]), 0];\n        geospatialOrigin = viewport.unprojectPosition(shaderCoordinateOrigin);\n        shaderCoordinateOrigin[0] -= coordinateOrigin[0];\n        shaderCoordinateOrigin[1] -= coordinateOrigin[1];\n        shaderCoordinateOrigin[2] -= coordinateOrigin[2];\n      }\n\n      break;\n\n    case PROJECTION_MODE.IDENTITY:\n      shaderCoordinateOrigin = viewport.position.map(Math.fround);\n      break;\n\n    case PROJECTION_MODE.GLOBE:\n      offsetMode = false;\n      geospatialOrigin = null;\n      break;\n\n    default:\n      offsetMode = false;\n  }\n\n  shaderCoordinateOrigin[2] = shaderCoordinateOrigin[2] || 0;\n  return {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  };\n}\n\nfunction calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin) {\n  const {\n    viewMatrixUncentered,\n    projectionMatrix\n  } = viewport;\n  let {\n    viewMatrix,\n    viewProjectionMatrix\n  } = viewport;\n  let projectionCenter = ZERO_VECTOR;\n  let originCommon = ZERO_VECTOR;\n  let cameraPosCommon = viewport.cameraPosition;\n  const {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  } = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin);\n\n  if (offsetMode) {\n    originCommon = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    cameraPosCommon = [cameraPosCommon[0] - originCommon[0], cameraPosCommon[1] - originCommon[1], cameraPosCommon[2] - originCommon[2]];\n    originCommon[3] = 1;\n    projectionCenter = vec4.transformMat4([], originCommon, viewProjectionMatrix);\n    viewMatrix = viewMatrixUncentered || viewMatrix;\n    viewProjectionMatrix = mat4.multiply([], projectionMatrix, viewMatrix);\n    viewProjectionMatrix = mat4.multiply([], viewProjectionMatrix, VECTOR_TO_POINT_MATRIX);\n  }\n\n  return {\n    viewMatrix,\n    viewProjectionMatrix,\n    projectionCenter,\n    originCommon,\n    cameraPosCommon,\n    shaderCoordinateOrigin,\n    geospatialOrigin\n  };\n}\n\nexport function getUniformsFromViewport({\n  viewport,\n  devicePixelRatio = 1,\n  modelMatrix = null,\n  coordinateSystem = COORDINATE_SYSTEM.DEFAULT,\n  coordinateOrigin,\n  autoWrapLongitude = false\n} = {}) {\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  const uniforms = getMemoizedViewportUniforms({\n    viewport,\n    devicePixelRatio,\n    coordinateSystem,\n    coordinateOrigin\n  });\n  uniforms.project_uWrapLongitude = autoWrapLongitude;\n  uniforms.project_uModelMatrix = modelMatrix || IDENTITY_MATRIX;\n  return uniforms;\n}\n\nfunction calculateViewportUniforms({\n  viewport,\n  devicePixelRatio,\n  coordinateSystem,\n  coordinateOrigin\n}) {\n  const {\n    projectionCenter,\n    viewProjectionMatrix,\n    originCommon,\n    cameraPosCommon,\n    shaderCoordinateOrigin,\n    geospatialOrigin\n  } = calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin);\n  const distanceScales = viewport.getDistanceScales();\n  const viewportSize = [viewport.width * devicePixelRatio, viewport.height * devicePixelRatio];\n  const focalDistance = viewport.projectionMatrix.transform([0, 0, -viewport.focalDistance, 1])[3] || 1;\n  const uniforms = {\n    project_uCoordinateSystem: coordinateSystem,\n    project_uProjectionMode: viewport.projectionMode,\n    project_uCoordinateOrigin: shaderCoordinateOrigin,\n    project_uCommonOrigin: originCommon.slice(0, 3),\n    project_uCenter: projectionCenter,\n    project_uPseudoMeters: Boolean(viewport._pseudoMeters),\n    project_uViewportSize: viewportSize,\n    project_uDevicePixelRatio: devicePixelRatio,\n    project_uFocalDistance: focalDistance,\n    project_uCommonUnitsPerMeter: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit: distanceScales.unitsPerMeter,\n    project_uCommonUnitsPerWorldUnit2: DEFAULT_PIXELS_PER_UNIT2,\n    project_uScale: viewport.scale,\n    project_uViewProjectionMatrix: viewProjectionMatrix,\n    project_uCameraPosition: cameraPosCommon\n  };\n\n  if (geospatialOrigin) {\n    const distanceScalesAtOrigin = viewport.getDistanceScales(geospatialOrigin);\n\n    switch (coordinateSystem) {\n      case COORDINATE_SYSTEM.METER_OFFSETS:\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerMeter;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerMeter2;\n        break;\n\n      case COORDINATE_SYSTEM.LNGLAT:\n      case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n        if (!viewport._pseudoMeters) {\n          uniforms.project_uCommonUnitsPerMeter = distanceScalesAtOrigin.unitsPerMeter;\n        }\n\n        uniforms.project_uCommonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerDegree;\n        uniforms.project_uCommonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerDegree2;\n        break;\n\n      case COORDINATE_SYSTEM.CARTESIAN:\n        uniforms.project_uCommonUnitsPerWorldUnit = [1, 1, distanceScalesAtOrigin.unitsPerMeter[2]];\n        uniforms.project_uCommonUnitsPerWorldUnit2 = [0, 0, distanceScalesAtOrigin.unitsPerMeter2[2]];\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return uniforms;\n}\n//# sourceMappingURL=viewport-uniforms.js.map","import { fp32 } from '@luma.gl/core';\nimport geometry from '../misc/geometry';\nimport projectShader from './project.glsl';\nimport { getUniformsFromViewport } from './viewport-uniforms';\nconst INITIAL_MODULE_OPTIONS = {};\n\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  if (opts.viewport) {\n    return getUniformsFromViewport(opts);\n  }\n\n  return {};\n}\n\nexport default {\n  name: 'project',\n  dependencies: [fp32, geometry],\n  vs: projectShader,\n  getUniforms\n};\n//# sourceMappingURL=project.js.map","import { ProgramManager } from '@luma.gl/core';\nimport { gouraudLighting, phongLighting } from '@luma.gl/core';\nimport project from './project/project';\nimport project32 from './project32/project32';\nimport shadow from './shadow/shadow';\nimport picking from './picking/picking';\nconst DEFAULT_MODULES = [project];\nconst SHADER_HOOKS = ['vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)', 'vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)', 'vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)', 'fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)'];\nexport function createProgramManager(gl) {\n  const programManager = ProgramManager.getDefaultProgramManager(gl);\n\n  for (const shaderModule of DEFAULT_MODULES) {\n    programManager.addDefaultModule(shaderModule);\n  }\n\n  for (const shaderHook of SHADER_HOOKS) {\n    programManager.addShaderHook(shaderHook);\n  }\n\n  return programManager;\n}\nexport { picking, project, project32, gouraudLighting, phongLighting, shadow };\n//# sourceMappingURL=index.js.map","import { Timeline } from '@luma.gl/core';\nimport { LIFECYCLE } from '../lifecycle/constants';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { flatten } from '../utils/flatten';\nimport { Stats } from 'probe.gl';\nimport ResourceManager from './resource/resource-manager';\nimport Viewport from '../viewports/viewport';\nimport { createProgramManager } from '../shaderlib';\nconst TRACE_SET_LAYERS = 'layerManager.setLayers';\nconst TRACE_ACTIVATE_VIEWPORT = 'layerManager.activateViewport';\nconst INITIAL_CONTEXT = Object.seal({\n  layerManager: null,\n  resourceManager: null,\n  deck: null,\n  gl: null,\n  stats: null,\n  shaderCache: null,\n  pickingFBO: null,\n  mousePosition: null,\n  userData: {}\n});\nexport default class LayerManager {\n  constructor(gl, {\n    deck,\n    stats,\n    viewport,\n    timeline\n  } = {}) {\n    this.lastRenderedLayers = [];\n    this.layers = [];\n    this.resourceManager = new ResourceManager({\n      gl,\n      protocol: 'deck://'\n    });\n    this.context = { ...INITIAL_CONTEXT,\n      layerManager: this,\n      gl,\n      deck,\n      programManager: gl && createProgramManager(gl),\n      stats: stats || new Stats({\n        id: 'deck.gl'\n      }),\n      viewport: viewport || new Viewport({\n        id: 'DEFAULT-INITIAL-VIEWPORT'\n      }),\n      timeline: timeline || new Timeline(),\n      resourceManager: this.resourceManager\n    };\n    this._nextLayers = null;\n    this._needsRedraw = 'Initial render';\n    this._needsUpdate = false;\n    this._debug = false;\n    this.activateViewport = this.activateViewport.bind(this);\n    Object.seal(this);\n  }\n\n  finalize() {\n    this.resourceManager.finalize();\n\n    for (const layer of this.layers) {\n      this._finalizeLayer(layer);\n    }\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    let redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    for (const layer of this.layers) {\n      const layerNeedsRedraw = layer.getNeedsRedraw(opts);\n      redraw = redraw || layerNeedsRedraw;\n    }\n\n    return redraw;\n  }\n\n  needsUpdate() {\n    if (this._nextLayers && this._nextLayers !== this.lastRenderedLayers) {\n      return 'layers changed';\n    }\n\n    return this._needsUpdate;\n  }\n\n  setNeedsRedraw(reason) {\n    this._needsRedraw = this._needsRedraw || reason;\n  }\n\n  setNeedsUpdate(reason) {\n    this._needsUpdate = this._needsUpdate || reason;\n  }\n\n  getLayers({\n    layerIds = null\n  } = {}) {\n    return layerIds ? this.layers.filter(layer => layerIds.find(layerId => layer.id.indexOf(layerId) === 0)) : this.layers;\n  }\n\n  setProps(props) {\n    if ('debug' in props) {\n      this._debug = props.debug;\n    }\n\n    if ('userData' in props) {\n      this.context.userData = props.userData;\n    }\n\n    if ('layers' in props) {\n      this._nextLayers = props.layers;\n    }\n\n    if ('onError' in props) {\n      this.context.onError = props.onError;\n    }\n  }\n\n  setLayers(newLayers, reason) {\n    debug(TRACE_SET_LAYERS, this, reason, newLayers);\n    this.lastRenderedLayers = newLayers;\n    newLayers = flatten(newLayers, Boolean);\n\n    for (const layer of newLayers) {\n      layer.context = this.context;\n    }\n\n    this._updateLayers(this.layers, newLayers);\n\n    return this;\n  }\n\n  updateLayers() {\n    const reason = this.needsUpdate();\n\n    if (reason) {\n      this.setNeedsRedraw(\"updating layers: \".concat(reason));\n      this.setLayers(this._nextLayers || this.lastRenderedLayers, reason);\n    }\n\n    this._nextLayers = null;\n  }\n\n  activateViewport(viewport) {\n    debug(TRACE_ACTIVATE_VIEWPORT, this, viewport);\n\n    if (viewport) {\n      this.context.viewport = viewport;\n    }\n\n    return this;\n  }\n\n  _handleError(stage, error, layer) {\n    layer.raiseError(error, \"\".concat(stage, \" of \").concat(layer));\n  }\n\n  _updateLayers(oldLayers, newLayers) {\n    const oldLayerMap = {};\n\n    for (const oldLayer of oldLayers) {\n      if (oldLayerMap[oldLayer.id]) {\n        log.warn(\"Multiple old layers with same id \".concat(oldLayer.id))();\n      } else {\n        oldLayerMap[oldLayer.id] = oldLayer;\n      }\n    }\n\n    const generatedLayers = [];\n\n    this._updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers);\n\n    this._finalizeOldLayers(oldLayerMap);\n\n    let needsUpdate = false;\n\n    for (const layer of generatedLayers) {\n      if (layer.hasUniformTransition()) {\n        needsUpdate = true;\n        break;\n      }\n    }\n\n    this._needsUpdate = needsUpdate;\n    this.layers = generatedLayers;\n  }\n\n  _updateSublayersRecursively(newLayers, oldLayerMap, generatedLayers) {\n    for (const newLayer of newLayers) {\n      newLayer.context = this.context;\n      const oldLayer = oldLayerMap[newLayer.id];\n\n      if (oldLayer === null) {\n        log.warn(\"Multiple new layers with same id \".concat(newLayer.id))();\n      }\n\n      oldLayerMap[newLayer.id] = null;\n      let sublayers = null;\n\n      try {\n        if (this._debug && oldLayer !== newLayer) {\n          newLayer.validateProps();\n        }\n\n        if (!oldLayer) {\n          this._initializeLayer(newLayer);\n        } else {\n          this._transferLayerState(oldLayer, newLayer);\n\n          this._updateLayer(newLayer);\n        }\n\n        generatedLayers.push(newLayer);\n        sublayers = newLayer.isComposite && newLayer.getSubLayers();\n      } catch (err) {\n        this._handleError('matching', err, newLayer);\n      }\n\n      if (sublayers) {\n        this._updateSublayersRecursively(sublayers, oldLayerMap, generatedLayers);\n      }\n    }\n  }\n\n  _finalizeOldLayers(oldLayerMap) {\n    for (const layerId in oldLayerMap) {\n      const layer = oldLayerMap[layerId];\n\n      if (layer) {\n        this._finalizeLayer(layer);\n      }\n    }\n  }\n\n  _initializeLayer(layer) {\n    try {\n      layer._initialize();\n\n      layer.lifecycle = LIFECYCLE.INITIALIZED;\n    } catch (err) {\n      this._handleError('initialization', err, layer);\n    }\n  }\n\n  _transferLayerState(oldLayer, newLayer) {\n    newLayer._transferState(oldLayer);\n\n    newLayer.lifecycle = LIFECYCLE.MATCHED;\n\n    if (newLayer !== oldLayer) {\n      oldLayer.lifecycle = LIFECYCLE.AWAITING_GC;\n    }\n  }\n\n  _updateLayer(layer) {\n    try {\n      layer._update();\n    } catch (err) {\n      this._handleError('update', err, layer);\n    }\n  }\n\n  _finalizeLayer(layer) {\n    this._needsRedraw = this._needsRedraw || \"finalized \".concat(layer);\n    layer.lifecycle = LIFECYCLE.AWAITING_FINALIZATION;\n\n    try {\n      layer._finalize();\n\n      layer.lifecycle = LIFECYCLE.FINALIZED;\n    } catch (err) {\n      this._handleError('finalization', err, layer);\n    }\n  }\n\n}\n//# sourceMappingURL=layer-manager.js.map","export function deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (!a || !b) {\n    return false;\n  }\n\n  for (const key in a) {\n    const aValue = a[key];\n    const bValue = b[key];\n    const equals = aValue === bValue || Array.isArray(aValue) && Array.isArray(bValue) && deepEqual(aValue, bValue);\n\n    if (!equals) {\n      return false;\n    }\n  }\n\n  return true;\n}\n//# sourceMappingURL=deep-equal.js.map","import { deepEqual } from '../utils/deep-equal';\nimport log from '../utils/log';\nimport { flatten } from '../utils/flatten';\nexport default class ViewManager {\n  constructor(props = {}) {\n    this.views = [];\n    this.width = 100;\n    this.height = 100;\n    this.viewState = {};\n    this.controllers = {};\n    this.timeline = props.timeline;\n    this._viewports = [];\n    this._viewportMap = {};\n    this._isUpdating = false;\n    this._needsRedraw = 'Initial render';\n    this._needsUpdate = true;\n    this._eventManager = props.eventManager;\n    this._eventCallbacks = {\n      onViewStateChange: props.onViewStateChange,\n      onInteractionStateChange: props.onInteractionStateChange\n    };\n    Object.seal(this);\n    this.setProps(props);\n  }\n\n  finalize() {\n    for (const key in this.controllers) {\n      if (this.controllers[key]) {\n        this.controllers[key].finalize();\n      }\n    }\n\n    this.controllers = {};\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  setNeedsUpdate(reason) {\n    this._needsUpdate = this._needsUpdate || reason;\n    this._needsRedraw = this._needsRedraw || reason;\n  }\n\n  updateViewStates() {\n    for (const viewId in this.controllers) {\n      const controller = this.controllers[viewId];\n\n      if (controller) {\n        controller.updateTransition();\n      }\n    }\n  }\n\n  getViewports(rect) {\n    if (rect) {\n      return this._viewports.filter(viewport => viewport.containsPixel(rect));\n    }\n\n    return this._viewports;\n  }\n\n  getViews() {\n    const viewMap = {};\n    this.views.forEach(view => {\n      viewMap[view.id] = view;\n    });\n    return viewMap;\n  }\n\n  getView(viewOrViewId) {\n    return typeof viewOrViewId === 'string' ? this.views.find(view => view.id === viewOrViewId) : viewOrViewId;\n  }\n\n  getViewState(viewId) {\n    const view = this.getView(viewId);\n    const viewState = view && this.viewState[view.getViewStateId()] || this.viewState;\n    return view ? view.filterViewState(viewState) : viewState;\n  }\n\n  getViewport(viewId) {\n    return this._viewportMap[viewId];\n  }\n\n  unproject(xyz, opts) {\n    const viewports = this.getViewports();\n    const pixel = {\n      x: xyz[0],\n      y: xyz[1]\n    };\n\n    for (let i = viewports.length - 1; i >= 0; --i) {\n      const viewport = viewports[i];\n\n      if (viewport.containsPixel(pixel)) {\n        const p = xyz.slice();\n        p[0] -= viewport.x;\n        p[1] -= viewport.y;\n        return viewport.unproject(p, opts);\n      }\n    }\n\n    return null;\n  }\n\n  setProps(props) {\n    if ('views' in props) {\n      this._setViews(props.views);\n    }\n\n    if ('viewState' in props) {\n      this._setViewState(props.viewState);\n    }\n\n    if ('width' in props || 'height' in props) {\n      this._setSize(props.width, props.height);\n    }\n\n    if (!this._isUpdating) {\n      this._update();\n    }\n  }\n\n  _update() {\n    this._isUpdating = true;\n\n    if (this._needsUpdate) {\n      this._needsUpdate = false;\n\n      this._rebuildViewports();\n    }\n\n    if (this._needsUpdate) {\n      this._needsUpdate = false;\n\n      this._rebuildViewports();\n    }\n\n    this._isUpdating = false;\n  }\n\n  _setSize(width, height) {\n    if (width !== this.width || height !== this.height) {\n      this.width = width;\n      this.height = height;\n      this.setNeedsUpdate('Size changed');\n    }\n  }\n\n  _setViews(views) {\n    views = flatten(views, Boolean);\n\n    const viewsChanged = this._diffViews(views, this.views);\n\n    if (viewsChanged) {\n      this.setNeedsUpdate('views changed');\n    }\n\n    this.views = views;\n  }\n\n  _setViewState(viewState) {\n    if (viewState) {\n      const viewStateChanged = !deepEqual(viewState, this.viewState);\n\n      if (viewStateChanged) {\n        this.setNeedsUpdate('viewState changed');\n      }\n\n      this.viewState = viewState;\n    } else {\n      log.warn('missing `viewState` or `initialViewState`')();\n    }\n  }\n\n  _onViewStateChange(viewId, event) {\n    event.viewId = viewId;\n\n    if (this._eventCallbacks.onViewStateChange) {\n      this._eventCallbacks.onViewStateChange(event);\n    }\n  }\n\n  _createController(view, props) {\n    const Controller = props.type;\n    const controller = new Controller({\n      timeline: this.timeline,\n      eventManager: this._eventManager,\n      onViewStateChange: this._onViewStateChange.bind(this, props.id),\n      onStateChange: this._eventCallbacks.onInteractionStateChange,\n      makeViewport: viewState => view._getViewport(viewState, {\n        width: viewState.width,\n        height: viewState.height\n      }),\n      ...props\n    });\n    return controller;\n  }\n\n  _updateController(view, viewState, viewport, controller) {\n    let controllerProps = view.controller;\n\n    if (controllerProps) {\n      controllerProps = { ...viewState,\n        ...view.props,\n        ...controllerProps,\n        id: view.id,\n        x: viewport.x,\n        y: viewport.y,\n        width: viewport.width,\n        height: viewport.height\n      };\n\n      if (controller) {\n        controller.setProps(controllerProps);\n      } else {\n        controller = this._createController(view, controllerProps);\n      }\n\n      return controller;\n    }\n\n    return null;\n  }\n\n  _rebuildViewports() {\n    const {\n      width,\n      height,\n      views\n    } = this;\n    const oldControllers = this.controllers;\n    this._viewports = [];\n    this.controllers = {};\n    let invalidateControllers = false;\n\n    for (let i = views.length; i--;) {\n      const view = views[i];\n      const viewState = this.getViewState(view);\n      const viewport = view.makeViewport({\n        width,\n        height,\n        viewState\n      });\n      let oldController = oldControllers[view.id];\n\n      if (view.controller && !oldController) {\n        invalidateControllers = true;\n      }\n\n      if ((invalidateControllers || !view.controller) && oldController) {\n        oldController.finalize();\n        oldController = null;\n      }\n\n      this.controllers[view.id] = this._updateController(view, viewState, viewport, oldController);\n\n      this._viewports.unshift(viewport);\n    }\n\n    for (const id in oldControllers) {\n      if (oldControllers[id] && !this.controllers[id]) {\n        oldControllers[id].finalize();\n      }\n    }\n\n    this._buildViewportMap();\n  }\n\n  _buildViewportMap() {\n    this._viewportMap = {};\n\n    this._viewports.forEach(viewport => {\n      if (viewport.id) {\n        this._viewportMap[viewport.id] = this._viewportMap[viewport.id] || viewport;\n      }\n    });\n  }\n\n  _diffViews(newViews, oldViews) {\n    if (newViews.length !== oldViews.length) {\n      return true;\n    }\n\n    return newViews.some((_, i) => !newViews[i].equals(oldViews[i]));\n  }\n\n}\n//# sourceMappingURL=view-manager.js.map","const PERCENT_OR_PIXELS_REGEX = /([0-9]+\\.?[0-9]*)(%|px)/;\nexport function parsePosition(value) {\n  switch (typeof value) {\n    case 'number':\n      return {\n        position: value,\n        relative: false\n      };\n\n    case 'string':\n      const match = value.match(PERCENT_OR_PIXELS_REGEX);\n\n      if (match && match.length >= 3) {\n        const relative = match[2] === '%';\n        const position = parseFloat(match[1]);\n        return {\n          position: relative ? position / 100 : position,\n          relative\n        };\n      }\n\n    default:\n      throw new Error(\"Could not parse position string \".concat(value));\n  }\n}\nexport function getPosition(position, extent) {\n  return position.relative ? Math.round(position.position * extent) : position.position;\n}\n//# sourceMappingURL=positions.js.map","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'deck.gl: assertion failed.');\n  }\n}\n//# sourceMappingURL=assert.js.map","import Viewport from '../viewports/viewport';\nimport { parsePosition, getPosition } from '../utils/positions';\nimport { deepEqual } from '../utils/deep-equal';\nimport assert from '../utils/assert';\nexport default class View {\n  constructor(props = {}) {\n    const {\n      id = null,\n      x = 0,\n      y = 0,\n      width = '100%',\n      height = '100%',\n      viewportInstance,\n      type = Viewport\n    } = props;\n    assert(!viewportInstance || viewportInstance instanceof Viewport);\n    this.viewportInstance = viewportInstance;\n    this.id = id || this.constructor.displayName || 'view';\n    this.type = type;\n    this.props = { ...props,\n      id: this.id\n    };\n\n    this._parseDimensions({\n      x,\n      y,\n      width,\n      height\n    });\n\n    this.equals = this.equals.bind(this);\n    Object.seal(this);\n  }\n\n  equals(view) {\n    if (this === view) {\n      return true;\n    }\n\n    if (this.viewportInstance) {\n      return view.viewportInstance && this.viewportInstance.equals(view.viewportInstance);\n    }\n\n    const viewChanged = deepEqual(this.props, view.props);\n    return viewChanged;\n  }\n\n  makeViewport({\n    width,\n    height,\n    viewState\n  }) {\n    if (this.viewportInstance) {\n      return this.viewportInstance;\n    }\n\n    viewState = this.filterViewState(viewState);\n    const viewportDimensions = this.getDimensions({\n      width,\n      height\n    });\n    return this._getViewport(viewState, viewportDimensions);\n  }\n\n  getViewStateId() {\n    switch (typeof this.props.viewState) {\n      case 'string':\n        return this.props.viewState;\n\n      case 'object':\n        return this.props.viewState && this.props.viewState.id;\n\n      default:\n        return this.id;\n    }\n  }\n\n  filterViewState(viewState) {\n    if (this.props.viewState && typeof this.props.viewState === 'object') {\n      if (!this.props.viewState.id) {\n        return this.props.viewState;\n      }\n\n      const newViewState = { ...viewState\n      };\n\n      for (const key in this.props.viewState) {\n        if (key !== 'id') {\n          newViewState[key] = this.props.viewState[key];\n        }\n      }\n\n      return newViewState;\n    }\n\n    return viewState;\n  }\n\n  getDimensions({\n    width,\n    height\n  }) {\n    return {\n      x: getPosition(this._x, width),\n      y: getPosition(this._y, height),\n      width: getPosition(this._width, width),\n      height: getPosition(this._height, height)\n    };\n  }\n\n  _getControllerProps(defaultOpts) {\n    let opts = this.props.controller;\n\n    if (!opts) {\n      return null;\n    }\n\n    if (opts === true) {\n      return defaultOpts;\n    }\n\n    if (typeof opts === 'function') {\n      opts = {\n        type: opts\n      };\n    }\n\n    return { ...defaultOpts,\n      ...opts\n    };\n  }\n\n  _getViewport(viewState, viewportDimensions) {\n    const {\n      type: ViewportType\n    } = this;\n    return new ViewportType({ ...viewState,\n      ...this.props,\n      ...viewportDimensions\n    });\n  }\n\n  _parseDimensions({\n    x,\n    y,\n    width,\n    height\n  }) {\n    this._x = parsePosition(x);\n    this._y = parsePosition(y);\n    this._width = parsePosition(width);\n    this._height = parsePosition(height);\n  }\n\n}\n//# sourceMappingURL=view.js.map","import * as glMatrix from \"./common.js\";\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import Viewport from './viewport';\nimport { pixelsToWorld, getViewMatrix, addMetersToLngLat, getProjectionParameters, altitudeToFovy, fovyToAltitude, fitBounds, getBounds } from '@math.gl/web-mercator';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { Matrix4 } from 'math.gl';\nconst TILE_SIZE = 512;\nconst EARTH_CIRCUMFERENCE = 40.03e6;\nconst DEGREES_TO_RADIANS = Math.PI / 180;\n\nfunction unitsPerMeter(latitude) {\n  const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n  return TILE_SIZE / EARTH_CIRCUMFERENCE / latCosine;\n}\n\nexport default class WebMercatorViewport extends Viewport {\n  constructor(opts = {}) {\n    const {\n      latitude = 0,\n      longitude = 0,\n      zoom = 11,\n      pitch = 0,\n      bearing = 0,\n      nearZMultiplier = 0.1,\n      farZMultiplier = 1.01,\n      orthographic = false,\n      projectionMatrix,\n      repeat = false,\n      worldOffset = 0,\n      legacyMeterSizes = false\n    } = opts;\n    let {\n      width,\n      height,\n      altitude = 1.5\n    } = opts;\n    const scale = Math.pow(2, zoom);\n    width = width || 1;\n    height = height || 1;\n    let fovy;\n    let projectionParameters = null;\n\n    if (projectionMatrix) {\n      altitude = projectionMatrix[5] / 2;\n      fovy = altitudeToFovy(altitude);\n    } else {\n      if (opts.fovy) {\n        fovy = opts.fovy;\n        altitude = fovyToAltitude(fovy);\n      } else {\n        fovy = altitudeToFovy(altitude);\n      }\n\n      projectionParameters = getProjectionParameters({\n        width,\n        height,\n        pitch,\n        fovy,\n        nearZMultiplier,\n        farZMultiplier\n      });\n    }\n\n    let viewMatrixUncentered = getViewMatrix({\n      height,\n      pitch,\n      bearing,\n      scale,\n      altitude\n    });\n\n    if (worldOffset) {\n      const viewOffset = new Matrix4().translate([512 * worldOffset, 0, 0]);\n      viewMatrixUncentered = viewOffset.multiplyLeft(viewMatrixUncentered);\n    }\n\n    super({ ...opts,\n      width,\n      height,\n      viewMatrix: viewMatrixUncentered,\n      longitude,\n      latitude,\n      zoom,\n      ...projectionParameters,\n      fovy,\n      focalDistance: altitude\n    });\n    this.latitude = latitude;\n    this.longitude = longitude;\n    this.zoom = zoom;\n    this.pitch = pitch;\n    this.bearing = bearing;\n    this.altitude = altitude;\n    this.fovy = fovy;\n    this.orthographic = orthographic;\n    this._subViewports = repeat ? [] : null;\n    this._pseudoMeters = legacyMeterSizes;\n    Object.freeze(this);\n  }\n\n  get subViewports() {\n    if (this._subViewports && !this._subViewports.length) {\n      const bounds = this.getBounds();\n      const minOffset = Math.floor((bounds[0] + 180) / 360);\n      const maxOffset = Math.ceil((bounds[2] - 180) / 360);\n\n      for (let x = minOffset; x <= maxOffset; x++) {\n        const offsetViewport = x ? new WebMercatorViewport({ ...this,\n          worldOffset: x\n        }) : this;\n\n        this._subViewports.push(offsetViewport);\n      }\n    }\n\n    return this._subViewports;\n  }\n\n  projectPosition(xyz) {\n    if (this._pseudoMeters) {\n      return super.projectPosition(xyz);\n    }\n\n    const [X, Y] = this.projectFlat(xyz);\n    const Z = (xyz[2] || 0) * unitsPerMeter(xyz[1]);\n    return [X, Y, Z];\n  }\n\n  unprojectPosition(xyz) {\n    if (this._pseudoMeters) {\n      return super.unprojectPosition(xyz);\n    }\n\n    const [X, Y] = this.unprojectFlat(xyz);\n    const Z = (xyz[2] || 0) / unitsPerMeter(Y);\n    return [X, Y, Z];\n  }\n\n  addMetersToLngLat(lngLatZ, xyz) {\n    return addMetersToLngLat(lngLatZ, xyz);\n  }\n\n  panByPosition(coords, pixel) {\n    const fromLocation = pixelsToWorld(pixel, this.pixelUnprojectionMatrix);\n    const toLocation = this.projectFlat(coords);\n    const translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n    const newCenter = vec2.add([], this.center, translate);\n    const [longitude, latitude] = this.unprojectFlat(newCenter);\n    return {\n      longitude,\n      latitude\n    };\n  }\n\n  getBounds(options = {}) {\n    const corners = getBounds(this, options.z || 0);\n    return [Math.min(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.min(corners[0][1], corners[1][1], corners[2][1], corners[3][1]), Math.max(corners[0][0], corners[1][0], corners[2][0], corners[3][0]), Math.max(corners[0][1], corners[1][1], corners[2][1], corners[3][1])];\n  }\n\n  fitBounds(bounds, options = {}) {\n    const {\n      width,\n      height\n    } = this;\n    const {\n      longitude,\n      latitude,\n      zoom\n    } = fitBounds({\n      width,\n      height,\n      bounds,\n      ...options\n    });\n    return new WebMercatorViewport({\n      width,\n      height,\n      longitude,\n      latitude,\n      zoom\n    });\n  }\n\n}\nWebMercatorViewport.displayName = 'WebMercatorViewport';\n//# sourceMappingURL=web-mercator-viewport.js.map","function noop() {}\n\nconst DEFAULT_SETTINGS = {\n  onStart: noop,\n  onUpdate: noop,\n  onInterrupt: noop,\n  onEnd: noop\n};\nexport default class Transition {\n  constructor(timeline) {\n    this._inProgress = false;\n    this._handle = null;\n    this.timeline = timeline;\n    this.settings = {};\n  }\n\n  get inProgress() {\n    return this._inProgress;\n  }\n\n  start(props) {\n    this.cancel();\n    this.settings = { ...DEFAULT_SETTINGS,\n      ...props\n    };\n    this._inProgress = true;\n    this.settings.onStart(this);\n  }\n\n  end() {\n    if (this._inProgress) {\n      this.timeline.removeChannel(this._handle);\n      this._handle = null;\n      this._inProgress = false;\n      this.settings.onEnd(this);\n    }\n  }\n\n  cancel() {\n    if (this._inProgress) {\n      this.settings.onInterrupt(this);\n      this.timeline.removeChannel(this._handle);\n      this._handle = null;\n      this._inProgress = false;\n    }\n  }\n\n  update() {\n    if (!this._inProgress) {\n      return false;\n    }\n\n    if (this._handle === null) {\n      const {\n        timeline,\n        settings\n      } = this;\n      this._handle = timeline.addChannel({\n        delay: timeline.getTime(),\n        duration: settings.duration\n      });\n    }\n\n    this.time = this.timeline.getTime(this._handle);\n\n    this._onUpdate();\n\n    this.settings.onUpdate(this);\n\n    if (this.timeline.isFinished(this._handle)) {\n      this.end();\n    }\n\n    return true;\n  }\n\n  _onUpdate() {}\n\n}\n//# sourceMappingURL=transition.js.map","import Transition from '../transitions/transition';\n\nconst noop = () => {};\n\nexport const TRANSITION_EVENTS = {\n  BREAK: 1,\n  SNAP_TO_END: 2,\n  IGNORE: 3\n};\nconst DEFAULT_PROPS = {\n  transitionEasing: t => t,\n  transitionInterruption: TRANSITION_EVENTS.BREAK,\n  onTransitionStart: noop,\n  onTransitionInterrupt: noop,\n  onTransitionEnd: noop\n};\nexport default class TransitionManager {\n  constructor(ControllerState, props = {}) {\n    this.ControllerState = ControllerState;\n    this.props = { ...DEFAULT_PROPS,\n      ...props\n    };\n    this.propsInTransition = null;\n    this.transition = new Transition(props.timeline);\n    this.onViewStateChange = props.onViewStateChange || noop;\n    this.onStateChange = props.onStateChange || noop;\n    this._onTransitionUpdate = this._onTransitionUpdate.bind(this);\n  }\n\n  finalize() {\n    this.transition.cancel();\n  }\n\n  getViewportInTransition() {\n    return this.propsInTransition;\n  }\n\n  processViewStateChange(nextProps) {\n    let transitionTriggered = false;\n    const currentProps = this.props;\n    nextProps = { ...DEFAULT_PROPS,\n      ...nextProps\n    };\n    this.props = nextProps;\n\n    if (this._shouldIgnoreViewportChange(currentProps, nextProps)) {\n      return transitionTriggered;\n    }\n\n    if (this._isTransitionEnabled(nextProps)) {\n      const {\n        interruption,\n        endProps\n      } = this.transition.settings;\n      const startProps = { ...currentProps,\n        ...(interruption === TRANSITION_EVENTS.SNAP_TO_END ? endProps : this.propsInTransition || currentProps)\n      };\n\n      this._triggerTransition(startProps, nextProps);\n\n      transitionTriggered = true;\n    } else {\n      this.transition.cancel();\n    }\n\n    return transitionTriggered;\n  }\n\n  updateTransition() {\n    this.transition.update();\n  }\n\n  _isTransitionEnabled(props) {\n    const {\n      transitionDuration,\n      transitionInterpolator\n    } = props;\n    return (transitionDuration > 0 || transitionDuration === 'auto') && Boolean(transitionInterpolator);\n  }\n\n  _isUpdateDueToCurrentTransition(props) {\n    if (this.transition.inProgress) {\n      return this.transition.settings.interpolator.arePropsEqual(props, this.propsInTransition);\n    }\n\n    return false;\n  }\n\n  _shouldIgnoreViewportChange(currentProps, nextProps) {\n    if (this.transition.inProgress) {\n      return this.transition.settings.interruption === TRANSITION_EVENTS.IGNORE || this._isUpdateDueToCurrentTransition(nextProps);\n    } else if (this._isTransitionEnabled(nextProps)) {\n      return nextProps.transitionInterpolator.arePropsEqual(currentProps, nextProps);\n    }\n\n    return true;\n  }\n\n  _triggerTransition(startProps, endProps) {\n    const startViewstate = new this.ControllerState(startProps);\n    const endViewStateProps = new this.ControllerState(endProps).shortestPathFrom(startViewstate);\n    const {\n      transitionInterpolator\n    } = endProps;\n    const duration = transitionInterpolator.getDuration ? transitionInterpolator.getDuration(startProps, endProps) : endProps.transitionDuration;\n\n    if (duration === 0) {\n      return;\n    }\n\n    const initialProps = endProps.transitionInterpolator.initializeProps(startProps, endViewStateProps);\n    this.propsInTransition = {};\n    this.duration = duration;\n    this.transition.start({\n      duration,\n      easing: endProps.transitionEasing,\n      interpolator: endProps.transitionInterpolator,\n      interruption: endProps.transitionInterruption,\n      startProps: initialProps.start,\n      endProps: initialProps.end,\n      onStart: endProps.onTransitionStart,\n      onUpdate: this._onTransitionUpdate,\n      onInterrupt: this._onTransitionEnd(endProps.onTransitionInterrupt),\n      onEnd: this._onTransitionEnd(endProps.onTransitionEnd)\n    });\n    this.onStateChange({\n      inTransition: true\n    });\n    this.updateTransition();\n  }\n\n  _onTransitionEnd(callback) {\n    return transition => {\n      this.propsInTransition = null;\n      this.onStateChange({\n        inTransition: false,\n        isZooming: false,\n        isPanning: false,\n        isRotating: false\n      });\n      callback(transition);\n    };\n  }\n\n  _onTransitionUpdate(transition) {\n    const {\n      time,\n      settings: {\n        interpolator,\n        startProps,\n        endProps,\n        duration,\n        easing\n      }\n    } = transition;\n    const t = easing(time / duration);\n    const viewport = interpolator.interpolateProps(startProps, endProps, t);\n    this.propsInTransition = new this.ControllerState({ ...this.props,\n      ...viewport\n    }).getViewportProps();\n    this.onViewStateChange({\n      viewState: this.propsInTransition,\n      oldViewState: this.props\n    });\n  }\n\n}\n//# sourceMappingURL=transition-manager.js.map","import { equals } from 'math.gl';\nimport assert from '../utils/assert';\nexport default class TransitionInterpolator {\n  constructor(opts = {}) {\n    if (Array.isArray(opts)) {\n      opts = {\n        compare: opts,\n        extract: opts,\n        required: opts\n      };\n    }\n\n    const {\n      compare,\n      extract,\n      required\n    } = opts;\n    this._propsToCompare = compare;\n    this._propsToExtract = extract;\n    this._requiredProps = required;\n  }\n\n  arePropsEqual(currentProps, nextProps) {\n    for (const key of this._propsToCompare || Object.keys(nextProps)) {\n      if (!(key in currentProps) || !(key in nextProps) || !equals(currentProps[key], nextProps[key])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  initializeProps(startProps, endProps) {\n    let result;\n\n    if (this._propsToExtract) {\n      const startViewStateProps = {};\n      const endViewStateProps = {};\n\n      for (const key of this._propsToExtract) {\n        startViewStateProps[key] = startProps[key];\n        endViewStateProps[key] = endProps[key];\n      }\n\n      result = {\n        start: startViewStateProps,\n        end: endViewStateProps\n      };\n    } else {\n      result = {\n        start: startProps,\n        end: endProps\n      };\n    }\n\n    this._checkRequiredProps(result.start);\n\n    this._checkRequiredProps(result.end);\n\n    return result;\n  }\n\n  interpolateProps(startProps, endProps, t) {\n    return endProps;\n  }\n\n  getDuration(startProps, endProps) {\n    return endProps.transitionDuration;\n  }\n\n  _checkRequiredProps(props) {\n    if (!this._requiredProps) {\n      return;\n    }\n\n    this._requiredProps.forEach(propName => {\n      const value = props[propName];\n      assert(Number.isFinite(value) || Array.isArray(value), \"\".concat(propName, \" is required for transition\"));\n    });\n  }\n\n}\n//# sourceMappingURL=transition-interpolator.js.map","import TransitionInterpolator from './transition-interpolator';\nimport { lerp } from 'math.gl';\nconst DEFAULT_PROPS = ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\nconst DEFAULT_REQUIRED_PROPS = ['longitude', 'latitude', 'zoom'];\nexport default class LinearInterpolator extends TransitionInterpolator {\n  constructor(opts = {}) {\n    const transitionProps = Array.isArray(opts) ? opts : opts.transitionProps;\n    super(transitionProps || {\n      compare: DEFAULT_PROPS,\n      extract: DEFAULT_PROPS,\n      required: DEFAULT_REQUIRED_PROPS\n    });\n    this.opts = opts;\n  }\n\n  initializeProps(startProps, endProps) {\n    const result = super.initializeProps(startProps, endProps);\n    const {\n      makeViewport,\n      around\n    } = this.opts;\n\n    if (makeViewport && around) {\n      const startViewport = makeViewport(startProps);\n      const endViewport = makeViewport(endProps);\n      const aroundPosition = startViewport.unproject(around);\n      result.start.around = around;\n      Object.assign(result.end, {\n        around: endViewport.project(aroundPosition),\n        aroundPosition,\n        width: endProps.width,\n        height: endProps.height\n      });\n    }\n\n    return result;\n  }\n\n  interpolateProps(startProps, endProps, t) {\n    const propsInTransition = {};\n\n    for (const key of this._propsToExtract) {\n      propsInTransition[key] = lerp(startProps[key] || 0, endProps[key] || 0, t);\n    }\n\n    if (endProps.aroundPosition) {\n      const viewport = this.opts.makeViewport({ ...endProps,\n        ...propsInTransition\n      });\n      Object.assign(propsInTransition, viewport.panByPosition(endProps.aroundPosition, lerp(startProps.around, endProps.around, t)));\n    }\n\n    return propsInTransition;\n  }\n\n}\n//# sourceMappingURL=linear-interpolator.js.map","import TransitionManager, { TRANSITION_EVENTS } from './transition-manager';\nimport LinearInterpolator from '../transitions/linear-interpolator';\nconst NO_TRANSITION_PROPS = {\n  transitionDuration: 0\n};\nconst LINEAR_TRANSITION_PROPS = {\n  transitionDuration: 300,\n  transitionEasing: t => t,\n  transitionInterruption: TRANSITION_EVENTS.BREAK\n};\nconst DEFAULT_INERTIA = 300;\n\nconst INERTIA_EASING = t => 1 - (1 - t) * (1 - t);\n\nconst EVENT_TYPES = {\n  WHEEL: ['wheel'],\n  PAN: ['panstart', 'panmove', 'panend'],\n  PINCH: ['pinchstart', 'pinchmove', 'pinchend'],\n  TRIPLE_PAN: ['tripanstart', 'tripanmove', 'tripanend'],\n  DOUBLE_TAP: ['doubletap'],\n  KEYBOARD: ['keydown']\n};\nexport default class Controller {\n  constructor(ControllerState, options = {}) {\n    this.ControllerState = ControllerState;\n    this.controllerState = null;\n    this.controllerStateProps = null;\n    this.eventManager = null;\n    this.transitionManager = new TransitionManager(ControllerState, { ...options,\n      onViewStateChange: this._onTransition.bind(this),\n      onStateChange: this._setInteractionState.bind(this)\n    });\n    const linearTransitionProps = this.linearTransitionProps;\n    this._transition = linearTransitionProps && { ...LINEAR_TRANSITION_PROPS,\n      transitionInterpolator: new LinearInterpolator({\n        transitionProps: linearTransitionProps\n      })\n    };\n    this._events = null;\n    this._interactionState = {\n      isDragging: false\n    };\n    this._customEvents = [];\n    this.onViewStateChange = null;\n    this.onStateChange = null;\n    this.handleEvent = this.handleEvent.bind(this);\n    this.setProps(options);\n  }\n\n  get linearTransitionProps() {\n    return null;\n  }\n\n  set events(customEvents) {\n    this.toggleEvents(this._customEvents, false);\n    this.toggleEvents(customEvents, true);\n    this._customEvents = customEvents;\n    this.setProps(this.controllerStateProps);\n  }\n\n  finalize() {\n    for (const eventName in this._events) {\n      if (this._events[eventName]) {\n        this.eventManager.off(eventName, this.handleEvent);\n      }\n    }\n\n    this.transitionManager.finalize();\n  }\n\n  handleEvent(event) {\n    const {\n      ControllerState\n    } = this;\n    this.controllerState = new ControllerState({\n      makeViewport: this.makeViewport,\n      ...this.controllerStateProps,\n      ...this._state\n    });\n    const eventStartBlocked = this._eventStartBlocked;\n\n    switch (event.type) {\n      case 'panstart':\n        return eventStartBlocked ? false : this._onPanStart(event);\n\n      case 'panmove':\n        return this._onPan(event);\n\n      case 'panend':\n        return this._onPanEnd(event);\n\n      case 'pinchstart':\n        return eventStartBlocked ? false : this._onPinchStart(event);\n\n      case 'pinchmove':\n        return this._onPinch(event);\n\n      case 'pinchend':\n        return this._onPinchEnd(event);\n\n      case 'tripanstart':\n        return eventStartBlocked ? false : this._onTriplePanStart(event);\n\n      case 'tripanmove':\n        return this._onTriplePan(event);\n\n      case 'tripanend':\n        return this._onTriplePanEnd(event);\n\n      case 'doubletap':\n        return this._onDoubleTap(event);\n\n      case 'wheel':\n        return this._onWheel(event);\n\n      case 'keydown':\n        return this._onKeyDown(event);\n\n      default:\n        return false;\n    }\n  }\n\n  getCenter(event) {\n    const {\n      x,\n      y\n    } = this.controllerStateProps;\n    const {\n      offsetCenter\n    } = event;\n    return [offsetCenter.x - x, offsetCenter.y - y];\n  }\n\n  isPointInBounds(pos, event) {\n    const {\n      width,\n      height\n    } = this.controllerStateProps;\n\n    if (event && event.handled) {\n      return false;\n    }\n\n    const inside = pos[0] >= 0 && pos[0] <= width && pos[1] >= 0 && pos[1] <= height;\n\n    if (inside && event) {\n      event.stopPropagation();\n    }\n\n    return inside;\n  }\n\n  isFunctionKeyPressed(event) {\n    const {\n      srcEvent\n    } = event;\n    return Boolean(srcEvent.metaKey || srcEvent.altKey || srcEvent.ctrlKey || srcEvent.shiftKey);\n  }\n\n  isDragging() {\n    return this._interactionState.isDragging;\n  }\n\n  blockEvents(timeout) {\n    const timer = setTimeout(() => {\n      if (this._eventStartBlocked === timer) {\n        this._eventStartBlocked = null;\n      }\n    }, timeout);\n    this._eventStartBlocked = timer;\n  }\n\n  setProps(props) {\n    if ('onViewStateChange' in props) {\n      this.onViewStateChange = props.onViewStateChange;\n    }\n\n    if ('onStateChange' in props) {\n      this.onStateChange = props.onStateChange;\n    }\n\n    if ('makeViewport' in props) {\n      this.makeViewport = props.makeViewport;\n    }\n\n    if ('dragMode' in props) {\n      this.dragMode = props.dragMode;\n    }\n\n    this.controllerStateProps = props;\n\n    if ('eventManager' in props && this.eventManager !== props.eventManager) {\n      this.eventManager = props.eventManager;\n      this._events = {};\n      this.toggleEvents(this._customEvents, true);\n    }\n\n    if (!('transitionInterpolator' in props)) {\n      props.transitionInterpolator = this._getTransitionProps().transitionInterpolator;\n    }\n\n    this.transitionManager.processViewStateChange(props);\n    let {\n      inertia\n    } = props;\n\n    if (inertia === true) {\n      inertia = DEFAULT_INERTIA;\n    }\n\n    this.inertia = inertia;\n    const {\n      scrollZoom = true,\n      dragPan = true,\n      dragRotate = true,\n      doubleClickZoom = true,\n      touchZoom = true,\n      touchRotate = false,\n      keyboard = true\n    } = props;\n    const isInteractive = Boolean(this.onViewStateChange);\n    this.toggleEvents(EVENT_TYPES.WHEEL, isInteractive && scrollZoom);\n    this.toggleEvents(EVENT_TYPES.PAN, isInteractive && (dragPan || dragRotate));\n    this.toggleEvents(EVENT_TYPES.PINCH, isInteractive && (touchZoom || touchRotate));\n    this.toggleEvents(EVENT_TYPES.TRIPLE_PAN, isInteractive && touchRotate);\n    this.toggleEvents(EVENT_TYPES.DOUBLE_TAP, isInteractive && doubleClickZoom);\n    this.toggleEvents(EVENT_TYPES.KEYBOARD, isInteractive && keyboard);\n    this.scrollZoom = scrollZoom;\n    this.dragPan = dragPan;\n    this.dragRotate = dragRotate;\n    this.doubleClickZoom = doubleClickZoom;\n    this.touchZoom = touchZoom;\n    this.touchRotate = touchRotate;\n    this.keyboard = keyboard;\n  }\n\n  updateTransition() {\n    this.transitionManager.updateTransition();\n  }\n\n  toggleEvents(eventNames, enabled) {\n    if (this.eventManager) {\n      eventNames.forEach(eventName => {\n        if (this._events[eventName] !== enabled) {\n          this._events[eventName] = enabled;\n\n          if (enabled) {\n            this.eventManager.on(eventName, this.handleEvent);\n          } else {\n            this.eventManager.off(eventName, this.handleEvent);\n          }\n        }\n      });\n    }\n  }\n\n  updateViewport(newControllerState, extraProps = {}, interactionState = {}) {\n    const viewState = { ...newControllerState.getViewportProps(),\n      ...extraProps\n    };\n    const changed = this.controllerState !== newControllerState;\n    this._state = newControllerState.getState();\n\n    this._setInteractionState(interactionState);\n\n    if (changed) {\n      const oldViewState = this.controllerState ? this.controllerState.getViewportProps() : null;\n\n      if (this.onViewStateChange) {\n        this.onViewStateChange({\n          viewState,\n          interactionState: this._interactionState,\n          oldViewState\n        });\n      }\n    }\n  }\n\n  _onTransition(params) {\n    if (this.onViewStateChange) {\n      params.interactionState = this._interactionState;\n      this.onViewStateChange(params);\n    }\n  }\n\n  _setInteractionState(newStates) {\n    Object.assign(this._interactionState, newStates);\n\n    if (this.onStateChange) {\n      this.onStateChange(this._interactionState);\n    }\n  }\n\n  _onPanStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    let alternateMode = this.isFunctionKeyPressed(event) || event.rightButton;\n\n    if (this.invertPan || this.dragMode === 'pan') {\n      alternateMode = !alternateMode;\n    }\n\n    const newControllerState = this.controllerState[alternateMode ? 'panStart' : 'rotateStart']({\n      pos\n    });\n    this._panMove = alternateMode;\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onPan(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    return this._panMove ? this._onPanMove(event) : this._onPanRotate(event);\n  }\n\n  _onPanEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    return this._panMove ? this._onPanMoveEnd(event) : this._onPanRotateEnd(event);\n  }\n\n  _onPanMove(event) {\n    if (!this.dragPan) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    const newControllerState = this.controllerState.pan({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isPanning: true\n    });\n    return true;\n  }\n\n  _onPanMoveEnd(event) {\n    const {\n      inertia\n    } = this;\n\n    if (this.dragPan && inertia && event.velocity) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0] + event.velocityX * inertia / 2, pos[1] + event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.pan({\n        pos: endPos\n      }).panEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isPanning: true\n      });\n    } else {\n      const newControllerState = this.controllerState.panEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false\n      });\n    }\n\n    return true;\n  }\n\n  _onPanRotate(event) {\n    if (!this.dragRotate) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    const newControllerState = this.controllerState.rotate({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isRotating: true\n    });\n    return true;\n  }\n\n  _onPanRotateEnd(event) {\n    const {\n      inertia\n    } = this;\n\n    if (this.dragRotate && inertia && event.velocity) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0] + event.velocityX * inertia / 2, pos[1] + event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.rotate({\n        pos: endPos\n      }).rotateEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isRotating: true\n      });\n    } else {\n      const newControllerState = this.controllerState.rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isRotating: false\n      });\n    }\n\n    return true;\n  }\n\n  _onWheel(event) {\n    if (!this.scrollZoom) {\n      return false;\n    }\n\n    event.preventDefault();\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const {\n      speed = 0.01,\n      smooth = false\n    } = this.scrollZoom;\n    const {\n      delta\n    } = event;\n    let scale = 2 / (1 + Math.exp(-Math.abs(delta * speed)));\n\n    if (delta < 0 && scale !== 0) {\n      scale = 1 / scale;\n    }\n\n    const newControllerState = this.controllerState.zoom({\n      pos,\n      scale\n    });\n    this.updateViewport(newControllerState, { ...this._getTransitionProps({\n        around: pos\n      }),\n      transitionDuration: smooth ? 250 : 1\n    }, {\n      isZooming: true,\n      isPanning: true\n    });\n    return true;\n  }\n\n  _onTriplePanStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const newControllerState = this.controllerState.rotateStart({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onTriplePan(event) {\n    if (!this.touchRotate) {\n      return false;\n    }\n\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n    pos[0] -= event.deltaX;\n    const newControllerState = this.controllerState.rotate({\n      pos\n    });\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isRotating: true\n    });\n    return true;\n  }\n\n  _onTriplePanEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const {\n      inertia\n    } = this;\n\n    if (this.touchRotate && inertia && event.velocityY) {\n      const pos = this.getCenter(event);\n      const endPos = [pos[0], pos[1] += event.velocityY * inertia / 2];\n      const newControllerState = this.controllerState.rotate({\n        pos: endPos\n      });\n      this.updateViewport(newControllerState, { ...this._getTransitionProps(),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isRotating: true\n      });\n      this.blockEvents(inertia);\n    } else {\n      const newControllerState = this.controllerState.rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isRotating: false\n      });\n    }\n\n    return true;\n  }\n\n  _onPinchStart(event) {\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const newControllerState = this.controllerState.zoomStart({\n      pos\n    }).rotateStart({\n      pos\n    });\n    this._startPinchRotation = event.rotation;\n    this._lastPinchEvent = event;\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true\n    });\n    return true;\n  }\n\n  _onPinch(event) {\n    if (!this.touchZoom && !this.touchRotate) {\n      return false;\n    }\n\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    let newControllerState = this.controllerState;\n\n    if (this.touchZoom) {\n      const {\n        scale\n      } = event;\n      const pos = this.getCenter(event);\n      newControllerState = newControllerState.zoom({\n        pos,\n        scale\n      });\n    }\n\n    if (this.touchRotate) {\n      const {\n        rotation\n      } = event;\n      newControllerState = newControllerState.rotate({\n        deltaAngleX: this._startPinchRotation - rotation\n      });\n    }\n\n    this.updateViewport(newControllerState, NO_TRANSITION_PROPS, {\n      isDragging: true,\n      isPanning: this.touchZoom,\n      isZooming: this.touchZoom,\n      isRotating: this.touchRotate\n    });\n    this._lastPinchEvent = event;\n    return true;\n  }\n\n  _onPinchEnd(event) {\n    if (!this.isDragging()) {\n      return false;\n    }\n\n    const {\n      inertia,\n      _lastPinchEvent\n    } = this;\n\n    if (this.touchZoom && inertia && _lastPinchEvent && event.scale !== _lastPinchEvent.scale) {\n      const pos = this.getCenter(event);\n      let newControllerState = this.controllerState.rotateEnd();\n      const z = Math.log2(event.scale);\n\n      const velocityZ = (z - Math.log2(_lastPinchEvent.scale)) / (event.deltaTime - _lastPinchEvent.deltaTime);\n\n      const endScale = Math.pow(2, z + velocityZ * inertia / 2);\n      newControllerState = newControllerState.zoom({\n        pos,\n        scale: endScale\n      }).zoomEnd();\n      this.updateViewport(newControllerState, { ...this._getTransitionProps({\n          around: pos\n        }),\n        transitionDuration: inertia,\n        transitionEasing: INERTIA_EASING\n      }, {\n        isDragging: false,\n        isPanning: this.touchZoom,\n        isZooming: this.touchZoom,\n        isRotating: false\n      });\n      this.blockEvents(inertia);\n    } else {\n      const newControllerState = this.controllerState.zoomEnd().rotateEnd();\n      this.updateViewport(newControllerState, null, {\n        isDragging: false,\n        isPanning: false,\n        isZooming: false,\n        isRotating: false\n      });\n    }\n\n    this._startPinchRotation = null;\n    this._lastPinchEvent = null;\n    return true;\n  }\n\n  _onDoubleTap(event) {\n    if (!this.doubleClickZoom) {\n      return false;\n    }\n\n    const pos = this.getCenter(event);\n\n    if (!this.isPointInBounds(pos, event)) {\n      return false;\n    }\n\n    const isZoomOut = this.isFunctionKeyPressed(event);\n    const newControllerState = this.controllerState.zoom({\n      pos,\n      scale: isZoomOut ? 0.5 : 2\n    });\n    this.updateViewport(newControllerState, this._getTransitionProps({\n      around: pos\n    }), {\n      isZooming: true,\n      isPanning: true\n    });\n    this.blockEvents(100);\n    return true;\n  }\n\n  _onKeyDown(event) {\n    if (!this.keyboard) {\n      return false;\n    }\n\n    const funcKey = this.isFunctionKeyPressed(event);\n    const {\n      zoomSpeed,\n      moveSpeed,\n      rotateSpeedX,\n      rotateSpeedY\n    } = this.keyboard;\n    const {\n      controllerState\n    } = this;\n    let newControllerState;\n    const interactionState = {};\n\n    switch (event.srcEvent.code) {\n      case 'Minus':\n        newControllerState = funcKey ? controllerState.zoomOut(zoomSpeed).zoomOut(zoomSpeed) : controllerState.zoomOut(zoomSpeed);\n        interactionState.isZooming = true;\n        break;\n\n      case 'Equal':\n        newControllerState = funcKey ? controllerState.zoomIn(zoomSpeed).zoomIn(zoomSpeed) : controllerState.zoomIn(zoomSpeed);\n        interactionState.isZooming = true;\n        break;\n\n      case 'ArrowLeft':\n        if (funcKey) {\n          newControllerState = controllerState.rotateLeft(rotateSpeedX);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveLeft(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowRight':\n        if (funcKey) {\n          newControllerState = controllerState.rotateRight(rotateSpeedX);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveRight(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowUp':\n        if (funcKey) {\n          newControllerState = controllerState.rotateUp(rotateSpeedY);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveUp(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      case 'ArrowDown':\n        if (funcKey) {\n          newControllerState = controllerState.rotateDown(rotateSpeedY);\n          interactionState.isRotating = true;\n        } else {\n          newControllerState = controllerState.moveDown(moveSpeed);\n          interactionState.isPanning = true;\n        }\n\n        break;\n\n      default:\n        return false;\n    }\n\n    this.updateViewport(newControllerState, this._getTransitionProps(), interactionState);\n    return true;\n  }\n\n  _getTransitionProps(opts) {\n    const {\n      _transition\n    } = this;\n\n    if (!_transition) {\n      return NO_TRANSITION_PROPS;\n    }\n\n    return opts ? { ..._transition,\n      transitionInterpolator: new LinearInterpolator({ ...opts,\n        transitionProps: this.linearTransitionProps,\n        makeViewport: this.controllerState.makeViewport\n      })\n    } : _transition;\n  }\n\n}\n//# sourceMappingURL=controller.js.map","export default class ViewState {\n  constructor(opts) {\n    this._viewportProps = this._applyConstraints(opts);\n  }\n\n  getViewportProps() {\n    return this._viewportProps;\n  }\n\n  getState() {\n    return this._state;\n  }\n\n  shortestPathFrom(viewState) {\n    return this._viewportProps;\n  }\n\n  _applyConstraints(props) {\n    return props;\n  }\n\n}\n//# sourceMappingURL=view-state.js.map","import { clamp } from 'math.gl';\nimport Controller from './controller';\nimport ViewState from './view-state';\nimport { normalizeViewportProps } from '@math.gl/web-mercator';\nimport assert from '../utils/assert';\nconst PITCH_MOUSE_THRESHOLD = 5;\nconst PITCH_ACCEL = 1.2;\nconst DEFAULT_STATE = {\n  pitch: 0,\n  bearing: 0,\n  altitude: 1.5,\n  minZoom: 0,\n  maxZoom: 20,\n  minPitch: 0,\n  maxPitch: 60\n};\nexport class MapState extends ViewState {\n  constructor({\n    makeViewport,\n    width,\n    height,\n    latitude,\n    longitude,\n    zoom,\n    bearing = DEFAULT_STATE.bearing,\n    pitch = DEFAULT_STATE.pitch,\n    altitude = DEFAULT_STATE.altitude,\n    maxZoom = DEFAULT_STATE.maxZoom,\n    minZoom = DEFAULT_STATE.minZoom,\n    maxPitch = DEFAULT_STATE.maxPitch,\n    minPitch = DEFAULT_STATE.minPitch,\n    startPanLngLat,\n    startZoomLngLat,\n    startRotatePos,\n    startBearing,\n    startPitch,\n    startZoom,\n    normalize\n  } = {}) {\n    assert(Number.isFinite(longitude));\n    assert(Number.isFinite(latitude));\n    assert(Number.isFinite(zoom));\n    super({\n      width,\n      height,\n      latitude,\n      longitude,\n      zoom,\n      bearing,\n      pitch,\n      altitude,\n      maxZoom,\n      minZoom,\n      maxPitch,\n      minPitch,\n      normalize\n    });\n    this._state = {\n      startPanLngLat,\n      startZoomLngLat,\n      startRotatePos,\n      startBearing,\n      startPitch,\n      startZoom\n    };\n    this.makeViewport = makeViewport;\n  }\n\n  panStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startPanLngLat: this._unproject(pos)\n    });\n  }\n\n  pan({\n    pos,\n    startPos\n  }) {\n    const startPanLngLat = this._state.startPanLngLat || this._unproject(startPos);\n\n    if (!startPanLngLat) {\n      return this;\n    }\n\n    const viewport = this.makeViewport(this._viewportProps);\n    const newProps = viewport.panByPosition(startPanLngLat, pos);\n    return this._getUpdatedState(newProps);\n  }\n\n  panEnd() {\n    return this._getUpdatedState({\n      startPanLngLat: null\n    });\n  }\n\n  rotateStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startRotatePos: pos,\n      startBearing: this._viewportProps.bearing,\n      startPitch: this._viewportProps.pitch\n    });\n  }\n\n  rotate({\n    pos,\n    deltaAngleX = 0,\n    deltaAngleY = 0\n  }) {\n    const {\n      startRotatePos,\n      startBearing,\n      startPitch\n    } = this._state;\n\n    if (!startRotatePos || !Number.isFinite(startBearing) || !Number.isFinite(startPitch)) {\n      return this;\n    }\n\n    let newRotation;\n\n    if (pos) {\n      newRotation = this._calculateNewPitchAndBearing({ ...this._getRotationParams(pos, startRotatePos),\n        startBearing,\n        startPitch\n      });\n    } else {\n      newRotation = {\n        bearing: startBearing + deltaAngleX,\n        pitch: startPitch + deltaAngleY\n      };\n    }\n\n    return this._getUpdatedState(newRotation);\n  }\n\n  rotateEnd() {\n    return this._getUpdatedState({\n      startBearing: null,\n      startPitch: null\n    });\n  }\n\n  zoomStart({\n    pos\n  }) {\n    return this._getUpdatedState({\n      startZoomLngLat: this._unproject(pos),\n      startZoom: this._viewportProps.zoom\n    });\n  }\n\n  zoom({\n    pos,\n    startPos,\n    scale\n  }) {\n    let {\n      startZoom,\n      startZoomLngLat\n    } = this._state;\n\n    if (!Number.isFinite(startZoom)) {\n      startZoom = this._viewportProps.zoom;\n      startZoomLngLat = this._unproject(startPos) || this._unproject(pos);\n    }\n\n    const zoom = this._calculateNewZoom({\n      scale,\n      startZoom\n    });\n\n    const zoomedViewport = this.makeViewport({ ...this._viewportProps,\n      zoom\n    });\n    return this._getUpdatedState({\n      zoom,\n      ...zoomedViewport.panByPosition(startZoomLngLat, pos)\n    });\n  }\n\n  zoomEnd() {\n    return this._getUpdatedState({\n      startZoomLngLat: null,\n      startZoom: null\n    });\n  }\n\n  zoomIn(speed = 2) {\n    return this._zoomFromCenter(speed);\n  }\n\n  zoomOut(speed = 2) {\n    return this._zoomFromCenter(1 / speed);\n  }\n\n  moveLeft(speed = 100) {\n    return this._panFromCenter([speed, 0]);\n  }\n\n  moveRight(speed = 100) {\n    return this._panFromCenter([-speed, 0]);\n  }\n\n  moveUp(speed = 100) {\n    return this._panFromCenter([0, speed]);\n  }\n\n  moveDown(speed = 100) {\n    return this._panFromCenter([0, -speed]);\n  }\n\n  rotateLeft(speed = 15) {\n    return this._getUpdatedState({\n      bearing: this._viewportProps.bearing - speed\n    });\n  }\n\n  rotateRight(speed = 15) {\n    return this._getUpdatedState({\n      bearing: this._viewportProps.bearing + speed\n    });\n  }\n\n  rotateUp(speed = 10) {\n    return this._getUpdatedState({\n      pitch: this._viewportProps.pitch + speed\n    });\n  }\n\n  rotateDown(speed = 10) {\n    return this._getUpdatedState({\n      pitch: this._viewportProps.pitch - speed\n    });\n  }\n\n  shortestPathFrom(viewState) {\n    const fromProps = viewState.getViewportProps();\n    const props = { ...this._viewportProps\n    };\n    const {\n      bearing,\n      longitude\n    } = props;\n\n    if (Math.abs(bearing - fromProps.bearing) > 180) {\n      props.bearing = bearing < 0 ? bearing + 360 : bearing - 360;\n    }\n\n    if (Math.abs(longitude - fromProps.longitude) > 180) {\n      props.longitude = longitude < 0 ? longitude + 360 : longitude - 360;\n    }\n\n    return props;\n  }\n\n  _zoomFromCenter(scale) {\n    const {\n      width,\n      height\n    } = this._viewportProps;\n    return this.zoom({\n      pos: [width / 2, height / 2],\n      scale\n    });\n  }\n\n  _panFromCenter(offset) {\n    const {\n      width,\n      height\n    } = this._viewportProps;\n    return this.pan({\n      startPos: [width / 2, height / 2],\n      pos: [width / 2 + offset[0], height / 2 + offset[1]]\n    });\n  }\n\n  _getUpdatedState(newProps) {\n    return new this.constructor({\n      makeViewport: this.makeViewport,\n      ...this._viewportProps,\n      ...this._state,\n      ...newProps\n    });\n  }\n\n  _applyConstraints(props) {\n    const {\n      maxZoom,\n      minZoom,\n      zoom\n    } = props;\n    props.zoom = clamp(zoom, minZoom, maxZoom);\n    const {\n      maxPitch,\n      minPitch,\n      pitch\n    } = props;\n    props.pitch = clamp(pitch, minPitch, maxPitch);\n    const {\n      normalize = true\n    } = props;\n\n    if (normalize) {\n      Object.assign(props, normalizeViewportProps(props));\n    }\n\n    return props;\n  }\n\n  _unproject(pos) {\n    const viewport = this.makeViewport(this._viewportProps);\n    return pos && viewport.unproject(pos);\n  }\n\n  _calculateNewZoom({\n    scale,\n    startZoom\n  }) {\n    const {\n      maxZoom,\n      minZoom\n    } = this._viewportProps;\n    const zoom = startZoom + Math.log2(scale);\n    return clamp(zoom, minZoom, maxZoom);\n  }\n\n  _calculateNewPitchAndBearing({\n    deltaScaleX,\n    deltaScaleY,\n    startBearing,\n    startPitch\n  }) {\n    deltaScaleY = clamp(deltaScaleY, -1, 1);\n    const {\n      minPitch,\n      maxPitch\n    } = this._viewportProps;\n    const bearing = startBearing + 180 * deltaScaleX;\n    let pitch = startPitch;\n\n    if (deltaScaleY > 0) {\n      pitch = startPitch + deltaScaleY * (maxPitch - startPitch);\n    } else if (deltaScaleY < 0) {\n      pitch = startPitch - deltaScaleY * (minPitch - startPitch);\n    }\n\n    return {\n      pitch,\n      bearing\n    };\n  }\n\n  _getRotationParams(pos, startPos) {\n    const deltaX = pos[0] - startPos[0];\n    const deltaY = pos[1] - startPos[1];\n    const centerY = pos[1];\n    const startY = startPos[1];\n    const {\n      width,\n      height\n    } = this._viewportProps;\n    const deltaScaleX = deltaX / width;\n    let deltaScaleY = 0;\n\n    if (deltaY > 0) {\n      if (Math.abs(height - startY) > PITCH_MOUSE_THRESHOLD) {\n        deltaScaleY = deltaY / (startY - height) * PITCH_ACCEL;\n      }\n    } else if (deltaY < 0) {\n      if (startY > PITCH_MOUSE_THRESHOLD) {\n        deltaScaleY = 1 - centerY / startY;\n      }\n    }\n\n    deltaScaleY = Math.min(1, Math.max(-1, deltaScaleY));\n    return {\n      deltaScaleX,\n      deltaScaleY\n    };\n  }\n\n}\nexport default class MapController extends Controller {\n  constructor(props) {\n    props.dragMode = props.dragMode || 'pan';\n    super(MapState, props);\n  }\n\n  setProps(props) {\n    const oldProps = this.controllerStateProps;\n    super.setProps(props);\n    const dimensionChanged = !oldProps || oldProps.height !== props.height;\n\n    if (dimensionChanged) {\n      this.updateViewport(new this.ControllerState({\n        makeViewport: this.makeViewport,\n        ...this.controllerStateProps,\n        ...this._state\n      }));\n    }\n  }\n\n  get linearTransitionProps() {\n    return ['longitude', 'latitude', 'zoom', 'bearing', 'pitch'];\n  }\n\n}\n//# sourceMappingURL=map-controller.js.map","import View from './view';\nimport WebMercatorViewport from '../viewports/web-mercator-viewport';\nimport MapController from '../controllers/map-controller';\nexport default class MapView extends View {\n  constructor(props) {\n    super({ ...props,\n      type: WebMercatorViewport\n    });\n  }\n\n  get controller() {\n    return this._getControllerProps({\n      type: MapController\n    });\n  }\n\n}\nMapView.displayName = 'MapView';\n//# sourceMappingURL=map-view.js.map","const DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nlet idCount = 0;\nexport class AmbientLight {\n  constructor(props = {}) {\n    const {\n      color = DEFAULT_LIGHT_COLOR\n    } = props;\n    const {\n      intensity = DEFAULT_LIGHT_INTENSITY\n    } = props;\n    this.id = props.id || \"ambient-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'ambient';\n  }\n\n}\n//# sourceMappingURL=ambient-light.js.map","import { Vector3 } from 'math.gl';\nconst DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nconst DEFAULT_LIGHT_DIRECTION = [0.0, 0.0, -1.0];\nlet idCount = 0;\nexport class DirectionalLight {\n  constructor(props = {}) {\n    const {\n      color = DEFAULT_LIGHT_COLOR\n    } = props;\n    const {\n      intensity = DEFAULT_LIGHT_INTENSITY\n    } = props;\n    const {\n      direction = DEFAULT_LIGHT_DIRECTION\n    } = props;\n    const {\n      _shadow = false\n    } = props;\n    this.id = props.id || \"directional-\".concat(idCount++);\n    this.color = color;\n    this.intensity = intensity;\n    this.type = 'directional';\n    this.direction = new Vector3(direction).normalize().toArray();\n    this.shadow = _shadow;\n  }\n\n  getProjectedLight() {\n    return this;\n  }\n\n}\n//# sourceMappingURL=directional-light.js.map","export default class Effect {\n  constructor(props = {}) {\n    const {\n      id = 'effect'\n    } = props;\n    this.id = id;\n    this.props = { ...props\n    };\n  }\n\n  preRender() {}\n\n  getModuleParameters() {}\n\n  cleanup() {}\n\n}\n//# sourceMappingURL=effect.js.map","export default class Pass {\n  constructor(gl, props = {}) {\n    const {\n      id = 'pass'\n    } = props;\n    this.id = id;\n    this.gl = gl;\n    this.props = { ...props\n    };\n  }\n\n  setProps(props) {\n    Object.assign(this.props, props);\n  }\n\n  render() {}\n\n  cleanup() {}\n\n}\n//# sourceMappingURL=pass.js.map","import Pass from './pass';\nimport { clear, setParameters, withParameters, cssToDeviceRatio } from '@luma.gl/core';\nexport default class LayersPass extends Pass {\n  render(props) {\n    const gl = this.gl;\n    setParameters(gl, {\n      framebuffer: props.target\n    });\n    return this._drawLayers(props);\n  }\n\n  _drawLayers(props) {\n    const {\n      viewports,\n      views,\n      onViewportActive,\n      clearCanvas = true\n    } = props;\n    props.pass = props.pass || 'unknown';\n    const gl = this.gl;\n\n    if (clearCanvas) {\n      clearGLCanvas(gl);\n    }\n\n    const renderStats = [];\n\n    for (const viewportOrDescriptor of viewports) {\n      const viewport = viewportOrDescriptor.viewport || viewportOrDescriptor;\n      const view = views && views[viewport.id];\n      onViewportActive(viewport);\n\n      const drawLayerParams = this._getDrawLayerParams(viewport, props);\n\n      props.view = view;\n      const subViewports = viewport.subViewports || [viewport];\n\n      for (const subViewport of subViewports) {\n        props.viewport = subViewport;\n\n        const stats = this._drawLayersInViewport(gl, props, drawLayerParams);\n\n        renderStats.push(stats);\n      }\n    }\n\n    return renderStats;\n  }\n\n  _getDrawLayerParams(viewport, {\n    layers,\n    pass,\n    layerFilter,\n    effects,\n    moduleParameters\n  }) {\n    const drawLayerParams = [];\n    const indexResolver = layerIndexResolver();\n    const drawContext = {\n      viewport,\n      isPicking: pass.startsWith('picking'),\n      renderPass: pass\n    };\n    const layerFilterCache = {};\n\n    for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n      const layer = layers[layerIndex];\n\n      const shouldDrawLayer = this._shouldDrawLayer(layer, drawContext, layerFilter, layerFilterCache);\n\n      const layerRenderIndex = indexResolver(layer, shouldDrawLayer);\n      const layerParam = {\n        shouldDrawLayer,\n        layerRenderIndex\n      };\n\n      if (shouldDrawLayer) {\n        layerParam.moduleParameters = this._getModuleParameters(layer, effects, pass, moduleParameters);\n        layerParam.layerParameters = this.getLayerParameters(layer, layerIndex, viewport);\n      }\n\n      drawLayerParams[layerIndex] = layerParam;\n    }\n\n    return drawLayerParams;\n  }\n\n  _drawLayersInViewport(gl, {\n    layers,\n    pass,\n    viewport,\n    view\n  }, drawLayerParams) {\n    const glViewport = getGLViewport(gl, {\n      viewport\n    });\n\n    if (view && view.props.clear) {\n      const clearOpts = view.props.clear === true ? {\n        color: true,\n        depth: true\n      } : view.props.clear;\n      withParameters(gl, {\n        scissorTest: true,\n        scissor: glViewport\n      }, () => clear(gl, clearOpts));\n    }\n\n    const renderStatus = {\n      totalCount: layers.length,\n      visibleCount: 0,\n      compositeCount: 0,\n      pickableCount: 0\n    };\n    setParameters(gl, {\n      viewport: glViewport\n    });\n\n    for (let layerIndex = 0; layerIndex < layers.length; layerIndex++) {\n      const layer = layers[layerIndex];\n      const {\n        shouldDrawLayer,\n        layerRenderIndex,\n        moduleParameters,\n        layerParameters\n      } = drawLayerParams[layerIndex];\n\n      if (shouldDrawLayer && layer.props.pickable) {\n        renderStatus.pickableCount++;\n      }\n\n      if (layer.isComposite) {\n        renderStatus.compositeCount++;\n      } else if (shouldDrawLayer) {\n        renderStatus.visibleCount++;\n        moduleParameters.viewport = viewport;\n\n        try {\n          layer.drawLayer({\n            moduleParameters,\n            uniforms: {\n              layerIndex: layerRenderIndex\n            },\n            parameters: layerParameters\n          });\n        } catch (err) {\n          layer.raiseError(err, \"drawing \".concat(layer, \" to \").concat(pass));\n        }\n      }\n    }\n\n    return renderStatus;\n  }\n\n  shouldDrawLayer(layer) {\n    return true;\n  }\n\n  getModuleParameters(layer, effects) {\n    return null;\n  }\n\n  getLayerParameters(layer, layerIndex) {\n    return layer.props.parameters;\n  }\n\n  _shouldDrawLayer(layer, drawContext, layerFilter, layerFilterCache) {\n    const shouldDrawLayer = this.shouldDrawLayer(layer) && layer.props.visible;\n\n    if (!shouldDrawLayer) {\n      return false;\n    }\n\n    drawContext.layer = layer;\n    let parent = layer.parent;\n\n    while (parent) {\n      if (!parent.props.visible || !parent.filterSubLayer(drawContext)) {\n        return false;\n      }\n\n      drawContext.layer = parent;\n      parent = parent.parent;\n    }\n\n    if (layerFilter) {\n      const rootLayerId = drawContext.layer.id;\n\n      if (!(rootLayerId in layerFilterCache)) {\n        layerFilterCache[rootLayerId] = layerFilter(drawContext);\n      }\n\n      if (!layerFilterCache[rootLayerId]) {\n        return false;\n      }\n    }\n\n    layer.activateViewport(drawContext.viewport);\n    return true;\n  }\n\n  _getModuleParameters(layer, effects, pass, overrides) {\n    const moduleParameters = Object.assign(Object.create(layer.props), {\n      autoWrapLongitude: layer.wrapLongitude,\n      viewport: layer.context.viewport,\n      mousePosition: layer.context.mousePosition,\n      pickingActive: 0,\n      devicePixelRatio: cssToDeviceRatio(this.gl)\n    });\n\n    if (effects) {\n      for (const effect of effects) {\n        Object.assign(moduleParameters, effect.getModuleParameters(layer));\n      }\n    }\n\n    return Object.assign(moduleParameters, this.getModuleParameters(layer, effects), overrides);\n  }\n\n}\nexport function layerIndexResolver(startIndex = 0, layerIndices = {}) {\n  const resolvers = {};\n\n  const resolveLayerIndex = (layer, isDrawn) => {\n    const indexOverride = layer.props._offset;\n    const layerId = layer.id;\n    const parentId = layer.parent && layer.parent.id;\n    let index;\n\n    if (parentId && !(parentId in layerIndices)) {\n      resolveLayerIndex(layer.parent, false);\n    }\n\n    if (parentId in resolvers) {\n      const resolver = resolvers[parentId] = resolvers[parentId] || layerIndexResolver(layerIndices[parentId], layerIndices);\n      index = resolver(layer, isDrawn);\n      resolvers[layerId] = resolver;\n    } else if (Number.isFinite(indexOverride)) {\n      index = indexOverride + (layerIndices[parentId] || 0);\n      resolvers[layerId] = null;\n    } else {\n      index = startIndex;\n    }\n\n    if (isDrawn && index >= startIndex) {\n      startIndex = index + 1;\n    }\n\n    layerIndices[layerId] = index;\n    return index;\n  };\n\n  return resolveLayerIndex;\n}\n\nfunction getGLViewport(gl, {\n  viewport\n}) {\n  const height = gl.canvas ? gl.canvas.clientHeight || gl.canvas.height : 100;\n  const dimensions = viewport;\n  const pixelRatio = cssToDeviceRatio(gl);\n  return [dimensions.x * pixelRatio, (height - dimensions.y - dimensions.height) * pixelRatio, dimensions.width * pixelRatio, dimensions.height * pixelRatio];\n}\n\nfunction clearGLCanvas(gl) {\n  const width = gl.drawingBufferWidth;\n  const height = gl.drawingBufferHeight;\n  setParameters(gl, {\n    viewport: [0, 0, width, height]\n  });\n  gl.clear(16384 | 256);\n}\n//# sourceMappingURL=layers-pass.js.map","import { default as LayersPass } from './layers-pass';\nimport { Framebuffer, Texture2D, Renderbuffer, withParameters, cssToDeviceRatio } from '@luma.gl/core';\nexport default class ShadowPass extends LayersPass {\n  constructor(gl, props) {\n    super(gl, props);\n    this.shadowMap = new Texture2D(gl, {\n      width: 1,\n      height: 1,\n      parameters: {\n        [10241]: 9729,\n        [10240]: 9729,\n        [10242]: 33071,\n        [10243]: 33071\n      }\n    });\n    this.depthBuffer = new Renderbuffer(gl, {\n      format: 33189,\n      width: 1,\n      height: 1\n    });\n    this.fbo = new Framebuffer(gl, {\n      id: 'shadowmap',\n      width: 1,\n      height: 1,\n      attachments: {\n        [36064]: this.shadowMap,\n        [36096]: this.depthBuffer\n      }\n    });\n  }\n\n  render(params) {\n    const target = this.fbo;\n    withParameters(this.gl, {\n      depthRange: [0, 1],\n      depthTest: true,\n      blend: false,\n      clearColor: [1, 1, 1, 1]\n    }, () => {\n      const viewport = params.viewports[0];\n      const pixelRatio = cssToDeviceRatio(this.gl);\n      const width = viewport.width * pixelRatio;\n      const height = viewport.height * pixelRatio;\n\n      if (width !== target.width || height !== target.height) {\n        target.resize({\n          width,\n          height\n        });\n      }\n\n      super.render({ ...params,\n        target,\n        pass: 'shadow'\n      });\n    });\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.shadowEnabled !== false;\n  }\n\n  getModuleParameters() {\n    return {\n      drawToShadowMap: true\n    };\n  }\n\n  delete() {\n    if (this.fbo) {\n      this.fbo.delete();\n      this.fbo = null;\n    }\n\n    if (this.shadowMap) {\n      this.shadowMap.delete();\n      this.shadowMap = null;\n    }\n\n    if (this.depthBuffer) {\n      this.depthBuffer.delete();\n      this.depthBuffer = null;\n    }\n  }\n\n}\n//# sourceMappingURL=shadow-pass.js.map","import { COORDINATE_SYSTEM, PROJECTION_MODE } from '../../lib/constants';\nimport project from '../project/project';\nimport { Vector3, Matrix4 } from 'math.gl';\nimport memoize from '../../utils/memoize';\nimport { pixelsToWorld } from '@math.gl/web-mercator';\nconst vs = \"\\nconst int max_lights = 2;\\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\\nuniform vec4 shadow_uProjectCenters[max_lights];\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform int shadow_uLightId;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\\n  if (shadow_uDrawShadowMap) {\\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\\n  }\\n  if (shadow_uUseShadowMap) {\\n    for (int i = 0; i < max_lights; i++) {\\n      if(i < int(shadow_uLightCount)) {\\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\\n      }\\n    }\\n  }\\n  return gl_Position;\\n}\\n\";\nconst fs = \"\\nconst int max_lights = 2;\\nuniform bool shadow_uDrawShadowMap;\\nuniform bool shadow_uUseShadowMap;\\nuniform sampler2D shadow_uShadowMap0;\\nuniform sampler2D shadow_uShadowMap1;\\nuniform vec4 shadow_uColor;\\nuniform float shadow_uLightCount;\\n\\nvarying vec3 shadow_vPosition[max_lights];\\n\\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\\n\\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\\n\\n  float z = dot(rgbaDepth, bitUnpackShift);\\n  return smoothstep(0.001, 0.01, position.z - z);\\n}\\n\\nvec4 shadow_filterShadowColor(vec4 color) {\\n  if (shadow_uDrawShadowMap) {\\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\\n    return rgbaDepth;\\n  }\\n  if (shadow_uUseShadowMap) {\\n    float shadowAlpha = 0.0;\\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\\n    if(shadow_uLightCount > 1.0) {\\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\\n    }\\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\\n\\n    return vec4(\\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\\n      blendedAlpha\\n    );\\n  }\\n  return color;\\n}\\n\";\nconst getMemoizedViewportCenterPosition = memoize(getViewportCenterPosition);\nconst getMemoizedViewProjectionMatrices = memoize(getViewProjectionMatrices);\nconst DEFAULT_SHADOW_COLOR = [0, 0, 0, 1.0];\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\n\nfunction screenToCommonSpace(xyz, pixelUnprojectionMatrix) {\n  const [x, y, z] = xyz;\n  const coord = pixelsToWorld([x, y, z], pixelUnprojectionMatrix);\n\n  if (Number.isFinite(z)) {\n    return coord;\n  }\n\n  return [coord[0], coord[1], 0];\n}\n\nfunction getViewportCenterPosition({\n  viewport,\n  center\n}) {\n  return new Matrix4(viewport.viewProjectionMatrix).invert().transform(center);\n}\n\nfunction getViewProjectionMatrices({\n  viewport,\n  shadowMatrices\n}) {\n  const projectionMatrices = [];\n  const pixelUnprojectionMatrix = viewport.pixelUnprojectionMatrix;\n  const farZ = viewport.isGeospatial ? undefined : 1;\n  const corners = [[0, 0, farZ], [viewport.width, 0, farZ], [0, viewport.height, farZ], [viewport.width, viewport.height, farZ], [0, 0, -1], [viewport.width, 0, -1], [0, viewport.height, -1], [viewport.width, viewport.height, -1]].map(pixel => screenToCommonSpace(pixel, pixelUnprojectionMatrix));\n\n  for (const shadowMatrix of shadowMatrices) {\n    const viewMatrix = shadowMatrix.clone().translate(new Vector3(viewport.center).negate());\n    const positions = corners.map(corner => viewMatrix.transform(corner));\n    const projectionMatrix = new Matrix4().ortho({\n      left: Math.min(...positions.map(position => position[0])),\n      right: Math.max(...positions.map(position => position[0])),\n      bottom: Math.min(...positions.map(position => position[1])),\n      top: Math.max(...positions.map(position => position[1])),\n      near: Math.min(...positions.map(position => -position[2])),\n      far: Math.max(...positions.map(position => -position[2]))\n    });\n    projectionMatrices.push(projectionMatrix.multiplyRight(shadowMatrix));\n  }\n\n  return projectionMatrices;\n}\n\nfunction createShadowUniforms(opts = {}, context = {}) {\n  const uniforms = {\n    shadow_uDrawShadowMap: Boolean(opts.drawToShadowMap),\n    shadow_uUseShadowMap: opts.shadowMaps ? opts.shadowMaps.length > 0 : false,\n    shadow_uColor: opts.shadowColor || DEFAULT_SHADOW_COLOR,\n    shadow_uLightId: opts.shadowLightId || 0,\n    shadow_uLightCount: opts.shadowMatrices.length\n  };\n  const center = getMemoizedViewportCenterPosition({\n    viewport: opts.viewport,\n    center: context.project_uCenter\n  });\n  const projectCenters = [];\n  const viewProjectionMatrices = getMemoizedViewProjectionMatrices({\n    shadowMatrices: opts.shadowMatrices,\n    viewport: opts.viewport\n  }).slice();\n\n  for (let i = 0; i < opts.shadowMatrices.length; i++) {\n    const viewProjectionMatrix = viewProjectionMatrices[i];\n    const viewProjectionMatrixCentered = viewProjectionMatrix.clone().translate(new Vector3(opts.viewport.center).negate());\n\n    if (context.project_uCoordinateSystem === COORDINATE_SYSTEM.LNGLAT && context.project_uProjectionMode === PROJECTION_MODE.WEB_MERCATOR) {\n      viewProjectionMatrices[i] = viewProjectionMatrixCentered;\n      projectCenters[i] = center;\n    } else {\n      viewProjectionMatrices[i] = viewProjectionMatrix.clone().multiplyRight(VECTOR_TO_POINT_MATRIX);\n      projectCenters[i] = viewProjectionMatrixCentered.transform(center);\n    }\n  }\n\n  for (let i = 0; i < viewProjectionMatrices.length; i++) {\n    uniforms[\"shadow_uViewProjectionMatrices[\".concat(i, \"]\")] = viewProjectionMatrices[i];\n    uniforms[\"shadow_uProjectCenters[\".concat(i, \"]\")] = projectCenters[i];\n\n    if (opts.shadowMaps && opts.shadowMaps.length > 0) {\n      uniforms[\"shadow_uShadowMap\".concat(i)] = opts.shadowMaps[i];\n    } else {\n      uniforms[\"shadow_uShadowMap\".concat(i)] = opts.dummyShadowMap;\n    }\n  }\n\n  return uniforms;\n}\n\nexport default {\n  name: 'shadow',\n  dependencies: [project],\n  vs,\n  fs,\n  inject: {\n    'vs:DECKGL_FILTER_GL_POSITION': \"\\n    position = shadow_setVertexPosition(geometry.position);\\n    \",\n    'fs:DECKGL_FILTER_COLOR': \"\\n    color = shadow_filterShadowColor(color);\\n    \"\n  },\n  getUniforms: (opts = {}, context = {}) => {\n    if (opts.drawToShadowMap || opts.shadowMaps && opts.shadowMaps.length > 0) {\n      const {\n        shadowEnabled = true\n      } = opts;\n      return shadowEnabled && opts.shadowMatrices && opts.shadowMatrices.length > 0 ? createShadowUniforms(opts, context) : {\n        shadow_uDrawShadowMap: false,\n        shadow_uUseShadowMap: false\n      };\n    }\n\n    return {};\n  }\n};\n//# sourceMappingURL=shadow.js.map","import { Texture2D, ProgramManager } from '@luma.gl/core';\nimport { AmbientLight } from './ambient-light';\nimport { DirectionalLight } from './directional-light';\nimport Effect from '../../lib/effect';\nimport { Matrix4, Vector3 } from 'math.gl';\nimport ShadowPass from '../../passes/shadow-pass';\nimport { default as shadow } from '../../shaderlib/shadow/shadow';\nconst DEFAULT_AMBIENT_LIGHT_PROPS = {\n  color: [255, 255, 255],\n  intensity: 1.0\n};\nconst DEFAULT_DIRECTIONAL_LIGHT_PROPS = [{\n  color: [255, 255, 255],\n  intensity: 1.0,\n  direction: [-1, 3, -1]\n}, {\n  color: [255, 255, 255],\n  intensity: 0.9,\n  direction: [1, -8, -2.5]\n}];\nconst DEFAULT_SHADOW_COLOR = [0, 0, 0, 200 / 255];\nexport default class LightingEffect extends Effect {\n  constructor(props) {\n    super(props);\n    this.ambientLight = null;\n    this.directionalLights = [];\n    this.pointLights = [];\n    this.shadowColor = DEFAULT_SHADOW_COLOR;\n    this.shadowPasses = [];\n    this.shadowMaps = [];\n    this.dummyShadowMap = null;\n    this.shadow = false;\n    this.programManager = null;\n\n    for (const key in props) {\n      const lightSource = props[key];\n\n      switch (lightSource.type) {\n        case 'ambient':\n          this.ambientLight = lightSource;\n          break;\n\n        case 'directional':\n          this.directionalLights.push(lightSource);\n          break;\n\n        case 'point':\n          this.pointLights.push(lightSource);\n          break;\n\n        default:\n      }\n    }\n\n    this._applyDefaultLights();\n\n    this.shadow = this.directionalLights.some(light => light.shadow);\n  }\n\n  preRender(gl, {\n    layers,\n    layerFilter,\n    viewports,\n    onViewportActive,\n    views\n  }) {\n    if (!this.shadow) return;\n    this.shadowMatrices = this._createLightMatrix();\n\n    if (this.shadowPasses.length === 0) {\n      this._createShadowPasses(gl);\n    }\n\n    if (!this.programManager) {\n      this.programManager = ProgramManager.getDefaultProgramManager(gl);\n\n      if (shadow) {\n        this.programManager.addDefaultModule(shadow);\n      }\n    }\n\n    if (!this.dummyShadowMap) {\n      this.dummyShadowMap = new Texture2D(gl, {\n        width: 1,\n        height: 1\n      });\n    }\n\n    for (let i = 0; i < this.shadowPasses.length; i++) {\n      const shadowPass = this.shadowPasses[i];\n      shadowPass.render({\n        layers,\n        layerFilter,\n        viewports,\n        onViewportActive,\n        views,\n        moduleParameters: {\n          shadowLightId: i,\n          dummyShadowMap: this.dummyShadowMap,\n          shadowMatrices: this.shadowMatrices\n        }\n      });\n    }\n  }\n\n  getModuleParameters(layer) {\n    const parameters = this.shadow ? {\n      shadowMaps: this.shadowMaps,\n      dummyShadowMap: this.dummyShadowMap,\n      shadowColor: this.shadowColor,\n      shadowMatrices: this.shadowMatrices\n    } : {};\n    parameters.lightSources = {\n      ambientLight: this.ambientLight,\n      directionalLights: this.directionalLights.map(directionalLight => directionalLight.getProjectedLight({\n        layer\n      })),\n      pointLights: this.pointLights.map(pointLight => pointLight.getProjectedLight({\n        layer\n      }))\n    };\n    return parameters;\n  }\n\n  cleanup() {\n    for (const shadowPass of this.shadowPasses) {\n      shadowPass.delete();\n    }\n\n    this.shadowPasses.length = 0;\n    this.shadowMaps.length = 0;\n\n    if (this.dummyShadowMap) {\n      this.dummyShadowMap.delete();\n      this.dummyShadowMap = null;\n    }\n\n    if (this.shadow && this.programManager) {\n      this.programManager.removeDefaultModule(shadow);\n      this.programManager = null;\n    }\n  }\n\n  _createLightMatrix() {\n    const lightMatrices = [];\n\n    for (const light of this.directionalLights) {\n      const viewMatrix = new Matrix4().lookAt({\n        eye: new Vector3(light.direction).negate()\n      });\n      lightMatrices.push(viewMatrix);\n    }\n\n    return lightMatrices;\n  }\n\n  _createShadowPasses(gl) {\n    for (let i = 0; i < this.directionalLights.length; i++) {\n      const shadowPass = new ShadowPass(gl);\n      this.shadowPasses[i] = shadowPass;\n      this.shadowMaps[i] = shadowPass.shadowMap;\n    }\n  }\n\n  _applyDefaultLights() {\n    const {\n      ambientLight,\n      pointLights,\n      directionalLights\n    } = this;\n\n    if (!ambientLight && pointLights.length === 0 && directionalLights.length === 0) {\n      this.ambientLight = new AmbientLight(DEFAULT_AMBIENT_LIGHT_PROPS);\n      this.directionalLights.push(new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[0]), new DirectionalLight(DEFAULT_DIRECTIONAL_LIGHT_PROPS[1]));\n    }\n  }\n\n}\n//# sourceMappingURL=lighting-effect.js.map","import { deepEqual } from '../utils/deep-equal';\nimport { default as LightingEffect } from '../effects/lighting/lighting-effect';\nconst DEFAULT_LIGHTING_EFFECT = new LightingEffect();\nexport default class EffectManager {\n  constructor() {\n    this.effects = [];\n    this._internalEffects = [];\n    this._needsRedraw = 'Initial render';\n    this.setEffects();\n  }\n\n  setProps(props) {\n    if ('effects' in props) {\n      if (props.effects.length !== this.effects.length || !deepEqual(props.effects, this.effects)) {\n        this.setEffects(props.effects);\n        this._needsRedraw = 'effects changed';\n      }\n    }\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  getEffects() {\n    return this._internalEffects;\n  }\n\n  finalize() {\n    this.cleanup();\n  }\n\n  setEffects(effects = []) {\n    this.cleanup();\n    this.effects = effects;\n\n    this._createInternalEffects();\n  }\n\n  cleanup() {\n    for (const effect of this.effects) {\n      effect.cleanup();\n    }\n\n    for (const effect of this._internalEffects) {\n      effect.cleanup();\n    }\n\n    this.effects.length = 0;\n    this._internalEffects.length = 0;\n  }\n\n  _createInternalEffects() {\n    this._internalEffects = this.effects.slice();\n\n    if (!this.effects.some(effect => effect instanceof LightingEffect)) {\n      this._internalEffects.push(DEFAULT_LIGHTING_EFFECT);\n    }\n  }\n\n}\n//# sourceMappingURL=effect-manager.js.map","import LayersPass from './layers-pass';\nexport default class DrawLayersPass extends LayersPass {}\n//# sourceMappingURL=draw-layers-pass.js.map","import LayersPass from './layers-pass';\nimport { withParameters } from '@luma.gl/core';\nimport log from '../utils/log';\nconst PICKING_PARAMETERS = {\n  blendFunc: [1, 0, 32771, 0],\n  blendEquation: 32774\n};\nexport default class PickLayersPass extends LayersPass {\n  render(props) {\n    if (props.pickingFBO) {\n      return this._drawPickingBuffer(props);\n    }\n\n    return super.render(props);\n  }\n\n  _drawPickingBuffer({\n    layers,\n    layerFilter,\n    views,\n    viewports,\n    onViewportActive,\n    pickingFBO,\n    deviceRect: {\n      x,\n      y,\n      width,\n      height\n    },\n    pass = 'picking',\n    redrawReason,\n    pickZ\n  }) {\n    const gl = this.gl;\n    this.pickZ = pickZ;\n    const encodedColors = !pickZ && {\n      byLayer: new Map(),\n      byAlpha: []\n    };\n    this._colors = encodedColors;\n    const renderStatus = withParameters(gl, {\n      scissorTest: true,\n      scissor: [x, y, width, height],\n      clearColor: [0, 0, 0, 0],\n      depthMask: true,\n      depthTest: true,\n      depthRange: [0, 1],\n      colorMask: [true, true, true, true],\n      ...PICKING_PARAMETERS,\n      blend: !pickZ\n    }, () => super.render({\n      target: pickingFBO,\n      layers,\n      layerFilter,\n      views,\n      viewports,\n      onViewportActive,\n      pass,\n      redrawReason\n    }));\n    this._colors = null;\n    const decodePickingColor = encodedColors && decodeColor.bind(null, encodedColors);\n    return {\n      decodePickingColor,\n      stats: renderStatus\n    };\n  }\n\n  shouldDrawLayer(layer) {\n    return layer.props.pickable;\n  }\n\n  getModuleParameters() {\n    return {\n      pickingActive: 1,\n      pickingAttribute: this.pickZ,\n      lightSources: {}\n    };\n  }\n\n  getLayerParameters(layer, layerIndex, viewport) {\n    const pickParameters = { ...layer.props.parameters\n    };\n\n    if (this.pickZ) {\n      pickParameters.blend = false;\n    } else {\n      Object.assign(pickParameters, PICKING_PARAMETERS);\n      pickParameters.blend = true;\n      pickParameters.blendColor = encodeColor(this._colors, layer, viewport);\n    }\n\n    return pickParameters;\n  }\n\n}\n\nfunction encodeColor(encoded, layer, viewport) {\n  const {\n    byLayer,\n    byAlpha\n  } = encoded;\n  let a;\n\n  if (byLayer.has(layer)) {\n    const entry = byLayer.get(layer);\n    entry.viewports.push(viewport);\n    a = entry.a;\n  } else {\n    a = byLayer.size + 1;\n\n    if (a <= 255) {\n      const entry = {\n        a,\n        layer,\n        viewports: [viewport]\n      };\n      byLayer.set(layer, entry);\n      byAlpha[a] = entry;\n    } else {\n      log.warn('Too many pickable layers, only picking the first 255')();\n      a = 0;\n    }\n  }\n\n  return [0, 0, 0, a / 255];\n}\n\nfunction decodeColor(encoded, pickedColor) {\n  const entry = encoded.byAlpha[pickedColor[3]];\n  return entry && {\n    pickedLayer: entry.layer,\n    pickedViewports: entry.viewports,\n    pickedObjectIndex: entry.layer.decodePickingColor(pickedColor)\n  };\n}\n//# sourceMappingURL=pick-layers-pass.js.map","import debug from '../debug';\nimport DrawLayersPass from '../passes/draw-layers-pass';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { Framebuffer } from '@luma.gl/core';\nconst TRACE_RENDER_LAYERS = 'deckRenderer.renderLayers';\nexport default class DeckRenderer {\n  constructor(gl) {\n    this.gl = gl;\n    this.layerFilter = null;\n    this.drawPickingColors = false;\n    this.drawLayersPass = new DrawLayersPass(gl);\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.renderCount = 0;\n    this._needsRedraw = 'Initial render';\n    this.renderBuffers = [];\n    this.lastPostProcessEffect = null;\n  }\n\n  setProps(props) {\n    if ('layerFilter' in props && this.layerFilter !== props.layerFilter) {\n      this.layerFilter = props.layerFilter;\n      this._needsRedraw = 'layerFilter changed';\n    }\n\n    if ('drawPickingColors' in props && this.drawPickingColors !== props.drawPickingColors) {\n      this.drawPickingColors = props.drawPickingColors;\n      this._needsRedraw = 'drawPickingColors changed';\n    }\n  }\n\n  renderLayers(opts) {\n    const layerPass = this.drawPickingColors ? this.pickLayersPass : this.drawLayersPass;\n    opts.layerFilter = opts.layerFilter || this.layerFilter;\n    opts.effects = opts.effects || [];\n    opts.target = opts.target || Framebuffer.getDefaultFramebuffer(this.gl);\n\n    this._preRender(opts.effects, opts);\n\n    const outputBuffer = this.lastPostProcessEffect ? this.renderBuffers[0] : opts.target;\n    const renderStats = layerPass.render({ ...opts,\n      target: outputBuffer\n    });\n\n    this._postRender(opts.effects, opts);\n\n    this.renderCount++;\n    debug(TRACE_RENDER_LAYERS, this, renderStats, opts);\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    return redraw;\n  }\n\n  finalize() {\n    const {\n      renderBuffers\n    } = this;\n\n    for (const buffer of renderBuffers) {\n      buffer.delete();\n    }\n\n    renderBuffers.length = 0;\n  }\n\n  _preRender(effects, opts) {\n    let lastPostProcessEffect = null;\n\n    for (const effect of effects) {\n      effect.preRender(this.gl, opts);\n\n      if (effect.postRender) {\n        lastPostProcessEffect = effect;\n      }\n    }\n\n    if (lastPostProcessEffect) {\n      this._resizeRenderBuffers();\n    }\n\n    this.lastPostProcessEffect = lastPostProcessEffect;\n  }\n\n  _resizeRenderBuffers() {\n    const {\n      renderBuffers\n    } = this;\n\n    if (renderBuffers.length === 0) {\n      renderBuffers.push(new Framebuffer(this.gl), new Framebuffer(this.gl));\n    }\n\n    for (const buffer of renderBuffers) {\n      buffer.resize();\n    }\n  }\n\n  _postRender(effects, opts) {\n    const {\n      renderBuffers\n    } = this;\n    const params = {\n      inputBuffer: renderBuffers[0],\n      swapBuffer: renderBuffers[1],\n      target: null\n    };\n\n    for (const effect of effects) {\n      if (effect.postRender) {\n        if (effect === this.lastPostProcessEffect) {\n          params.target = opts.target;\n          effect.postRender(this.gl, params);\n          break;\n        }\n\n        const buffer = effect.postRender(this.gl, params);\n        params.inputBuffer = buffer;\n        params.swapBuffer = buffer === renderBuffers[0] ? renderBuffers[1] : renderBuffers[0];\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=deck-renderer.js.map","import log from '../../utils/log';\nconst NO_PICKED_OBJECT = {\n  pickedColor: null,\n  pickedLayer: null,\n  pickedObjectIndex: -1\n};\nexport function getClosestObject({\n  pickedColors,\n  decodePickingColor,\n  deviceX,\n  deviceY,\n  deviceRadius,\n  deviceRect\n}) {\n  if (pickedColors) {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = deviceRect;\n    let minSquareDistanceToCenter = deviceRadius * deviceRadius;\n    let closestPixelIndex = -1;\n    let i = 0;\n\n    for (let row = 0; row < height; row++) {\n      const dy = row + y - deviceY;\n      const dy2 = dy * dy;\n\n      if (dy2 > minSquareDistanceToCenter) {\n        i += 4 * width;\n      } else {\n        for (let col = 0; col < width; col++) {\n          const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n          if (pickedLayerIndex >= 0) {\n            const dx = col + x - deviceX;\n            const d2 = dx * dx + dy2;\n\n            if (d2 <= minSquareDistanceToCenter) {\n              minSquareDistanceToCenter = d2;\n              closestPixelIndex = i;\n            }\n          }\n\n          i += 4;\n        }\n      }\n    }\n\n    if (closestPixelIndex >= 0) {\n      const pickedColor = pickedColors.slice(closestPixelIndex, closestPixelIndex + 4);\n      const pickedObject = decodePickingColor(pickedColor);\n\n      if (pickedObject) {\n        const dy = Math.floor(closestPixelIndex / 4 / width);\n        const dx = closestPixelIndex / 4 - dy * width;\n        return { ...pickedObject,\n          pickedColor,\n          pickedX: x + dx,\n          pickedY: y + dy\n        };\n      }\n\n      log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n    }\n  }\n\n  return NO_PICKED_OBJECT;\n}\nexport function getUniqueObjects({\n  pickedColors,\n  decodePickingColor\n}) {\n  const uniqueColors = new Map();\n\n  if (pickedColors) {\n    for (let i = 0; i < pickedColors.length; i += 4) {\n      const pickedLayerIndex = pickedColors[i + 3] - 1;\n\n      if (pickedLayerIndex >= 0) {\n        const pickedColor = pickedColors.slice(i, i + 4);\n        const colorKey = pickedColor.join(',');\n\n        if (!uniqueColors.has(colorKey)) {\n          const pickedObject = decodePickingColor(pickedColor);\n\n          if (pickedObject) {\n            uniqueColors.set(colorKey, { ...pickedObject,\n              pickedColor\n            });\n          } else {\n            log.error('Picked non-existent layer. Is picking buffer corrupt?')();\n          }\n        }\n      }\n    }\n  }\n\n  return Array.from(uniqueColors.values());\n}\n//# sourceMappingURL=query-object.js.map","export function getEmptyPickingInfo({\n  pickInfo,\n  viewports,\n  pixelRatio,\n  x,\n  y,\n  z\n}) {\n  let pickedViewport = viewports[0];\n\n  if (viewports.length > 1) {\n    pickedViewport = getViewportFromCoordinates((pickInfo === null || pickInfo === void 0 ? void 0 : pickInfo.pickedViewports) || viewports, {\n      x,\n      y\n    });\n  }\n\n  const coordinate = pickedViewport && pickedViewport.unproject([x - pickedViewport.x, y - pickedViewport.y], {\n    targetZ: z\n  });\n  return {\n    color: null,\n    layer: null,\n    viewport: pickedViewport,\n    index: -1,\n    picked: false,\n    x,\n    y,\n    pixel: [x, y],\n    coordinate,\n    devicePixel: pickInfo && [pickInfo.pickedX, pickInfo.pickedY],\n    pixelRatio\n  };\n}\nexport function processPickInfo(opts) {\n  const {\n    pickInfo,\n    lastPickedInfo,\n    mode,\n    layers\n  } = opts;\n  const {\n    pickedColor,\n    pickedLayer,\n    pickedObjectIndex\n  } = pickInfo;\n  const affectedLayers = pickedLayer ? [pickedLayer] : [];\n\n  if (mode === 'hover') {\n    const lastPickedObjectIndex = lastPickedInfo.index;\n    const lastPickedLayerId = lastPickedInfo.layerId;\n    const pickedLayerId = pickedLayer && pickedLayer.props.id;\n\n    if (pickedLayerId !== lastPickedLayerId || pickedObjectIndex !== lastPickedObjectIndex) {\n      if (pickedLayerId !== lastPickedLayerId) {\n        const lastPickedLayer = layers.find(layer => layer.props.id === lastPickedLayerId);\n\n        if (lastPickedLayer) {\n          affectedLayers.unshift(lastPickedLayer);\n        }\n      }\n\n      lastPickedInfo.layerId = pickedLayerId;\n      lastPickedInfo.index = pickedObjectIndex;\n      lastPickedInfo.info = null;\n    }\n  }\n\n  const baseInfo = getEmptyPickingInfo(opts);\n  const infos = new Map();\n  infos.set(null, baseInfo);\n  affectedLayers.forEach(layer => {\n    let info = { ...baseInfo\n    };\n\n    if (layer === pickedLayer) {\n      info.color = pickedColor;\n      info.index = pickedObjectIndex;\n      info.picked = true;\n    }\n\n    info = getLayerPickingInfo({\n      layer,\n      info,\n      mode\n    });\n\n    if (layer === pickedLayer && mode === 'hover') {\n      lastPickedInfo.info = info;\n    }\n\n    infos.set(info.layer.id, info);\n\n    if (mode === 'hover') {\n      info.layer.updateAutoHighlight(info);\n    }\n  });\n  return infos;\n}\nexport function getLayerPickingInfo({\n  layer,\n  info,\n  mode\n}) {\n  while (layer && info) {\n    const sourceLayer = info.layer || null;\n    info.sourceLayer = sourceLayer;\n    info.layer = layer;\n    info = layer.getPickingInfo({\n      info,\n      mode,\n      sourceLayer\n    });\n    layer = layer.parent;\n  }\n\n  return info;\n}\n\nfunction getViewportFromCoordinates(viewports, pixel) {\n  for (let i = viewports.length - 1; i >= 0; i--) {\n    const viewport = viewports[i];\n\n    if (viewport.containsPixel(pixel)) {\n      return viewport;\n    }\n  }\n\n  return viewports[0];\n}\n//# sourceMappingURL=pick-info.js.map","import { Framebuffer, Texture2D, isWebGL2, readPixelsToArray, cssToDeviceRatio, cssToDevicePixels } from '@luma.gl/core';\nimport PickLayersPass from '../passes/pick-layers-pass';\nimport { getClosestObject, getUniqueObjects } from './picking/query-object';\nimport { processPickInfo, getLayerPickingInfo, getEmptyPickingInfo } from './picking/pick-info';\nexport default class DeckPicker {\n  constructor(gl) {\n    this.gl = gl;\n    this.pickingFBO = null;\n    this.pickLayersPass = new PickLayersPass(gl);\n    this.layerFilter = null;\n    this.lastPickedInfo = {\n      index: -1,\n      layerId: null,\n      info: null\n    };\n  }\n\n  setProps(props) {\n    if ('layerFilter' in props) {\n      this.layerFilter = props.layerFilter;\n    }\n\n    if ('_pickable' in props) {\n      this._pickable = props._pickable;\n    }\n  }\n\n  finalize() {\n    if (this.pickingFBO) {\n      this.pickingFBO.delete();\n    }\n\n    if (this.depthFBO) {\n      this.depthFBO.color.delete();\n      this.depthFBO.delete();\n    }\n  }\n\n  pickObject(opts) {\n    return this._pickClosestObject(opts);\n  }\n\n  pickObjects(opts) {\n    return this._pickVisibleObjects(opts);\n  }\n\n  getLastPickedObject({\n    x,\n    y,\n    layers,\n    viewports\n  }, lastPickedInfo = this.lastPickedInfo.info) {\n    const lastPickedLayerId = lastPickedInfo && lastPickedInfo.layer && lastPickedInfo.layer.id;\n    const lastPickedViewportId = lastPickedInfo && lastPickedInfo.viewport && lastPickedInfo.viewport.id;\n    const layer = lastPickedLayerId ? layers.find(l => l.id === lastPickedLayerId) : null;\n    const viewport = lastPickedViewportId && viewports.find(v => v.id === lastPickedViewportId) || viewports[0];\n    const coordinate = viewport && viewport.unproject([x - viewport.x, y - viewport.y]);\n    const info = {\n      x,\n      y,\n      viewport,\n      coordinate,\n      layer\n    };\n\n    if (layer) {\n      return { ...lastPickedInfo,\n        ...info\n      };\n    }\n\n    return Object.assign(info, {\n      color: null,\n      object: null,\n      index: -1\n    });\n  }\n\n  _resizeBuffer() {\n    const {\n      gl\n    } = this;\n\n    if (!this.pickingFBO) {\n      this.pickingFBO = new Framebuffer(gl);\n\n      if (Framebuffer.isSupported(gl, {\n        colorBufferFloat: true\n      })) {\n        this.depthFBO = new Framebuffer(gl);\n        this.depthFBO.attach({\n          [36064]: new Texture2D(gl, {\n            format: isWebGL2(gl) ? 34836 : 6408,\n            type: 5126\n          })\n        });\n      }\n    }\n\n    this.pickingFBO.resize({\n      width: gl.canvas.width,\n      height: gl.canvas.height\n    });\n\n    if (this.depthFBO) {\n      this.depthFBO.resize({\n        width: gl.canvas.width,\n        height: gl.canvas.height\n      });\n    }\n\n    return this.pickingFBO;\n  }\n\n  _getPickable(layers) {\n    if (this._pickable === false) {\n      return null;\n    }\n\n    const pickableLayers = layers.filter(layer => layer.isPickable() && !layer.isComposite);\n    return pickableLayers.length ? pickableLayers : null;\n  }\n\n  _pickClosestObject({\n    layers,\n    views,\n    viewports,\n    x,\n    y,\n    radius = 0,\n    depth = 1,\n    mode = 'query',\n    unproject3D,\n    onViewportActive\n  }) {\n    layers = this._getPickable(layers);\n\n    if (!layers) {\n      return {\n        result: [],\n        emptyInfo: getEmptyPickingInfo({\n          viewports,\n          x,\n          y\n        })\n      };\n    }\n\n    this._resizeBuffer();\n\n    const pixelRatio = cssToDeviceRatio(this.gl);\n    const devicePixelRange = cssToDevicePixels(this.gl, [x, y], true);\n    const devicePixel = [devicePixelRange.x + Math.floor(devicePixelRange.width / 2), devicePixelRange.y + Math.floor(devicePixelRange.height / 2)];\n    const deviceRadius = Math.round(radius * pixelRatio);\n    const {\n      width,\n      height\n    } = this.pickingFBO;\n\n    const deviceRect = this._getPickingRect({\n      deviceX: devicePixel[0],\n      deviceY: devicePixel[1],\n      deviceRadius,\n      deviceWidth: width,\n      deviceHeight: height\n    });\n\n    let infos;\n    const result = [];\n    const affectedLayers = {};\n\n    for (let i = 0; i < depth; i++) {\n      const pickedResult = deviceRect && this._drawAndSample({\n        layers,\n        views,\n        viewports,\n        onViewportActive,\n        deviceRect,\n        pass: \"picking:\".concat(mode),\n        redrawReason: mode\n      });\n\n      const pickInfo = getClosestObject({ ...pickedResult,\n        deviceX: devicePixel[0],\n        deviceY: devicePixel[1],\n        deviceRadius,\n        deviceRect\n      });\n      let z;\n\n      if (pickInfo.pickedLayer && unproject3D && this.depthFBO) {\n        const pickedResultPass2 = this._drawAndSample({\n          layers: [pickInfo.pickedLayer],\n          views,\n          viewports,\n          onViewportActive,\n          deviceRect: {\n            x: pickInfo.pickedX,\n            y: pickInfo.pickedY,\n            width: 1,\n            height: 1\n          },\n          pass: \"picking:\".concat(mode),\n          redrawReason: 'pick-z',\n          pickZ: true\n        });\n\n        z = pickedResultPass2.pickedColors[0] * viewports[0].distanceScales.metersPerUnit[2] + viewports[0].position[2];\n      }\n\n      if (pickInfo.pickedColor && i + 1 < depth) {\n        const layerId = pickInfo.pickedColor[3] - 1;\n        affectedLayers[layerId] = true;\n        layers[layerId].disablePickingIndex(pickInfo.pickedObjectIndex);\n      }\n\n      infos = processPickInfo({\n        pickInfo,\n        lastPickedInfo: this.lastPickedInfo,\n        mode,\n        layers,\n        viewports,\n        x,\n        y,\n        z,\n        pixelRatio\n      });\n\n      for (const info of infos.values()) {\n        if (info.layer) {\n          result.push(info);\n        }\n      }\n\n      if (!pickInfo.pickedColor) {\n        break;\n      }\n    }\n\n    for (const layerId in affectedLayers) {\n      layers[layerId].restorePickingColors();\n    }\n\n    return {\n      result,\n      emptyInfo: infos && infos.get(null)\n    };\n  }\n\n  _pickVisibleObjects({\n    layers,\n    views,\n    viewports,\n    x,\n    y,\n    width = 1,\n    height = 1,\n    mode = 'query',\n    maxObjects = null,\n    onViewportActive\n  }) {\n    layers = this._getPickable(layers);\n\n    if (!layers) {\n      return [];\n    }\n\n    this._resizeBuffer();\n\n    const pixelRatio = cssToDeviceRatio(this.gl);\n    const leftTop = cssToDevicePixels(this.gl, [x, y], true);\n    const deviceLeft = leftTop.x;\n    const deviceTop = leftTop.y + leftTop.height;\n    const rightBottom = cssToDevicePixels(this.gl, [x + width, y + height], true);\n    const deviceRight = rightBottom.x + rightBottom.width;\n    const deviceBottom = rightBottom.y;\n    const deviceRect = {\n      x: deviceLeft,\n      y: deviceBottom,\n      width: deviceRight - deviceLeft,\n      height: deviceTop - deviceBottom\n    };\n\n    const pickedResult = this._drawAndSample({\n      layers,\n      views,\n      viewports,\n      onViewportActive,\n      deviceRect,\n      pass: \"picking:\".concat(mode),\n      redrawReason: mode\n    });\n\n    const pickInfos = getUniqueObjects(pickedResult);\n    const uniqueInfos = new Map();\n    const isMaxObjects = Number.isFinite(maxObjects);\n\n    for (let i = 0; i < pickInfos.length; i++) {\n      if (isMaxObjects && uniqueInfos.size >= maxObjects) {\n        break;\n      }\n\n      const pickInfo = pickInfos[i];\n      let info = {\n        color: pickInfo.pickedColor,\n        layer: null,\n        index: pickInfo.pickedObjectIndex,\n        picked: true,\n        x,\n        y,\n        width,\n        height,\n        pixelRatio\n      };\n      info = getLayerPickingInfo({\n        layer: pickInfo.pickedLayer,\n        info,\n        mode\n      });\n\n      if (!uniqueInfos.has(info.object)) {\n        uniqueInfos.set(info.object, info);\n      }\n    }\n\n    return Array.from(uniqueInfos.values());\n  }\n\n  _drawAndSample({\n    layers,\n    views,\n    viewports,\n    onViewportActive,\n    deviceRect,\n    pass,\n    redrawReason,\n    pickZ\n  }) {\n    const pickingFBO = pickZ ? this.depthFBO : this.pickingFBO;\n    const {\n      decodePickingColor\n    } = this.pickLayersPass.render({\n      layers,\n      layerFilter: this.layerFilter,\n      views,\n      viewports,\n      onViewportActive,\n      pickingFBO,\n      deviceRect,\n      pass,\n      redrawReason,\n      pickZ\n    });\n    const {\n      x,\n      y,\n      width,\n      height\n    } = deviceRect;\n    const pickedColors = new (pickZ ? Float32Array : Uint8Array)(width * height * 4);\n    readPixelsToArray(pickingFBO, {\n      sourceX: x,\n      sourceY: y,\n      sourceWidth: width,\n      sourceHeight: height,\n      target: pickedColors\n    });\n    return {\n      pickedColors,\n      decodePickingColor\n    };\n  }\n\n  _getPickingRect({\n    deviceX,\n    deviceY,\n    deviceRadius,\n    deviceWidth,\n    deviceHeight\n  }) {\n    const x = Math.max(0, deviceX - deviceRadius);\n    const y = Math.max(0, deviceY - deviceRadius);\n    const width = Math.min(deviceWidth, deviceX + deviceRadius + 1) - x;\n    const height = Math.min(deviceHeight, deviceY + deviceRadius + 1) - y;\n\n    if (width <= 0 || height <= 0) {\n      return null;\n    }\n\n    return {\n      x,\n      y,\n      width,\n      height\n    };\n  }\n\n}\n//# sourceMappingURL=deck-picker.js.map","const defaultStyle = {\n  zIndex: 1,\n  position: 'absolute',\n  pointerEvents: 'none',\n  color: '#a0a7b4',\n  backgroundColor: '#29323c',\n  padding: '10px',\n  top: 0,\n  left: 0,\n  display: 'none'\n};\nexport default class Tooltip {\n  constructor(canvas) {\n    const canvasParent = canvas.parentElement;\n\n    if (canvasParent) {\n      this.el = document.createElement('div');\n      this.el.className = 'deck-tooltip';\n      Object.assign(this.el.style, defaultStyle);\n      canvasParent.appendChild(this.el);\n    }\n\n    this.isVisible = false;\n  }\n\n  setTooltip(displayInfo, x, y) {\n    const el = this.el;\n\n    if (typeof displayInfo === 'string') {\n      el.innerText = displayInfo;\n    } else if (!displayInfo) {\n      this.isVisible = false;\n      el.style.display = 'none';\n      return;\n    } else {\n      if ('text' in displayInfo) {\n        el.innerText = displayInfo.text;\n      }\n\n      if ('html' in displayInfo) {\n        el.innerHTML = displayInfo.html;\n      }\n\n      if ('className' in displayInfo) {\n        el.className = displayInfo.className;\n      }\n\n      Object.assign(el.style, displayInfo.style);\n    }\n\n    this.isVisible = true;\n    el.style.display = 'block';\n    el.style.transform = \"translate(\".concat(x, \"px, \").concat(y, \"px)\");\n  }\n\n  remove() {\n    if (this.el) {\n      this.el.remove();\n    }\n  }\n\n}\n//# sourceMappingURL=tooltip.js.map","export const VERSION = typeof \"3.0.12\" !== 'undefined' ? \"3.0.12\" : 'latest';\n//# sourceMappingURL=version.js.map","export function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n//# sourceMappingURL=assert.js.map","import { global, isBrowser } from '../utils/globals';\nconst {\n  _parseImageNode\n} = global;\nconst IMAGE_SUPPORTED = typeof Image !== 'undefined';\nconst IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nconst NODE_IMAGE_SUPPORTED = Boolean(_parseImageNode);\nconst DATA_SUPPORTED = isBrowser ? true : NODE_IMAGE_SUPPORTED;\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'auto':\n      return IMAGE_BITMAP_SUPPORTED || IMAGE_SUPPORTED || DATA_SUPPORTED;\n\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'image':\n      return IMAGE_SUPPORTED;\n\n    case 'data':\n      return DATA_SUPPORTED;\n\n    default:\n      throw new Error(`@loaders.gl/images: image ${type} not supported in this environment`);\n  }\n}\nexport function getDefaultImageType() {\n  if (IMAGE_BITMAP_SUPPORTED) {\n    return 'imagebitmap';\n  }\n\n  if (IMAGE_SUPPORTED) {\n    return 'image';\n  }\n\n  if (DATA_SUPPORTED) {\n    return 'data';\n  }\n\n  throw new Error('Install \\'@loaders.gl/polyfills\\' to parse images under Node.js');\n}\n//# sourceMappingURL=image-type.js.map","export function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  const format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageSize(image) {\n  return getImageData(image);\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'data':\n      return image;\n\n    case 'image':\n    case 'imagebitmap':\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n\n      if (!context) {\n        throw new Error('getImageData');\n      }\n\n      canvas.width = image.width;\n      canvas.height = image.height;\n      context.drawImage(image, 0, 0);\n      return context.getImageData(0, 0, image.width, image.height);\n\n    default:\n      throw new Error('getImageData');\n  }\n}\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'image';\n  }\n\n  if (image && typeof image === 'object' && image.data && image.width && image.height) {\n    return 'data';\n  }\n\n  return null;\n}\n//# sourceMappingURL=parsed-image-api.js.map","const SVG_DATA_URL_PATTERN = /^data:image\\/svg\\+xml/;\nconst SVG_URL_PATTERN = /\\.svg((\\?|#).*)?$/;\nexport function isSVG(url) {\n  return url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url));\n}\nexport function getBlobOrSVGDataUrl(arrayBuffer, url) {\n  if (isSVG(url)) {\n    const textDecoder = new TextDecoder();\n    let xmlText = textDecoder.decode(arrayBuffer);\n\n    try {\n      if (typeof unescape === 'function' && typeof encodeURIComponent === 'function') {\n        xmlText = unescape(encodeURIComponent(xmlText));\n      }\n    } catch (error) {\n      throw new Error(error.message);\n    }\n\n    const src = `data:image/svg+xml;base64,${btoa(xmlText)}`;\n    return src;\n  }\n\n  return getBlob(arrayBuffer, url);\n}\nexport function getBlob(arrayBuffer, url) {\n  if (isSVG(url)) {\n    throw new Error('SVG cannot be parsed directly to imagebitmap');\n  }\n\n  return new Blob([new Uint8Array(arrayBuffer)]);\n}\n//# sourceMappingURL=svg-utils.js.map","import { getBlobOrSVGDataUrl } from './svg-utils';\nexport default async function parseToImage(arrayBuffer, options, url) {\n  const blobOrDataUrl = getBlobOrSVGDataUrl(arrayBuffer, url);\n  const URL = self.URL || self.webkitURL;\n  const objectUrl = typeof blobOrDataUrl !== 'string' && URL.createObjectURL(blobOrDataUrl);\n\n  try {\n    return await loadToImage(objectUrl || blobOrDataUrl, options);\n  } finally {\n    if (objectUrl) {\n      URL.revokeObjectURL(objectUrl);\n    }\n  }\n}\nexport async function loadToImage(url, options) {\n  const image = new Image();\n  image.src = url;\n\n  if (options.image && options.image.decode && image.decode) {\n    await image.decode();\n    return image;\n  }\n\n  return await new Promise((resolve, reject) => {\n    try {\n      image.onload = () => resolve(image);\n\n      image.onerror = err => reject(new Error(`Could not load image ${url}: ${err}`));\n    } catch (error) {\n      reject(error);\n    }\n  });\n}\n//# sourceMappingURL=parse-to-image.js.map","import { isSVG, getBlob } from './svg-utils';\nimport parseToImage from './parse-to-image';\nconst EMPTY_OBJECT = {};\nlet imagebitmapOptionsSupported = true;\nexport default async function parseToImageBitmap(arrayBuffer, options, url) {\n  let blob;\n\n  if (isSVG(url)) {\n    const image = await parseToImage(arrayBuffer, options, url);\n    blob = image;\n  } else {\n    blob = getBlob(arrayBuffer, url);\n  }\n\n  const imagebitmapOptions = options && options.imagebitmap;\n  return await safeCreateImageBitmap(blob, imagebitmapOptions);\n}\n\nasync function safeCreateImageBitmap(blob, imagebitmapOptions = null) {\n  if (isEmptyObject(imagebitmapOptions) || !imagebitmapOptionsSupported) {\n    imagebitmapOptions = null;\n  }\n\n  if (imagebitmapOptions) {\n    try {\n      return await createImageBitmap(blob, imagebitmapOptions);\n    } catch (error) {\n      console.warn(error);\n      imagebitmapOptionsSupported = false;\n    }\n  }\n\n  return await createImageBitmap(blob);\n}\n\nfunction isEmptyObject(object) {\n  for (const key in object || EMPTY_OBJECT) {\n    return false;\n  }\n\n  return true;\n}\n//# sourceMappingURL=parse-to-image-bitmap.js.map","const BIG_ENDIAN = false;\nconst LITTLE_ENDIAN = true;\nexport function getBinaryImageMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  return getPngMetadata(dataView) || getJpegMetadata(dataView) || getGifMetadata(dataView) || getBmpMetadata(dataView);\n}\n\nfunction getPngMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isPng = dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n\n  if (!isPng) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/png',\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nfunction getGifMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isGif = dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n\n  if (!isGif) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/gif',\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function getBmpMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isBmp = dataView.byteLength >= 14 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d && dataView.getUint32(2, LITTLE_ENDIAN) === dataView.byteLength;\n\n  if (!isBmp) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/bmp',\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nfunction getJpegMetadata(binaryData) {\n  const dataView = toDataView(binaryData);\n  const isJpeg = dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2) === 0xff;\n\n  if (!isJpeg) {\n    return null;\n  }\n\n  const {\n    tableMarkers,\n    sofMarkers\n  } = getJpegMarkers();\n  let i = 2;\n\n  while (i + 9 < dataView.byteLength) {\n    const marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        mimeType: 'image/jpeg',\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  const tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (let i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  const sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers,\n    sofMarkers\n  };\n}\n\nfunction toDataView(data) {\n  if (data instanceof DataView) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return new DataView(data);\n  }\n\n  throw new Error('toDataView');\n}\n//# sourceMappingURL=binary-image-api.js.map","import { global } from '../utils/globals';\nimport { assert } from '../utils/assert';\nimport { getBinaryImageMetadata } from '../category-api/binary-image-api';\nexport default function parseToNodeImage(arrayBuffer, options) {\n  const {\n    mimeType\n  } = getBinaryImageMetadata(arrayBuffer) || {};\n  const {\n    _parseImageNode\n  } = global;\n  assert(_parseImageNode);\n  return _parseImageNode(arrayBuffer, mimeType, options);\n}\n//# sourceMappingURL=parse-to-node-image.js.map","import { assert } from '../utils/assert';\nimport { isImageTypeSupported, getDefaultImageType } from '../category-api/image-type';\nimport { getImageData } from '../category-api/parsed-image-api';\nimport parseToImage from './parse-to-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseToNodeImage from './parse-to-node-image';\nexport default async function parseImage(arrayBuffer, options, context) {\n  options = options || {};\n  const imageOptions = options.image || {};\n  const imageType = imageOptions.type || 'auto';\n  const {\n    url\n  } = context || {};\n  const loadType = getLoadableImageType(imageType);\n  let image;\n\n  switch (loadType) {\n    case 'imagebitmap':\n      image = await parseToImageBitmap(arrayBuffer, options, url);\n      break;\n\n    case 'image':\n      image = await parseToImage(arrayBuffer, options, url);\n      break;\n\n    case 'data':\n      image = await parseToNodeImage(arrayBuffer, options);\n      break;\n\n    default:\n      assert(false);\n  }\n\n  if (imageType === 'data') {\n    image = getImageData(image);\n  }\n\n  return image;\n}\n\nfunction getLoadableImageType(type) {\n  switch (type) {\n    case 'auto':\n    case 'data':\n      return getDefaultImageType();\n\n    default:\n      isImageTypeSupported(type);\n      return type;\n  }\n}\n//# sourceMappingURL=parse-image.js.map","import { VERSION } from './lib/utils/version';\nimport parseImage from './lib/parsers/parse-image';\nimport { getBinaryImageMetadata } from './lib/category-api/binary-image-api';\nconst EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nconst MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vnd.microsoft.icon', 'image/svg+xml'];\nexport const ImageLoader = {\n  id: 'image',\n  module: 'images',\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  tests: [arrayBuffer => Boolean(getBinaryImageMetadata(new DataView(arrayBuffer)))],\n  options: {\n    image: {\n      type: 'auto',\n      decode: true\n    }\n  }\n};\nexport const _typecheckImageLoader = ImageLoader;\n//# sourceMappingURL=image-loader.js.map","function isJSON(text) {\n  const firstChar = text[0];\n  const lastChar = text[text.length - 1];\n  return firstChar === '{' && lastChar === '}' || firstChar === '[' && lastChar === ']';\n}\n\nexport default {\n  name: 'JSON',\n  extensions: ['json', 'geojson'],\n  mimeTypes: ['application/json', 'application/geo+json'],\n  testText: isJSON,\n  parseTextSync: JSON.parse\n};\n//# sourceMappingURL=json-loader.js.map","import { registerLoaders } from '@loaders.gl/core';\nimport { ImageLoader } from '@loaders.gl/images';\nimport { global } from 'probe.gl/env';\nimport log from '../utils/log';\nimport { register } from '../debug';\nimport jsonLoader from '../utils/json-loader';\nconst version = typeof \"8.6.0\" !== 'undefined' ? \"8.6.0\" : global.DECK_VERSION || 'untranspiled source';\nconst existingVersion = global.deck && global.deck.VERSION;\n\nif (existingVersion && existingVersion !== version) {\n  throw new Error(\"deck.gl - multiple versions detected: \".concat(existingVersion, \" vs \").concat(version));\n}\n\nif (!existingVersion) {\n  log.log(1, \"deck.gl \".concat(version))();\n  global.deck = Object.assign(global.deck || {}, {\n    VERSION: version,\n    version,\n    log,\n    _registerLoggers: register\n  });\n  registerLoaders([jsonLoader, [ImageLoader, {\n    imagebitmap: {\n      premultiplyAlpha: 'none'\n    }\n  }]]);\n}\n\nexport default global.deck;\n//# sourceMappingURL=init.js.map","import Resource from './resource';\nimport { FEATURES, hasFeatures } from '../features';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert } from '../utils/assert';\nconst GL_QUERY_RESULT = 0x8866;\nconst GL_QUERY_RESULT_AVAILABLE = 0x8867;\nconst GL_TIME_ELAPSED_EXT = 0x88bf;\nconst GL_GPU_DISJOINT_EXT = 0x8fbb;\nconst GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN = 0x8c88;\nconst GL_ANY_SAMPLES_PASSED = 0x8c2f;\nconst GL_ANY_SAMPLES_PASSED_CONSERVATIVE = 0x8d6a;\nexport default class Query extends Resource {\n  static isSupported(gl, opts = []) {\n    const webgl2 = isWebGL2(gl);\n    const hasTimerQuery = hasFeatures(gl, FEATURES.TIMER_QUERY);\n    let supported = webgl2 || hasTimerQuery;\n\n    for (const key of opts) {\n      switch (key) {\n        case 'queries':\n          supported = supported && webgl2;\n          break;\n\n        case 'timers':\n          supported = supported && hasTimerQuery;\n          break;\n\n        default:\n          assert(false);\n      }\n    }\n\n    return supported;\n  }\n\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    this.target = null;\n    this._queryPending = false;\n    this._pollingPromise = null;\n    Object.seal(this);\n  }\n\n  beginTimeElapsedQuery() {\n    return this.begin(GL_TIME_ELAPSED_EXT);\n  }\n\n  beginOcclusionQuery({\n    conservative = false\n  } = {}) {\n    return this.begin(conservative ? GL_ANY_SAMPLES_PASSED_CONSERVATIVE : GL_ANY_SAMPLES_PASSED);\n  }\n\n  beginTransformFeedbackQuery() {\n    return this.begin(GL_TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN);\n  }\n\n  begin(target) {\n    if (this._queryPending) {\n      return this;\n    }\n\n    this.target = target;\n    this.gl2.beginQuery(this.target, this.handle);\n    return this;\n  }\n\n  end() {\n    if (this._queryPending) {\n      return this;\n    }\n\n    if (this.target) {\n      this.gl2.endQuery(this.target);\n      this.target = null;\n      this._queryPending = true;\n    }\n\n    return this;\n  }\n\n  isResultAvailable() {\n    if (!this._queryPending) {\n      return false;\n    }\n\n    const resultAvailable = this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT_AVAILABLE);\n\n    if (resultAvailable) {\n      this._queryPending = false;\n    }\n\n    return resultAvailable;\n  }\n\n  isTimerDisjoint() {\n    return this.gl2.getParameter(GL_GPU_DISJOINT_EXT);\n  }\n\n  getResult() {\n    return this.gl2.getQueryParameter(this.handle, GL_QUERY_RESULT);\n  }\n\n  getTimerMilliseconds() {\n    return this.getResult() / 1e6;\n  }\n\n  createPoll(limit = Number.POSITIVE_INFINITY) {\n    if (this._pollingPromise) {\n      return this._pollingPromise;\n    }\n\n    let counter = 0;\n    this._pollingPromise = new Promise((resolve, reject) => {\n      const poll = () => {\n        if (this.isResultAvailable()) {\n          resolve(this.getResult());\n          this._pollingPromise = null;\n        } else if (counter++ > limit) {\n          reject('Timed out');\n          this._pollingPromise = null;\n        } else {\n          requestAnimationFrame(poll);\n        }\n      };\n\n      requestAnimationFrame(poll);\n    });\n    return this._pollingPromise;\n  }\n\n  _createHandle() {\n    return Query.isSupported(this.gl) ? this.gl2.createQuery() : null;\n  }\n\n  _deleteHandle() {\n    this.gl2.deleteQuery(this.handle);\n  }\n\n}\n//# sourceMappingURL=query.js.map","export function requestAnimationFrame(callback) {\n  return typeof window !== 'undefined' && window.requestAnimationFrame ? window.requestAnimationFrame(callback) : setTimeout(callback, 1000 / 60);\n}\nexport function cancelAnimationFrame(timerId) {\n  return typeof window !== 'undefined' && window.cancelAnimationFrame ? window.cancelAnimationFrame(timerId) : clearTimeout(timerId);\n}\n//# sourceMappingURL=request-animation-frame.js.map","import { isWebGL, createGLContext, instrumentGLContext, resizeGLContext, resetParameters } from '@luma.gl/gltools';\nimport { requestAnimationFrame, cancelAnimationFrame, Query, lumaStats, Framebuffer, log, assert } from '@luma.gl/webgl';\nimport { isBrowser } from 'probe.gl/env';\nconst isPage = isBrowser() && typeof document !== 'undefined';\nlet statIdCounter = 0;\nexport default class AnimationLoop {\n  constructor(props = {}) {\n    const {\n      onCreateContext = opts => createGLContext(opts),\n      onAddHTML = null,\n      onInitialize = () => {},\n      onRender = () => {},\n      onFinalize = () => {},\n      onError,\n      gl = null,\n      glOptions = {},\n      debug = false,\n      createFramebuffer = false,\n      autoResizeViewport = true,\n      autoResizeDrawingBuffer = true,\n      stats = lumaStats.get(`animation-loop-${statIdCounter++}`)\n    } = props;\n    let {\n      useDevicePixels = true\n    } = props;\n\n    if ('useDevicePixelRatio' in props) {\n      log.deprecated('useDevicePixelRatio', 'useDevicePixels')();\n      useDevicePixels = props.useDevicePixelRatio;\n    }\n\n    this.props = {\n      onCreateContext,\n      onAddHTML,\n      onInitialize,\n      onRender,\n      onFinalize,\n      onError,\n      gl,\n      glOptions,\n      debug,\n      createFramebuffer\n    };\n    this.gl = gl;\n    this.needsRedraw = null;\n    this.timeline = null;\n    this.stats = stats;\n    this.cpuTime = this.stats.get('CPU Time');\n    this.gpuTime = this.stats.get('GPU Time');\n    this.frameRate = this.stats.get('Frame Rate');\n    this._initialized = false;\n    this._running = false;\n    this._animationFrameId = null;\n    this._nextFramePromise = null;\n    this._resolveNextFrame = null;\n    this._cpuStartTime = 0;\n    this.setProps({\n      autoResizeViewport,\n      autoResizeDrawingBuffer,\n      useDevicePixels\n    });\n    this.start = this.start.bind(this);\n    this.stop = this.stop.bind(this);\n    this._pageLoadPromise = null;\n    this._onMousemove = this._onMousemove.bind(this);\n    this._onMouseleave = this._onMouseleave.bind(this);\n  }\n\n  delete() {\n    this.stop();\n\n    this._setDisplay(null);\n  }\n\n  setNeedsRedraw(reason) {\n    assert(typeof reason === 'string');\n    this.needsRedraw = this.needsRedraw || reason;\n    return this;\n  }\n\n  setProps(props) {\n    if ('autoResizeViewport' in props) {\n      this.autoResizeViewport = props.autoResizeViewport;\n    }\n\n    if ('autoResizeDrawingBuffer' in props) {\n      this.autoResizeDrawingBuffer = props.autoResizeDrawingBuffer;\n    }\n\n    if ('useDevicePixels' in props) {\n      this.useDevicePixels = props.useDevicePixels;\n    }\n\n    return this;\n  }\n\n  start(opts = {}) {\n    if (this._running) {\n      return this;\n    }\n\n    this._running = true;\n\n    const startPromise = this._getPageLoadPromise().then(() => {\n      if (!this._running || this._initialized) {\n        return null;\n      }\n\n      this._createWebGLContext(opts);\n\n      this._createFramebuffer();\n\n      this._startEventHandling();\n\n      this._initializeCallbackData();\n\n      this._updateCallbackData();\n\n      this._resizeCanvasDrawingBuffer();\n\n      this._resizeViewport();\n\n      this._gpuTimeQuery = Query.isSupported(this.gl, ['timers']) ? new Query(this.gl) : null;\n      this._initialized = true;\n      return this.onInitialize(this.animationProps);\n    }).then(appContext => {\n      if (this._running) {\n        this._addCallbackData(appContext || {});\n\n        if (appContext !== false) {\n          this._startLoop();\n        }\n      }\n    });\n\n    if (this.props.onError) {\n      startPromise.catch(this.props.onError);\n    }\n\n    return this;\n  }\n\n  redraw() {\n    if (this.isContextLost()) {\n      return this;\n    }\n\n    this._beginTimers();\n\n    this._setupFrame();\n\n    this._updateCallbackData();\n\n    this._renderFrame(this.animationProps);\n\n    this._clearNeedsRedraw();\n\n    if (this.offScreen && this.gl.commit) {\n      this.gl.commit();\n    }\n\n    if (this._resolveNextFrame) {\n      this._resolveNextFrame(this);\n\n      this._nextFramePromise = null;\n      this._resolveNextFrame = null;\n    }\n\n    this._endTimers();\n\n    return this;\n  }\n\n  stop() {\n    if (this._running) {\n      this._finalizeCallbackData();\n\n      this._cancelAnimationFrame(this._animationFrameId);\n\n      this._nextFramePromise = null;\n      this._resolveNextFrame = null;\n      this._animationFrameId = null;\n      this._running = false;\n    }\n\n    return this;\n  }\n\n  attachTimeline(timeline) {\n    this.timeline = timeline;\n    return this.timeline;\n  }\n\n  detachTimeline() {\n    this.timeline = null;\n  }\n\n  waitForRender() {\n    this.setNeedsRedraw('waitForRender');\n\n    if (!this._nextFramePromise) {\n      this._nextFramePromise = new Promise(resolve => {\n        this._resolveNextFrame = resolve;\n      });\n    }\n\n    return this._nextFramePromise;\n  }\n\n  async toDataURL() {\n    this.setNeedsRedraw('toDataURL');\n    await this.waitForRender();\n    return this.gl.canvas.toDataURL();\n  }\n\n  isContextLost() {\n    return this.gl.isContextLost();\n  }\n\n  onCreateContext(...args) {\n    return this.props.onCreateContext(...args);\n  }\n\n  onInitialize(...args) {\n    return this.props.onInitialize(...args);\n  }\n\n  onRender(...args) {\n    return this.props.onRender(...args);\n  }\n\n  onFinalize(...args) {\n    return this.props.onFinalize(...args);\n  }\n\n  getHTMLControlValue(id, defaultValue = 1) {\n    const element = document.getElementById(id);\n    return element ? Number(element.value) : defaultValue;\n  }\n\n  setViewParameters() {\n    log.removed('AnimationLoop.setViewParameters', 'AnimationLoop.setProps')();\n    return this;\n  }\n\n  _startLoop() {\n    const renderFrame = () => {\n      if (!this._running) {\n        return;\n      }\n\n      this.redraw();\n      this._animationFrameId = this._requestAnimationFrame(renderFrame);\n    };\n\n    this._cancelAnimationFrame(this._animationFrameId);\n\n    this._animationFrameId = this._requestAnimationFrame(renderFrame);\n  }\n\n  _getPageLoadPromise() {\n    if (!this._pageLoadPromise) {\n      this._pageLoadPromise = isPage ? new Promise((resolve, reject) => {\n        if (isPage && document.readyState === 'complete') {\n          resolve(document);\n          return;\n        }\n\n        window.addEventListener('load', () => {\n          resolve(document);\n        });\n      }) : Promise.resolve({});\n    }\n\n    return this._pageLoadPromise;\n  }\n\n  _setDisplay(display) {\n    if (this.display) {\n      this.display.delete();\n      this.display.animationLoop = null;\n    }\n\n    if (display) {\n      display.animationLoop = this;\n    }\n\n    this.display = display;\n  }\n\n  _cancelAnimationFrame(animationFrameId) {\n    if (this.display && this.display.cancelAnimationFrame) {\n      return this.display.cancelAnimationFrame(animationFrameId);\n    }\n\n    return cancelAnimationFrame(animationFrameId);\n  }\n\n  _requestAnimationFrame(renderFrameCallback) {\n    if (this._running) {\n      if (this.display && this.display.requestAnimationFrame) {\n        return this.display.requestAnimationFrame(renderFrameCallback);\n      }\n\n      return requestAnimationFrame(renderFrameCallback);\n    }\n\n    return undefined;\n  }\n\n  _renderFrame(...args) {\n    if (this.display) {\n      this.display._renderFrame(...args);\n\n      return;\n    }\n\n    this.onRender(...args);\n  }\n\n  _clearNeedsRedraw() {\n    this.needsRedraw = null;\n  }\n\n  _setupFrame() {\n    this._resizeCanvasDrawingBuffer();\n\n    this._resizeViewport();\n\n    this._resizeFramebuffer();\n  }\n\n  _initializeCallbackData() {\n    this.animationProps = {\n      gl: this.gl,\n      stop: this.stop,\n      canvas: this.gl.canvas,\n      framebuffer: this.framebuffer,\n      useDevicePixels: this.useDevicePixels,\n      needsRedraw: null,\n      startTime: Date.now(),\n      engineTime: 0,\n      tick: 0,\n      tock: 0,\n      time: 0,\n      _timeline: this.timeline,\n      _loop: this,\n      _animationLoop: this,\n      _mousePosition: null\n    };\n  }\n\n  _updateCallbackData() {\n    const {\n      width,\n      height,\n      aspect\n    } = this._getSizeAndAspect();\n\n    if (width !== this.animationProps.width || height !== this.animationProps.height) {\n      this.setNeedsRedraw('drawing buffer resized');\n    }\n\n    if (aspect !== this.animationProps.aspect) {\n      this.setNeedsRedraw('drawing buffer aspect changed');\n    }\n\n    this.animationProps.width = width;\n    this.animationProps.height = height;\n    this.animationProps.aspect = aspect;\n    this.animationProps.needsRedraw = this.needsRedraw;\n    this.animationProps.engineTime = Date.now() - this.animationProps.startTime;\n\n    if (this.timeline) {\n      this.timeline.update(this.animationProps.engineTime);\n    }\n\n    this.animationProps.tick = Math.floor(this.animationProps.time / 1000 * 60);\n    this.animationProps.tock++;\n    this.animationProps.time = this.timeline ? this.timeline.getTime() : this.animationProps.engineTime;\n    this.animationProps._offScreen = this.offScreen;\n  }\n\n  _finalizeCallbackData() {\n    this.onFinalize(this.animationProps);\n  }\n\n  _addCallbackData(appContext) {\n    if (typeof appContext === 'object' && appContext !== null) {\n      this.animationProps = Object.assign({}, this.animationProps, appContext);\n    }\n  }\n\n  _createWebGLContext(opts) {\n    this.offScreen = opts.canvas && typeof OffscreenCanvas !== 'undefined' && opts.canvas instanceof OffscreenCanvas;\n    opts = Object.assign({}, opts, this.props.glOptions);\n    this.gl = this.props.gl ? instrumentGLContext(this.props.gl, opts) : this.onCreateContext(opts);\n\n    if (!isWebGL(this.gl)) {\n      throw new Error('AnimationLoop.onCreateContext - illegal context returned');\n    }\n\n    resetParameters(this.gl);\n\n    this._createInfoDiv();\n  }\n\n  _createInfoDiv() {\n    if (this.gl.canvas && this.props.onAddHTML) {\n      const wrapperDiv = document.createElement('div');\n      document.body.appendChild(wrapperDiv);\n      wrapperDiv.style.position = 'relative';\n      const div = document.createElement('div');\n      div.style.position = 'absolute';\n      div.style.left = '10px';\n      div.style.bottom = '10px';\n      div.style.width = '300px';\n      div.style.background = 'white';\n      wrapperDiv.appendChild(this.gl.canvas);\n      wrapperDiv.appendChild(div);\n      const html = this.props.onAddHTML(div);\n\n      if (html) {\n        div.innerHTML = html;\n      }\n    }\n  }\n\n  _getSizeAndAspect() {\n    const width = this.gl.drawingBufferWidth;\n    const height = this.gl.drawingBufferHeight;\n    let aspect = 1;\n    const {\n      canvas\n    } = this.gl;\n\n    if (canvas && canvas.clientHeight) {\n      aspect = canvas.clientWidth / canvas.clientHeight;\n    } else if (width > 0 && height > 0) {\n      aspect = width / height;\n    }\n\n    return {\n      width,\n      height,\n      aspect\n    };\n  }\n\n  _resizeViewport() {\n    if (this.autoResizeViewport) {\n      this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\n    }\n  }\n\n  _resizeCanvasDrawingBuffer() {\n    if (this.autoResizeDrawingBuffer) {\n      resizeGLContext(this.gl, {\n        useDevicePixels: this.useDevicePixels\n      });\n    }\n  }\n\n  _createFramebuffer() {\n    if (this.props.createFramebuffer) {\n      this.framebuffer = new Framebuffer(this.gl);\n    }\n  }\n\n  _resizeFramebuffer() {\n    if (this.framebuffer) {\n      this.framebuffer.resize({\n        width: this.gl.drawingBufferWidth,\n        height: this.gl.drawingBufferHeight\n      });\n    }\n  }\n\n  _beginTimers() {\n    this.frameRate.timeEnd();\n    this.frameRate.timeStart();\n\n    if (this._gpuTimeQuery && this._gpuTimeQuery.isResultAvailable() && !this._gpuTimeQuery.isTimerDisjoint()) {\n      this.stats.get('GPU Time').addTime(this._gpuTimeQuery.getTimerMilliseconds());\n    }\n\n    if (this._gpuTimeQuery) {\n      this._gpuTimeQuery.beginTimeElapsedQuery();\n    }\n\n    this.cpuTime.timeStart();\n  }\n\n  _endTimers() {\n    this.cpuTime.timeEnd();\n\n    if (this._gpuTimeQuery) {\n      this._gpuTimeQuery.end();\n    }\n  }\n\n  _startEventHandling() {\n    const {\n      canvas\n    } = this.gl;\n\n    if (canvas) {\n      canvas.addEventListener('mousemove', this._onMousemove);\n      canvas.addEventListener('mouseleave', this._onMouseleave);\n    }\n  }\n\n  _onMousemove(e) {\n    this.animationProps._mousePosition = [e.offsetX, e.offsetY];\n  }\n\n  _onMouseleave(e) {\n    this.animationProps._mousePosition = null;\n  }\n\n}\n//# sourceMappingURL=animation-loop.js.map","const INPUT_START = 1;\nconst INPUT_MOVE = 2;\nconst INPUT_END = 4;\nconst MOUSE_INPUT_MAP = {\n  mousedown: INPUT_START,\n  mousemove: INPUT_MOVE,\n  mouseup: INPUT_END\n};\n\nfunction some(array, predict) {\n  for (let i = 0; i < array.length; i++) {\n    if (predict(array[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function enhancePointerEventInput(PointerEventInput) {\n  const oldHandler = PointerEventInput.prototype.handler;\n\n  PointerEventInput.prototype.handler = function handler(ev) {\n    const store = this.store;\n\n    if (ev.button > 0 && ev.type === 'pointerdown') {\n      if (!some(store, e => e.pointerId === ev.pointerId)) {\n        store.push(ev);\n      }\n    }\n\n    oldHandler.call(this, ev);\n  };\n}\nexport function enhanceMouseInput(MouseInput) {\n  MouseInput.prototype.handler = function handler(ev) {\n    let eventType = MOUSE_INPUT_MAP[ev.type];\n\n    if (eventType & INPUT_START && ev.button >= 0) {\n      this.pressed = true;\n    }\n\n    if (eventType & INPUT_MOVE && ev.which === 0) {\n      eventType = INPUT_END;\n    }\n\n    if (!this.pressed) {\n      return;\n    }\n\n    if (eventType & INPUT_END) {\n      this.pressed = false;\n    }\n\n    this.callback(this.manager, eventType, {\n      pointers: [ev],\n      changedPointers: [ev],\n      pointerType: 'mouse',\n      srcEvent: ev\n    });\n  };\n}\n//# sourceMappingURL=hammer-overrides.js.map","import hammerjs from 'hammerjs';\nimport { enhancePointerEventInput, enhanceMouseInput } from './hammer-overrides';\nenhancePointerEventInput(hammerjs.PointerEventInput);\nenhanceMouseInput(hammerjs.MouseInput);\nexport const Manager = hammerjs.Manager;\nexport default hammerjs;\n//# sourceMappingURL=hammer.browser.js.map","import Hammer from './utils/hammer';\nexport const RECOGNIZERS = Hammer ? [[Hammer.Pan, {\n  event: 'tripan',\n  pointers: 3,\n  threshold: 0,\n  enable: false\n}], [Hammer.Rotate, {\n  enable: false\n}], [Hammer.Pinch, {\n  enable: false\n}], [Hammer.Swipe, {\n  enable: false\n}], [Hammer.Pan, {\n  threshold: 0,\n  enable: false\n}], [Hammer.Press, {\n  enable: false\n}], [Hammer.Tap, {\n  event: 'doubletap',\n  taps: 2,\n  enable: false\n}], [Hammer.Tap, {\n  event: 'anytap',\n  enable: false\n}], [Hammer.Tap, {\n  enable: false\n}]] : null;\nexport const RECOGNIZER_COMPATIBLE_MAP = {\n  tripan: ['rotate', 'pinch', 'pan'],\n  rotate: ['pinch'],\n  pinch: ['pan'],\n  pan: ['press', 'doubletap', 'anytap', 'tap'],\n  doubletap: ['anytap'],\n  anytap: ['tap']\n};\nexport const RECOGNIZER_FALLBACK_MAP = {\n  doubletap: ['tap']\n};\nexport const BASIC_EVENT_ALIASES = {\n  pointerdown: 'pointerdown',\n  pointermove: 'pointermove',\n  pointerup: 'pointerup',\n  touchstart: 'pointerdown',\n  touchmove: 'pointermove',\n  touchend: 'pointerup',\n  mousedown: 'pointerdown',\n  mousemove: 'pointermove',\n  mouseup: 'pointerup'\n};\nexport const INPUT_EVENT_TYPES = {\n  KEY_EVENTS: ['keydown', 'keyup'],\n  MOUSE_EVENTS: ['mousedown', 'mousemove', 'mouseup', 'mouseover', 'mouseout', 'mouseleave'],\n  WHEEL_EVENTS: ['wheel', 'mousewheel']\n};\nexport const EVENT_RECOGNIZER_MAP = {\n  tap: 'tap',\n  anytap: 'anytap',\n  doubletap: 'doubletap',\n  press: 'press',\n  pinch: 'pinch',\n  pinchin: 'pinch',\n  pinchout: 'pinch',\n  pinchstart: 'pinch',\n  pinchmove: 'pinch',\n  pinchend: 'pinch',\n  pinchcancel: 'pinch',\n  rotate: 'rotate',\n  rotatestart: 'rotate',\n  rotatemove: 'rotate',\n  rotateend: 'rotate',\n  rotatecancel: 'rotate',\n  tripan: 'tripan',\n  tripanstart: 'tripan',\n  tripanmove: 'tripan',\n  tripanup: 'tripan',\n  tripandown: 'tripan',\n  tripanleft: 'tripan',\n  tripanright: 'tripan',\n  tripanend: 'tripan',\n  tripancancel: 'tripan',\n  pan: 'pan',\n  panstart: 'pan',\n  panmove: 'pan',\n  panup: 'pan',\n  pandown: 'pan',\n  panleft: 'pan',\n  panright: 'pan',\n  panend: 'pan',\n  pancancel: 'pan',\n  swipe: 'swipe',\n  swipeleft: 'swipe',\n  swiperight: 'swipe',\n  swipeup: 'swipe',\n  swipedown: 'swipe'\n};\nexport const GESTURE_EVENT_ALIASES = {\n  click: 'tap',\n  anyclick: 'anytap',\n  dblclick: 'doubletap',\n  mousedown: 'pointerdown',\n  mousemove: 'pointermove',\n  mouseup: 'pointerup',\n  mouseover: 'pointerover',\n  mouseout: 'pointerout',\n  mouseleave: 'pointerleave'\n};\n//# sourceMappingURL=constants.js.map","import { INPUT_EVENT_TYPES } from '../constants';\nimport { window, userAgent, passiveSupported } from '../utils/globals';\nconst firefox = userAgent.indexOf('firefox') !== -1;\nconst {\n  WHEEL_EVENTS\n} = INPUT_EVENT_TYPES;\nconst EVENT_TYPE = 'wheel';\nconst WHEEL_DELTA_MAGIC_SCALER = 4.000244140625;\nconst WHEEL_DELTA_PER_LINE = 40;\nconst SHIFT_MULTIPLIER = 0.25;\nexport default class WheelInput {\n  constructor(element, callback, options = {}) {\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.events = WHEEL_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    this.events.forEach(event => element.addEventListener(event, this.handleEvent, passiveSupported ? {\n      passive: false\n    } : false));\n  }\n\n  destroy() {\n    this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n  }\n\n  enableEventType(eventType, enabled) {\n    if (eventType === EVENT_TYPE) {\n      this.options.enable = enabled;\n    }\n  }\n\n  handleEvent(event) {\n    if (!this.options.enable) {\n      return;\n    }\n\n    let value = event.deltaY;\n\n    if (window.WheelEvent) {\n      if (firefox && event.deltaMode === window.WheelEvent.DOM_DELTA_PIXEL) {\n        value /= window.devicePixelRatio;\n      }\n\n      if (event.deltaMode === window.WheelEvent.DOM_DELTA_LINE) {\n        value *= WHEEL_DELTA_PER_LINE;\n      }\n    }\n\n    const wheelPosition = {\n      x: event.clientX,\n      y: event.clientY\n    };\n\n    if (value !== 0 && value % WHEEL_DELTA_MAGIC_SCALER === 0) {\n      value = Math.floor(value / WHEEL_DELTA_MAGIC_SCALER);\n    }\n\n    if (event.shiftKey && value) {\n      value = value * SHIFT_MULTIPLIER;\n    }\n\n    this._onWheel(event, -value, wheelPosition);\n  }\n\n  _onWheel(srcEvent, delta, position) {\n    this.callback({\n      type: EVENT_TYPE,\n      center: position,\n      delta,\n      srcEvent,\n      pointerType: 'mouse',\n      target: srcEvent.target\n    });\n  }\n\n}\n//# sourceMappingURL=wheel-input.js.map","import { INPUT_EVENT_TYPES } from '../constants';\nconst {\n  MOUSE_EVENTS\n} = INPUT_EVENT_TYPES;\nconst MOVE_EVENT_TYPE = 'pointermove';\nconst OVER_EVENT_TYPE = 'pointerover';\nconst OUT_EVENT_TYPE = 'pointerout';\nconst LEAVE_EVENT_TYPE = 'pointerleave';\nexport default class MoveInput {\n  constructor(element, callback, options = {}) {\n    this.element = element;\n    this.callback = callback;\n    this.pressed = false;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.enableMoveEvent = this.options.enable;\n    this.enableLeaveEvent = this.options.enable;\n    this.enableOutEvent = this.options.enable;\n    this.enableOverEvent = this.options.enable;\n    this.events = MOUSE_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    this.events.forEach(event => element.addEventListener(event, this.handleEvent));\n  }\n\n  destroy() {\n    this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n  }\n\n  enableEventType(eventType, enabled) {\n    if (eventType === MOVE_EVENT_TYPE) {\n      this.enableMoveEvent = enabled;\n    }\n\n    if (eventType === OVER_EVENT_TYPE) {\n      this.enableOverEvent = enabled;\n    }\n\n    if (eventType === OUT_EVENT_TYPE) {\n      this.enableOutEvent = enabled;\n    }\n\n    if (eventType === LEAVE_EVENT_TYPE) {\n      this.enableLeaveEvent = enabled;\n    }\n  }\n\n  handleEvent(event) {\n    this.handleOverEvent(event);\n    this.handleOutEvent(event);\n    this.handleLeaveEvent(event);\n    this.handleMoveEvent(event);\n  }\n\n  handleOverEvent(event) {\n    if (this.enableOverEvent) {\n      if (event.type === 'mouseover') {\n        this.callback({\n          type: OVER_EVENT_TYPE,\n          srcEvent: event,\n          pointerType: 'mouse',\n          target: event.target\n        });\n      }\n    }\n  }\n\n  handleOutEvent(event) {\n    if (this.enableOutEvent) {\n      if (event.type === 'mouseout') {\n        this.callback({\n          type: OUT_EVENT_TYPE,\n          srcEvent: event,\n          pointerType: 'mouse',\n          target: event.target\n        });\n      }\n    }\n  }\n\n  handleLeaveEvent(event) {\n    if (this.enableLeaveEvent) {\n      if (event.type === 'mouseleave') {\n        this.callback({\n          type: LEAVE_EVENT_TYPE,\n          srcEvent: event,\n          pointerType: 'mouse',\n          target: event.target\n        });\n      }\n    }\n  }\n\n  handleMoveEvent(event) {\n    if (this.enableMoveEvent) {\n      switch (event.type) {\n        case 'mousedown':\n          if (event.button >= 0) {\n            this.pressed = true;\n          }\n\n          break;\n\n        case 'mousemove':\n          if (event.which === 0) {\n            this.pressed = false;\n          }\n\n          if (!this.pressed) {\n            this.callback({\n              type: MOVE_EVENT_TYPE,\n              srcEvent: event,\n              pointerType: 'mouse',\n              target: event.target\n            });\n          }\n\n          break;\n\n        case 'mouseup':\n          this.pressed = false;\n          break;\n\n        default:\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=move-input.js.map","import { INPUT_EVENT_TYPES } from '../constants';\nconst {\n  KEY_EVENTS\n} = INPUT_EVENT_TYPES;\nconst DOWN_EVENT_TYPE = 'keydown';\nconst UP_EVENT_TYPE = 'keyup';\nexport default class KeyInput {\n  constructor(element, callback, options = {}) {\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.enableDownEvent = this.options.enable;\n    this.enableUpEvent = this.options.enable;\n    this.events = KEY_EVENTS.concat(options.events || []);\n    this.handleEvent = this.handleEvent.bind(this);\n    element.tabIndex = options.tabIndex || 0;\n    element.style.outline = 'none';\n    this.events.forEach(event => element.addEventListener(event, this.handleEvent));\n  }\n\n  destroy() {\n    this.events.forEach(event => this.element.removeEventListener(event, this.handleEvent));\n  }\n\n  enableEventType(eventType, enabled) {\n    if (eventType === DOWN_EVENT_TYPE) {\n      this.enableDownEvent = enabled;\n    }\n\n    if (eventType === UP_EVENT_TYPE) {\n      this.enableUpEvent = enabled;\n    }\n  }\n\n  handleEvent(event) {\n    const targetElement = event.target || event.srcElement;\n\n    if (targetElement.tagName === 'INPUT' && targetElement.type === 'text' || targetElement.tagName === 'TEXTAREA') {\n      return;\n    }\n\n    if (this.enableDownEvent && event.type === 'keydown') {\n      this.callback({\n        type: DOWN_EVENT_TYPE,\n        srcEvent: event,\n        key: event.key,\n        target: event.target\n      });\n    }\n\n    if (this.enableUpEvent && event.type === 'keyup') {\n      this.callback({\n        type: UP_EVENT_TYPE,\n        srcEvent: event,\n        key: event.key,\n        target: event.target\n      });\n    }\n  }\n\n}\n//# sourceMappingURL=key-input.js.map","const EVENT_TYPE = 'contextmenu';\nexport default class ContextmenuInput {\n  constructor(element, callback, options = {}) {\n    this.element = element;\n    this.callback = callback;\n    this.options = Object.assign({\n      enable: true\n    }, options);\n    this.handleEvent = this.handleEvent.bind(this);\n    element.addEventListener('contextmenu', this.handleEvent);\n  }\n\n  destroy() {\n    this.element.removeEventListener('contextmenu', this.handleEvent);\n  }\n\n  enableEventType(eventType, enabled) {\n    if (eventType === EVENT_TYPE) {\n      this.options.enable = enabled;\n    }\n  }\n\n  handleEvent(event) {\n    if (!this.options.enable) {\n      return;\n    }\n\n    this.callback({\n      type: EVENT_TYPE,\n      center: {\n        x: event.clientX,\n        y: event.clientY\n      },\n      srcEvent: event,\n      pointerType: 'mouse',\n      target: event.target\n    });\n  }\n\n}\n//# sourceMappingURL=contextmenu-input.js.map","const DOWN_EVENT = 1;\nconst MOVE_EVENT = 2;\nconst UP_EVENT = 4;\nconst MOUSE_EVENTS = {\n  pointerdown: DOWN_EVENT,\n  pointermove: MOVE_EVENT,\n  pointerup: UP_EVENT,\n  mousedown: DOWN_EVENT,\n  mousemove: MOVE_EVENT,\n  mouseup: UP_EVENT\n};\nconst MOUSE_EVENT_WHICH_LEFT = 1;\nconst MOUSE_EVENT_WHICH_MIDDLE = 2;\nconst MOUSE_EVENT_WHICH_RIGHT = 3;\nconst MOUSE_EVENT_BUTTON_LEFT = 0;\nconst MOUSE_EVENT_BUTTON_MIDDLE = 1;\nconst MOUSE_EVENT_BUTTON_RIGHT = 2;\nconst MOUSE_EVENT_BUTTONS_LEFT_MASK = 1;\nconst MOUSE_EVENT_BUTTONS_RIGHT_MASK = 2;\nconst MOUSE_EVENT_BUTTONS_MIDDLE_MASK = 4;\nexport function whichButtons(event) {\n  const eventType = MOUSE_EVENTS[event.srcEvent.type];\n\n  if (!eventType) {\n    return null;\n  }\n\n  const {\n    buttons,\n    button,\n    which\n  } = event.srcEvent;\n  let leftButton = false;\n  let middleButton = false;\n  let rightButton = false;\n\n  if (eventType === UP_EVENT || eventType === MOVE_EVENT && !Number.isFinite(buttons)) {\n    leftButton = which === MOUSE_EVENT_WHICH_LEFT;\n    middleButton = which === MOUSE_EVENT_WHICH_MIDDLE;\n    rightButton = which === MOUSE_EVENT_WHICH_RIGHT;\n  } else if (eventType === MOVE_EVENT) {\n    leftButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_LEFT_MASK);\n    middleButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_MIDDLE_MASK);\n    rightButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_RIGHT_MASK);\n  } else if (eventType === DOWN_EVENT) {\n    leftButton = button === MOUSE_EVENT_BUTTON_LEFT;\n    middleButton = button === MOUSE_EVENT_BUTTON_MIDDLE;\n    rightButton = button === MOUSE_EVENT_BUTTON_RIGHT;\n  }\n\n  return {\n    leftButton,\n    middleButton,\n    rightButton\n  };\n}\nexport function getOffsetPosition(event, rootElement) {\n  const {\n    srcEvent\n  } = event;\n\n  if (!event.center && !Number.isFinite(srcEvent.clientX)) {\n    return null;\n  }\n\n  const center = event.center || {\n    x: srcEvent.clientX,\n    y: srcEvent.clientY\n  };\n  const rect = rootElement.getBoundingClientRect();\n  const scaleX = rect.width / rootElement.offsetWidth || 1;\n  const scaleY = rect.height / rootElement.offsetHeight || 1;\n  const offsetCenter = {\n    x: (center.x - rect.left - rootElement.clientLeft) / scaleX,\n    y: (center.y - rect.top - rootElement.clientTop) / scaleY\n  };\n  return {\n    center,\n    offsetCenter\n  };\n}\n//# sourceMappingURL=event-utils.js.map","import { whichButtons, getOffsetPosition } from './event-utils';\nconst DEFAULT_OPTIONS = {\n  srcElement: 'root',\n  priority: 0\n};\nexport default class EventRegistrar {\n  constructor(eventManager) {\n    this.eventManager = eventManager;\n    this.handlers = [];\n    this.handlersByElement = new Map();\n    this.handleEvent = this.handleEvent.bind(this);\n    this._active = false;\n  }\n\n  isEmpty() {\n    return !this._active;\n  }\n\n  add(type, handler, opts, once = false, passive = false) {\n    const {\n      handlers,\n      handlersByElement\n    } = this;\n\n    if (opts && (typeof opts !== 'object' || opts.addEventListener)) {\n      opts = {\n        srcElement: opts\n      };\n    }\n\n    opts = opts ? Object.assign({}, DEFAULT_OPTIONS, opts) : DEFAULT_OPTIONS;\n    let entries = handlersByElement.get(opts.srcElement);\n\n    if (!entries) {\n      entries = [];\n      handlersByElement.set(opts.srcElement, entries);\n    }\n\n    const entry = {\n      type,\n      handler,\n      srcElement: opts.srcElement,\n      priority: opts.priority\n    };\n\n    if (once) {\n      entry.once = true;\n    }\n\n    if (passive) {\n      entry.passive = true;\n    }\n\n    handlers.push(entry);\n    this._active = this._active || !entry.passive;\n    let insertPosition = entries.length - 1;\n\n    while (insertPosition >= 0) {\n      if (entries[insertPosition].priority >= entry.priority) {\n        break;\n      }\n\n      insertPosition--;\n    }\n\n    entries.splice(insertPosition + 1, 0, entry);\n  }\n\n  remove(type, handler) {\n    const {\n      handlers,\n      handlersByElement\n    } = this;\n\n    for (let i = handlers.length - 1; i >= 0; i--) {\n      const entry = handlers[i];\n\n      if (entry.type === type && entry.handler === handler) {\n        handlers.splice(i, 1);\n        const entries = handlersByElement.get(entry.srcElement);\n        entries.splice(entries.indexOf(entry), 1);\n\n        if (entries.length === 0) {\n          handlersByElement.delete(entry.srcElement);\n        }\n      }\n    }\n\n    this._active = handlers.some(entry => !entry.passive);\n  }\n\n  handleEvent(event) {\n    if (this.isEmpty()) {\n      return;\n    }\n\n    const mjolnirEvent = this._normalizeEvent(event);\n\n    let target = event.srcEvent.target;\n\n    while (target && target !== mjolnirEvent.rootElement) {\n      this._emit(mjolnirEvent, target);\n\n      if (mjolnirEvent.handled) {\n        return;\n      }\n\n      target = target.parentNode;\n    }\n\n    this._emit(mjolnirEvent, 'root');\n  }\n\n  _emit(event, srcElement) {\n    const entries = this.handlersByElement.get(srcElement);\n\n    if (entries) {\n      let immediatePropagationStopped = false;\n\n      const stopPropagation = () => {\n        event.handled = true;\n      };\n\n      const stopImmediatePropagation = () => {\n        event.handled = true;\n        immediatePropagationStopped = true;\n      };\n\n      const entriesToRemove = [];\n\n      for (let i = 0; i < entries.length; i++) {\n        const {\n          type,\n          handler,\n          once\n        } = entries[i];\n        handler(Object.assign({}, event, {\n          type,\n          stopPropagation,\n          stopImmediatePropagation\n        }));\n\n        if (once) {\n          entriesToRemove.push(entries[i]);\n        }\n\n        if (immediatePropagationStopped) {\n          break;\n        }\n      }\n\n      for (let i = 0; i < entriesToRemove.length; i++) {\n        const {\n          type,\n          handler\n        } = entriesToRemove[i];\n        this.remove(type, handler);\n      }\n    }\n  }\n\n  _normalizeEvent(event) {\n    const rootElement = this.eventManager.element;\n    return Object.assign({}, event, whichButtons(event), getOffsetPosition(event, rootElement), {\n      handled: false,\n      rootElement\n    });\n  }\n\n}\n//# sourceMappingURL=event-registrar.js.map","import { Manager } from './utils/hammer';\nimport WheelInput from './inputs/wheel-input';\nimport MoveInput from './inputs/move-input';\nimport KeyInput from './inputs/key-input';\nimport ContextmenuInput from './inputs/contextmenu-input';\nimport EventRegistrar from './utils/event-registrar';\nimport { BASIC_EVENT_ALIASES, EVENT_RECOGNIZER_MAP, GESTURE_EVENT_ALIASES, RECOGNIZERS, RECOGNIZER_COMPATIBLE_MAP, RECOGNIZER_FALLBACK_MAP } from './constants';\nconst DEFAULT_OPTIONS = {\n  events: null,\n  recognizers: null,\n  recognizerOptions: {},\n  Manager,\n  touchAction: 'none',\n  tabIndex: 0\n};\nexport default class EventManager {\n  constructor(element = null, options = {}) {\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n    this.events = new Map();\n    this._onBasicInput = this._onBasicInput.bind(this);\n    this._onOtherEvent = this._onOtherEvent.bind(this);\n    this.setElement(element);\n    const {\n      events\n    } = options;\n\n    if (events) {\n      this.on(events);\n    }\n  }\n\n  setElement(element) {\n    if (this.element) {\n      this.destroy();\n    }\n\n    this.element = element;\n\n    if (!element) {\n      return;\n    }\n\n    const {\n      options\n    } = this;\n    const ManagerClass = options.Manager;\n    this.manager = new ManagerClass(element, {\n      touchAction: options.touchAction,\n      recognizers: options.recognizers || RECOGNIZERS\n    }).on('hammer.input', this._onBasicInput);\n\n    if (!options.recognizers) {\n      Object.keys(RECOGNIZER_COMPATIBLE_MAP).forEach(name => {\n        const recognizer = this.manager.get(name);\n\n        if (recognizer) {\n          RECOGNIZER_COMPATIBLE_MAP[name].forEach(otherName => {\n            recognizer.recognizeWith(otherName);\n          });\n        }\n      });\n    }\n\n    for (const recognizerName in options.recognizerOptions) {\n      const recognizer = this.manager.get(recognizerName);\n\n      if (recognizer) {\n        const recognizerOption = options.recognizerOptions[recognizerName];\n        delete recognizerOption.enable;\n        recognizer.set(recognizerOption);\n      }\n    }\n\n    this.wheelInput = new WheelInput(element, this._onOtherEvent, {\n      enable: false\n    });\n    this.moveInput = new MoveInput(element, this._onOtherEvent, {\n      enable: false\n    });\n    this.keyInput = new KeyInput(element, this._onOtherEvent, {\n      enable: false,\n      tabIndex: options.tabIndex\n    });\n    this.contextmenuInput = new ContextmenuInput(element, this._onOtherEvent, {\n      enable: false\n    });\n\n    for (const [eventAlias, eventRegistrar] of this.events) {\n      if (!eventRegistrar.isEmpty()) {\n        this._toggleRecognizer(eventRegistrar.recognizerName, true);\n\n        this.manager.on(eventAlias, eventRegistrar.handleEvent);\n      }\n    }\n  }\n\n  destroy() {\n    if (this.element) {\n      this.wheelInput.destroy();\n      this.moveInput.destroy();\n      this.keyInput.destroy();\n      this.contextmenuInput.destroy();\n      this.manager.destroy();\n      this.wheelInput = null;\n      this.moveInput = null;\n      this.keyInput = null;\n      this.contextmenuInput = null;\n      this.manager = null;\n      this.element = null;\n    }\n  }\n\n  on(event, handler, opts) {\n    this._addEventHandler(event, handler, opts, false);\n  }\n\n  once(event, handler, opts) {\n    this._addEventHandler(event, handler, opts, true);\n  }\n\n  watch(event, handler, opts) {\n    this._addEventHandler(event, handler, opts, false, true);\n  }\n\n  off(event, handler) {\n    this._removeEventHandler(event, handler);\n  }\n\n  _toggleRecognizer(name, enabled) {\n    const {\n      manager\n    } = this;\n\n    if (!manager) {\n      return;\n    }\n\n    const recognizer = manager.get(name);\n\n    if (recognizer && recognizer.options.enable !== enabled) {\n      recognizer.set({\n        enable: enabled\n      });\n      const fallbackRecognizers = RECOGNIZER_FALLBACK_MAP[name];\n\n      if (fallbackRecognizers && !this.options.recognizers) {\n        fallbackRecognizers.forEach(otherName => {\n          const otherRecognizer = manager.get(otherName);\n\n          if (enabled) {\n            otherRecognizer.requireFailure(name);\n            recognizer.dropRequireFailure(otherName);\n          } else {\n            otherRecognizer.dropRequireFailure(name);\n          }\n        });\n      }\n    }\n\n    this.wheelInput.enableEventType(name, enabled);\n    this.moveInput.enableEventType(name, enabled);\n    this.keyInput.enableEventType(name, enabled);\n    this.contextmenuInput.enableEventType(name, enabled);\n  }\n\n  _addEventHandler(event, handler, opts, once, passive) {\n    if (typeof event !== 'string') {\n      opts = handler;\n\n      for (const eventName in event) {\n        this._addEventHandler(eventName, event[eventName], opts, once, passive);\n      }\n\n      return;\n    }\n\n    const {\n      manager,\n      events\n    } = this;\n    const eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n    let eventRegistrar = events.get(eventAlias);\n\n    if (!eventRegistrar) {\n      eventRegistrar = new EventRegistrar(this);\n      events.set(eventAlias, eventRegistrar);\n      eventRegistrar.recognizerName = EVENT_RECOGNIZER_MAP[eventAlias] || eventAlias;\n\n      if (manager) {\n        manager.on(eventAlias, eventRegistrar.handleEvent);\n      }\n    }\n\n    eventRegistrar.add(event, handler, opts, once, passive);\n\n    if (!eventRegistrar.isEmpty()) {\n      this._toggleRecognizer(eventRegistrar.recognizerName, true);\n    }\n  }\n\n  _removeEventHandler(event, handler) {\n    if (typeof event !== 'string') {\n      for (const eventName in event) {\n        this._removeEventHandler(eventName, event[eventName]);\n      }\n\n      return;\n    }\n\n    const {\n      events\n    } = this;\n    const eventAlias = GESTURE_EVENT_ALIASES[event] || event;\n    const eventRegistrar = events.get(eventAlias);\n\n    if (!eventRegistrar) {\n      return;\n    }\n\n    eventRegistrar.remove(event, handler);\n\n    if (eventRegistrar.isEmpty()) {\n      const {\n        recognizerName\n      } = eventRegistrar;\n      let isRecognizerUsed = false;\n\n      for (const eh of events.values()) {\n        if (eh.recognizerName === recognizerName && !eh.isEmpty()) {\n          isRecognizerUsed = true;\n          break;\n        }\n      }\n\n      if (!isRecognizerUsed) {\n        this._toggleRecognizer(recognizerName, false);\n      }\n    }\n  }\n\n  _onBasicInput(event) {\n    const {\n      srcEvent\n    } = event;\n    const alias = BASIC_EVENT_ALIASES[srcEvent.type];\n\n    if (alias) {\n      this.manager.emit(alias, event);\n    }\n  }\n\n  _onOtherEvent(event) {\n    this.manager.emit(event.type, event);\n  }\n\n}\n//# sourceMappingURL=event-manager.js.map","import LayerManager from './layer-manager';\nimport ViewManager from './view-manager';\nimport MapView from '../views/map-view';\nimport EffectManager from './effect-manager';\nimport Effect from './effect';\nimport DeckRenderer from './deck-renderer';\nimport DeckPicker from './deck-picker';\nimport Tooltip from './tooltip';\nimport log from '../utils/log';\nimport { deepEqual } from '../utils/deep-equal';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport deckGlobal from './init';\nimport { getBrowser } from 'probe.gl/env';\nimport { AnimationLoop, createGLContext, instrumentGLContext, setParameters, Timeline, lumaStats } from '@luma.gl/core';\nimport { Stats } from 'probe.gl';\nimport { EventManager } from 'mjolnir.js';\nimport assert from '../utils/assert';\nimport { EVENTS } from './constants';\n\nfunction noop() {}\n\nconst getCursor = ({\n  isDragging\n}) => isDragging ? 'grabbing' : 'grab';\n\nfunction getPropTypes(PropTypes) {\n  return {\n    id: PropTypes.string,\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    layers: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    layerFilter: PropTypes.func,\n    views: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n    viewState: PropTypes.object,\n    effects: PropTypes.arrayOf(PropTypes.instanceOf(Effect)),\n    controller: PropTypes.oneOfType([PropTypes.func, PropTypes.bool, PropTypes.object]),\n    gl: PropTypes.object,\n    glOptions: PropTypes.object,\n    parameters: PropTypes.object,\n    pickingRadius: PropTypes.number,\n    useDevicePixels: PropTypes.oneOfType([PropTypes.bool, PropTypes.number]),\n    touchAction: PropTypes.string,\n    eventRecognizerOptions: PropTypes.object,\n    onWebGLInitialized: PropTypes.func,\n    onResize: PropTypes.func,\n    onViewStateChange: PropTypes.func,\n    onInteractionStateChange: PropTypes.func,\n    onBeforeRender: PropTypes.func,\n    onAfterRender: PropTypes.func,\n    onLoad: PropTypes.func,\n    onError: PropTypes.func,\n    debug: PropTypes.bool,\n    drawPickingColors: PropTypes.bool,\n    _framebuffer: PropTypes.object,\n    _animate: PropTypes.bool,\n    _pickable: PropTypes.bool,\n    _typedArrayManagerProps: PropTypes.object\n  };\n}\n\nconst defaultProps = {\n  id: '',\n  width: '100%',\n  height: '100%',\n  pickingRadius: 0,\n  layerFilter: null,\n  glOptions: {},\n  gl: null,\n  layers: [],\n  effects: [],\n  views: null,\n  controller: null,\n  useDevicePixels: true,\n  touchAction: 'none',\n  eventRecognizerOptions: {},\n  _framebuffer: null,\n  _animate: false,\n  _pickable: true,\n  _typedArrayManagerProps: {},\n  onWebGLInitialized: noop,\n  onResize: noop,\n  onViewStateChange: noop,\n  onInteractionStateChange: noop,\n  onBeforeRender: noop,\n  onAfterRender: noop,\n  onLoad: noop,\n  onError: (error, layer) => log.error(error)(),\n  _onMetrics: null,\n  getCursor,\n  debug: false,\n  drawPickingColors: false\n};\nexport default class Deck {\n  constructor(props) {\n    props = { ...defaultProps,\n      ...props\n    };\n    this.props = {};\n    this.width = 0;\n    this.height = 0;\n    this.viewManager = null;\n    this.layerManager = null;\n    this.effectManager = null;\n    this.deckRenderer = null;\n    this.deckPicker = null;\n    this._needsRedraw = true;\n    this._pickRequest = {};\n    this._lastPointerDownInfo = null;\n    this.viewState = null;\n    this.interactiveState = {\n      isHovering: false,\n      isDragging: false\n    };\n    this._onEvent = this._onEvent.bind(this);\n    this._onPointerDown = this._onPointerDown.bind(this);\n    this._onPointerMove = this._onPointerMove.bind(this);\n\n    if (props.viewState && props.initialViewState) {\n      log.warn('View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.')();\n    }\n\n    if (getBrowser() === 'IE') {\n      log.warn('IE 11 support will be deprecated in v8.0')();\n    }\n\n    if (!props.gl) {\n      if (typeof document !== 'undefined') {\n        this.canvas = this._createCanvas(props);\n      }\n    }\n\n    this.animationLoop = this._createAnimationLoop(props);\n    this.stats = new Stats({\n      id: 'deck.gl'\n    });\n    this.metrics = {\n      fps: 0,\n      setPropsTime: 0,\n      updateAttributesTime: 0,\n      framesRedrawn: 0,\n      pickTime: 0,\n      pickCount: 0,\n      gpuTime: 0,\n      gpuTimePerFrame: 0,\n      cpuTime: 0,\n      cpuTimePerFrame: 0,\n      bufferMemory: 0,\n      textureMemory: 0,\n      renderbufferMemory: 0,\n      gpuMemory: 0\n    };\n    this._metricsCounter = 0;\n    this.setProps(props);\n\n    if (props._typedArrayManagerProps) {\n      typedArrayManager.setProps(props._typedArrayManagerProps);\n    }\n\n    this.animationLoop.start();\n  }\n\n  finalize() {\n    this.animationLoop.stop();\n    this.animationLoop = null;\n    this._lastPointerDownInfo = null;\n\n    if (this.layerManager) {\n      this.layerManager.finalize();\n      this.layerManager = null;\n      this.viewManager.finalize();\n      this.viewManager = null;\n      this.effectManager.finalize();\n      this.effectManager = null;\n      this.deckRenderer.finalize();\n      this.deckRenderer = null;\n      this.deckPicker.finalize();\n      this.deckPicker = null;\n      this.eventManager.destroy();\n      this.eventManager = null;\n      this.tooltip.remove();\n      this.tooltip = null;\n    }\n\n    if (!this.props.canvas && !this.props.gl && this.canvas) {\n      this.canvas.parentElement.removeChild(this.canvas);\n      this.canvas = null;\n    }\n  }\n\n  setProps(props) {\n    this.stats.get('setProps Time').timeStart();\n\n    if ('onLayerHover' in props) {\n      log.removed('onLayerHover', 'onHover')();\n    }\n\n    if ('onLayerClick' in props) {\n      log.removed('onLayerClick', 'onClick')();\n    }\n\n    if (props.initialViewState && !deepEqual(this.props.initialViewState, props.initialViewState)) {\n      this.viewState = props.initialViewState;\n    }\n\n    Object.assign(this.props, props);\n\n    this._setCanvasSize(this.props);\n\n    const resolvedProps = Object.create(this.props);\n    Object.assign(resolvedProps, {\n      views: this._getViews(),\n      width: this.width,\n      height: this.height,\n      viewState: this._getViewState()\n    });\n    this.animationLoop.setProps(resolvedProps);\n\n    if (this.layerManager) {\n      this.viewManager.setProps(resolvedProps);\n      this.layerManager.activateViewport(this.getViewports()[0]);\n      this.layerManager.setProps(resolvedProps);\n      this.effectManager.setProps(resolvedProps);\n      this.deckRenderer.setProps(resolvedProps);\n      this.deckPicker.setProps(resolvedProps);\n    }\n\n    this.stats.get('setProps Time').timeEnd();\n  }\n\n  needsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    if (this.props._animate) {\n      return 'Deck._animate';\n    }\n\n    let redraw = this._needsRedraw;\n\n    if (opts.clearRedrawFlags) {\n      this._needsRedraw = false;\n    }\n\n    const viewManagerNeedsRedraw = this.viewManager.needsRedraw(opts);\n    const layerManagerNeedsRedraw = this.layerManager.needsRedraw(opts);\n    const effectManagerNeedsRedraw = this.effectManager.needsRedraw(opts);\n    const deckRendererNeedsRedraw = this.deckRenderer.needsRedraw(opts);\n    redraw = redraw || viewManagerNeedsRedraw || layerManagerNeedsRedraw || effectManagerNeedsRedraw || deckRendererNeedsRedraw;\n    return redraw;\n  }\n\n  redraw(force) {\n    if (!this.layerManager) {\n      return;\n    }\n\n    const redrawReason = force || this.needsRedraw({\n      clearRedrawFlags: true\n    });\n\n    if (!redrawReason) {\n      return;\n    }\n\n    this.stats.get('Redraw Count').incrementCount();\n\n    if (this.props._customRender) {\n      this.props._customRender(redrawReason);\n    } else {\n      this._drawLayers(redrawReason);\n    }\n  }\n\n  getViews() {\n    return this.viewManager.views;\n  }\n\n  getViewports(rect) {\n    return this.viewManager.getViewports(rect);\n  }\n\n  pickObject(opts) {\n    const infos = this._pick('pickObject', 'pickObject Time', opts).result;\n\n    return infos.length ? infos[0] : null;\n  }\n\n  pickMultipleObjects(opts) {\n    opts.depth = opts.depth || 10;\n    return this._pick('pickObject', 'pickMultipleObjects Time', opts).result;\n  }\n\n  pickObjects(opts) {\n    return this._pick('pickObjects', 'pickObjects Time', opts);\n  }\n\n  _addResources(resources, forceUpdate = false) {\n    for (const id in resources) {\n      this.layerManager.resourceManager.add({\n        resourceId: id,\n        data: resources[id],\n        forceUpdate\n      });\n    }\n  }\n\n  _removeResources(resourceIds) {\n    for (const id of resourceIds) {\n      this.layerManager.resourceManager.remove(id);\n    }\n  }\n\n  _pick(method, statKey, opts) {\n    const {\n      stats\n    } = this;\n    stats.get('Pick Count').incrementCount();\n    stats.get(statKey).timeStart();\n    const infos = this.deckPicker[method]({\n      layers: this.layerManager.getLayers(opts),\n      views: this.viewManager.getViews(),\n      viewports: this.getViewports(opts),\n      onViewportActive: this.layerManager.activateViewport,\n      ...opts\n    });\n    stats.get(statKey).timeEnd();\n    return infos;\n  }\n\n  _createCanvas(props) {\n    let canvas = props.canvas;\n\n    if (typeof canvas === 'string') {\n      canvas = document.getElementById(canvas);\n      assert(canvas);\n    }\n\n    if (!canvas) {\n      canvas = document.createElement('canvas');\n      canvas.id = props.id || 'deckgl-overlay';\n      const parent = props.parent || document.body;\n      parent.appendChild(canvas);\n    }\n\n    Object.assign(canvas.style, props.style);\n    return canvas;\n  }\n\n  _setCanvasSize(props) {\n    if (!this.canvas) {\n      return;\n    }\n\n    let {\n      width,\n      height\n    } = props;\n\n    if (width || width === 0) {\n      width = Number.isFinite(width) ? \"\".concat(width, \"px\") : width;\n      this.canvas.style.width = width;\n    }\n\n    if (height || height === 0) {\n      height = Number.isFinite(height) ? \"\".concat(height, \"px\") : height;\n      this.canvas.style.position = 'absolute';\n      this.canvas.style.height = height;\n    }\n  }\n\n  _updateCanvasSize() {\n    if (this._checkForCanvasSizeChange()) {\n      const {\n        width,\n        height\n      } = this;\n      this.viewManager.setProps({\n        width,\n        height\n      });\n      this.props.onResize({\n        width: this.width,\n        height: this.height\n      });\n    }\n  }\n\n  _checkForCanvasSizeChange() {\n    const {\n      canvas\n    } = this;\n\n    if (!canvas) {\n      return false;\n    }\n\n    const newWidth = canvas.clientWidth || canvas.width;\n    const newHeight = canvas.clientHeight || canvas.height;\n\n    if (newWidth !== this.width || newHeight !== this.height) {\n      this.width = newWidth;\n      this.height = newHeight;\n      return true;\n    }\n\n    return false;\n  }\n\n  _createAnimationLoop(props) {\n    const {\n      width,\n      height,\n      gl,\n      glOptions,\n      debug,\n      onError,\n      onBeforeRender,\n      onAfterRender,\n      useDevicePixels,\n      autoResizeDrawingBuffer\n    } = props;\n    return new AnimationLoop({\n      width,\n      height,\n      useDevicePixels,\n      autoResizeDrawingBuffer,\n      autoResizeViewport: false,\n      gl,\n      onCreateContext: opts => createGLContext({ ...glOptions,\n        ...opts,\n        canvas: this.canvas,\n        debug,\n        onContextLost: () => this._onContextLost()\n      }),\n      onInitialize: context => this._setGLContext(context.gl),\n      onRender: this._onRenderFrame.bind(this),\n      onBeforeRender,\n      onAfterRender,\n      onError\n    });\n  }\n\n  _getViewState() {\n    return this.props.viewState || this.viewState;\n  }\n\n  _getViews() {\n    let views = this.props.views || [new MapView({\n      id: 'default-view'\n    })];\n    views = Array.isArray(views) ? views : [views];\n\n    if (views.length && this.props.controller) {\n      views[0].props.controller = this.props.controller;\n    }\n\n    return views;\n  }\n\n  _onContextLost() {\n    const {\n      onError\n    } = this.props;\n\n    if (this.animationLoop && onError) {\n      onError(new Error(\"WebGL context is lost\"));\n    }\n  }\n\n  _onPointerMove(event) {\n    const {\n      _pickRequest\n    } = this;\n\n    if (event.type === 'pointerleave') {\n      _pickRequest.x = -1;\n      _pickRequest.y = -1;\n      _pickRequest.radius = 0;\n    } else if (event.leftButton || event.rightButton) {\n      return;\n    } else {\n      const pos = event.offsetCenter;\n\n      if (!pos) {\n        return;\n      }\n\n      _pickRequest.x = pos.x;\n      _pickRequest.y = pos.y;\n      _pickRequest.radius = this.props.pickingRadius;\n    }\n\n    if (this.layerManager) {\n      this.layerManager.context.mousePosition = {\n        x: _pickRequest.x,\n        y: _pickRequest.y\n      };\n    }\n\n    _pickRequest.event = event;\n    _pickRequest.mode = 'hover';\n  }\n\n  _pickAndCallback() {\n    const {\n      _pickRequest\n    } = this;\n\n    if (_pickRequest.event) {\n      const {\n        result,\n        emptyInfo\n      } = this._pick('pickObject', 'pickObject Time', _pickRequest);\n\n      this.interactiveState.isHovering = result.length > 0;\n      let pickedInfo = emptyInfo;\n      let handled = false;\n\n      for (const info of result) {\n        pickedInfo = info;\n        handled = info.layer.onHover(info, _pickRequest.event);\n      }\n\n      if (!handled && this.props.onHover) {\n        this.props.onHover(pickedInfo, _pickRequest.event);\n      }\n\n      if (this.props.getTooltip) {\n        const displayInfo = this.props.getTooltip(pickedInfo);\n        this.tooltip.setTooltip(displayInfo, pickedInfo.x, pickedInfo.y);\n      }\n\n      _pickRequest.event = null;\n    }\n  }\n\n  _updateCursor() {\n    const container = this.props.parent || this.canvas;\n\n    if (container) {\n      container.style.cursor = this.props.getCursor(this.interactiveState);\n    }\n  }\n\n  _setGLContext(gl) {\n    if (this.layerManager) {\n      return;\n    }\n\n    if (!this.canvas) {\n      this.canvas = gl.canvas;\n      instrumentGLContext(gl, {\n        enable: true,\n        copyState: true\n      });\n    }\n\n    this.tooltip = new Tooltip(this.canvas);\n    setParameters(gl, {\n      blend: true,\n      blendFunc: [770, 771, 1, 771],\n      polygonOffsetFill: true,\n      depthTest: true,\n      depthFunc: 515\n    });\n    this.props.onWebGLInitialized(gl);\n    const timeline = new Timeline();\n    timeline.play();\n    this.animationLoop.attachTimeline(timeline);\n    this.eventManager = new EventManager(this.props.parent || gl.canvas, {\n      touchAction: this.props.touchAction,\n      recognizerOptions: this.props.eventRecognizerOptions,\n      events: {\n        pointerdown: this._onPointerDown,\n        pointermove: this._onPointerMove,\n        pointerleave: this._onPointerMove\n      }\n    });\n\n    for (const eventType in EVENTS) {\n      this.eventManager.on(eventType, this._onEvent);\n    }\n\n    this.viewManager = new ViewManager({\n      timeline,\n      eventManager: this.eventManager,\n      onViewStateChange: this._onViewStateChange.bind(this),\n      onInteractionStateChange: this._onInteractionStateChange.bind(this),\n      views: this._getViews(),\n      viewState: this._getViewState(),\n      width: this.width,\n      height: this.height\n    });\n    const viewport = this.viewManager.getViewports()[0];\n    this.layerManager = new LayerManager(gl, {\n      deck: this,\n      stats: this.stats,\n      viewport,\n      timeline\n    });\n    this.effectManager = new EffectManager();\n    this.deckRenderer = new DeckRenderer(gl);\n    this.deckPicker = new DeckPicker(gl);\n    this.setProps(this.props);\n\n    this._updateCanvasSize();\n\n    this.props.onLoad();\n  }\n\n  _drawLayers(redrawReason, renderOptions) {\n    const {\n      gl\n    } = this.layerManager.context;\n    setParameters(gl, this.props.parameters);\n    this.props.onBeforeRender({\n      gl\n    });\n    this.deckRenderer.renderLayers({\n      target: this.props._framebuffer,\n      layers: this.layerManager.getLayers(),\n      viewports: this.viewManager.getViewports(),\n      onViewportActive: this.layerManager.activateViewport,\n      views: this.viewManager.getViews(),\n      pass: 'screen',\n      redrawReason,\n      effects: this.effectManager.getEffects(),\n      ...renderOptions\n    });\n    this.props.onAfterRender({\n      gl\n    });\n  }\n\n  _onRenderFrame(animationProps) {\n    this._getFrameStats();\n\n    if (this._metricsCounter++ % 60 === 0) {\n      this._getMetrics();\n\n      this.stats.reset();\n      log.table(4, this.metrics)();\n\n      if (this.props._onMetrics) {\n        this.props._onMetrics(this.metrics);\n      }\n    }\n\n    this._updateCanvasSize();\n\n    this._updateCursor();\n\n    if (this.tooltip.isVisible && this.viewManager.needsRedraw()) {\n      this.tooltip.setTooltip(null);\n    }\n\n    this.layerManager.updateLayers();\n\n    this._pickAndCallback();\n\n    this.redraw(false);\n\n    if (this.viewManager) {\n      this.viewManager.updateViewStates();\n    }\n  }\n\n  _onViewStateChange(params) {\n    const viewState = this.props.onViewStateChange(params) || params.viewState;\n\n    if (this.viewState) {\n      this.viewState = { ...this.viewState,\n        [params.viewId]: viewState\n      };\n\n      if (!this.props.viewState) {\n        if (this.viewManager) {\n          this.viewManager.setProps({\n            viewState: this.viewState\n          });\n        }\n      }\n    }\n  }\n\n  _onInteractionStateChange(interactionState) {\n    this.interactiveState.isDragging = interactionState.isDragging;\n    this.props.onInteractionStateChange(interactionState);\n  }\n\n  _onEvent(event) {\n    const eventOptions = EVENTS[event.type];\n    const pos = event.offsetCenter;\n\n    if (!eventOptions || !pos) {\n      return;\n    }\n\n    const layers = this.layerManager.getLayers();\n    const info = this.deckPicker.getLastPickedObject({\n      x: pos.x,\n      y: pos.y,\n      layers,\n      viewports: this.getViewports(pos)\n    }, this._lastPointerDownInfo);\n    const {\n      layer\n    } = info;\n    const layerHandler = layer && (layer[eventOptions.handler] || layer.props[eventOptions.handler]);\n    const rootHandler = this.props[eventOptions.handler];\n    let handled = false;\n\n    if (layerHandler) {\n      handled = layerHandler.call(layer, info, event);\n    }\n\n    if (!handled && rootHandler) {\n      rootHandler(info, event);\n    }\n  }\n\n  _onPointerDown(event) {\n    const pos = event.offsetCenter;\n    this._lastPointerDownInfo = this.pickObject({\n      x: pos.x,\n      y: pos.y,\n      radius: this.props.pickingRadius\n    });\n  }\n\n  _getFrameStats() {\n    const {\n      stats\n    } = this;\n    stats.get('frameRate').timeEnd();\n    stats.get('frameRate').timeStart();\n    const animationLoopStats = this.animationLoop.stats;\n    stats.get('GPU Time').addTime(animationLoopStats.get('GPU Time').lastTiming);\n    stats.get('CPU Time').addTime(animationLoopStats.get('CPU Time').lastTiming);\n  }\n\n  _getMetrics() {\n    const {\n      metrics,\n      stats\n    } = this;\n    metrics.fps = stats.get('frameRate').getHz();\n    metrics.setPropsTime = stats.get('setProps Time').time;\n    metrics.updateAttributesTime = stats.get('Update Attributes').time;\n    metrics.framesRedrawn = stats.get('Redraw Count').count;\n    metrics.pickTime = stats.get('pickObject Time').time + stats.get('pickMultipleObjects Time').time + stats.get('pickObjects Time').time;\n    metrics.pickCount = stats.get('Pick Count').count;\n    metrics.gpuTime = stats.get('GPU Time').time;\n    metrics.cpuTime = stats.get('CPU Time').time;\n    metrics.gpuTimePerFrame = stats.get('GPU Time').getAverageTime();\n    metrics.cpuTimePerFrame = stats.get('CPU Time').getAverageTime();\n    const memoryStats = lumaStats.get('Memory Usage');\n    metrics.bufferMemory = memoryStats.get('Buffer Memory').count;\n    metrics.textureMemory = memoryStats.get('Texture Memory').count;\n    metrics.renderbufferMemory = memoryStats.get('Renderbuffer Memory').count;\n    metrics.gpuMemory = memoryStats.get('GPU Memory').count;\n  }\n\n}\nDeck.getPropTypes = getPropTypes;\nDeck.defaultProps = defaultProps;\nDeck.VERSION = deckGlobal.VERSION;\n//# sourceMappingURL=deck.js.map","import { Deck, WebMercatorViewport } from '@deck.gl/core';\nexport function getDeckInstance({\n  map,\n  gl,\n  deck\n}) {\n  if (map.__deck) {\n    return map.__deck;\n  }\n\n  const customRender = deck && deck.props._customRender;\n  const deckProps = {\n    useDevicePixels: true,\n    _customRender: () => {\n      map.triggerRepaint();\n\n      if (customRender) {\n        customRender();\n      }\n    },\n    parameters: {\n      depthMask: true,\n      depthTest: true,\n      blendFunc: [770, 771, 1, 771],\n      blendEquation: 32774\n    },\n    userData: {\n      isExternal: false,\n      mapboxLayers: new Set()\n    }\n  };\n\n  if (deck) {\n    deck.setProps(deckProps);\n    deck.props.userData.isExternal = true;\n  } else {\n    Object.assign(deckProps, {\n      gl,\n      width: false,\n      height: false,\n      touchAction: 'unset',\n      viewState: getViewState(map)\n    });\n    deck = new Deck(deckProps);\n    map.on('move', () => onMapMove(deck, map));\n    map.on('remove', () => {\n      deck.finalize();\n      map.__deck = null;\n    });\n  }\n\n  deck.props.userData.mapboxVersion = getMapboxVersion(map);\n  map.__deck = deck;\n  map.on('render', () => {\n    if (deck.layerManager) afterRender(deck, map);\n  });\n  return deck;\n}\nexport function addLayer(deck, layer) {\n  deck.props.userData.mapboxLayers.add(layer);\n  updateLayers(deck);\n}\nexport function removeLayer(deck, layer) {\n  deck.props.userData.mapboxLayers.delete(layer);\n  updateLayers(deck);\n}\nexport function updateLayer(deck, layer) {\n  updateLayers(deck);\n}\nexport function drawLayer(deck, map, layer) {\n  let {\n    currentViewport\n  } = deck.props.userData;\n\n  if (!currentViewport) {\n    currentViewport = getViewport(deck, map, true);\n    deck.props.userData.currentViewport = currentViewport;\n  }\n\n  if (!deck.layerManager) {\n    return;\n  }\n\n  deck._drawLayers('mapbox-repaint', {\n    viewports: [currentViewport],\n    layerFilter: ({\n      layer: deckLayer\n    }) => layer.id === deckLayer.id,\n    clearCanvas: false\n  });\n}\n\nfunction getViewState(map) {\n  const {\n    lng,\n    lat\n  } = map.getCenter();\n  return {\n    longitude: lng,\n    latitude: lat,\n    zoom: map.getZoom(),\n    bearing: map.getBearing(),\n    pitch: map.getPitch()\n  };\n}\n\nfunction getMapboxVersion(map) {\n  let major = 0;\n  let minor = 0;\n\n  if (map.version) {\n    [major, minor] = map.version.split('.').slice(0, 2).map(Number);\n  }\n\n  return {\n    major,\n    minor\n  };\n}\n\nfunction getViewport(deck, map, useMapboxProjection = true) {\n  const {\n    mapboxVersion\n  } = deck.props.userData;\n  return new WebMercatorViewport(Object.assign({\n    x: 0,\n    y: 0,\n    width: deck.width,\n    height: deck.height,\n    repeat: true\n  }, getViewState(map), useMapboxProjection ? {\n    nearZMultiplier: mapboxVersion.major === 1 && mapboxVersion.minor >= 3 || mapboxVersion.major >= 2 ? 0.02 : 1 / (deck.height || 1)\n  } : {\n    nearZMultiplier: 0.1\n  }));\n}\n\nfunction afterRender(deck, map) {\n  const {\n    mapboxLayers,\n    isExternal\n  } = deck.props.userData;\n\n  if (isExternal) {\n    const mapboxLayerIds = Array.from(mapboxLayers, layer => layer.id);\n    const hasNonMapboxLayers = deck.props.layers.some(layer => !mapboxLayerIds.includes(layer.id));\n\n    if (hasNonMapboxLayers) {\n      deck._drawLayers('mapbox-repaint', {\n        viewports: [getViewport(deck, map, false)],\n        layerFilter: ({\n          layer\n        }) => !mapboxLayerIds.includes(layer.id),\n        clearCanvas: false\n      });\n    }\n  }\n\n  deck.props.userData.currentViewport = null;\n}\n\nfunction onMapMove(deck, map) {\n  deck.setProps({\n    viewState: getViewState(map)\n  });\n  deck.needsRedraw({\n    clearRedrawFlags: true\n  });\n}\n\nfunction updateLayers(deck) {\n  if (deck.props.userData.isExternal) {\n    return;\n  }\n\n  const layers = [];\n  deck.props.userData.mapboxLayers.forEach(deckLayer => {\n    const LayerType = deckLayer.props.type;\n    const layer = new LayerType(deckLayer.props);\n    layers.push(layer);\n  });\n  deck.setProps({\n    layers\n  });\n}\n//# sourceMappingURL=deck-utils.js.map","import { getDeckInstance, addLayer, removeLayer, updateLayer, drawLayer } from './deck-utils';\nexport default class MapboxLayer {\n  constructor(props) {\n    if (!props.id) {\n      throw new Error('Layer must have an unique id');\n    }\n\n    this.id = props.id;\n    this.type = 'custom';\n    this.renderingMode = props.renderingMode || '3d';\n    this.map = null;\n    this.deck = null;\n    this.props = props;\n  }\n\n  onAdd(map, gl) {\n    this.map = map;\n    this.deck = getDeckInstance({\n      map,\n      gl,\n      deck: this.props.deck\n    });\n    addLayer(this.deck, this);\n  }\n\n  onRemove() {\n    removeLayer(this.deck, this);\n  }\n\n  setProps(props) {\n    Object.assign(this.props, props, {\n      id: this.id\n    });\n\n    if (this.deck) {\n      updateLayer(this.deck, this);\n    }\n  }\n\n  render(gl, matrix) {\n    drawLayer(this.deck, this.map, this);\n  }\n\n}\n//# sourceMappingURL=mapbox-layer.js.map","export default class ShaderAttribute {\n  constructor(dataColumn, opts) {\n    this.opts = opts;\n    this.source = dataColumn;\n  }\n\n  get value() {\n    return this.source.value;\n  }\n\n  getValue() {\n    const buffer = this.source.getBuffer();\n    const accessor = this.getAccessor();\n\n    if (buffer) {\n      return [buffer, accessor];\n    }\n\n    const {\n      value\n    } = this.source;\n    const {\n      size\n    } = accessor;\n    let constantValue = value;\n\n    if (value && value.length !== size) {\n      constantValue = new Float32Array(size);\n      const index = accessor.elementOffset || 0;\n\n      for (let i = 0; i < size; ++i) {\n        constantValue[i] = value[index + i];\n      }\n    }\n\n    return constantValue;\n  }\n\n  getAccessor() {\n    return { ...this.source.getAccessor(),\n      ...this.opts\n    };\n  }\n\n}\n//# sourceMappingURL=shader-attribute.js.map","export function glArrayFromType(glType) {\n  switch (glType) {\n    case 5126:\n      return Float32Array;\n\n    case 5130:\n      return Float64Array;\n\n    case 5123:\n    case 33635:\n    case 32819:\n    case 32820:\n      return Uint16Array;\n\n    case 5125:\n      return Uint32Array;\n\n    case 5121:\n      return Uint8ClampedArray;\n\n    case 5120:\n      return Int8Array;\n\n    case 5122:\n      return Int16Array;\n\n    case 5124:\n      return Int32Array;\n\n    default:\n      throw new Error('Unknown GL type');\n  }\n}\n//# sourceMappingURL=gl-utils.js.map","import { hasFeature, FEATURES, Buffer } from '@luma.gl/core';\nimport ShaderAttribute from './shader-attribute';\nimport { glArrayFromType } from './gl-utils';\nimport typedArrayManager from '../../utils/typed-array-manager';\nimport { toDoublePrecisionArray } from '../../utils/math-utils';\nimport log from '../../utils/log';\n\nfunction getStride(accessor) {\n  return accessor.stride || accessor.size * accessor.bytesPerElement;\n}\n\nfunction resolveShaderAttribute(baseAccessor, shaderAttributeOptions) {\n  if (shaderAttributeOptions.offset) {\n    log.removed('shaderAttribute.offset', 'vertexOffset, elementOffset')();\n  }\n\n  const stride = getStride(baseAccessor);\n  const vertexOffset = 'vertexOffset' in shaderAttributeOptions ? shaderAttributeOptions.vertexOffset : baseAccessor.vertexOffset || 0;\n  const elementOffset = shaderAttributeOptions.elementOffset || 0;\n  const offset = vertexOffset * stride + elementOffset * baseAccessor.bytesPerElement + (baseAccessor.offset || 0);\n  return { ...shaderAttributeOptions,\n    offset,\n    stride\n  };\n}\n\nfunction resolveDoublePrecisionShaderAttributes(baseAccessor, shaderAttributeOptions) {\n  const resolvedOptions = resolveShaderAttribute(baseAccessor, shaderAttributeOptions);\n  return {\n    high: resolvedOptions,\n    low: { ...resolvedOptions,\n      offset: resolvedOptions.offset + baseAccessor.size * 4\n    }\n  };\n}\n\nexport default class DataColumn {\n  constructor(gl, opts) {\n    this.gl = gl;\n    this.id = opts.id;\n    this.size = opts.size;\n    const logicalType = opts.logicalType || opts.type;\n    const doublePrecision = logicalType === 5130;\n    let {\n      defaultValue\n    } = opts;\n    defaultValue = Number.isFinite(defaultValue) ? [defaultValue] : defaultValue || new Array(this.size).fill(0);\n    opts.defaultValue = defaultValue;\n    let bufferType = logicalType;\n\n    if (doublePrecision) {\n      bufferType = 5126;\n    } else if (!bufferType && opts.isIndexed) {\n      bufferType = gl && hasFeature(gl, FEATURES.ELEMENT_INDEX_UINT32) ? 5125 : 5123;\n    } else if (!bufferType) {\n      bufferType = 5126;\n    }\n\n    opts.logicalType = logicalType;\n    opts.type = bufferType;\n    let defaultType = glArrayFromType(logicalType || bufferType || 5126);\n    this.shaderAttributes = {};\n    this.doublePrecision = doublePrecision;\n\n    if (doublePrecision && opts.fp64 === false) {\n      defaultType = Float32Array;\n    }\n\n    opts.bytesPerElement = defaultType.BYTES_PER_ELEMENT;\n    this.defaultType = defaultType;\n    this.value = null;\n    this.settings = opts;\n    this.state = {\n      externalBuffer: null,\n      bufferAccessor: opts,\n      allocatedValue: null,\n      constant: false\n    };\n    this._buffer = null;\n    this.setData(opts);\n  }\n\n  get buffer() {\n    if (!this._buffer) {\n      const {\n        isIndexed,\n        type\n      } = this.settings;\n      this._buffer = new Buffer(this.gl, {\n        id: this.id,\n        target: isIndexed ? 34963 : 34962,\n        accessor: {\n          type\n        }\n      });\n    }\n\n    return this._buffer;\n  }\n\n  get byteOffset() {\n    const accessor = this.getAccessor();\n\n    if (accessor.vertexOffset) {\n      return accessor.vertexOffset * getStride(accessor);\n    }\n\n    return 0;\n  }\n\n  delete() {\n    if (this._buffer) {\n      this._buffer.delete();\n\n      this._buffer = null;\n    }\n\n    typedArrayManager.release(this.state.allocatedValue);\n  }\n\n  getShaderAttributes(id, options) {\n    if (this.doublePrecision) {\n      const shaderAttributes = {};\n      const isBuffer64Bit = this.value instanceof Float64Array;\n      const doubleShaderAttributeDefs = resolveDoublePrecisionShaderAttributes(this.getAccessor(), options || {});\n      shaderAttributes[id] = new ShaderAttribute(this, doubleShaderAttributeDefs.high);\n      shaderAttributes[\"\".concat(id, \"64Low\")] = isBuffer64Bit ? new ShaderAttribute(this, doubleShaderAttributeDefs.low) : new Float32Array(this.size);\n      return shaderAttributes;\n    }\n\n    if (options) {\n      const shaderAttributeDef = resolveShaderAttribute(this.getAccessor(), options);\n      return {\n        [id]: new ShaderAttribute(this, shaderAttributeDef)\n      };\n    }\n\n    return {\n      [id]: this\n    };\n  }\n\n  getBuffer() {\n    if (this.state.constant) {\n      return null;\n    }\n\n    return this.state.externalBuffer || this._buffer;\n  }\n\n  getValue() {\n    if (this.state.constant) {\n      return this.value;\n    }\n\n    return [this.getBuffer(), this.getAccessor()];\n  }\n\n  getAccessor() {\n    return this.state.bufferAccessor;\n  }\n\n  setData(opts) {\n    const {\n      state\n    } = this;\n\n    if (ArrayBuffer.isView(opts)) {\n      opts = {\n        value: opts\n      };\n    } else if (opts instanceof Buffer) {\n      opts = {\n        buffer: opts\n      };\n    }\n\n    const accessor = { ...this.settings,\n      ...opts\n    };\n    state.bufferAccessor = accessor;\n\n    if (opts.constant) {\n      let value = opts.value;\n      value = this._normalizeValue(value, [], 0);\n\n      if (this.settings.normalized) {\n        value = this._normalizeConstant(value);\n      }\n\n      const hasChanged = !state.constant || !this._areValuesEqual(value, this.value);\n\n      if (!hasChanged) {\n        return false;\n      }\n\n      state.externalBuffer = null;\n      state.constant = true;\n      this.value = value;\n    } else if (opts.buffer) {\n      const buffer = opts.buffer;\n      state.externalBuffer = buffer;\n      state.constant = false;\n      this.value = opts.value;\n      const isBuffer64Bit = opts.value instanceof Float64Array;\n      accessor.type = opts.type || buffer.accessor.type;\n      accessor.bytesPerElement = buffer.accessor.BYTES_PER_ELEMENT * (isBuffer64Bit ? 2 : 1);\n      accessor.stride = getStride(accessor);\n    } else if (opts.value) {\n      this._checkExternalBuffer(opts);\n\n      let value = opts.value;\n      state.externalBuffer = null;\n      state.constant = false;\n      this.value = value;\n      accessor.bytesPerElement = value.BYTES_PER_ELEMENT;\n      accessor.stride = getStride(accessor);\n      const {\n        buffer,\n        byteOffset\n      } = this;\n\n      if (this.doublePrecision && value instanceof Float64Array) {\n        value = toDoublePrecisionArray(value, accessor);\n      }\n\n      const requiredBufferSize = value.byteLength + byteOffset + accessor.stride * 2;\n\n      if (buffer.byteLength < requiredBufferSize) {\n        buffer.reallocate(requiredBufferSize);\n      }\n\n      buffer.setAccessor(null);\n      buffer.subData({\n        data: value,\n        offset: byteOffset\n      });\n      accessor.type = opts.type || buffer.accessor.type;\n    }\n\n    return true;\n  }\n\n  updateSubBuffer(opts = {}) {\n    const {\n      value\n    } = this;\n    const {\n      startOffset = 0,\n      endOffset\n    } = opts;\n    this.buffer.subData({\n      data: this.doublePrecision && value instanceof Float64Array ? toDoublePrecisionArray(value, {\n        size: this.size,\n        startIndex: startOffset,\n        endIndex: endOffset\n      }) : value.subarray(startOffset, endOffset),\n      offset: startOffset * value.BYTES_PER_ELEMENT + this.byteOffset\n    });\n  }\n\n  allocate({\n    numInstances,\n    copy = false\n  }) {\n    const {\n      state\n    } = this;\n    const oldValue = state.allocatedValue;\n    const value = typedArrayManager.allocate(oldValue, numInstances + 1, {\n      size: this.size,\n      type: this.defaultType,\n      copy\n    });\n    this.value = value;\n    const {\n      buffer,\n      byteOffset\n    } = this;\n\n    if (buffer.byteLength < value.byteLength + byteOffset) {\n      buffer.reallocate(value.byteLength + byteOffset);\n\n      if (copy && oldValue) {\n        buffer.subData({\n          data: oldValue instanceof Float64Array ? toDoublePrecisionArray(oldValue, this) : oldValue,\n          offset: byteOffset\n        });\n      }\n    }\n\n    state.allocatedValue = value;\n    state.constant = false;\n    state.externalBuffer = null;\n    state.bufferAccessor = this.settings;\n    return true;\n  }\n\n  _checkExternalBuffer(opts) {\n    const {\n      value\n    } = opts;\n\n    if (!opts.constant && value) {\n      const ArrayType = this.defaultType;\n      let illegalArrayType = false;\n\n      if (this.doublePrecision) {\n        illegalArrayType = value.BYTES_PER_ELEMENT < 4;\n      }\n\n      if (illegalArrayType) {\n        throw new Error(\"Attribute \".concat(this.id, \" does not support \").concat(value.constructor.name));\n      }\n\n      if (!(value instanceof ArrayType) && this.settings.normalized && !('normalized' in opts)) {\n        log.warn(\"Attribute \".concat(this.id, \" is normalized\"))();\n      }\n    }\n  }\n\n  _normalizeConstant(value) {\n    switch (this.settings.type) {\n      case 5120:\n        return new Float32Array(value).map(x => (x + 128) / 255 * 2 - 1);\n\n      case 5122:\n        return new Float32Array(value).map(x => (x + 32768) / 65535 * 2 - 1);\n\n      case 5121:\n        return new Float32Array(value).map(x => x / 255);\n\n      case 5123:\n        return new Float32Array(value).map(x => x / 65535);\n\n      default:\n        return value;\n    }\n  }\n\n  _normalizeValue(value, out, start) {\n    const {\n      defaultValue,\n      size\n    } = this.settings;\n\n    if (Number.isFinite(value)) {\n      out[start] = value;\n      return out;\n    }\n\n    if (!value) {\n      out[start] = defaultValue[0];\n      return out;\n    }\n\n    switch (size) {\n      case 4:\n        out[start + 3] = Number.isFinite(value[3]) ? value[3] : defaultValue[3];\n\n      case 3:\n        out[start + 2] = Number.isFinite(value[2]) ? value[2] : defaultValue[2];\n\n      case 2:\n        out[start + 1] = Number.isFinite(value[1]) ? value[1] : defaultValue[1];\n\n      case 1:\n        out[start + 0] = Number.isFinite(value[0]) ? value[0] : defaultValue[0];\n        break;\n\n      default:\n        let i = size;\n\n        while (--i >= 0) {\n          out[start + i] = Number.isFinite(value[i]) ? value[i] : defaultValue[i];\n        }\n\n    }\n\n    return out;\n  }\n\n  _areValuesEqual(value1, value2) {\n    if (!value1 || !value2) {\n      return false;\n    }\n\n    const {\n      size\n    } = this;\n\n    for (let i = 0; i < size; i++) {\n      if (value1[i] !== value2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n}\n//# sourceMappingURL=data-column.js.map","const EMPTY_ARRAY = [];\nconst placeholderArray = [];\nexport function createIterable(data, startRow = 0, endRow = Infinity) {\n  let iterable = EMPTY_ARRAY;\n  const objectInfo = {\n    index: -1,\n    data,\n    target: []\n  };\n\n  if (!data) {\n    iterable = EMPTY_ARRAY;\n  } else if (typeof data[Symbol.iterator] === 'function') {\n    iterable = data;\n  } else if (data.length > 0) {\n    placeholderArray.length = data.length;\n    iterable = placeholderArray;\n  }\n\n  if (startRow > 0 || Number.isFinite(endRow)) {\n    iterable = (Array.isArray(iterable) ? iterable : Array.from(iterable)).slice(startRow, endRow);\n    objectInfo.index = startRow - 1;\n  }\n\n  return {\n    iterable,\n    objectInfo\n  };\n}\nexport function isAsyncIterable(data) {\n  return data && data[Symbol.asyncIterator];\n}\nexport function getAccessorFromBuffer(typedArray, {\n  size,\n  stride,\n  offset,\n  startIndices,\n  nested\n}) {\n  const bytesPerElement = typedArray.BYTES_PER_ELEMENT;\n  const elementStride = stride ? stride / bytesPerElement : size;\n  const elementOffset = offset ? offset / bytesPerElement : 0;\n  const vertexCount = Math.floor((typedArray.length - elementOffset) / elementStride);\n  return (_, {\n    index,\n    target\n  }) => {\n    if (!startIndices) {\n      const sourceIndex = index * elementStride + elementOffset;\n\n      for (let j = 0; j < size; j++) {\n        target[j] = typedArray[sourceIndex + j];\n      }\n\n      return target;\n    }\n\n    const startIndex = startIndices[index];\n    const endIndex = startIndices[index + 1] || vertexCount;\n    let result;\n\n    if (nested) {\n      result = new Array(endIndex - startIndex);\n\n      for (let i = startIndex; i < endIndex; i++) {\n        const sourceIndex = i * elementStride + elementOffset;\n        target = new Array(size);\n\n        for (let j = 0; j < size; j++) {\n          target[j] = typedArray[sourceIndex + j];\n        }\n\n        result[i - startIndex] = target;\n      }\n    } else if (elementStride === size) {\n      result = typedArray.subarray(startIndex * size + elementOffset, endIndex * size + elementOffset);\n    } else {\n      result = new typedArray.constructor((endIndex - startIndex) * size);\n      let targetIndex = 0;\n\n      for (let i = startIndex; i < endIndex; i++) {\n        const sourceIndex = i * elementStride + elementOffset;\n\n        for (let j = 0; j < size; j++) {\n          result[targetIndex++] = typedArray[sourceIndex + j];\n        }\n      }\n    }\n\n    return result;\n  };\n}\n//# sourceMappingURL=iterable-utils.js.map","export const EMPTY = [];\nexport const FULL = [[0, Infinity]];\nexport function add(rangeList, range) {\n  if (rangeList === FULL) {\n    return rangeList;\n  }\n\n  if (range[0] < 0) {\n    range[0] = 0;\n  }\n\n  if (range[0] >= range[1]) {\n    return rangeList;\n  }\n\n  const newRangeList = [];\n  const len = rangeList.length;\n  let insertPosition = 0;\n\n  for (let i = 0; i < len; i++) {\n    const range0 = rangeList[i];\n\n    if (range0[1] < range[0]) {\n      newRangeList.push(range0);\n      insertPosition = i + 1;\n    } else if (range0[0] > range[1]) {\n      newRangeList.push(range0);\n    } else {\n      range = [Math.min(range0[0], range[0]), Math.max(range0[1], range[1])];\n    }\n  }\n\n  newRangeList.splice(insertPosition, 0, range);\n  return newRangeList;\n}\n//# sourceMappingURL=range.js.map","function padArrayChunk({\n  source,\n  target,\n  start = 0,\n  end,\n  size,\n  getData\n}) {\n  end = end || target.length;\n  const sourceLength = source.length;\n  const targetLength = end - start;\n\n  if (sourceLength > targetLength) {\n    target.set(source.subarray(0, targetLength), start);\n    return;\n  }\n\n  target.set(source, start);\n\n  if (!getData) {\n    return;\n  }\n\n  let i = sourceLength;\n\n  while (i < targetLength) {\n    const datum = getData(i, source);\n\n    for (let j = 0; j < size; j++) {\n      target[start + i] = datum[j] || 0;\n      i++;\n    }\n  }\n}\n\nexport function padArray({\n  source,\n  target,\n  size,\n  getData,\n  sourceStartIndices,\n  targetStartIndices\n}) {\n  if (!Array.isArray(targetStartIndices)) {\n    padArrayChunk({\n      source,\n      target,\n      size,\n      getData\n    });\n    return target;\n  }\n\n  let sourceIndex = 0;\n  let targetIndex = 0;\n\n  const getChunkData = getData && ((i, chunk) => getData(i + targetIndex, chunk));\n\n  const n = Math.min(sourceStartIndices.length, targetStartIndices.length);\n\n  for (let i = 1; i < n; i++) {\n    const nextSourceIndex = sourceStartIndices[i] * size;\n    const nextTargetIndex = targetStartIndices[i] * size;\n    padArrayChunk({\n      source: source.subarray(sourceIndex, nextSourceIndex),\n      target,\n      start: targetIndex,\n      end: nextTargetIndex,\n      size,\n      getData: getChunkData\n    });\n    sourceIndex = nextSourceIndex;\n    targetIndex = nextTargetIndex;\n  }\n\n  if (targetIndex < target.length) {\n    padArrayChunk({\n      source: [],\n      target,\n      start: targetIndex,\n      size,\n      getData: getChunkData\n    });\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils.js.map","import { padArray } from '../../utils/array-utils';\nconst DEFAULT_TRANSITION_SETTINGS = {\n  interpolation: {\n    duration: 0,\n    easing: t => t\n  },\n  spring: {\n    stiffness: 0.05,\n    damping: 0.5\n  }\n};\nexport function normalizeTransitionSettings(userSettings, layerSettings) {\n  if (!userSettings) {\n    return null;\n  }\n\n  if (Number.isFinite(userSettings)) {\n    userSettings = {\n      duration: userSettings\n    };\n  }\n\n  userSettings.type = userSettings.type || 'interpolation';\n  return { ...DEFAULT_TRANSITION_SETTINGS[userSettings.type],\n    ...layerSettings,\n    ...userSettings\n  };\n}\nexport function getSourceBufferAttribute(gl, attribute) {\n  const buffer = attribute.getBuffer();\n\n  if (buffer) {\n    return [attribute.getBuffer(), {\n      divisor: 0,\n      size: attribute.size,\n      normalized: attribute.settings.normalized\n    }];\n  }\n\n  return attribute.value;\n}\nexport function getAttributeTypeFromSize(size) {\n  switch (size) {\n    case 1:\n      return 'float';\n\n    case 2:\n      return 'vec2';\n\n    case 3:\n      return 'vec3';\n\n    case 4:\n      return 'vec4';\n\n    default:\n      throw new Error(\"No defined attribute type for size \\\"\".concat(size, \"\\\"\"));\n  }\n}\nexport function cycleBuffers(buffers) {\n  buffers.push(buffers.shift());\n}\nexport function getAttributeBufferLength(attribute, numInstances) {\n  const {\n    doublePrecision,\n    settings,\n    value,\n    size\n  } = attribute;\n  const multiplier = doublePrecision && value instanceof Float64Array ? 2 : 1;\n  return (settings.noAlloc ? value.length : numInstances * size) * multiplier;\n}\nexport function padBuffer({\n  buffer,\n  numInstances,\n  attribute,\n  fromLength,\n  fromStartIndices,\n  getData = x => x\n}) {\n  const precisionMultiplier = attribute.doublePrecision && attribute.value instanceof Float64Array ? 2 : 1;\n  const size = attribute.size * precisionMultiplier;\n  const byteOffset = attribute.byteOffset;\n  const toStartIndices = attribute.startIndices;\n  const hasStartIndices = fromStartIndices && toStartIndices;\n  const toLength = getAttributeBufferLength(attribute, numInstances);\n  const isConstant = attribute.state.constant;\n\n  if (!hasStartIndices && fromLength >= toLength) {\n    return;\n  }\n\n  const toData = isConstant ? attribute.value : attribute.getBuffer().getData({\n    srcByteOffset: byteOffset\n  });\n\n  if (attribute.settings.normalized && !isConstant) {\n    const getter = getData;\n\n    getData = (value, chunk) => attribute._normalizeConstant(getter(value, chunk));\n  }\n\n  const getMissingData = isConstant ? (i, chunk) => getData(toData, chunk) : (i, chunk) => getData(toData.subarray(i, i + size), chunk);\n  const source = buffer.getData({\n    length: fromLength\n  });\n  const data = new Float32Array(toLength);\n  padArray({\n    source,\n    target: data,\n    sourceStartIndices: fromStartIndices,\n    targetStartIndices: toStartIndices,\n    size,\n    getData: getMissingData\n  });\n\n  if (buffer.byteLength < data.byteLength + byteOffset) {\n    buffer.reallocate(data.byteLength + byteOffset);\n  }\n\n  buffer.subData({\n    data,\n    offset: byteOffset\n  });\n}\n//# sourceMappingURL=attribute-transition-utils.js.map","import DataColumn from './data-column';\nimport assert from '../../utils/assert';\nimport { createIterable, getAccessorFromBuffer } from '../../utils/iterable-utils';\nimport { fillArray } from '../../utils/flatten';\nimport * as range from '../../utils/range';\nimport { normalizeTransitionSettings } from './attribute-transition-utils';\nexport default class Attribute extends DataColumn {\n  constructor(gl, opts = {}) {\n    super(gl, opts);\n    const {\n      transition = false,\n      noAlloc = false,\n      update = null,\n      accessor = null,\n      transform = null,\n      startIndices = null\n    } = opts;\n    Object.assign(this.settings, {\n      transition,\n      noAlloc,\n      update: update || accessor && this._autoUpdater,\n      accessor,\n      transform\n    });\n    Object.assign(this.state, {\n      lastExternalBuffer: null,\n      binaryValue: null,\n      binaryAccessor: null,\n      needsUpdate: true,\n      needsRedraw: false,\n      updateRanges: range.FULL,\n      startIndices\n    });\n    Object.seal(this.settings);\n    Object.seal(this.state);\n\n    this._validateAttributeUpdaters();\n  }\n\n  get startIndices() {\n    return this.state.startIndices;\n  }\n\n  set startIndices(layout) {\n    this.state.startIndices = layout;\n  }\n\n  needsUpdate() {\n    return this.state.needsUpdate;\n  }\n\n  needsRedraw({\n    clearChangedFlags = false\n  } = {}) {\n    const needsRedraw = this.state.needsRedraw;\n    this.state.needsRedraw = needsRedraw && !clearChangedFlags;\n    return needsRedraw;\n  }\n\n  getUpdateTriggers() {\n    const {\n      accessor\n    } = this.settings;\n    return [this.id].concat(typeof accessor !== 'function' && accessor || []);\n  }\n\n  supportsTransition() {\n    return Boolean(this.settings.transition);\n  }\n\n  getTransitionSetting(opts) {\n    if (!opts || !this.supportsTransition()) {\n      return null;\n    }\n\n    const {\n      accessor\n    } = this.settings;\n    const layerSettings = this.settings.transition;\n    const userSettings = Array.isArray(accessor) ? opts[accessor.find(a => opts[a])] : opts[accessor];\n    return normalizeTransitionSettings(userSettings, layerSettings);\n  }\n\n  setNeedsUpdate(reason = this.id, dataRange) {\n    this.state.needsUpdate = this.state.needsUpdate || reason;\n    this.setNeedsRedraw(reason);\n\n    if (dataRange) {\n      const {\n        startRow = 0,\n        endRow = Infinity\n      } = dataRange;\n      this.state.updateRanges = range.add(this.state.updateRanges, [startRow, endRow]);\n    } else {\n      this.state.updateRanges = range.FULL;\n    }\n  }\n\n  clearNeedsUpdate() {\n    this.state.needsUpdate = false;\n    this.state.updateRanges = range.EMPTY;\n  }\n\n  setNeedsRedraw(reason = this.id) {\n    this.state.needsRedraw = this.state.needsRedraw || reason;\n  }\n\n  update(opts) {\n    this.setData(opts);\n  }\n\n  allocate(numInstances) {\n    const {\n      state,\n      settings\n    } = this;\n\n    if (settings.noAlloc) {\n      return false;\n    }\n\n    if (settings.update) {\n      super.allocate({\n        numInstances,\n        copy: state.updateRanges !== range.FULL\n      });\n      return true;\n    }\n\n    return false;\n  }\n\n  updateBuffer({\n    numInstances,\n    data,\n    props,\n    context\n  }) {\n    if (!this.needsUpdate()) {\n      return false;\n    }\n\n    const {\n      state: {\n        updateRanges\n      },\n      settings: {\n        update,\n        noAlloc\n      }\n    } = this;\n    let updated = true;\n\n    if (update) {\n      for (const [startRow, endRow] of updateRanges) {\n        update.call(context, this, {\n          data,\n          startRow,\n          endRow,\n          props,\n          numInstances\n        });\n      }\n\n      if (!this.value) {} else if (this.constant || this.buffer.byteLength < this.value.byteLength + this.byteOffset) {\n        this.setData({\n          value: this.value,\n          constant: this.constant\n        });\n        this.constant = false;\n      } else {\n        for (const [startRow, endRow] of updateRanges) {\n          const startOffset = Number.isFinite(startRow) ? this.getVertexOffset(startRow) : 0;\n          const endOffset = Number.isFinite(endRow) ? this.getVertexOffset(endRow) : noAlloc || !Number.isFinite(numInstances) ? this.value.length : numInstances * this.size;\n          super.updateSubBuffer({\n            startOffset,\n            endOffset\n          });\n        }\n      }\n\n      this._checkAttributeArray();\n    } else {\n      updated = false;\n    }\n\n    this.clearNeedsUpdate();\n    this.setNeedsRedraw();\n    return updated;\n  }\n\n  setConstantValue(value) {\n    if (value === undefined || typeof value === 'function') {\n      return false;\n    }\n\n    const hasChanged = this.setData({\n      constant: true,\n      value\n    });\n\n    if (hasChanged) {\n      this.setNeedsRedraw();\n    }\n\n    this.clearNeedsUpdate();\n    return true;\n  }\n\n  setExternalBuffer(buffer) {\n    const {\n      state\n    } = this;\n\n    if (!buffer) {\n      state.lastExternalBuffer = null;\n      return false;\n    }\n\n    this.clearNeedsUpdate();\n\n    if (state.lastExternalBuffer === buffer) {\n      return true;\n    }\n\n    state.lastExternalBuffer = buffer;\n    this.setNeedsRedraw();\n    this.setData(buffer);\n    return true;\n  }\n\n  setBinaryValue(buffer, startIndices = null) {\n    const {\n      state,\n      settings\n    } = this;\n\n    if (!buffer) {\n      state.binaryValue = null;\n      state.binaryAccessor = null;\n      return false;\n    }\n\n    if (settings.noAlloc) {\n      return false;\n    }\n\n    if (state.binaryValue === buffer) {\n      this.clearNeedsUpdate();\n      return true;\n    }\n\n    state.binaryValue = buffer;\n    this.setNeedsRedraw();\n\n    if (ArrayBuffer.isView(buffer)) {\n      buffer = {\n        value: buffer\n      };\n    }\n\n    const needsUpdate = settings.transform || startIndices !== this.startIndices;\n\n    if (needsUpdate) {\n      assert(ArrayBuffer.isView(buffer.value), \"invalid \".concat(settings.accessor));\n      const needsNormalize = buffer.size && buffer.size !== this.size;\n      state.binaryAccessor = getAccessorFromBuffer(buffer.value, {\n        size: buffer.size || this.size,\n        stride: buffer.stride,\n        offset: buffer.offset,\n        startIndices,\n        nested: needsNormalize\n      });\n      return false;\n    }\n\n    this.clearNeedsUpdate();\n    this.setData(buffer);\n    return true;\n  }\n\n  getVertexOffset(row) {\n    const {\n      startIndices\n    } = this;\n    const vertexIndex = startIndices ? startIndices[row] : row;\n    return vertexIndex * this.size;\n  }\n\n  getShaderAttributes() {\n    const shaderAttributeDefs = this.settings.shaderAttributes || {\n      [this.id]: null\n    };\n    const shaderAttributes = {};\n\n    for (const shaderAttributeName in shaderAttributeDefs) {\n      Object.assign(shaderAttributes, super.getShaderAttributes(shaderAttributeName, shaderAttributeDefs[shaderAttributeName]));\n    }\n\n    return shaderAttributes;\n  }\n\n  _autoUpdater(attribute, {\n    data,\n    startRow,\n    endRow,\n    props,\n    numInstances\n  }) {\n    if (attribute.constant) {\n      return;\n    }\n\n    const {\n      settings,\n      state,\n      value,\n      size,\n      startIndices\n    } = attribute;\n    const {\n      accessor,\n      transform\n    } = settings;\n    const accessorFunc = state.binaryAccessor || (typeof accessor === 'function' ? accessor : props[accessor]);\n    assert(typeof accessorFunc === 'function', \"accessor \\\"\".concat(accessor, \"\\\" is not a function\"));\n    let i = attribute.getVertexOffset(startRow);\n    const {\n      iterable,\n      objectInfo\n    } = createIterable(data, startRow, endRow);\n\n    for (const object of iterable) {\n      objectInfo.index++;\n      let objectValue = accessorFunc(object, objectInfo);\n\n      if (transform) {\n        objectValue = transform.call(this, objectValue);\n      }\n\n      if (startIndices) {\n        const numVertices = (objectInfo.index < startIndices.length - 1 ? startIndices[objectInfo.index + 1] : numInstances) - startIndices[objectInfo.index];\n\n        if (objectValue && Array.isArray(objectValue[0])) {\n          let startIndex = i;\n\n          for (const item of objectValue) {\n            attribute._normalizeValue(item, value, startIndex);\n\n            startIndex += size;\n          }\n        } else if (objectValue && objectValue.length > size) {\n          value.set(objectValue, i);\n        } else {\n          attribute._normalizeValue(objectValue, objectInfo.target, 0);\n\n          fillArray({\n            target: value,\n            source: objectInfo.target,\n            start: i,\n            count: numVertices\n          });\n        }\n\n        i += numVertices * size;\n      } else {\n        attribute._normalizeValue(objectValue, value, i);\n\n        i += size;\n      }\n    }\n  }\n\n  _validateAttributeUpdaters() {\n    const {\n      settings\n    } = this;\n    const hasUpdater = settings.noAlloc || typeof settings.update === 'function';\n\n    if (!hasUpdater) {\n      throw new Error(\"Attribute \".concat(this.id, \" missing update or accessor\"));\n    }\n  }\n\n  _checkAttributeArray() {\n    const {\n      value\n    } = this;\n    const limit = Math.min(4, this.size);\n\n    if (value && value.length >= limit) {\n      let valid = true;\n\n      switch (limit) {\n        case 4:\n          valid = valid && Number.isFinite(value[3]);\n\n        case 3:\n          valid = valid && Number.isFinite(value[2]);\n\n        case 2:\n          valid = valid && Number.isFinite(value[1]);\n\n        case 1:\n          valid = valid && Number.isFinite(value[0]);\n          break;\n\n        default:\n          valid = false;\n      }\n\n      if (!valid) {\n        throw new Error(\"Illegal attribute generated for \".concat(this.id));\n      }\n    }\n  }\n\n}\n//# sourceMappingURL=attribute.js.map","import { assert } from '../utils';\nconst FS100 = `void main() {gl_FragColor = vec4(0);}`;\nconst FS_GLES = `\\\nout vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}`;\nconst FS300 = `#version 300 es\\n${FS_GLES}`;\nexport function getQualifierDetails(line, qualifiers) {\n  qualifiers = Array.isArray(qualifiers) ? qualifiers : [qualifiers];\n  const words = line.replace(/^\\s+/, '').split(/\\s+/);\n  const [qualifier, type, definition] = words;\n\n  if (!qualifiers.includes(qualifier) || !type || !definition) {\n    return null;\n  }\n\n  const name = definition.split(';')[0];\n  return {\n    qualifier,\n    type,\n    name\n  };\n}\nexport function getPassthroughFS(options = {}) {\n  const {\n    version = 100,\n    input,\n    inputType,\n    output\n  } = options;\n\n  if (!input) {\n    if (version === 300) {\n      return FS300;\n    } else if (version > 300) {\n      return `#version ${version}\\n${FS_GLES}`;\n    }\n\n    return FS100;\n  }\n\n  const outputValue = convertToVec4(input, inputType);\n\n  if (version >= 300) {\n    return `\\\n#version ${version} ${version === 300 ? 'es' : ''}\nin ${inputType} ${input};\nout vec4 ${output};\nvoid main() {\n  ${output} = ${outputValue};\n}`;\n  }\n\n  return `\\\nvarying ${inputType} ${input};\nvoid main() {\n  gl_FragColor = ${outputValue};\n}`;\n}\nexport function typeToChannelSuffix(type) {\n  switch (type) {\n    case 'float':\n      return 'x';\n\n    case 'vec2':\n      return 'xy';\n\n    case 'vec3':\n      return 'xyz';\n\n    case 'vec4':\n      return 'xyzw';\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function typeToChannelCount(type) {\n  switch (type) {\n    case 'float':\n      return 1;\n\n    case 'vec2':\n      return 2;\n\n    case 'vec3':\n      return 3;\n\n    case 'vec4':\n      return 4;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\nexport function convertToVec4(variable, type) {\n  switch (type) {\n    case 'float':\n      return `vec4(${variable}, 0.0, 0.0, 1.0)`;\n\n    case 'vec2':\n      return `vec4(${variable}, 0.0, 1.0)`;\n\n    case 'vec3':\n      return `vec4(${variable}, 1.0)`;\n\n    case 'vec4':\n      return variable;\n\n    default:\n      assert(false);\n      return null;\n  }\n}\n//# sourceMappingURL=shader-utils.js.map","import { isWebGL2, assertWebGL2Context, log } from '@luma.gl/gltools';\nimport Resource from './resource';\nimport Buffer from './buffer';\nimport { isObjectEmpty } from '../utils/utils';\nexport default class TransformFeedback extends Resource {\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl, props = {}) {\n    assertWebGL2Context(gl);\n    super(gl, props);\n    this.initialize(props);\n    this.stubRemovedMethods('TransformFeedback', 'v6.0', ['pause', 'resume']);\n    Object.seal(this);\n  }\n\n  initialize(props = {}) {\n    this.buffers = {};\n    this.unused = {};\n    this.configuration = null;\n    this.bindOnUse = true;\n\n    if (!isObjectEmpty(this.buffers)) {\n      this.bind(() => this._unbindBuffers());\n    }\n\n    this.setProps(props);\n    return this;\n  }\n\n  setProps(props) {\n    if ('program' in props) {\n      this.configuration = props.program && props.program.configuration;\n    }\n\n    if ('configuration' in props) {\n      this.configuration = props.configuration;\n    }\n\n    if ('bindOnUse' in props) {\n      props = props.bindOnUse;\n    }\n\n    if ('buffers' in props) {\n      this.setBuffers(props.buffers);\n    }\n  }\n\n  setBuffers(buffers = {}) {\n    this.bind(() => {\n      for (const bufferName in buffers) {\n        this.setBuffer(bufferName, buffers[bufferName]);\n      }\n    });\n    return this;\n  }\n\n  setBuffer(locationOrName, bufferOrParams) {\n    const location = this._getVaryingIndex(locationOrName);\n\n    const {\n      buffer,\n      byteSize,\n      byteOffset\n    } = this._getBufferParams(bufferOrParams);\n\n    if (location < 0) {\n      this.unused[locationOrName] = buffer;\n      log.warn(() => `${this.id} unused varying buffer ${locationOrName}`)();\n      return this;\n    }\n\n    this.buffers[location] = bufferOrParams;\n\n    if (!this.bindOnUse) {\n      this._bindBuffer(location, buffer, byteOffset, byteSize);\n    }\n\n    return this;\n  }\n\n  begin(primitiveMode = 0) {\n    this.gl.bindTransformFeedback(36386, this.handle);\n\n    this._bindBuffers();\n\n    this.gl.beginTransformFeedback(primitiveMode);\n    return this;\n  }\n\n  end() {\n    this.gl.endTransformFeedback();\n\n    this._unbindBuffers();\n\n    this.gl.bindTransformFeedback(36386, null);\n    return this;\n  }\n\n  _getBufferParams(bufferOrParams) {\n    let byteOffset;\n    let byteSize;\n    let buffer;\n\n    if (bufferOrParams instanceof Buffer === false) {\n      buffer = bufferOrParams.buffer;\n      byteSize = bufferOrParams.byteSize;\n      byteOffset = bufferOrParams.byteOffset;\n    } else {\n      buffer = bufferOrParams;\n    }\n\n    if (byteOffset !== undefined || byteSize !== undefined) {\n      byteOffset = byteOffset || 0;\n      byteSize = byteSize || buffer.byteLength - byteOffset;\n    }\n\n    return {\n      buffer,\n      byteOffset,\n      byteSize\n    };\n  }\n\n  _getVaryingInfo(locationOrName) {\n    return this.configuration && this.configuration.getVaryingInfo(locationOrName);\n  }\n\n  _getVaryingIndex(locationOrName) {\n    if (this.configuration) {\n      return this.configuration.getVaryingInfo(locationOrName).location;\n    }\n\n    const location = Number(locationOrName);\n    return Number.isFinite(location) ? location : -1;\n  }\n\n  _bindBuffers() {\n    if (this.bindOnUse) {\n      for (const bufferIndex in this.buffers) {\n        const {\n          buffer,\n          byteSize,\n          byteOffset\n        } = this._getBufferParams(this.buffers[bufferIndex]);\n\n        this._bindBuffer(bufferIndex, buffer, byteOffset, byteSize);\n      }\n    }\n  }\n\n  _unbindBuffers() {\n    if (this.bindOnUse) {\n      for (const bufferIndex in this.buffers) {\n        this._bindBuffer(bufferIndex, null);\n      }\n    }\n  }\n\n  _bindBuffer(index, buffer, byteOffset = 0, byteSize) {\n    const handle = buffer && buffer.handle;\n\n    if (!handle || byteSize === undefined) {\n      this.gl.bindBufferBase(35982, index, handle);\n    } else {\n      this.gl.bindBufferRange(35982, index, handle, byteOffset, byteSize);\n    }\n\n    return this;\n  }\n\n  _createHandle() {\n    return this.gl.createTransformFeedback();\n  }\n\n  _deleteHandle() {\n    this.gl.deleteTransformFeedback(this.handle);\n  }\n\n  _bindHandle(handle) {\n    this.gl.bindTransformFeedback(36386, this.handle);\n  }\n\n}\n//# sourceMappingURL=transform-feedback.js.map","import { isWebGL2 } from '@luma.gl/gltools';\nimport { Buffer, TransformFeedback } from '@luma.gl/webgl';\nimport { assert } from '@luma.gl/webgl';\nexport default class BufferTransform {\n  constructor(gl, props = {}) {\n    this.gl = gl;\n    this.currentIndex = 0;\n    this.feedbackMap = {};\n    this.varyings = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  setupResources(opts) {\n    for (const binding of this.bindings) {\n      this._setupTransformFeedback(binding, opts);\n    }\n  }\n\n  updateModelProps(props = {}) {\n    const {\n      varyings\n    } = this;\n\n    if (varyings.length > 0) {\n      props = Object.assign({}, props, {\n        varyings\n      });\n    }\n\n    return props;\n  }\n\n  getDrawOptions(opts = {}) {\n    const binding = this.bindings[this.currentIndex];\n    const {\n      sourceBuffers,\n      transformFeedback\n    } = binding;\n    const attributes = Object.assign({}, sourceBuffers, opts.attributes);\n    return {\n      attributes,\n      transformFeedback\n    };\n  }\n\n  swap() {\n    if (this.feedbackMap) {\n      this.currentIndex = this._getNextIndex();\n      return true;\n    }\n\n    return false;\n  }\n\n  update(opts = {}) {\n    this._setupBuffers(opts);\n  }\n\n  getBuffer(varyingName) {\n    const {\n      feedbackBuffers\n    } = this.bindings[this.currentIndex];\n    const bufferOrParams = varyingName ? feedbackBuffers[varyingName] : null;\n\n    if (!bufferOrParams) {\n      return null;\n    }\n\n    return bufferOrParams instanceof Buffer ? bufferOrParams : bufferOrParams.buffer;\n  }\n\n  getData(options = {}) {\n    const {\n      varyingName\n    } = options;\n    const buffer = this.getBuffer(varyingName);\n\n    if (buffer) {\n      return buffer.getData();\n    }\n\n    return null;\n  }\n\n  delete() {\n    for (const name in this.resources) {\n      this.resources[name].delete();\n    }\n  }\n\n  _initialize(props = {}) {\n    this._setupBuffers(props);\n\n    this.varyings = props.varyings || Object.keys(this.bindings[this.currentIndex].feedbackBuffers);\n\n    if (this.varyings.length > 0) {\n      assert(isWebGL2(this.gl));\n    }\n  }\n\n  _getFeedbackBuffers(props) {\n    const {\n      sourceBuffers = {}\n    } = props;\n    const feedbackBuffers = {};\n\n    if (this.bindings[this.currentIndex]) {\n      Object.assign(feedbackBuffers, this.bindings[this.currentIndex].feedbackBuffers);\n    }\n\n    if (this.feedbackMap) {\n      for (const sourceName in this.feedbackMap) {\n        const feedbackName = this.feedbackMap[sourceName];\n\n        if (sourceName in sourceBuffers) {\n          feedbackBuffers[feedbackName] = sourceName;\n        }\n      }\n    }\n\n    Object.assign(feedbackBuffers, props.feedbackBuffers);\n\n    for (const bufferName in feedbackBuffers) {\n      const bufferOrRef = feedbackBuffers[bufferName];\n\n      if (typeof bufferOrRef === 'string') {\n        const sourceBuffer = sourceBuffers[bufferOrRef];\n        const {\n          byteLength,\n          usage,\n          accessor\n        } = sourceBuffer;\n        feedbackBuffers[bufferName] = this._createNewBuffer(bufferName, {\n          byteLength,\n          usage,\n          accessor\n        });\n      }\n    }\n\n    return feedbackBuffers;\n  }\n\n  _setupBuffers(props = {}) {\n    const {\n      sourceBuffers = null\n    } = props;\n    Object.assign(this.feedbackMap, props.feedbackMap);\n\n    const feedbackBuffers = this._getFeedbackBuffers(props);\n\n    this._updateBindings({\n      sourceBuffers,\n      feedbackBuffers\n    });\n  }\n\n  _setupTransformFeedback(binding, {\n    model\n  }) {\n    const {\n      program\n    } = model;\n    binding.transformFeedback = new TransformFeedback(this.gl, {\n      program,\n      buffers: binding.feedbackBuffers\n    });\n  }\n\n  _updateBindings(opts) {\n    this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n    if (this.feedbackMap) {\n      const {\n        sourceBuffers,\n        feedbackBuffers\n      } = this._swapBuffers(this.bindings[this.currentIndex]);\n\n      const nextIndex = this._getNextIndex();\n\n      this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n        sourceBuffers,\n        feedbackBuffers\n      });\n    }\n  }\n\n  _updateBinding(binding, opts) {\n    if (!binding) {\n      return {\n        sourceBuffers: Object.assign({}, opts.sourceBuffers),\n        feedbackBuffers: Object.assign({}, opts.feedbackBuffers)\n      };\n    }\n\n    Object.assign(binding.sourceBuffers, opts.sourceBuffers);\n    Object.assign(binding.feedbackBuffers, opts.feedbackBuffers);\n\n    if (binding.transformFeedback) {\n      binding.transformFeedback.setBuffers(binding.feedbackBuffers);\n    }\n\n    return binding;\n  }\n\n  _swapBuffers(opts) {\n    if (!this.feedbackMap) {\n      return null;\n    }\n\n    const sourceBuffers = Object.assign({}, opts.sourceBuffers);\n    const feedbackBuffers = Object.assign({}, opts.feedbackBuffers);\n\n    for (const srcName in this.feedbackMap) {\n      const dstName = this.feedbackMap[srcName];\n      sourceBuffers[srcName] = opts.feedbackBuffers[dstName];\n      feedbackBuffers[dstName] = opts.sourceBuffers[srcName];\n      assert(feedbackBuffers[dstName] instanceof Buffer);\n    }\n\n    return {\n      sourceBuffers,\n      feedbackBuffers\n    };\n  }\n\n  _createNewBuffer(name, opts) {\n    const buffer = new Buffer(this.gl, opts);\n\n    if (this.resources[name]) {\n      this.resources[name].delete();\n    }\n\n    this.resources[name] = buffer;\n    return buffer;\n  }\n\n  _getNextIndex() {\n    return (this.currentIndex + 1) % 2;\n  }\n\n}\n//# sourceMappingURL=buffer-transform.js.map","export default function getShaderVersion(source) {\n  let version = 100;\n  const words = source.match(/[^\\s]+/g);\n\n  if (words.length >= 2 && words[0] === '#version') {\n    const v = parseInt(words[1], 10);\n\n    if (Number.isFinite(v)) {\n      version = v;\n    }\n  }\n\n  return version;\n}\n//# sourceMappingURL=get-shader-version.js.map","const vs = `\\\nattribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n`;\nexport const transform = {\n  name: 'transform',\n  vs,\n  fs: null\n};\n//# sourceMappingURL=transform.js.map","import { assert } from '@luma.gl/webgl';\nimport { combineInjects, getQualifierDetails, typeToChannelSuffix } from '@luma.gl/shadertools';\nconst SAMPLER_UNIFORM_PREFIX = 'transform_uSampler_';\nconst SIZE_UNIFORM_PREFIX = 'transform_uSize_';\nconst VS_POS_VARIABLE = 'transform_position';\nexport function updateForTextures({\n  vs,\n  sourceTextureMap,\n  targetTextureVarying,\n  targetTexture\n}) {\n  const texAttributeNames = Object.keys(sourceTextureMap);\n  let sourceCount = texAttributeNames.length;\n  let targetTextureType = null;\n  const samplerTextureMap = {};\n  let updatedVs = vs;\n  let finalInject = {};\n\n  if (sourceCount > 0 || targetTextureVarying) {\n    const vsLines = updatedVs.split('\\n');\n    const updateVsLines = vsLines.slice();\n    vsLines.forEach((line, index, lines) => {\n      if (sourceCount > 0) {\n        const updated = processAttributeDefinition(line, sourceTextureMap);\n\n        if (updated) {\n          const {\n            updatedLine,\n            inject\n          } = updated;\n          updateVsLines[index] = updatedLine;\n          finalInject = combineInjects([finalInject, inject]);\n          Object.assign(samplerTextureMap, updated.samplerTextureMap);\n          sourceCount--;\n        }\n      }\n\n      if (targetTextureVarying && !targetTextureType) {\n        targetTextureType = getVaryingType(line, targetTextureVarying);\n      }\n    });\n\n    if (targetTextureVarying) {\n      assert(targetTexture);\n      const sizeName = `${SIZE_UNIFORM_PREFIX}${targetTextureVarying}`;\n      const uniformDeclaration = `uniform vec2 ${sizeName};\\n`;\n      const posInstructions = `\\\n     vec2 ${VS_POS_VARIABLE} = transform_getPos(${sizeName});\n     gl_Position = vec4(${VS_POS_VARIABLE}, 0, 1.);\\n`;\n      const inject = {\n        'vs:#decl': uniformDeclaration,\n        'vs:#main-start': posInstructions\n      };\n      finalInject = combineInjects([finalInject, inject]);\n    }\n\n    updatedVs = updateVsLines.join('\\n');\n  }\n\n  return {\n    vs: updatedVs,\n    targetTextureType,\n    inject: finalInject,\n    samplerTextureMap\n  };\n}\nexport function getSizeUniforms({\n  sourceTextureMap,\n  targetTextureVarying,\n  targetTexture\n}) {\n  const uniforms = {};\n  let width;\n  let height;\n\n  if (targetTextureVarying) {\n    ({\n      width,\n      height\n    } = targetTexture);\n    uniforms[`${SIZE_UNIFORM_PREFIX}${targetTextureVarying}`] = [width, height];\n  }\n\n  for (const textureName in sourceTextureMap) {\n    ({\n      width,\n      height\n    } = sourceTextureMap[textureName]);\n    uniforms[`${SIZE_UNIFORM_PREFIX}${textureName}`] = [width, height];\n  }\n\n  return uniforms;\n}\n\nfunction getAttributeDefinition(line) {\n  return getQualifierDetails(line, ['attribute', 'in']);\n}\n\nfunction getSamplerDeclerations(textureName) {\n  const samplerName = `${SAMPLER_UNIFORM_PREFIX}${textureName}`;\n  const sizeName = `${SIZE_UNIFORM_PREFIX}${textureName}`;\n  const uniformDeclerations = `\\\n  uniform sampler2D ${samplerName};\n  uniform vec2 ${sizeName};`;\n  return {\n    samplerName,\n    sizeName,\n    uniformDeclerations\n  };\n}\n\nexport function getVaryingType(line, varying) {\n  const qualaiferDetails = getQualifierDetails(line, ['varying', 'out']);\n\n  if (!qualaiferDetails) {\n    return null;\n  }\n\n  return qualaiferDetails.name === varying ? qualaiferDetails.type : null;\n}\nexport function processAttributeDefinition(line, textureMap) {\n  const samplerTextureMap = {};\n  const attributeData = getAttributeDefinition(line);\n\n  if (!attributeData) {\n    return null;\n  }\n\n  const {\n    type,\n    name\n  } = attributeData;\n\n  if (name && textureMap[name]) {\n    const updatedLine = `\\// ${line} => Replaced by Transform with a sampler`;\n    const {\n      samplerName,\n      sizeName,\n      uniformDeclerations\n    } = getSamplerDeclerations(name);\n    const channels = typeToChannelSuffix(type);\n    const sampleInstruction = `  ${type} ${name} = transform_getInput(${samplerName}, ${sizeName}).${channels};\\n`;\n    samplerTextureMap[samplerName] = name;\n    const inject = {\n      'vs:#decl': uniformDeclerations,\n      'vs:#main-start': sampleInstruction\n    };\n    return {\n      updatedLine,\n      inject,\n      samplerTextureMap\n    };\n  }\n\n  return null;\n}\n//# sourceMappingURL=transform-shader-utils.js.map","import { cloneTextureFrom, readPixelsToArray, getShaderVersion, Buffer, Texture2D, Framebuffer } from '@luma.gl/webgl';\nimport { _transform as transformModule, getPassthroughFS, typeToChannelCount, combineInjects } from '@luma.gl/shadertools';\nimport { updateForTextures, getSizeUniforms } from './transform-shader-utils';\nconst SRC_TEX_PARAMETER_OVERRIDES = {\n  [10241]: 9728,\n  [10240]: 9728,\n  [10242]: 33071,\n  [10243]: 33071\n};\nconst FS_OUTPUT_VARIABLE = 'transform_output';\nexport default class TextureTransform {\n  constructor(gl, props = {}) {\n    this.gl = gl;\n    this.id = this.currentIndex = 0;\n    this._swapTexture = null;\n    this.targetTextureVarying = null;\n    this.targetTextureType = null;\n    this.samplerTextureMap = null;\n    this.bindings = [];\n    this.resources = {};\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  updateModelProps(props = {}) {\n    const updatedModelProps = this._processVertexShader(props);\n\n    return Object.assign({}, props, updatedModelProps);\n  }\n\n  getDrawOptions(opts = {}) {\n    const {\n      sourceBuffers,\n      sourceTextures,\n      framebuffer,\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    const attributes = Object.assign({}, sourceBuffers, opts.attributes);\n    const uniforms = Object.assign({}, opts.uniforms);\n    const parameters = Object.assign({}, opts.parameters);\n    let discard = opts.discard;\n\n    if (this.hasSourceTextures || this.hasTargetTexture) {\n      attributes.transform_elementID = this.elementIDBuffer;\n\n      for (const sampler in this.samplerTextureMap) {\n        const textureName = this.samplerTextureMap[sampler];\n        uniforms[sampler] = sourceTextures[textureName];\n      }\n\n      this._setSourceTextureParameters();\n\n      const sizeUniforms = getSizeUniforms({\n        sourceTextureMap: sourceTextures,\n        targetTextureVarying: this.targetTextureVarying,\n        targetTexture\n      });\n      Object.assign(uniforms, sizeUniforms);\n    }\n\n    if (this.hasTargetTexture) {\n      discard = false;\n      parameters.viewport = [0, 0, framebuffer.width, framebuffer.height];\n    }\n\n    return {\n      attributes,\n      framebuffer,\n      uniforms,\n      discard,\n      parameters\n    };\n  }\n\n  swap() {\n    if (this._swapTexture) {\n      this.currentIndex = this._getNextIndex();\n      return true;\n    }\n\n    return false;\n  }\n\n  update(opts = {}) {\n    this._setupTextures(opts);\n  }\n\n  getTargetTexture() {\n    const {\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    return targetTexture;\n  }\n\n  getData({\n    packed = false\n  } = {}) {\n    const {\n      framebuffer\n    } = this.bindings[this.currentIndex];\n    const pixels = readPixelsToArray(framebuffer);\n\n    if (!packed) {\n      return pixels;\n    }\n\n    const ArrayType = pixels.constructor;\n    const channelCount = typeToChannelCount(this.targetTextureType);\n    const packedPixels = new ArrayType(pixels.length * channelCount / 4);\n    let packCount = 0;\n\n    for (let i = 0; i < pixels.length; i += 4) {\n      for (let j = 0; j < channelCount; j++) {\n        packedPixels[packCount++] = pixels[i + j];\n      }\n    }\n\n    return packedPixels;\n  }\n\n  getFramebuffer() {\n    const currentResources = this.bindings[this.currentIndex];\n    return currentResources.framebuffer;\n  }\n\n  delete() {\n    if (this.ownTexture) {\n      this.ownTexture.delete();\n    }\n\n    if (this.elementIDBuffer) {\n      this.elementIDBuffer.delete();\n    }\n  }\n\n  _initialize(props = {}) {\n    const {\n      _targetTextureVarying,\n      _swapTexture\n    } = props;\n    this._swapTexture = _swapTexture;\n    this.targetTextureVarying = _targetTextureVarying;\n    this.hasTargetTexture = _targetTextureVarying;\n\n    this._setupTextures(props);\n  }\n\n  _createTargetTexture(props) {\n    const {\n      sourceTextures,\n      textureOrReference\n    } = props;\n\n    if (textureOrReference instanceof Texture2D) {\n      return textureOrReference;\n    }\n\n    const refTexture = sourceTextures[textureOrReference];\n\n    if (!refTexture) {\n      return null;\n    }\n\n    this._targetRefTexName = textureOrReference;\n    return this._createNewTexture(refTexture);\n  }\n\n  _setupTextures(props = {}) {\n    const {\n      sourceBuffers,\n      _sourceTextures = {},\n      _targetTexture\n    } = props;\n\n    const targetTexture = this._createTargetTexture({\n      sourceTextures: _sourceTextures,\n      textureOrReference: _targetTexture\n    });\n\n    this.hasSourceTextures = this.hasSourceTextures || _sourceTextures && Object.keys(_sourceTextures).length > 0;\n\n    this._updateBindings({\n      sourceBuffers,\n      sourceTextures: _sourceTextures,\n      targetTexture\n    });\n\n    if ('elementCount' in props) {\n      this._updateElementIDBuffer(props.elementCount);\n    }\n  }\n\n  _updateElementIDBuffer(elementCount) {\n    if (typeof elementCount !== 'number' || this.elementCount >= elementCount) {\n      return;\n    }\n\n    const elementIds = new Float32Array(elementCount);\n    elementIds.forEach((_, index, array) => {\n      array[index] = index;\n    });\n\n    if (!this.elementIDBuffer) {\n      this.elementIDBuffer = new Buffer(this.gl, {\n        data: elementIds,\n        accessor: {\n          size: 1\n        }\n      });\n    } else {\n      this.elementIDBuffer.setData({\n        data: elementIds\n      });\n    }\n\n    this.elementCount = elementCount;\n  }\n\n  _updateBindings(opts) {\n    this.bindings[this.currentIndex] = this._updateBinding(this.bindings[this.currentIndex], opts);\n\n    if (this._swapTexture) {\n      const {\n        sourceTextures,\n        targetTexture\n      } = this._swapTextures(this.bindings[this.currentIndex]);\n\n      const nextIndex = this._getNextIndex();\n\n      this.bindings[nextIndex] = this._updateBinding(this.bindings[nextIndex], {\n        sourceTextures,\n        targetTexture\n      });\n    }\n  }\n\n  _updateBinding(binding, opts) {\n    const {\n      sourceBuffers,\n      sourceTextures,\n      targetTexture\n    } = opts;\n\n    if (!binding) {\n      binding = {\n        sourceBuffers: {},\n        sourceTextures: {},\n        targetTexture: null\n      };\n    }\n\n    Object.assign(binding.sourceTextures, sourceTextures);\n    Object.assign(binding.sourceBuffers, sourceBuffers);\n\n    if (targetTexture) {\n      binding.targetTexture = targetTexture;\n      const {\n        width,\n        height\n      } = targetTexture;\n      const {\n        framebuffer\n      } = binding;\n\n      if (framebuffer) {\n        framebuffer.update({\n          attachments: {\n            [36064]: targetTexture\n          },\n          resizeAttachments: false\n        });\n        framebuffer.resize({\n          width,\n          height\n        });\n      } else {\n        binding.framebuffer = new Framebuffer(this.gl, {\n          id: `transform-framebuffer`,\n          width,\n          height,\n          attachments: {\n            [36064]: targetTexture\n          }\n        });\n      }\n    }\n\n    return binding;\n  }\n\n  _setSourceTextureParameters() {\n    const index = this.currentIndex;\n    const {\n      sourceTextures\n    } = this.bindings[index];\n\n    for (const name in sourceTextures) {\n      sourceTextures[name].setParameters(SRC_TEX_PARAMETER_OVERRIDES);\n    }\n  }\n\n  _swapTextures(opts) {\n    if (!this._swapTexture) {\n      return null;\n    }\n\n    const sourceTextures = Object.assign({}, opts.sourceTextures);\n    sourceTextures[this._swapTexture] = opts.targetTexture;\n    const targetTexture = opts.sourceTextures[this._swapTexture];\n    return {\n      sourceTextures,\n      targetTexture\n    };\n  }\n\n  _createNewTexture(refTexture) {\n    const texture = cloneTextureFrom(refTexture, {\n      parameters: {\n        [10241]: 9728,\n        [10240]: 9728,\n        [10242]: 33071,\n        [10243]: 33071\n      },\n      pixelStore: {\n        [37440]: false\n      }\n    });\n\n    if (this.ownTexture) {\n      this.ownTexture.delete();\n    }\n\n    this.ownTexture = texture;\n    return texture;\n  }\n\n  _getNextIndex() {\n    return (this.currentIndex + 1) % 2;\n  }\n\n  _processVertexShader(props = {}) {\n    const {\n      sourceTextures,\n      targetTexture\n    } = this.bindings[this.currentIndex];\n    const {\n      vs,\n      uniforms,\n      targetTextureType,\n      inject,\n      samplerTextureMap\n    } = updateForTextures({\n      vs: props.vs,\n      sourceTextureMap: sourceTextures,\n      targetTextureVarying: this.targetTextureVarying,\n      targetTexture\n    });\n    const combinedInject = combineInjects([props.inject || {}, inject]);\n    this.targetTextureType = targetTextureType;\n    this.samplerTextureMap = samplerTextureMap;\n    const fs = props._fs || getPassthroughFS({\n      version: getShaderVersion(vs),\n      input: this.targetTextureVarying,\n      inputType: targetTextureType,\n      output: FS_OUTPUT_VARIABLE\n    });\n    const modules = this.hasSourceTextures || this.targetTextureVarying ? [transformModule].concat(props.modules || []) : props.modules;\n    return {\n      vs,\n      fs,\n      modules,\n      uniforms,\n      inject: combinedInject\n    };\n  }\n\n}\n//# sourceMappingURL=texture-transform.js.map","let arrayBuffer = null;\nexport function getScratchArrayBuffer(byteLength) {\n  if (!arrayBuffer || arrayBuffer.byteLength < byteLength) {\n    arrayBuffer = new ArrayBuffer(byteLength);\n  }\n\n  return arrayBuffer;\n}\nexport function getScratchArray(Type, length) {\n  const scratchArrayBuffer = getScratchArrayBuffer(Type.BYTES_PER_ELEMENT * length);\n  return new Type(scratchArrayBuffer, 0, length);\n}\nexport function fillArray({\n  target,\n  source,\n  start = 0,\n  count = 1\n}) {\n  const length = source.length;\n  const total = count * length;\n  let copied = 0;\n\n  for (let i = start; copied < length; copied++) {\n    target[i++] = source[copied];\n  }\n\n  while (copied < total) {\n    if (copied < total - copied) {\n      target.copyWithin(start + copied, start, start + copied);\n      copied *= 2;\n    } else {\n      target.copyWithin(start + copied, start, start + total - copied);\n      copied = total;\n    }\n  }\n\n  return target;\n}\n//# sourceMappingURL=array-utils-flat.js.map","import { window } from './globals';\nimport isBrowser from './is-browser';\nimport isElectron from './is-electron';\nexport function isMobile() {\n  return typeof window.orientation !== 'undefined';\n}\nexport default function getBrowser(mockUserAgent) {\n  if (!mockUserAgent && !isBrowser()) {\n    return 'Node';\n  }\n\n  if (isElectron(mockUserAgent)) {\n    return 'Electron';\n  }\n\n  const navigator_ = typeof navigator !== 'undefined' ? navigator : {};\n  const userAgent = mockUserAgent || navigator_.userAgent || '';\n\n  if (userAgent.indexOf('Edge') > -1) {\n    return 'Edge';\n  }\n\n  const isMSIE = userAgent.indexOf('MSIE ') !== -1;\n  const isTrident = userAgent.indexOf('Trident/') !== -1;\n\n  if (isMSIE || isTrident) {\n    return 'IE';\n  }\n\n  if (window.chrome) {\n    return 'Chrome';\n  }\n\n  if (window.safari) {\n    return 'Safari';\n  }\n\n  if (window.mozInnerScreenX) {\n    return 'Firefox';\n  }\n\n  return 'Unknown';\n}\n//# sourceMappingURL=get-browser.js.map","import Resource from './resource';\nimport Buffer from './buffer';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { getScratchArray, fillArray } from '../utils/array-utils-flat';\nimport { assert } from '../utils/assert';\nimport { getBrowser } from 'probe.gl';\nconst ERR_ELEMENTS = 'elements must be GL.ELEMENT_ARRAY_BUFFER';\nexport default class VertexArrayObject extends Resource {\n  static isSupported(gl, options = {}) {\n    if (options.constantAttributeZero) {\n      return isWebGL2(gl) || getBrowser() === 'Chrome';\n    }\n\n    return true;\n  }\n\n  static getDefaultArray(gl) {\n    gl.luma = gl.luma || {};\n\n    if (!gl.luma.defaultVertexArray) {\n      gl.luma.defaultVertexArray = new VertexArrayObject(gl, {\n        handle: null,\n        isDefaultArray: true\n      });\n    }\n\n    return gl.luma.defaultVertexArray;\n  }\n\n  static getMaxAttributes(gl) {\n    VertexArrayObject.MAX_ATTRIBUTES = VertexArrayObject.MAX_ATTRIBUTES || gl.getParameter(34921);\n    return VertexArrayObject.MAX_ATTRIBUTES;\n  }\n\n  static setConstant(gl, location, array) {\n    switch (array.constructor) {\n      case Float32Array:\n        VertexArrayObject._setConstantFloatArray(gl, location, array);\n\n        break;\n\n      case Int32Array:\n        VertexArrayObject._setConstantIntArray(gl, location, array);\n\n        break;\n\n      case Uint32Array:\n        VertexArrayObject._setConstantUintArray(gl, location, array);\n\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  constructor(gl, opts = {}) {\n    const id = opts.id || opts.program && opts.program.id;\n    super(gl, Object.assign({}, opts, {\n      id\n    }));\n    this.buffer = null;\n    this.bufferValue = null;\n    this.isDefaultArray = opts.isDefaultArray || false;\n    this.gl2 = gl;\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  delete() {\n    super.delete();\n\n    if (this.buffer) {\n      this.buffer.delete();\n    }\n\n    return this;\n  }\n\n  get MAX_ATTRIBUTES() {\n    return VertexArrayObject.getMaxAttributes(this.gl);\n  }\n\n  initialize(props = {}) {\n    return this.setProps(props);\n  }\n\n  setProps(props) {\n    return this;\n  }\n\n  setElementBuffer(elementBuffer = null, opts = {}) {\n    assert(!elementBuffer || elementBuffer.target === 34963, ERR_ELEMENTS);\n    this.bind(() => {\n      this.gl.bindBuffer(34963, elementBuffer ? elementBuffer.handle : null);\n    });\n    return this;\n  }\n\n  setBuffer(location, buffer, accessor) {\n    if (buffer.target === 34963) {\n      return this.setElementBuffer(buffer, accessor);\n    }\n\n    const {\n      size,\n      type,\n      stride,\n      offset,\n      normalized,\n      integer,\n      divisor\n    } = accessor;\n    const {\n      gl,\n      gl2\n    } = this;\n    location = Number(location);\n    this.bind(() => {\n      gl.bindBuffer(34962, buffer.handle);\n\n      if (integer) {\n        assert(isWebGL2(gl));\n        gl2.vertexAttribIPointer(location, size, type, stride, offset);\n      } else {\n        gl.vertexAttribPointer(location, size, type, normalized, stride, offset);\n      }\n\n      gl.enableVertexAttribArray(location);\n      gl2.vertexAttribDivisor(location, divisor || 0);\n    });\n    return this;\n  }\n\n  enable(location, enable = true) {\n    const disablingAttributeZero = !enable && location === 0 && !VertexArrayObject.isSupported(this.gl, {\n      constantAttributeZero: true\n    });\n\n    if (!disablingAttributeZero) {\n      location = Number(location);\n      this.bind(() => enable ? this.gl.enableVertexAttribArray(location) : this.gl.disableVertexAttribArray(location));\n    }\n\n    return this;\n  }\n\n  getConstantBuffer(elementCount, value) {\n    const constantValue = this._normalizeConstantArrayValue(value);\n\n    const byteLength = constantValue.byteLength * elementCount;\n    const length = constantValue.length * elementCount;\n    let updateNeeded = !this.buffer;\n    this.buffer = this.buffer || new Buffer(this.gl, byteLength);\n    updateNeeded = updateNeeded || this.buffer.reallocate(byteLength);\n    updateNeeded = updateNeeded || !this._compareConstantArrayValues(constantValue, this.bufferValue);\n\n    if (updateNeeded) {\n      const typedArray = getScratchArray(value.constructor, length);\n      fillArray({\n        target: typedArray,\n        source: constantValue,\n        start: 0,\n        count: length\n      });\n      this.buffer.subData(typedArray);\n      this.bufferValue = value;\n    }\n\n    return this.buffer;\n  }\n\n  _normalizeConstantArrayValue(arrayValue) {\n    if (Array.isArray(arrayValue)) {\n      return new Float32Array(arrayValue);\n    }\n\n    return arrayValue;\n  }\n\n  _compareConstantArrayValues(v1, v2) {\n    if (!v1 || !v2 || v1.length !== v2.length || v1.constructor !== v2.constructor) {\n      return false;\n    }\n\n    for (let i = 0; i < v1.length; ++i) {\n      if (v1[i] !== v2[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  static _setConstantFloatArray(gl, location, array) {\n    switch (array.length) {\n      case 1:\n        gl.vertexAttrib1fv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttrib2fv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttrib3fv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttrib4fv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  static _setConstantIntArray(gl, location, array) {\n    assert(isWebGL2(gl));\n\n    switch (array.length) {\n      case 1:\n        gl.vertexAttribI1iv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttribI2iv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttribI3iv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttribI4iv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  static _setConstantUintArray(gl, location, array) {\n    assert(isWebGL2(gl));\n\n    switch (array.length) {\n      case 1:\n        gl.vertexAttribI1uiv(location, array);\n        break;\n\n      case 2:\n        gl.vertexAttribI2uiv(location, array);\n        break;\n\n      case 3:\n        gl.vertexAttribI3uiv(location, array);\n        break;\n\n      case 4:\n        gl.vertexAttribI4uiv(location, array);\n        break;\n\n      default:\n        assert(false);\n    }\n  }\n\n  _createHandle() {\n    const gl2 = this.gl;\n    return gl2.createVertexArray();\n  }\n\n  _deleteHandle(handle) {\n    this.gl2.deleteVertexArray(handle);\n    return [this.elements];\n  }\n\n  _bindHandle(handle) {\n    this.gl2.bindVertexArray(handle);\n  }\n\n  _getParameter(pname, {\n    location\n  }) {\n    assert(Number.isFinite(location));\n    return this.bind(() => {\n      switch (pname) {\n        case 34373:\n          return this.gl.getVertexAttribOffset(location, pname);\n\n        default:\n          return this.gl.getVertexAttrib(location, pname);\n      }\n    });\n  }\n\n}\n//# sourceMappingURL=vertex-array-object.js.map","import { log } from '@luma.gl/gltools';\nimport Accessor from './accessor';\nimport Buffer from './buffer';\nimport VertexArrayObject from './vertex-array-object';\nimport { assert } from '../utils/assert';\nimport { stubRemovedMethods } from '../utils/stub-methods';\nconst ERR_ATTRIBUTE_TYPE = 'VertexArray: attributes must be Buffers or constants (i.e. typed array)';\nconst MULTI_LOCATION_ATTRIBUTE_REGEXP = /^(.+)__LOCATION_([0-9]+)$/;\nconst DEPRECATIONS_V6 = ['setBuffers', 'setGeneric', 'clearBindings', 'setLocations', 'setGenericValues', 'setDivisor', 'enable', 'disable'];\nexport default class VertexArray {\n  constructor(gl, opts = {}) {\n    const id = opts.id || opts.program && opts.program.id;\n    this.id = id;\n    this.gl = gl;\n    this.configuration = null;\n    this.elements = null;\n    this.elementsAccessor = null;\n    this.values = null;\n    this.accessors = null;\n    this.unused = null;\n    this.drawParams = null;\n    this.buffer = null;\n    this.attributes = {};\n    this.vertexArrayObject = new VertexArrayObject(gl);\n    stubRemovedMethods(this, 'VertexArray', 'v6.0', DEPRECATIONS_V6);\n    this.initialize(opts);\n    Object.seal(this);\n  }\n\n  delete() {\n    if (this.buffer) {\n      this.buffer.delete();\n    }\n\n    this.vertexArrayObject.delete();\n  }\n\n  initialize(props = {}) {\n    this.reset();\n    this.configuration = null;\n    this.bindOnUse = false;\n    return this.setProps(props);\n  }\n\n  reset() {\n    this.elements = null;\n    this.elementsAccessor = null;\n    const {\n      MAX_ATTRIBUTES\n    } = this.vertexArrayObject;\n    this.values = new Array(MAX_ATTRIBUTES).fill(null);\n    this.accessors = new Array(MAX_ATTRIBUTES).fill(null);\n    this.unused = {};\n    this.drawParams = null;\n    return this;\n  }\n\n  setProps(props) {\n    if ('program' in props) {\n      this.configuration = props.program && props.program.configuration;\n    }\n\n    if ('configuration' in props) {\n      this.configuration = props.configuration;\n    }\n\n    if ('attributes' in props) {\n      this.setAttributes(props.attributes);\n    }\n\n    if ('elements' in props) {\n      this.setElementBuffer(props.elements);\n    }\n\n    if ('bindOnUse' in props) {\n      props = props.bindOnUse;\n    }\n\n    return this;\n  }\n\n  clearDrawParams() {\n    this.drawParams = null;\n  }\n\n  getDrawParams() {\n    this.drawParams = this.drawParams || this._updateDrawParams();\n    return this.drawParams;\n  }\n\n  setAttributes(attributes) {\n    Object.assign(this.attributes, attributes);\n    this.vertexArrayObject.bind(() => {\n      for (const locationOrName in attributes) {\n        const value = attributes[locationOrName];\n\n        this._setAttribute(locationOrName, value);\n      }\n\n      this.gl.bindBuffer(34962, null);\n    });\n    return this;\n  }\n\n  setElementBuffer(elementBuffer = null, accessor = {}) {\n    this.elements = elementBuffer;\n    this.elementsAccessor = accessor;\n    this.clearDrawParams();\n    this.vertexArrayObject.setElementBuffer(elementBuffer, accessor);\n    return this;\n  }\n\n  setBuffer(locationOrName, buffer, appAccessor = {}) {\n    if (buffer.target === 34963) {\n      return this.setElementBuffer(buffer, appAccessor);\n    }\n\n    const {\n      location,\n      accessor\n    } = this._resolveLocationAndAccessor(locationOrName, buffer, buffer.accessor, appAccessor);\n\n    if (location >= 0) {\n      this.values[location] = buffer;\n      this.accessors[location] = accessor;\n      this.clearDrawParams();\n      this.vertexArrayObject.setBuffer(location, buffer, accessor);\n    }\n\n    return this;\n  }\n\n  setConstant(locationOrName, arrayValue, appAccessor = {}) {\n    const {\n      location,\n      accessor\n    } = this._resolveLocationAndAccessor(locationOrName, arrayValue, Object.assign({\n      size: arrayValue.length\n    }, appAccessor));\n\n    if (location >= 0) {\n      arrayValue = this.vertexArrayObject._normalizeConstantArrayValue(arrayValue);\n      this.values[location] = arrayValue;\n      this.accessors[location] = accessor;\n      this.clearDrawParams();\n      this.vertexArrayObject.enable(location, false);\n    }\n\n    return this;\n  }\n\n  unbindBuffers() {\n    this.vertexArrayObject.bind(() => {\n      if (this.elements) {\n        this.vertexArrayObject.setElementBuffer(null);\n      }\n\n      this.buffer = this.buffer || new Buffer(this.gl, {\n        accessor: {\n          size: 4\n        }\n      });\n\n      for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        if (this.values[location] instanceof Buffer) {\n          this.gl.disableVertexAttribArray(location);\n          this.gl.bindBuffer(34962, this.buffer.handle);\n          this.gl.vertexAttribPointer(location, 1, 5126, false, 0, 0);\n        }\n      }\n    });\n    return this;\n  }\n\n  bindBuffers() {\n    this.vertexArrayObject.bind(() => {\n      if (this.elements) {\n        this.setElementBuffer(this.elements);\n      }\n\n      for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n        const buffer = this.values[location];\n\n        if (buffer instanceof Buffer) {\n          this.setBuffer(location, buffer);\n        }\n      }\n    });\n    return this;\n  }\n\n  bindForDraw(vertexCount, instanceCount, func) {\n    let value;\n    this.vertexArrayObject.bind(() => {\n      this._setConstantAttributes(vertexCount, instanceCount);\n\n      value = func();\n    });\n    return value;\n  }\n\n  _resolveLocationAndAccessor(locationOrName, value, valueAccessor, appAccessor) {\n    const INVALID_RESULT = {\n      location: -1,\n      accessor: null\n    };\n\n    const {\n      location,\n      name\n    } = this._getAttributeIndex(locationOrName);\n\n    if (!Number.isFinite(location) || location < 0) {\n      this.unused[locationOrName] = value;\n      log.once(3, () => `unused value ${locationOrName} in ${this.id}`)();\n      return INVALID_RESULT;\n    }\n\n    const accessInfo = this._getAttributeInfo(name || location);\n\n    if (!accessInfo) {\n      return INVALID_RESULT;\n    }\n\n    const currentAccessor = this.accessors[location] || {};\n    const accessor = Accessor.resolve(accessInfo.accessor, currentAccessor, valueAccessor, appAccessor);\n    const {\n      size,\n      type\n    } = accessor;\n    assert(Number.isFinite(size) && Number.isFinite(type));\n    return {\n      location,\n      accessor\n    };\n  }\n\n  _getAttributeInfo(attributeName) {\n    return this.configuration && this.configuration.getAttributeInfo(attributeName);\n  }\n\n  _getAttributeIndex(locationOrName) {\n    const location = Number(locationOrName);\n\n    if (Number.isFinite(location)) {\n      return {\n        location\n      };\n    }\n\n    const multiLocation = MULTI_LOCATION_ATTRIBUTE_REGEXP.exec(locationOrName);\n    const name = multiLocation ? multiLocation[1] : locationOrName;\n    const locationOffset = multiLocation ? Number(multiLocation[2]) : 0;\n\n    if (this.configuration) {\n      return {\n        location: this.configuration.getAttributeLocation(name) + locationOffset,\n        name\n      };\n    }\n\n    return {\n      location: -1\n    };\n  }\n\n  _setAttribute(locationOrName, value) {\n    if (value instanceof Buffer) {\n      this.setBuffer(locationOrName, value);\n    } else if (Array.isArray(value) && value.length && value[0] instanceof Buffer) {\n      const buffer = value[0];\n      const accessor = value[1];\n      this.setBuffer(locationOrName, buffer, accessor);\n    } else if (ArrayBuffer.isView(value) || Array.isArray(value)) {\n      const constant = value;\n      this.setConstant(locationOrName, constant);\n    } else if (value.buffer instanceof Buffer) {\n      const accessor = value;\n      this.setBuffer(locationOrName, accessor.buffer, accessor);\n    } else {\n      throw new Error(ERR_ATTRIBUTE_TYPE);\n    }\n  }\n\n  _setConstantAttributes(vertexCount, instanceCount) {\n    const elementCount = Math.max(vertexCount | 0, instanceCount | 0);\n    let constant = this.values[0];\n\n    if (ArrayBuffer.isView(constant)) {\n      this._setConstantAttributeZero(constant, elementCount);\n    }\n\n    for (let location = 1; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n      constant = this.values[location];\n\n      if (ArrayBuffer.isView(constant)) {\n        this._setConstantAttribute(location, constant);\n      }\n    }\n  }\n\n  _setConstantAttributeZero(constant, elementCount) {\n    if (VertexArrayObject.isSupported(this.gl, {\n      constantAttributeZero: true\n    })) {\n      this._setConstantAttribute(0, constant);\n\n      return;\n    }\n\n    const buffer = this.vertexArrayObject.getConstantBuffer(elementCount, constant);\n    this.vertexArrayObject.setBuffer(0, buffer, this.accessors[0]);\n  }\n\n  _setConstantAttribute(location, constant) {\n    VertexArrayObject.setConstant(this.gl, location, constant);\n  }\n\n  _updateDrawParams() {\n    const drawParams = {\n      isIndexed: false,\n      isInstanced: false,\n      indexCount: Infinity,\n      vertexCount: Infinity,\n      instanceCount: Infinity\n    };\n\n    for (let location = 0; location < this.vertexArrayObject.MAX_ATTRIBUTES; location++) {\n      this._updateDrawParamsForLocation(drawParams, location);\n    }\n\n    if (this.elements) {\n      drawParams.elementCount = this.elements.getElementCount(this.elements.accessor);\n      drawParams.isIndexed = true;\n      drawParams.indexType = this.elementsAccessor.type || this.elements.accessor.type;\n      drawParams.indexOffset = this.elementsAccessor.offset || 0;\n    }\n\n    if (drawParams.indexCount === Infinity) {\n      drawParams.indexCount = 0;\n    }\n\n    if (drawParams.vertexCount === Infinity) {\n      drawParams.vertexCount = 0;\n    }\n\n    if (drawParams.instanceCount === Infinity) {\n      drawParams.instanceCount = 0;\n    }\n\n    return drawParams;\n  }\n\n  _updateDrawParamsForLocation(drawParams, location) {\n    const value = this.values[location];\n    const accessor = this.accessors[location];\n\n    if (!value) {\n      return;\n    }\n\n    const {\n      divisor\n    } = accessor;\n    const isInstanced = divisor > 0;\n    drawParams.isInstanced = drawParams.isInstanced || isInstanced;\n\n    if (value instanceof Buffer) {\n      const buffer = value;\n\n      if (isInstanced) {\n        const instanceCount = buffer.getVertexCount(accessor);\n        drawParams.instanceCount = Math.min(drawParams.instanceCount, instanceCount);\n      } else {\n        const vertexCount = buffer.getVertexCount(accessor);\n        drawParams.vertexCount = Math.min(drawParams.vertexCount, vertexCount);\n      }\n    }\n  }\n\n  setElements(elementBuffer = null, accessor = {}) {\n    log.deprecated('setElements', 'setElementBuffer')();\n    return this.setElementBuffer(elementBuffer, accessor);\n  }\n\n}\n//# sourceMappingURL=vertex-array.js.map","function formatArrayValue(v, opts) {\n  const {\n    maxElts = 16,\n    size = 1\n  } = opts;\n  let string = '[';\n\n  for (let i = 0; i < v.length && i < maxElts; ++i) {\n    if (i > 0) {\n      string += `,${i % size === 0 ? ' ' : ''}`;\n    }\n\n    string += formatValue(v[i], opts);\n  }\n\n  const terminator = v.length > maxElts ? '...' : ']';\n  return `${string}${terminator}`;\n}\n\nexport function formatValue(v, opts = {}) {\n  const EPSILON = 1e-16;\n  const {\n    isInteger = false\n  } = opts;\n\n  if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n    return formatArrayValue(v, opts);\n  }\n\n  if (!Number.isFinite(v)) {\n    return String(v);\n  }\n\n  if (Math.abs(v) < EPSILON) {\n    return isInteger ? '0' : '0.';\n  }\n\n  if (isInteger) {\n    return v.toFixed(0);\n  }\n\n  if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n    return v.toFixed(0);\n  }\n\n  const string = v.toPrecision(2);\n  const decimal = string.indexOf('.0');\n  return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n//# sourceMappingURL=format-value.js.map","import Buffer from '../classes/buffer';\nimport { getKey } from '../webgl-utils/constants-to-keys';\nimport { getCompositeGLType } from '../webgl-utils/attribute-utils';\nimport { formatValue } from '../utils/format-value';\nexport function getDebugTableForVertexArray({\n  vertexArray,\n  header = 'Attributes'\n}) {\n  if (!vertexArray.configuration) {\n    return {};\n  }\n\n  const table = {};\n\n  if (vertexArray.elements) {\n    table.ELEMENT_ARRAY_BUFFER = getDebugTableRow(vertexArray, vertexArray.elements, null, header);\n  }\n\n  const attributes = vertexArray.values;\n\n  for (const attributeLocation in attributes) {\n    const info = vertexArray._getAttributeInfo(attributeLocation);\n\n    if (info) {\n      let rowHeader = `${attributeLocation}: ${info.name}`;\n      const accessor = vertexArray.accessors[info.location];\n\n      if (accessor) {\n        rowHeader = `${attributeLocation}: ${getGLSLDeclaration(info.name, accessor)}`;\n      }\n\n      table[rowHeader] = getDebugTableRow(vertexArray, attributes[attributeLocation], accessor, header);\n    }\n  }\n\n  return table;\n}\n\nfunction getDebugTableRow(vertexArray, attribute, accessor, header) {\n  const {\n    gl\n  } = vertexArray;\n\n  if (!attribute) {\n    return {\n      [header]: 'null',\n      'Format ': 'N/A'\n    };\n  }\n\n  let type = 'NOT PROVIDED';\n  let size = 1;\n  let verts = 0;\n  let bytes = 0;\n  let isInteger;\n  let marker;\n  let value;\n\n  if (accessor) {\n    type = accessor.type;\n    size = accessor.size;\n    type = String(type).replace('Array', '');\n    isInteger = type.indexOf('nt') !== -1;\n  }\n\n  if (attribute instanceof Buffer) {\n    const buffer = attribute;\n    const {\n      data,\n      changed\n    } = buffer.getDebugData();\n    marker = changed ? '*' : '';\n    value = data;\n    bytes = buffer.byteLength;\n    verts = bytes / data.BYTES_PER_ELEMENT / size;\n    let format;\n\n    if (accessor) {\n      const instanced = accessor.divisor > 0;\n      format = `${instanced ? 'I ' : 'P '} ${verts} (x${size}=${bytes} bytes ${getKey(gl, type)})`;\n    } else {\n      isInteger = true;\n      format = `${bytes} bytes`;\n    }\n\n    return {\n      [header]: `${marker}${formatValue(value, {\n        size,\n        isInteger\n      })}`,\n      'Format ': format\n    };\n  }\n\n  value = attribute;\n  size = attribute.length;\n  type = String(attribute.constructor.name).replace('Array', '');\n  isInteger = type.indexOf('nt') !== -1;\n  return {\n    [header]: `${formatValue(value, {\n      size,\n      isInteger\n    })} (constant)`,\n    'Format ': `${size}x${type} (constant)`\n  };\n}\n\nfunction getGLSLDeclaration(name, accessor) {\n  const {\n    type,\n    size\n  } = accessor;\n  const typeAndName = getCompositeGLType(type, size);\n  return typeAndName ? `${name} (${typeAndName.name})` : name;\n}\n//# sourceMappingURL=debug-vertex-array.js.map","import { assert } from '../utils/assert';\nimport { formatValue } from '../utils/format-value';\nexport function getDebugTableForUniforms({\n  header = 'Uniforms',\n  program,\n  uniforms,\n  undefinedOnly = false\n}) {\n  assert(program);\n  const SHADER_MODULE_UNIFORM_REGEXP = '.*_.*';\n  const PROJECT_MODULE_UNIFORM_REGEXP = '.*Matrix';\n  const uniformLocations = program._uniformSetters;\n  const table = {};\n  const uniformNames = Object.keys(uniformLocations).sort();\n  let count = 0;\n\n  for (const uniformName of uniformNames) {\n    if (!uniformName.match(SHADER_MODULE_UNIFORM_REGEXP) && !uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  for (const uniformName of uniformNames) {\n    if (uniformName.match(PROJECT_MODULE_UNIFORM_REGEXP)) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  for (const uniformName of uniformNames) {\n    if (!table[uniformName]) {\n      if (addUniformToTable({\n        table,\n        header,\n        uniforms,\n        uniformName,\n        undefinedOnly\n      })) {\n        count++;\n      }\n    }\n  }\n\n  let unusedCount = 0;\n  const unusedTable = {};\n\n  if (!undefinedOnly) {\n    for (const uniformName in uniforms) {\n      const uniform = uniforms[uniformName];\n\n      if (!table[uniformName]) {\n        unusedCount++;\n        unusedTable[uniformName] = {\n          Type: `NOT USED: ${uniform}`,\n          [header]: formatValue(uniform)\n        };\n      }\n    }\n  }\n\n  return {\n    table,\n    count,\n    unusedTable,\n    unusedCount\n  };\n}\n\nfunction addUniformToTable({\n  table,\n  header,\n  uniforms,\n  uniformName,\n  undefinedOnly\n}) {\n  const value = uniforms[uniformName];\n  const isDefined = isUniformDefined(value);\n\n  if (!undefinedOnly || !isDefined) {\n    table[uniformName] = {\n      [header]: isDefined ? formatValue(value) : 'N/A',\n      'Uniform Type': isDefined ? value : 'NOT PROVIDED'\n    };\n    return true;\n  }\n\n  return false;\n}\n\nfunction isUniformDefined(value) {\n  return value !== undefined && value !== null;\n}\n//# sourceMappingURL=debug-uniforms.js.map","import { getCompositeGLType } from '../webgl-utils/attribute-utils';\nexport function getDebugTableForProgramConfiguration(config) {\n  const table = {};\n  const header = `Accessors for ${config.id}`;\n\n  for (const attributeInfo of config.attributeInfos) {\n    if (attributeInfo) {\n      const glslDeclaration = getGLSLDeclaration(attributeInfo);\n      table[`in ${glslDeclaration}`] = {\n        [header]: JSON.stringify(attributeInfo.accessor)\n      };\n    }\n  }\n\n  for (const varyingInfo of config.varyingInfos) {\n    if (varyingInfo) {\n      const glslDeclaration = getGLSLDeclaration(varyingInfo);\n      table[`out ${glslDeclaration}`] = {\n        [header]: JSON.stringify(varyingInfo.accessor)\n      };\n    }\n  }\n\n  return table;\n}\n\nfunction getGLSLDeclaration(attributeInfo) {\n  const {\n    type,\n    size\n  } = attributeInfo.accessor;\n  const typeAndName = getCompositeGLType(type, size);\n\n  if (typeAndName) {\n    return `${typeAndName.name} ${attributeInfo.name}`;\n  }\n\n  return attributeInfo.name;\n}\n//# sourceMappingURL=debug-program-configuration.js.map","import { Buffer, assert } from '@luma.gl/webgl';\nconst GLTF_TO_LUMA_ATTRIBUTE_MAP = {\n  POSITION: 'positions',\n  NORMAL: 'normals',\n  COLOR_0: 'colors',\n  TEXCOORD_0: 'texCoords',\n  TEXCOORD_1: 'texCoords1',\n  TEXCOORD_2: 'texCoords2'\n};\nexport function getBuffersFromGeometry(gl, geometry, options) {\n  const buffers = {};\n  let indices = geometry.indices;\n\n  for (const name in geometry.attributes) {\n    const attribute = geometry.attributes[name];\n    const remappedName = mapAttributeName(name, options);\n\n    if (name === 'indices') {\n      indices = attribute;\n    } else if (attribute.constant) {\n      buffers[remappedName] = attribute.value;\n    } else {\n      const typedArray = attribute.value;\n      const accessor = { ...attribute\n      };\n      delete accessor.value;\n      buffers[remappedName] = [new Buffer(gl, typedArray), accessor];\n      inferAttributeAccessor(name, accessor);\n    }\n  }\n\n  if (indices) {\n    const data = indices.value || indices;\n    assert(data instanceof Uint16Array || data instanceof Uint32Array, 'attribute array for \"indices\" must be of integer type');\n    const accessor = {\n      size: 1,\n      isIndexed: indices.isIndexed === undefined ? true : indices.isIndexed\n    };\n    buffers.indices = [new Buffer(gl, {\n      data,\n      target: 34963\n    }), accessor];\n  }\n\n  return buffers;\n}\n\nfunction mapAttributeName(name, options) {\n  const {\n    attributeMap = GLTF_TO_LUMA_ATTRIBUTE_MAP\n  } = options || {};\n  return attributeMap && attributeMap[name] || name;\n}\n\nexport function inferAttributeAccessor(attributeName, attribute) {\n  let category;\n\n  switch (attributeName) {\n    case 'texCoords':\n    case 'texCoord1':\n    case 'texCoord2':\n    case 'texCoord3':\n      category = 'uvs';\n      break;\n\n    case 'vertices':\n    case 'positions':\n    case 'normals':\n    case 'pickingColors':\n      category = 'vectors';\n      break;\n\n    default:\n  }\n\n  switch (category) {\n    case 'vectors':\n      attribute.size = attribute.size || 3;\n      break;\n\n    case 'uvs':\n      attribute.size = attribute.size || 2;\n      break;\n\n    default:\n  }\n\n  assert(Number.isFinite(attribute.size), `attribute ${attributeName} needs size`);\n}\n//# sourceMappingURL=model-utils.js.map","import { isWebGL } from '@luma.gl/gltools';\nimport ProgramManager from './program-manager';\nimport { Program, VertexArray, clear, TransformFeedback, Buffer, log, isObjectEmpty, uid, assert } from '@luma.gl/webgl';\nimport { getDebugTableForUniforms, getDebugTableForVertexArray, getDebugTableForProgramConfiguration } from '@luma.gl/webgl';\nimport { getBuffersFromGeometry } from './model-utils';\nconst LOG_DRAW_PRIORITY = 2;\nconst LOG_DRAW_TIMEOUT = 10000;\nconst ERR_MODEL_PARAMS = 'Model needs drawMode and vertexCount';\n\nconst NOOP = () => {};\n\nconst DRAW_PARAMS = {};\nexport default class Model {\n  constructor(gl, props = {}) {\n    const {\n      id = uid('model')\n    } = props;\n    assert(isWebGL(gl));\n    this.id = id;\n    this.gl = gl;\n    this.id = props.id || uid('Model');\n    this.lastLogTime = 0;\n    this.animated = false;\n    this.initialize(props);\n  }\n\n  initialize(props) {\n    this.props = {};\n    this.programManager = props.programManager || ProgramManager.getDefaultProgramManager(this.gl);\n    this._programManagerState = -1;\n    this._managedProgram = false;\n    const {\n      program = null,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    } = props;\n    this.programProps = {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    };\n    this.program = null;\n    this.vertexArray = null;\n    this._programDirty = true;\n    this.userData = {};\n    this.needsRedraw = true;\n    this._attributes = {};\n    this.attributes = {};\n    this.uniforms = {};\n    this.pickable = true;\n\n    this._checkProgram();\n\n    this.setUniforms(Object.assign({}, this.getModuleUniforms(props.moduleSettings)));\n    this.drawMode = props.drawMode !== undefined ? props.drawMode : 4;\n    this.vertexCount = props.vertexCount || 0;\n    this.geometryBuffers = {};\n    this.isInstanced = props.isInstanced || props.instanced || props.instanceCount > 0;\n\n    this._setModelProps(props);\n\n    this.geometry = {};\n    assert(this.drawMode !== undefined && Number.isFinite(this.vertexCount), ERR_MODEL_PARAMS);\n  }\n\n  setProps(props) {\n    this._setModelProps(props);\n  }\n\n  delete() {\n    for (const key in this._attributes) {\n      if (this._attributes[key] !== this.attributes[key]) {\n        this._attributes[key].delete();\n      }\n    }\n\n    if (this._managedProgram) {\n      this.programManager.release(this.program);\n      this._managedProgram = false;\n    }\n\n    this.vertexArray.delete();\n\n    this._deleteGeometryBuffers();\n  }\n\n  getDrawMode() {\n    return this.drawMode;\n  }\n\n  getVertexCount() {\n    return this.vertexCount;\n  }\n\n  getInstanceCount() {\n    return this.instanceCount;\n  }\n\n  getAttributes() {\n    return this.attributes;\n  }\n\n  getProgram() {\n    return this.program;\n  }\n\n  setProgram(props) {\n    const {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    } = props;\n    this.programProps = {\n      program,\n      vs,\n      fs,\n      modules,\n      defines,\n      inject,\n      varyings,\n      bufferMode,\n      transpileToGLSL100\n    };\n    this._programDirty = true;\n  }\n\n  getUniforms() {\n    return this.uniforms;\n  }\n\n  setDrawMode(drawMode) {\n    this.drawMode = drawMode;\n    return this;\n  }\n\n  setVertexCount(vertexCount) {\n    assert(Number.isFinite(vertexCount));\n    this.vertexCount = vertexCount;\n    return this;\n  }\n\n  setInstanceCount(instanceCount) {\n    assert(Number.isFinite(instanceCount));\n    this.instanceCount = instanceCount;\n    return this;\n  }\n\n  setGeometry(geometry) {\n    this.drawMode = geometry.drawMode;\n    this.vertexCount = geometry.getVertexCount();\n\n    this._deleteGeometryBuffers();\n\n    this.geometryBuffers = getBuffersFromGeometry(this.gl, geometry);\n    this.vertexArray.setAttributes(this.geometryBuffers);\n    return this;\n  }\n\n  setAttributes(attributes = {}) {\n    if (isObjectEmpty(attributes)) {\n      return this;\n    }\n\n    const normalizedAttributes = {};\n\n    for (const name in attributes) {\n      const attribute = attributes[name];\n      normalizedAttributes[name] = attribute.getValue ? attribute.getValue() : attribute;\n    }\n\n    this.vertexArray.setAttributes(normalizedAttributes);\n    return this;\n  }\n\n  setUniforms(uniforms = {}) {\n    Object.assign(this.uniforms, uniforms);\n    return this;\n  }\n\n  getModuleUniforms(opts) {\n    this._checkProgram();\n\n    const getUniforms = this.programManager.getUniforms(this.program);\n\n    if (getUniforms) {\n      return getUniforms(opts);\n    }\n\n    return {};\n  }\n\n  updateModuleSettings(opts) {\n    const uniforms = this.getModuleUniforms(opts || {});\n    return this.setUniforms(uniforms);\n  }\n\n  clear(opts) {\n    clear(this.program.gl, opts);\n    return this;\n  }\n\n  draw(opts = {}) {\n    this._checkProgram();\n\n    const {\n      moduleSettings = null,\n      framebuffer,\n      uniforms = {},\n      attributes = {},\n      transformFeedback = this.transformFeedback,\n      parameters = {},\n      vertexArray = this.vertexArray\n    } = opts;\n    this.setAttributes(attributes);\n    this.updateModuleSettings(moduleSettings);\n    this.setUniforms(uniforms);\n    let logPriority;\n\n    if (log.priority >= LOG_DRAW_PRIORITY) {\n      logPriority = this._logDrawCallStart(LOG_DRAW_PRIORITY);\n    }\n\n    const drawParams = this.vertexArray.getDrawParams();\n    const {\n      isIndexed = drawParams.isIndexed,\n      indexType = drawParams.indexType,\n      indexOffset = drawParams.indexOffset,\n      vertexArrayInstanced = drawParams.isInstanced\n    } = this.props;\n\n    if (vertexArrayInstanced && !this.isInstanced) {\n      log.warn('Found instanced attributes on non-instanced model', this.id)();\n    }\n\n    const {\n      isInstanced,\n      instanceCount\n    } = this;\n    const {\n      onBeforeRender = NOOP,\n      onAfterRender = NOOP\n    } = this.props;\n    onBeforeRender();\n    this.program.setUniforms(this.uniforms);\n    const didDraw = this.program.draw(Object.assign(DRAW_PARAMS, opts, {\n      logPriority,\n      uniforms: null,\n      framebuffer,\n      parameters,\n      drawMode: this.getDrawMode(),\n      vertexCount: this.getVertexCount(),\n      vertexArray,\n      transformFeedback,\n      isIndexed,\n      indexType,\n      isInstanced,\n      instanceCount,\n      offset: isIndexed ? indexOffset : 0\n    }));\n    onAfterRender();\n\n    if (log.priority >= LOG_DRAW_PRIORITY) {\n      this._logDrawCallEnd(logPriority, vertexArray, framebuffer);\n    }\n\n    return didDraw;\n  }\n\n  transform(opts = {}) {\n    const {\n      discard = true,\n      feedbackBuffers,\n      unbindModels = []\n    } = opts;\n    let {\n      parameters\n    } = opts;\n\n    if (feedbackBuffers) {\n      this._setFeedbackBuffers(feedbackBuffers);\n    }\n\n    if (discard) {\n      parameters = Object.assign({}, parameters, {\n        [35977]: discard\n      });\n    }\n\n    unbindModels.forEach(model => model.vertexArray.unbindBuffers());\n\n    try {\n      this.draw(Object.assign({}, opts, {\n        parameters\n      }));\n    } finally {\n      unbindModels.forEach(model => model.vertexArray.bindBuffers());\n    }\n\n    return this;\n  }\n\n  render(uniforms = {}) {\n    log.warn('Model.render() is deprecated. Use Model.setUniforms() and Model.draw()')();\n    return this.setUniforms(uniforms).draw();\n  }\n\n  _setModelProps(props) {\n    Object.assign(this.props, props);\n\n    if ('uniforms' in props) {\n      this.setUniforms(props.uniforms);\n    }\n\n    if ('pickable' in props) {\n      this.pickable = props.pickable;\n    }\n\n    if ('instanceCount' in props) {\n      this.instanceCount = props.instanceCount;\n    }\n\n    if ('geometry' in props) {\n      this.setGeometry(props.geometry);\n    }\n\n    if ('attributes' in props) {\n      this.setAttributes(props.attributes);\n    }\n\n    if ('_feedbackBuffers' in props) {\n      this._setFeedbackBuffers(props._feedbackBuffers);\n    }\n  }\n\n  _checkProgram() {\n    const needsUpdate = this._programDirty || this.programManager.stateHash !== this._programManagerState;\n\n    if (!needsUpdate) {\n      return;\n    }\n\n    let {\n      program\n    } = this.programProps;\n\n    if (program) {\n      this._managedProgram = false;\n    } else {\n      const {\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        varyings,\n        bufferMode,\n        transpileToGLSL100\n      } = this.programProps;\n      program = this.programManager.get({\n        vs,\n        fs,\n        modules,\n        inject,\n        defines,\n        varyings,\n        bufferMode,\n        transpileToGLSL100\n      });\n\n      if (this.program && this._managedProgram) {\n        this.programManager.release(this.program);\n      }\n\n      this._programManagerState = this.programManager.stateHash;\n      this._managedProgram = true;\n    }\n\n    assert(program instanceof Program, 'Model needs a program');\n    this._programDirty = false;\n\n    if (program === this.program) {\n      return;\n    }\n\n    this.program = program;\n\n    if (this.vertexArray) {\n      this.vertexArray.setProps({\n        program: this.program,\n        attributes: this.vertexArray.attributes\n      });\n    } else {\n      this.vertexArray = new VertexArray(this.gl, {\n        program: this.program\n      });\n    }\n\n    this.setUniforms(Object.assign({}, this.getModuleUniforms()));\n  }\n\n  _deleteGeometryBuffers() {\n    for (const name in this.geometryBuffers) {\n      const buffer = this.geometryBuffers[name][0] || this.geometryBuffers[name];\n\n      if (buffer instanceof Buffer) {\n        buffer.delete();\n      }\n    }\n  }\n\n  _setAnimationProps(animationProps) {\n    if (this.animated) {\n      assert(animationProps, 'Model.draw(): animated uniforms but no animationProps');\n    }\n  }\n\n  _setFeedbackBuffers(feedbackBuffers = {}) {\n    if (isObjectEmpty(feedbackBuffers)) {\n      return this;\n    }\n\n    const {\n      gl\n    } = this.program;\n    this.transformFeedback = this.transformFeedback || new TransformFeedback(gl, {\n      program: this.program\n    });\n    this.transformFeedback.setBuffers(feedbackBuffers);\n    return this;\n  }\n\n  _logDrawCallStart(logLevel) {\n    const logDrawTimeout = logLevel > 3 ? 0 : LOG_DRAW_TIMEOUT;\n\n    if (Date.now() - this.lastLogTime < logDrawTimeout) {\n      return undefined;\n    }\n\n    this.lastLogTime = Date.now();\n    log.group(LOG_DRAW_PRIORITY, `>>> DRAWING MODEL ${this.id}`, {\n      collapsed: log.level <= 2\n    })();\n    return logLevel;\n  }\n\n  _logDrawCallEnd(logLevel, vertexArray, uniforms, framebuffer) {\n    if (logLevel === undefined) {\n      return;\n    }\n\n    const attributeTable = getDebugTableForVertexArray({\n      vertexArray,\n      header: `${this.id} attributes`,\n      attributes: this._attributes\n    });\n    const {\n      table: uniformTable,\n      unusedTable,\n      unusedCount\n    } = getDebugTableForUniforms({\n      header: `${this.id} uniforms`,\n      program: this.program,\n      uniforms: Object.assign({}, this.program.uniforms, uniforms)\n    });\n    const {\n      table: missingTable,\n      count: missingCount\n    } = getDebugTableForUniforms({\n      header: `${this.id} uniforms`,\n      program: this.program,\n      uniforms: Object.assign({}, this.program.uniforms, uniforms),\n      undefinedOnly: true\n    });\n\n    if (missingCount > 0) {\n      log.log('MISSING UNIFORMS', Object.keys(missingTable))();\n    }\n\n    if (unusedCount > 0) {\n      log.log('UNUSED UNIFORMS', Object.keys(unusedTable))();\n    }\n\n    const configTable = getDebugTableForProgramConfiguration(this.vertexArray.configuration);\n    log.table(logLevel, attributeTable)();\n    log.table(logLevel, uniformTable)();\n    log.table(logLevel + 1, configTable)();\n\n    if (framebuffer) {\n      framebuffer.log({\n        logLevel: LOG_DRAW_PRIORITY,\n        message: `Rendered to ${framebuffer.id}`\n      });\n    }\n\n    log.groupEnd(LOG_DRAW_PRIORITY, `>>> DRAWING MODEL ${this.id}`)();\n  }\n\n}\n//# sourceMappingURL=model.js.map","import { getPassthroughFS } from '@luma.gl/shadertools';\nimport BufferTransform from './buffer-transform';\nimport TextureTransform from './texture-transform';\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { assert, isObjectEmpty, getShaderVersion } from '@luma.gl/webgl';\nimport Model from '../lib/model';\nexport default class Transform {\n  static isSupported(gl) {\n    return isWebGL2(gl);\n  }\n\n  constructor(gl, props = {}) {\n    this.gl = gl;\n    this.model = null;\n    this.elementCount = 0;\n    this.bufferTransform = null;\n    this.textureTransform = null;\n    this.elementIDBuffer = null;\n\n    this._initialize(props);\n\n    Object.seal(this);\n  }\n\n  delete() {\n    const {\n      model,\n      bufferTransform,\n      textureTransform\n    } = this;\n\n    if (model) {\n      model.delete();\n    }\n\n    if (bufferTransform) {\n      bufferTransform.delete();\n    }\n\n    if (textureTransform) {\n      textureTransform.delete();\n    }\n  }\n\n  run(opts = {}) {\n    const {\n      clearRenderTarget = true\n    } = opts;\n\n    const updatedOpts = this._updateDrawOptions(opts);\n\n    if (clearRenderTarget && updatedOpts.framebuffer) {\n      updatedOpts.framebuffer.clear({\n        color: true\n      });\n    }\n\n    this.model.transform(updatedOpts);\n  }\n\n  swap() {\n    let swapped = false;\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      swapped = swapped || resourceTransform.swap();\n    }\n\n    assert(swapped, 'Nothing to swap');\n  }\n\n  getBuffer(varyingName = null) {\n    return this.bufferTransform && this.bufferTransform.getBuffer(varyingName);\n  }\n\n  getData(opts = {}) {\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      const data = resourceTransform.getData(opts);\n\n      if (data) {\n        return data;\n      }\n    }\n\n    return null;\n  }\n\n  getFramebuffer() {\n    return this.textureTransform && this.textureTransform.getFramebuffer();\n  }\n\n  update(opts = {}) {\n    if ('elementCount' in opts) {\n      this.model.setVertexCount(opts.elementCount);\n    }\n\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      resourceTransform.update(opts);\n    }\n  }\n\n  _initialize(props = {}) {\n    const {\n      gl\n    } = this;\n\n    this._buildResourceTransforms(gl, props);\n\n    props = this._updateModelProps(props);\n    this.model = new Model(gl, Object.assign({}, props, {\n      fs: props.fs || getPassthroughFS({\n        version: getShaderVersion(props.vs)\n      }),\n      id: props.id || 'transform-model',\n      drawMode: props.drawMode || 0,\n      vertexCount: props.elementCount\n    }));\n    this.bufferTransform && this.bufferTransform.setupResources({\n      model: this.model\n    });\n  }\n\n  _updateModelProps(props) {\n    let updatedProps = Object.assign({}, props);\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      updatedProps = resourceTransform.updateModelProps(updatedProps);\n    }\n\n    return updatedProps;\n  }\n\n  _buildResourceTransforms(gl, props) {\n    if (canCreateBufferTransform(props)) {\n      this.bufferTransform = new BufferTransform(gl, props);\n    }\n\n    if (canCreateTextureTransform(props)) {\n      this.textureTransform = new TextureTransform(gl, props);\n    }\n\n    assert(this.bufferTransform || this.textureTransform, 'must provide source/feedback buffers or source/target textures');\n  }\n\n  _updateDrawOptions(opts) {\n    let updatedOpts = Object.assign({}, opts);\n    const resourceTransforms = [this.bufferTransform, this.textureTransform].filter(Boolean);\n\n    for (const resourceTransform of resourceTransforms) {\n      updatedOpts = Object.assign(updatedOpts, resourceTransform.getDrawOptions(updatedOpts));\n    }\n\n    return updatedOpts;\n  }\n\n}\n\nfunction canCreateBufferTransform(props) {\n  if (!isObjectEmpty(props.feedbackBuffers) || !isObjectEmpty(props.feedbackMap) || props.varyings && props.varyings.length > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction canCreateTextureTransform(props) {\n  if (!isObjectEmpty(props._sourceTextures) || props._targetTexture || props._targetTextureVarying) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=transform.js.map","import { Buffer, Transform } from '@luma.gl/core';\nimport Attribute from '../lib/attribute/attribute';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Transition from './transition';\nexport default class GPUInterpolationTransition {\n  constructor({\n    gl,\n    attribute,\n    timeline\n  }) {\n    this.gl = gl;\n    this.type = 'interpolation';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, attribute.settings);\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.transform = getTransform(gl, attribute);\n    const bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  get inProgress() {\n    return this.transition.inProgress;\n  }\n\n  start(transitionSettings, numInstances) {\n    if (transitionSettings.duration <= 0) {\n      this.transition.cancel();\n      return;\n    }\n\n    const {\n      gl,\n      buffers,\n      attribute\n    } = this;\n    cycleBuffers(buffers);\n    const padBufferOpts = {\n      numInstances,\n      attribute,\n      fromLength: this.currentLength,\n      fromStartIndices: this.currentStartIndices,\n      getData: transitionSettings.enter\n    };\n\n    for (const buffer of buffers) {\n      padBuffer({\n        buffer,\n        ...padBufferOpts\n      });\n    }\n\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = getAttributeBufferLength(attribute, numInstances);\n    this.attributeInTransition.update({\n      buffer: buffers[1],\n      value: attribute.value\n    });\n    this.transition.start(transitionSettings);\n    this.transform.update({\n      elementCount: Math.floor(this.currentLength / attribute.size),\n      sourceBuffers: {\n        aFrom: buffers[0],\n        aTo: getSourceBufferAttribute(gl, attribute)\n      },\n      feedbackBuffers: {\n        vCurrent: buffers[1]\n      }\n    });\n  }\n\n  update() {\n    const updated = this.transition.update();\n\n    if (updated) {\n      const {\n        time,\n        settings: {\n          duration,\n          easing\n        }\n      } = this.transition;\n      const t = easing(time / duration);\n      this.transform.run({\n        uniforms: {\n          time: t\n        }\n      });\n    }\n\n    return updated;\n  }\n\n  cancel() {\n    this.transition.cancel();\n    this.transform.delete();\n\n    while (this.buffers.length) {\n      this.buffers.pop().delete();\n    }\n  }\n\n}\nconst vs = \"\\n#define SHADER_NAME interpolation-transition-vertex-shader\\n\\nuniform float time;\\nattribute ATTRIBUTE_TYPE aFrom;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vCurrent;\\n\\nvoid main(void) {\\n  vCurrent = mix(aFrom, aTo, time);\\n  gl_Position = vec4(0.0);\\n}\\n\";\n\nfunction getTransform(gl, attribute) {\n  const attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    vs,\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vCurrent']\n  });\n}\n//# sourceMappingURL=gpu-interpolation-transition.js.map","import { Buffer, Transform, Framebuffer, Texture2D, readPixelsToArray } from '@luma.gl/core';\nimport { padBuffer, getAttributeTypeFromSize, getSourceBufferAttribute, getAttributeBufferLength, cycleBuffers } from '../lib/attribute/attribute-transition-utils';\nimport Attribute from '../lib/attribute/attribute';\nimport Transition from './transition';\nexport default class GPUSpringTransition {\n  constructor({\n    gl,\n    attribute,\n    timeline\n  }) {\n    this.gl = gl;\n    this.type = 'spring';\n    this.transition = new Transition(timeline);\n    this.attribute = attribute;\n    this.attributeInTransition = new Attribute(gl, { ...attribute.settings,\n      normalized: false\n    });\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = 0;\n    this.texture = getTexture(gl);\n    this.framebuffer = getFramebuffer(gl, this.texture);\n    this.transform = getTransform(gl, attribute, this.framebuffer);\n    const bufferOpts = {\n      byteLength: 0,\n      usage: 35050\n    };\n    this.buffers = [new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts), new Buffer(gl, bufferOpts)];\n  }\n\n  get inProgress() {\n    return this.transition.inProgress;\n  }\n\n  start(transitionSettings, numInstances) {\n    const {\n      gl,\n      buffers,\n      attribute\n    } = this;\n    const padBufferOpts = {\n      numInstances,\n      attribute,\n      fromLength: this.currentLength,\n      fromStartIndices: this.currentStartIndices,\n      getData: transitionSettings.enter\n    };\n\n    for (const buffer of buffers) {\n      padBuffer({\n        buffer,\n        ...padBufferOpts\n      });\n    }\n\n    this.currentStartIndices = attribute.startIndices;\n    this.currentLength = getAttributeBufferLength(attribute, numInstances);\n    this.attributeInTransition.update({\n      buffer: buffers[1],\n      value: attribute.value\n    });\n    this.transition.start(transitionSettings);\n    this.transform.update({\n      elementCount: Math.floor(this.currentLength / attribute.size),\n      sourceBuffers: {\n        aTo: getSourceBufferAttribute(gl, attribute)\n      }\n    });\n  }\n\n  update() {\n    const {\n      buffers,\n      transform,\n      framebuffer,\n      transition\n    } = this;\n    const updated = transition.update();\n\n    if (!updated) {\n      return false;\n    }\n\n    transform.update({\n      sourceBuffers: {\n        aPrev: buffers[0],\n        aCur: buffers[1]\n      },\n      feedbackBuffers: {\n        vNext: buffers[2]\n      }\n    });\n    transform.run({\n      framebuffer,\n      discard: false,\n      clearRenderTarget: true,\n      uniforms: {\n        stiffness: transition.settings.stiffness,\n        damping: transition.settings.damping\n      },\n      parameters: {\n        depthTest: false,\n        blend: true,\n        viewport: [0, 0, 1, 1],\n        blendFunc: [1, 1],\n        blendEquation: [32776, 32776]\n      }\n    });\n    cycleBuffers(buffers);\n    this.attributeInTransition.update({\n      buffer: buffers[1],\n      value: this.attribute.value\n    });\n    const isTransitioning = readPixelsToArray(framebuffer)[0] > 0;\n\n    if (!isTransitioning) {\n      transition.end();\n    }\n\n    return true;\n  }\n\n  cancel() {\n    this.transition.cancel();\n    this.transform.delete();\n\n    while (this.buffers.length) {\n      this.buffers.pop().delete();\n    }\n\n    this.texture.delete();\n    this.texture = null;\n    this.framebuffer.delete();\n    this.framebuffer = null;\n  }\n\n}\n\nfunction getTransform(gl, attribute, framebuffer) {\n  const attributeType = getAttributeTypeFromSize(attribute.size);\n  return new Transform(gl, {\n    framebuffer,\n    vs: \"\\n#define SHADER_NAME spring-transition-vertex-shader\\n\\n#define EPSILON 0.00001\\n\\nuniform float stiffness;\\nuniform float damping;\\nattribute ATTRIBUTE_TYPE aPrev;\\nattribute ATTRIBUTE_TYPE aCur;\\nattribute ATTRIBUTE_TYPE aTo;\\nvarying ATTRIBUTE_TYPE vNext;\\nvarying float vIsTransitioningFlag;\\n\\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\\n  ATTRIBUTE_TYPE velocity = cur - prev;\\n  ATTRIBUTE_TYPE delta = dest - cur;\\n  ATTRIBUTE_TYPE spring = delta * stiffness;\\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\\n  return spring + damper + velocity + cur;\\n}\\n\\nvoid main(void) {\\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\\n\\n  vNext = getNextValue(aCur, aPrev, aTo);\\n  gl_Position = vec4(0, 0, 0, 1);\\n  gl_PointSize = 100.0;\\n}\\n\",\n    fs: \"\\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\\n\\nvarying float vIsTransitioningFlag;\\n\\nvoid main(void) {\\n  if (vIsTransitioningFlag == 0.0) {\\n    discard;\\n  }\\n  gl_FragColor = vec4(1.0);\\n}\",\n    defines: {\n      ATTRIBUTE_TYPE: attributeType\n    },\n    varyings: ['vNext']\n  });\n}\n\nfunction getTexture(gl) {\n  return new Texture2D(gl, {\n    data: new Uint8Array(4),\n    format: 6408,\n    type: 5121,\n    border: 0,\n    mipmaps: false,\n    dataFormat: 6408,\n    width: 1,\n    height: 1\n  });\n}\n\nfunction getFramebuffer(gl, texture) {\n  return new Framebuffer(gl, {\n    id: 'spring-transition-is-transitioning-framebuffer',\n    width: 1,\n    height: 1,\n    attachments: {\n      [36064]: texture\n    }\n  });\n}\n//# sourceMappingURL=gpu-spring-transition.js.map","import { Transform } from '@luma.gl/core';\nimport GPUInterpolationTransition from '../../transitions/gpu-interpolation-transition';\nimport GPUSpringTransition from '../../transitions/gpu-spring-transition';\nimport log from '../../utils/log';\nconst TRANSITION_TYPES = {\n  interpolation: GPUInterpolationTransition,\n  spring: GPUSpringTransition\n};\nexport default class AttributeTransitionManager {\n  constructor(gl, {\n    id,\n    timeline\n  }) {\n    this.id = id;\n    this.gl = gl;\n    this.timeline = timeline;\n    this.transitions = {};\n    this.needsRedraw = false;\n    this.numInstances = 1;\n    this.isSupported = Transform.isSupported(gl);\n  }\n\n  finalize() {\n    for (const attributeName in this.transitions) {\n      this._removeTransition(attributeName);\n    }\n  }\n\n  update({\n    attributes,\n    transitions,\n    numInstances\n  }) {\n    this.numInstances = numInstances || 1;\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const settings = attribute.getTransitionSetting(transitions);\n      if (!settings) continue;\n\n      this._updateAttribute(attributeName, attribute, settings);\n    }\n\n    for (const attributeName in this.transitions) {\n      const attribute = attributes[attributeName];\n\n      if (!attribute || !attribute.getTransitionSetting(transitions)) {\n        this._removeTransition(attributeName);\n      }\n    }\n  }\n\n  hasAttribute(attributeName) {\n    const transition = this.transitions[attributeName];\n    return transition && transition.inProgress;\n  }\n\n  getAttributes() {\n    const animatedAttributes = {};\n\n    for (const attributeName in this.transitions) {\n      const transition = this.transitions[attributeName];\n\n      if (transition.inProgress) {\n        animatedAttributes[attributeName] = transition.attributeInTransition;\n      }\n    }\n\n    return animatedAttributes;\n  }\n\n  run() {\n    if (!this.isSupported || this.numInstances === 0) {\n      return false;\n    }\n\n    for (const attributeName in this.transitions) {\n      const updated = this.transitions[attributeName].update();\n\n      if (updated) {\n        this.needsRedraw = true;\n      }\n    }\n\n    const needsRedraw = this.needsRedraw;\n    this.needsRedraw = false;\n    return needsRedraw;\n  }\n\n  _removeTransition(attributeName) {\n    this.transitions[attributeName].cancel();\n    delete this.transitions[attributeName];\n  }\n\n  _updateAttribute(attributeName, attribute, settings) {\n    const transition = this.transitions[attributeName];\n    let isNew = !transition || transition.type !== settings.type;\n\n    if (isNew) {\n      if (!this.isSupported) {\n        log.warn(\"WebGL2 not supported by this browser. Transition for \".concat(attributeName, \" is disabled.\"))();\n        return;\n      }\n\n      if (transition) {\n        this._removeTransition(attributeName);\n      }\n\n      const TransitionType = TRANSITION_TYPES[settings.type];\n\n      if (TransitionType) {\n        this.transitions[attributeName] = new TransitionType({\n          attribute,\n          timeline: this.timeline,\n          gl: this.gl\n        });\n      } else {\n        log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n        isNew = false;\n      }\n    }\n\n    if (isNew || attribute.needsRedraw()) {\n      this.needsRedraw = true;\n      this.transitions[attributeName].start(settings, this.numInstances);\n    }\n  }\n\n}\n//# sourceMappingURL=attribute-transition-manager.js.map","import Attribute from './attribute';\nimport log from '../../utils/log';\nimport debug from '../../debug';\nimport AttributeTransitionManager from './attribute-transition-manager';\nconst TRACE_INVALIDATE = 'attributeManager.invalidate';\nconst TRACE_UPDATE_START = 'attributeManager.updateStart';\nconst TRACE_UPDATE_END = 'attributeManager.updateEnd';\nconst TRACE_ATTRIBUTE_UPDATE_START = 'attribute.updateStart';\nconst TRACE_ATTRIBUTE_ALLOCATE = 'attribute.allocate';\nconst TRACE_ATTRIBUTE_UPDATE_END = 'attribute.updateEnd';\nexport default class AttributeManager {\n  constructor(gl, {\n    id = 'attribute-manager',\n    stats,\n    timeline\n  } = {}) {\n    this.id = id;\n    this.gl = gl;\n    this.attributes = {};\n    this.updateTriggers = {};\n    this.accessors = {};\n    this.needsRedraw = true;\n    this.userData = {};\n    this.stats = stats;\n    this.attributeTransitionManager = new AttributeTransitionManager(gl, {\n      id: \"\".concat(id, \"-transitions\"),\n      timeline\n    });\n    Object.seal(this);\n  }\n\n  finalize() {\n    for (const attributeName in this.attributes) {\n      this.attributes[attributeName].delete();\n    }\n\n    this.attributeTransitionManager.finalize();\n  }\n\n  getNeedsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    const redraw = this.needsRedraw;\n    this.needsRedraw = this.needsRedraw && !opts.clearRedrawFlags;\n    return redraw && this.id;\n  }\n\n  setNeedsRedraw(redraw = true) {\n    this.needsRedraw = true;\n    return this;\n  }\n\n  add(attributes, updaters) {\n    this._add(attributes, updaters);\n  }\n\n  addInstanced(attributes, updaters) {\n    this._add(attributes, updaters, {\n      instanced: 1\n    });\n  }\n\n  remove(attributeNameArray) {\n    for (let i = 0; i < attributeNameArray.length; i++) {\n      const name = attributeNameArray[i];\n\n      if (this.attributes[name] !== undefined) {\n        this.attributes[name].delete();\n        delete this.attributes[name];\n      }\n    }\n  }\n\n  invalidate(triggerName, dataRange) {\n    const invalidatedAttributes = this._invalidateTrigger(triggerName, dataRange);\n\n    debug(TRACE_INVALIDATE, this, triggerName, invalidatedAttributes);\n  }\n\n  invalidateAll(dataRange) {\n    for (const attributeName in this.attributes) {\n      this.attributes[attributeName].setNeedsUpdate(attributeName, dataRange);\n    }\n\n    debug(TRACE_INVALIDATE, this, 'all');\n  }\n\n  update({\n    data,\n    numInstances,\n    startIndices = null,\n    transitions,\n    props = {},\n    buffers = {},\n    context = {}\n  } = {}) {\n    let updated = false;\n    debug(TRACE_UPDATE_START, this);\n\n    if (this.stats) {\n      this.stats.get('Update Attributes').timeStart();\n    }\n\n    for (const attributeName in this.attributes) {\n      const attribute = this.attributes[attributeName];\n      const accessorName = attribute.settings.accessor;\n      attribute.startIndices = startIndices;\n\n      if (props[attributeName]) {\n        log.removed(\"props.\".concat(attributeName), \"data.attributes.\".concat(attributeName))();\n      }\n\n      if (attribute.setExternalBuffer(buffers[attributeName])) {} else if (attribute.setBinaryValue(buffers[accessorName], data.startIndices)) {} else if (!buffers[accessorName] && attribute.setConstantValue(props[accessorName])) {} else if (attribute.needsUpdate()) {\n        updated = true;\n\n        this._updateAttribute({\n          attribute,\n          numInstances,\n          data,\n          props,\n          context\n        });\n      }\n\n      this.needsRedraw |= attribute.needsRedraw();\n    }\n\n    if (updated) {\n      debug(TRACE_UPDATE_END, this, numInstances);\n    }\n\n    if (this.stats) {\n      this.stats.get('Update Attributes').timeEnd();\n    }\n\n    this.attributeTransitionManager.update({\n      attributes: this.attributes,\n      numInstances,\n      transitions\n    });\n  }\n\n  updateTransition() {\n    const {\n      attributeTransitionManager\n    } = this;\n    const transitionUpdated = attributeTransitionManager.run();\n    this.needsRedraw = this.needsRedraw || transitionUpdated;\n    return transitionUpdated;\n  }\n\n  getAttributes() {\n    return this.attributes;\n  }\n\n  getChangedAttributes(opts = {\n    clearChangedFlags: false\n  }) {\n    const {\n      attributes,\n      attributeTransitionManager\n    } = this;\n    const changedAttributes = { ...attributeTransitionManager.getAttributes()\n    };\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n\n      if (attribute.needsRedraw(opts) && !attributeTransitionManager.hasAttribute(attributeName)) {\n        changedAttributes[attributeName] = attribute;\n      }\n    }\n\n    return changedAttributes;\n  }\n\n  getShaderAttributes(attributes, excludeAttributes = {}) {\n    if (!attributes) {\n      attributes = this.getAttributes();\n    }\n\n    const shaderAttributes = {};\n\n    for (const attributeName in attributes) {\n      if (!excludeAttributes[attributeName]) {\n        Object.assign(shaderAttributes, attributes[attributeName].getShaderAttributes());\n      }\n    }\n\n    return shaderAttributes;\n  }\n\n  getAccessors() {\n    return this.updateTriggers;\n  }\n\n  _add(attributes, updaters, extraProps = {}) {\n    if (updaters) {\n      log.warn('AttributeManager.add({updaters}) - updater map no longer supported')();\n    }\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      this.attributes[attributeName] = this._createAttribute(attributeName, attribute, extraProps);\n    }\n\n    this._mapUpdateTriggersToAttributes();\n  }\n\n  _createAttribute(name, attribute, extraProps) {\n    const props = { ...attribute,\n      id: name,\n      isIndexed: attribute.isIndexed || attribute.elements || false,\n      constant: attribute.constant || false,\n      size: attribute.elements && 1 || attribute.size || 1,\n      value: attribute.value || null,\n      divisor: attribute.instanced || extraProps.instanced ? 1 : attribute.divisor || 0\n    };\n    return new Attribute(this.gl, props);\n  }\n\n  _mapUpdateTriggersToAttributes() {\n    const triggers = {};\n\n    for (const attributeName in this.attributes) {\n      const attribute = this.attributes[attributeName];\n      attribute.getUpdateTriggers().forEach(triggerName => {\n        if (!triggers[triggerName]) {\n          triggers[triggerName] = [];\n        }\n\n        triggers[triggerName].push(attributeName);\n      });\n    }\n\n    this.updateTriggers = triggers;\n  }\n\n  _invalidateTrigger(triggerName, dataRange) {\n    const {\n      attributes,\n      updateTriggers\n    } = this;\n    const invalidatedAttributes = updateTriggers[triggerName];\n\n    if (invalidatedAttributes) {\n      invalidatedAttributes.forEach(name => {\n        const attribute = attributes[name];\n\n        if (attribute) {\n          attribute.setNeedsUpdate(attribute.id, dataRange);\n        }\n      });\n    }\n\n    return invalidatedAttributes;\n  }\n\n  _updateAttribute(opts) {\n    const {\n      attribute,\n      numInstances\n    } = opts;\n    debug(TRACE_ATTRIBUTE_UPDATE_START, attribute);\n\n    if (attribute.constant) {\n      attribute.setConstantValue(attribute.value);\n      return;\n    }\n\n    if (attribute.allocate(numInstances)) {\n      debug(TRACE_ATTRIBUTE_ALLOCATE, attribute, numInstances);\n    }\n\n    const updated = attribute.updateBuffer(opts);\n\n    if (updated) {\n      this.needsRedraw = true;\n      debug(TRACE_ATTRIBUTE_UPDATE_END, attribute, numInstances);\n    }\n  }\n\n}\n//# sourceMappingURL=attribute-manager.js.map","import { lerp } from 'math.gl';\nimport Transition from './transition';\nexport default class CPUInterpolationTransition extends Transition {\n  get value() {\n    return this._value;\n  }\n\n  _onUpdate() {\n    const {\n      time,\n      settings: {\n        fromValue,\n        toValue,\n        duration,\n        easing\n      }\n    } = this;\n    const t = easing(time / duration);\n    this._value = lerp(fromValue, toValue, t);\n  }\n\n}\n//# sourceMappingURL=cpu-interpolation-transition.js.map","import Transition from './transition';\nconst EPSILON = 1e-5;\n\nfunction updateSpringElement(prev, cur, dest, damping, stiffness) {\n  const velocity = cur - prev;\n  const delta = dest - cur;\n  const spring = delta * stiffness;\n  const damper = -velocity * damping;\n  return spring + damper + velocity + cur;\n}\n\nfunction updateSpring(prev, cur, dest, damping, stiffness) {\n  if (Array.isArray(dest)) {\n    const next = [];\n\n    for (let i = 0; i < dest.length; i++) {\n      next[i] = updateSpringElement(prev[i], cur[i], dest[i], damping, stiffness);\n    }\n\n    return next;\n  }\n\n  return updateSpringElement(prev, cur, dest, damping, stiffness);\n}\n\nfunction distance(value1, value2) {\n  if (Array.isArray(value1)) {\n    let distanceSquare = 0;\n\n    for (let i = 0; i < value1.length; i++) {\n      const d = value1[i] - value2[i];\n      distanceSquare += d * d;\n    }\n\n    return Math.sqrt(distanceSquare);\n  }\n\n  return Math.abs(value1 - value2);\n}\n\nexport default class CPUSpringTransition extends Transition {\n  get value() {\n    return this._currValue;\n  }\n\n  _onUpdate() {\n    const {\n      fromValue,\n      toValue,\n      damping,\n      stiffness\n    } = this.settings;\n    const {\n      _prevValue = fromValue,\n      _currValue = fromValue\n    } = this;\n    let nextValue = updateSpring(_prevValue, _currValue, toValue, damping, stiffness);\n    const delta = distance(nextValue, toValue);\n    const velocity = distance(nextValue, _currValue);\n\n    if (delta < EPSILON && velocity < EPSILON) {\n      nextValue = toValue;\n      this.end();\n    }\n\n    this._prevValue = _currValue;\n    this._currValue = nextValue;\n  }\n\n}\n//# sourceMappingURL=cpu-spring-transition.js.map","import { normalizeTransitionSettings } from './attribute/attribute-transition-utils';\nimport CPUInterpolationTransition from '../transitions/cpu-interpolation-transition';\nimport CPUSpringTransition from '../transitions/cpu-spring-transition';\nimport log from '../utils/log';\nconst TRANSITION_TYPES = {\n  interpolation: CPUInterpolationTransition,\n  spring: CPUSpringTransition\n};\nexport default class UniformTransitionManager {\n  constructor(timeline) {\n    this.transitions = new Map();\n    this.timeline = timeline;\n  }\n\n  get active() {\n    return this.transitions.size > 0;\n  }\n\n  add(key, fromValue, toValue, settings) {\n    const {\n      transitions\n    } = this;\n\n    if (transitions.has(key)) {\n      const transition = transitions.get(key);\n      const {\n        value = transition.settings.fromValue\n      } = transition;\n      fromValue = value;\n      this.remove(key);\n    }\n\n    settings = normalizeTransitionSettings(settings);\n\n    if (!settings) {\n      return;\n    }\n\n    const TransitionType = TRANSITION_TYPES[settings.type];\n\n    if (!TransitionType) {\n      log.error(\"unsupported transition type '\".concat(settings.type, \"'\"))();\n      return;\n    }\n\n    const transition = new TransitionType(this.timeline);\n    transition.start({ ...settings,\n      fromValue,\n      toValue\n    });\n    transitions.set(key, transition);\n  }\n\n  remove(key) {\n    const {\n      transitions\n    } = this;\n\n    if (transitions.has(key)) {\n      transitions.get(key).cancel();\n      transitions.delete(key);\n    }\n  }\n\n  update() {\n    const propsInTransition = {};\n\n    for (const [key, transition] of this.transitions) {\n      transition.update();\n      propsInTransition[key] = transition.value;\n\n      if (!transition.inProgress) {\n        this.remove(key);\n      }\n    }\n\n    return propsInTransition;\n  }\n\n  clear() {\n    for (const key of this.transitions.keys()) {\n      this.remove(key);\n    }\n  }\n\n}\n//# sourceMappingURL=uniform-transition-manager.js.map","import { PROP_SYMBOLS } from './constants';\nconst {\n  COMPONENT\n} = PROP_SYMBOLS;\nexport function validateProps(props) {\n  const propTypes = getPropTypes(props);\n\n  for (const propName in propTypes) {\n    const propType = propTypes[propName];\n    const {\n      validate\n    } = propType;\n\n    if (validate && !validate(props[propName], propType)) {\n      throw new Error(\"Invalid prop \".concat(propName, \": \").concat(props[propName]));\n    }\n  }\n}\nexport function diffProps(props, oldProps) {\n  const propsChangedReason = compareProps({\n    newProps: props,\n    oldProps,\n    propTypes: getPropTypes(props),\n    ignoreProps: {\n      data: null,\n      updateTriggers: null,\n      extensions: null,\n      transitions: null\n    }\n  });\n  const dataChangedReason = diffDataProps(props, oldProps);\n  let updateTriggersChangedReason = false;\n\n  if (!dataChangedReason) {\n    updateTriggersChangedReason = diffUpdateTriggers(props, oldProps);\n  }\n\n  return {\n    dataChanged: dataChangedReason,\n    propsChanged: propsChangedReason,\n    updateTriggersChanged: updateTriggersChangedReason,\n    extensionsChanged: diffExtensions(props, oldProps),\n    transitionsChanged: diffTransitions(props, oldProps)\n  };\n}\n\nfunction diffTransitions(props, oldProps) {\n  if (!props.transitions) {\n    return null;\n  }\n\n  const result = {};\n  const propTypes = getPropTypes(props);\n\n  for (const key in props.transitions) {\n    const propType = propTypes[key];\n    const type = propType && propType.type;\n    const isTransitionable = type === 'number' || type === 'color' || type === 'array';\n\n    if (isTransitionable && comparePropValues(props[key], oldProps[key], propType)) {\n      result[key] = true;\n    }\n  }\n\n  return result;\n}\n\nexport function compareProps({\n  newProps,\n  oldProps,\n  ignoreProps = {},\n  propTypes = {},\n  triggerName = 'props'\n} = {}) {\n  if (oldProps === newProps) {\n    return null;\n  }\n\n  if (typeof newProps !== 'object' || newProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  if (typeof oldProps !== 'object' || oldProps === null) {\n    return \"\".concat(triggerName, \" changed shallowly\");\n  }\n\n  for (const key of Object.keys(newProps)) {\n    if (!(key in ignoreProps)) {\n      if (!(key in oldProps)) {\n        return \"\".concat(triggerName, \".\").concat(key, \" added\");\n      }\n\n      const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n      if (changed) {\n        return \"\".concat(triggerName, \".\").concat(key, \" \").concat(changed);\n      }\n    }\n  }\n\n  for (const key of Object.keys(oldProps)) {\n    if (!(key in ignoreProps)) {\n      if (!(key in newProps)) {\n        return \"\".concat(triggerName, \".\").concat(key, \" dropped\");\n      }\n\n      if (!Object.hasOwnProperty.call(newProps, key)) {\n        const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n\n        if (changed) {\n          return \"\".concat(triggerName, \".\").concat(key, \" \").concat(changed);\n        }\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction comparePropValues(newProp, oldProp, propType) {\n  let equal = propType && propType.equal;\n\n  if (equal && !equal(newProp, oldProp, propType)) {\n    return 'changed deeply';\n  }\n\n  if (!equal) {\n    equal = newProp && oldProp && newProp.equals;\n\n    if (equal && !equal.call(newProp, oldProp)) {\n      return 'changed deeply';\n    }\n  }\n\n  if (!equal && oldProp !== newProp) {\n    return 'changed shallowly';\n  }\n\n  return null;\n}\n\nfunction diffDataProps(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  let dataChanged = null;\n  const {\n    dataComparator,\n    _dataDiff\n  } = props;\n\n  if (dataComparator) {\n    if (!dataComparator(props.data, oldProps.data)) {\n      dataChanged = 'Data comparator detected a change';\n    }\n  } else if (props.data !== oldProps.data) {\n    dataChanged = 'A new data container was supplied';\n  }\n\n  if (dataChanged && _dataDiff) {\n    dataChanged = _dataDiff(props.data, oldProps.data) || dataChanged;\n  }\n\n  return dataChanged;\n}\n\nfunction diffUpdateTriggers(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  if ('all' in props.updateTriggers) {\n    const diffReason = diffUpdateTrigger(props, oldProps, 'all');\n\n    if (diffReason) {\n      return {\n        all: true\n      };\n    }\n  }\n\n  const triggerChanged = {};\n  let reason = false;\n\n  for (const triggerName in props.updateTriggers) {\n    if (triggerName !== 'all') {\n      const diffReason = diffUpdateTrigger(props, oldProps, triggerName);\n\n      if (diffReason) {\n        triggerChanged[triggerName] = true;\n        reason = triggerChanged;\n      }\n    }\n  }\n\n  return reason;\n}\n\nfunction diffExtensions(props, oldProps) {\n  if (oldProps === null) {\n    return 'oldProps is null, initial diff';\n  }\n\n  const oldExtensions = oldProps.extensions;\n  const {\n    extensions\n  } = props;\n\n  if (extensions === oldExtensions) {\n    return false;\n  }\n\n  if (extensions.length !== oldExtensions.length) {\n    return true;\n  }\n\n  for (let i = 0; i < extensions.length; i++) {\n    if (!extensions[i].equals(oldExtensions[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction diffUpdateTrigger(props, oldProps, triggerName) {\n  let newTriggers = props.updateTriggers[triggerName];\n  newTriggers = newTriggers === undefined || newTriggers === null ? {} : newTriggers;\n  let oldTriggers = oldProps.updateTriggers[triggerName];\n  oldTriggers = oldTriggers === undefined || oldTriggers === null ? {} : oldTriggers;\n  const diffReason = compareProps({\n    oldProps: oldTriggers,\n    newProps: newTriggers,\n    triggerName\n  });\n  return diffReason;\n}\n\nfunction getPropTypes(props) {\n  const layer = props[COMPONENT];\n  const LayerType = layer && layer.constructor;\n  return LayerType ? LayerType._propTypes : {};\n}\n//# sourceMappingURL=props.js.map","const ERR_NOT_OBJECT = 'count(): argument not an object';\nconst ERR_NOT_CONTAINER = 'count(): argument not a container';\nexport function count(container) {\n  if (!isObject(container)) {\n    throw new Error(ERR_NOT_OBJECT);\n  }\n\n  if (typeof container.count === 'function') {\n    return container.count();\n  }\n\n  if (Number.isFinite(container.size)) {\n    return container.size;\n  }\n\n  if (Number.isFinite(container.length)) {\n    return container.length;\n  }\n\n  if (isPlainObject(container)) {\n    return Object.keys(container).length;\n  }\n\n  throw new Error(ERR_NOT_CONTAINER);\n}\n\nfunction isPlainObject(value) {\n  return value !== null && typeof value === 'object' && value.constructor === Object;\n}\n\nfunction isObject(value) {\n  return value !== null && typeof value === 'object';\n}\n//# sourceMappingURL=count.js.map","export function mergeShaders(target, source) {\n  if (!source) {\n    return target;\n  }\n\n  const result = { ...target,\n    ...source\n  };\n\n  if ('defines' in source) {\n    result.defines = { ...target.defines,\n      ...source.defines\n    };\n  }\n\n  if ('modules' in source) {\n    result.modules = (target.modules || []).concat(source.modules);\n\n    if (source.modules.some(module => module.name === 'project64')) {\n      const index = result.modules.findIndex(module => module.name === 'project32');\n\n      if (index >= 0) {\n        result.modules.splice(index, 1);\n      }\n    }\n  }\n\n  if ('inject' in source) {\n    if (!target.inject) {\n      result.inject = source.inject;\n    } else {\n      const mergedInjection = { ...target.inject\n      };\n\n      for (const key in source.inject) {\n        mergedInjection[key] = (mergedInjection[key] || '') + source.inject[key];\n      }\n\n      result.inject = mergedInjection;\n    }\n  }\n\n  return result;\n}\n//# sourceMappingURL=shader.js.map","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import { COORDINATE_SYSTEM } from '../../lib/constants';\nimport { getOffsetOrigin } from './viewport-uniforms';\nimport WebMercatorViewport from '../../viewports/web-mercator-viewport';\nimport * as vec4 from 'gl-matrix/vec4';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { addMetersToLngLat } from '@math.gl/web-mercator';\n\nfunction lngLatZToWorldPosition(lngLatZ, viewport, offsetMode = false) {\n  const p = viewport.projectPosition(lngLatZ);\n\n  if (offsetMode && viewport instanceof WebMercatorViewport) {\n    const [longitude, latitude, z = 0] = lngLatZ;\n    const distanceScales = viewport.getDistanceScales([longitude, latitude]);\n    p[2] = z * distanceScales.unitsPerMeter[2];\n  }\n\n  return p;\n}\n\nfunction normalizeParameters(opts) {\n  const normalizedParams = { ...opts\n  };\n  let {\n    coordinateSystem\n  } = opts;\n  const {\n    viewport,\n    coordinateOrigin,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  } = opts;\n\n  if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n    coordinateSystem = viewport.isGeospatial ? COORDINATE_SYSTEM.LNGLAT : COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  if (fromCoordinateSystem === undefined) {\n    normalizedParams.fromCoordinateSystem = coordinateSystem;\n  }\n\n  if (fromCoordinateOrigin === undefined) {\n    normalizedParams.fromCoordinateOrigin = coordinateOrigin;\n  }\n\n  normalizedParams.coordinateSystem = coordinateSystem;\n  return normalizedParams;\n}\n\nexport function getWorldPosition(position, {\n  viewport,\n  modelMatrix,\n  coordinateSystem,\n  coordinateOrigin,\n  offsetMode\n}) {\n  let [x, y, z = 0] = position;\n\n  if (modelMatrix) {\n    [x, y, z] = vec4.transformMat4([], [x, y, z, 1.0], modelMatrix);\n  }\n\n  switch (coordinateSystem) {\n    case COORDINATE_SYSTEM.LNGLAT:\n      return lngLatZToWorldPosition([x, y, z], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n      return lngLatZToWorldPosition([x + coordinateOrigin[0], y + coordinateOrigin[1], z + (coordinateOrigin[2] || 0)], viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.METER_OFFSETS:\n      return lngLatZToWorldPosition(addMetersToLngLat(coordinateOrigin, [x, y, z]), viewport, offsetMode);\n\n    case COORDINATE_SYSTEM.CARTESIAN:\n    default:\n      return viewport.isGeospatial ? [x + coordinateOrigin[0], y + coordinateOrigin[1], z + coordinateOrigin[2]] : viewport.projectPosition([x, y, z]);\n  }\n}\nexport function projectPosition(position, params) {\n  const {\n    viewport,\n    coordinateSystem,\n    coordinateOrigin,\n    modelMatrix,\n    fromCoordinateSystem,\n    fromCoordinateOrigin\n  } = normalizeParameters(params);\n  const {\n    geospatialOrigin,\n    shaderCoordinateOrigin,\n    offsetMode\n  } = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin);\n  const worldPosition = getWorldPosition(position, {\n    viewport,\n    modelMatrix,\n    coordinateSystem: fromCoordinateSystem,\n    coordinateOrigin: fromCoordinateOrigin,\n    offsetMode\n  });\n\n  if (offsetMode) {\n    const positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n    vec3.sub(worldPosition, worldPosition, positionCommonSpace);\n  }\n\n  return worldPosition;\n}\n//# sourceMappingURL=project-functions.js.map","import { Texture2D } from '@luma.gl/core';\nconst DEFAULT_TEXTURE_PARAMETERS = {\n  [10241]: 9987,\n  [10240]: 9729,\n  [10242]: 33071,\n  [10243]: 33071\n};\nconst internalTextures = {};\nexport function createTexture(layer, image) {\n  const gl = layer.context && layer.context.gl;\n\n  if (!gl || !image) {\n    return null;\n  }\n\n  if (image instanceof Texture2D) {\n    return image;\n  } else if (image.constructor && image.constructor.name !== 'Object') {\n    image = {\n      data: image\n    };\n  }\n\n  let specialTextureParameters = null;\n\n  if (image.compressed) {\n    specialTextureParameters = {\n      [10241]: image.data.length > 1 ? 9985 : 9729\n    };\n  }\n\n  const texture = new Texture2D(gl, { ...image,\n    parameters: { ...DEFAULT_TEXTURE_PARAMETERS,\n      ...specialTextureParameters,\n      ...layer.props.textureParameters\n    }\n  });\n  internalTextures[texture.id] = true;\n  return texture;\n}\nexport function destroyTexture(texture) {\n  if (!texture || !(texture instanceof Texture2D)) {\n    return;\n  }\n\n  if (internalTextures[texture.id]) {\n    texture.delete();\n    delete internalTextures[texture.id];\n  }\n}\n//# sourceMappingURL=texture.js.map","import { createTexture, destroyTexture } from '../utils/texture';\nconst TYPE_DEFINITIONS = {\n  boolean: {\n    validate(value, propType) {\n      return true;\n    },\n\n    equal(value1, value2, propType) {\n      return Boolean(value1) === Boolean(value2);\n    }\n\n  },\n  number: {\n    validate(value, propType) {\n      return Number.isFinite(value) && (!('max' in propType) || value <= propType.max) && (!('min' in propType) || value >= propType.min);\n    }\n\n  },\n  color: {\n    validate(value, propType) {\n      return propType.optional && !value || isArray(value) && (value.length === 3 || value.length === 4);\n    },\n\n    equal(value1, value2, propType) {\n      return arrayEqual(value1, value2);\n    }\n\n  },\n  accessor: {\n    validate(value, propType) {\n      const valueType = getTypeOf(value);\n      return valueType === 'function' || valueType === getTypeOf(propType.value);\n    },\n\n    equal(value1, value2, propType) {\n      if (typeof value2 === 'function') {\n        return true;\n      }\n\n      return arrayEqual(value1, value2);\n    }\n\n  },\n  array: {\n    validate(value, propType) {\n      return propType.optional && !value || isArray(value);\n    },\n\n    equal(value1, value2, propType) {\n      return propType.compare ? arrayEqual(value1, value2) : value1 === value2;\n    }\n\n  },\n  function: {\n    validate(value, propType) {\n      return propType.optional && !value || typeof value === 'function';\n    },\n\n    equal(value1, value2, propType) {\n      return !propType.compare || value1 === value2;\n    }\n\n  },\n  data: {\n    transform: (value, propType, component) => {\n      const {\n        dataTransform\n      } = component ? component.props : {};\n      return dataTransform && value ? dataTransform(value) : value;\n    }\n  },\n  image: {\n    transform: (value, propType, component) => {\n      return createTexture(component, value);\n    },\n    release: value => {\n      destroyTexture(value);\n    }\n  }\n};\n\nfunction arrayEqual(array1, array2) {\n  if (array1 === array2) {\n    return true;\n  }\n\n  if (!isArray(array1) || !isArray(array2)) {\n    return false;\n  }\n\n  const len = array1.length;\n\n  if (len !== array2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < len; i++) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function parsePropTypes(propDefs) {\n  const propTypes = {};\n  const defaultProps = {};\n  const deprecatedProps = {};\n\n  for (const [propName, propDef] of Object.entries(propDefs)) {\n    if (propDef && propDef.deprecatedFor) {\n      deprecatedProps[propName] = Array.isArray(propDef.deprecatedFor) ? propDef.deprecatedFor : [propDef.deprecatedFor];\n    } else {\n      const propType = parsePropType(propName, propDef);\n      propTypes[propName] = propType;\n      defaultProps[propName] = propType.value;\n    }\n  }\n\n  return {\n    propTypes,\n    defaultProps,\n    deprecatedProps\n  };\n}\n\nfunction parsePropType(name, propDef) {\n  switch (getTypeOf(propDef)) {\n    case 'object':\n      return normalizePropDefinition(name, propDef);\n\n    case 'array':\n      return normalizePropDefinition(name, {\n        type: 'array',\n        value: propDef,\n        compare: false\n      });\n\n    case 'boolean':\n      return normalizePropDefinition(name, {\n        type: 'boolean',\n        value: propDef\n      });\n\n    case 'number':\n      return normalizePropDefinition(name, {\n        type: 'number',\n        value: propDef\n      });\n\n    case 'function':\n      return normalizePropDefinition(name, {\n        type: 'function',\n        value: propDef,\n        compare: true\n      });\n\n    default:\n      return {\n        name,\n        type: 'unknown',\n        value: propDef\n      };\n  }\n}\n\nfunction normalizePropDefinition(name, propDef) {\n  if (!('type' in propDef)) {\n    if (!('value' in propDef)) {\n      return {\n        name,\n        type: 'object',\n        value: propDef\n      };\n    }\n\n    return {\n      name,\n      type: getTypeOf(propDef.value),\n      ...propDef\n    };\n  }\n\n  return {\n    name,\n    ...TYPE_DEFINITIONS[propDef.type],\n    ...propDef\n  };\n}\n\nfunction isArray(value) {\n  return Array.isArray(value) || ArrayBuffer.isView(value);\n}\n\nfunction getTypeOf(value) {\n  if (isArray(value)) {\n    return 'array';\n  }\n\n  if (value === null) {\n    return 'null';\n  }\n\n  return typeof value;\n}\n//# sourceMappingURL=prop-types.js.map","import log from '../utils/log';\nimport { isAsyncIterable } from '../utils/iterable-utils';\nimport { parsePropTypes } from './prop-types';\nimport { PROP_SYMBOLS } from './constants';\nconst {\n  COMPONENT,\n  ASYNC_ORIGINAL,\n  ASYNC_RESOLVED,\n  ASYNC_DEFAULTS\n} = PROP_SYMBOLS;\nexport function createProps() {\n  const component = this;\n  const propsPrototype = getPropsPrototype(component.constructor);\n  const propsInstance = Object.create(propsPrototype);\n  propsInstance[COMPONENT] = component;\n  propsInstance[ASYNC_ORIGINAL] = {};\n  propsInstance[ASYNC_RESOLVED] = {};\n\n  for (let i = 0; i < arguments.length; ++i) {\n    const props = arguments[i];\n\n    for (const key in props) {\n      propsInstance[key] = props[key];\n    }\n  }\n\n  Object.freeze(propsInstance);\n  return propsInstance;\n}\n\nfunction getPropsPrototype(componentClass) {\n  const defaultProps = getOwnProperty(componentClass, '_mergedDefaultProps');\n\n  if (!defaultProps) {\n    createPropsPrototypeAndTypes(componentClass);\n    return componentClass._mergedDefaultProps;\n  }\n\n  return defaultProps;\n}\n\nfunction createPropsPrototypeAndTypes(componentClass) {\n  const parent = componentClass.prototype;\n\n  if (!parent) {\n    return;\n  }\n\n  const parentClass = Object.getPrototypeOf(componentClass);\n  const parentDefaultProps = getPropsPrototype(parentClass);\n  const componentDefaultProps = getOwnProperty(componentClass, 'defaultProps') || {};\n  const componentPropDefs = parsePropTypes(componentDefaultProps);\n  const defaultProps = createPropsPrototype(componentPropDefs.defaultProps, parentDefaultProps, componentClass);\n  const propTypes = { ...parentClass._propTypes,\n    ...componentPropDefs.propTypes\n  };\n  addAsyncPropsToPropPrototype(defaultProps, propTypes);\n  const deprecatedProps = { ...parentClass._deprecatedProps,\n    ...componentPropDefs.deprecatedProps\n  };\n  addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps);\n  componentClass._mergedDefaultProps = defaultProps;\n  componentClass._propTypes = propTypes;\n  componentClass._deprecatedProps = deprecatedProps;\n}\n\nfunction createPropsPrototype(props, parentProps, componentClass) {\n  const defaultProps = Object.create(null);\n  Object.assign(defaultProps, parentProps, props);\n  const id = getComponentName(componentClass);\n  delete props.id;\n  Object.defineProperties(defaultProps, {\n    id: {\n      writable: true,\n      value: id\n    }\n  });\n  return defaultProps;\n}\n\nfunction addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps) {\n  for (const propName in deprecatedProps) {\n    Object.defineProperty(defaultProps, propName, {\n      enumerable: false,\n\n      set(newValue) {\n        const nameStr = \"\".concat(this.id, \": \").concat(propName);\n\n        for (const newPropName of deprecatedProps[propName]) {\n          if (!hasOwnProperty(this, newPropName)) {\n            this[newPropName] = newValue;\n          }\n        }\n\n        log.deprecated(nameStr, deprecatedProps[propName].join('/'))();\n      }\n\n    });\n  }\n}\n\nfunction addAsyncPropsToPropPrototype(defaultProps, propTypes) {\n  const defaultValues = {};\n  const descriptors = {};\n\n  for (const propName in propTypes) {\n    const propType = propTypes[propName];\n    const {\n      name,\n      value\n    } = propType;\n\n    if (propType.async) {\n      defaultValues[name] = value;\n      descriptors[name] = getDescriptorForAsyncProp(name, value);\n    }\n  }\n\n  defaultProps[ASYNC_DEFAULTS] = defaultValues;\n  defaultProps[ASYNC_ORIGINAL] = {};\n  Object.defineProperties(defaultProps, descriptors);\n}\n\nfunction getDescriptorForAsyncProp(name) {\n  return {\n    enumerable: true,\n\n    set(newValue) {\n      if (typeof newValue === 'string' || newValue instanceof Promise || isAsyncIterable(newValue)) {\n        this[ASYNC_ORIGINAL][name] = newValue;\n      } else {\n        this[ASYNC_RESOLVED][name] = newValue;\n      }\n    },\n\n    get() {\n      if (this[ASYNC_RESOLVED]) {\n        if (name in this[ASYNC_RESOLVED]) {\n          const value = this[ASYNC_RESOLVED][name];\n          return value || this[ASYNC_DEFAULTS][name];\n        }\n\n        if (name in this[ASYNC_ORIGINAL]) {\n          const state = this[COMPONENT] && this[COMPONENT].internalState;\n\n          if (state && state.hasAsyncProp(name)) {\n            return state.getAsyncProp(name) || this[ASYNC_DEFAULTS][name];\n          }\n        }\n      }\n\n      return this[ASYNC_DEFAULTS][name];\n    }\n\n  };\n}\n\nfunction hasOwnProperty(object, prop) {\n  return Object.prototype.hasOwnProperty.call(object, prop);\n}\n\nfunction getOwnProperty(object, prop) {\n  return hasOwnProperty(object, prop) && object[prop];\n}\n\nfunction getComponentName(componentClass) {\n  const componentName = getOwnProperty(componentClass, 'layerName') || getOwnProperty(componentClass, 'componentName');\n\n  if (!componentName) {\n    log.once(0, \"\".concat(componentClass.name, \".componentName not specified\"))();\n  }\n\n  return componentName || componentClass.name;\n}\n//# sourceMappingURL=create-props.js.map","import { isAsyncIterable } from '../utils/iterable-utils';\nimport { PROP_SYMBOLS } from './constants';\nconst {\n  ASYNC_ORIGINAL,\n  ASYNC_RESOLVED,\n  ASYNC_DEFAULTS\n} = PROP_SYMBOLS;\nconst EMPTY_PROPS = Object.freeze({});\nexport default class ComponentState {\n  constructor(component = null) {\n    this.component = component;\n    this.asyncProps = {};\n\n    this.onAsyncPropUpdated = () => {};\n\n    this.oldProps = EMPTY_PROPS;\n    this.oldAsyncProps = null;\n  }\n\n  finalize() {\n    for (const propName in this.asyncProps) {\n      const asyncProp = this.asyncProps[propName];\n\n      if (asyncProp.type && asyncProp.type.release) {\n        asyncProp.type.release(asyncProp.resolvedValue, asyncProp.type, this.component);\n      }\n    }\n  }\n\n  getOldProps() {\n    return this.oldAsyncProps || this.oldProps;\n  }\n\n  resetOldProps() {\n    this.oldAsyncProps = null;\n    this.oldProps = this.component.props;\n  }\n\n  freezeAsyncOldProps() {\n    if (!this.oldAsyncProps) {\n      this.oldProps = this.oldProps || this.component.props;\n      this.oldAsyncProps = Object.create(this.oldProps);\n\n      for (const propName in this.asyncProps) {\n        Object.defineProperty(this.oldAsyncProps, propName, {\n          enumerable: true,\n          value: this.oldProps[propName]\n        });\n      }\n    }\n  }\n\n  hasAsyncProp(propName) {\n    return propName in this.asyncProps;\n  }\n\n  getAsyncProp(propName) {\n    const asyncProp = this.asyncProps[propName];\n    return asyncProp && asyncProp.resolvedValue;\n  }\n\n  isAsyncPropLoading(propName) {\n    if (propName) {\n      const asyncProp = this.asyncProps[propName];\n      return Boolean(asyncProp && asyncProp.pendingLoadCount > 0 && asyncProp.pendingLoadCount !== asyncProp.resolvedLoadCount);\n    }\n\n    for (const key in this.asyncProps) {\n      if (this.isAsyncPropLoading(key)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  reloadAsyncProp(propName, value) {\n    this._watchPromise(propName, Promise.resolve(value));\n  }\n\n  setAsyncProps(props) {\n    const resolvedValues = props[ASYNC_RESOLVED] || {};\n    const originalValues = props[ASYNC_ORIGINAL] || props;\n    const defaultValues = props[ASYNC_DEFAULTS] || {};\n\n    for (const propName in resolvedValues) {\n      const value = resolvedValues[propName];\n\n      this._createAsyncPropData(propName, defaultValues[propName]);\n\n      this._updateAsyncProp(propName, value);\n\n      resolvedValues[propName] = this.getAsyncProp(propName);\n    }\n\n    for (const propName in originalValues) {\n      const value = originalValues[propName];\n\n      this._createAsyncPropData(propName, defaultValues[propName]);\n\n      this._updateAsyncProp(propName, value);\n    }\n  }\n\n  _updateAsyncProp(propName, value) {\n    if (!this._didAsyncInputValueChange(propName, value)) {\n      return;\n    }\n\n    if (typeof value === 'string') {\n      var _this$layer;\n\n      const fetch = (_this$layer = this.layer) === null || _this$layer === void 0 ? void 0 : _this$layer.props.fetch;\n      const url = value;\n\n      if (fetch) {\n        value = fetch(url, {\n          propName,\n          layer: this.layer\n        });\n      }\n    }\n\n    if (value instanceof Promise) {\n      this._watchPromise(propName, value);\n\n      return;\n    }\n\n    if (isAsyncIterable(value)) {\n      this._resolveAsyncIterable(propName, value);\n\n      return;\n    }\n\n    this._setPropValue(propName, value);\n  }\n\n  _didAsyncInputValueChange(propName, value) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (value === asyncProp.resolvedValue || value === asyncProp.lastValue) {\n      return false;\n    }\n\n    asyncProp.lastValue = value;\n    return true;\n  }\n\n  _setPropValue(propName, value) {\n    this.freezeAsyncOldProps();\n    const asyncProp = this.asyncProps[propName];\n    value = this._postProcessValue(asyncProp, value);\n    asyncProp.resolvedValue = value;\n    asyncProp.pendingLoadCount++;\n    asyncProp.resolvedLoadCount = asyncProp.pendingLoadCount;\n  }\n\n  _setAsyncPropValue(propName, value, loadCount) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (asyncProp && loadCount >= asyncProp.resolvedLoadCount && value !== undefined) {\n      this.freezeAsyncOldProps();\n      asyncProp.resolvedValue = value;\n      asyncProp.resolvedLoadCount = loadCount;\n      this.onAsyncPropUpdated(propName, value);\n    }\n  }\n\n  _watchPromise(propName, promise) {\n    const asyncProp = this.asyncProps[propName];\n    asyncProp.pendingLoadCount++;\n    const loadCount = asyncProp.pendingLoadCount;\n    promise.then(data => {\n      var _this$layer2;\n\n      data = this._postProcessValue(asyncProp, data);\n\n      this._setAsyncPropValue(propName, data, loadCount);\n\n      const onDataLoad = (_this$layer2 = this.layer) === null || _this$layer2 === void 0 ? void 0 : _this$layer2.props.onDataLoad;\n\n      if (propName === 'data' && onDataLoad) {\n        onDataLoad(data, {\n          propName,\n          layer: this.layer\n        });\n      }\n    }).catch(error => {\n      var _this$layer3;\n\n      (_this$layer3 = this.layer) === null || _this$layer3 === void 0 ? void 0 : _this$layer3.raiseError(error, \"loading \".concat(propName, \" of \").concat(this.layer));\n    });\n  }\n\n  async _resolveAsyncIterable(propName, iterable) {\n    var _this$layer4;\n\n    if (propName !== 'data') {\n      this._setPropValue(propName, iterable);\n    }\n\n    const asyncProp = this.asyncProps[propName];\n    asyncProp.pendingLoadCount++;\n    const loadCount = asyncProp.pendingLoadCount;\n    let data = [];\n    let count = 0;\n\n    for await (const chunk of iterable) {\n      const {\n        dataTransform\n      } = this.component ? this.component.props : {};\n\n      if (dataTransform) {\n        data = dataTransform(chunk, data);\n      } else {\n        data = data.concat(chunk);\n      }\n\n      Object.defineProperty(data, '__diff', {\n        enumerable: false,\n        value: [{\n          startRow: count,\n          endRow: data.length\n        }]\n      });\n      count = data.length;\n\n      this._setAsyncPropValue(propName, data, loadCount);\n    }\n\n    const onDataLoad = (_this$layer4 = this.layer) === null || _this$layer4 === void 0 ? void 0 : _this$layer4.props.onDataLoad;\n\n    if (onDataLoad) {\n      onDataLoad(data, {\n        propName,\n        layer: this.layer\n      });\n    }\n  }\n\n  _postProcessValue(asyncProp, value) {\n    const propType = asyncProp.type;\n\n    if (propType) {\n      if (propType.release) {\n        propType.release(asyncProp.resolvedValue, propType, this.component);\n      }\n\n      if (propType.transform) {\n        return propType.transform(value, propType, this.component);\n      }\n    }\n\n    return value;\n  }\n\n  _createAsyncPropData(propName, defaultValue) {\n    const asyncProp = this.asyncProps[propName];\n\n    if (!asyncProp) {\n      const propTypes = this.component && this.component.constructor._propTypes;\n      this.asyncProps[propName] = {\n        type: propTypes && propTypes[propName],\n        lastValue: null,\n        resolvedValue: defaultValue,\n        pendingLoadCount: 0,\n        resolvedLoadCount: 0\n      };\n    }\n  }\n\n}\n//# sourceMappingURL=component-state.js.map","import { LIFECYCLE } from '../lifecycle/constants';\nimport { createProps } from './create-props';\nimport { PROP_SYMBOLS } from './constants';\nconst {\n  ASYNC_ORIGINAL,\n  ASYNC_RESOLVED,\n  ASYNC_DEFAULTS\n} = PROP_SYMBOLS;\nimport ComponentState from './component-state';\nconst defaultProps = {};\nlet counter = 0;\nexport default class Component {\n  constructor() {\n    this.props = createProps.apply(this, arguments);\n    this.id = this.props.id;\n    this.count = counter++;\n    this.lifecycle = LIFECYCLE.NO_STATE;\n    this.parent = null;\n    this.context = null;\n    this.state = null;\n    this.internalState = null;\n    Object.seal(this);\n  }\n\n  get root() {\n    let component = this;\n\n    while (component.parent) {\n      component = component.parent;\n    }\n\n    return component;\n  }\n\n  clone(newProps) {\n    const {\n      props\n    } = this;\n    const asyncProps = {};\n\n    for (const key in props[ASYNC_DEFAULTS]) {\n      if (key in props[ASYNC_RESOLVED]) {\n        asyncProps[key] = props[ASYNC_RESOLVED][key];\n      } else if (key in props[ASYNC_ORIGINAL]) {\n        asyncProps[key] = props[ASYNC_ORIGINAL][key];\n      }\n    }\n\n    return new this.constructor({ ...props,\n      ...asyncProps,\n      ...newProps\n    });\n  }\n\n  get stats() {\n    return this.internalState.stats;\n  }\n\n  _initState() {\n    this.internalState = new ComponentState({});\n  }\n\n}\nComponent.componentName = 'Component';\nComponent.defaultProps = defaultProps;\n//# sourceMappingURL=component.js.map","import ComponentState from '../lifecycle/component-state';\nexport default class LayerState extends ComponentState {\n  constructor({\n    attributeManager,\n    layer\n  }) {\n    super(layer);\n    this.attributeManager = attributeManager;\n    this.model = null;\n    this.needsRedraw = true;\n    this.subLayers = null;\n    this.usesPickingColorCache = false;\n  }\n\n  get layer() {\n    return this.component;\n  }\n\n  set layer(layer) {\n    this.component = layer;\n  }\n\n}\n//# sourceMappingURL=layer-state.js.map","import { COORDINATE_SYSTEM } from './constants';\nimport AttributeManager from './attribute/attribute-manager';\nimport UniformTransitionManager from './uniform-transition-manager';\nimport { diffProps, validateProps } from '../lifecycle/props';\nimport { count } from '../utils/count';\nimport log from '../utils/log';\nimport debug from '../debug';\nimport { withParameters, setParameters } from '@luma.gl/core';\nimport assert from '../utils/assert';\nimport memoize from '../utils/memoize';\nimport { mergeShaders } from '../utils/shader';\nimport { projectPosition, getWorldPosition } from '../shaderlib/project/project-functions';\nimport typedArrayManager from '../utils/typed-array-manager';\nimport Component from '../lifecycle/component';\nimport LayerState from './layer-state';\nimport { worldToPixels } from '@math.gl/web-mercator';\nimport { load } from '@loaders.gl/core';\nconst TRACE_CHANGE_FLAG = 'layer.changeFlag';\nconst TRACE_INITIALIZE = 'layer.initialize';\nconst TRACE_UPDATE = 'layer.update';\nconst TRACE_FINALIZE = 'layer.finalize';\nconst TRACE_MATCHED = 'layer.matched';\nconst MAX_PICKING_COLOR_CACHE_SIZE = 2 ** 24 - 1;\nconst EMPTY_ARRAY = Object.freeze([]);\nconst areViewportsEqual = memoize(({\n  oldViewport,\n  viewport\n}) => {\n  return oldViewport.equals(viewport);\n});\nlet pickingColorCache = new Uint8ClampedArray(0);\nconst defaultProps = {\n  data: {\n    type: 'data',\n    value: EMPTY_ARRAY,\n    async: true\n  },\n  dataComparator: null,\n  _dataDiff: {\n    type: 'function',\n    value: data => data && data.__diff,\n    compare: false,\n    optional: true\n  },\n  dataTransform: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDataLoad: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onError: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  fetch: {\n    type: 'function',\n    value: (url, {\n      propName,\n      layer,\n      loaders,\n      loadOptions,\n      signal\n    }) => {\n      const {\n        resourceManager\n      } = layer.context;\n      loadOptions = loadOptions || layer.getLoadOptions();\n      loaders = loaders || layer.props.loaders;\n\n      if (signal) {\n        var _loadOptions;\n\n        loadOptions = { ...loadOptions,\n          fetch: { ...((_loadOptions = loadOptions) === null || _loadOptions === void 0 ? void 0 : _loadOptions.fetch),\n            signal\n          }\n        };\n      }\n\n      let inResourceManager = resourceManager.contains(url);\n\n      if (!inResourceManager && !loadOptions) {\n        resourceManager.add({\n          resourceId: url,\n          data: load(url, loaders),\n          persistent: false\n        });\n        inResourceManager = true;\n      }\n\n      if (inResourceManager) {\n        return resourceManager.subscribe({\n          resourceId: url,\n          onChange: data => layer.internalState.reloadAsyncProp(propName, data),\n          consumerId: layer.id,\n          requestId: propName\n        });\n      }\n\n      return load(url, loaders, loadOptions);\n    },\n    compare: false\n  },\n  updateTriggers: {},\n  visible: true,\n  pickable: false,\n  opacity: {\n    type: 'number',\n    min: 0,\n    max: 1,\n    value: 1\n  },\n  onHover: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onClick: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragStart: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDrag: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  onDragEnd: {\n    type: 'function',\n    value: null,\n    compare: false,\n    optional: true\n  },\n  coordinateSystem: COORDINATE_SYSTEM.DEFAULT,\n  coordinateOrigin: {\n    type: 'array',\n    value: [0, 0, 0],\n    compare: true\n  },\n  modelMatrix: {\n    type: 'array',\n    value: null,\n    compare: true,\n    optional: true\n  },\n  wrapLongitude: false,\n  positionFormat: 'XYZ',\n  colorFormat: 'RGBA',\n  parameters: {},\n  transitions: null,\n  extensions: [],\n  loaders: {\n    type: 'array',\n    value: [],\n    optional: true,\n    compare: true\n  },\n  getPolygonOffset: {\n    type: 'function',\n    value: ({\n      layerIndex\n    }) => [0, -layerIndex * 100],\n    compare: false\n  },\n  highlightedObjectIndex: -1,\n  autoHighlight: false,\n  highlightColor: {\n    type: 'accessor',\n    value: [0, 0, 128, 128]\n  }\n};\nexport default class Layer extends Component {\n  toString() {\n    const className = this.constructor.layerName || this.constructor.name;\n    return \"\".concat(className, \"({id: '\").concat(this.props.id, \"'})\");\n  }\n\n  raiseError(error, message) {\n    var _this$props$onError, _this$props;\n\n    if (message) {\n      error.message = \"\".concat(message, \": \").concat(error.message);\n    }\n\n    if (!((_this$props$onError = (_this$props = this.props).onError) === null || _this$props$onError === void 0 ? void 0 : _this$props$onError.call(_this$props, error))) {\n      var _this$context, _this$context$onError;\n\n      (_this$context = this.context) === null || _this$context === void 0 ? void 0 : (_this$context$onError = _this$context.onError) === null || _this$context$onError === void 0 ? void 0 : _this$context$onError.call(_this$context, error, this);\n    }\n  }\n\n  setState(updateObject) {\n    this.setChangeFlags({\n      stateChanged: true\n    });\n    Object.assign(this.state, updateObject);\n    this.setNeedsRedraw();\n  }\n\n  setNeedsRedraw(redraw = true) {\n    if (this.internalState) {\n      this.internalState.needsRedraw = redraw;\n    }\n  }\n\n  setNeedsUpdate() {\n    this.context.layerManager.setNeedsUpdate(String(this));\n    this.internalState.needsUpdate = true;\n  }\n\n  getNeedsRedraw(opts = {\n    clearRedrawFlags: false\n  }) {\n    return this._getNeedsRedraw(opts);\n  }\n\n  needsUpdate() {\n    return this.internalState.needsUpdate || this.hasUniformTransition() || this.shouldUpdateState(this._getUpdateParams());\n  }\n\n  hasUniformTransition() {\n    return this.internalState.uniformTransitions.active;\n  }\n\n  get isLoaded() {\n    return this.internalState && !this.internalState.isAsyncPropLoading();\n  }\n\n  get wrapLongitude() {\n    return this.props.wrapLongitude;\n  }\n\n  isPickable() {\n    return this.props.pickable && this.props.visible;\n  }\n\n  getModels() {\n    return this.state && (this.state.models || (this.state.model ? [this.state.model] : []));\n  }\n\n  getAttributeManager() {\n    return this.internalState && this.internalState.attributeManager;\n  }\n\n  getCurrentLayer() {\n    return this.internalState && this.internalState.layer;\n  }\n\n  getLoadOptions() {\n    return this.props.loadOptions;\n  }\n\n  project(xyz) {\n    const {\n      viewport\n    } = this.context;\n    const worldPosition = getWorldPosition(xyz, {\n      viewport,\n      modelMatrix: this.props.modelMatrix,\n      coordinateOrigin: this.props.coordinateOrigin,\n      coordinateSystem: this.props.coordinateSystem\n    });\n    const [x, y, z] = worldToPixels(worldPosition, viewport.pixelProjectionMatrix);\n    return xyz.length === 2 ? [x, y] : [x, y, z];\n  }\n\n  unproject(xy) {\n    const {\n      viewport\n    } = this.context;\n    return viewport.unproject(xy);\n  }\n\n  projectPosition(xyz) {\n    return projectPosition(xyz, {\n      viewport: this.context.viewport,\n      modelMatrix: this.props.modelMatrix,\n      coordinateOrigin: this.props.coordinateOrigin,\n      coordinateSystem: this.props.coordinateSystem\n    });\n  }\n\n  use64bitPositions() {\n    const {\n      coordinateSystem\n    } = this.props;\n    return coordinateSystem === COORDINATE_SYSTEM.DEFAULT || coordinateSystem === COORDINATE_SYSTEM.LNGLAT || coordinateSystem === COORDINATE_SYSTEM.CARTESIAN;\n  }\n\n  onHover(info, pickingEvent) {\n    if (this.props.onHover) {\n      return this.props.onHover(info, pickingEvent);\n    }\n\n    return false;\n  }\n\n  onClick(info, pickingEvent) {\n    if (this.props.onClick) {\n      return this.props.onClick(info, pickingEvent);\n    }\n\n    return false;\n  }\n\n  nullPickingColor() {\n    return [0, 0, 0];\n  }\n\n  encodePickingColor(i, target = []) {\n    target[0] = i + 1 & 255;\n    target[1] = i + 1 >> 8 & 255;\n    target[2] = i + 1 >> 8 >> 8 & 255;\n    return target;\n  }\n\n  decodePickingColor(color) {\n    assert(color instanceof Uint8Array);\n    const [i1, i2, i3] = color;\n    const index = i1 + i2 * 256 + i3 * 65536 - 1;\n    return index;\n  }\n\n  initializeState() {\n    throw new Error(\"Layer \".concat(this, \" has not defined initializeState\"));\n  }\n\n  getShaders(shaders) {\n    for (const extension of this.props.extensions) {\n      shaders = mergeShaders(shaders, extension.getShaders.call(this, extension));\n    }\n\n    return shaders;\n  }\n\n  shouldUpdateState({\n    oldProps,\n    props,\n    context,\n    changeFlags\n  }) {\n    return changeFlags.propsOrDataChanged;\n  }\n\n  updateState({\n    oldProps,\n    props,\n    context,\n    changeFlags\n  }) {\n    const attributeManager = this.getAttributeManager();\n\n    if (changeFlags.dataChanged && attributeManager) {\n      const {\n        dataChanged\n      } = changeFlags;\n\n      if (Array.isArray(dataChanged)) {\n        for (const dataRange of dataChanged) {\n          attributeManager.invalidateAll(dataRange);\n        }\n      } else {\n        attributeManager.invalidateAll();\n      }\n    }\n\n    const neededPickingBuffer = oldProps.highlightedObjectIndex >= 0 || oldProps.pickable;\n    const needPickingBuffer = props.highlightedObjectIndex >= 0 || props.pickable;\n\n    if (neededPickingBuffer !== needPickingBuffer && attributeManager) {\n      const {\n        pickingColors,\n        instancePickingColors\n      } = attributeManager.attributes;\n      const pickingColorsAttribute = pickingColors || instancePickingColors;\n\n      if (pickingColorsAttribute) {\n        if (needPickingBuffer && pickingColorsAttribute.constant) {\n          pickingColorsAttribute.constant = false;\n          attributeManager.invalidate(pickingColorsAttribute.id);\n        }\n\n        if (!pickingColorsAttribute.value && !needPickingBuffer) {\n          pickingColorsAttribute.constant = true;\n          pickingColorsAttribute.value = [0, 0, 0];\n        }\n      }\n    }\n  }\n\n  finalizeState() {\n    for (const model of this.getModels()) {\n      model.delete();\n    }\n\n    const attributeManager = this.getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.finalize();\n    }\n\n    this.context.resourceManager.unsubscribe({\n      consumerId: this.id\n    });\n    this.internalState.uniformTransitions.clear();\n    this.internalState.finalize();\n  }\n\n  draw(opts) {\n    for (const model of this.getModels()) {\n      model.draw(opts);\n    }\n  }\n\n  getPickingInfo({\n    info,\n    mode\n  }) {\n    const {\n      index\n    } = info;\n\n    if (index >= 0) {\n      if (Array.isArray(this.props.data)) {\n        info.object = this.props.data[index];\n      }\n    }\n\n    return info;\n  }\n\n  activateViewport(viewport) {\n    const oldViewport = this.internalState.viewport;\n    this.internalState.viewport = viewport;\n\n    if (!oldViewport || !areViewportsEqual({\n      oldViewport,\n      viewport\n    })) {\n      this.setChangeFlags({\n        viewportChanged: true\n      });\n\n      if (this.isComposite) {\n        if (this.needsUpdate()) {\n          this.setNeedsUpdate();\n        }\n      } else {\n        this._update();\n      }\n    }\n  }\n\n  invalidateAttribute(name = 'all', diffReason = '') {\n    const attributeManager = this.getAttributeManager();\n\n    if (!attributeManager) {\n      return;\n    }\n\n    if (name === 'all') {\n      attributeManager.invalidateAll();\n    } else {\n      attributeManager.invalidate(name);\n    }\n  }\n\n  updateAttributes(changedAttributes) {\n    for (const model of this.getModels()) {\n      this._setModelAttributes(model, changedAttributes);\n    }\n  }\n\n  _updateAttributes(props) {\n    const attributeManager = this.getAttributeManager();\n\n    if (!attributeManager) {\n      return;\n    }\n\n    const numInstances = this.getNumInstances(props);\n    const startIndices = this.getStartIndices(props);\n    attributeManager.update({\n      data: props.data,\n      numInstances,\n      startIndices,\n      props,\n      transitions: props.transitions,\n      buffers: props.data.attributes,\n      context: this,\n      ignoreUnknownAttributes: true\n    });\n    const changedAttributes = attributeManager.getChangedAttributes({\n      clearChangedFlags: true\n    });\n    this.updateAttributes(changedAttributes);\n  }\n\n  _updateAttributeTransition() {\n    const attributeManager = this.getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.updateTransition();\n    }\n  }\n\n  _updateUniformTransition() {\n    const {\n      uniformTransitions\n    } = this.internalState;\n\n    if (uniformTransitions.active) {\n      const propsInTransition = uniformTransitions.update();\n      const props = Object.create(this.props);\n\n      for (const key in propsInTransition) {\n        Object.defineProperty(props, key, {\n          value: propsInTransition[key]\n        });\n      }\n\n      return props;\n    }\n\n    return this.props;\n  }\n\n  calculateInstancePickingColors(attribute, {\n    numInstances\n  }) {\n    if (attribute.constant) {\n      return;\n    }\n\n    const cacheSize = Math.floor(pickingColorCache.length / 3);\n    this.internalState.usesPickingColorCache = true;\n\n    if (cacheSize < numInstances) {\n      if (numInstances > MAX_PICKING_COLOR_CACHE_SIZE) {\n        log.warn('Layer has too many data objects. Picking might not be able to distinguish all objects.')();\n      }\n\n      pickingColorCache = typedArrayManager.allocate(pickingColorCache, numInstances, {\n        size: 3,\n        copy: true,\n        maxCount: Math.max(numInstances, MAX_PICKING_COLOR_CACHE_SIZE)\n      });\n      const newCacheSize = Math.floor(pickingColorCache.length / 3);\n      const pickingColor = [];\n\n      for (let i = cacheSize; i < newCacheSize; i++) {\n        this.encodePickingColor(i, pickingColor);\n        pickingColorCache[i * 3 + 0] = pickingColor[0];\n        pickingColorCache[i * 3 + 1] = pickingColor[1];\n        pickingColorCache[i * 3 + 2] = pickingColor[2];\n      }\n    }\n\n    attribute.value = pickingColorCache.subarray(0, numInstances * 3);\n  }\n\n  _setModelAttributes(model, changedAttributes) {\n    const attributeManager = this.getAttributeManager();\n    const excludeAttributes = model.userData.excludeAttributes || {};\n    const shaderAttributes = attributeManager.getShaderAttributes(changedAttributes, excludeAttributes);\n    model.setAttributes(shaderAttributes);\n  }\n\n  disablePickingIndex(objectIndex) {\n    this._disablePickingIndex(objectIndex);\n  }\n\n  _disablePickingIndex(objectIndex) {\n    const {\n      pickingColors,\n      instancePickingColors\n    } = this.getAttributeManager().attributes;\n    const colors = pickingColors || instancePickingColors;\n    const start = colors.getVertexOffset(objectIndex);\n    const end = colors.getVertexOffset(objectIndex + 1);\n    colors.buffer.subData({\n      data: new Uint8Array(end - start),\n      offset: start\n    });\n  }\n\n  restorePickingColors() {\n    const {\n      pickingColors,\n      instancePickingColors\n    } = this.getAttributeManager().attributes;\n    const colors = pickingColors || instancePickingColors;\n\n    if (this.internalState.usesPickingColorCache && colors.value.buffer !== pickingColorCache.buffer) {\n      colors.value = pickingColorCache.subarray(0, colors.value.length);\n    }\n\n    colors.updateSubBuffer({\n      startOffset: 0\n    });\n  }\n\n  getNumInstances(props) {\n    props = props || this.props;\n\n    if (props.numInstances !== undefined) {\n      return props.numInstances;\n    }\n\n    if (this.state && this.state.numInstances !== undefined) {\n      return this.state.numInstances;\n    }\n\n    return count(props.data);\n  }\n\n  getStartIndices(props) {\n    props = props || this.props;\n\n    if (props.startIndices !== undefined) {\n      return props.startIndices;\n    }\n\n    if (this.state && this.state.startIndices) {\n      return this.state.startIndices;\n    }\n\n    return null;\n  }\n\n  _initialize() {\n    debug(TRACE_INITIALIZE, this);\n\n    this._initState();\n\n    this.initializeState(this.context);\n\n    for (const extension of this.props.extensions) {\n      extension.initializeState.call(this, this.context, extension);\n    }\n\n    this.setChangeFlags({\n      dataChanged: true,\n      propsChanged: true,\n      viewportChanged: true,\n      extensionsChanged: true\n    });\n\n    this._updateState();\n  }\n\n  _update() {\n    const stateNeedsUpdate = this.needsUpdate();\n    debug(TRACE_UPDATE, this, stateNeedsUpdate);\n\n    if (stateNeedsUpdate) {\n      this._updateState();\n    }\n  }\n\n  _updateState() {\n    const currentProps = this.props;\n    const currentViewport = this.context.viewport;\n\n    const propsInTransition = this._updateUniformTransition();\n\n    this.internalState.propsInTransition = propsInTransition;\n    this.context.viewport = this.internalState.viewport || currentViewport;\n    this.props = propsInTransition;\n\n    try {\n      const updateParams = this._getUpdateParams();\n\n      const oldModels = this.getModels();\n\n      if (this.context.gl) {\n        this.updateState(updateParams);\n      } else {\n        try {\n          this.updateState(updateParams);\n        } catch (error) {}\n      }\n\n      for (const extension of this.props.extensions) {\n        extension.updateState.call(this, updateParams, extension);\n      }\n\n      const modelChanged = this.getModels()[0] !== oldModels[0];\n\n      this._updateModules(updateParams, modelChanged);\n\n      if (this.isComposite) {\n        this._renderLayers(updateParams);\n      } else {\n        this.setNeedsRedraw();\n\n        this._updateAttributes(this.props);\n\n        if (this.state.model) {\n          this.state.model.setInstanceCount(this.getNumInstances());\n        }\n      }\n    } finally {\n      this.context.viewport = currentViewport;\n      this.props = currentProps;\n      this.clearChangeFlags();\n      this.internalState.needsUpdate = false;\n      this.internalState.resetOldProps();\n    }\n  }\n\n  _finalize() {\n    debug(TRACE_FINALIZE, this);\n    this.finalizeState(this.context);\n\n    for (const extension of this.props.extensions) {\n      extension.finalizeState.call(this, extension);\n    }\n  }\n\n  drawLayer({\n    moduleParameters = null,\n    uniforms = {},\n    parameters = {}\n  }) {\n    this._updateAttributeTransition();\n\n    const currentProps = this.props;\n    this.props = this.internalState.propsInTransition || currentProps;\n    const {\n      opacity\n    } = this.props;\n    uniforms.opacity = Math.pow(opacity, 1 / 2.2);\n\n    try {\n      if (moduleParameters) {\n        this.setModuleParameters(moduleParameters);\n      }\n\n      const {\n        getPolygonOffset\n      } = this.props;\n      const offsets = getPolygonOffset && getPolygonOffset(uniforms) || [0, 0];\n      setParameters(this.context.gl, {\n        polygonOffset: offsets\n      });\n      withParameters(this.context.gl, parameters, () => {\n        const opts = {\n          moduleParameters,\n          uniforms,\n          parameters,\n          context: this.context\n        };\n\n        for (const extension of this.props.extensions) {\n          extension.draw.call(this, opts, extension);\n        }\n\n        this.draw(opts);\n      });\n    } finally {\n      this.props = currentProps;\n    }\n  }\n\n  getChangeFlags() {\n    return this.internalState.changeFlags;\n  }\n\n  setChangeFlags(flags) {\n    const {\n      changeFlags\n    } = this.internalState;\n\n    for (const key in flags) {\n      if (flags[key]) {\n        let flagChanged = false;\n\n        switch (key) {\n          case 'dataChanged':\n            if (Array.isArray(changeFlags[key])) {\n              changeFlags[key] = Array.isArray(flags[key]) ? changeFlags[key].concat(flags[key]) : flags[key];\n              flagChanged = true;\n            }\n\n          default:\n            if (!changeFlags[key]) {\n              changeFlags[key] = flags[key];\n              flagChanged = true;\n            }\n\n        }\n\n        if (flagChanged) {\n          debug(TRACE_CHANGE_FLAG, this, key, flags);\n        }\n      }\n    }\n\n    const propsOrDataChanged = changeFlags.dataChanged || changeFlags.updateTriggersChanged || changeFlags.propsChanged || changeFlags.extensionsChanged;\n    changeFlags.propsOrDataChanged = propsOrDataChanged;\n    changeFlags.somethingChanged = propsOrDataChanged || flags.viewportChanged || flags.stateChanged;\n  }\n\n  clearChangeFlags() {\n    this.internalState.changeFlags = {\n      dataChanged: false,\n      propsChanged: false,\n      updateTriggersChanged: false,\n      viewportChanged: false,\n      stateChanged: false,\n      extensionsChanged: false,\n      propsOrDataChanged: false,\n      somethingChanged: false\n    };\n  }\n\n  diffProps(newProps, oldProps) {\n    const changeFlags = diffProps(newProps, oldProps);\n\n    if (changeFlags.updateTriggersChanged) {\n      for (const key in changeFlags.updateTriggersChanged) {\n        if (changeFlags.updateTriggersChanged[key]) {\n          this.invalidateAttribute(key);\n        }\n      }\n    }\n\n    if (changeFlags.transitionsChanged) {\n      for (const key in changeFlags.transitionsChanged) {\n        this.internalState.uniformTransitions.add(key, oldProps[key], newProps[key], newProps.transitions[key]);\n      }\n    }\n\n    return this.setChangeFlags(changeFlags);\n  }\n\n  validateProps() {\n    validateProps(this.props);\n  }\n\n  setModuleParameters(moduleParameters) {\n    for (const model of this.getModels()) {\n      model.updateModuleSettings(moduleParameters);\n    }\n  }\n\n  updateAutoHighlight(info) {\n    if (this.props.autoHighlight) {\n      this._updateAutoHighlight(info);\n    }\n  }\n\n  _updateAutoHighlight(info) {\n    const pickingModuleParameters = {\n      pickingSelectedColor: info.picked ? info.color : null\n    };\n    const {\n      highlightColor\n    } = this.props;\n\n    if (info.picked && typeof highlightColor === 'function') {\n      pickingModuleParameters.pickingHighlightColor = highlightColor(info);\n    }\n\n    this.setModuleParameters(pickingModuleParameters);\n    this.setNeedsRedraw();\n  }\n\n  _updateModules({\n    props,\n    oldProps\n  }, forceUpdate) {\n    const {\n      autoHighlight,\n      highlightedObjectIndex,\n      highlightColor\n    } = props;\n\n    if (forceUpdate || oldProps.autoHighlight !== autoHighlight || oldProps.highlightedObjectIndex !== highlightedObjectIndex || oldProps.highlightColor !== highlightColor) {\n      const parameters = {};\n\n      if (!autoHighlight) {\n        parameters.pickingSelectedColor = null;\n      }\n\n      if (Array.isArray(highlightColor)) {\n        parameters.pickingHighlightColor = highlightColor;\n      }\n\n      if (Number.isInteger(highlightedObjectIndex)) {\n        parameters.pickingSelectedColor = highlightedObjectIndex >= 0 ? this.encodePickingColor(highlightedObjectIndex) : null;\n      }\n\n      this.setModuleParameters(parameters);\n    }\n  }\n\n  _getUpdateParams() {\n    return {\n      props: this.props,\n      oldProps: this.internalState.getOldProps(),\n      context: this.context,\n      changeFlags: this.internalState.changeFlags\n    };\n  }\n\n  _getNeedsRedraw(opts) {\n    if (!this.internalState) {\n      return false;\n    }\n\n    let redraw = false;\n    redraw = redraw || this.internalState.needsRedraw && this.id;\n    this.internalState.needsRedraw = this.internalState.needsRedraw && !opts.clearRedrawFlags;\n    const attributeManager = this.getAttributeManager();\n    const attributeManagerNeedsRedraw = attributeManager && attributeManager.getNeedsRedraw(opts);\n    redraw = redraw || attributeManagerNeedsRedraw;\n    return redraw;\n  }\n\n  _getAttributeManager() {\n    return new AttributeManager(this.context.gl, {\n      id: this.props.id,\n      stats: this.context.stats,\n      timeline: this.context.timeline\n    });\n  }\n\n  _initState() {\n    assert(!this.internalState && !this.state);\n    assert(isFinite(this.props.coordinateSystem));\n\n    const attributeManager = this._getAttributeManager();\n\n    if (attributeManager) {\n      attributeManager.addInstanced({\n        instancePickingColors: {\n          type: 5121,\n          size: 3,\n          noAlloc: true,\n          update: this.calculateInstancePickingColors\n        }\n      });\n    }\n\n    this.internalState = new LayerState({\n      attributeManager,\n      layer: this\n    });\n    this.clearChangeFlags();\n    this.state = {};\n    Object.defineProperty(this.state, 'attributeManager', {\n      get: () => {\n        log.deprecated('layer.state.attributeManager', 'layer.getAttributeManager()');\n        return attributeManager;\n      }\n    });\n    this.internalState.layer = this;\n    this.internalState.uniformTransitions = new UniformTransitionManager(this.context.timeline);\n    this.internalState.onAsyncPropUpdated = this._onAsyncPropUpdated.bind(this);\n    this.internalState.setAsyncProps(this.props);\n  }\n\n  _transferState(oldLayer) {\n    debug(TRACE_MATCHED, this, this === oldLayer);\n    const {\n      state,\n      internalState\n    } = oldLayer;\n\n    if (this === oldLayer) {\n      return;\n    }\n\n    this.internalState = internalState;\n    this.internalState.layer = this;\n    this.state = state;\n    this.internalState.setAsyncProps(this.props);\n    this.diffProps(this.props, this.internalState.getOldProps());\n  }\n\n  _onAsyncPropUpdated() {\n    this.diffProps(this.props, this.internalState.getOldProps());\n    this.setNeedsUpdate();\n  }\n\n}\nLayer.layerName = 'Layer';\nLayer.defaultProps = defaultProps;\n//# sourceMappingURL=layer.js.map","import project from '../project/project';\nconst vs = \"\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\\n) {\\n  vec3 projectedPosition = project_position(position, position64Low);\\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\\n    // offset is specified as ENU\\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\\n    mat3 rotation = project_get_orientation_matrix(projectedPosition);\\n    offset = rotation * offset;\\n  }\\n  commonPosition = vec4(projectedPosition + offset, 1.0);\\n  return project_common_position_to_clipspace(commonPosition);\\n}\\n\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec3 position64Low, vec3 offset\\n) {\\n  vec4 commonPosition;\\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\\n}\\n\";\nexport default {\n  name: 'project32',\n  dependencies: [project],\n  vs\n};\n//# sourceMappingURL=project32.js.map","export default `\\\n#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n`;\n//# sourceMappingURL=lights.glsl.js.map","import lightingShader from './lights.glsl';\nconst INITIAL_MODULE_OPTIONS = {\n  lightSources: {}\n};\n\nfunction convertColor({\n  color = [0, 0, 0],\n  intensity = 1.0\n} = {}) {\n  return color.map(component => component * intensity / 255.0);\n}\n\nfunction getLightSourceUniforms({\n  ambientLight,\n  pointLights = [],\n  directionalLights = []\n}) {\n  const lightSourceUniforms = {};\n\n  if (ambientLight) {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = convertColor(ambientLight);\n  } else {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = [0, 0, 0];\n  }\n\n  pointLights.forEach((pointLight, index) => {\n    lightSourceUniforms[`lighting_uPointLight[${index}].color`] = convertColor(pointLight);\n    lightSourceUniforms[`lighting_uPointLight[${index}].position`] = pointLight.position;\n    lightSourceUniforms[`lighting_uPointLight[${index}].attenuation`] = pointLight.attenuation || [1, 0, 0];\n  });\n  lightSourceUniforms.lighting_uPointLightCount = pointLights.length;\n  directionalLights.forEach((directionalLight, index) => {\n    lightSourceUniforms[`lighting_uDirectionalLight[${index}].color`] = convertColor(directionalLight);\n    lightSourceUniforms[`lighting_uDirectionalLight[${index}].direction`] = directionalLight.direction;\n  });\n  lightSourceUniforms.lighting_uDirectionalLightCount = directionalLights.length;\n  return lightSourceUniforms;\n}\n\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  if ('lightSources' in opts) {\n    const {\n      ambientLight,\n      pointLights,\n      directionalLights\n    } = opts.lightSources || {};\n    const hasLights = ambientLight || pointLights && pointLights.length > 0 || directionalLights && directionalLights.length > 0;\n\n    if (!hasLights) {\n      return {\n        lighting_uEnabled: false\n      };\n    }\n\n    return Object.assign({}, getLightSourceUniforms({\n      ambientLight,\n      pointLights,\n      directionalLights\n    }), {\n      lighting_uEnabled: true\n    });\n  }\n\n  if ('lights' in opts) {\n    const lightSources = {\n      pointLights: [],\n      directionalLights: []\n    };\n\n    for (const light of opts.lights || []) {\n      switch (light.type) {\n        case 'ambient':\n          lightSources.ambientLight = light;\n          break;\n\n        case 'directional':\n          lightSources.directionalLights.push(light);\n          break;\n\n        case 'point':\n          lightSources.pointLights.push(light);\n          break;\n\n        default:\n      }\n    }\n\n    return getUniforms({\n      lightSources\n    });\n  }\n\n  return {};\n}\n\nexport const lights = {\n  name: 'lights',\n  vs: lightingShader,\n  fs: lightingShader,\n  getUniforms,\n  defines: {\n    MAX_LIGHTS: 3\n  }\n};\n//# sourceMappingURL=lights.js.map","export default `\\\n\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n`;\n//# sourceMappingURL=phong-lighting.glsl.js.map","import { lights } from '../lights/lights';\nimport lightingShader from './phong-lighting.glsl';\nconst INITIAL_MODULE_OPTIONS = {};\n\nfunction getMaterialUniforms(material) {\n  const {\n    ambient = 0.35,\n    diffuse = 0.6,\n    shininess = 32,\n    specularColor = [30, 30, 30]\n  } = material;\n  return {\n    lighting_uAmbient: ambient,\n    lighting_uDiffuse: diffuse,\n    lighting_uShininess: shininess,\n    lighting_uSpecularColor: specularColor.map(x => x / 255)\n  };\n}\n\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n  if (!('material' in opts)) {\n    return {};\n  }\n\n  const {\n    material\n  } = opts;\n\n  if (!material) {\n    return {\n      lighting_uEnabled: false\n    };\n  }\n\n  return getMaterialUniforms(material);\n}\n\nexport const gouraudLighting = {\n  name: 'gouraud-lighting',\n  dependencies: [lights],\n  vs: lightingShader,\n  defines: {\n    LIGHTING_VERTEX: 1\n  },\n  getUniforms\n};\nexport const phongLighting = {\n  name: 'phong-lighting',\n  dependencies: [lights],\n  fs: lightingShader,\n  defines: {\n    LIGHTING_FRAGMENT: 1\n  },\n  getUniforms\n};\n//# sourceMappingURL=phong-lighting.js.map","const DEFAULT_HIGHLIGHT_COLOR = new Uint8Array([0, 255, 255, 255]);\nconst DEFAULT_MODULE_OPTIONS = {\n  pickingSelectedColor: null,\n  pickingHighlightColor: DEFAULT_HIGHLIGHT_COLOR,\n  pickingActive: false,\n  pickingAttribute: false\n};\n\nfunction getUniforms(opts = DEFAULT_MODULE_OPTIONS) {\n  const uniforms = {};\n\n  if (opts.pickingSelectedColor !== undefined) {\n    if (!opts.pickingSelectedColor) {\n      uniforms.picking_uSelectedColorValid = 0;\n    } else {\n      const selectedColor = opts.pickingSelectedColor.slice(0, 3);\n      uniforms.picking_uSelectedColorValid = 1;\n      uniforms.picking_uSelectedColor = selectedColor;\n    }\n  }\n\n  if (opts.pickingHighlightColor) {\n    const color = Array.from(opts.pickingHighlightColor, x => x / 255);\n\n    if (!Number.isFinite(color[3])) {\n      color[3] = 1;\n    }\n\n    uniforms.picking_uHighlightColor = color;\n  }\n\n  if (opts.pickingActive !== undefined) {\n    uniforms.picking_uActive = Boolean(opts.pickingActive);\n    uniforms.picking_uAttribute = Boolean(opts.pickingAttribute);\n  }\n\n  return uniforms;\n}\n\nconst vs = `\\\nuniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n`;\nconst fs = `\\\nuniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n`;\nexport const picking = {\n  name: 'picking',\n  vs,\n  fs,\n  getUniforms\n};\n//# sourceMappingURL=picking.js.map","import { picking } from '@luma.gl/core';\nexport default {\n  inject: {\n    'vs:DECKGL_FILTER_COLOR': \"\\n  picking_setPickingColor(geometry.pickingColor);\\n  // for picking depth values\\n  picking_setPickingAttribute(geometry.position.z);\\n  \",\n    'fs:DECKGL_FILTER_COLOR': {\n      order: 99,\n      injection: \"\\n  // use highlight color if this fragment belongs to the selected object.\\n  color = picking_filterHighlightColor(color);\\n\\n  // use picking color if rendering to picking FBO.\\n  color = picking_filterPickingColor(color);\\n    \"\n    }\n  },\n  ...picking\n};\n//# sourceMappingURL=picking.js.map","import { uid, assert } from '@luma.gl/webgl';\nexport const DRAW_MODE = {\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  LINE_LOOP: 0x0002,\n  LINE_STRIP: 0x0003,\n  TRIANGLES: 0x0004,\n  TRIANGLE_STRIP: 0x0005,\n  TRIANGLE_FAN: 0x0006\n};\nexport default class Geometry {\n  static get DRAW_MODE() {\n    return DRAW_MODE;\n  }\n\n  constructor(props = {}) {\n    const {\n      id = uid('geometry'),\n      drawMode = DRAW_MODE.TRIANGLES,\n      attributes = {},\n      indices = null,\n      vertexCount = null\n    } = props;\n    this.id = id;\n    this.drawMode = drawMode | 0;\n    this.attributes = {};\n    this.userData = {};\n\n    this._setAttributes(attributes, indices);\n\n    this.vertexCount = vertexCount || this._calculateVertexCount(this.attributes, this.indices);\n  }\n\n  get mode() {\n    return this.drawMode;\n  }\n\n  getVertexCount() {\n    return this.vertexCount;\n  }\n\n  getAttributes() {\n    return this.indices ? {\n      indices: this.indices,\n      ...this.attributes\n    } : this.attributes;\n  }\n\n  _print(attributeName) {\n    return `Geometry ${this.id} attribute ${attributeName}`;\n  }\n\n  _setAttributes(attributes, indices) {\n    if (indices) {\n      this.indices = ArrayBuffer.isView(indices) ? {\n        value: indices,\n        size: 1\n      } : indices;\n    }\n\n    for (const attributeName in attributes) {\n      let attribute = attributes[attributeName];\n      attribute = ArrayBuffer.isView(attribute) ? {\n        value: attribute\n      } : attribute;\n      assert(ArrayBuffer.isView(attribute.value), `${this._print(attributeName)}: must be typed array or object with value as typed array`);\n\n      if ((attributeName === 'POSITION' || attributeName === 'positions') && !attribute.size) {\n        attribute.size = 3;\n      }\n\n      if (attributeName === 'indices') {\n        assert(!this.indices);\n        this.indices = attribute;\n      } else {\n        this.attributes[attributeName] = attribute;\n      }\n    }\n\n    if (this.indices && this.indices.isIndexed !== undefined) {\n      this.indices = Object.assign({}, this.indices);\n      delete this.indices.isIndexed;\n    }\n\n    return this;\n  }\n\n  _calculateVertexCount(attributes, indices) {\n    if (indices) {\n      return indices.value.length;\n    }\n\n    let vertexCount = Infinity;\n\n    for (const attributeName in attributes) {\n      const attribute = attributes[attributeName];\n      const {\n        value,\n        size,\n        constant\n      } = attribute;\n\n      if (!constant && value && size >= 1) {\n        vertexCount = Math.min(vertexCount, value.length / size);\n      }\n    }\n\n    assert(Number.isFinite(vertexCount));\n    return vertexCount;\n  }\n\n}\n//# sourceMappingURL=geometry.js.map","import { equals } from '@math.gl/core';\nexport const WINDING = {\n  CLOCKWISE: 1,\n  COUNTER_CLOCKWISE: -1\n};\nexport function modifyPolygonWindingDirection(points, direction, options = {}) {\n  const windingDirection = getPolygonWindingDirection(points, options);\n\n  if (windingDirection !== direction) {\n    reversePolygon(points, options);\n    return true;\n  }\n\n  return false;\n}\nexport function getPolygonWindingDirection(points, options = {}) {\n  return Math.sign(getPolygonSignedArea(points, options));\n}\nexport function getPolygonSignedArea(points, options = {}) {\n  const {\n    start = 0,\n    end = points.length\n  } = options;\n  const dim = options.size || 2;\n  let area = 0;\n\n  for (let i = start, j = end - dim; i < end; i += dim) {\n    area += (points[i] - points[j]) * (points[i + 1] + points[j + 1]);\n    j = i;\n  }\n\n  return area / 2;\n}\nexport function forEachSegmentInPolygon(points, visitor, options = {}) {\n  const {\n    start = 0,\n    end = points.length,\n    size = 2,\n    isClosed\n  } = options;\n  const numPoints = (end - start) / size;\n\n  for (let i = 0; i < numPoints - 1; ++i) {\n    visitor(points[start + i * size], points[start + i * size + 1], points[start + (i + 1) * size], points[start + (i + 1) * size + 1], i, i + 1);\n  }\n\n  const endPointIndex = start + (numPoints - 1) * size;\n  const isClosedEx = isClosed || equals(points[start], points[endPointIndex]) && equals(points[start + 1], points[endPointIndex + 1]);\n\n  if (!isClosedEx) {\n    visitor(points[endPointIndex], points[endPointIndex + 1], points[start], points[start + 1], numPoints - 1, 0);\n  }\n}\n\nfunction reversePolygon(points, options) {\n  const {\n    start = 0,\n    end = points.length,\n    size = 2\n  } = options;\n  const numPoints = (end - start) / size;\n  const numSwaps = Math.floor(numPoints / 2);\n\n  for (let i = 0; i < numSwaps; ++i) {\n    const b1 = start + i * size;\n    const b2 = start + (numPoints - 1 - i) * size;\n\n    for (let j = 0; j < size; ++j) {\n      const tmp = points[b1 + j];\n      points[b1 + j] = points[b2 + j];\n      points[b2 + j] = tmp;\n    }\n  }\n}\n\nexport function modifyPolygonWindingDirectionPoints(points, direction, options = {}) {\n  const currentDirection = getPolygonWindingDirectionPoints(points, options);\n\n  if (currentDirection !== direction) {\n    points.reverse();\n    return true;\n  }\n\n  return false;\n}\nexport function getPolygonWindingDirectionPoints(points, options = {}) {\n  return Math.sign(getPolygonSignedAreaPoints(points, options));\n}\nexport function getPolygonSignedAreaPoints(points, options = {}) {\n  const {\n    start = 0,\n    end = points.length\n  } = options;\n  let area = 0;\n\n  for (let i = start, j = end - 1; i < end; ++i) {\n    area += (points[i][0] - points[j][0]) * (points[i][1] + points[j][1]);\n    j = i;\n  }\n\n  return area / 2;\n}\nexport function forEachSegmentInPolygonPoints(points, visitor, options = {}) {\n  const {\n    start = 0,\n    end = points.length,\n    isClosed\n  } = options;\n\n  for (let i = start; i < end - 1; ++i) {\n    visitor(points[i], points[i + 1], i, i + 1);\n  }\n\n  const isClosedEx = isClosed || equals(points[end - 1], points[0]);\n\n  if (!isClosedEx) {\n    visitor(points[end - 1], points[0], end - 1, 0);\n  }\n}\n//# sourceMappingURL=polygon-utils.js.map","import { log } from '@deck.gl/core';\nimport { Geometry, uid } from '@luma.gl/core';\nimport { modifyPolygonWindingDirection, WINDING } from '@math.gl/polygon';\nexport default class ColumnGeometry extends Geometry {\n  constructor(props = {}) {\n    const {\n      id = uid('column-geometry')\n    } = props;\n    const {\n      indices,\n      attributes\n    } = tesselateColumn(props);\n    super({ ...props,\n      id,\n      indices,\n      attributes\n    });\n  }\n\n}\n\nfunction tesselateColumn(props) {\n  const {\n    radius,\n    height = 1,\n    nradial = 10\n  } = props;\n  let {\n    vertices\n  } = props;\n\n  if (vertices) {\n    log.assert(vertices.length >= nradial);\n    vertices = vertices.flatMap(v => [v[0], v[1]]);\n    modifyPolygonWindingDirection(vertices, WINDING.COUNTER_CLOCKWISE);\n  }\n\n  const isExtruded = height > 0;\n  const vertsAroundEdge = nradial + 1;\n  const numVertices = isExtruded ? vertsAroundEdge * 3 + 1 : nradial;\n  const stepAngle = Math.PI * 2 / nradial;\n  const indices = new Uint16Array(isExtruded ? nradial * 3 * 2 : 0);\n  const positions = new Float32Array(numVertices * 3);\n  const normals = new Float32Array(numVertices * 3);\n  let i = 0;\n\n  if (isExtruded) {\n    for (let j = 0; j < vertsAroundEdge; j++) {\n      const a = j * stepAngle;\n      const vertexIndex = j % nradial;\n      const sin = Math.sin(a);\n      const cos = Math.cos(a);\n\n      for (let k = 0; k < 2; k++) {\n        positions[i + 0] = vertices ? vertices[vertexIndex * 2] : cos * radius;\n        positions[i + 1] = vertices ? vertices[vertexIndex * 2 + 1] : sin * radius;\n        positions[i + 2] = (1 / 2 - k) * height;\n        normals[i + 0] = vertices ? vertices[vertexIndex * 2] : cos;\n        normals[i + 1] = vertices ? vertices[vertexIndex * 2 + 1] : sin;\n        i += 3;\n      }\n    }\n\n    positions[i + 0] = positions[i - 3];\n    positions[i + 1] = positions[i - 2];\n    positions[i + 2] = positions[i - 1];\n    i += 3;\n  }\n\n  for (let j = isExtruded ? 0 : 1; j < vertsAroundEdge; j++) {\n    const v = Math.floor(j / 2) * Math.sign(0.5 - j % 2);\n    const a = v * stepAngle;\n    const vertexIndex = (v + nradial) % nradial;\n    const sin = Math.sin(a);\n    const cos = Math.cos(a);\n    positions[i + 0] = vertices ? vertices[vertexIndex * 2] : cos * radius;\n    positions[i + 1] = vertices ? vertices[vertexIndex * 2 + 1] : sin * radius;\n    positions[i + 2] = height / 2;\n    normals[i + 2] = 1;\n    i += 3;\n  }\n\n  if (isExtruded) {\n    let index = 0;\n\n    for (let j = 0; j < nradial; j++) {\n      indices[index++] = j * 2 + 0;\n      indices[index++] = j * 2 + 2;\n      indices[index++] = j * 2 + 0;\n      indices[index++] = j * 2 + 1;\n      indices[index++] = j * 2 + 1;\n      indices[index++] = j * 2 + 3;\n    }\n  }\n\n  return {\n    indices,\n    attributes: {\n      POSITION: {\n        size: 3,\n        value: positions\n      },\n      NORMAL: {\n        size: 3,\n        value: normals\n      }\n    }\n  };\n}\n//# sourceMappingURL=column-geometry.js.map","export default \"\\n#define SHADER_NAME column-layer-vertex-shader\\n\\nattribute vec3 positions;\\nattribute vec3 normals;\\n\\nattribute vec3 instancePositions;\\nattribute float instanceElevations;\\nattribute vec3 instancePositions64Low;\\nattribute vec4 instanceFillColors;\\nattribute vec4 instanceLineColors;\\nattribute float instanceStrokeWidths;\\n\\nattribute vec3 instancePickingColors;\\nuniform float opacity;\\nuniform float radius;\\nuniform float angle;\\nuniform vec2 offset;\\nuniform bool extruded;\\nuniform bool isStroke;\\nuniform float coverage;\\nuniform float elevationScale;\\nuniform float edgeDistance;\\nuniform float widthScale;\\nuniform float widthMinPixels;\\nuniform float widthMaxPixels;\\nuniform int radiusUnits;\\nuniform int widthUnits;\\nvarying vec4 vColor;\\n\\nvoid main(void) {\\n  geometry.worldPosition = instancePositions;\\n\\n  vec4 color = isStroke ? instanceLineColors : instanceFillColors;\\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\\n  float elevation = 0.0;\\n  float strokeOffsetRatio = 1.0;\\n\\n  if (extruded) {\\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\\n  } else if (isStroke) {\\n    float widthPixels = clamp(\\n      project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),\\n      widthMinPixels, widthMaxPixels) / 2.0;\\n    strokeOffsetRatio -= sign(positions.z) * project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);\\n  }\\n  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\\n  float dotRadius = radius * coverage * shouldRender;\\n\\n  geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\\n  geometry.pickingColor = instancePickingColors;\\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\\n  vec3 centroidPosition64Low = instancePositions64Low;\\n  vec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius;\\n  if (radiusUnits == UNIT_METERS) {\\n    offset = project_size(offset);\\n  }\\n  vec3 pos = vec3(offset, 0.);\\n  DECKGL_FILTER_SIZE(pos, geometry);\\n\\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n  if (extruded && !isStroke) {\\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\\n    vColor = vec4(lightColor, color.a * opacity);\\n  } else {\\n    vColor = vec4(color.rgb, color.a * opacity);\\n  }\\n  DECKGL_FILTER_COLOR(vColor, geometry);\\n}\\n\";\n//# sourceMappingURL=column-layer-vertex.glsl.js.map","export default \"#define SHADER_NAME column-layer-fragment-shader\\n\\nprecision highp float;\\n\\nvarying vec4 vColor;\\n\\nvoid main(void) {\\n  gl_FragColor = vColor;\\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\\n}\\n\";\n//# sourceMappingURL=column-layer-fragment.glsl.js.map","import { Layer, project32, gouraudLighting, picking, UNIT } from '@deck.gl/core';\nimport { Model } from '@luma.gl/core';\nimport ColumnGeometry from './column-geometry';\nimport vs from './column-layer-vertex.glsl';\nimport fs from './column-layer-fragment.glsl';\nconst DEFAULT_COLOR = [0, 0, 0, 255];\nconst defaultProps = {\n  diskResolution: {\n    type: 'number',\n    min: 4,\n    value: 20\n  },\n  vertices: null,\n  radius: {\n    type: 'number',\n    min: 0,\n    value: 1000\n  },\n  angle: {\n    type: 'number',\n    value: 0\n  },\n  offset: {\n    type: 'array',\n    value: [0, 0]\n  },\n  coverage: {\n    type: 'number',\n    min: 0,\n    max: 1,\n    value: 1\n  },\n  elevationScale: {\n    type: 'number',\n    min: 0,\n    value: 1\n  },\n  radiusUnits: 'meters',\n  lineWidthUnits: 'meters',\n  lineWidthScale: 1,\n  lineWidthMinPixels: 0,\n  lineWidthMaxPixels: Number.MAX_SAFE_INTEGER,\n  extruded: true,\n  wireframe: false,\n  filled: true,\n  stroked: false,\n  getPosition: {\n    type: 'accessor',\n    value: x => x.position\n  },\n  getFillColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getLineColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getLineWidth: {\n    type: 'accessor',\n    value: 1\n  },\n  getElevation: {\n    type: 'accessor',\n    value: 1000\n  },\n  material: true,\n  getColor: {\n    deprecatedFor: ['getFillColor', 'getLineColor']\n  }\n};\nexport default class ColumnLayer extends Layer {\n  getShaders() {\n    return super.getShaders({\n      vs,\n      fs,\n      modules: [project32, gouraudLighting, picking]\n    });\n  }\n\n  initializeState() {\n    const attributeManager = this.getAttributeManager();\n    attributeManager.addInstanced({\n      instancePositions: {\n        size: 3,\n        type: 5130,\n        fp64: this.use64bitPositions(),\n        transition: true,\n        accessor: 'getPosition'\n      },\n      instanceElevations: {\n        size: 1,\n        transition: true,\n        accessor: 'getElevation'\n      },\n      instanceFillColors: {\n        size: this.props.colorFormat.length,\n        type: 5121,\n        normalized: true,\n        transition: true,\n        accessor: 'getFillColor',\n        defaultValue: DEFAULT_COLOR\n      },\n      instanceLineColors: {\n        size: this.props.colorFormat.length,\n        type: 5121,\n        normalized: true,\n        transition: true,\n        accessor: 'getLineColor',\n        defaultValue: DEFAULT_COLOR\n      },\n      instanceStrokeWidths: {\n        size: 1,\n        accessor: 'getLineWidth',\n        transition: true\n      }\n    });\n  }\n\n  updateState({\n    props,\n    oldProps,\n    changeFlags\n  }) {\n    super.updateState({\n      props,\n      oldProps,\n      changeFlags\n    });\n    const regenerateModels = changeFlags.extensionsChanged;\n\n    if (regenerateModels) {\n      var _this$state$model;\n\n      const {\n        gl\n      } = this.context;\n      (_this$state$model = this.state.model) === null || _this$state$model === void 0 ? void 0 : _this$state$model.delete();\n      this.state.model = this._getModel(gl);\n      this.getAttributeManager().invalidateAll();\n    }\n\n    if (regenerateModels || props.diskResolution !== oldProps.diskResolution || props.vertices !== oldProps.vertices || (props.extruded || props.stroked) !== (oldProps.extruded || oldProps.stroked)) {\n      this._updateGeometry(props);\n    }\n  }\n\n  getGeometry(diskResolution, vertices, hasThinkness) {\n    const geometry = new ColumnGeometry({\n      radius: 1,\n      height: hasThinkness ? 2 : 0,\n      vertices,\n      nradial: diskResolution\n    });\n    let meanVertexDistance = 0;\n\n    if (vertices) {\n      for (let i = 0; i < diskResolution; i++) {\n        const p = vertices[i];\n        const d = Math.sqrt(p[0] * p[0] + p[1] * p[1]);\n        meanVertexDistance += d / diskResolution;\n      }\n    } else {\n      meanVertexDistance = 1;\n    }\n\n    this.setState({\n      edgeDistance: Math.cos(Math.PI / diskResolution) * meanVertexDistance\n    });\n    return geometry;\n  }\n\n  _getModel(gl) {\n    return new Model(gl, { ...this.getShaders(),\n      id: this.props.id,\n      isInstanced: true\n    });\n  }\n\n  _updateGeometry({\n    diskResolution,\n    vertices,\n    extruded,\n    stroked\n  }) {\n    const geometry = this.getGeometry(diskResolution, vertices, extruded || stroked);\n    this.setState({\n      fillVertexCount: geometry.attributes.POSITION.value.length / 3,\n      wireframeVertexCount: geometry.indices.value.length\n    });\n    this.state.model.setProps({\n      geometry\n    });\n  }\n\n  draw({\n    uniforms\n  }) {\n    const {\n      lineWidthUnits,\n      lineWidthScale,\n      lineWidthMinPixels,\n      lineWidthMaxPixels,\n      radiusUnits,\n      elevationScale,\n      extruded,\n      filled,\n      stroked,\n      wireframe,\n      offset,\n      coverage,\n      radius,\n      angle\n    } = this.props;\n    const {\n      model,\n      fillVertexCount,\n      wireframeVertexCount,\n      edgeDistance\n    } = this.state;\n    model.setUniforms(uniforms).setUniforms({\n      radius,\n      angle: angle / 180 * Math.PI,\n      offset,\n      extruded,\n      coverage,\n      elevationScale,\n      edgeDistance,\n      radiusUnits: UNIT[radiusUnits],\n      widthUnits: UNIT[lineWidthUnits],\n      widthScale: lineWidthScale,\n      widthMinPixels: lineWidthMinPixels,\n      widthMaxPixels: lineWidthMaxPixels\n    });\n\n    if (extruded && wireframe) {\n      model.setProps({\n        isIndexed: true\n      });\n      model.setVertexCount(wireframeVertexCount).setDrawMode(1).setUniforms({\n        isStroke: true\n      }).draw();\n    }\n\n    if (filled) {\n      model.setProps({\n        isIndexed: false\n      });\n      model.setVertexCount(fillVertexCount).setDrawMode(5).setUniforms({\n        isStroke: false\n      }).draw();\n    }\n\n    if (!extruded && stroked) {\n      model.setProps({\n        isIndexed: false\n      });\n      model.setVertexCount(fillVertexCount * 2 / 3).setDrawMode(5).setUniforms({\n        isStroke: true\n      }).draw();\n    }\n  }\n\n}\nColumnLayer.layerName = 'ColumnLayer';\nColumnLayer.defaultProps = defaultProps;\n//# sourceMappingURL=column-layer.js.map","export const defaultColorRange = [[255, 255, 178], [254, 217, 118], [254, 178, 76], [253, 141, 60], [240, 59, 32], [189, 0, 38]];\nexport function colorRangeToFlatArray(colorRange, normalize = false, ArrayType = Float32Array) {\n  let flatArray;\n\n  if (Number.isFinite(colorRange[0])) {\n    flatArray = new ArrayType(colorRange);\n  } else {\n    flatArray = new ArrayType(colorRange.length * 4);\n    let index = 0;\n\n    for (let i = 0; i < colorRange.length; i++) {\n      const color = colorRange[i];\n      flatArray[index++] = color[0];\n      flatArray[index++] = color[1];\n      flatArray[index++] = color[2];\n      flatArray[index++] = Number.isFinite(color[3]) ? color[3] : 255;\n    }\n  }\n\n  if (normalize) {\n    for (let i = 0; i < flatArray.length; i++) {\n      flatArray[i] /= 255;\n    }\n  }\n\n  return flatArray;\n}\n//# sourceMappingURL=color-utils.js.map","var thirdPi = Math.PI / 3,\n    angles = [0, thirdPi, 2 * thirdPi, 3 * thirdPi, 4 * thirdPi, 5 * thirdPi];\n\nfunction pointX(d) {\n  return d[0];\n}\n\nfunction pointY(d) {\n  return d[1];\n}\n\nexport default function() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 1,\n      y1 = 1,\n      x = pointX,\n      y = pointY,\n      r,\n      dx,\n      dy;\n\n  function hexbin(points) {\n    var binsById = {}, bins = [], i, n = points.length;\n\n    for (i = 0; i < n; ++i) {\n      if (isNaN(px = +x.call(null, point = points[i], i, points))\n          || isNaN(py = +y.call(null, point, i, points))) continue;\n\n      var point,\n          px,\n          py,\n          pj = Math.round(py = py / dy),\n          pi = Math.round(px = px / dx - (pj & 1) / 2),\n          py1 = py - pj;\n\n      if (Math.abs(py1) * 3 > 1) {\n        var px1 = px - pi,\n            pi2 = pi + (px < pi ? -1 : 1) / 2,\n            pj2 = pj + (py < pj ? -1 : 1),\n            px2 = px - pi2,\n            py2 = py - pj2;\n        if (px1 * px1 + py1 * py1 > px2 * px2 + py2 * py2) pi = pi2 + (pj & 1 ? 1 : -1) / 2, pj = pj2;\n      }\n\n      var id = pi + \"-\" + pj, bin = binsById[id];\n      if (bin) bin.push(point);\n      else {\n        bins.push(bin = binsById[id] = [point]);\n        bin.x = (pi + (pj & 1) / 2) * dx;\n        bin.y = pj * dy;\n      }\n    }\n\n    return bins;\n  }\n\n  function hexagon(radius) {\n    var x0 = 0, y0 = 0;\n    return angles.map(function(angle) {\n      var x1 = Math.sin(angle) * radius,\n          y1 = -Math.cos(angle) * radius,\n          dx = x1 - x0,\n          dy = y1 - y0;\n      x0 = x1, y0 = y1;\n      return [dx, dy];\n    });\n  }\n\n  hexbin.hexagon = function(radius) {\n    return \"m\" + hexagon(radius == null ? r : +radius).join(\"l\") + \"z\";\n  };\n\n  hexbin.centers = function() {\n    var centers = [],\n        j = Math.round(y0 / dy),\n        i = Math.round(x0 / dx);\n    for (var y = j * dy; y < y1 + r; y += dy, ++j) {\n      for (var x = i * dx + (j & 1) * dx / 2; x < x1 + dx / 2; x += dx) {\n        centers.push([x, y]);\n      }\n    }\n    return centers;\n  };\n\n  hexbin.mesh = function() {\n    var fragment = hexagon(r).slice(0, 4).join(\"l\");\n    return hexbin.centers().map(function(p) { return \"M\" + p + \"m\" + fragment; }).join(\"\");\n  };\n\n  hexbin.x = function(_) {\n    return arguments.length ? (x = _, hexbin) : x;\n  };\n\n  hexbin.y = function(_) {\n    return arguments.length ? (y = _, hexbin) : y;\n  };\n\n  hexbin.radius = function(_) {\n    return arguments.length ? (r = +_, dx = r * 2 * Math.sin(thirdPi), dy = r * 1.5, hexbin) : r;\n  };\n\n  hexbin.size = function(_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], hexbin) : [x1 - x0, y1 - y0];\n  };\n\n  hexbin.extent = function(_) {\n    return arguments.length ? (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1], hexbin) : [[x0, y0], [x1, y1]];\n  };\n\n  return hexbin.radius(1);\n}\n","import { hexbin } from 'd3-hexbin';\nimport { createIterable, log } from '@deck.gl/core';\nexport function pointToHexbin(props, aggregationParams) {\n  const {\n    data,\n    radius\n  } = props;\n  const {\n    viewport,\n    attributes\n  } = aggregationParams;\n  const centerLngLat = data.length ? getPointsCenter(data, aggregationParams) : null;\n  const radiusCommon = getRadiusInCommon(radius, viewport, centerLngLat);\n  const screenPoints = [];\n  const {\n    iterable,\n    objectInfo\n  } = createIterable(data);\n  const positions = attributes.positions.value;\n  const {\n    size\n  } = attributes.positions.getAccessor();\n\n  for (const object of iterable) {\n    objectInfo.index++;\n    const posIndex = objectInfo.index * size;\n    const position = [positions[posIndex], positions[posIndex + 1]];\n    const arrayIsFinite = Number.isFinite(position[0]) && Number.isFinite(position[1]);\n\n    if (arrayIsFinite) {\n      screenPoints.push({\n        screenCoord: viewport.projectFlat(position),\n        source: object,\n        index: objectInfo.index\n      });\n    } else {\n      log.warn('HexagonLayer: invalid position')();\n    }\n  }\n\n  const newHexbin = hexbin().radius(radiusCommon).x(d => d.screenCoord[0]).y(d => d.screenCoord[1]);\n  const hexagonBins = newHexbin(screenPoints);\n  return {\n    hexagons: hexagonBins.map((hex, index) => ({\n      position: viewport.unprojectFlat([hex.x, hex.y]),\n      points: hex,\n      index\n    })),\n    radiusCommon\n  };\n}\nexport function getPointsCenter(data, aggregationParams) {\n  const {\n    attributes\n  } = aggregationParams;\n  const positions = attributes.positions.value;\n  const {\n    size\n  } = attributes.positions.getAccessor();\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n  let i;\n\n  for (i = 0; i < size * data.length; i += size) {\n    const x = positions[i];\n    const y = positions[i + 1];\n    const arrayIsFinite = Number.isFinite(x) && Number.isFinite(y);\n\n    if (arrayIsFinite) {\n      minX = Math.min(x, minX);\n      maxX = Math.max(x, maxX);\n      minY = Math.min(y, minY);\n      maxY = Math.max(y, maxY);\n    }\n  }\n\n  return [minX, minY, maxX, maxY].every(Number.isFinite) ? [(minX + maxX) / 2, (minY + maxY) / 2] : null;\n}\nexport function getRadiusInCommon(radius, viewport, center) {\n  const {\n    unitsPerMeter\n  } = viewport.getDistanceScales(center);\n  return radius * unitsPerMeter[0];\n}\n//# sourceMappingURL=hexagon-aggregator.js.map","import { log } from '@deck.gl/core';\nexport function getScale(domain, range, scaleFunction) {\n  const scale = scaleFunction;\n\n  scale.domain = () => domain;\n\n  scale.range = () => range;\n\n  return scale;\n}\nexport function getQuantizeScale(domain, range) {\n  const scaleFunction = value => quantizeScale(domain, range, value);\n\n  return getScale(domain, range, scaleFunction);\n}\nexport function getLinearScale(domain, range) {\n  const scaleFunction = value => linearScale(domain, range, value);\n\n  return getScale(domain, range, scaleFunction);\n}\nexport function getQuantileScale(domain, range) {\n  const sortedDomain = domain.sort(ascending);\n  let i = 0;\n  const n = Math.max(1, range.length);\n  const thresholds = new Array(n - 1);\n\n  while (++i < n) {\n    thresholds[i - 1] = threshold(sortedDomain, i / n);\n  }\n\n  const scaleFunction = value => thresholdsScale(thresholds, range, value);\n\n  scaleFunction.thresholds = () => thresholds;\n\n  return getScale(domain, range, scaleFunction);\n}\n\nfunction ascending(a, b) {\n  return a - b;\n}\n\nfunction threshold(domain, fraction) {\n  const domainLength = domain.length;\n\n  if (fraction <= 0 || domainLength < 2) {\n    return domain[0];\n  }\n\n  if (fraction >= 1) {\n    return domain[domainLength - 1];\n  }\n\n  const domainFraction = (domainLength - 1) * fraction;\n  const lowIndex = Math.floor(domainFraction);\n  const low = domain[lowIndex];\n  const high = domain[lowIndex + 1];\n  return low + (high - low) * (domainFraction - lowIndex);\n}\n\nfunction bisectRight(a, x) {\n  let lo = 0;\n  let hi = a.length;\n\n  while (lo < hi) {\n    const mid = lo + hi >>> 1;\n\n    if (ascending(a[mid], x) > 0) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n\n  return lo;\n}\n\nfunction thresholdsScale(thresholds, range, value) {\n  return range[bisectRight(thresholds, value)];\n}\n\nfunction ordinalScale(domain, domainMap, range, value) {\n  const key = \"\".concat(value);\n  let d = domainMap.get(key);\n\n  if (d === undefined) {\n    d = domain.push(value);\n    domainMap.set(key, d);\n  }\n\n  return range[(d - 1) % range.length];\n}\n\nexport function getOrdinalScale(domain, range) {\n  const domainMap = new Map();\n  const uniqueDomain = [];\n\n  for (const d of domain) {\n    const key = \"\".concat(d);\n\n    if (!domainMap.has(key)) {\n      domainMap.set(key, uniqueDomain.push(d));\n    }\n  }\n\n  const scaleFunction = value => ordinalScale(uniqueDomain, domainMap, range, value);\n\n  return getScale(domain, range, scaleFunction);\n}\nexport function quantizeScale(domain, range, value) {\n  const domainRange = domain[1] - domain[0];\n\n  if (domainRange <= 0) {\n    log.warn('quantizeScale: invalid domain, returning range[0]')();\n    return range[0];\n  }\n\n  const step = domainRange / range.length;\n  const idx = Math.floor((value - domain[0]) / step);\n  const clampIdx = Math.max(Math.min(idx, range.length - 1), 0);\n  return range[clampIdx];\n}\nexport function linearScale(domain, range, value) {\n  return (value - domain[0]) / (domain[1] - domain[0]) * (range[1] - range[0]) + range[0];\n}\n\nfunction notNullOrUndefined(d) {\n  return d !== undefined && d !== null;\n}\n\nexport function unique(values) {\n  const results = [];\n  values.forEach(v => {\n    if (!results.includes(v) && notNullOrUndefined(v)) {\n      results.push(v);\n    }\n  });\n  return results;\n}\n\nfunction getTruthyValues(data, valueAccessor) {\n  const values = typeof valueAccessor === 'function' ? data.map(valueAccessor) : data;\n  return values.filter(notNullOrUndefined);\n}\n\nexport function getLinearDomain(data, valueAccessor) {\n  const sorted = getTruthyValues(data, valueAccessor).sort();\n  return sorted.length ? [sorted[0], sorted[sorted.length - 1]] : [0, 0];\n}\nexport function getQuantileDomain(data, valueAccessor) {\n  return getTruthyValues(data, valueAccessor);\n}\nexport function getOrdinalDomain(data, valueAccessor) {\n  return unique(getTruthyValues(data, valueAccessor));\n}\nexport function getScaleDomain(scaleType, data, valueAccessor) {\n  switch (scaleType) {\n    case 'quantize':\n    case 'linear':\n      return getLinearDomain(data, valueAccessor);\n\n    case 'quantile':\n      return getQuantileDomain(data, valueAccessor);\n\n    case 'ordinal':\n      return getOrdinalDomain(data, valueAccessor);\n\n    default:\n      return getLinearDomain(data, valueAccessor);\n  }\n}\nexport function clamp(value, min, max) {\n  return Math.max(min, Math.min(max, value));\n}\nexport function getScaleFunctionByScaleType(scaleType) {\n  switch (scaleType) {\n    case 'quantize':\n      return getQuantizeScale;\n\n    case 'linear':\n      return getLinearScale;\n\n    case 'quantile':\n      return getQuantileScale;\n\n    case 'ordinal':\n      return getOrdinalScale;\n\n    default:\n      return getQuantizeScale;\n  }\n}\n//# sourceMappingURL=scale-utils.js.map","const defaultGetValue = points => points.length;\n\nimport { clamp, getQuantileDomain, getOrdinalDomain } from './scale-utils';\nconst MAX_32_BIT_FLOAT = 3.402823466e38;\n\nconst defaultGetPoints = bin => bin.points;\n\nconst defaultGetIndex = bin => bin.index;\n\nconst ascending = (a, b) => a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n\nconst defaultProps = {\n  getValue: defaultGetValue,\n  getPoints: defaultGetPoints,\n  getIndex: defaultGetIndex,\n  filterData: null\n};\nexport default class BinSorter {\n  constructor(bins = [], props = defaultProps) {\n    this.aggregatedBins = this.getAggregatedBins(bins, props);\n\n    this._updateMinMaxValues();\n\n    this.binMap = this.getBinMap();\n  }\n\n  getAggregatedBins(bins, props) {\n    const {\n      getValue = defaultGetValue,\n      getPoints = defaultGetPoints,\n      getIndex = defaultGetIndex,\n      filterData\n    } = props;\n    const hasFilter = typeof filterData === 'function';\n    const binCount = bins.length;\n    const aggregatedBins = [];\n    let index = 0;\n\n    for (let binIndex = 0; binIndex < binCount; binIndex++) {\n      const bin = bins[binIndex];\n      const points = getPoints(bin);\n      const i = getIndex(bin);\n      const filteredPoints = hasFilter ? points.filter(filterData) : points;\n      bin.filteredPoints = hasFilter ? filteredPoints : null;\n      const value = filteredPoints.length ? getValue(filteredPoints) : null;\n\n      if (value !== null && value !== undefined) {\n        aggregatedBins[index] = {\n          i: Number.isFinite(i) ? i : binIndex,\n          value,\n          counts: filteredPoints.length\n        };\n        index++;\n      }\n    }\n\n    return aggregatedBins;\n  }\n\n  _percentileToIndex(percentileRange) {\n    const len = this.sortedBins.length;\n\n    if (len < 2) {\n      return [0, 0];\n    }\n\n    const [lower, upper] = percentileRange.map(n => clamp(n, 0, 100));\n    const lowerIdx = Math.ceil(lower / 100 * (len - 1));\n    const upperIdx = Math.floor(upper / 100 * (len - 1));\n    return [lowerIdx, upperIdx];\n  }\n\n  getBinMap() {\n    const binMap = {};\n\n    for (const bin of this.aggregatedBins) {\n      binMap[bin.i] = bin;\n    }\n\n    return binMap;\n  }\n\n  _updateMinMaxValues() {\n    let maxCount = 0;\n    let maxValue = 0;\n    let minValue = MAX_32_BIT_FLOAT;\n    let totalCount = 0;\n\n    for (const x of this.aggregatedBins) {\n      maxCount = maxCount > x.counts ? maxCount : x.counts;\n      maxValue = maxValue > x.value ? maxValue : x.value;\n      minValue = minValue < x.value ? minValue : x.value;\n      totalCount += x.counts;\n    }\n\n    this.maxCount = maxCount;\n    this.maxValue = maxValue;\n    this.minValue = minValue;\n    this.totalCount = totalCount;\n  }\n\n  getValueRange(percentileRange) {\n    if (!this.sortedBins) {\n      this.sortedBins = this.aggregatedBins.sort((a, b) => ascending(a.value, b.value));\n    }\n\n    if (!this.sortedBins.length) {\n      return [];\n    }\n\n    let lowerIdx = 0;\n    let upperIdx = this.sortedBins.length - 1;\n\n    if (Array.isArray(percentileRange)) {\n      const idxRange = this._percentileToIndex(percentileRange);\n\n      lowerIdx = idxRange[0];\n      upperIdx = idxRange[1];\n    }\n\n    return [this.sortedBins[lowerIdx].value, this.sortedBins[upperIdx].value];\n  }\n\n  getValueDomainByScale(scale, [lower = 0, upper = 100] = []) {\n    if (!this.sortedBins) {\n      this.sortedBins = this.aggregatedBins.sort((a, b) => ascending(a.value, b.value));\n    }\n\n    if (!this.sortedBins.length) {\n      return [];\n    }\n\n    const indexEdge = this._percentileToIndex([lower, upper]);\n\n    return this._getScaleDomain(scale, indexEdge);\n  }\n\n  _getScaleDomain(scaleType, [lowerIdx, upperIdx]) {\n    const bins = this.sortedBins;\n\n    switch (scaleType) {\n      case 'quantize':\n      case 'linear':\n        return [bins[lowerIdx].value, bins[upperIdx].value];\n\n      case 'quantile':\n        return getQuantileDomain(bins.slice(lowerIdx, upperIdx + 1), d => d.value);\n\n      case 'ordinal':\n        return getOrdinalDomain(bins, d => d.value);\n\n      default:\n        return [bins[lowerIdx].value, bins[upperIdx].value];\n    }\n  }\n\n}\n//# sourceMappingURL=bin-sorter.js.map","export const AGGREGATION_OPERATION = {\n  SUM: 1,\n  MEAN: 2,\n  MIN: 3,\n  MAX: 4\n};\n\nfunction sumReducer(accu, cur) {\n  return accu + cur;\n}\n\nfunction maxReducer(accu, cur) {\n  return cur > accu ? cur : accu;\n}\n\nfunction minReducer(accu, cur) {\n  return cur < accu ? cur : accu;\n}\n\nexport function getMean(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(sumReducer, 0) / filtered.length : null;\n}\nexport function getSum(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? pts.length * accessor : null;\n  }\n\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(sumReducer, 0) : null;\n}\nexport function getMax(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(maxReducer, -Infinity) : null;\n}\nexport function getMin(pts, accessor) {\n  if (Number.isFinite(accessor)) {\n    return pts.length ? accessor : null;\n  }\n\n  const filtered = pts.map(accessor).filter(Number.isFinite);\n  return filtered.length ? filtered.reduce(minReducer, Infinity) : null;\n}\nexport function getValueFunc(aggregation, accessor, context) {\n  const op = AGGREGATION_OPERATION[aggregation] || AGGREGATION_OPERATION.SUM;\n  accessor = wrapAccessor(accessor, context);\n\n  switch (op) {\n    case AGGREGATION_OPERATION.MIN:\n      return pts => getMin(pts, accessor);\n\n    case AGGREGATION_OPERATION.SUM:\n      return pts => getSum(pts, accessor);\n\n    case AGGREGATION_OPERATION.MEAN:\n      return pts => getMean(pts, accessor);\n\n    case AGGREGATION_OPERATION.MAX:\n      return pts => getMax(pts, accessor);\n\n    default:\n      return null;\n  }\n}\n\nfunction wrapAccessor(accessor, context = {}) {\n  if (Number.isFinite(accessor)) {\n    return accessor;\n  }\n\n  return pt => {\n    context.index = pt.index;\n    return accessor(pt.source, context);\n  };\n}\n\nexport function wrapGetValueFunc(getValue, context = {}) {\n  return pts => {\n    context.indices = pts.map(pt => pt.index);\n    return getValue(pts.map(pt => pt.source), context);\n  };\n}\n//# sourceMappingURL=aggregation-operation-utils.js.map","import BinSorter from './bin-sorter';\nimport { getScaleFunctionByScaleType } from './scale-utils';\nimport { getValueFunc, wrapGetValueFunc } from './aggregation-operation-utils';\n\nfunction nop() {}\n\nconst dimensionSteps = ['getBins', 'getDomain', 'getScaleFunc'];\nconst defaultDimensions = [{\n  key: 'fillColor',\n  accessor: 'getFillColor',\n  pickingInfo: 'colorValue',\n  getBins: {\n    triggers: {\n      value: {\n        prop: 'getColorValue',\n        updateTrigger: 'getColorValue'\n      },\n      weight: {\n        prop: 'getColorWeight',\n        updateTrigger: 'getColorWeight'\n      },\n      aggregation: {\n        prop: 'colorAggregation'\n      },\n      filterData: {\n        prop: '_filterData',\n        updateTrigger: '_filterData'\n      }\n    }\n  },\n  getDomain: {\n    triggers: {\n      lowerPercentile: {\n        prop: 'lowerPercentile'\n      },\n      upperPercentile: {\n        prop: 'upperPercentile'\n      },\n      scaleType: {\n        prop: 'colorScaleType'\n      }\n    }\n  },\n  getScaleFunc: {\n    triggers: {\n      domain: {\n        prop: 'colorDomain'\n      },\n      range: {\n        prop: 'colorRange'\n      }\n    },\n    onSet: {\n      props: 'onSetColorDomain'\n    }\n  },\n  nullValue: [0, 0, 0, 0]\n}, {\n  key: 'elevation',\n  accessor: 'getElevation',\n  pickingInfo: 'elevationValue',\n  getBins: {\n    triggers: {\n      value: {\n        prop: 'getElevationValue',\n        updateTrigger: 'getElevationValue'\n      },\n      weight: {\n        prop: 'getElevationWeight',\n        updateTrigger: 'getElevationWeight'\n      },\n      aggregation: {\n        prop: 'elevationAggregation'\n      },\n      filterData: {\n        prop: '_filterData',\n        updateTrigger: '_filterData'\n      }\n    }\n  },\n  getDomain: {\n    triggers: {\n      lowerPercentile: {\n        prop: 'elevationLowerPercentile'\n      },\n      upperPercentile: {\n        prop: 'elevationUpperPercentile'\n      },\n      scaleType: {\n        prop: 'elevationScaleType'\n      }\n    }\n  },\n  getScaleFunc: {\n    triggers: {\n      domain: {\n        prop: 'elevationDomain'\n      },\n      range: {\n        prop: 'elevationRange'\n      }\n    },\n    onSet: {\n      props: 'onSetElevationDomain'\n    }\n  },\n  nullValue: -1\n}];\n\nconst defaultGetCellSize = props => props.cellSize;\n\nexport default class CPUAggregator {\n  constructor(opts) {\n    this.state = {\n      layerData: {},\n      dimensions: {}\n    };\n    this.changeFlags = {};\n    this.dimensionUpdaters = {};\n    this._getCellSize = opts.getCellSize || defaultGetCellSize;\n    this._getAggregator = opts.getAggregator;\n\n    this._addDimension(opts.dimensions || defaultDimensions);\n  }\n\n  static defaultDimensions() {\n    return defaultDimensions;\n  }\n\n  updateState(opts, aggregationParams) {\n    const {\n      oldProps,\n      props,\n      changeFlags\n    } = opts;\n    this.updateGetValueFuncs(oldProps, props, changeFlags);\n    const reprojectNeeded = this.needsReProjectPoints(oldProps, props, changeFlags);\n    let aggregationDirty = false;\n\n    if (changeFlags.dataChanged || reprojectNeeded) {\n      this.getAggregatedData(props, aggregationParams);\n      aggregationDirty = true;\n    } else {\n      const dimensionChanges = this.getDimensionChanges(oldProps, props, changeFlags) || [];\n      dimensionChanges.forEach(f => typeof f === 'function' && f());\n      aggregationDirty = true;\n    }\n\n    this.setState({\n      aggregationDirty\n    });\n    return this.state;\n  }\n\n  setState(updateObject) {\n    this.state = { ...this.state,\n      ...updateObject\n    };\n  }\n\n  setDimensionState(key, updateObject) {\n    this.setState({\n      dimensions: { ...this.state.dimensions,\n        [key]: { ...this.state.dimensions[key],\n          ...updateObject\n        }\n      }\n    });\n  }\n\n  normalizeResult(result = {}) {\n    if (result.hexagons) {\n      return {\n        data: result.hexagons,\n        ...result\n      };\n    } else if (result.layerData) {\n      return {\n        data: result.layerData,\n        ...result\n      };\n    }\n\n    return result;\n  }\n\n  getAggregatedData(props, aggregationParams) {\n    const aggregator = this._getAggregator(props);\n\n    const result = aggregator(props, aggregationParams);\n    this.setState({\n      layerData: this.normalizeResult(result)\n    });\n    this.changeFlags = {\n      layerData: true\n    };\n    this.getSortedBins(props);\n  }\n\n  updateGetValueFuncs(oldProps, props, changeFlags) {\n    for (const key in this.dimensionUpdaters) {\n      const {\n        value,\n        weight,\n        aggregation\n      } = this.dimensionUpdaters[key].getBins.triggers;\n      let getValue = props[value.prop];\n      const getValueChanged = this.needUpdateDimensionStep(this.dimensionUpdaters[key].getBins, oldProps, props, changeFlags);\n\n      if (getValueChanged) {\n        if (getValue) {\n          getValue = wrapGetValueFunc(getValue, {\n            data: props.data\n          });\n        } else {\n          getValue = getValueFunc(props[aggregation.prop], props[weight.prop], {\n            data: props.data\n          });\n        }\n      }\n\n      if (getValue) {\n        this.setDimensionState(key, {\n          getValue\n        });\n      }\n    }\n  }\n\n  needsReProjectPoints(oldProps, props, changeFlags) {\n    return this._getCellSize(oldProps) !== this._getCellSize(props) || this._getAggregator(oldProps) !== this._getAggregator(props) || changeFlags.updateTriggersChanged && (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged.getPosition);\n  }\n\n  addDimension(dimensions) {\n    this._addDimension(dimensions);\n  }\n\n  _addDimension(dimensions = []) {\n    dimensions.forEach(dimension => {\n      const {\n        key\n      } = dimension;\n      this.dimensionUpdaters[key] = this.getDimensionUpdaters(dimension);\n      this.state.dimensions[key] = {\n        getValue: null,\n        domain: null,\n        sortedBins: null,\n        scaleFunc: nop\n      };\n    });\n  }\n\n  getDimensionUpdaters({\n    key,\n    accessor,\n    pickingInfo,\n    getBins,\n    getDomain,\n    getScaleFunc,\n    nullValue\n  }) {\n    return {\n      key,\n      accessor,\n      pickingInfo,\n      getBins: {\n        updater: this.getDimensionSortedBins,\n        ...getBins\n      },\n      getDomain: {\n        updater: this.getDimensionValueDomain,\n        ...getDomain\n      },\n      getScaleFunc: {\n        updater: this.getDimensionScale,\n        ...getScaleFunc\n      },\n      attributeAccessor: this.getSubLayerDimensionAttribute(key, nullValue)\n    };\n  }\n\n  needUpdateDimensionStep(dimensionStep, oldProps, props, changeFlags) {\n    return Object.values(dimensionStep.triggers).some(item => {\n      if (item.updateTrigger) {\n        return changeFlags.dataChanged || changeFlags.updateTriggersChanged && (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged[item.updateTrigger]);\n      }\n\n      return oldProps[item.prop] !== props[item.prop];\n    });\n  }\n\n  getDimensionChanges(oldProps, props, changeFlags) {\n    const updaters = [];\n\n    for (const key in this.dimensionUpdaters) {\n      const needUpdate = dimensionSteps.find(step => this.needUpdateDimensionStep(this.dimensionUpdaters[key][step], oldProps, props, changeFlags));\n\n      if (needUpdate) {\n        updaters.push(this.dimensionUpdaters[key][needUpdate].updater.bind(this, props, this.dimensionUpdaters[key]));\n      }\n    }\n\n    return updaters.length ? updaters : null;\n  }\n\n  getUpdateTriggers(props) {\n    const _updateTriggers = props.updateTriggers || {};\n\n    const updateTriggers = {};\n\n    for (const key in this.dimensionUpdaters) {\n      const {\n        accessor\n      } = this.dimensionUpdaters[key];\n      updateTriggers[accessor] = {};\n      dimensionSteps.forEach(step => {\n        Object.values(this.dimensionUpdaters[key][step].triggers).forEach(({\n          prop,\n          updateTrigger\n        }) => {\n          if (updateTrigger) {\n            const fromProp = _updateTriggers[updateTrigger];\n\n            if (typeof fromProp === 'object' && !Array.isArray(fromProp)) {\n              Object.assign(updateTriggers[accessor], fromProp);\n            } else if (fromProp !== undefined) {\n              updateTriggers[accessor][prop] = fromProp;\n            }\n          } else {\n            updateTriggers[accessor][prop] = props[prop];\n          }\n        });\n      });\n    }\n\n    return updateTriggers;\n  }\n\n  getSortedBins(props) {\n    for (const key in this.dimensionUpdaters) {\n      this.getDimensionSortedBins(props, this.dimensionUpdaters[key]);\n    }\n  }\n\n  getDimensionSortedBins(props, dimensionUpdater) {\n    const {\n      key\n    } = dimensionUpdater;\n    const {\n      getValue\n    } = this.state.dimensions[key];\n    const sortedBins = new BinSorter(this.state.layerData.data || [], {\n      getValue,\n      filterData: props._filterData\n    });\n    this.setDimensionState(key, {\n      sortedBins\n    });\n    this.getDimensionValueDomain(props, dimensionUpdater);\n  }\n\n  getDimensionValueDomain(props, dimensionUpdater) {\n    const {\n      getDomain,\n      key\n    } = dimensionUpdater;\n    const {\n      triggers: {\n        lowerPercentile,\n        upperPercentile,\n        scaleType\n      }\n    } = getDomain;\n    const valueDomain = this.state.dimensions[key].sortedBins.getValueDomainByScale(props[scaleType.prop], [props[lowerPercentile.prop], props[upperPercentile.prop]]);\n    this.setDimensionState(key, {\n      valueDomain\n    });\n    this.getDimensionScale(props, dimensionUpdater);\n  }\n\n  getDimensionScale(props, dimensionUpdater) {\n    const {\n      key,\n      getScaleFunc,\n      getDomain\n    } = dimensionUpdater;\n    const {\n      domain,\n      range\n    } = getScaleFunc.triggers;\n    const {\n      scaleType\n    } = getDomain.triggers;\n    const {\n      onSet\n    } = getScaleFunc;\n    const dimensionRange = props[range.prop];\n    const dimensionDomain = props[domain.prop] || this.state.dimensions[key].valueDomain;\n    const getScaleFunction = getScaleFunctionByScaleType(scaleType && props[scaleType.prop]);\n    const scaleFunc = getScaleFunction(dimensionDomain, dimensionRange);\n\n    if (typeof onSet === 'object' && typeof props[onSet.props] === 'function') {\n      props[onSet.props](scaleFunc.domain());\n    }\n\n    this.setDimensionState(key, {\n      scaleFunc\n    });\n  }\n\n  getSubLayerDimensionAttribute(key, nullValue) {\n    return cell => {\n      const {\n        sortedBins,\n        scaleFunc\n      } = this.state.dimensions[key];\n      const bin = sortedBins.binMap[cell.index];\n\n      if (bin && bin.counts === 0) {\n        return nullValue;\n      }\n\n      const cv = bin && bin.value;\n      const domain = scaleFunc.domain();\n      const isValueInDomain = cv >= domain[0] && cv <= domain[domain.length - 1];\n      return isValueInDomain ? scaleFunc(cv) : nullValue;\n    };\n  }\n\n  getSubLayerAccessors(props) {\n    const accessors = {};\n\n    for (const key in this.dimensionUpdaters) {\n      const {\n        accessor\n      } = this.dimensionUpdaters[key];\n      accessors[accessor] = this.getSubLayerDimensionAttribute(props, key);\n    }\n\n    return accessors;\n  }\n\n  getPickingInfo({\n    info\n  }) {\n    const isPicked = info.picked && info.index > -1;\n    let object = null;\n\n    if (isPicked) {\n      const cell = this.state.layerData.data[info.index];\n      const binInfo = {};\n\n      for (const key in this.dimensionUpdaters) {\n        const {\n          pickingInfo\n        } = this.dimensionUpdaters[key];\n        const {\n          sortedBins\n        } = this.state.dimensions[key];\n        const value = sortedBins.binMap[cell.index] && sortedBins.binMap[cell.index].value;\n        binInfo[pickingInfo] = value;\n      }\n\n      object = Object.assign(binInfo, cell, {\n        points: cell.filteredPoints || cell.points\n      });\n    }\n\n    info.picked = Boolean(object);\n    info.object = object;\n    return info;\n  }\n\n  getAccessor(dimensionKey) {\n    if (!this.dimensionUpdaters.hasOwnProperty(dimensionKey)) {\n      return nop;\n    }\n\n    return this.dimensionUpdaters[dimensionKey].attributeAccessor;\n  }\n\n}\n//# sourceMappingURL=cpu-aggregator.js.map","import Layer from './layer';\nimport debug from '../debug';\nimport { flatten } from '../utils/flatten';\nconst TRACE_RENDER_LAYERS = 'compositeLayer.renderLayers';\nexport default class CompositeLayer extends Layer {\n  get isComposite() {\n    return true;\n  }\n\n  get isLoaded() {\n    return super.isLoaded && this.getSubLayers().every(layer => layer.isLoaded);\n  }\n\n  getSubLayers() {\n    return this.internalState && this.internalState.subLayers || [];\n  }\n\n  initializeState() {}\n\n  setState(updateObject) {\n    super.setState(updateObject);\n    this.setNeedsUpdate();\n  }\n\n  getPickingInfo({\n    info\n  }) {\n    const {\n      object\n    } = info;\n    const isDataWrapped = object && object.__source && object.__source.parent && object.__source.parent.id === this.id;\n\n    if (!isDataWrapped) {\n      return info;\n    }\n\n    info.object = object.__source.object;\n    info.index = object.__source.index;\n    return info;\n  }\n\n  renderLayers() {\n    return null;\n  }\n\n  filterSubLayer(context) {\n    return true;\n  }\n\n  shouldRenderSubLayer(id, data) {\n    return data && data.length;\n  }\n\n  getSubLayerClass(id, DefaultLayerClass) {\n    const {\n      _subLayerProps: overridingProps\n    } = this.props;\n    return overridingProps && overridingProps[id] && overridingProps[id].type || DefaultLayerClass;\n  }\n\n  getSubLayerRow(row, sourceObject, sourceObjectIndex) {\n    row.__source = {\n      parent: this,\n      object: sourceObject,\n      index: sourceObjectIndex\n    };\n    return row;\n  }\n\n  getSubLayerAccessor(accessor) {\n    if (typeof accessor === 'function') {\n      const objectInfo = {\n        data: this.props.data,\n        target: []\n      };\n      return (x, i) => {\n        if (x && x.__source) {\n          objectInfo.index = x.__source.index;\n          return accessor(x.__source.object, objectInfo);\n        }\n\n        return accessor(x, i);\n      };\n    }\n\n    return accessor;\n  }\n\n  getSubLayerProps(sublayerProps = {}) {\n    const {\n      opacity,\n      pickable,\n      visible,\n      parameters,\n      getPolygonOffset,\n      highlightedObjectIndex,\n      autoHighlight,\n      highlightColor,\n      coordinateSystem,\n      coordinateOrigin,\n      wrapLongitude,\n      positionFormat,\n      modelMatrix,\n      extensions,\n      fetch,\n      _subLayerProps: overridingProps\n    } = this.props;\n    const newProps = {\n      opacity,\n      pickable,\n      visible,\n      parameters,\n      getPolygonOffset,\n      highlightedObjectIndex,\n      autoHighlight,\n      highlightColor,\n      coordinateSystem,\n      coordinateOrigin,\n      wrapLongitude,\n      positionFormat,\n      modelMatrix,\n      extensions,\n      fetch\n    };\n    const overridingSublayerProps = overridingProps && overridingProps[sublayerProps.id];\n    const overridingSublayerTriggers = overridingSublayerProps && overridingSublayerProps.updateTriggers;\n    const sublayerId = sublayerProps.id || 'sublayer';\n\n    if (overridingSublayerProps) {\n      const propTypes = this.constructor._propTypes;\n      const subLayerPropTypes = sublayerProps.type ? sublayerProps.type._propTypes : {};\n\n      for (const key in overridingSublayerProps) {\n        const propType = subLayerPropTypes[key] || propTypes[key];\n\n        if (propType && propType.type === 'accessor') {\n          overridingSublayerProps[key] = this.getSubLayerAccessor(overridingSublayerProps[key]);\n        }\n      }\n    }\n\n    Object.assign(newProps, sublayerProps, overridingSublayerProps);\n    newProps.id = \"\".concat(this.props.id, \"-\").concat(sublayerId);\n    newProps.updateTriggers = {\n      all: this.props.updateTriggers.all,\n      ...sublayerProps.updateTriggers,\n      ...overridingSublayerTriggers\n    };\n\n    for (const extension of extensions) {\n      const passThroughProps = extension.getSubLayerProps.call(this, extension);\n\n      if (passThroughProps) {\n        Object.assign(newProps, passThroughProps, {\n          updateTriggers: Object.assign(newProps.updateTriggers, passThroughProps.updateTriggers)\n        });\n      }\n    }\n\n    return newProps;\n  }\n\n  _updateAutoHighlight(info) {\n    for (const layer of this.getSubLayers()) {\n      layer.updateAutoHighlight(info);\n    }\n  }\n\n  _getAttributeManager() {\n    return null;\n  }\n\n  _renderLayers() {\n    let {\n      subLayers\n    } = this.internalState;\n    const shouldUpdate = !subLayers || this.needsUpdate();\n\n    if (shouldUpdate) {\n      subLayers = this.renderLayers();\n      subLayers = flatten(subLayers, Boolean);\n      this.internalState.subLayers = subLayers;\n    }\n\n    debug(TRACE_RENDER_LAYERS, this, shouldUpdate, subLayers);\n\n    for (const layer of subLayers) {\n      layer.parent = this;\n    }\n  }\n\n}\nCompositeLayer.layerName = 'CompositeLayer';\n//# sourceMappingURL=composite-layer.js.map","export function filterProps(props, filterKeys) {\n  const filteredProps = {};\n\n  for (const key in props) {\n    if (!filterKeys.includes(key)) {\n      filteredProps[key] = props[key];\n    }\n  }\n\n  return filteredProps;\n}\n//# sourceMappingURL=prop-utils.js.map","import { CompositeLayer, AttributeManager, _compareProps as compareProps } from '@deck.gl/core';\nimport { cssToDeviceRatio } from '@luma.gl/core';\nimport { filterProps } from './utils/prop-utils';\nexport default class AggregationLayer extends CompositeLayer {\n  initializeState(dimensions) {\n    super.initializeState();\n    this.setState({\n      ignoreProps: filterProps(this.constructor._propTypes, dimensions.data.props),\n      dimensions\n    });\n  }\n\n  updateState(opts) {\n    super.updateState(opts);\n    const {\n      changeFlags\n    } = opts;\n\n    if (changeFlags.extensionsChanged) {\n      const shaders = this.getShaders({});\n\n      if (shaders && shaders.defines) {\n        shaders.defines.NON_INSTANCED_MODEL = 1;\n      }\n\n      this.updateShaders(shaders);\n    }\n\n    this._updateAttributes(opts.props);\n  }\n\n  updateAttributes(changedAttributes) {\n    this.setState({\n      changedAttributes\n    });\n  }\n\n  getAttributes() {\n    return this.getAttributeManager().getShaderAttributes();\n  }\n\n  getModuleSettings() {\n    const {\n      viewport,\n      mousePosition,\n      gl\n    } = this.context;\n    const moduleSettings = Object.assign(Object.create(this.props), {\n      viewport,\n      mousePosition,\n      pickingActive: 0,\n      devicePixelRatio: cssToDeviceRatio(gl)\n    });\n    return moduleSettings;\n  }\n\n  updateShaders(shaders) {}\n\n  isAggregationDirty(updateOpts, params = {}) {\n    const {\n      props,\n      oldProps,\n      changeFlags\n    } = updateOpts;\n    const {\n      compareAll = false,\n      dimension\n    } = params;\n    const {\n      ignoreProps\n    } = this.state;\n    const {\n      props: dataProps,\n      accessors = []\n    } = dimension;\n    const {\n      updateTriggersChanged\n    } = changeFlags;\n\n    if (changeFlags.dataChanged) {\n      return true;\n    }\n\n    if (updateTriggersChanged) {\n      if (updateTriggersChanged.all) {\n        return true;\n      }\n\n      for (const accessor of accessors) {\n        if (updateTriggersChanged[accessor]) {\n          return true;\n        }\n      }\n    }\n\n    if (compareAll) {\n      if (changeFlags.extensionsChanged) {\n        return true;\n      }\n\n      return compareProps({\n        oldProps,\n        newProps: props,\n        ignoreProps,\n        propTypes: this.constructor._propTypes\n      });\n    }\n\n    for (const name of dataProps) {\n      if (props[name] !== oldProps[name]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  isAttributeChanged(name) {\n    const {\n      changedAttributes\n    } = this.state;\n\n    if (!name) {\n      return !isObjectEmpty(changedAttributes);\n    }\n\n    return changedAttributes && changedAttributes[name] !== undefined;\n  }\n\n  _getAttributeManager() {\n    return new AttributeManager(this.context.gl, {\n      id: this.props.id,\n      stats: this.context.stats\n    });\n  }\n\n}\n\nfunction isObjectEmpty(obj) {\n  let isEmpty = true;\n\n  for (const key in obj) {\n    isEmpty = false;\n    break;\n  }\n\n  return isEmpty;\n}\n\nAggregationLayer.layerName = 'AggregationLayer';\n//# sourceMappingURL=aggregation-layer.js.map","import { log } from '@deck.gl/core';\nimport { ColumnLayer } from '@deck.gl/layers';\nimport { defaultColorRange } from '../utils/color-utils';\nimport { pointToHexbin } from './hexagon-aggregator';\nimport CPUAggregator from '../utils/cpu-aggregator';\nimport AggregationLayer from '../aggregation-layer';\n\nfunction nop() {}\n\nconst defaultProps = {\n  colorDomain: null,\n  colorRange: defaultColorRange,\n  getColorValue: {\n    type: 'accessor',\n    value: null\n  },\n  getColorWeight: {\n    type: 'accessor',\n    value: 1\n  },\n  colorAggregation: 'SUM',\n  lowerPercentile: {\n    type: 'number',\n    value: 0,\n    min: 0,\n    max: 100\n  },\n  upperPercentile: {\n    type: 'number',\n    value: 100,\n    min: 0,\n    max: 100\n  },\n  colorScaleType: 'quantize',\n  onSetColorDomain: nop,\n  elevationDomain: null,\n  elevationRange: [0, 1000],\n  getElevationValue: {\n    type: 'accessor',\n    value: null\n  },\n  getElevationWeight: {\n    type: 'accessor',\n    value: 1\n  },\n  elevationAggregation: 'SUM',\n  elevationLowerPercentile: {\n    type: 'number',\n    value: 0,\n    min: 0,\n    max: 100\n  },\n  elevationUpperPercentile: {\n    type: 'number',\n    value: 100,\n    min: 0,\n    max: 100\n  },\n  elevationScale: {\n    type: 'number',\n    min: 0,\n    value: 1\n  },\n  elevationScaleType: 'linear',\n  onSetElevationDomain: nop,\n  radius: {\n    type: 'number',\n    value: 1000,\n    min: 1\n  },\n  coverage: {\n    type: 'number',\n    min: 0,\n    max: 1,\n    value: 1\n  },\n  extruded: false,\n  hexagonAggregator: pointToHexbin,\n  getPosition: {\n    type: 'accessor',\n    value: x => x.position\n  },\n  material: true,\n  _filterData: {\n    type: 'function',\n    value: null,\n    optional: true\n  }\n};\nexport default class HexagonLayer extends AggregationLayer {\n  initializeState() {\n    const cpuAggregator = new CPUAggregator({\n      getAggregator: props => props.hexagonAggregator,\n      getCellSize: props => props.radius\n    });\n    this.state = {\n      cpuAggregator,\n      aggregatorState: cpuAggregator.state,\n      vertices: null\n    };\n    const attributeManager = this.getAttributeManager();\n    attributeManager.add({\n      positions: {\n        size: 3,\n        accessor: 'getPosition'\n      }\n    });\n  }\n\n  updateState(opts) {\n    super.updateState(opts);\n\n    if (opts.changeFlags.propsOrDataChanged) {\n      const aggregatorState = this.state.cpuAggregator.updateState(opts, {\n        viewport: this.context.viewport,\n        attributes: this.getAttributes()\n      });\n\n      if (this.state.aggregatorState.layerData !== aggregatorState.layerData) {\n        const {\n          hexagonVertices\n        } = aggregatorState.layerData || {};\n        this.setState({\n          vertices: hexagonVertices && this.convertLatLngToMeterOffset(hexagonVertices)\n        });\n      }\n\n      this.setState({\n        aggregatorState\n      });\n    }\n  }\n\n  convertLatLngToMeterOffset(hexagonVertices) {\n    const {\n      viewport\n    } = this.context;\n\n    if (Array.isArray(hexagonVertices) && hexagonVertices.length === 6) {\n      const vertex0 = hexagonVertices[0];\n      const vertex3 = hexagonVertices[3];\n      const centroid = [(vertex0[0] + vertex3[0]) / 2, (vertex0[1] + vertex3[1]) / 2];\n      const centroidFlat = viewport.projectFlat(centroid);\n      const {\n        metersPerUnit\n      } = viewport.getDistanceScales(centroid);\n      const vertices = hexagonVertices.map(vt => {\n        const vtFlat = viewport.projectFlat(vt);\n        return [(vtFlat[0] - centroidFlat[0]) * metersPerUnit[0], (vtFlat[1] - centroidFlat[1]) * metersPerUnit[1]];\n      });\n      return vertices;\n    }\n\n    log.error('HexagonLayer: hexagonVertices needs to be an array of 6 points')();\n    return null;\n  }\n\n  getPickingInfo({\n    info\n  }) {\n    return this.state.cpuAggregator.getPickingInfo({\n      info\n    });\n  }\n\n  _onGetSublayerColor(cell) {\n    return this.state.cpuAggregator.getAccessor('fillColor')(cell);\n  }\n\n  _onGetSublayerElevation(cell) {\n    return this.state.cpuAggregator.getAccessor('elevation')(cell);\n  }\n\n  _getSublayerUpdateTriggers() {\n    return this.state.cpuAggregator.getUpdateTriggers(this.props);\n  }\n\n  renderLayers() {\n    const {\n      elevationScale,\n      extruded,\n      coverage,\n      material,\n      transitions\n    } = this.props;\n    const {\n      aggregatorState,\n      vertices\n    } = this.state;\n    const SubLayerClass = this.getSubLayerClass('hexagon-cell', ColumnLayer);\n\n    const updateTriggers = this._getSublayerUpdateTriggers();\n\n    const geometry = vertices ? {\n      vertices,\n      radius: 1\n    } : {\n      radius: aggregatorState.layerData.radiusCommon || 1,\n      radiusUnits: 'common',\n      angle: 90\n    };\n    return new SubLayerClass({ ...geometry,\n      diskResolution: 6,\n      elevationScale,\n      extruded,\n      coverage,\n      material,\n      getFillColor: this._onGetSublayerColor.bind(this),\n      getElevation: this._onGetSublayerElevation.bind(this),\n      transitions: transitions && {\n        getFillColor: transitions.getColorValue || transitions.getColorWeight,\n        getElevation: transitions.getElevationValue || transitions.getElevationWeight\n      }\n    }, this.getSubLayerProps({\n      id: 'hexagon-cell',\n      updateTriggers\n    }), {\n      data: aggregatorState.layerData.data\n    });\n  }\n\n}\nHexagonLayer.layerName = 'HexagonLayer';\nHexagonLayer.defaultProps = defaultProps;\n//# sourceMappingURL=hexagon-layer.js.map","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import {basis} from \"./basis.js\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolate} from \"d3-interpolate\";\nimport {pointer, select} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\nvar MODE_DRAG = {name: \"drag\"},\n    MODE_SPACE = {name: \"space\"},\n    MODE_HANDLE = {name: \"handle\"},\n    MODE_CENTER = {name: \"center\"};\n\nconst {abs, max, min} = Math;\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\n};\n\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\n};\n\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function(xy) { return xy == null ? null : number2(xy); },\n  output: function(xy) { return xy; }\n};\n\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\n\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\n\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\n\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\n\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {type: t};\n}\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\n// Like d3.local, but with the name __brush rather than auto-generated.\nfunction local(node) {\n  while (!node.__brush) if (!(node = node.parentNode)) return;\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0]\n      || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\n\nexport function brushX() {\n  return brush(X);\n}\n\nexport function brushY() {\n  return brush(Y);\n}\n\nexport default function() {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group\n        .property(\"__brush\", initialize)\n      .selectAll(\".overlay\")\n      .data([type(\"overlay\")]);\n\n    overlay.enter().append(\"rect\")\n        .attr(\"class\", \"overlay\")\n        .attr(\"pointer-events\", \"all\")\n        .attr(\"cursor\", cursors.overlay)\n      .merge(overlay)\n        .each(function() {\n          var extent = local(this).extent;\n          select(this)\n              .attr(\"x\", extent[0][0])\n              .attr(\"y\", extent[0][1])\n              .attr(\"width\", extent[1][0] - extent[0][0])\n              .attr(\"height\", extent[1][1] - extent[0][1]);\n        });\n\n    group.selectAll(\".selection\")\n      .data([type(\"selection\")])\n      .enter().append(\"rect\")\n        .attr(\"class\", \"selection\")\n        .attr(\"cursor\", cursors.selection)\n        .attr(\"fill\", \"#777\")\n        .attr(\"fill-opacity\", 0.3)\n        .attr(\"stroke\", \"#fff\")\n        .attr(\"shape-rendering\", \"crispEdges\");\n\n    var handle = group.selectAll(\".handle\")\n      .data(dim.handles, function(d) { return d.type; });\n\n    handle.exit().remove();\n\n    handle.enter().append(\"rect\")\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\n\n    group\n        .each(redraw)\n        .attr(\"fill\", \"none\")\n        .attr(\"pointer-events\", \"all\")\n        .on(\"mousedown.brush\", started)\n      .filter(touchable)\n        .on(\"touchstart.brush\", started)\n        .on(\"touchmove.brush\", touchmoved)\n        .on(\"touchend.brush touchcancel.brush\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function(group, selection, event) {\n    if (group.tween) {\n      group\n          .on(\"start.brush\", function(event) { emitter(this, arguments).beforestart().start(event); })\n          .on(\"interrupt.brush end.brush\", function(event) { emitter(this, arguments).end(event); })\n          .tween(\"brush\", function() {\n            var that = this,\n                state = that.__brush,\n                emit = emitter(that, arguments),\n                selection0 = state.selection,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n                i = interpolate(selection0, selection1);\n\n            function tween(t) {\n              state.selection = t === 1 && selection1 === null ? null : i(t);\n              redraw.call(that);\n              emit.brush();\n            }\n\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\n          });\n    } else {\n      group\n          .each(function() {\n            var that = this,\n                args = arguments,\n                state = that.__brush,\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n                emit = emitter(that, args).beforestart();\n\n            interrupt(that);\n            state.selection = selection1 === null ? null : selection1;\n            redraw.call(that);\n            emit.start(event).brush(event).end(event);\n          });\n    }\n  };\n\n  brush.clear = function(group, event) {\n    brush.move(group, null, event);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\")\n          .style(\"display\", null)\n          .attr(\"x\", selection[0][0])\n          .attr(\"y\", selection[0][1])\n          .attr(\"width\", selection[1][0] - selection[0][0])\n          .attr(\"height\", selection[1][1] - selection[0][1]);\n\n      group.selectAll(\".handle\")\n          .style(\"display\", null)\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\n    }\n\n    else {\n      group.selectAll(\".selection,.handle\")\n          .style(\"display\", \"none\")\n          .attr(\"x\", null)\n          .attr(\"y\", null)\n          .attr(\"width\", null)\n          .attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    var emit = that.__brush.emitter;\n    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);\n  }\n\n  function Emitter(that, args, clean) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n    this.clean = clean;\n  }\n\n  Emitter.prototype = {\n    beforestart: function() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function(event, mode) {\n      if (this.starting) this.starting = false, this.emit(\"start\", event, mode);\n      else this.emit(\"brush\", event);\n      return this;\n    },\n    brush: function(event, mode) {\n      this.emit(\"brush\", event, mode);\n      return this;\n    },\n    end: function(event, mode) {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\", event, mode);\n      return this;\n    },\n    emit: function(type, event, mode) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new BrushEvent(type, {\n          sourceEvent: event,\n          target: brush,\n          selection: dim.output(this.state.selection),\n          mode,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function started(event) {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0], w0, w1,\n        N = extent[0][1], n0, n1,\n        E = extent[1][0], e0, e1,\n        S = extent[1][1], s0, s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        points = Array.from(event.touches || [event], t => {\n          const i = t.identifier;\n          t = pointer(t, that);\n          t.point0 = t.slice();\n          t.identifier = i;\n          return t;\n        });\n\n    interrupt(that);\n    var emit = emitter(that, arguments, true).beforestart();\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      const pts = [points[0], points[1] || points[0]];\n      state.selection = selection = [[\n          w0 = dim === Y ? W : min(pts[0][0], pts[1][0]),\n          n0 = dim === X ? N : min(pts[0][1], pts[1][1])\n        ], [\n          e0 = dim === Y ? E : max(pts[0][0], pts[1][0]),\n          s0 = dim === X ? S : max(pts[0][1], pts[1][1])\n        ]];\n      if (points.length > 1) move(event);\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n\n    var group = select(that)\n        .attr(\"pointer-events\", \"none\");\n\n    var overlay = group.selectAll(\".overlay\")\n        .attr(\"cursor\", cursors[type]);\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view)\n          .on(\"mousemove.brush\", moved, true)\n          .on(\"mouseup.brush\", ended, true);\n      if (keys) view\n          .on(\"keydown.brush\", keydowned, true)\n          .on(\"keyup.brush\", keyupped, true)\n\n      dragDisable(event.view);\n    }\n\n    redraw.call(that);\n    emit.start(event, mode.name);\n\n    function moved(event) {\n      for (const p of event.changedTouches || [event]) {\n        for (const d of points)\n          if (d.identifier === p.identifier) d.cur = pointer(p, that);\n      }\n      if (shifting && !lockX && !lockY && points.length === 1) {\n        const point = points[0];\n        if (abs(point.cur[0] - point[0]) > abs(point.cur[1] - point[1]))\n          lockY = true;\n        else\n          lockX = true;\n      }\n      for (const point of points)\n        if (point.cur) point[0] = point.cur[0], point[1] = point.cur[1];\n      moving = true;\n      noevent(event);\n      move(event);\n    }\n\n    function move(event) {\n      const point = points[0], point0 = point.point0;\n      var t;\n\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG: {\n          if (signX) dx = max(W - w0, min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n          if (signY) dy = max(N - n0, min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n          break;\n        }\n        case MODE_HANDLE: {\n          if (points[1]) {\n            if (signX) w1 = max(W, min(E, points[0][0])), e1 = max(W, min(E, points[1][0])), signX = 1;\n            if (signY) n1 = max(N, min(S, points[0][1])), s1 = max(N, min(S, points[1][1])), signY = 1;\n          } else {\n            if (signX < 0) dx = max(W - w0, min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\n            else if (signX > 0) dx = max(W - e0, min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n            if (signY < 0) dy = max(N - n0, min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\n            else if (signY > 0) dy = max(N - s0, min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n          }\n          break;\n        }\n        case MODE_CENTER: {\n          if (signX) w1 = max(W, min(E, w0 - dx * signX)), e1 = max(W, min(E, e0 + dx * signX));\n          if (signY) n1 = max(N, min(S, n0 - dy * signY)), s1 = max(N, min(S, s0 + dy * signY));\n          break;\n        }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1\n          || selection[0][1] !== n1\n          || selection[1][0] !== e1\n          || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush(event, mode.name);\n      }\n    }\n\n    function ended(event) {\n      nopropagation(event);\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end(event, mode.name);\n    }\n\n    function keydowned(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          shifting = signX && signY;\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_HANDLE) {\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n            mode = MODE_CENTER;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE; takes priority over ALT\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\n            mode = MODE_SPACE;\n            overlay.attr(\"cursor\", cursors.selection);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n\n    function keyupped(event) {\n      switch (event.keyCode) {\n        case 16: { // SHIFT\n          if (shifting) {\n            lockX = lockY = shifting = false;\n            move(event);\n          }\n          break;\n        }\n        case 18: { // ALT\n          if (mode === MODE_CENTER) {\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n            mode = MODE_HANDLE;\n            move(event);\n          }\n          break;\n        }\n        case 32: { // SPACE\n          if (mode === MODE_SPACE) {\n            if (event.altKey) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n            } else {\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n            }\n            overlay.attr(\"cursor\", cursors[type]);\n            move(event);\n          }\n          break;\n        }\n        default: return;\n      }\n      noevent(event);\n    }\n  }\n\n  function touchmoved(event) {\n    emitter(this, arguments).moved(event);\n  }\n\n  function touchended(event) {\n    emitter(this, arguments).ended(event);\n  }\n\n  function initialize() {\n    var state = this.__brush || {selection: null};\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function(_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function(_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}\n","var EOL = {},\n    EOF = {},\n    QUOTE = 34,\n    NEWLINE = 10,\n    RETURN = 13;\n\nfunction objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function(name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"] || \\\"\\\"\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function(row, i) {\n    return f(object(row), i, columns);\n  };\n}\n\n// Compute unique columns in order of discovery.\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n\n  rows.forEach(function(row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n\n  return columns;\n}\n\nfunction pad(value, width) {\n  var s = value + \"\", length = s.length;\n  return length < width ? new Array(width - length + 1).join(0) + s : s;\n}\n\nfunction formatYear(year) {\n  return year < 0 ? \"-\" + pad(-year, 6)\n    : year > 9999 ? \"+\" + pad(year, 6)\n    : pad(year, 4);\n}\n\nfunction formatDate(date) {\n  var hours = date.getUTCHours(),\n      minutes = date.getUTCMinutes(),\n      seconds = date.getUTCSeconds(),\n      milliseconds = date.getUTCMilliseconds();\n  return isNaN(date) ? \"Invalid Date\"\n      : formatYear(date.getUTCFullYear(), 4) + \"-\" + pad(date.getUTCMonth() + 1, 2) + \"-\" + pad(date.getUTCDate(), 2)\n      + (milliseconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \".\" + pad(milliseconds, 3) + \"Z\"\n      : seconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \"Z\"\n      : minutes || hours ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \"Z\"\n      : \"\");\n}\n\nexport default function(delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n\\r]\"),\n      DELIMITER = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert, columns, rows = parseRows(text, function(row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns || [];\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // current line number\n        t, // current token\n        eof = N <= 0, // current token followed by EOF?\n        eol = false; // current token followed by EOL?\n\n    // Strip the trailing newline.\n    if (text.charCodeAt(N - 1) === NEWLINE) --N;\n    if (text.charCodeAt(N - 1) === RETURN) --N;\n\n    function token() {\n      if (eof) return EOF;\n      if (eol) return eol = false, EOL;\n\n      // Unescape quotes.\n      var i, j = I, c;\n      if (text.charCodeAt(j) === QUOTE) {\n        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE);\n        if ((i = I) >= N) eof = true;\n        else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        return text.slice(j + 1, i - 1).replace(/\"\"/g, \"\\\"\");\n      }\n\n      // Find next delimiter or newline.\n      while (I < N) {\n        if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        else if (c !== DELIMITER) continue;\n        return text.slice(j, i);\n      }\n\n      // Return last token before EOF.\n      return eof = true, text.slice(j, N);\n    }\n\n    while ((t = token()) !== EOF) {\n      var row = [];\n      while (t !== EOL && t !== EOF) row.push(t), t = token();\n      if (f && (row = f(row, n++)) == null) continue;\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  function preformatBody(rows, columns) {\n    return rows.map(function(row) {\n      return columns.map(function(column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    });\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(preformatBody(rows, columns)).join(\"\\n\");\n  }\n\n  function formatBody(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return preformatBody(rows, columns).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(value) {\n    return value == null ? \"\"\n        : value instanceof Date ? formatDate(value)\n        : reFormat.test(value += \"\") ? \"\\\"\" + value.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\"\n        : value;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatBody: formatBody,\n    formatRows: formatRows,\n    formatRow: formatRow,\n    formatValue: formatValue\n  };\n}\n","import dsv from \"./dsv.js\";\n\nvar csv = dsv(\",\");\n\nexport var csvParse = csv.parse;\nexport var csvParseRows = csv.parseRows;\nexport var csvFormat = csv.format;\nexport var csvFormatBody = csv.formatBody;\nexport var csvFormatRows = csv.formatRows;\nexport var csvFormatRow = csv.formatRow;\nexport var csvFormatValue = csv.formatValue;\n","import dsv from \"./dsv.js\";\n\nvar tsv = dsv(\"\\t\");\n\nexport var tsvParse = tsv.parse;\nexport var tsvParseRows = tsv.parseRows;\nexport var tsvFormat = tsv.format;\nexport var tsvFormatBody = tsv.formatBody;\nexport var tsvFormatRows = tsv.formatRows;\nexport var tsvFormatRow = tsv.formatRow;\nexport var tsvFormatValue = tsv.formatValue;\n","function responseText(response) {\n  if (!response.ok) throw new Error(response.status + \" \" + response.statusText);\n  return response.text();\n}\n\nexport default function(input, init) {\n  return fetch(input, init).then(responseText);\n}\n","import {csvParse, dsvFormat, tsvParse} from \"d3-dsv\";\nimport text from \"./text.js\";\n\nfunction dsvParse(parse) {\n  return function(input, init, row) {\n    if (arguments.length === 2 && typeof init === \"function\") row = init, init = undefined;\n    return text(input, init).then(function(response) {\n      return parse(response, row);\n    });\n  };\n}\n\nexport default function dsv(delimiter, input, init, row) {\n  if (arguments.length === 3 && typeof init === \"function\") row = init, init = undefined;\n  var format = dsvFormat(delimiter);\n  return text(input, init).then(function(response) {\n    return format.parse(response, row);\n  });\n}\n\nexport var csv = dsvParse(csvParse);\nexport var tsv = dsvParse(tsvParse);\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event wont trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","import { render } from \"./4-Hexagons.vue?vue&type=template&id=09cbada8&scoped=true\"\nimport script from \"./4-Hexagons.vue?vue&type=script&lang=js\"\nexport * from \"./4-Hexagons.vue?vue&type=script&lang=js\"\n\nimport \"./4-Hexagons.vue?vue&type=style&index=0&id=09cbada8&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/kellymarshall/Sites/30-day-map-challenge/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-09cbada8\"]])\n\nexport default __exports__","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isElectron;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nfunction isElectron(mockUserAgent) {\n  if (typeof window !== 'undefined' && (0, _typeof2.default)(window.process) === 'object' && window.process.type === 'renderer') {\n    return true;\n  }\n\n  if (typeof process !== 'undefined' && (0, _typeof2.default)(process.versions) === 'object' && Boolean(process.versions.electron)) {\n    return true;\n  }\n\n  var realUserAgent = (typeof navigator === \"undefined\" ? \"undefined\" : (0, _typeof2.default)(navigator)) === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent;\n  var userAgent = mockUserAgent || realUserAgent;\n\n  if (userAgent && userAgent.indexOf('Electron') >= 0) {\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=is-electron.js.map","export function isObjectEmpty(object) {\n  for (const key in object) {\n    return false;\n  }\n\n  return true;\n}\nexport function deepArrayEqual(x, y) {\n  if (x === y) {\n    return true;\n  }\n\n  const isArrayX = Array.isArray(x) || ArrayBuffer.isView(x);\n  const isArrayY = Array.isArray(y) || ArrayBuffer.isView(y);\n\n  if (isArrayX && isArrayY && x.length === y.length) {\n    for (let i = 0; i < x.length; ++i) {\n      if (x[i] !== y[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n}\n//# sourceMappingURL=utils.js.map","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","// `Symbol.prototype.description` getter\n// https://tc39.es/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar defineProperty = require('../internals/object-define-property').f;\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\n\nif (DESCRIPTORS && isCallable(NativeSymbol) && (!('description' in NativeSymbol.prototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var result = this instanceof SymbolWrapper\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  var symbolPrototype = SymbolWrapper.prototype = NativeSymbol.prototype;\n  symbolPrototype.constructor = SymbolWrapper;\n\n  var symbolToString = symbolPrototype.toString;\n  var nativeSymbol = String(NativeSymbol('test')) == 'Symbol(test)';\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  defineProperty(symbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = isObject(this) ? this.valueOf() : this;\n      var string = symbolToString.call(symbol);\n      if (hasOwn(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = nativeSymbol ? string.slice(7, -1) : string.replace(regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n","function _extendableBuiltin(cls) {\n  function ExtendableBuiltin() {\n    var instance = Reflect.construct(cls, Array.from(arguments));\n    Object.setPrototypeOf(instance, Object.getPrototypeOf(this));\n    return instance;\n  }\n\n  ExtendableBuiltin.prototype = Object.create(cls.prototype, {\n    constructor: {\n      value: cls,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(ExtendableBuiltin, cls);\n  } else {\n    ExtendableBuiltin.__proto__ = cls;\n  }\n\n  return ExtendableBuiltin;\n}\n\nimport { config, formatValue, equals, isArray } from '../../lib/common';\nimport assert from '../../lib/assert';\nexport default class MathArray extends _extendableBuiltin(Array) {\n  get ELEMENTS() {\n    assert(false);\n    return 0;\n  }\n\n  clone() {\n    return new this.constructor().copy(this);\n  }\n\n  from(arrayOrObject) {\n    return Array.isArray(arrayOrObject) ? this.copy(arrayOrObject) : this.fromObject(arrayOrObject);\n  }\n\n  fromArray(array, offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = array[i + offset];\n    }\n\n    return this.check();\n  }\n\n  to(arrayOrObject) {\n    if (arrayOrObject === this) {\n      return this;\n    }\n\n    return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n  }\n\n  toTarget(target) {\n    return target ? this.to(target) : this;\n  }\n\n  toArray(array = [], offset = 0) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      array[offset + i] = this[i];\n    }\n\n    return array;\n  }\n\n  toFloat32Array() {\n    return new Float32Array(this);\n  }\n\n  toString() {\n    return this.formatString(config);\n  }\n\n  formatString(opts) {\n    let string = '';\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n    }\n\n    return \"\".concat(opts.printTypes ? this.constructor.name : '', \"[\").concat(string, \"]\");\n  }\n\n  equals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (!equals(this[i], array[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  exactEquals(array) {\n    if (!array || this.length !== array.length) {\n      return false;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      if (this[i] !== array[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  negate() {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = -this[i];\n    }\n\n    return this.check();\n  }\n\n  lerp(a, b, t) {\n    if (t === undefined) {\n      t = b;\n      b = a;\n      a = this;\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      const ai = a[i];\n      this[i] = ai + t * (b[i] - ai);\n    }\n\n    return this.check();\n  }\n\n  min(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(vector[i], this[i]);\n    }\n\n    return this.check();\n  }\n\n  max(vector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.max(vector[i], this[i]);\n    }\n\n    return this.check();\n  }\n\n  clamp(minVector, maxVector) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n    }\n\n    return this.check();\n  }\n\n  add(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] += vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  subtract(...vectors) {\n    for (const vector of vectors) {\n      for (let i = 0; i < this.ELEMENTS; ++i) {\n        this[i] -= vector[i];\n      }\n    }\n\n    return this.check();\n  }\n\n  scale(scale) {\n    if (Array.isArray(scale)) {\n      return this.multiply(scale);\n    }\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scale;\n    }\n\n    return this.check();\n  }\n\n  sub(a) {\n    return this.subtract(a);\n  }\n\n  setScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = a;\n    }\n\n    return this.check();\n  }\n\n  addScalar(a) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] += a;\n    }\n\n    return this.check();\n  }\n\n  subScalar(a) {\n    return this.addScalar(-a);\n  }\n\n  multiplyScalar(scalar) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] *= scalar;\n    }\n\n    return this.check();\n  }\n\n  divideScalar(a) {\n    return this.scale(1 / a);\n  }\n\n  clampScalar(min, max) {\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      this[i] = Math.min(Math.max(this[i], min), max);\n    }\n\n    return this.check();\n  }\n\n  multiplyByScalar(scalar) {\n    return this.scale(scalar);\n  }\n\n  get elements() {\n    return this;\n  }\n\n  check() {\n    if (config.debug && !this.validate()) {\n      throw new Error(\"math.gl: \".concat(this.constructor.name, \" some fields set to invalid numbers'\"));\n    }\n\n    return this;\n  }\n\n  validate() {\n    let valid = this.length === this.ELEMENTS;\n\n    for (let i = 0; i < this.ELEMENTS; ++i) {\n      valid = valid && Number.isFinite(this[i]);\n    }\n\n    return valid;\n  }\n\n}\n//# sourceMappingURL=math-array.js.map","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nexports.f = wellKnownSymbol;\n","import isElectron from './is-electron';\nexport default function isBrowser() {\n  const isNode = typeof process === 'object' && String(process) === '[object process]' && !process.browser;\n  return !isNode || isElectron();\n}\nexport function isBrowserMainThread() {\n  return isBrowser() && typeof document !== 'undefined';\n}\n//# sourceMappingURL=is-browser.js.map","import { GL_PARAMETER_DEFAULTS, GL_HOOKED_SETTERS } from './webgl-parameter-tables';\nimport { setParameters, getParameters } from './unified-parameter-api';\nimport { assert } from '../utils/assert';\nimport { deepArrayEqual } from '../utils/utils';\n\nfunction installGetterOverride(gl, functionName) {\n  const originalGetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function get(...params) {\n    const pname = params[0];\n\n    if (!(pname in gl.state.cache)) {\n      return originalGetterFunc(...params);\n    }\n\n    return gl.state.enable ? gl.state.cache[pname] : originalGetterFunc(...params);\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: `${functionName}-from-cache`,\n    configurable: false\n  });\n}\n\nfunction installSetterSpy(gl, functionName, setter) {\n  const originalSetterFunc = gl[functionName].bind(gl);\n\n  gl[functionName] = function set(...params) {\n    const {\n      valueChanged,\n      oldValue\n    } = setter(gl.state._updateCache, ...params);\n\n    if (valueChanged) {\n      originalSetterFunc(...params);\n    }\n\n    return oldValue;\n  };\n\n  Object.defineProperty(gl[functionName], 'name', {\n    value: `${functionName}-to-cache`,\n    configurable: false\n  });\n}\n\nfunction installProgramSpy(gl) {\n  const originalUseProgram = gl.useProgram.bind(gl);\n\n  gl.useProgram = function useProgramLuma(handle) {\n    if (gl.state.program !== handle) {\n      originalUseProgram(handle);\n      gl.state.program = handle;\n    }\n  };\n}\n\nclass GLState {\n  constructor(gl, {\n    copyState = false,\n    log = () => {}\n  } = {}) {\n    this.gl = gl;\n    this.program = null;\n    this.stateStack = [];\n    this.enable = true;\n    this.cache = copyState ? getParameters(gl) : Object.assign({}, GL_PARAMETER_DEFAULTS);\n    this.log = log;\n    this._updateCache = this._updateCache.bind(this);\n    Object.seal(this);\n  }\n\n  push(values = {}) {\n    this.stateStack.push({});\n  }\n\n  pop() {\n    assert(this.stateStack.length > 0);\n    const oldValues = this.stateStack[this.stateStack.length - 1];\n    setParameters(this.gl, oldValues);\n    this.stateStack.pop();\n  }\n\n  _updateCache(values) {\n    let valueChanged = false;\n    let oldValue;\n    const oldValues = this.stateStack.length > 0 && this.stateStack[this.stateStack.length - 1];\n\n    for (const key in values) {\n      assert(key !== undefined);\n      const value = values[key];\n      const cached = this.cache[key];\n\n      if (!deepArrayEqual(value, cached)) {\n        valueChanged = true;\n        oldValue = cached;\n\n        if (oldValues && !(key in oldValues)) {\n          oldValues[key] = cached;\n        }\n\n        this.cache[key] = value;\n      }\n    }\n\n    return {\n      valueChanged,\n      oldValue\n    };\n  }\n\n}\n\nexport function trackContextState(gl, options = {}) {\n  const {\n    enable = true,\n    copyState\n  } = options;\n  assert(copyState !== undefined);\n\n  if (!gl.state) {\n    const global_ = typeof global !== 'undefined' ? global : window;\n    const {\n      polyfillContext\n    } = global_;\n\n    if (polyfillContext) {\n      polyfillContext(gl);\n    }\n\n    gl.state = new GLState(gl, {\n      copyState\n    });\n    installProgramSpy(gl);\n\n    for (const key in GL_HOOKED_SETTERS) {\n      const setter = GL_HOOKED_SETTERS[key];\n      installSetterSpy(gl, key, setter);\n    }\n\n    installGetterOverride(gl, 'getParameter');\n    installGetterOverride(gl, 'isEnabled');\n  }\n\n  gl.state.enable = enable;\n  return gl;\n}\nexport function pushContextState(gl) {\n  if (!gl.state) {\n    trackContextState(gl, {\n      copyState: false\n    });\n  }\n\n  gl.state.push();\n}\nexport function popContextState(gl) {\n  assert(gl.state);\n  gl.state.pop();\n}\n//# sourceMappingURL=track-context-state.js.map","const globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport const isBrowser = typeof process !== 'object' || String(process) !== '[object process]' || process.browser;\nexport const isWorker = typeof importScripts === 'function';\nexport const isMobile = typeof window !== 'undefined' && typeof window.orientation !== 'undefined';\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\nexport const nodeVersion = matches && parseFloat(matches[1]) || 0;\n//# sourceMappingURL=globals.js.map","import { config } from './common';\nexport function validateVector(v, length) {\n  if (v.length !== length) {\n    return false;\n  }\n\n  for (let i = 0; i < v.length; ++i) {\n    if (!Number.isFinite(v[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function checkNumber(value) {\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Invalid number \".concat(value));\n  }\n\n  return value;\n}\nexport function checkVector(v, length, callerName = '') {\n  if (config.debug && !validateVector(v, length)) {\n    throw new Error(\"math.gl: \".concat(callerName, \" some fields set to invalid numbers'\"));\n  }\n\n  return v;\n}\nconst map = {};\nexport function deprecated(method, version) {\n  if (!map[method]) {\n    map[method] = true;\n    console.warn(\"\".concat(method, \" has been removed in version \").concat(version, \", see upgrade guide for more information\"));\n  }\n}\n//# sourceMappingURL=validators.js.map"],"sourceRoot":""}