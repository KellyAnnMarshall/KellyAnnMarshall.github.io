{"version":3,"sources":["webpack:///./src/views/5-OpenStreetMap.vue","webpack:///./src/views/5-OpenStreetMap.vue?1149","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./src/views/5-OpenStreetMap.vue?9f24"],"names":["class","for","ref","type","name","placeholder","searchTerm","showResultsList","searchResults","result","key","id","navigateTo","place_name","data","accessToken","map","watch","this","searchPlace","methods","initMap","Map","container","$refs","style","center","zoom","pitch","antialias","on","layers","getStyle","labelLayerId","find","layer","layout","addLayer","source","filter","minzoom","paint","nav","NavigationControl","addControl","scrollZoom","disable","geometry","coordinates","flyTo","essential","fitBounds","bbox","length","a","get","then","response","features","mounted","__exports__","render","$","$find","addToUnscopables","FIND","SKIPS_HOLES","Array","target","proto","forced","callbackfn","arguments","undefined"],"mappings":"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","file":"js/open-street-map.9649b2ae.js","sourcesContent":["<template>\n  <div class=\"position-relative h-100 w-100\">\n    <div class=\"map-header position-absolute text-light\">\n      <h2 class=\"h3 m-0\">\n        <span>Day 05 - </span>Data challenge 1: OpenStreetMap\n      </h2>\n    </div>\n    <div class=\"position-absolute gazetteer\">\n      <label for=\"search\" class=\"form-label visually-hidden\">Search:</label>\n      <input\n        class=\"form-control\"\n        type=\"search\"\n        name=\"search\"\n        placeholder=\"Search for a tall building or placename\"\n        v-model=\"searchTerm\"\n      />\n      <ul class=\"list-unstyled bg-secondary\" v-if=\"showResultsList\">\n        <li v-for=\"result in searchResults\" :key=\"result.id\">\n          <button\n            type=\"button\"\n            class=\"btn btn-dark w-100 text-left\"\n            @click=\"navigateTo(result)\"\n          >\n            {{ result.place_name }}\n          </button>\n        </li>\n      </ul>\n    </div>\n\n    <div ref=\"map-root\" class=\"basemap\"></div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport mapboxgl from \"mapbox-gl\";\nimport \"mapbox-gl/src/css/mapbox-gl.css\";\n\nexport default {\n  data() {\n    return {\n      accessToken:\n        \"pk.eyJ1Ijoia21hcnNoYWxsIiwiYSI6ImNrdXdudGlpODI2ejkydXF2bXcyM3poaWQifQ.hyBCr6uwWlDGMGyVmuKCIw\",\n      map: null,\n      searchTerm: null,\n      searchResults: null,\n      showResultsList: false,\n    };\n  },\n  watch: {\n    searchTerm() {\n      this.searchPlace();\n    },\n  },\n  methods: {\n    initMap() {\n      mapboxgl.accessToken = this.accessToken;\n\n      this.map = new mapboxgl.Map({\n        container: this.$refs[\"map-root\"],\n        style: \"mapbox://styles/mapbox/light-v10\",\n        center: [-74.0133807, 40.702786],\n        zoom: 15.5,\n        pitch: 45,\n        antialias: true,\n      });\n\n      this.map.on(\"load\", () => {\n        // Insert the layer beneath any symbol layer.\n        const layers = this.map.getStyle().layers;\n        const labelLayerId = layers.find(\n          (layer) => layer.type === \"symbol\" && layer.layout[\"text-field\"]\n        ).id;\n\n        // The 'building' layer in the Mapbox Streets\n        // vector tileset contains building height data\n        // from OpenStreetMap.\n        this.map.addLayer(\n          {\n            id: \"add-3d-buildings\",\n            source: \"composite\",\n            \"source-layer\": \"building\",\n            filter: [\"==\", \"extrude\", \"true\"],\n            type: \"fill-extrusion\",\n            minzoom: 15,\n            paint: {\n              \"fill-extrusion-color\": \"#aaa\",\n\n              // Use an 'interpolate' expression to\n              // add a smooth transition effect to\n              // the buildings as the user zooms in.\n              \"fill-extrusion-height\": [\n                \"interpolate\",\n                [\"linear\"],\n                [\"zoom\"],\n                15,\n                0,\n                15.05,\n                [\"get\", \"height\"],\n              ],\n              \"fill-extrusion-base\": [\n                \"interpolate\",\n                [\"linear\"],\n                [\"zoom\"],\n                15,\n                0,\n                15.05,\n                [\"get\", \"min_height\"],\n              ],\n              \"fill-extrusion-opacity\": 0.6,\n            },\n          },\n          labelLayerId\n        );\n      });\n\n      const nav = new mapboxgl.NavigationControl();\n      this.map.addControl(nav, \"top-right\");\n      this.map.scrollZoom.disable();\n    },\n    navigateTo(result) {\n      if (result.geometry.coordinates) {\n        this.map.flyTo({\n          center: result.geometry.coordinates,\n          zoom: 16,\n          essential: true, // this animation is considered essential with respect to prefers-reduced-motion\n        });\n      } else {\n        this.map.fitBounds(result.bbox, { zoom: 16 });\n      }\n\n      this.showResultsList = false;\n    },\n    searchPlace() {\n      if (this.searchTerm.length > 2) {\n        axios\n          .get(\n            `https://api.mapbox.com/geocoding/v5/mapbox.places/${this.searchTerm}.json?access_token=${this.accessToken}`\n          )\n          .then((response) => {\n            this.searchResults = response.data.features;\n            if (this.searchResults.length) {\n              this.showResultsList = true;\n            }\n          });\n      }\n    },\n  },\n  mounted() {\n    this.initMap();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../assets/scss/map-shared.scss\";\n.gazetteer {\n  z-index: 2;\n  margin-top: 62px;\n  padding: 1rem;\n  width: 350px;\n}\n.list-unstyled {\n  max-height: 300px;\n  overflow-x: hidden;\n  overflow-y: auto;\n\n  button {\n    text-align: left;\n    transition: background 250ms ease;\n    font-size: 0.8rem;\n    &:hover {\n      background: rgba(255, 255, 255, 0.05);\n    }\n  }\n}\n</style>\n","import { render } from \"./5-OpenStreetMap.vue?vue&type=template&id=d24eef90&scoped=true\"\nimport script from \"./5-OpenStreetMap.vue?vue&type=script&lang=js\"\nexport * from \"./5-OpenStreetMap.vue?vue&type=script&lang=js\"\n\nimport \"./5-OpenStreetMap.vue?vue&type=style&index=0&id=d24eef90&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/kellymarshall/Sites/30-day-map-challenge/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d24eef90\"]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./5-OpenStreetMap.vue?vue&type=style&index=0&id=d24eef90&lang=scss&scoped=true\""],"sourceRoot":""}