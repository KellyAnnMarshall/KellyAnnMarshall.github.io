{"version":3,"sources":["webpack:///./src/views/6-Red.vue?7693","webpack:///./src/views/6-Red.vue","webpack:///./src/views/6-Red.vue?53ed"],"names":["class","for","href","target","ref","selectedYear","years","year","index","key","data","accessToken","map","geojson","emissions","popup","watch","this","clearPopups","setPaint","methods","remove","setPaintProperty","initMap","bounds","Map","container","$refs","style","center","maxBounds","on","addSource","type","addLayer","id","source","paint","dragRotate","disable","touchZoomRotate","disableRotation","nav","NavigationControl","addControl","scrollZoom","e","country","features","properties","ADMIN","html","offset","openingAnimation","duration","easing","closingAnimation","closeButton","setLngLat","lngLat","setHTML","addTo","getCanvas","cursor","initYears","i","push","mounted","emission","forEach","feature","iso_code3","ISO_A3","item","value","__exports__","render"],"mappings":"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","file":"js/red.0aac1ee9.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./6-Red.vue?vue&type=style&index=0&id=55664ec6&lang=scss&scoped=true\"","<template>\n  <div class=\"position-relative h-100 w-100\">\n    <div class=\"map-header position-absolute text-light\">\n      <div class=\"d-flex align-items-center\">\n        <h2 class=\"h3 mb-0 text-nowrap\"><span>Day 06 - </span>Red</h2>\n        <label for=\"selectedYear\" class=\"ms-5 me-2\">Year:</label>\n        <select class=\"form-control\" v-model=\"selectedYear\">\n          <option v-for=\"(year, index) in years\" :key=\"index\">\n            {{ year }}\n          </option>\n        </select>\n      </div>\n    </div>\n\n    <dl class=\"map-source position-absolute d-flex\">\n      <dt class=\"me-1\">Source:</dt>\n      <dd class=\"text-break\">\n        <a href=\"https://www.climatewatchdata.org/\" target=\"_blank\"\n          >https://www.climatewatchdata.org/</a\n        >\n      </dd>\n    </dl>\n    <div ref=\"map-root\" class=\"basemap\"></div>\n  </div>\n</template>\n\n<script>\nimport mapboxgl from \"mapbox-gl\";\nimport \"mapbox-gl/src/css/mapbox-gl.css\";\nimport countries from \"../assets/countries.geojson\";\nimport emissions from \"../assets/emissions.json\";\nimport AnimatedPopup from \"mapbox-gl-animated-popup\";\n\nexport default {\n  data() {\n    return {\n      accessToken:\n        \"pk.eyJ1Ijoia21hcnNoYWxsIiwiYSI6ImNrdXdudGlpODI2ejkydXF2bXcyM3poaWQifQ.hyBCr6uwWlDGMGyVmuKCIw\",\n      map: null,\n      geojson: countries,\n      emissions: emissions,\n      selectedYear: 2018,\n      popup: null,\n      years: null,\n    };\n  },\n  watch: {\n    selectedYear() {\n      this.clearPopups();\n      this.setPaint();\n    },\n  },\n  methods: {\n    clearPopups() {\n      if (this.popup !== null) {\n        this.popup.remove();\n      }\n    },\n    setPaint() {\n      this.map.setPaintProperty(\"countries\", \"fill-color\", [\n        \"interpolate\",\n        [\"linear\"],\n        [\"get\", `CO2_${this.selectedYear}`],\n        0,\n        \"#000000\",\n        1000,\n        \"#1a0000\",\n        2000,\n        \"#330000\",\n        3000,\n        \"#4d0000\",\n        4000,\n        \"#660000\",\n        5000,\n        \"#800000\",\n        6000,\n        \"#990000\",\n        7000,\n        \"#b30000\",\n        8000,\n        \"#cc0000\",\n        9000,\n        \"#e60000\",\n        10000,\n        \"#ff0000\",\n      ]);\n    },\n    initMap() {\n      mapboxgl.accessToken = this.accessToken;\n      const bounds = [\n        [-191.95312499999778, -83.53996971923],\n        [191.95312499999864, 83.5399697192303],\n      ];\n      this.map = new mapboxgl.Map({\n        container: this.$refs[\"map-root\"],\n        style: \"mapbox://styles/mapbox/light-v10\",\n        center: [39.8596584, -12.7036393],\n        maxBounds: bounds,\n      });\n\n      this.map.on(\"load\", () => {\n        this.map.addSource(\"countries\", {\n          type: \"geojson\",\n          data: this.geojson,\n        });\n\n        this.map.addLayer({\n          id: \"countries\",\n          type: \"fill\",\n          source: \"countries\",\n          paint: {\n            \"fill-opacity\": [\n              \"case\",\n              [\"boolean\", [\"feature-state\", \"hover\"], false],\n              1.0,\n              0.7,\n            ],\n          },\n        });\n\n        this.setPaint();\n        // disable map rotation using right click + drag\n        this.map.dragRotate.disable();\n\n        // disable map rotation using touch rotation gesture\n        this.map.touchZoomRotate.disableRotation();\n      });\n\n      const nav = new mapboxgl.NavigationControl();\n      this.map.addControl(nav, \"top-right\");\n      this.map.scrollZoom.disable();\n\n      this.map.on(\"click\", \"countries\", (e) => {\n        this.clearPopups();\n        const country = e.features[0].properties.ADMIN;\n        const emissions = e.features[0].properties[`CO2_${this.selectedYear}`];\n        const html = `\n          <dl class=\"m-0\">\n            <dt>CO2 Emissions ${country} ${this.selectedYear}</dt>\n            <dd class=\"m-0\">${emissions} MtCO<sub>2</sub>e</dd>\n          </dl>\n          `;\n\n        if (emissions) {\n          this.popup = new AnimatedPopup({\n            offset: 5,\n            openingAnimation: {\n              duration: 500,\n              easing: \"easeOutElastic\",\n            },\n            closingAnimation: {\n              duration: 200,\n              easing: \"easeOutElastic\",\n            },\n            closeButton: false,\n          })\n            .setLngLat(e.lngLat)\n            .setHTML(html)\n            .addTo(this.map);\n        }\n      });\n      // Change the cursor to a pointer when the mouse is over the places layer.\n      this.map.on(\"mouseenter\", \"countries\", () => {\n        this.map.getCanvas().style.cursor = \"pointer\";\n      });\n\n      // Change it back to a pointer when it leaves.\n      this.map.on(\"mouseleave\", \"countries\", () => {\n        this.map.getCanvas().style.cursor = \"\";\n      });\n    },\n    initYears() {\n      let years = [];\n      for (let i = 1990; i < 2019; i++) {\n        years.push(i);\n      }\n      this.years = years;\n    },\n  },\n  mounted() {\n    this.initYears();\n    this.emissions.map((emission) => {\n      this.geojson.features.forEach((feature) => {\n        if (emission.iso_code3 === feature.properties.ISO_A3) {\n          emission.emissions.map((item) => {\n            feature.properties[`CO2_${item.year}`] = item.value;\n          });\n        }\n      });\n    });\n    this.initMap();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../assets/scss/map-shared.scss\";\n:deep(.mapboxgl-popup-content) {\n  color: #191919;\n  z-index: 3;\n  font-size: 1rem;\n  font-family: inherit;\n  max-width: unset;\n}\n</style>\n","import { render } from \"./6-Red.vue?vue&type=template&id=55664ec6&scoped=true\"\nimport script from \"./6-Red.vue?vue&type=script&lang=js\"\nexport * from \"./6-Red.vue?vue&type=script&lang=js\"\n\nimport \"./6-Red.vue?vue&type=style&index=0&id=55664ec6&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/kellymarshall/Sites/30-day-map-challenge/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-55664ec6\"]])\n\nexport default __exports__"],"sourceRoot":""}