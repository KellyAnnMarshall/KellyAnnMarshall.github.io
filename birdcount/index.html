<!DOCTYPE html>
<html lang="en" ng-app="app">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/lib/angular.js"></script>
    <script src="js/lib/chart.js"></script>
    <script src="js/lib/angular-chart.js"></script>
</head>

<body ng-controller="BirdController as $ctrl">
    <header>
        <div class="container">
            <div class="header-inner">
                <h1>Garden Bird Count</h1>
                <p>This was a quick app inspired by the annual <a
                        href="https://www.rspb.org.uk/get-involved/activities/birdwatch/" target="blank">RSPB Big
                        Garden Birdwatch</a> event. It's to help survey the various birds
                    visiting the garden over the course of an hour and also a way to help identify garden bird songs.
                    Try
                    clicking on the photos of the birds.</p>
                <p>The app is build using AngularJS, ChartJS and Bootstrap</p>
            </div>

        </div>
    </header>
    <main>
        <div class="sticky-top mb-3 search-wrapper">
            <div class="container">
                <form role="search">
                    <div class="input-group">
                        <input type="text" class="form-control form-control-lg" placeholder="Filter birds"
                            aria-label="Filter birds" ng-model="$ctrl.searchText">
                        <div class="input-group-append" ng-if="$ctrl.searchText.length">
                            <button type="button" class="input-group-text" ng-click="$ctrl.clearSearch()">Clear</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>


        <div class="container">
            <ul class="list row">
                <li class="col-md-6 col-lg-4" ng-repeat="bird in $ctrl.birdData | filter:{name: $ctrl.searchText}">
                    <div class="list-cards">
                        <h2>{{ bird.name }}</h2>
                        <div class="row">
                            <div class="col">
                                <img ng-src="images/{{ bird.shortname }}.png" ng-click="$ctrl.play(bird.id);">
                                <audio id="audio_{{bird.id}}" ng-src="{{bird.birdAudioPath | trustUrl}}"></audio>
                            </div>
                            <div class="col">
                                <div class="count align-items-center justify-content-center count-wrapper">
                                    {{ bird.count}}
                                </div>
                            </div>

                            <div class="col">
                                <div class="d-flex flex-column flex-md-row justify-content-between">
                                    <button type="button"
                                        class="btn btn-lg btn-secondary py-2 mb-3 mb-md-0 mt-md-3 mr-md-2"
                                        ng-click="$ctrl.addBird(bird);">+</button>
                                    <button type="button" class="btn btn-lg btn-secondary mt-md-3 py-2 ml-md-2"
                                        ng-click="$ctrl.removeBird(bird);">-</button>
                                </div>
                            </div>

                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div ng-show="$ctrl.showCount" class="chart-wrapper">
            <div class="container">
                <canvas id="canvas"></canvas>
            </div>
        </div>
    </main>

    <script src="js/app.js"></script>
    <script src="js/services/BirdService.js"></script>
    <script src="js/controllers/BirdController.js"></script>
</body>

</html>